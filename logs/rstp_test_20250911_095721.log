2025-09-11 09:57:21,011 - root - INFO - 日志系统初始化完成，日志文件: logs\rstp_test_20250911_095721.log
2025-09-11 09:57:21,209 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-11 09:57:21,210 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-11 09:57:21,329 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-11 09:57:21,329 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-11 09:57:21,470 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-11 09:57:21,471 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-11 09:57:21,471 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 09:57:21,472 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 09:57:21,472 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-11 09:57:21,472 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-11 09:57:21,527 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-11 09:57:21,528 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-11 09:57:31,654 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-11 09:57:31,654 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-11 09:57:31,655 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-11 09:57:31,655 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-11 09:57:31,655 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-11 09:57:31,711 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-11 09:57:31,711 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-11 09:57:41,833 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-11 09:57:41,833 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-11 09:57:41,833 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-11 09:57:41,834 - RSTPTest - INFO - ============================================================
2025-09-11 09:57:41,834 - RSTPTest - INFO - 开始测试: test_root_bridge_election
2025-09-11 09:57:41,834 - RSTPTest - INFO - ============================================================
2025-09-11 09:57:41,834 - test_protocol_conformance - INFO - 开始根网桥选举测试
2025-09-11 09:57:41,835 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 09:57:41,835 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 09:57:41,835 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 09:57:41,835 - NetworkTopology - INFO - DUT: 使用接口 ['br3', 'br4'] 创建网桥 SE_ETH2
2025-09-11 09:57:41,835 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 09:57:41,835 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 09:57:41,836 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 09:57:41,836 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 09:57:41,836 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 09:57:41,836 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 09:57:42,323 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 09:57:42,323 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 09:57:42,323 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 09:57:42,487 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 09:57:43,590 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 09:57:43,591 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 09:57:43,591 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 09:57:43,591 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 09:57:43,591 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 09:57:44,083 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 09:57:44,571 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 09:57:44,571 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 09:57:44,763 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 09:57:44,763 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 09:57:44,763 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 09:57:44,764 - NetworkTopology - INFO - TestNode1: 使用自动检测模式
2025-09-11 09:57:44,764 - NetworkTopology - INFO - TestNode1: 创建接口映射，需要接口: ['eth0', 'eth2']
2025-09-11 09:57:44,764 - NetworkTopology - INFO - TestNode1: 检测可用网络接口...
2025-09-11 09:57:44,819 - NetworkTopology - INFO - TestNode1: 检测到接口 - 物理: ['eth0', 'eth1', 'eth2'], 虚拟: ['lo', 'test_br', 'br0']
2025-09-11 09:57:44,819 - NetworkTopology - INFO - TestNode1: 接口映射结果: {'eth0': 'eth0', 'eth2': 'eth2'}
2025-09-11 09:57:55,037 - NetworkTopology - INFO - TestNode1: 自动映射 eth0 -> eth0
2025-09-11 09:58:05,249 - NetworkTopology - INFO - TestNode1: 自动映射 eth2 -> eth2
2025-09-11 09:58:05,250 - NetworkTopology - INFO - TestNode1: 自动检测最终可用接口: ['eth0', 'eth2']
2025-09-11 09:58:05,250 - NetworkTopology - INFO - TestNode1: 使用接口 ['eth0', 'eth2'] 创建网桥 br0
2025-09-11 09:58:05,250 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 09:58:05,250 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 09:58:05,251 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 09:58:05,251 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 09:58:05,251 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 09:58:35,635 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 10:00:07,787 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 10:00:17,873 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 10:00:17,874 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 10:00:17,874 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 10:00:17,874 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 10:00:17,874 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 10:01:24,736 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 10:02:05,054 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 10:02:05,055 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 10:02:05,149 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 10:02:15,358 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 10:02:15,359 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 10:02:15,359 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 10:02:15,360 - NetworkTopology - INFO - TestNode2: 使用自动检测模式
2025-09-11 10:02:15,360 - NetworkTopology - INFO - TestNode2: 创建接口映射，需要接口: ['eth0', 'eth2']
2025-09-11 10:02:15,360 - NetworkTopology - INFO - TestNode2: 检测可用网络接口...
2025-09-11 10:02:15,416 - NetworkTopology - INFO - TestNode2: 检测到接口 - 物理: ['eth0', 'eth1'], 虚拟: ['lo', 'br0']
2025-09-11 10:02:15,416 - NetworkTopology - INFO - TestNode2: 接口映射结果: {'eth0': 'eth0', 'eth2': 'eth1'}
2025-09-11 10:02:25,632 - NetworkTopology - INFO - TestNode2: 自动映射 eth0 -> eth0
2025-09-11 10:02:35,853 - NetworkTopology - INFO - TestNode2: 自动映射 eth2 -> eth1
2025-09-11 10:02:35,854 - NetworkTopology - INFO - TestNode2: 自动检测最终可用接口: ['eth0', 'eth1']
2025-09-11 10:02:35,854 - NetworkTopology - INFO - TestNode2: 使用接口 ['eth0', 'eth1'] 创建网桥 br0
2025-09-11 10:02:35,854 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 10:02:35,854 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 10:02:35,854 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 10:02:35,855 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 10:02:35,855 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 10:03:06,239 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 10:04:40,303 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 10:04:50,383 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 10:04:50,383 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 10:04:50,383 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 10:04:50,384 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth1']
2025-09-11 10:04:50,384 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 10:06:02,272 - NetworkTopology - INFO - 添加接口 eth1 到 TestNode2 的网桥
2025-09-11 10:06:12,848 - SSH_TestNode2 - WARNING - TestNode2: SSH连接已断开，尝试重连...
2025-09-11 10:06:33,890 - SSH_TestNode2 - WARNING - SSH连接失败 [TestNode2] (尝试 1/3): [WinError 10060] 由于连接方在一段时间后没有正确答复或连接的主机没有反应，连接尝试失败。
2025-09-11 10:06:59,928 - SSH_TestNode2 - WARNING - SSH连接失败 [TestNode2] (尝试 2/3): [WinError 10060] 由于连接方在一段时间后没有正确答复或连接的主机没有反应，连接尝试失败。
2025-09-11 10:07:25,978 - SSH_TestNode2 - WARNING - SSH连接失败 [TestNode2] (尝试 3/3): [WinError 10060] 由于连接方在一段时间后没有正确答复或连接的主机没有反应，连接尝试失败。
2025-09-11 10:07:25,978 - SSH_TestNode2 - ERROR - 无法连接到 TestNode2
2025-09-11 10:07:25,979 - SSH_TestNode2 - ERROR - TestNode2: SSH重连异常: TestNode2: SSH重连失败
2025-09-11 10:07:25,979 - NetworkTopology - ERROR - 配置节点 TestNode2 失败: TestNode2: SSH连接不可用: TestNode2: SSH重连失败
2025-09-11 10:07:26,471 - RSTPTest - INFO - 测试完成: test_root_bridge_election (耗时: 584.64秒)
2025-09-11 10:07:26,471 - RSTPTest - INFO - ============================================================

2025-09-11 10:07:26,472 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-11 10:07:26,472 - SSH_DUT - INFO - SSH连接已关闭: DUT
