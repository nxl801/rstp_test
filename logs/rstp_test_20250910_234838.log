2025-09-10 23:48:38,184 - root - INFO - 日志系统初始化完成，日志文件: logs\rstp_test_20250910_234838.log
2025-09-10 23:48:38,383 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 23:48:38,383 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 23:48:38,505 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 23:48:38,505 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 23:48:38,637 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 23:48:38,638 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 23:48:38,638 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 23:48:38,638 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-10 23:48:38,639 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 23:48:38,639 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 23:48:38,694 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 23:48:38,695 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 23:48:38,861 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 23:48:38,862 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 23:48:38,862 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 23:48:38,862 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 23:48:38,862 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 23:48:39,072 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 23:48:39,072 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 23:48:39,240 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 23:48:39,240 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 23:48:39,240 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 23:48:39,241 - RSTPTest - INFO - ============================================================
2025-09-10 23:48:39,241 - RSTPTest - INFO - 开始测试: test_backup_port_simulation
2025-09-10 23:48:39,241 - RSTPTest - INFO - ============================================================
2025-09-10 23:48:39,242 - test_enhanced_rstp_coverage - INFO - 开始备份端口模拟测试
2025-09-10 23:48:39,242 - test_enhanced_rstp_coverage - INFO - 创建模拟共享网段拓扑
2025-09-10 23:48:40,114 - test_enhanced_rstp_coverage - INFO - ✓ 创建连接: SE_ETH2:dut_port1 <-> shared_segment:shared_port1
2025-09-10 23:48:40,743 - test_enhanced_rstp_coverage - INFO - ✓ 创建连接: SE_ETH2:dut_port2 <-> shared_segment:shared_port2
2025-09-10 23:48:41,909 - test_enhanced_rstp_coverage - INFO - ✓ 创建远程交换机: remote_switch
2025-09-10 23:48:41,910 - test_enhanced_rstp_coverage - INFO - 等待RSTP收敛...
2025-09-10 23:48:57,331 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:48:57,483 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  dut_port2  Backup     Discarding 2000     128.4
  br4        Designated Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2
  dut_port1  Designated Forwarding 2000     128.3


2025-09-10 23:48:57,484 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 0
2025-09-10 23:48:57,485 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 23:48:57,485 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 0000/90:12:10:b5:7d:f7
2025-09-10 23:48:57,485 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 0000/90:12:10:b5:7d:f7
2025-09-10 23:48:57,949 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:48:57,949 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 5(dut_port1): addr:7e:a0:93:6b:f7:82
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 6(dut_port2): addr:e2:48:b5:df:0f:04
     config:     0
     state:      0
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:48:57,951 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:48:57,951 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:48:57,951 - RSTPAnalyzer_DUT - INFO - 找到端口: dut_port1 (从行:  5(dut_port1): addr:7e:a0:93:6b:f7:82)
2025-09-10 23:48:57,952 - RSTPAnalyzer_DUT - INFO - 找到端口: dut_port2 (从行:  6(dut_port2): addr:e2:48:b5:df:0f:04)
2025-09-10 23:48:57,952 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:48:57,952 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'dut_port1', 'dut_port2', 'SE_ETH2']
2025-09-10 23:48:58,431 - test_enhanced_rstp_coverage - INFO - DUT桥信息: BridgeInfo(bridge_id='0000/90:12:10:b5:7d:f7', root_id='0000/90:12:10:b5:7d:f7', root_port='', root_path_cost=0, protocol_version='rstp', hello_time=2, forward_delay=15, max_age=20, topology_changes=0, ports={'br3': PortInfo(name='br3', role=<PortRole.DESIGNATED: 'designated'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'br4': PortInfo(name='br4', role=<PortRole.DESIGNATED: 'designated'>, state=<PortState.FORWARDING: 'forwarding'>, path_cost=0, designated_bridge='', designated_port=''), 'dut_port1': PortInfo(name='dut_port1', role=<PortRole.DESIGNATED: 'designated'>, state=<PortState.FORWARDING: 'forwarding'>, path_cost=0, designated_bridge='', designated_port=''), 'dut_port2': PortInfo(name='dut_port2', role=<PortRole.DESIGNATED: 'designated'>, state=<PortState.FORWARDING: 'forwarding'>, path_cost=0, designated_bridge='', designated_port=''), 'SE_ETH2': PortInfo(name='SE_ETH2', role=<PortRole.DESIGNATED: 'designated'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')})
2025-09-10 23:48:58,431 - test_enhanced_rstp_coverage - INFO - 找到 2 个连接到共享网段的端口
2025-09-10 23:48:58,431 - test_enhanced_rstp_coverage - INFO - Designated端口: ['dut_port1', 'dut_port2']
2025-09-10 23:48:58,432 - test_enhanced_rstp_coverage - INFO - Backup端口: []
2025-09-10 23:48:58,432 - test_enhanced_rstp_coverage - WARNING - 未检测到Backup Port或阻塞端口，可能是OVS实现限制
2025-09-10 23:48:58,432 - test_enhanced_rstp_coverage - INFO - 测试备份端口故障切换
2025-09-10 23:48:58,432 - test_enhanced_rstp_coverage - INFO - 清理测试环境
2025-09-10 23:48:59,344 - test_enhanced_rstp_coverage - INFO - ✓ 备份端口模拟测试完成
2025-09-10 23:48:59,345 - RSTPTest - INFO - 测试完成: test_backup_port_simulation (耗时: 20.10秒)
2025-09-10 23:48:59,345 - RSTPTest - INFO - ============================================================

2025-09-10 23:48:59,347 - RSTPTest - INFO - ============================================================
2025-09-10 23:48:59,347 - RSTPTest - INFO - 开始测试: test_comprehensive_port_state_transitions
2025-09-10 23:48:59,347 - RSTPTest - INFO - ============================================================
2025-09-10 23:48:59,348 - test_enhanced_rstp_coverage - INFO - 开始全面端口状态转换测试
2025-09-10 23:48:59,348 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 23:48:59,348 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 23:48:59,348 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 23:48:59,348 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 23:48:59,348 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 23:48:59,349 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 23:48:59,349 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 23:48:59,349 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-10 23:48:59,349 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-10 23:48:59,865 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-10 23:48:59,865 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 23:48:59,866 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 23:49:00,020 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-10 23:49:01,104 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-10 23:49:01,105 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 23:49:01,105 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 23:49:01,105 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 23:49:01,105 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-10 23:49:01,589 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-10 23:49:02,081 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 23:49:02,081 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 23:49:02,273 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 23:49:02,273 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 23:49:02,273 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 23:49:02,274 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 23:49:02,274 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 23:49:02,274 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 23:49:02,274 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 23:49:02,274 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 23:49:02,764 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 23:49:07,279 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:49:07,412 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:49:07,413 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 23:49:07,413 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 23:49:07,413 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 23:49:07,413 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 23:49:08,602 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 23:49:09,790 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 23:49:09,790 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 23:49:09,885 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 23:49:10,152 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 23:49:10,152 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 23:49:10,152 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 23:49:10,153 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 23:49:10,153 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 23:49:10,153 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 23:49:10,153 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 23:49:10,153 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 23:49:10,694 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 23:49:15,203 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:49:15,332 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:49:15,333 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 23:49:15,333 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 23:49:15,333 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 23:49:15,333 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 23:49:16,519 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 23:49:17,771 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 23:49:17,772 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 23:49:17,869 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 23:49:18,140 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 23:49:18,140 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 23:49:18,140 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-10 23:49:18,141 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 4096 (方法: mstpd)
2025-09-10 23:49:18,141 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级4096 -> mstpd优先级1)
2025-09-10 23:49:18,285 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-10 23:49:18,285 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 8192 (方法: ovs)
2025-09-10 23:49:18,285 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-10 23:49:18,401 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-10 23:49:18,572 - test_enhanced_rstp_coverage - INFO - 等待初始收敛...
2025-09-10 23:49:18,572 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 23:49:19,011 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:49:19,163 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:49:19,164 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-10 23:49:19,164 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 23:49:19,165 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-10 23:49:19,165 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 23:49:19,624 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:49:19,625 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:49:19,627 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:49:19,627 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:49:19,627 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:49:19,628 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:49:19,913 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.34秒
2025-09-10 23:49:20,370 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:49:20,527 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:49:20,528 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-10 23:49:20,528 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 23:49:20,528 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-10 23:49:20,528 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 23:49:20,989 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:49:20,989 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:49:20,990 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:49:20,990 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:49:20,990 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:49:20,991 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:49:21,277 - test_enhanced_rstp_coverage - INFO - === 测试场景1: 端口重启状态转换 ===
2025-09-10 23:49:21,278 - test_enhanced_rstp_coverage - INFO - 使用端口br4进行重启测试
2025-09-10 23:49:21,735 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:49:21,891 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:49:21,892 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-10 23:49:21,892 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 23:49:21,892 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-10 23:49:21,892 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 23:49:22,353 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:49:22,353 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:49:22,354 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:49:22,354 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:49:22,355 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:49:22,355 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:49:36,983 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:49:37,135 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Disabled   Discarding 2000     64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:49:37,136 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 23:49:37,136 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 23:49:37,136 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 23:49:37,136 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 23:49:37,593 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:49:37,593 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:49:37,594 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:49:37,594 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:49:37,594 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:49:37,594 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:49:37,881 - test_enhanced_rstp_coverage - INFO - 端口br4状态转换: disabled
2025-09-10 23:49:40,295 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:49:40,447 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Disabled   Discarding 2000     64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:49:40,448 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 23:49:40,448 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 23:49:40,448 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 23:49:40,448 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 23:49:41,111 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:49:41,111 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:49:41,112 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:49:41,112 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:49:41,112 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:49:41,113 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:49:43,879 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:49:44,030 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:49:44,031 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-10 23:49:44,031 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 23:49:44,032 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-10 23:49:44,032 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 23:49:44,492 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:49:44,493 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:49:44,494 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:49:44,494 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:49:44,494 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:49:44,495 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:49:44,793 - test_enhanced_rstp_coverage - INFO - 端口br4状态转换: discarding
2025-09-10 23:49:47,198 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:49:47,350 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:49:47,351 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-10 23:49:47,351 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 23:49:47,351 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-10 23:49:47,352 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 23:49:47,817 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:49:47,817 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:49:47,818 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:49:47,819 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:49:47,819 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:49:47,819 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:49:50,518 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:49:50,670 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:49:50,671 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-10 23:49:50,671 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 23:49:50,671 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-10 23:49:50,672 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 23:49:51,127 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:49:51,128 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:49:51,129 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:49:51,130 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:49:51,130 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:49:51,130 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:49:53,417 - test_enhanced_rstp_coverage - INFO - 端口重启状态转换: ['discarding', 'disabled', 'discarding']
2025-09-10 23:49:53,418 - test_enhanced_rstp_coverage - INFO - 重启场景状态转换验证
2025-09-10 23:49:53,418 - test_enhanced_rstp_coverage - WARNING - 重启: 检测到可能的异常转换: [(<PortState.DISCARDING: 'discarding'>, <PortState.DISABLED: 'disabled'>)]
2025-09-10 23:49:53,418 - test_enhanced_rstp_coverage - INFO - === 测试场景2: 强制Learning状态 ===
2025-09-10 23:49:53,476 - test_enhanced_rstp_coverage - INFO - 原始Forward Delay: 4
2025-09-10 23:49:54,038 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:49:54,194 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:49:54,195 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-10 23:49:54,195 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 23:49:54,195 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-10 23:49:54,196 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 23:49:54,656 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:49:54,656 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:49:54,658 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:49:54,658 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:49:54,658 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:49:54,658 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:50:09,181 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:50:09,337 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Disabled   Discarding 2000     64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:50:09,338 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 23:50:09,339 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 23:50:09,339 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 23:50:09,339 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 23:50:09,803 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:50:09,804 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:50:09,805 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:50:09,805 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:50:09,806 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:50:09,806 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:50:10,092 - test_enhanced_rstp_coverage - INFO - 端口br4状态转换: disabled
2025-09-10 23:50:12,514 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:50:12,665 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Discarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:50:12,666 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 23:50:12,666 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 23:50:12,667 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 23:50:12,667 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 23:50:13,127 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:50:13,128 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:50:13,129 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:50:13,129 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:50:13,129 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:50:13,129 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:50:13,416 - test_enhanced_rstp_coverage - INFO - 端口br4状态转换: forwarding
2025-09-10 23:50:15,838 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:50:15,990 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:50:15,991 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 23:50:15,991 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 23:50:15,992 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 23:50:15,992 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 23:50:16,446 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:50:16,447 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:50:16,448 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:50:16,448 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:50:16,448 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:50:16,449 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:50:18,732 - test_enhanced_rstp_coverage - INFO - Learning状态转换: ['discarding', 'disabled', 'forwarding']
2025-09-10 23:50:18,733 - test_enhanced_rstp_coverage - WARNING - 未观察到Learning状态，可能是快速转换
2025-09-10 23:50:18,802 - test_enhanced_rstp_coverage - INFO - === 测试场景3: 拓扑变更状态转换 ===
2025-09-10 23:50:19,258 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:50:19,410 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:50:19,411 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 23:50:19,412 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 23:50:19,412 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 23:50:19,412 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 23:50:19,872 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:50:19,872 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:50:19,873 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:50:19,873 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:50:19,873 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:50:19,873 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:50:20,160 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-10 23:50:20,160 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级12288 -> mstpd优先级3)
2025-09-10 23:50:20,290 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-10 23:50:20,710 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:50:20,862 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:50:20,863 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 23:50:20,863 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 23:50:20,863 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 23:50:20,863 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 23:50:21,323 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:50:21,324 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:50:21,325 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:50:21,325 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:50:21,325 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:50:21,325 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:50:24,026 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:50:24,178 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:50:24,179 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 23:50:24,179 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 23:50:24,179 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 23:50:24,179 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 23:50:24,635 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:50:24,635 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:50:24,636 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:50:24,637 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:50:24,637 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:50:24,637 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:50:27,341 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:50:27,493 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:50:27,495 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 23:50:27,495 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 23:50:27,495 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 23:50:27,495 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 23:50:27,946 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:50:27,947 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:50:27,948 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:50:27,948 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:50:27,948 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:50:27,949 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:50:30,642 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:50:30,798 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:50:30,799 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 23:50:30,799 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 23:50:30,799 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 23:50:30,799 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 23:50:31,255 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:50:31,255 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:50:31,256 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:50:31,256 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:50:31,257 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:50:31,257 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:50:33,957 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:50:34,105 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:50:34,106 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 23:50:34,106 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 23:50:34,107 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 23:50:34,107 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 23:50:34,567 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:50:34,567 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:50:34,568 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:50:34,569 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:50:34,569 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:50:34,569 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:50:37,278 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:50:37,425 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:50:37,426 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 23:50:37,426 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 23:50:37,426 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 23:50:37,426 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 23:50:37,895 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:50:37,895 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:50:37,896 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:50:37,896 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:50:37,896 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:50:37,897 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:50:40,184 - test_enhanced_rstp_coverage - INFO - 拓扑变更状态转换: ['forwarding']
2025-09-10 23:50:40,598 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:50:40,749 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:50:40,750 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 23:50:40,751 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 23:50:40,751 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 23:50:40,751 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 23:50:41,215 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:50:41,215 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:50:41,216 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:50:41,216 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:50:41,216 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:50:41,217 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:50:41,500 - test_enhanced_rstp_coverage - INFO - ✓ 拓扑变更后端口br4最终状态: forwarding
2025-09-10 23:50:41,500 - test_enhanced_rstp_coverage - INFO - ✓ 全面端口状态转换测试完成
2025-09-10 23:50:41,501 - RSTPTest - INFO - 测试完成: test_comprehensive_port_state_transitions (耗时: 102.15秒)
2025-09-10 23:50:41,501 - RSTPTest - INFO - ============================================================

2025-09-10 23:50:41,503 - RSTPTest - INFO - ============================================================
2025-09-10 23:50:41,503 - RSTPTest - INFO - 开始测试: test_detailed_bpdu_analysis
2025-09-10 23:50:41,503 - RSTPTest - INFO - ============================================================
2025-09-10 23:50:41,504 - test_enhanced_rstp_coverage - INFO - 开始详细BPDU分析测试
2025-09-10 23:50:41,504 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 23:50:41,504 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 23:50:41,504 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 23:50:41,504 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 23:50:41,504 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 23:50:41,504 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 23:50:41,505 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 23:50:41,505 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-10 23:50:41,505 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-10 23:50:42,027 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-10 23:50:42,028 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 23:50:42,028 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 23:50:42,183 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-10 23:50:43,275 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-10 23:50:43,275 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 23:50:43,276 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 23:50:43,276 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 23:50:43,276 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-10 23:50:43,751 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-10 23:50:44,228 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 23:50:44,228 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 23:50:44,419 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 23:50:44,419 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 23:50:44,419 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 23:50:44,420 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 23:50:44,420 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 23:50:44,420 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 23:50:44,420 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 23:50:44,420 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 23:50:44,931 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 23:50:49,409 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:50:49,546 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:50:49,546 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 23:50:49,546 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 23:50:49,547 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 23:50:49,547 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 23:50:50,736 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 23:50:51,938 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 23:50:51,938 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 23:50:52,035 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 23:50:52,314 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 23:50:52,314 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 23:50:52,314 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 23:50:52,315 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 23:50:52,315 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 23:50:52,315 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 23:50:52,315 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 23:50:52,315 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 23:50:52,814 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 23:50:57,336 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:50:57,476 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:50:57,476 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 23:50:57,476 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 23:50:57,476 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 23:50:57,477 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 23:50:58,679 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 23:50:59,899 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 23:50:59,900 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 23:50:59,997 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 23:51:00,263 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 23:51:00,263 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 23:51:00,264 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-10 23:51:00,264 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 4096 (方法: mstpd)
2025-09-10 23:51:00,264 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级4096 -> mstpd优先级1)
2025-09-10 23:51:00,391 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-10 23:51:00,392 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 8192 (方法: ovs)
2025-09-10 23:51:00,392 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-10 23:51:00,502 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-10 23:51:00,674 - NetworkTopology_TestNode2 - INFO - TestNode2: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-10 23:51:00,674 - NetworkTopology_TestNode2 - INFO - TestNode2: 执行mstpd设置优先级命令 (标准优先级12288 -> mstpd优先级3)
2025-09-10 23:51:00,806 - NetworkTopology_TestNode2 - INFO - TestNode2: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-10 23:51:00,807 - test_enhanced_rstp_coverage - INFO - 等待RSTP收敛...
2025-09-10 23:51:00,807 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 23:51:01,217 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:51:01,369 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:51:01,370 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 23:51:01,370 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 23:51:01,370 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 23:51:01,370 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 23:51:01,830 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:51:01,830 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:51:01,831 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:51:01,832 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:51:01,832 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:51:01,832 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:51:02,120 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.31秒
2025-09-10 23:51:02,577 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:51:02,728 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:51:02,729 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 23:51:02,730 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 23:51:02,730 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 23:51:02,730 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 23:51:03,190 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:51:03,190 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:51:03,191 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:51:03,192 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:51:03,192 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:51:03,192 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:51:03,479 - test_enhanced_rstp_coverage - INFO - Hello Time: 2秒
2025-09-10 23:51:03,480 - test_enhanced_rstp_coverage - INFO - === 测试1: 验证分布式BPDU生成 ===
2025-09-10 23:51:03,480 - test_enhanced_rstp_coverage - INFO - 在端口br4上捕获BPDU
2025-09-10 23:51:03,480 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br4, 数量: 10)
2025-09-10 23:51:15,628 - RSTPAnalyzer_DUT - INFO - 捕获到 5 个BPDU包
2025-09-10 23:51:15,628 - test_enhanced_rstp_coverage - INFO - 端口br4捕获到5个BPDU
2025-09-10 23:51:15,628 - test_enhanced_rstp_coverage - INFO - 总共捕获5个BPDU，来自0个不同源
2025-09-10 23:51:15,629 - test_enhanced_rstp_coverage - WARNING - 只检测到一个BPDU源，可能是拓扑限制
2025-09-10 23:51:15,629 - test_enhanced_rstp_coverage - INFO - === 测试2: 验证BPDU保活机制 ===
2025-09-10 23:51:15,629 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br4, 数量: 10)
2025-09-10 23:51:21,760 - RSTPAnalyzer_DUT - INFO - 捕获到 2 个BPDU包
2025-09-10 23:51:21,760 - test_enhanced_rstp_coverage - INFO - 正常情况下6秒内收到2个BPDU
2025-09-10 23:51:21,760 - test_enhanced_rstp_coverage - INFO - 模拟邻居故障，断开端口br4
2025-09-10 23:51:45,583 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br4, 数量: 10)
2025-09-10 23:51:49,679 - RSTPAnalyzer_DUT - INFO - 捕获到 1 个BPDU包
2025-09-10 23:51:49,680 - test_enhanced_rstp_coverage - INFO - 恢复后4秒内收到1个BPDU
2025-09-10 23:51:49,680 - test_enhanced_rstp_coverage - INFO - ✓ BPDU保活机制验证成功
2025-09-10 23:51:49,680 - test_enhanced_rstp_coverage - INFO - === 测试3: BPDU内容验证 ===
2025-09-10 23:51:49,680 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br4, 数量: 3)
2025-09-10 23:51:54,939 - RSTPAnalyzer_DUT - INFO - 捕获到 3 个BPDU包
2025-09-10 23:51:54,940 - test_enhanced_rstp_coverage - INFO - BPDU 1 分析:
2025-09-10 23:51:54,940 - test_enhanced_rstp_coverage - WARNING -   缺少字段: bridge_id
2025-09-10 23:51:54,940 - test_enhanced_rstp_coverage - WARNING -   缺少字段: root_id
2025-09-10 23:51:54,940 - test_enhanced_rstp_coverage - WARNING -   缺少字段: root_path_cost
2025-09-10 23:51:54,940 - test_enhanced_rstp_coverage - WARNING -   未检测到RSTP特有字段
2025-09-10 23:51:54,940 - test_enhanced_rstp_coverage - INFO - BPDU 2 分析:
2025-09-10 23:51:54,941 - test_enhanced_rstp_coverage - WARNING -   缺少字段: bridge_id
2025-09-10 23:51:54,941 - test_enhanced_rstp_coverage - WARNING -   缺少字段: root_id
2025-09-10 23:51:54,941 - test_enhanced_rstp_coverage - WARNING -   缺少字段: root_path_cost
2025-09-10 23:51:54,941 - test_enhanced_rstp_coverage - WARNING -   未检测到RSTP特有字段
2025-09-10 23:51:54,941 - test_enhanced_rstp_coverage - INFO - BPDU 3 分析:
2025-09-10 23:51:54,941 - test_enhanced_rstp_coverage - WARNING -   缺少字段: bridge_id
2025-09-10 23:51:54,942 - test_enhanced_rstp_coverage - WARNING -   缺少字段: root_id
2025-09-10 23:51:54,942 - test_enhanced_rstp_coverage - WARNING -   缺少字段: root_path_cost
2025-09-10 23:51:54,942 - test_enhanced_rstp_coverage - WARNING -   未检测到RSTP特有字段
2025-09-10 23:51:54,942 - test_enhanced_rstp_coverage - INFO - ✓ 详细BPDU分析测试完成
2025-09-10 23:51:54,943 - RSTPTest - INFO - 测试完成: test_detailed_bpdu_analysis (耗时: 73.44秒)
2025-09-10 23:51:54,943 - RSTPTest - INFO - ============================================================

2025-09-10 23:51:54,944 - RSTPTest - INFO - ============================================================
2025-09-10 23:51:54,944 - RSTPTest - INFO - 开始测试: test_topology_change_comprehensive
2025-09-10 23:51:54,945 - RSTPTest - INFO - ============================================================
2025-09-10 23:51:54,945 - test_enhanced_rstp_coverage - INFO - 开始全面拓扑变更测试
2025-09-10 23:51:54,945 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 23:51:54,945 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 23:51:54,946 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 23:51:54,946 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 23:51:54,946 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 23:51:54,946 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 23:51:54,946 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 23:51:54,946 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-10 23:51:54,946 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-10 23:51:55,486 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-10 23:51:55,486 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 23:51:55,487 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 23:51:55,642 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-10 23:51:56,754 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-10 23:51:56,754 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 23:51:56,754 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 23:51:56,754 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 23:51:56,755 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-10 23:51:57,257 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-10 23:51:57,742 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 23:51:57,743 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 23:51:57,943 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 23:51:57,943 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 23:51:57,943 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 23:51:57,944 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 23:51:57,944 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 23:51:57,944 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 23:51:57,944 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 23:51:57,944 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 23:51:58,446 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 23:52:02,952 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:52:03,080 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:52:03,080 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 23:52:03,080 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 23:52:03,080 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 23:52:03,081 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 23:52:04,270 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 23:52:05,483 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 23:52:05,484 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 23:52:05,580 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 23:52:05,840 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 23:52:05,841 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 23:52:05,841 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 23:52:05,841 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 23:52:05,841 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 23:52:05,841 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 23:52:05,841 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 23:52:05,842 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 23:52:06,345 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 23:52:10,860 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:52:10,984 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:52:10,984 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 23:52:10,985 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 23:52:10,985 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 23:52:10,985 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 23:52:12,172 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 23:52:13,378 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 23:52:13,378 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 23:52:13,473 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 23:52:13,738 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 23:52:13,739 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 23:52:13,739 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-10 23:52:13,739 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 4096 (方法: mstpd)
2025-09-10 23:52:13,739 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级4096 -> mstpd优先级1)
2025-09-10 23:52:13,878 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-10 23:52:13,878 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 8192 (方法: ovs)
2025-09-10 23:52:13,878 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-10 23:52:13,990 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-10 23:52:14,160 - test_enhanced_rstp_coverage - INFO - 等待初始收敛...
2025-09-10 23:52:14,161 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 23:52:14,604 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:52:14,760 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:52:14,761 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-10 23:52:14,761 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 23:52:14,761 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-10 23:52:14,761 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 23:52:15,234 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:52:15,234 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:52:15,235 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:52:15,236 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:52:15,236 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:52:15,236 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:52:15,530 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.37秒
2025-09-10 23:52:16,000 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:52:16,148 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:52:16,149 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-10 23:52:16,149 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 23:52:16,149 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-10 23:52:16,150 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 23:52:16,613 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:52:16,613 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:52:16,615 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:52:16,615 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:52:16,615 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:52:16,616 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:52:17,359 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:52:17,516 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:52:17,517 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-10 23:52:17,517 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 23:52:17,518 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-10 23:52:17,518 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 23:52:18,001 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:52:18,002 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:52:18,003 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:52:18,003 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:52:18,003 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:52:18,003 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:52:18,302 - RSTPAnalyzer_DUT - INFO - Root ID为unknown，判定为非根桥
2025-09-10 23:52:18,303 - test_enhanced_rstp_coverage - INFO - 初始状态: DUT是根桥=False
2025-09-10 23:52:18,303 - test_enhanced_rstp_coverage - INFO - === 测试场景1: 根桥变更 ===
2025-09-10 23:52:18,303 - test_enhanced_rstp_coverage - INFO - 将DUT设置为根桥
2025-09-10 23:52:18,303 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 1024 (方法: ovs)
2025-09-10 23:52:18,303 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-10 23:52:18,473 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-10 23:52:24,036 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:52:24,188 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:52:24,189 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 0
2025-09-10 23:52:24,189 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 23:52:24,189 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 0000/90:12:10:b5:7d:f7
2025-09-10 23:52:24,189 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 0000/90:12:10:b5:7d:f7
2025-09-10 23:52:24,645 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:52:24,645 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:52:24,646 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:52:24,646 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:52:24,646 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:52:24,647 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:52:25,416 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:52:25,572 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:52:25,573 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 0
2025-09-10 23:52:25,573 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 23:52:25,573 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 0000/90:12:10:b5:7d:f7
2025-09-10 23:52:25,573 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 0000/90:12:10:b5:7d:f7
2025-09-10 23:52:26,046 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:52:26,046 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:52:26,047 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:52:26,047 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:52:26,047 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:52:26,048 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:52:26,338 - RSTPAnalyzer_DUT - INFO - 根桥检查: bridge_id='0000/90:12:10:b5:7d:f7', root_id='0000/90:12:10:b5:7d:f7', is_root=True
2025-09-10 23:52:26,338 - test_enhanced_rstp_coverage - INFO - ✓ 检测到根桥变更
2025-09-10 23:52:26,339 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br4, 数量: 5)
2025-09-10 23:52:35,695 - RSTPAnalyzer_DUT - INFO - 捕获到 5 个BPDU包
2025-09-10 23:52:35,695 - test_enhanced_rstp_coverage - INFO - === 测试场景2: 端口故障恢复 ===
2025-09-10 23:52:36,156 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:52:36,311 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:52:36,313 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 0
2025-09-10 23:52:36,313 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 23:52:36,313 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 0000/90:12:10:b5:7d:f7
2025-09-10 23:52:36,313 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 0000/90:12:10:b5:7d:f7
2025-09-10 23:52:36,781 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:52:36,782 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:52:36,783 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:52:36,783 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:52:36,783 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:52:36,783 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:52:37,074 - test_enhanced_rstp_coverage - INFO - 测试端口br4故障恢复
2025-09-10 23:52:59,235 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:52:59,387 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Disabled   Discarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:52:59,388 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 0
2025-09-10 23:52:59,388 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 23:52:59,388 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 0000/90:12:10:b5:7d:f7
2025-09-10 23:52:59,389 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 0000/90:12:10:b5:7d:f7
2025-09-10 23:52:59,845 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:52:59,846 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:52:59,847 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:52:59,847 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:52:59,847 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:52:59,847 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:53:00,133 - test_enhanced_rstp_coverage - INFO - ✓ 端口故障引起拓扑变更
2025-09-10 23:53:10,663 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:53:10,811 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:53:10,812 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 0
2025-09-10 23:53:10,812 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 23:53:10,812 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 0000/90:12:10:b5:7d:f7
2025-09-10 23:53:10,813 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 0000/90:12:10:b5:7d:f7
2025-09-10 23:53:11,277 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:53:11,277 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:53:11,278 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:53:11,278 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:53:11,279 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:53:11,279 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:53:11,565 - test_enhanced_rstp_coverage - INFO - ✓ 端口br4成功恢复，状态: forwarding
2025-09-10 23:53:11,566 - test_enhanced_rstp_coverage - INFO - === 测试场景3: 端口优先级变更 ===
2025-09-10 23:53:12,027 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:53:12,183 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:53:12,184 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 0
2025-09-10 23:53:12,184 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 23:53:12,185 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 0000/90:12:10:b5:7d:f7
2025-09-10 23:53:12,185 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 0000/90:12:10:b5:7d:f7
2025-09-10 23:53:12,644 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:53:12,644 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:53:12,646 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:53:12,646 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:53:12,647 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:53:12,647 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:53:12,934 - test_enhanced_rstp_coverage - INFO - 修改端口br4优先级
2025-09-10 23:53:21,442 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:53:21,595 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:53:21,596 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 0
2025-09-10 23:53:21,596 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 23:53:21,596 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 0000/90:12:10:b5:7d:f7
2025-09-10 23:53:21,597 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 0000/90:12:10:b5:7d:f7
2025-09-10 23:53:22,057 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:53:22,058 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:53:22,059 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:53:22,059 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:53:22,059 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:53:22,060 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:53:22,345 - test_enhanced_rstp_coverage - INFO - 端口br4优先级变更后状态: forwarding
2025-09-10 23:53:22,346 - test_enhanced_rstp_coverage - INFO - ✓ 拓扑变更测试通过：成功检测到多种拓扑变更
2025-09-10 23:53:22,346 - test_enhanced_rstp_coverage - INFO - ✓ 全面拓扑变更测试完成
2025-09-10 23:53:22,347 - RSTPTest - INFO - 测试完成: test_topology_change_comprehensive (耗时: 87.40秒)
2025-09-10 23:53:22,347 - RSTPTest - INFO - ============================================================

2025-09-10 23:53:22,348 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 23:53:22,348 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 23:53:22,348 - SSH_DUT - INFO - SSH连接已关闭: DUT
