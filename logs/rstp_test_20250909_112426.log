2025-09-09 11:24:26,321 - root - INFO - 日志系统初始化完成，日志文件: logs\rstp_test_20250909_112426.log
2025-09-09 11:24:26,902 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 11:24:26,903 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 11:24:27,522 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 11:24:27,522 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 11:24:27,848 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 11:24:27,848 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 11:24:27,859 - RSTPTest - INFO - ============================================================
2025-09-09 11:24:27,859 - RSTPTest - INFO - 开始测试: test_port_state_transitions
2025-09-09 11:24:27,860 - RSTPTest - INFO - ============================================================
2025-09-09 11:24:27,862 - test_additional_rstp - INFO - 开始端口状态转换测试
2025-09-09 11:24:27,863 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 11:24:27,863 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 11:24:27,863 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 11:24:27,864 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 11:24:27,864 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 11:24:27,865 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 11:24:27,865 - NetworkTopology - INFO - DUT: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 11:24:27,866 - NetworkTopology - INFO - DUT: 检查mstpd支持...
2025-09-09 11:24:27,872 - NetworkTopology - INFO - DUT: mstpd检查结果: code=1
2025-09-09 11:24:27,873 - NetworkTopology - INFO - DUT: 检查iproute2支持...
2025-09-09 11:24:27,921 - NetworkTopology - INFO - DUT: ip命令检查: code=0
2025-09-09 11:24:27,922 - NetworkTopology - INFO - DUT: 使用iproute2配置RSTP
2025-09-09 11:24:27,922 - NetworkTopology - INFO - DUT: 最终选择RSTP方法: iproute2
2025-09-09 11:24:27,923 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 11:24:27,923 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 11:24:28,228 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 11:24:28,619 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 11:24:28,620 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 11:24:28,620 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 11:24:28,620 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 11:24:28,735 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 11:24:28,851 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 11:24:28,852 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 11:24:28,908 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 11:24:28,957 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 11:24:29,004 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 11:24:29,005 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 11:24:29,005 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 11:24:29,005 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 11:24:29,005 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 11:24:29,006 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 11:24:29,006 - NetworkTopology - INFO - TestNode1: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 11:24:29,006 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 11:24:29,024 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 11:24:29,024 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 11:24:29,255 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=1, output=
2025-09-09 11:24:29,256 - NetworkTopology - INFO - TestNode1: 尝试启动mstpd服务...
2025-09-09 11:24:29,688 - NetworkTopology - INFO - TestNode1: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 11:24:31,833 - NetworkTopology - INFO - TestNode1: mstpd启动后状态: code=1
2025-09-09 11:24:31,834 - NetworkTopology - INFO - TestNode1: mstpd启动失败，使用iproute2
2025-09-09 11:24:31,834 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: iproute2
2025-09-09 11:24:31,834 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 11:24:31,835 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 11:24:33,165 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 11:24:36,224 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 11:24:36,225 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 11:24:36,225 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 11:24:36,225 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 11:24:36,999 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 11:24:37,785 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 11:24:37,785 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 11:24:38,191 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 11:24:38,282 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 11:24:38,346 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 11:24:38,346 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 11:24:38,346 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 11:24:38,347 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 11:24:38,347 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 11:24:38,347 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 11:24:38,347 - NetworkTopology - INFO - TestNode2: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 11:24:38,348 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 11:24:38,372 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 11:24:38,372 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 11:24:38,568 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=1, output=
2025-09-09 11:24:38,569 - NetworkTopology - INFO - TestNode2: 尝试启动mstpd服务...
2025-09-09 11:24:38,932 - NetworkTopology - INFO - TestNode2: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 11:24:41,077 - NetworkTopology - INFO - TestNode2: mstpd启动后状态: code=1
2025-09-09 11:24:41,077 - NetworkTopology - INFO - TestNode2: mstpd启动失败，使用iproute2
2025-09-09 11:24:41,077 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: iproute2
2025-09-09 11:24:41,078 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 11:24:41,078 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 11:24:42,353 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 11:24:44,854 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 11:24:44,854 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 11:24:44,855 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 11:24:44,855 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 11:24:45,652 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 11:24:46,416 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 11:24:46,416 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 11:24:46,818 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 11:24:46,896 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 11:24:46,958 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 11:24:46,959 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 11:24:46,959 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 11:24:52,321 - test_additional_rstp - INFO - 使用网桥: rstp0
2025-09-09 11:24:52,322 - test_additional_rstp - INFO - === 步骤1: 禁用端口触发状态转换 ===
2025-09-09 11:24:52,388 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:24:52,556 - RSTPTest - INFO - 测试完成: test_port_state_transitions (耗时: 24.70秒)
2025-09-09 11:24:52,557 - RSTPTest - INFO - ============================================================

2025-09-09 11:24:52,559 - RSTPTest - INFO - ============================================================
2025-09-09 11:24:52,559 - RSTPTest - INFO - 开始测试: test_bpdu_propagation_and_keepalive
2025-09-09 11:24:52,560 - RSTPTest - INFO - ============================================================
2025-09-09 11:24:52,561 - test_additional_rstp - INFO - 开始BPDU传播和保活机制测试
2025-09-09 11:24:52,561 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 11:24:52,561 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 11:24:52,561 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 11:24:52,562 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 11:24:52,562 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 11:24:52,562 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 11:24:52,562 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 11:24:52,563 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 11:24:52,867 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 11:24:53,259 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 11:24:53,260 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 11:24:53,260 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 11:24:53,260 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 11:24:53,379 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 11:24:53,500 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 11:24:53,500 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 11:24:53,556 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 11:24:53,604 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 11:24:53,652 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 11:24:53,652 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 11:24:53,653 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 11:24:53,653 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 11:24:53,653 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 11:24:53,653 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 11:24:53,654 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 11:24:53,654 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 11:24:54,896 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 11:24:57,514 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 11:24:57,515 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 11:24:57,515 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 11:24:57,515 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 11:24:58,342 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 11:24:59,116 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 11:24:59,117 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 11:24:59,548 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 11:24:59,635 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 11:24:59,699 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 11:24:59,700 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 11:24:59,700 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 11:24:59,700 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 11:24:59,700 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 11:24:59,701 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 11:24:59,701 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 11:24:59,701 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 11:25:01,089 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 11:25:03,781 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 11:25:03,781 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 11:25:03,782 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 11:25:03,782 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 11:25:04,724 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 11:25:05,591 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 11:25:05,591 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 11:25:05,993 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 11:25:06,083 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 11:25:06,144 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 11:25:06,145 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 11:25:06,145 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 11:25:14,833 - test_additional_rstp - INFO - === 步骤1: 验证分布式BPDU生成 ===
2025-09-09 11:25:14,839 - test_additional_rstp - INFO - 检测到网桥接口: ['18:', '26:']
2025-09-09 11:25:14,839 - test_additional_rstp - INFO - 在接口 18: 上捕获BPDU...
2025-09-09 11:25:14,839 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: 18:, 数量: 10)
2025-09-09 11:25:14,917 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-09 11:25:14,918 - test_additional_rstp - WARNING - 在 18: 上未捕获到BPDU
2025-09-09 11:25:14,918 - test_additional_rstp - INFO - 在接口 26: 上捕获BPDU...
2025-09-09 11:25:14,918 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: 26:, 数量: 10)
2025-09-09 11:25:14,985 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-09 11:25:14,986 - test_additional_rstp - WARNING - 在 26: 上未捕获到BPDU
2025-09-09 11:25:14,986 - test_additional_rstp - INFO - 总共捕获 0 个BPDU，来自 0 个不同源
2025-09-09 11:25:14,986 - test_additional_rstp - WARNING - 未检测到BPDU传播
2025-09-09 11:25:14,986 - test_additional_rstp - INFO - BPDU传播和保活机制测试完成
2025-09-09 11:25:14,987 - RSTPTest - INFO - 测试完成: test_bpdu_propagation_and_keepalive (耗时: 22.43秒)
2025-09-09 11:25:14,987 - RSTPTest - INFO - ============================================================

2025-09-09 11:25:14,989 - RSTPTest - INFO - ============================================================
2025-09-09 11:25:14,989 - RSTPTest - INFO - 开始测试: test_disabled_port_exclusion_enhanced
2025-09-09 11:25:14,989 - RSTPTest - INFO - ============================================================
2025-09-09 11:25:14,990 - test_additional_rstp - INFO - 开始增强的禁用端口排除测试
2025-09-09 11:25:14,990 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 11:25:14,991 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 11:25:14,991 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 11:25:14,991 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 11:25:14,991 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 11:25:14,991 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 11:25:14,992 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 11:25:14,992 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 11:25:15,283 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 11:25:15,675 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 11:25:15,675 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 11:25:15,675 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 11:25:15,675 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 11:25:15,791 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 11:25:15,911 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 11:25:15,912 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 11:25:15,968 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 11:25:16,016 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 11:25:16,064 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 11:25:16,064 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 11:25:16,064 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 11:25:16,065 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 11:25:16,065 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 11:25:16,065 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 11:25:16,065 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 11:25:16,065 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 11:25:17,242 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 11:25:19,708 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 11:25:19,708 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 11:25:19,708 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 11:25:19,709 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 11:25:20,592 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 11:25:21,368 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 11:25:21,369 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 11:25:21,752 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 11:25:21,824 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 11:25:21,887 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 11:25:21,887 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 11:25:21,888 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 11:25:21,888 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 11:25:21,888 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 11:25:21,888 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 11:25:21,889 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 11:25:21,889 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 11:25:23,124 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 11:25:25,539 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 11:25:25,540 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 11:25:25,540 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 11:25:25,540 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 11:25:26,283 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 11:25:27,069 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 11:25:27,070 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 11:25:27,456 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 11:25:27,536 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 11:25:27,598 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 11:25:27,598 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 11:25:27,599 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 11:25:33,018 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:25:33,171 - test_additional_rstp - INFO - 初始活动端口数量: 0
2025-09-09 11:25:33,172 - RSTPTest - INFO - 测试完成: test_disabled_port_exclusion_enhanced (耗时: 18.18秒)
2025-09-09 11:25:33,173 - RSTPTest - INFO - ============================================================

2025-09-09 11:25:33,173 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 11:25:33,174 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 11:25:33,174 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 11:25:33,321 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 11:25:33,322 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 11:25:33,673 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 11:25:33,674 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 11:25:33,982 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 11:25:33,983 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 11:25:33,983 - RSTPTest - INFO - ============================================================
2025-09-09 11:25:33,984 - RSTPTest - INFO - 开始测试: test_backup_port_concept_verification
2025-09-09 11:25:33,984 - RSTPTest - INFO - ============================================================
2025-09-09 11:25:33,985 - test_backup_port_simulation - INFO - 开始备份端口概念验证测试
2025-09-09 11:25:33,986 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 11:25:33,986 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 11:25:33,986 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 11:25:33,986 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 11:25:33,987 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 11:25:33,987 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 11:25:33,987 - NetworkTopology - INFO - DUT: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 11:25:33,987 - NetworkTopology - INFO - DUT: 检查mstpd支持...
2025-09-09 11:25:33,993 - NetworkTopology - INFO - DUT: mstpd检查结果: code=1
2025-09-09 11:25:33,994 - NetworkTopology - INFO - DUT: 检查iproute2支持...
2025-09-09 11:25:34,040 - NetworkTopology - INFO - DUT: ip命令检查: code=0
2025-09-09 11:25:34,040 - NetworkTopology - INFO - DUT: 使用iproute2配置RSTP
2025-09-09 11:25:34,041 - NetworkTopology - INFO - DUT: 最终选择RSTP方法: iproute2
2025-09-09 11:25:34,041 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 11:25:34,041 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 11:25:34,347 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 11:25:34,758 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 11:25:34,759 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 11:25:34,759 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 11:25:34,759 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 11:25:34,870 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 11:25:34,986 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 11:25:34,986 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 11:25:35,039 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 11:25:35,088 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 11:25:35,136 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 11:25:35,136 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 11:25:35,136 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 11:25:35,137 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 11:25:35,137 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 11:25:35,137 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 11:25:35,138 - NetworkTopology - INFO - TestNode1: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 11:25:35,138 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 11:25:35,164 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 11:25:35,164 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 11:25:35,410 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=1, output=
2025-09-09 11:25:35,410 - NetworkTopology - INFO - TestNode1: 尝试启动mstpd服务...
2025-09-09 11:25:35,841 - NetworkTopology - INFO - TestNode1: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 11:25:37,997 - NetworkTopology - INFO - TestNode1: mstpd启动后状态: code=1
2025-09-09 11:25:37,998 - NetworkTopology - INFO - TestNode1: mstpd启动失败，使用iproute2
2025-09-09 11:25:37,998 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: iproute2
2025-09-09 11:25:37,998 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 11:25:37,998 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 11:25:39,214 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 11:25:41,599 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 11:25:41,599 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 11:25:41,599 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 11:25:41,600 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 11:25:42,349 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 11:25:43,090 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 11:25:43,090 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 11:25:43,471 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 11:25:43,555 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 11:25:43,616 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 11:25:43,617 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 11:25:43,617 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 11:25:43,617 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 11:25:43,618 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 11:25:43,618 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 11:25:43,618 - NetworkTopology - INFO - TestNode2: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 11:25:43,618 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 11:25:43,639 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 11:25:43,639 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 11:25:43,814 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=1, output=
2025-09-09 11:25:43,814 - NetworkTopology - INFO - TestNode2: 尝试启动mstpd服务...
2025-09-09 11:25:44,173 - NetworkTopology - INFO - TestNode2: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 11:25:46,316 - NetworkTopology - INFO - TestNode2: mstpd启动后状态: code=1
2025-09-09 11:25:46,317 - NetworkTopology - INFO - TestNode2: mstpd启动失败，使用iproute2
2025-09-09 11:25:46,317 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: iproute2
2025-09-09 11:25:46,317 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 11:25:46,318 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 11:25:47,486 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 11:25:49,934 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 11:25:49,934 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 11:25:49,935 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 11:25:49,935 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 11:25:50,734 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 11:25:51,441 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 11:25:51,442 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 11:25:51,800 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 11:25:51,871 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 11:25:51,930 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 11:25:51,931 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 11:25:51,931 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 11:26:01,997 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:26:02,159 - test_backup_port_simulation - INFO - === 当前端口状态 ===
2025-09-09 11:26:02,159 - test_backup_port_simulation - INFO - 端口 eth0: 角色=root, 状态=disabled
2025-09-09 11:26:02,159 - test_backup_port_simulation - INFO - 端口 eth2: 角色=unknown, 状态=disabled
2025-09-09 11:26:02,160 - test_backup_port_simulation - INFO - 端口 eth3: 角色=unknown, 状态=disabled
2025-09-09 11:26:02,160 - test_backup_port_simulation - INFO - ⚠ 在当前点对点拓扑中未检测到备份端口（符合预期）
2025-09-09 11:26:02,160 - test_backup_port_simulation - INFO - 备份端口通常出现在共享介质网段中，当前测试环境为点对点链路
2025-09-09 11:26:02,160 - test_backup_port_simulation - INFO - 端口角色分布: {}
2025-09-09 11:26:02,160 - test_backup_port_simulation - INFO - === RSTP端口角色覆盖分析 ===
2025-09-09 11:26:02,160 - test_backup_port_simulation - INFO - - root端口: 未检测到
2025-09-09 11:26:02,161 - test_backup_port_simulation - INFO - - designated端口: 未检测到
2025-09-09 11:26:02,161 - test_backup_port_simulation - INFO - - alternate端口: 未检测到
2025-09-09 11:26:02,161 - test_backup_port_simulation - INFO - - backup端口: 未检测到（在点对点拓扑中为正常现象）
2025-09-09 11:26:02,161 - test_backup_port_simulation - INFO - 备份端口概念验证测试完成
2025-09-09 11:26:02,162 - RSTPTest - INFO - 测试完成: test_backup_port_concept_verification (耗时: 28.18秒)
2025-09-09 11:26:02,162 - RSTPTest - INFO - ============================================================

2025-09-09 11:26:02,163 - RSTPTest - INFO - ============================================================
2025-09-09 11:26:02,164 - RSTPTest - INFO - 开始测试: test_shared_medium_simulation_attempt
2025-09-09 11:26:02,164 - RSTPTest - INFO - ============================================================
2025-09-09 11:26:02,164 - test_backup_port_simulation - INFO - 开始共享介质模拟尝试
2025-09-09 11:26:02,165 - test_backup_port_simulation - INFO - === 尝试创建共享介质模拟场景 ===
2025-09-09 11:26:02,165 - test_backup_port_simulation - INFO - 创建中心交换机模拟共享介质...
2025-09-09 11:26:02,165 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 11:26:02,165 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 11:26:02,166 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 11:26:02,166 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 11:26:02,166 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 11:26:02,166 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 11:26:02,166 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 11:26:02,167 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 11:26:02,502 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 11:26:02,890 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 11:26:02,890 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 11:26:02,890 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 11:26:02,891 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 11:26:03,009 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 11:26:03,129 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 11:26:03,130 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 11:26:03,182 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 11:26:03,235 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 11:26:03,283 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 11:26:03,283 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 11:26:03,284 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 11:26:03,284 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 11:26:03,284 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 11:26:03,284 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 11:26:03,284 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 11:26:03,285 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 11:26:04,449 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 11:26:06,938 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 11:26:06,938 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 11:26:06,938 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 11:26:06,939 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 11:26:07,723 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 11:26:08,495 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 11:26:08,495 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 11:26:08,875 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 11:26:08,946 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 11:26:09,008 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 11:26:09,008 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 11:26:09,009 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 11:26:09,009 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 11:26:09,009 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 11:26:09,009 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 11:26:09,010 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 11:26:09,010 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 11:26:10,118 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 11:26:12,350 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 11:26:12,351 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 11:26:12,351 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 11:26:12,351 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 11:26:13,034 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 11:26:13,744 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 11:26:13,744 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 11:26:14,095 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 11:26:14,163 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 11:26:14,221 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 11:26:14,221 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 11:26:14,221 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 11:26:24,289 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:26:24,455 - test_backup_port_simulation - INFO - === 分析当前端口配置 ===
2025-09-09 11:26:24,455 - test_backup_port_simulation - INFO - ⚠ 未检测到备份端口
2025-09-09 11:26:24,455 - test_backup_port_simulation - INFO - 这在当前测试环境中是正常的，因为缺乏真正的共享介质
2025-09-09 11:26:24,456 - test_backup_port_simulation - INFO - 共享介质模拟尝试完成
2025-09-09 11:26:24,456 - RSTPTest - INFO - 测试完成: test_shared_medium_simulation_attempt (耗时: 22.29秒)
2025-09-09 11:26:24,457 - RSTPTest - INFO - ============================================================

2025-09-09 11:26:24,458 - RSTPTest - INFO - ============================================================
2025-09-09 11:26:24,458 - RSTPTest - INFO - 开始测试: test_backup_port_documentation_verification
2025-09-09 11:26:24,458 - RSTPTest - INFO - ============================================================
2025-09-09 11:26:24,459 - test_backup_port_simulation - INFO - 开始备份端口文档验证
2025-09-09 11:26:24,459 - test_backup_port_simulation - INFO - ✓ PortRole.BACKUP 存在
2025-09-09 11:26:24,460 - test_backup_port_simulation - INFO - === 备份端口理论特性验证 ===
2025-09-09 11:26:24,460 - test_backup_port_simulation - INFO - purpose: 为共享介质网段提供冗余
2025-09-09 11:26:24,460 - test_backup_port_simulation - INFO - difference_from_alternate: 备份端口是同一交换机上指定端口的备份，而备用端口是不同交换机提供的路径
2025-09-09 11:26:24,460 - test_backup_port_simulation - INFO - state: Discarding
2025-09-09 11:26:24,460 - test_backup_port_simulation - INFO - scenario: 出现在连接到集线器或共享介质的场景中
2025-09-09 11:26:24,461 - test_backup_port_simulation - INFO - fast_transition: 当对应的指定端口失效时，可以快速转换为指定端口
2025-09-09 11:26:24,461 - test_backup_port_simulation - INFO - === 端口角色对比 ===
2025-09-09 11:26:24,461 - test_backup_port_simulation - INFO - root: 连接到根桥的最佳路径
2025-09-09 11:26:24,461 - test_backup_port_simulation - INFO - designated: 为网段提供转发服务
2025-09-09 11:26:24,461 - test_backup_port_simulation - INFO - alternate: 提供到根桥的备用路径（来自其他交换机）
2025-09-09 11:26:24,462 - test_backup_port_simulation - INFO - backup: 同一交换机上指定端口的备份（共享介质场景）
2025-09-09 11:26:24,462 - test_backup_port_simulation - INFO - === 测试覆盖率分析 ===
2025-09-09 11:26:24,462 - test_backup_port_simulation - INFO - 已覆盖: Root Port, Designated Port, Alternate Port, Disabled Port
2025-09-09 11:26:24,462 - test_backup_port_simulation - INFO - 部分覆盖: Backup Port (概念验证)
2025-09-09 11:26:24,462 - test_backup_port_simulation - INFO - 覆盖限制: 测试框架无法创建真正的共享介质拓扑
2025-09-09 11:26:24,462 - test_backup_port_simulation - INFO - 建议: 在实际部署环境中使用集线器或配置交换机共享模式进行完整测试
2025-09-09 11:26:24,463 - test_backup_port_simulation - INFO - 备份端口文档验证完成
2025-09-09 11:26:24,463 - RSTPTest - INFO - 测试完成: test_backup_port_documentation_verification (耗时: 0.00秒)
2025-09-09 11:26:24,464 - RSTPTest - INFO - ============================================================

2025-09-09 11:26:24,464 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 11:26:24,465 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 11:26:24,465 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 11:26:24,600 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 11:26:24,601 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 11:26:24,944 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 11:26:24,945 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 11:26:25,250 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 11:26:25,250 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 11:26:25,251 - RSTPTest - INFO - ============================================================
2025-09-09 11:26:25,251 - RSTPTest - INFO - 开始测试: test_direct_link_failure
2025-09-09 11:26:25,251 - RSTPTest - INFO - ============================================================
2025-09-09 11:26:25,252 - test_convergence - INFO - 开始直接链路故障测试
2025-09-09 11:26:25,252 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 11:26:25,252 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 11:26:25,253 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 11:26:25,253 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 11:26:25,253 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 11:26:25,253 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 11:26:25,254 - NetworkTopology - INFO - DUT: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 11:26:25,254 - NetworkTopology - INFO - DUT: 检查mstpd支持...
2025-09-09 11:26:25,259 - NetworkTopology - INFO - DUT: mstpd检查结果: code=1
2025-09-09 11:26:25,260 - NetworkTopology - INFO - DUT: 检查iproute2支持...
2025-09-09 11:26:25,307 - NetworkTopology - INFO - DUT: ip命令检查: code=0
2025-09-09 11:26:25,307 - NetworkTopology - INFO - DUT: 使用iproute2配置RSTP
2025-09-09 11:26:25,308 - NetworkTopology - INFO - DUT: 最终选择RSTP方法: iproute2
2025-09-09 11:26:25,308 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 11:26:25,308 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 11:26:25,634 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 11:26:26,029 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 11:26:26,030 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 11:26:26,030 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 11:26:26,030 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 11:26:26,149 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 11:26:26,261 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 11:26:26,262 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 11:26:26,314 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 11:26:26,363 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 11:26:26,411 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 11:26:26,411 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 11:26:26,411 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 11:26:26,411 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 11:26:26,411 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 11:26:26,412 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 11:26:26,412 - NetworkTopology - INFO - TestNode1: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 11:26:26,412 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 11:26:26,430 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 11:26:26,430 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 11:26:26,633 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=1, output=
2025-09-09 11:26:26,633 - NetworkTopology - INFO - TestNode1: 尝试启动mstpd服务...
2025-09-09 11:26:26,966 - NetworkTopology - INFO - TestNode1: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 11:26:29,118 - NetworkTopology - INFO - TestNode1: mstpd启动后状态: code=1
2025-09-09 11:26:29,119 - NetworkTopology - INFO - TestNode1: mstpd启动失败，使用iproute2
2025-09-09 11:26:29,119 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: iproute2
2025-09-09 11:26:29,119 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 11:26:29,119 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 11:26:30,274 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 11:26:32,512 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 11:26:32,512 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 11:26:32,513 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 11:26:32,513 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 11:26:33,244 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 11:26:33,942 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 11:26:33,943 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 11:26:34,320 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 11:26:34,395 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 11:26:34,461 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 11:26:34,461 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 11:26:34,462 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 11:26:34,462 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 11:26:34,462 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 11:26:34,463 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 11:26:34,463 - NetworkTopology - INFO - TestNode2: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 11:26:34,463 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 11:26:34,485 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 11:26:34,486 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 11:26:34,673 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=1, output=
2025-09-09 11:26:34,673 - NetworkTopology - INFO - TestNode2: 尝试启动mstpd服务...
2025-09-09 11:26:35,023 - NetworkTopology - INFO - TestNode2: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 11:26:37,171 - NetworkTopology - INFO - TestNode2: mstpd启动后状态: code=1
2025-09-09 11:26:37,172 - NetworkTopology - INFO - TestNode2: mstpd启动失败，使用iproute2
2025-09-09 11:26:37,172 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: iproute2
2025-09-09 11:26:37,172 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 11:26:37,172 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 11:26:38,266 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 11:26:40,506 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 11:26:40,507 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 11:26:40,507 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 11:26:40,508 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 11:26:41,209 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 11:26:41,929 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 11:26:41,930 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 11:26:42,275 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 11:26:42,345 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 11:26:42,404 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 11:26:42,404 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 11:26:42,404 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 11:26:43,019 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 11:26:43,085 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:26:44,534 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.51秒
2025-09-09 11:26:44,535 - test_convergence - INFO - 初始收敛时间: 1.51秒
2025-09-09 11:26:44,597 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:26:44,750 - test_convergence - INFO - DUT的Root Port: eth2
2025-09-09 11:26:44,751 - FaultInjector_DUT - INFO - 断开链路: eth2
2025-09-09 11:26:44,873 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth2 (code=1)，将在逻辑上标记为已断开
2025-09-09 11:26:44,874 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 11:26:44,980 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:26:46,419 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.55秒
2025-09-09 11:26:46,480 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:26:46,953 - RSTPTest - INFO - 测试完成: test_direct_link_failure (耗时: 21.70秒)
2025-09-09 11:26:46,954 - RSTPTest - INFO - ============================================================

2025-09-09 11:26:47,005 - RSTPTest - INFO - ============================================================
2025-09-09 11:26:47,005 - RSTPTest - INFO - 开始测试: test_multiple_link_failures
2025-09-09 11:26:47,006 - RSTPTest - INFO - ============================================================
2025-09-09 11:26:47,006 - test_convergence - INFO - 开始多重链路故障测试
2025-09-09 11:26:47,007 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 11:26:47,007 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 11:26:47,007 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 11:26:47,007 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 11:26:47,007 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 11:26:47,007 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 11:26:47,008 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 11:26:47,008 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 11:26:47,257 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 11:26:47,652 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 11:26:47,653 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 11:26:47,653 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 11:26:47,653 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 11:26:47,769 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 11:26:47,881 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 11:26:47,881 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 11:26:47,933 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 11:26:47,982 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 11:26:48,030 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 11:26:48,030 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 11:26:48,031 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 11:26:48,031 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 11:26:48,031 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 11:26:48,031 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 11:26:48,031 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 11:26:48,032 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 11:26:49,212 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 11:26:51,701 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 11:26:51,702 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 11:26:51,702 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 11:26:51,702 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 11:26:52,404 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 11:26:53,104 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 11:26:53,105 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 11:26:53,466 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 11:26:53,543 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 11:26:53,602 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 11:26:53,602 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 11:26:53,603 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 11:26:53,603 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 11:26:53,603 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 11:26:53,603 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 11:26:53,603 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 11:26:53,604 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 11:26:54,645 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 11:26:56,863 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 11:26:56,864 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 11:26:56,864 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 11:26:56,865 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 11:26:57,551 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 11:26:58,252 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 11:26:58,252 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 11:26:58,595 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 11:26:58,664 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 11:26:58,721 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 11:26:58,722 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 11:26:58,722 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 11:26:58,722 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 11:26:58,784 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:27:00,225 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.50秒
2025-09-09 11:27:00,225 - test_convergence - INFO - 注入故障: eth0
2025-09-09 11:27:00,225 - FaultInjector_DUT - INFO - 断开链路: eth0
2025-09-09 11:27:00,301 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth0 (code=1)，将在逻辑上标记为已断开
2025-09-09 11:27:00,302 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 11:27:00,409 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:27:01,763 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.46秒
2025-09-09 11:27:01,764 - test_convergence - INFO - eth0故障收敛时间: 1.46秒
2025-09-09 11:27:03,765 - test_convergence - INFO - 注入故障: eth2
2025-09-09 11:27:03,765 - FaultInjector_DUT - INFO - 断开链路: eth2
2025-09-09 11:27:03,837 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth2 (code=1)，将在逻辑上标记为已断开
2025-09-09 11:27:03,837 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 11:27:03,940 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:27:05,457 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.62秒
2025-09-09 11:27:05,458 - test_convergence - INFO - eth2故障收敛时间: 1.62秒
2025-09-09 11:27:07,458 - FaultInjector_DUT - INFO - 恢复链路: eth0
2025-09-09 11:27:07,533 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth0 (code=1)，将在逻辑上标记为已恢复
2025-09-09 11:27:07,534 - FaultInjector_DUT - INFO - 恢复链路: eth2
2025-09-09 11:27:07,653 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth2 (code=1)，将在逻辑上标记为已恢复
2025-09-09 11:27:07,654 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 11:27:07,760 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:27:09,090 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.44秒
2025-09-09 11:27:09,091 - test_convergence - INFO - 最终恢复收敛时间: 1.44秒
2025-09-09 11:27:09,091 - test_convergence - INFO - 多重链路故障测试通过
2025-09-09 11:27:09,092 - RSTPTest - INFO - 测试完成: test_multiple_link_failures (耗时: 22.09秒)
2025-09-09 11:27:09,092 - RSTPTest - INFO - ============================================================

2025-09-09 11:27:09,094 - RSTPTest - INFO - ============================================================
2025-09-09 11:27:09,094 - RSTPTest - INFO - 开始测试: test_convergence_with_traffic
2025-09-09 11:27:09,094 - RSTPTest - INFO - ============================================================
2025-09-09 11:27:09,095 - test_convergence - INFO - 开始带流量的收敛测试
2025-09-09 11:27:09,095 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 11:27:09,095 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 11:27:09,095 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 11:27:09,096 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 11:27:09,096 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 11:27:09,096 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 11:27:09,096 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 11:27:09,096 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 11:27:09,381 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 11:27:09,769 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 11:27:09,769 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 11:27:09,770 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 11:27:09,770 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 11:27:09,889 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 11:27:10,005 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 11:27:10,005 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 11:27:10,057 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 11:27:10,106 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 11:27:10,154 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 11:27:10,154 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 11:27:10,154 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 11:27:10,155 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 11:27:10,155 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 11:27:10,155 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 11:27:10,155 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 11:27:10,155 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 11:27:11,224 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 11:27:13,431 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 11:27:13,432 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 11:27:13,432 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 11:27:13,432 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 11:27:14,108 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 11:27:14,790 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 11:27:14,790 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 11:27:15,134 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 11:27:15,212 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 11:27:15,271 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 11:27:15,271 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 11:27:15,272 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 11:27:15,272 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 11:27:15,272 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 11:27:15,272 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 11:27:15,272 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 11:27:15,273 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 11:27:16,366 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 11:27:18,543 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 11:27:18,544 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 11:27:18,544 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 11:27:18,544 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 11:27:19,233 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 11:27:19,945 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 11:27:19,946 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 11:27:20,312 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 11:27:20,382 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 11:27:20,439 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 11:27:20,439 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 11:27:20,440 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 11:27:26,775 - TrafficGenerator - INFO - 启动iperf3服务器: 192.168.184.131:5201
2025-09-09 11:27:28,965 - TrafficGenerator - ERROR - iperf3服务器启动失败
2025-09-09 11:27:31,776 - TrafficGenerator - INFO - 启动iperf3客户端: -> 192.168.184.131:5201
2025-09-09 11:27:31,776 - TrafficGenerator - INFO - iperf3客户端已启动 (udp, 100M)
2025-09-09 11:27:36,777 - FaultInjector_DUT - INFO - 断开链路: eth0
2025-09-09 11:27:36,852 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth0 (code=1)，将在逻辑上标记为已断开
2025-09-09 11:27:46,854 - test_convergence - INFO - 丢包数: 0
2025-09-09 11:27:46,854 - test_convergence - INFO - 估计中断时间: 0.000秒
2025-09-09 11:27:46,854 - TrafficGenerator - INFO - 停止流量生成
2025-09-09 11:27:49,111 - test_convergence - INFO - 带流量的收敛测试通过
2025-09-09 11:27:49,112 - RSTPTest - INFO - 测试完成: test_convergence_with_traffic (耗时: 40.02秒)
2025-09-09 11:27:49,112 - RSTPTest - INFO - ============================================================

2025-09-09 11:27:49,113 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 11:27:49,113 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 11:27:49,114 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 11:27:49,255 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 11:27:49,256 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 11:27:49,612 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 11:27:49,613 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 11:27:49,922 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 11:27:49,922 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 11:27:49,923 - RSTPTest - INFO - ============================================================
2025-09-09 11:27:49,923 - RSTPTest - INFO - 开始测试: test_backup_port_simulation
2025-09-09 11:27:49,924 - RSTPTest - INFO - ============================================================
2025-09-09 11:27:49,925 - test_enhanced_rstp_coverage - INFO - 开始备份端口模拟测试
2025-09-09 11:27:49,925 - test_enhanced_rstp_coverage - INFO - 创建模拟共享网段拓扑
2025-09-09 11:27:50,382 - test_enhanced_rstp_coverage - INFO - ✓ 创建连接: rstp0:dut_port1 <-> shared_segment:shared_port1
2025-09-09 11:27:50,728 - test_enhanced_rstp_coverage - INFO - ✓ 创建连接: rstp0:dut_port2 <-> shared_segment:shared_port2
2025-09-09 11:27:51,362 - test_enhanced_rstp_coverage - INFO - ✓ 创建远程交换机: remote_switch
2025-09-09 11:27:51,363 - test_enhanced_rstp_coverage - INFO - 等待RSTP收敛...
2025-09-09 11:28:06,428 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:28:06,581 - test_enhanced_rstp_coverage - INFO - DUT桥信息: BridgeInfo(bridge_id='', root_id='', root_port='eth0', root_path_cost=0, protocol_version='unknown', hello_time=0, forward_delay=0, max_age=0, topology_changes=0, ports={'eth0': PortInfo(name='eth0', role=<PortRole.ROOT: 'root'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth2': PortInfo(name='eth2', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth3': PortInfo(name='eth3', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')})
2025-09-09 11:28:06,582 - test_enhanced_rstp_coverage - INFO - 清理测试环境
2025-09-09 11:28:07,371 - test_enhanced_rstp_coverage - INFO - ✓ 备份端口模拟测试完成
2025-09-09 11:28:07,372 - RSTPTest - INFO - 测试完成: test_backup_port_simulation (耗时: 17.45秒)
2025-09-09 11:28:07,372 - RSTPTest - INFO - ============================================================

2025-09-09 11:28:07,373 - RSTPTest - INFO - ============================================================
2025-09-09 11:28:07,373 - RSTPTest - INFO - 开始测试: test_comprehensive_port_state_transitions
2025-09-09 11:28:07,373 - RSTPTest - INFO - ============================================================
2025-09-09 11:28:07,374 - test_enhanced_rstp_coverage - INFO - 开始全面端口状态转换测试
2025-09-09 11:28:07,374 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 11:28:07,374 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 11:28:07,375 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 11:28:07,375 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 11:28:07,375 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 11:28:07,375 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 11:28:07,375 - NetworkTopology - INFO - DUT: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 11:28:07,375 - NetworkTopology - INFO - DUT: 检查mstpd支持...
2025-09-09 11:28:07,443 - NetworkTopology - INFO - DUT: mstpd检查结果: code=1
2025-09-09 11:28:07,443 - NetworkTopology - INFO - DUT: 检查iproute2支持...
2025-09-09 11:28:07,507 - NetworkTopology - INFO - DUT: ip命令检查: code=0
2025-09-09 11:28:07,508 - NetworkTopology - INFO - DUT: 使用iproute2配置RSTP
2025-09-09 11:28:07,508 - NetworkTopology - INFO - DUT: 最终选择RSTP方法: iproute2
2025-09-09 11:28:07,508 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 11:28:07,508 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 11:28:07,806 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 11:28:08,197 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 11:28:08,197 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 11:28:08,197 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 11:28:08,198 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 11:28:08,316 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 11:28:08,433 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 11:28:08,434 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 11:28:08,489 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 11:28:08,537 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 11:28:08,592 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 11:28:08,593 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 11:28:08,601 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 11:28:08,610 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 11:28:08,626 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 11:28:08,635 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 11:28:08,646 - NetworkTopology - INFO - TestNode1: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 11:28:08,647 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 11:28:09,323 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 11:28:09,324 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 11:28:09,509 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=1, output=
2025-09-09 11:28:09,510 - NetworkTopology - INFO - TestNode1: 尝试启动mstpd服务...
2025-09-09 11:28:09,904 - NetworkTopology - INFO - TestNode1: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 11:28:12,075 - NetworkTopology - INFO - TestNode1: mstpd启动后状态: code=1
2025-09-09 11:28:12,076 - NetworkTopology - INFO - TestNode1: mstpd启动失败，使用iproute2
2025-09-09 11:28:12,076 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: iproute2
2025-09-09 11:28:12,076 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 11:28:12,077 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 11:28:13,211 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 11:28:15,466 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 11:28:15,467 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 11:28:15,467 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 11:28:15,467 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 11:28:16,178 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 11:28:16,877 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 11:28:16,878 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 11:28:17,224 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 11:28:17,289 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 11:28:17,348 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 11:28:17,348 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 11:28:17,348 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 11:28:17,349 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 11:28:17,349 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 11:28:17,349 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 11:28:17,349 - NetworkTopology - INFO - TestNode2: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 11:28:17,350 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 11:28:17,369 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 11:28:17,369 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 11:28:17,559 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=1, output=
2025-09-09 11:28:17,560 - NetworkTopology - INFO - TestNode2: 尝试启动mstpd服务...
2025-09-09 11:28:17,910 - NetworkTopology - INFO - TestNode2: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 11:28:20,079 - NetworkTopology - INFO - TestNode2: mstpd启动后状态: code=1
2025-09-09 11:28:20,080 - NetworkTopology - INFO - TestNode2: mstpd启动失败，使用iproute2
2025-09-09 11:28:20,080 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: iproute2
2025-09-09 11:28:20,080 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 11:28:20,081 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 11:28:21,200 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 11:28:23,809 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 11:28:23,809 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 11:28:23,810 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 11:28:23,810 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 11:28:24,503 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 11:28:25,209 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 11:28:25,210 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 11:28:25,567 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 11:28:25,644 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 11:28:25,704 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 11:28:25,705 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 11:28:25,705 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 11:28:26,027 - test_enhanced_rstp_coverage - INFO - 等待初始收敛...
2025-09-09 11:28:26,027 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 11:28:26,132 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:28:26,289 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.26秒
2025-09-09 11:28:26,400 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:28:26,573 - RSTPTest - INFO - 测试完成: test_comprehensive_port_state_transitions (耗时: 19.20秒)
2025-09-09 11:28:26,573 - RSTPTest - INFO - ============================================================

2025-09-09 11:28:26,575 - RSTPTest - INFO - ============================================================
2025-09-09 11:28:26,576 - RSTPTest - INFO - 开始测试: test_detailed_bpdu_analysis
2025-09-09 11:28:26,576 - RSTPTest - INFO - ============================================================
2025-09-09 11:28:26,576 - test_enhanced_rstp_coverage - INFO - 开始详细BPDU分析测试
2025-09-09 11:28:26,577 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 11:28:26,577 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 11:28:26,577 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 11:28:26,577 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 11:28:26,578 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 11:28:26,578 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 11:28:26,578 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 11:28:26,578 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 11:28:26,860 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 11:28:27,252 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 11:28:27,253 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 11:28:27,253 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 11:28:27,253 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 11:28:27,371 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 11:28:27,488 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 11:28:27,488 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 11:28:27,544 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 11:28:27,593 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 11:28:27,641 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 11:28:27,641 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 11:28:27,642 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 11:28:27,642 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 11:28:27,642 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 11:28:27,642 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 11:28:27,642 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 11:28:27,643 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 11:28:28,776 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 11:28:31,079 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 11:28:31,080 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 11:28:31,080 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 11:28:31,080 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 11:28:31,796 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 11:28:32,507 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 11:28:32,508 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 11:28:32,853 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 11:28:32,916 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 11:28:32,974 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 11:28:32,974 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 11:28:32,974 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 11:28:32,974 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 11:28:32,975 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 11:28:32,975 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 11:28:32,975 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 11:28:32,975 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 11:28:34,010 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 11:28:36,354 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 11:28:36,355 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 11:28:36,355 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 11:28:36,355 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 11:28:37,032 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 11:28:37,731 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 11:28:37,731 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 11:28:38,081 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 11:28:38,161 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 11:28:38,219 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 11:28:38,219 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 11:28:38,219 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 11:28:38,848 - test_enhanced_rstp_coverage - INFO - 等待RSTP收敛...
2025-09-09 11:28:38,848 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 11:28:38,911 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:28:39,069 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.22秒
2025-09-09 11:28:39,175 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:28:39,328 - test_enhanced_rstp_coverage - INFO - Hello Time: 0秒
2025-09-09 11:28:39,329 - test_enhanced_rstp_coverage - INFO - === 测试1: 验证分布式BPDU生成 ===
2025-09-09 11:28:39,329 - test_enhanced_rstp_coverage - INFO - 总共捕获0个BPDU，来自0个不同源
2025-09-09 11:28:39,345 - RSTPTest - INFO - 测试完成: test_detailed_bpdu_analysis (耗时: 12.77秒)
2025-09-09 11:28:39,345 - RSTPTest - INFO - ============================================================

2025-09-09 11:28:39,348 - RSTPTest - INFO - ============================================================
2025-09-09 11:28:39,348 - RSTPTest - INFO - 开始测试: test_topology_change_comprehensive
2025-09-09 11:28:39,348 - RSTPTest - INFO - ============================================================
2025-09-09 11:28:39,349 - test_enhanced_rstp_coverage - INFO - 开始全面拓扑变更测试
2025-09-09 11:28:39,349 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 11:28:39,349 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 11:28:39,350 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 11:28:39,350 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 11:28:39,350 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 11:28:39,350 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 11:28:39,350 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 11:28:39,351 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 11:28:39,660 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 11:28:40,051 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 11:28:40,052 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 11:28:40,052 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 11:28:40,052 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 11:28:40,167 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 11:28:40,280 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 11:28:40,280 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 11:28:40,337 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 11:28:40,385 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 11:28:40,432 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 11:28:40,433 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 11:28:40,433 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 11:28:40,433 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 11:28:40,433 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 11:28:40,433 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 11:28:40,434 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 11:28:40,434 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 11:28:41,578 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 11:28:43,935 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 11:28:43,935 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 11:28:43,935 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 11:28:43,936 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 11:28:44,662 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 11:28:45,382 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 11:28:45,382 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 11:28:45,743 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 11:28:45,808 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 11:28:45,868 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 11:28:45,868 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 11:28:45,868 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 11:28:45,869 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 11:28:45,869 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 11:28:45,869 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 11:28:45,869 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 11:28:45,869 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 11:28:46,929 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 11:28:49,177 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 11:28:49,177 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 11:28:49,178 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 11:28:49,178 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 11:28:49,909 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 11:28:50,623 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 11:28:50,624 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 11:28:50,981 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 11:28:51,049 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 11:28:51,109 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 11:28:51,109 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 11:28:51,109 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 11:28:51,440 - test_enhanced_rstp_coverage - INFO - 等待初始收敛...
2025-09-09 11:28:51,440 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 11:28:51,551 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:28:51,709 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.27秒
2025-09-09 11:28:51,815 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:28:52,132 - test_enhanced_rstp_coverage - INFO - 初始状态: DUT是根桥=True
2025-09-09 11:28:52,133 - test_enhanced_rstp_coverage - INFO - === 测试场景1: 根桥变更 ===
2025-09-09 11:28:52,133 - test_enhanced_rstp_coverage - INFO - === 测试场景2: 端口故障恢复 ===
2025-09-09 11:28:52,247 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:28:52,404 - test_enhanced_rstp_coverage - INFO - === 测试场景3: 端口优先级变更 ===
2025-09-09 11:28:52,515 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:28:52,673 - test_enhanced_rstp_coverage - WARNING - 未检测到明显的拓扑变更，可能是测试环境限制
2025-09-09 11:28:52,673 - test_enhanced_rstp_coverage - INFO - ✓ 全面拓扑变更测试完成
2025-09-09 11:28:52,674 - RSTPTest - INFO - 测试完成: test_topology_change_comprehensive (耗时: 13.33秒)
2025-09-09 11:28:52,674 - RSTPTest - INFO - ============================================================

2025-09-09 11:28:52,675 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 11:28:52,675 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 11:28:52,675 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 11:28:52,810 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 11:28:52,810 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 11:28:53,156 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 11:28:53,156 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 11:28:53,461 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 11:28:53,461 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 11:28:53,462 - RSTPTest - INFO - ============================================================
2025-09-09 11:28:53,462 - RSTPTest - INFO - 开始测试: test_rstp_reconvergence_no_switchover
2025-09-09 11:28:53,462 - RSTPTest - INFO - ============================================================
2025-09-09 11:28:53,463 - test_high_availability - INFO - 开始RSTP重构误判测试
2025-09-09 11:28:53,463 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 11:28:53,463 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 11:28:53,463 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 11:28:53,464 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 11:28:53,464 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 11:28:53,464 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 11:28:53,464 - NetworkTopology - INFO - DUT: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 11:28:53,464 - NetworkTopology - INFO - DUT: 检查mstpd支持...
2025-09-09 11:28:53,470 - NetworkTopology - INFO - DUT: mstpd检查结果: code=1
2025-09-09 11:28:53,470 - NetworkTopology - INFO - DUT: 检查iproute2支持...
2025-09-09 11:28:53,516 - NetworkTopology - INFO - DUT: ip命令检查: code=0
2025-09-09 11:28:53,517 - NetworkTopology - INFO - DUT: 使用iproute2配置RSTP
2025-09-09 11:28:53,517 - NetworkTopology - INFO - DUT: 最终选择RSTP方法: iproute2
2025-09-09 11:28:53,517 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 11:28:53,517 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 11:28:53,812 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 11:28:54,203 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 11:28:54,204 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 11:28:54,204 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 11:28:54,204 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 11:28:54,323 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 11:28:54,436 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 11:28:54,436 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 11:28:54,492 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 11:28:54,540 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 11:28:54,588 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 11:28:54,589 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 11:28:54,589 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 11:28:54,589 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 11:28:54,589 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 11:28:54,589 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 11:28:54,590 - NetworkTopology - INFO - TestNode1: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 11:28:54,590 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 11:28:54,608 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 11:28:54,608 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 11:28:54,801 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=1, output=
2025-09-09 11:28:54,802 - NetworkTopology - INFO - TestNode1: 尝试启动mstpd服务...
2025-09-09 11:28:55,164 - NetworkTopology - INFO - TestNode1: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 11:28:57,323 - NetworkTopology - INFO - TestNode1: mstpd启动后状态: code=1
2025-09-09 11:28:57,324 - NetworkTopology - INFO - TestNode1: mstpd启动失败，使用iproute2
2025-09-09 11:28:57,324 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: iproute2
2025-09-09 11:28:57,324 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 11:28:57,325 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 11:28:58,562 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 11:29:00,835 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 11:29:00,835 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 11:29:00,836 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 11:29:00,836 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 11:29:01,568 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 11:29:02,352 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 11:29:02,352 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 11:29:02,729 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 11:29:02,788 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 11:29:02,848 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 11:29:02,848 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 11:29:02,848 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 11:29:02,848 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 11:29:02,849 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 11:29:02,849 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 11:29:02,849 - NetworkTopology - INFO - TestNode2: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 11:29:02,850 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 11:29:02,868 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 11:29:02,868 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 11:29:03,061 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=1, output=
2025-09-09 11:29:03,061 - NetworkTopology - INFO - TestNode2: 尝试启动mstpd服务...
2025-09-09 11:29:03,393 - NetworkTopology - INFO - TestNode2: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 11:29:05,574 - NetworkTopology - INFO - TestNode2: mstpd启动后状态: code=1
2025-09-09 11:29:05,575 - NetworkTopology - INFO - TestNode2: mstpd启动失败，使用iproute2
2025-09-09 11:29:05,575 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: iproute2
2025-09-09 11:29:05,575 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 11:29:05,575 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 11:29:06,791 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 11:29:09,169 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 11:29:09,170 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 11:29:09,170 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 11:29:09,170 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 11:29:09,911 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 11:29:10,625 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 11:29:10,626 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 11:29:11,003 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 11:29:11,072 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 11:29:11,133 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 11:29:11,133 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 11:29:11,133 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 11:29:16,139 - test_high_availability - INFO - 初始HA状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-09 11:29:16,139 - test_high_availability - INFO - 在远端触发RSTP重构...
2025-09-09 11:29:16,140 - FaultInjector_TestNode2 - INFO - 断开链路: eth0
2025-09-09 11:29:16,585 - FaultInjector_TestNode2 - INFO - 链路已断开: eth0
2025-09-09 11:29:26,591 - test_high_availability - INFO - RSTP重构后HA状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-09 11:29:26,591 - FaultInjector_TestNode2 - INFO - 恢复链路: eth0
2025-09-09 11:29:26,923 - FaultInjector_TestNode2 - INFO - 链路已恢复: eth0
2025-09-09 11:29:26,923 - test_high_availability - INFO - RSTP重构误判测试完成
2025-09-09 11:29:26,924 - RSTPTest - INFO - 测试完成: test_rstp_reconvergence_no_switchover (耗时: 33.46秒)
2025-09-09 11:29:26,924 - RSTPTest - INFO - ============================================================

2025-09-09 11:29:26,927 - RSTPTest - INFO - ============================================================
2025-09-09 11:29:26,927 - RSTPTest - INFO - 开始测试: test_split_brain_scenario
2025-09-09 11:29:26,927 - RSTPTest - INFO - ============================================================
2025-09-09 11:29:26,928 - test_high_availability - INFO - 开始裂脑场景测试
2025-09-09 11:29:26,933 - test_high_availability - INFO - 初始状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-09 11:29:26,934 - test_high_availability - INFO - 断开同步链路: eth3
2025-09-09 11:29:26,934 - FaultInjector_DUT - INFO - 断开链路: eth3
2025-09-09 11:29:27,047 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth3 (code=1)，将在逻辑上标记为已断开
2025-09-09 11:29:37,048 - test_high_availability - WARNING - 裂脑测试需要访问两个控制器
2025-09-09 11:29:37,048 - FaultInjector_DUT - INFO - 恢复链路: eth3
2025-09-09 11:29:37,122 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth3 (code=1)，将在逻辑上标记为已恢复
2025-09-09 11:29:37,123 - test_high_availability - INFO - 裂脑场景测试完成
2025-09-09 11:29:37,124 - RSTPTest - INFO - 测试完成: test_split_brain_scenario (耗时: 10.20秒)
2025-09-09 11:29:37,124 - RSTPTest - INFO - ============================================================

2025-09-09 11:29:37,127 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 11:29:37,128 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 11:29:37,128 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 11:29:37,262 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 11:29:37,262 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 11:29:37,262 - RSTPTest - INFO - ============================================================
2025-09-09 11:29:37,263 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[12288]
2025-09-09 11:29:37,263 - RSTPTest - INFO - ============================================================
2025-09-09 11:29:37,264 - test_parameters - INFO - 测试网桥优先级: 12288
2025-09-09 11:29:37,327 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-09 11:29:39,358 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[12288] (耗时: 2.09秒)
2025-09-09 11:29:39,358 - RSTPTest - INFO - ============================================================

2025-09-09 11:29:39,360 - RSTPTest - INFO - ============================================================
2025-09-09 11:29:39,360 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[16384]
2025-09-09 11:29:39,360 - RSTPTest - INFO - ============================================================
2025-09-09 11:29:39,361 - test_parameters - INFO - 测试网桥优先级: 16384
2025-09-09 11:29:39,398 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-09 11:29:41,429 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[16384] (耗时: 2.07秒)
2025-09-09 11:29:41,430 - RSTPTest - INFO - ============================================================

2025-09-09 11:29:41,432 - RSTPTest - INFO - ============================================================
2025-09-09 11:29:41,432 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[32768]
2025-09-09 11:29:41,432 - RSTPTest - INFO - ============================================================
2025-09-09 11:29:41,433 - test_parameters - INFO - 测试网桥优先级: 32768
2025-09-09 11:29:41,470 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-09 11:29:43,499 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[32768] (耗时: 2.07秒)
2025-09-09 11:29:43,500 - RSTPTest - INFO - ============================================================

2025-09-09 11:29:43,502 - RSTPTest - INFO - ============================================================
2025-09-09 11:29:43,502 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[61440]
2025-09-09 11:29:43,502 - RSTPTest - INFO - ============================================================
2025-09-09 11:29:43,503 - test_parameters - INFO - 测试网桥优先级: 61440
2025-09-09 11:29:43,543 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-09 11:29:45,572 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[61440] (耗时: 2.07秒)
2025-09-09 11:29:45,572 - RSTPTest - INFO - ============================================================

2025-09-09 11:29:45,574 - RSTPTest - INFO - ============================================================
2025-09-09 11:29:45,574 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[4097]
2025-09-09 11:29:45,574 - RSTPTest - INFO - ============================================================
2025-09-09 11:29:45,575 - test_parameters - INFO - 测试无效优先级: 4097
2025-09-09 11:29:45,614 - test_parameters - INFO - 无效优先级4097被正确拒绝
2025-09-09 11:29:45,614 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[4097] (耗时: 0.04秒)
2025-09-09 11:29:45,615 - RSTPTest - INFO - ============================================================

2025-09-09 11:29:45,616 - RSTPTest - INFO - ============================================================
2025-09-09 11:29:45,616 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[12289]
2025-09-09 11:29:45,617 - RSTPTest - INFO - ============================================================
2025-09-09 11:29:45,617 - test_parameters - INFO - 测试无效优先级: 12289
2025-09-09 11:29:45,666 - test_parameters - INFO - 无效优先级12289被正确拒绝
2025-09-09 11:29:45,667 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[12289] (耗时: 0.05秒)
2025-09-09 11:29:45,667 - RSTPTest - INFO - ============================================================

2025-09-09 11:29:45,668 - RSTPTest - INFO - ============================================================
2025-09-09 11:29:45,669 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[70000]
2025-09-09 11:29:45,669 - RSTPTest - INFO - ============================================================
2025-09-09 11:29:45,669 - test_parameters - INFO - 测试无效优先级: 70000
2025-09-09 11:29:45,718 - test_parameters - INFO - 无效优先级70000被正确拒绝
2025-09-09 11:29:45,719 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[70000] (耗时: 0.05秒)
2025-09-09 11:29:45,719 - RSTPTest - INFO - ============================================================

2025-09-09 11:29:45,720 - RSTPTest - INFO - ============================================================
2025-09-09 11:29:45,720 - RSTPTest - INFO - 开始测试: test_hello_time
2025-09-09 11:29:45,720 - RSTPTest - INFO - ============================================================
2025-09-09 11:29:45,721 - test_parameters - INFO - 测试Hello Time参数
2025-09-09 11:29:45,721 - test_parameters - INFO - 设置Hello Time: 1秒
2025-09-09 11:29:47,789 - test_parameters - INFO - 设置Hello Time: 2秒
2025-09-09 11:29:49,860 - test_parameters - INFO - 设置Hello Time: 5秒
2025-09-09 11:29:51,930 - test_parameters - INFO - Hello Time测试通过
2025-09-09 11:29:51,931 - RSTPTest - INFO - 测试完成: test_hello_time (耗时: 6.21秒)
2025-09-09 11:29:51,931 - RSTPTest - INFO - ============================================================

2025-09-09 11:29:51,933 - RSTPTest - INFO - ============================================================
2025-09-09 11:29:51,933 - RSTPTest - INFO - 开始测试: test_forward_delay
2025-09-09 11:29:51,933 - RSTPTest - INFO - ============================================================
2025-09-09 11:29:51,934 - test_parameters - INFO - 测试Forward Delay参数
2025-09-09 11:29:51,934 - test_parameters - INFO - 设置Forward Delay: 4秒
2025-09-09 11:29:53,999 - test_parameters - INFO - 设置Forward Delay: 10秒
2025-09-09 11:29:56,071 - test_parameters - INFO - 设置Forward Delay: 15秒
2025-09-09 11:29:58,144 - test_parameters - INFO - Forward Delay测试通过
2025-09-09 11:29:58,144 - RSTPTest - INFO - 测试完成: test_forward_delay (耗时: 6.21秒)
2025-09-09 11:29:58,145 - RSTPTest - INFO - ============================================================

2025-09-09 11:29:58,146 - RSTPTest - INFO - ============================================================
2025-09-09 11:29:58,146 - RSTPTest - INFO - 开始测试: test_max_age
2025-09-09 11:29:58,146 - RSTPTest - INFO - ============================================================
2025-09-09 11:29:58,147 - test_parameters - INFO - 测试Max Age参数
2025-09-09 11:29:58,147 - test_parameters - INFO - 设置Max Age: 6秒
2025-09-09 11:30:00,215 - test_parameters - INFO - 设置Max Age: 10秒
2025-09-09 11:30:02,285 - test_parameters - INFO - 设置Max Age: 20秒
2025-09-09 11:30:04,354 - test_parameters - INFO - Max Age测试通过
2025-09-09 11:30:04,355 - RSTPTest - INFO - 测试完成: test_max_age (耗时: 6.21秒)
2025-09-09 11:30:04,356 - RSTPTest - INFO - ============================================================

2025-09-09 11:30:04,713 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 11:30:04,713 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 11:30:05,257 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 11:30:05,257 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 11:30:05,258 - RSTPTest - INFO - ============================================================
2025-09-09 11:30:05,258 - RSTPTest - INFO - 开始测试: test_port_cost
2025-09-09 11:30:05,258 - RSTPTest - INFO - ============================================================
2025-09-09 11:30:05,259 - test_parameters - INFO - 测试端口路径成本
2025-09-09 11:30:05,260 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 11:30:05,260 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 11:30:05,260 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 11:30:05,260 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 11:30:05,261 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 11:30:05,261 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 11:30:05,261 - NetworkTopology - INFO - DUT: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 11:30:05,262 - NetworkTopology - INFO - DUT: 检查mstpd支持...
2025-09-09 11:30:05,268 - NetworkTopology - INFO - DUT: mstpd检查结果: code=1
2025-09-09 11:30:05,269 - NetworkTopology - INFO - DUT: 检查iproute2支持...
2025-09-09 11:30:05,315 - NetworkTopology - INFO - DUT: ip命令检查: code=0
2025-09-09 11:30:05,316 - NetworkTopology - INFO - DUT: 使用iproute2配置RSTP
2025-09-09 11:30:05,316 - NetworkTopology - INFO - DUT: 最终选择RSTP方法: iproute2
2025-09-09 11:30:05,316 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 11:30:05,317 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 11:30:05,647 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 11:30:06,038 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 11:30:06,039 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 11:30:06,039 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 11:30:06,039 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 11:30:06,158 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 11:30:06,278 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 11:30:06,279 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 11:30:06,335 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 11:30:06,384 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 11:30:06,432 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 11:30:06,432 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 11:30:06,432 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 11:30:06,432 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 11:30:06,433 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 11:30:06,433 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 11:30:06,433 - NetworkTopology - INFO - TestNode1: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 11:30:06,433 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 11:30:06,452 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 11:30:06,453 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 11:30:06,665 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=1, output=
2025-09-09 11:30:06,666 - NetworkTopology - INFO - TestNode1: 尝试启动mstpd服务...
2025-09-09 11:30:07,053 - NetworkTopology - INFO - TestNode1: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 11:30:09,238 - NetworkTopology - INFO - TestNode1: mstpd启动后状态: code=1
2025-09-09 11:30:09,239 - NetworkTopology - INFO - TestNode1: mstpd启动失败，使用iproute2
2025-09-09 11:30:09,239 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: iproute2
2025-09-09 11:30:09,239 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 11:30:09,240 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 11:30:10,402 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 11:30:12,878 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 11:30:12,879 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 11:30:12,879 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 11:30:12,880 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 11:30:13,645 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 11:30:14,435 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 11:30:14,435 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 11:30:14,817 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 11:30:14,881 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 11:30:14,940 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 11:30:14,941 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 11:30:14,941 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 11:30:14,941 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 11:30:14,942 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 11:30:14,942 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 11:30:14,942 - NetworkTopology - INFO - TestNode2: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 11:30:14,942 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 11:30:14,961 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 11:30:14,962 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 11:30:15,171 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=1, output=
2025-09-09 11:30:15,171 - NetworkTopology - INFO - TestNode2: 尝试启动mstpd服务...
2025-09-09 11:30:15,560 - NetworkTopology - INFO - TestNode2: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 11:30:17,728 - NetworkTopology - INFO - TestNode2: mstpd启动后状态: code=1
2025-09-09 11:30:17,728 - NetworkTopology - INFO - TestNode2: mstpd启动失败，使用iproute2
2025-09-09 11:30:17,729 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: iproute2
2025-09-09 11:30:17,729 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 11:30:17,729 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 11:30:18,908 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 11:31:20,884 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 11:31:20,884 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 11:31:20,885 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 11:31:20,885 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 11:31:41,457 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 11:32:02,038 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 11:32:02,039 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 11:32:08,880 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 11:32:08,954 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 11:32:09,026 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 11:32:09,027 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 11:32:09,027 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 11:32:14,027 - test_parameters - INFO - 设置端口eth0成本: 10
2025-09-09 11:32:14,360 - test_parameters - INFO - 设置端口eth0成本: 100
2025-09-09 11:32:14,415 - test_parameters - INFO - 设置端口eth0成本: 1000
2025-09-09 11:32:14,472 - test_parameters - INFO - 设置端口eth0成本: 20000
2025-09-09 11:32:14,527 - test_parameters - INFO - 端口成本测试通过
2025-09-09 11:32:14,528 - RSTPTest - INFO - 测试完成: test_port_cost (耗时: 129.27秒)
2025-09-09 11:32:14,528 - RSTPTest - INFO - ============================================================

2025-09-09 11:32:14,530 - RSTPTest - INFO - ============================================================
2025-09-09 11:32:14,530 - RSTPTest - INFO - 开始测试: test_parameter_persistence
2025-09-09 11:32:14,530 - RSTPTest - INFO - ============================================================
2025-09-09 11:32:14,531 - test_parameters - INFO - 测试参数持久性
2025-09-09 11:32:17,800 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:32:17,968 - RSTPTest - INFO - 测试完成: test_parameter_persistence (耗时: 3.44秒)
2025-09-09 11:32:17,968 - RSTPTest - INFO - ============================================================

2025-09-09 11:32:17,970 - RSTPTest - INFO - ============================================================
2025-09-09 11:32:17,970 - RSTPTest - INFO - 开始测试: test_parameter_boundaries
2025-09-09 11:32:17,970 - RSTPTest - INFO - ============================================================
2025-09-09 11:32:17,971 - test_parameters - INFO - 测试参数边界值
2025-09-09 11:32:18,008 - test_parameters - INFO - 最小值0: 失败
2025-09-09 11:32:18,064 - test_parameters - INFO - 最大值65535: 失败
2025-09-09 11:32:18,120 - test_parameters - INFO - 正确拒绝了无效值-1
2025-09-09 11:32:18,176 - test_parameters - INFO - 正确拒绝了无效值65536
2025-09-09 11:32:18,228 - test_parameters - INFO - 最小值1: 失败
2025-09-09 11:32:18,283 - test_parameters - INFO - 最大值10: 失败
2025-09-09 11:32:18,336 - test_parameters - INFO - 正确拒绝了无效值0
2025-09-09 11:32:18,393 - test_parameters - INFO - 正确拒绝了无效值11
2025-09-09 11:32:18,444 - test_parameters - INFO - 最小值4: 失败
2025-09-09 11:32:18,500 - test_parameters - INFO - 最大值30: 失败
2025-09-09 11:32:18,552 - test_parameters - INFO - 正确拒绝了无效值3
2025-09-09 11:32:18,607 - test_parameters - INFO - 正确拒绝了无效值31
2025-09-09 11:32:18,659 - test_parameters - INFO - 最小值6: 失败
2025-09-09 11:32:18,712 - test_parameters - INFO - 最大值40: 失败
2025-09-09 11:32:18,764 - test_parameters - INFO - 正确拒绝了无效值5
2025-09-09 11:32:18,816 - test_parameters - INFO - 正确拒绝了无效值41
2025-09-09 11:32:18,816 - test_parameters - INFO - 参数边界测试完成
2025-09-09 11:32:18,817 - RSTPTest - INFO - 测试完成: test_parameter_boundaries (耗时: 0.85秒)
2025-09-09 11:32:18,817 - RSTPTest - INFO - ============================================================

2025-09-09 11:32:18,818 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 11:32:18,818 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 11:32:18,818 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 11:32:18,955 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 11:32:18,955 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 11:32:19,307 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 11:32:19,307 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 11:32:19,617 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 11:32:19,618 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 11:32:19,618 - RSTPTest - INFO - ============================================================
2025-09-09 11:32:19,619 - RSTPTest - INFO - 开始测试: test_port_role_assignment_simplified
2025-09-09 11:32:19,619 - RSTPTest - INFO - ============================================================
2025-09-09 11:32:19,622 - RSTPTest - INFO - 测试完成: test_port_role_assignment_simplified (耗时: 0.00秒)
2025-09-09 11:32:19,622 - RSTPTest - INFO - ============================================================

2025-09-09 11:32:19,624 - RSTPTest - INFO - ============================================================
2025-09-09 11:32:19,624 - RSTPTest - INFO - 开始测试: test_root_bridge_election
2025-09-09 11:32:19,624 - RSTPTest - INFO - ============================================================
2025-09-09 11:32:19,625 - test_protocol_conformance - INFO - 开始根网桥选举测试
2025-09-09 11:32:19,625 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 11:32:19,626 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 11:32:19,626 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 11:32:19,626 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 11:32:19,626 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 11:32:19,626 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 11:32:19,627 - NetworkTopology - INFO - DUT: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 11:32:19,627 - NetworkTopology - INFO - DUT: 检查mstpd支持...
2025-09-09 11:32:19,633 - NetworkTopology - INFO - DUT: mstpd检查结果: code=1
2025-09-09 11:32:19,634 - NetworkTopology - INFO - DUT: 检查iproute2支持...
2025-09-09 11:32:19,682 - NetworkTopology - INFO - DUT: ip命令检查: code=0
2025-09-09 11:32:19,683 - NetworkTopology - INFO - DUT: 使用iproute2配置RSTP
2025-09-09 11:32:19,683 - NetworkTopology - INFO - DUT: 最终选择RSTP方法: iproute2
2025-09-09 11:32:19,683 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 11:32:19,684 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 11:32:19,988 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 11:32:20,380 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 11:32:20,380 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 11:32:20,380 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 11:32:20,381 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 11:32:20,496 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 11:32:20,608 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 11:32:20,608 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 11:32:20,665 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 11:32:20,713 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 11:32:20,761 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 11:32:20,761 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 11:32:20,762 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 11:32:20,762 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 11:32:20,762 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 11:32:20,762 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 11:32:20,762 - NetworkTopology - INFO - TestNode1: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 11:32:20,763 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 11:32:20,781 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 11:32:20,781 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 11:32:20,981 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=1, output=
2025-09-09 11:32:20,982 - NetworkTopology - INFO - TestNode1: 尝试启动mstpd服务...
2025-09-09 11:32:21,337 - NetworkTopology - INFO - TestNode1: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 11:32:23,483 - NetworkTopology - INFO - TestNode1: mstpd启动后状态: code=1
2025-09-09 11:32:23,484 - NetworkTopology - INFO - TestNode1: mstpd启动失败，使用iproute2
2025-09-09 11:32:23,484 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: iproute2
2025-09-09 11:32:23,484 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 11:32:23,484 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 11:32:24,588 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 11:32:26,851 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 11:32:26,852 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 11:32:26,852 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 11:32:26,852 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 11:32:27,551 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 11:32:28,274 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 11:32:28,275 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 11:32:28,639 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 11:32:28,719 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 11:32:28,777 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 11:32:28,777 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 11:32:28,777 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 11:32:28,778 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 11:32:28,778 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 11:32:28,778 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 11:32:28,778 - NetworkTopology - INFO - TestNode2: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 11:32:28,779 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 11:32:28,796 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 11:32:28,796 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 11:32:34,813 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=1, output=
2025-09-09 11:32:34,813 - NetworkTopology - INFO - TestNode2: 尝试启动mstpd服务...
2025-09-09 11:32:45,103 - NetworkTopology - INFO - TestNode2: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 11:32:50,302 - NetworkTopology - INFO - TestNode2: mstpd启动后状态: code=1
2025-09-09 11:32:50,302 - NetworkTopology - INFO - TestNode2: mstpd启动失败，使用iproute2
2025-09-09 11:32:50,303 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: iproute2
2025-09-09 11:32:50,303 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 11:32:50,303 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 11:33:06,341 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 11:33:08,562 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 11:33:08,562 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 11:33:08,563 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 11:33:08,563 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 11:33:09,252 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 11:33:09,954 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 11:33:09,955 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 11:33:10,324 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 11:33:10,394 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 11:33:10,454 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 11:33:10,455 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 11:33:10,455 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 11:33:13,456 - test_protocol_conformance - INFO - === 检查DUT网桥配置 ===
2025-09-09 11:33:13,461 - test_protocol_conformance - INFO - 找到测试网桥: br0
2025-09-09 11:33:13,513 - test_protocol_conformance - INFO - 启用br0的RSTP
2025-09-09 11:33:13,560 - test_protocol_conformance - INFO - br0 STP状态: ('', 'cat: /sys/class/net/br0/bridge/stp_state: No such file or directory\n', 1)
2025-09-09 11:33:13,560 - test_protocol_conformance - INFO - === 初始网桥状态 ===
2025-09-09 11:33:13,666 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:33:13,820 - test_protocol_conformance - INFO - 活动端口数: 0
2025-09-09 11:33:13,821 - test_protocol_conformance - WARNING - 活动端口不足，尝试启用更多端口
2025-09-09 11:33:17,218 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:33:17,376 - test_protocol_conformance - INFO - 初始端口状态:
2025-09-09 11:33:17,377 - test_protocol_conformance - INFO - 初始状态 - DUT有Root Port: False
2025-09-09 11:33:17,377 - test_protocol_conformance - INFO - === 配置网桥优先级 ===
2025-09-09 11:33:17,377 - test_protocol_conformance - INFO - 设置TestNode1优先级为16384
2025-09-09 11:33:17,684 - test_protocol_conformance - INFO - 设置DUT优先级为32768
2025-09-09 11:33:17,695 - test_protocol_conformance - INFO - ip命令设置结果: ('', 'RTNETLINK answers: Operation not supported\n', 2)
2025-09-09 11:33:17,745 - test_protocol_conformance - INFO - sysfs设置结果: ('32768\n', 'tee: /sys/class/net/br0/bridge/priority: No such file or directory\n', 1)
2025-09-09 11:33:17,745 - test_protocol_conformance - INFO - 设置TestNode2优先级为24576
2025-09-09 11:33:18,069 - test_protocol_conformance - INFO - 等待RSTP收敛...
2025-09-09 11:33:28,070 - test_protocol_conformance - INFO - === 第一阶段验证 ===
2025-09-09 11:33:28,134 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:33:28,335 - test_protocol_conformance - INFO - DUT当前优先级: 
2025-09-09 11:33:28,337 - test_protocol_conformance - WARNING - 优先级验证失败: 优先级设置失败，期望32768，实际
assert '' == '32768'
  
  [0m[91m- 32768[39;49;00m[90m[39;49;00m
2025-09-09 11:33:28,337 - test_protocol_conformance - INFO - 
=== 第二阶段：DUT应成为根桥 ===
2025-09-09 11:33:28,337 - test_protocol_conformance - INFO - 设置DUT优先级为12288（最低）
2025-09-09 11:33:28,491 - test_protocol_conformance - INFO - 设置后优先级: 
2025-09-09 11:33:28,492 - test_protocol_conformance - INFO - 等待RSTP重新收敛...
2025-09-09 11:33:38,492 - test_protocol_conformance - INFO - === 最终验证 ===
2025-09-09 11:33:38,555 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:33:38,711 - test_protocol_conformance - ERROR - DUT RSTP实现问题诊断:
2025-09-09 11:33:38,712 - test_protocol_conformance - ERROR - 1. DUT优先级已设置为12288（最低）
2025-09-09 11:33:38,712 - test_protocol_conformance - ERROR - 2. 但DUT仍有Root Port: False
2025-09-09 11:33:38,712 - test_protocol_conformance - ERROR - 3. Designated端口数: 0
2025-09-09 11:33:38,712 - test_protocol_conformance - ERROR - 可能的原因:
2025-09-09 11:33:38,713 - test_protocol_conformance - ERROR - - DUT的RSTP实现不符合标准
2025-09-09 11:33:38,713 - test_protocol_conformance - ERROR - - DUT没有正确处理优先级变化
2025-09-09 11:33:38,713 - test_protocol_conformance - ERROR - - DUT的BPDU发送/接收有问题
2025-09-09 11:33:38,754 - RSTPTest - INFO - 测试完成: test_root_bridge_election (耗时: 79.13秒)
2025-09-09 11:33:38,754 - RSTPTest - INFO - ============================================================

2025-09-09 11:33:38,757 - RSTPTest - INFO - ============================================================
2025-09-09 11:33:38,757 - RSTPTest - INFO - 开始测试: test_port_role_assignment
2025-09-09 11:33:38,757 - RSTPTest - INFO - ============================================================
2025-09-09 11:33:38,758 - test_protocol_conformance - INFO - 开始端口角色分配测试
2025-09-09 11:33:38,758 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 11:33:38,758 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 11:33:38,758 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 11:33:38,759 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 11:33:38,759 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 11:33:38,759 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 11:33:38,759 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 11:33:38,759 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 11:33:39,055 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 11:33:39,438 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 11:33:39,439 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 11:33:39,439 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 11:33:39,439 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 11:33:39,551 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 11:33:39,667 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 11:33:39,667 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 11:33:39,724 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 11:33:39,772 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 11:33:39,820 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 11:33:39,820 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 11:33:39,820 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 11:33:39,821 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 11:33:39,821 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 11:33:39,821 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 11:33:39,821 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 11:33:39,822 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 11:33:40,945 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 11:33:43,241 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 11:33:43,242 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 11:33:43,242 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 11:33:43,242 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 11:33:43,973 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 11:33:44,732 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 11:33:44,732 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 11:33:45,091 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 11:33:45,169 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 11:33:45,229 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 11:33:45,229 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 11:33:45,229 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 11:33:45,229 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 11:33:45,230 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 11:33:45,230 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 11:33:45,230 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 11:33:45,230 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 11:33:46,336 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 11:33:48,588 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 11:33:48,588 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 11:33:48,588 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 11:33:48,589 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 11:33:49,313 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 11:33:50,078 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 11:33:50,079 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 11:33:50,464 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 11:33:50,536 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 11:33:50,610 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 11:33:50,611 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 11:33:50,611 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 11:33:53,946 - test_protocol_conformance - INFO - 启用DUT的网桥接口...
2025-09-09 11:33:54,072 - test_protocol_conformance - INFO - 已启用接口 eth0
2025-09-09 11:33:54,240 - test_protocol_conformance - INFO - 已启用接口 eth1
2025-09-09 11:33:54,408 - test_protocol_conformance - INFO - 已启用接口 eth2
2025-09-09 11:33:57,415 - test_protocol_conformance - INFO - br0 网桥接口状态:
('18: veth45650b3@if17: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 master br-b2bd2c7fedc8 state forwarding priority 32 cost 2 \n26: veth6d7f1eb@if25: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 master br-b2bd2c7fedc8 state forwarding priority 32 cost 2 \n', '', 0)
2025-09-09 11:33:57,464 - test_protocol_conformance - INFO - br0 状态:
('5: br0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1508 qdisc mq state UP mode DEFAULT group default qlen 1000\n    link/ether 90:12:10:b5:7d:f7 brd ff:ff:ff:ff:ff:ff\n    altname enp0s30f4\n', '', 0)
2025-09-09 11:33:57,511 - test_protocol_conformance - INFO - br0 STP状态:
('', 'cat: /sys/class/net/br0/bridge/stp_state: No such file or directory\n', 1)
2025-09-09 11:33:57,512 - test_protocol_conformance - INFO - 获取初始网桥状态...
2025-09-09 11:33:57,618 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:33:57,772 - test_protocol_conformance - INFO - Bridge ID: 未获取
2025-09-09 11:33:57,772 - test_protocol_conformance - INFO - Root ID: 未获取
2025-09-09 11:33:57,773 - test_protocol_conformance - INFO - Root Port: eth0
2025-09-09 11:33:57,773 - test_protocol_conformance - INFO - 协议版本: unknown
2025-09-09 11:33:57,773 - test_protocol_conformance - INFO - 端口 eth0: 角色=root, 状态=disabled, 成本=0
2025-09-09 11:33:57,773 - test_protocol_conformance - INFO - 端口 eth2: 角色=unknown, 状态=disabled, 成本=0
2025-09-09 11:33:57,773 - test_protocol_conformance - INFO - 端口 eth3: 角色=unknown, 状态=disabled, 成本=0
2025-09-09 11:33:57,773 - test_protocol_conformance - INFO - 等待网络收敛...
2025-09-09 11:33:57,774 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 11:33:57,878 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:33:58,031 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.26秒
2025-09-09 11:33:58,137 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:33:58,292 - test_protocol_conformance - INFO - 收敛后的端口状态:
2025-09-09 11:33:58,292 - test_protocol_conformance - INFO - 端口 eth0: 角色=root, 状态=disabled, 成本=0
2025-09-09 11:33:58,292 - test_protocol_conformance - INFO - 端口 eth2: 角色=unknown, 状态=disabled, 成本=0
2025-09-09 11:33:58,292 - test_protocol_conformance - INFO - 端口 eth3: 角色=unknown, 状态=disabled, 成本=0
2025-09-09 11:33:58,443 - test_protocol_conformance - INFO - is_root_bridge() 返回: True
2025-09-09 11:33:58,444 - test_protocol_conformance - INFO - 有Root Port: False
2025-09-09 11:33:58,444 - test_protocol_conformance - INFO - 最终判定 - DUT是根桥: True
2025-09-09 11:33:58,445 - test_protocol_conformance - INFO - 活动端口数: 0
2025-09-09 11:33:58,445 - test_protocol_conformance - INFO - 禁用端口: ['eth0', 'eth2', 'eth3']
2025-09-09 11:33:58,445 - test_protocol_conformance - WARNING - 活动端口不足，尝试启用禁用的端口...
2025-09-09 11:33:58,445 - test_protocol_conformance - INFO - 尝试启用端口 eth0
2025-09-09 11:33:58,612 - test_protocol_conformance - INFO - 尝试启用端口 eth2
2025-09-09 11:34:03,842 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:34:03,999 - test_protocol_conformance - INFO - 重新配置后 - 活动端口数: 0
2025-09-09 11:34:04,000 - test_protocol_conformance - INFO - 重新配置后 - 禁用端口: ['eth0', 'eth2', 'eth3']
2025-09-09 11:34:04,000 - test_protocol_conformance - INFO - 端口角色分布: {}
2025-09-09 11:34:04,041 - RSTPTest - INFO - 测试完成: test_port_role_assignment (耗时: 25.28秒)
2025-09-09 11:34:04,042 - RSTPTest - INFO - ============================================================

2025-09-09 11:34:04,045 - RSTPTest - INFO - ============================================================
2025-09-09 11:34:04,045 - RSTPTest - INFO - 开始测试: test_rstp_protocol_verification
2025-09-09 11:34:04,045 - RSTPTest - INFO - ============================================================
2025-09-09 11:34:04,046 - test_protocol_conformance - INFO - 开始RSTP协议验证
2025-09-09 11:34:04,046 - test_protocol_conformance - INFO - === 检查OVS配置 ===
2025-09-09 11:34:04,056 - test_protocol_conformance - INFO - 当前OVS配置:
8c812ea9-3b0c-46a1-bd3c-ef3904d38c1a
    Bridge SE_ETH4
        Port SE_ETH4
            Interface SE_ETH4
                type: internal
    Bridge SE_ETH6
        Port SE_ETH6
            Interface SE_ETH6
                type: internal
    Bridge br0
        Port eth0
            Interface eth0
                error: "could not open network device eth0 (No such device)"
        Port br0
            Interface br0
                type: internal
                error: "could not add network devi
2025-09-09 11:34:04,107 - test_protocol_conformance - INFO - 使用现有网桥 SE_ETH2，端口: ['br3', 'br4']
2025-09-09 11:34:04,108 - test_protocol_conformance - INFO - === 配置RSTP（确保是RSTP而不是STP）===
2025-09-09 11:34:05,220 - test_protocol_conformance - INFO - 启用RSTP...
2025-09-09 11:34:05,239 - test_protocol_conformance - INFO - ✓ RSTP已启用
2025-09-09 11:34:05,239 - test_protocol_conformance - INFO - 设置RSTP参数...
2025-09-09 11:34:05,292 - test_protocol_conformance - INFO - ✓ 设置: rstp-hello-time=2
2025-09-09 11:34:05,343 - test_protocol_conformance - INFO - ✓ 设置: rstp-forward-delay=4
2025-09-09 11:34:05,396 - test_protocol_conformance - INFO - ✓ 设置: rstp-max-age=6
2025-09-09 11:34:05,448 - test_protocol_conformance - INFO - ✓ 设置: rstp-priority=32768
2025-09-09 11:34:05,499 - test_protocol_conformance - INFO - ✓ 设置: rstp-force-protocol-version=2
2025-09-09 11:34:05,651 - test_protocol_conformance - INFO - ✓ 端口 br3 RSTP已启用
2025-09-09 11:34:05,803 - test_protocol_conformance - INFO - ✓ 端口 br4 RSTP已启用
2025-09-09 11:34:05,851 - test_protocol_conformance - INFO - 等待RSTP初始化...
2025-09-09 11:34:10,853 - test_protocol_conformance - INFO - === 验证RSTP配置 ===
2025-09-09 11:34:10,861 - test_protocol_conformance - INFO - RSTP状态:
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     6s
  stp-fwd-delay   4s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-09 11:34:10,862 - test_protocol_conformance - INFO - ✓ 使用RSTP时间参数
2025-09-09 11:34:10,862 - test_protocol_conformance - INFO - === 创建测试拓扑 ===
2025-09-09 11:34:10,862 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 11:34:10,863 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 11:34:10,863 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 11:34:10,863 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 11:34:10,863 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 11:34:10,864 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 11:34:10,864 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 11:34:10,864 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 11:34:11,158 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 11:34:11,546 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 11:34:11,547 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 11:34:11,547 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 11:34:11,547 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 11:34:11,662 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 11:34:11,778 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 11:34:11,778 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 11:34:11,831 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 11:34:11,883 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 11:34:11,932 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 11:34:11,932 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 11:34:11,933 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 11:34:11,933 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 11:34:11,933 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 11:34:11,934 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 11:34:11,934 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 11:34:11,934 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 11:34:13,041 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 11:34:15,287 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 11:34:15,288 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 11:34:15,288 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 11:34:15,288 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 11:34:16,003 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 11:34:16,700 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 11:34:16,700 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 11:34:17,056 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 11:34:17,141 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 11:34:17,199 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 11:34:17,200 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 11:34:17,200 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 11:34:17,200 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 11:34:17,201 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 11:34:17,201 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 11:34:17,201 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 11:34:17,201 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 11:34:18,311 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 11:34:20,705 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 11:34:20,705 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 11:34:20,706 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 11:34:20,706 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 11:34:21,407 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 11:34:22,089 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 11:34:22,090 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 11:34:22,467 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 11:34:22,544 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 11:34:22,603 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 11:34:22,604 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 11:34:22,604 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 11:34:27,605 - test_protocol_conformance - INFO - === 捕获BPDU ===
2025-09-09 11:34:27,606 - test_protocol_conformance - INFO - 在 SE_ETH2 上捕获BPDU...
2025-09-09 11:34:27,606 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: SE_ETH2, 数量: 10)
2025-09-09 11:34:37,660 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-09 11:34:37,661 - test_protocol_conformance - INFO - 在 br3 上捕获BPDU...
2025-09-09 11:34:37,661 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br3, 数量: 10)
2025-09-09 11:34:47,744 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-09 11:34:47,744 - test_protocol_conformance - INFO - 在 br4 上捕获BPDU...
2025-09-09 11:34:47,745 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br4, 数量: 10)
2025-09-09 11:34:57,836 - RSTPAnalyzer_DUT - INFO - 捕获到 5 个BPDU包
2025-09-09 11:34:57,836 - test_protocol_conformance - INFO - ✓ 捕获到 5 个BPDU
2025-09-09 11:34:57,837 - test_protocol_conformance - INFO - === 分析BPDU ===
2025-09-09 11:34:57,837 - test_protocol_conformance - INFO - 第一个BPDU信息: {'timestamp': '11:34:49.703021', 'raw': '11:34:49.703021 00:e0:0c:25:0c:01 > 01:80:c2:00:00:00, 802.3, length 39: LLC, dsap STP (0x42) Individual, ssap STP (0x42) Command, ctrl 0x03: STP 802.1w, Rapid STP, Flags [Learn, Forward, Agreement], bridge-id 8000.6e:b3:08:fa:01:34.8002, length 36', 'is_rstp': False}
2025-09-09 11:34:57,837 - test_protocol_conformance - INFO - BPDU统计: RSTP=0, STP=5
2025-09-09 11:34:57,837 - test_protocol_conformance - WARNING - 检测到更多STP BPDU
2025-09-09 11:34:57,886 - test_protocol_conformance - INFO - rstp_enable状态: true
2025-09-09 11:34:57,938 - test_protocol_conformance - INFO - stp_enable状态: false
2025-09-09 11:34:57,990 - test_protocol_conformance - WARNING - OVS配置为RSTP但发送STP BPDU，可能是实现限制
2025-09-09 11:34:57,991 - test_protocol_conformance - INFO - 基于配置判断为RSTP
2025-09-09 11:34:57,991 - test_protocol_conformance - INFO - ✓ RSTP协议验证通过（检测到 5 个RSTP BPDU）
2025-09-09 11:34:57,992 - RSTPTest - INFO - 测试完成: test_rstp_protocol_verification (耗时: 53.95秒)
2025-09-09 11:34:57,992 - RSTPTest - INFO - ============================================================

2025-09-09 11:34:57,993 - RSTPTest - INFO - ============================================================
2025-09-09 11:34:57,994 - RSTPTest - INFO - 开始测试: test_alternate_port_verification
2025-09-09 11:34:57,994 - RSTPTest - INFO - ============================================================
2025-09-09 11:34:57,995 - test_protocol_conformance - INFO - 开始Alternate Port验证测试
2025-09-09 11:34:57,995 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 11:34:57,995 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 11:34:57,995 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 11:34:57,996 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 11:34:57,996 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 11:34:57,996 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 11:34:57,996 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 11:34:57,996 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 11:34:58,306 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 11:34:58,693 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 11:34:58,693 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 11:34:58,694 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 11:34:58,694 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 11:34:58,806 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 11:34:58,926 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 11:34:58,926 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 11:34:58,982 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 11:34:59,030 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 11:34:59,078 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 11:34:59,079 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 11:34:59,079 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 11:34:59,079 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 11:34:59,079 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 11:34:59,080 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 11:34:59,080 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 11:34:59,080 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 11:35:00,174 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 11:35:02,404 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 11:35:02,404 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 11:35:02,405 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 11:35:02,405 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 11:35:03,149 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 11:35:03,908 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 11:35:03,908 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 11:35:04,290 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 11:35:04,368 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 11:35:04,429 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 11:35:04,430 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 11:35:04,430 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 11:35:04,430 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 11:35:04,430 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 11:35:04,431 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 11:35:04,431 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 11:35:04,431 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 11:35:05,600 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 11:35:07,882 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 11:35:07,882 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 11:35:07,882 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 11:35:07,883 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 11:35:08,585 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 11:35:09,301 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 11:35:09,302 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 11:35:09,667 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 11:35:09,735 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 11:35:09,792 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 11:35:09,793 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 11:35:09,793 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 11:35:09,793 - test_protocol_conformance - INFO - 设置网桥优先级
2025-09-09 11:35:10,415 - test_protocol_conformance - INFO - 等待RSTP收敛...
2025-09-09 11:35:10,416 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 11:35:10,476 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:35:10,630 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.21秒
2025-09-09 11:35:10,737 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:35:10,890 - test_protocol_conformance - INFO - DUT桥信息: BridgeInfo(bridge_id='', root_id='', root_port='eth2', root_path_cost=0, protocol_version='unknown', hello_time=0, forward_delay=0, max_age=0, topology_changes=0, ports={'eth0': PortInfo(name='eth0', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth2': PortInfo(name='eth2', role=<PortRole.ROOT: 'root'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth3': PortInfo(name='eth3', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')})
2025-09-09 11:35:11,082 - RSTPTest - INFO - 测试完成: test_alternate_port_verification (耗时: 13.09秒)
2025-09-09 11:35:11,082 - RSTPTest - INFO - ============================================================

2025-09-09 11:35:11,084 - RSTPTest - INFO - ============================================================
2025-09-09 11:35:11,084 - RSTPTest - INFO - 开始测试: test_port_state_transitions
2025-09-09 11:35:11,084 - RSTPTest - INFO - ============================================================
2025-09-09 11:35:11,085 - test_protocol_conformance - INFO - 开始端口状态转换测试
2025-09-09 11:35:11,125 - RSTPTest - INFO - 测试完成: test_port_state_transitions (耗时: 0.04秒)
2025-09-09 11:35:11,125 - RSTPTest - INFO - ============================================================

2025-09-09 11:35:11,127 - RSTPTest - INFO - ============================================================
2025-09-09 11:35:11,127 - RSTPTest - INFO - 开始测试: test_bpdu_propagation_and_keepalive
2025-09-09 11:35:11,127 - RSTPTest - INFO - ============================================================
2025-09-09 11:35:11,128 - test_protocol_conformance - INFO - 开始BPDU传播和保活机制测试
2025-09-09 11:35:11,128 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 11:35:11,128 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 11:35:11,128 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 11:35:11,128 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 11:35:11,129 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 11:35:11,129 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 11:35:11,129 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 11:35:11,129 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 11:35:11,397 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 11:35:11,789 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 11:35:11,790 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 11:35:11,790 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 11:35:11,790 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 11:35:11,909 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 11:35:12,021 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 11:35:12,021 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 11:35:12,078 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 11:35:12,127 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 11:35:12,178 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 11:35:12,179 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 11:35:12,179 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 11:35:12,179 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 11:35:12,180 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 11:35:12,180 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 11:35:12,180 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 11:35:12,180 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 11:35:13,307 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 11:35:15,583 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 11:35:15,583 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 11:35:15,583 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 11:35:15,584 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 11:35:16,270 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 11:35:16,967 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 11:35:16,967 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 11:35:17,309 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 11:35:17,395 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 11:35:17,454 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 11:35:17,455 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 11:35:17,455 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 11:35:17,455 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 11:35:17,455 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 11:35:17,456 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 11:35:17,456 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 11:35:17,456 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 11:35:18,613 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 11:35:21,006 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 11:35:21,007 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 11:35:21,007 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 11:35:21,007 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 11:35:21,693 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 11:35:22,381 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 11:35:22,382 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 11:35:22,734 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 11:35:22,800 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 11:35:22,861 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 11:35:22,862 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 11:35:22,862 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 11:35:23,498 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-09 11:35:23,498 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 11:35:23,560 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:35:23,714 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.22秒
2025-09-09 11:35:23,821 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:35:23,974 - test_protocol_conformance - INFO - Hello Time: 0秒
2025-09-09 11:35:23,975 - test_protocol_conformance - INFO - 开始捕获BPDU报文
2025-09-09 11:35:24,013 - RSTPTest - INFO - 测试完成: test_bpdu_propagation_and_keepalive (耗时: 12.89秒)
2025-09-09 11:35:24,013 - RSTPTest - INFO - ============================================================

2025-09-09 11:35:24,015 - RSTPTest - INFO - ============================================================
2025-09-09 11:35:24,016 - RSTPTest - INFO - 开始测试: test_disabled_port_exclusion
2025-09-09 11:35:24,016 - RSTPTest - INFO - ============================================================
2025-09-09 11:35:24,016 - test_protocol_conformance - INFO - 开始禁用端口排除测试
2025-09-09 11:35:24,017 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 11:35:24,017 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 11:35:24,017 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 11:35:24,017 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 11:35:24,017 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 11:35:24,017 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 11:35:24,018 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 11:35:24,018 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 11:35:24,310 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 11:35:24,701 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 11:35:24,701 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 11:35:24,701 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 11:35:24,702 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 11:35:24,813 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 11:35:24,928 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 11:35:24,929 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 11:35:24,982 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 11:35:25,030 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 11:35:25,078 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 11:35:25,078 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 11:35:25,078 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 11:35:25,078 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 11:35:25,079 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 11:35:25,079 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 11:35:25,079 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 11:35:25,079 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 11:35:26,148 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 11:35:28,472 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 11:35:28,472 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 11:35:28,472 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 11:35:28,473 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 11:35:29,251 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 11:35:30,009 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 11:35:30,009 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 11:35:30,414 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 11:35:30,499 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 11:35:30,560 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 11:35:30,560 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 11:35:30,560 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 11:35:30,561 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 11:35:30,561 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 11:35:30,561 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 11:35:30,561 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 11:35:30,561 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 11:35:31,753 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 11:35:34,368 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 11:35:34,369 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 11:35:34,369 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 11:35:34,369 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 11:35:35,310 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 11:35:36,194 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 11:35:36,195 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 11:35:36,573 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 11:35:36,649 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 11:35:36,710 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 11:35:36,710 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 11:35:36,710 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 11:35:37,059 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-09 11:35:37,060 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 11:35:37,164 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:35:37,318 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.26秒
2025-09-09 11:35:37,424 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:35:37,578 - test_protocol_conformance - INFO - 所有端口信息: {'eth0': PortInfo(name='eth0', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth2': PortInfo(name='eth2', role=<PortRole.ROOT: 'root'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth3': PortInfo(name='eth3', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')}
2025-09-09 11:35:37,635 - test_protocol_conformance - INFO - RSTP show输出 (code=2): 1
1
No such RSTP object
ovs-appctl: ovs-vswitchd: server returned an error

2025-09-09 11:35:37,692 - test_protocol_conformance - INFO - STP show输出 (code=2): 1
1
no such stp object
ovs-appctl: ovs-vswitchd: server returned an error

2025-09-09 11:35:37,692 - test_protocol_conformance - INFO - 初始活动端口: []
2025-09-09 11:35:37,692 - test_protocol_conformance - INFO - 没有找到活动端口，使用所有端口
2025-09-09 11:35:37,692 - test_protocol_conformance - INFO - 选择端口eth0进行禁用测试
2025-09-09 11:35:37,693 - test_protocol_conformance - INFO - 禁用端口eth0
2025-09-09 11:35:37,693 - FaultInjector_DUT - INFO - 断开链路: eth0
2025-09-09 11:35:37,808 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth0 (code=1)，将在逻辑上标记为已断开
2025-09-09 11:35:37,809 - test_protocol_conformance - INFO - 禁用命令结果: ('', '', 0)
2025-09-09 11:35:37,865 - test_protocol_conformance - INFO - 端口eth0配置: stdout='1
1
{rstp-enable="true", stp-enable="true", stp-path-cost="20000"}
', stderr='', code=0
2025-09-09 11:35:52,928 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:35:53,030 - test_protocol_conformance - INFO - 禁用后所有端口状态: [('eth0', 'disabled'), ('eth2', 'disabled'), ('eth3', 'disabled')]
2025-09-09 11:35:53,030 - test_protocol_conformance - INFO - 端口eth0状态: disabled, 角色: root
2025-09-09 11:35:53,030 - test_protocol_conformance - INFO - 禁用后活动端口: []
2025-09-09 11:35:53,031 - test_protocol_conformance - INFO - 活动端口数量: 0, 初始活动端口数量: 3
2025-09-09 11:35:53,031 - test_protocol_conformance - INFO - 禁用后端口角色分布: {}
2025-09-09 11:35:53,182 - test_protocol_conformance - INFO - 重新启用端口eth0
2025-09-09 11:35:53,182 - FaultInjector_DUT - INFO - 恢复链路: eth0
2025-09-09 11:35:53,296 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth0 (code=1)，将在逻辑上标记为已恢复
2025-09-09 11:36:08,364 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:36:08,466 - test_protocol_conformance - INFO - ✓ 端口eth0已重新启用，状态: forwarding
2025-09-09 11:36:08,503 - RSTPTest - INFO - 测试完成: test_disabled_port_exclusion (耗时: 44.49秒)
2025-09-09 11:36:08,503 - RSTPTest - INFO - ============================================================

2025-09-09 11:36:08,506 - RSTPTest - INFO - ============================================================
2025-09-09 11:36:08,506 - RSTPTest - INFO - 开始测试: test_topology_change_notification
2025-09-09 11:36:08,506 - RSTPTest - INFO - ============================================================
2025-09-09 11:36:08,507 - test_protocol_conformance - INFO - 开始拓扑变更通知测试
2025-09-09 11:36:08,507 - test_protocol_conformance - INFO - === 步骤1: 创建多网桥环形拓扑 ===
2025-09-09 11:36:08,866 - test_protocol_conformance - INFO - 创建网桥 rstp1 (优先级: 32768)
2025-09-09 11:36:09,102 - test_protocol_conformance - INFO - 创建网桥 rstp2 (优先级: 36864)
2025-09-09 11:36:09,338 - test_protocol_conformance - INFO - 创建网桥 rstp3 (优先级: 40960)
2025-09-09 11:36:09,786 - test_protocol_conformance - INFO - ✓ 连接 rstp1 <-> rstp2
2025-09-09 11:36:10,230 - test_protocol_conformance - INFO - ✓ 连接 rstp2 <-> rstp3
2025-09-09 11:36:10,698 - test_protocol_conformance - INFO - ✓ 连接 rstp3 <-> rstp1
2025-09-09 11:36:10,699 - test_protocol_conformance - INFO - 等待RSTP初始收敛...
2025-09-09 11:36:20,700 - test_protocol_conformance - INFO - === 步骤2: 验证初始RSTP状态 ===
2025-09-09 11:36:20,708 - test_protocol_conformance - INFO - 
rstp1 初始RSTP状态:
2025-09-09 11:36:20,709 - test_protocol_conformance - INFO -   ---- rstp1 ----
2025-09-09 11:36:20,709 - test_protocol_conformance - INFO -   Root ID:
2025-09-09 11:36:20,709 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-09 11:36:20,710 - test_protocol_conformance - INFO -     stp-system-id   4a:ff:c4:1f:5a:4e
2025-09-09 11:36:20,710 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-09 11:36:20,710 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-09 11:36:20,710 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-09 11:36:20,711 - test_protocol_conformance - INFO -     This bridge is the root
2025-09-09 11:36:20,711 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-09 11:36:20,711 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-09 11:36:20,712 - test_protocol_conformance - INFO -     stp-system-id   4a:ff:c4:1f:5a:4e
2025-09-09 11:36:20,712 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-09 11:36:20,712 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-09 11:36:20,712 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-09 11:36:20,713 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-09 11:36:20,713 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-09 11:36:20,713 - test_protocol_conformance - INFO -     veth12a    Designated Forwarding 2000     128.1
2025-09-09 11:36:20,713 - test_protocol_conformance - INFO -     veth31b    Designated Forwarding 2000     128.2
2025-09-09 11:36:20,714 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-09 11:36:20,714 - test_protocol_conformance - INFO -   → 有转发端口
2025-09-09 11:36:20,761 - test_protocol_conformance - INFO - 
rstp2 初始RSTP状态:
2025-09-09 11:36:20,761 - test_protocol_conformance - INFO -   ---- rstp2 ----
2025-09-09 11:36:20,761 - test_protocol_conformance - INFO -   Root ID:
2025-09-09 11:36:20,762 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-09 11:36:20,762 - test_protocol_conformance - INFO -     stp-system-id   4a:ff:c4:1f:5a:4e
2025-09-09 11:36:20,762 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-09 11:36:20,762 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-09 11:36:20,763 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-09 11:36:20,763 - test_protocol_conformance - INFO -     root-port       veth12b
2025-09-09 11:36:20,763 - test_protocol_conformance - INFO -     root-path-cost  2000
2025-09-09 11:36:20,763 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-09 11:36:20,763 - test_protocol_conformance - INFO -     stp-priority    36864
2025-09-09 11:36:20,764 - test_protocol_conformance - INFO -     stp-system-id   a2:ac:64:96:03:49
2025-09-09 11:36:20,764 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-09 11:36:20,764 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-09 11:36:20,764 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-09 11:36:20,764 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-09 11:36:20,765 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-09 11:36:20,765 - test_protocol_conformance - INFO -     veth12b    Root       Forwarding 2000     128.1
2025-09-09 11:36:20,765 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-09 11:36:20,765 - test_protocol_conformance - INFO -   → 有转发端口
2025-09-09 11:36:20,813 - test_protocol_conformance - INFO - 
rstp3 初始RSTP状态:
2025-09-09 11:36:20,813 - test_protocol_conformance - INFO -   ---- rstp3 ----
2025-09-09 11:36:20,813 - test_protocol_conformance - INFO -   Root ID:
2025-09-09 11:36:20,814 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-09 11:36:20,814 - test_protocol_conformance - INFO -     stp-system-id   4a:ff:c4:1f:5a:4e
2025-09-09 11:36:20,814 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-09 11:36:20,814 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-09 11:36:20,814 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-09 11:36:20,815 - test_protocol_conformance - INFO -     root-port       veth31a
2025-09-09 11:36:20,815 - test_protocol_conformance - INFO -     root-path-cost  2000
2025-09-09 11:36:20,815 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-09 11:36:20,815 - test_protocol_conformance - INFO -     stp-priority    40960
2025-09-09 11:36:20,815 - test_protocol_conformance - INFO -     stp-system-id   7a:8a:30:c6:0d:4a
2025-09-09 11:36:20,816 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-09 11:36:20,816 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-09 11:36:20,816 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-09 11:36:20,816 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-09 11:36:20,816 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-09 11:36:20,817 - test_protocol_conformance - INFO -     veth23b    Alternate  Discarding 2000     128.1
2025-09-09 11:36:20,817 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-09 11:36:20,817 - test_protocol_conformance - INFO -   → 有转发端口
2025-09-09 11:36:20,817 - test_protocol_conformance - INFO -   → 有阻塞端口（防环路）
2025-09-09 11:36:20,817 - test_protocol_conformance - INFO - === 步骤3: 分析网络拓扑 ===
2025-09-09 11:36:20,818 - test_protocol_conformance - INFO - ✓ rstp1 是根桥
2025-09-09 11:36:20,818 - test_protocol_conformance - INFO - ✓ 找到阻塞端口: veth23b
2025-09-09 11:36:20,818 - test_protocol_conformance - INFO - === 步骤4: 触发拓扑变更 ===
2025-09-09 11:36:20,818 - test_protocol_conformance - INFO - 断开活动端口: veth31a
2025-09-09 11:36:25,890 - test_protocol_conformance - INFO - ✓ rstp1 状态已变化
2025-09-09 11:36:25,988 - test_protocol_conformance - INFO - ✓ rstp3 状态已变化
2025-09-09 11:36:31,035 - test_protocol_conformance - INFO - === 步骤5: 验证拓扑变更 ===
2025-09-09 11:36:31,042 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: veth12a, 数量: 5)
2025-09-09 11:36:36,138 - RSTPAnalyzer_DUT - INFO - 捕获到 2 个BPDU包
2025-09-09 11:36:36,139 - test_protocol_conformance - INFO - 在 veth12a 捕获到 2 个BPDU
2025-09-09 11:36:36,139 - test_protocol_conformance - INFO - === 步骤6: 最终验证 ===
2025-09-09 11:36:36,139 - test_protocol_conformance - INFO - ✓ 测试通过：检测到拓扑变更
2025-09-09 11:36:36,188 - test_protocol_conformance - INFO - 
========== rstp1 最终状态 ==========
2025-09-09 11:36:36,188 - test_protocol_conformance - INFO - ---- rstp1 ----
2025-09-09 11:36:36,188 - test_protocol_conformance - INFO - Root ID:
2025-09-09 11:36:36,188 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-09 11:36:36,189 - test_protocol_conformance - INFO -   stp-system-id   4a:ff:c4:1f:5a:4e
2025-09-09 11:36:36,189 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-09 11:36:36,189 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-09 11:36:36,189 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-09 11:36:36,189 - test_protocol_conformance - INFO -   This bridge is the root
2025-09-09 11:36:36,190 - test_protocol_conformance - INFO - Bridge ID:
2025-09-09 11:36:36,190 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-09 11:36:36,190 - test_protocol_conformance - INFO -   stp-system-id   4a:ff:c4:1f:5a:4e
2025-09-09 11:36:36,190 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-09 11:36:36,190 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-09 11:36:36,191 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-09 11:36:36,191 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-09 11:36:36,191 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-09 11:36:36,191 - test_protocol_conformance - INFO -   veth12a    Designated Forwarding 2000     128.1
2025-09-09 11:36:36,191 - test_protocol_conformance - INFO -   veth31b    Designated Forwarding 2000     128.2
2025-09-09 11:36:36,235 - test_protocol_conformance - INFO - 
========== rstp2 最终状态 ==========
2025-09-09 11:36:36,236 - test_protocol_conformance - INFO - ---- rstp2 ----
2025-09-09 11:36:36,236 - test_protocol_conformance - INFO - Root ID:
2025-09-09 11:36:36,236 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-09 11:36:36,237 - test_protocol_conformance - INFO -   stp-system-id   4a:ff:c4:1f:5a:4e
2025-09-09 11:36:36,237 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-09 11:36:36,237 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-09 11:36:36,237 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-09 11:36:36,237 - test_protocol_conformance - INFO -   root-port       veth12b
2025-09-09 11:36:36,237 - test_protocol_conformance - INFO -   root-path-cost  2000
2025-09-09 11:36:36,238 - test_protocol_conformance - INFO - Bridge ID:
2025-09-09 11:36:36,238 - test_protocol_conformance - INFO -   stp-priority    36864
2025-09-09 11:36:36,238 - test_protocol_conformance - INFO -   stp-system-id   a2:ac:64:96:03:49
2025-09-09 11:36:36,238 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-09 11:36:36,238 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-09 11:36:36,238 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-09 11:36:36,239 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-09 11:36:36,239 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-09 11:36:36,239 - test_protocol_conformance - INFO -   veth12b    Root       Forwarding 2000     128.1
2025-09-09 11:36:36,239 - test_protocol_conformance - INFO -   veth23a    Designated Forwarding 2000     128.2
2025-09-09 11:36:36,283 - test_protocol_conformance - INFO - 
========== rstp3 最终状态 ==========
2025-09-09 11:36:36,284 - test_protocol_conformance - INFO - ---- rstp3 ----
2025-09-09 11:36:36,284 - test_protocol_conformance - INFO - Root ID:
2025-09-09 11:36:36,284 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-09 11:36:36,284 - test_protocol_conformance - INFO -   stp-system-id   4a:ff:c4:1f:5a:4e
2025-09-09 11:36:36,285 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-09 11:36:36,285 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-09 11:36:36,285 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-09 11:36:36,285 - test_protocol_conformance - INFO -   root-port       veth31a
2025-09-09 11:36:36,285 - test_protocol_conformance - INFO -   root-path-cost  2000
2025-09-09 11:36:36,285 - test_protocol_conformance - INFO - Bridge ID:
2025-09-09 11:36:36,286 - test_protocol_conformance - INFO -   stp-priority    40960
2025-09-09 11:36:36,286 - test_protocol_conformance - INFO -   stp-system-id   7a:8a:30:c6:0d:4a
2025-09-09 11:36:36,286 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-09 11:36:36,286 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-09 11:36:36,287 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-09 11:36:36,287 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-09 11:36:36,287 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-09 11:36:36,287 - test_protocol_conformance - INFO -   veth23b    Alternate  Discarding 2000     128.1
2025-09-09 11:36:36,287 - test_protocol_conformance - INFO -   veth31a    Root       Forwarding 2000     128.2
2025-09-09 11:36:36,287 - test_protocol_conformance - INFO - 
=== 诊断信息 ===
2025-09-09 11:36:36,335 - test_protocol_conformance - INFO - 系统日志中的STP/RSTP信息:
2025-09-09 11:36:36,336 - test_protocol_conformance - INFO - [427891.829676] rstp0: entered promiscuous mode
[428065.695280] rstp0: left promiscuous mode
[432947.845468] rstp1: entered promiscuous mode
[432948.082690] rstp2: entered promiscuous mode
[432948.319114] rstp3: entered promiscuous mode

2025-09-09 11:36:36,382 - test_protocol_conformance - INFO - OVS日志中的拓扑变更信息:
2025-09-09 11:36:36,382 - test_protocol_conformance - INFO - 2025-09-09T03:36:36.873Z|00790|rstp_sm(handler909)|DBG|rstp3, port 1: Port_information_sm 8 -> 9
2025-09-09T03:36:36.873Z|00791|rstp_sm(handler909)|DBG|rstp3: move_rstp()
2025-09-09T03:36:36.873Z|00792|rstp_sm(handler909)|DBG|v1: 8.000.4affc41f5a4e, 2000, 9.000.a2ac64960349, 32770, 0
2025-09-09T03:36:36.873Z|00793|rstp_sm(handler909)|DBG|v2: 8.000.4affc41f5a4e, 2000, 9.000.a2ac64960349, 32770, 0
2025-09-09T03:36:36.873Z|00794|rstp_sm(handler909)|DBG|superior_same
2025-09-09T03:36:36.873Z|00795|rstp_sm(handler909)|DBG|rstp3, port 1: Port_information_sm 9 -> 17
2025-09-09T03:36:36.873Z|00796|rstp_sm(handler909)|DBG|rstp3: move_rstp()
2025-09-09T03:36:36.873Z|00797|rstp_sm(handler909)|DBG|rstp3, port 1: Port_information_sm 17 -> 7
2025-09-09T03:36:36.873Z|00798|rstp_sm(handler909)|DBG|rstp3: move_rstp()
2025-09-09T03:36:36.873Z|00799|rstp_sm(handler909)|DBG|rstp3, port 1: Port_information_sm 7 -> 8
2025-09-09T03:36:36.873Z|00800|rstp_sm(handler909)|DBG|rstp3: move_rstp()
2025-09-09T03:36:36.873Z|8287503|rstp_sm|DBG|br0: move_rstp()
2025-09-09T03:36:36.892Z|8287507|bridge|WARN|br0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-09T03:36:36.902Z|8287511|bridge|WARN|br0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP

2025-09-09 11:36:36,383 - test_protocol_conformance - INFO - === 清理测试环境 ===
2025-09-09 11:36:36,967 - test_protocol_conformance - INFO - 拓扑变更通知测试完成
2025-09-09 11:36:36,968 - RSTPTest - INFO - 测试完成: test_topology_change_notification (耗时: 28.46秒)
2025-09-09 11:36:36,968 - RSTPTest - INFO - ============================================================

2025-09-09 11:36:36,968 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 11:36:36,969 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 11:36:36,969 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 11:36:37,103 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 11:36:37,103 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 11:36:37,453 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 11:36:37,453 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 11:36:37,761 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 11:36:37,762 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 11:36:37,762 - RSTPTest - INFO - ============================================================
2025-09-09 11:36:37,762 - RSTPTest - INFO - 开始测试: test_root_bridge_hijack_attack
2025-09-09 11:36:37,763 - RSTPTest - INFO - ============================================================
2025-09-09 11:36:37,764 - test_security - INFO - 开始根网桥劫持攻击测试
2025-09-09 11:36:37,764 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 11:36:37,764 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 11:36:37,764 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 11:36:37,764 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 11:36:37,765 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 11:36:37,765 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 11:36:37,765 - NetworkTopology - INFO - DUT: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 11:36:37,766 - NetworkTopology - INFO - DUT: 检查mstpd支持...
2025-09-09 11:36:37,772 - NetworkTopology - INFO - DUT: mstpd检查结果: code=1
2025-09-09 11:36:37,772 - NetworkTopology - INFO - DUT: 检查iproute2支持...
2025-09-09 11:36:37,817 - NetworkTopology - INFO - DUT: ip命令检查: code=0
2025-09-09 11:36:37,817 - NetworkTopology - INFO - DUT: 使用iproute2配置RSTP
2025-09-09 11:36:37,818 - NetworkTopology - INFO - DUT: 最终选择RSTP方法: iproute2
2025-09-09 11:36:37,818 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 11:36:37,818 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 11:36:38,142 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 11:36:38,533 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 11:36:38,533 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 11:36:38,533 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 11:36:38,533 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 11:36:38,648 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 11:36:38,768 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 11:36:38,768 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 11:36:38,824 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 11:36:38,874 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 11:36:38,922 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 11:36:38,922 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 11:36:38,922 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 11:36:38,922 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 11:36:38,922 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 11:36:38,923 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 11:36:38,923 - NetworkTopology - INFO - TestNode1: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 11:36:38,923 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 11:36:38,940 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 11:36:38,940 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 11:36:39,150 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=1, output=
2025-09-09 11:36:39,150 - NetworkTopology - INFO - TestNode1: 尝试启动mstpd服务...
2025-09-09 11:36:39,564 - NetworkTopology - INFO - TestNode1: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 11:36:41,731 - NetworkTopology - INFO - TestNode1: mstpd启动后状态: code=1
2025-09-09 11:36:41,732 - NetworkTopology - INFO - TestNode1: mstpd启动失败，使用iproute2
2025-09-09 11:36:41,732 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: iproute2
2025-09-09 11:36:41,732 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 11:36:41,733 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 11:36:43,076 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 11:36:45,481 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 11:36:45,482 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 11:36:45,482 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 11:36:45,482 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 11:36:46,206 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 11:36:46,967 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 11:36:46,967 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 11:36:47,458 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 11:36:47,529 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 11:36:47,590 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 11:36:47,590 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 11:36:47,590 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 11:36:47,590 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 11:36:47,591 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 11:36:47,591 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 11:36:47,591 - NetworkTopology - INFO - TestNode2: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 11:36:47,591 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 11:36:47,611 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 11:36:47,611 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 11:36:47,820 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=1, output=
2025-09-09 11:36:47,821 - NetworkTopology - INFO - TestNode2: 尝试启动mstpd服务...
2025-09-09 11:36:48,223 - NetworkTopology - INFO - TestNode2: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 11:36:50,398 - NetworkTopology - INFO - TestNode2: mstpd启动后状态: code=1
2025-09-09 11:36:50,398 - NetworkTopology - INFO - TestNode2: mstpd启动失败，使用iproute2
2025-09-09 11:36:50,399 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: iproute2
2025-09-09 11:36:50,399 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 11:36:50,399 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 11:36:51,634 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 11:36:54,011 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 11:36:54,011 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 11:36:54,012 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 11:36:54,012 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 11:36:54,752 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 11:36:55,467 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 11:36:55,467 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 11:36:55,845 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 11:36:55,910 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 11:36:55,970 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 11:36:55,970 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 11:36:55,970 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 11:37:01,535 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:37:01,693 - test_security - INFO - 初始根网桥: 
2025-09-09 11:37:01,693 - FaultInjector_TestNode1 - WARNING - 注入恶意BPDU到 eth0
2025-09-09 11:37:01,822 - FaultInjector_TestNode1 - WARNING - 恶意BPDU注入已启动 (优先级: 0)
2025-09-09 11:37:16,891 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:37:17,053 - test_security - INFO - 根网桥未被劫持（可能已启用防护）
2025-09-09 11:37:17,053 - test_security - INFO - 根网桥劫持攻击测试完成
2025-09-09 11:37:17,054 - RSTPTest - INFO - 测试完成: test_root_bridge_hijack_attack (耗时: 39.29秒)
2025-09-09 11:37:17,054 - RSTPTest - INFO - ============================================================

2025-09-09 11:37:17,056 - RSTPTest - INFO - ============================================================
2025-09-09 11:37:17,056 - RSTPTest - INFO - 开始测试: test_bpdu_flood_attack
2025-09-09 11:37:17,056 - RSTPTest - INFO - ============================================================
2025-09-09 11:37:17,057 - test_security - INFO - 开始BPDU洪泛攻击测试
2025-09-09 11:37:17,057 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 11:37:17,057 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 11:37:17,057 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 11:37:17,058 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 11:37:17,058 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 11:37:17,058 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 11:37:17,058 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 11:37:17,058 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 11:37:17,383 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 11:37:17,783 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 11:37:17,784 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 11:37:17,784 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 11:37:17,784 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 11:37:17,907 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 11:37:18,027 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 11:37:18,028 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 11:37:18,083 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 11:37:18,132 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 11:37:18,180 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 11:37:18,181 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 11:37:18,181 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 11:37:18,181 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 11:37:18,181 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 11:37:18,181 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 11:37:18,182 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 11:37:18,182 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 11:37:19,483 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 11:37:22,026 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 11:37:22,027 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 11:37:22,027 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 11:37:22,027 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 11:37:22,785 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 11:37:23,514 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 11:37:23,514 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 11:37:23,874 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 11:37:23,939 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 11:37:23,999 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 11:37:24,000 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 11:37:24,000 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 11:37:24,000 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 11:37:24,001 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 11:37:24,001 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 11:37:24,001 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 11:37:24,001 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 11:37:25,128 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 11:37:27,340 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 11:37:27,341 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 11:37:27,341 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 11:37:27,341 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 11:37:28,034 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 11:37:28,760 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 11:37:28,760 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 11:37:29,095 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 11:37:29,162 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 11:37:29,222 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 11:37:29,223 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 11:37:29,223 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 11:37:34,393 - test_security - INFO - 初始CPU使用率: 0.0%
2025-09-09 11:37:44,642 - test_security - INFO - 洪泛时CPU使用率: 0.0%
2025-09-09 11:37:44,796 - test_security - INFO - 网络在BPDU洪泛下保持稳定
2025-09-09 11:37:44,797 - test_security - INFO - BPDU洪泛攻击测试完成
2025-09-09 11:37:44,798 - RSTPTest - INFO - 测试完成: test_bpdu_flood_attack (耗时: 27.74秒)
2025-09-09 11:37:44,798 - RSTPTest - INFO - ============================================================

2025-09-09 11:37:44,799 - RSTPTest - INFO - ============================================================
2025-09-09 11:37:44,799 - RSTPTest - INFO - 开始测试: test_topology_change_attack
2025-09-09 11:37:44,800 - RSTPTest - INFO - ============================================================
2025-09-09 11:37:44,800 - test_security - INFO - 开始拓扑变更攻击测试
2025-09-09 11:37:44,800 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 11:37:44,801 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 11:37:44,801 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 11:37:44,801 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 11:37:44,801 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 11:37:44,801 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 11:37:44,802 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 11:37:44,802 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 11:37:45,107 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 11:37:45,503 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 11:37:45,503 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 11:37:45,503 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 11:37:45,504 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 11:37:45,622 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 11:37:45,734 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 11:37:45,735 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 11:37:45,787 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 11:37:45,836 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 11:37:45,884 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 11:37:45,884 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 11:37:45,885 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 11:37:45,885 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 11:37:45,885 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 11:37:45,885 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 11:37:45,886 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 11:37:45,886 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 11:37:47,006 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 11:37:49,341 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 11:37:49,341 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 11:37:49,342 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 11:37:49,342 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 11:37:50,082 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 11:37:50,799 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 11:37:50,799 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 11:37:51,147 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 11:37:51,221 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 11:37:51,278 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 11:37:51,279 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 11:37:51,279 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 11:37:51,279 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 11:37:51,279 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 11:37:51,279 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 11:37:51,280 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 11:37:51,280 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 11:37:52,339 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 11:37:54,544 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 11:37:54,545 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 11:37:54,545 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 11:37:54,545 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 11:37:55,240 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 11:37:55,952 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 11:37:55,952 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 11:37:56,320 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 11:37:56,388 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 11:37:56,447 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 11:37:56,447 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 11:37:56,447 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 11:38:01,514 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:38:01,676 - test_security - INFO - 触发快速拓扑变更...
2025-09-09 11:38:23,774 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:38:23,928 - test_security - INFO - 检测到0次拓扑变更
2025-09-09 11:38:24,087 - test_security - INFO - 网络在频繁拓扑变更后保持稳定
2025-09-09 11:38:24,088 - test_security - INFO - 拓扑变更攻击测试完成
2025-09-09 11:38:24,089 - RSTPTest - INFO - 测试完成: test_topology_change_attack (耗时: 39.29秒)
2025-09-09 11:38:24,089 - RSTPTest - INFO - ============================================================

2025-09-09 11:38:24,090 - RSTPTest - INFO - ============================================================
2025-09-09 11:38:24,091 - RSTPTest - INFO - 开始测试: test_mac_spoofing
2025-09-09 11:38:24,091 - RSTPTest - INFO - ============================================================
2025-09-09 11:38:24,092 - test_security - INFO - 开始MAC地址欺骗测试
2025-09-09 11:38:24,092 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 11:38:24,092 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 11:38:24,092 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 11:38:24,092 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 11:38:24,093 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 11:38:24,093 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 11:38:24,093 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 11:38:24,093 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 11:38:24,398 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 11:38:24,806 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 11:38:24,806 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 11:38:24,806 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 11:38:24,807 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 11:38:24,918 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 11:38:25,030 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 11:38:25,031 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 11:38:25,087 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 11:38:25,135 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 11:38:25,183 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 11:38:25,183 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 11:38:25,184 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 11:38:25,184 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 11:38:25,184 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 11:38:25,184 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 11:38:25,185 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 11:38:25,185 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 11:38:26,312 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 11:38:28,569 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 11:38:28,569 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 11:38:28,570 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 11:38:28,570 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 11:38:29,294 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 11:38:30,005 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 11:38:30,005 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 11:38:30,384 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 11:38:30,455 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 11:38:30,513 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 11:38:30,513 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 11:38:30,514 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 11:38:30,514 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 11:38:30,514 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 11:38:30,514 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 11:38:30,515 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 11:38:30,515 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 11:38:31,578 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 11:38:33,861 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 11:38:33,861 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 11:38:33,861 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 11:38:33,862 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 11:38:34,645 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 11:38:35,468 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 11:38:35,469 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 11:38:35,843 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 11:38:35,913 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 11:38:35,972 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 11:38:35,972 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 11:38:35,972 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 11:38:40,979 - test_security - INFO - DUT MAC地址: 90:12:10:b5:7d:f7
2025-09-09 11:38:40,980 - test_security - INFO - 尝试MAC地址欺骗...
2025-09-09 11:38:47,179 - test_security - INFO - 网络对MAC欺骗具有抗性
2025-09-09 11:38:48,286 - test_security - INFO - MAC地址欺骗测试完成
2025-09-09 11:38:48,287 - RSTPTest - INFO - 测试完成: test_mac_spoofing (耗时: 24.20秒)
2025-09-09 11:38:48,288 - RSTPTest - INFO - ============================================================

2025-09-09 11:38:48,290 - RSTPTest - INFO - ============================================================
2025-09-09 11:38:48,290 - RSTPTest - INFO - 开始测试: test_port_security
2025-09-09 11:38:48,290 - RSTPTest - INFO - ============================================================
2025-09-09 11:38:48,291 - test_security - INFO - 开始端口安全测试
2025-09-09 11:38:48,296 - test_security - WARNING - 未检测到任何端口安全功能
2025-09-09 11:38:48,297 - RSTPTest - INFO - 测试完成: test_port_security (耗时: 0.01秒)
2025-09-09 11:38:48,298 - RSTPTest - INFO - ============================================================

2025-09-09 11:38:48,298 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 11:38:48,299 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 11:38:48,299 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 11:38:48,993 - __main__ - INFO - ============================================================
2025-09-09 11:38:48,993 - __main__ - INFO - 测试完成，返回码: 1
2025-09-09 11:38:48,993 - __main__ - INFO - ============================================================
