2025-09-11 10:44:47,226 - root - INFO - 日志系统初始化完成，日志文件: logs\rstp_test_20250911_104447.log
2025-09-11 10:44:47,951 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-11 10:44:47,951 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-11 10:44:48,079 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-11 10:44:48,079 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-11 10:44:48,226 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-11 10:44:48,226 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-11 10:44:48,227 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 10:44:48,227 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 10:44:48,227 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-11 10:44:48,227 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-11 10:44:48,283 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-11 10:44:48,284 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-11 10:44:48,479 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-11 10:44:48,479 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-11 10:44:48,480 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-11 10:44:48,480 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-11 10:44:48,480 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-11 10:44:48,699 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-11 10:44:48,700 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-11 10:44:48,886 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-11 10:44:48,886 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-11 10:44:48,886 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-11 10:44:48,887 - RSTPTest - INFO - ============================================================
2025-09-11 10:44:48,887 - RSTPTest - INFO - 开始测试: test_port_state_transitions
2025-09-11 10:44:48,887 - RSTPTest - INFO - ============================================================
2025-09-11 10:44:48,888 - test_additional_rstp - INFO - 开始端口状态转换测试
2025-09-11 10:44:48,888 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 10:44:48,888 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 10:44:48,888 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 10:44:48,888 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 10:44:48,888 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 10:44:48,889 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 10:44:48,889 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 10:44:48,889 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 10:44:48,889 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 10:44:49,376 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 10:44:49,377 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 10:44:49,377 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 10:44:49,532 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 10:44:50,600 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 10:44:50,601 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 10:44:50,601 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 10:44:50,601 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 10:44:50,601 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 10:44:51,076 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 10:44:51,552 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 10:44:51,552 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 10:44:51,744 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 10:44:51,745 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 10:44:51,745 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 10:44:51,745 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 10:44:51,745 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 10:44:51,745 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 10:44:51,745 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 10:44:51,746 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 10:44:52,281 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 10:44:56,901 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 10:44:57,044 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 10:44:57,045 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 10:44:57,045 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 10:44:57,045 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 10:44:57,045 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 10:44:58,363 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 10:44:59,643 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 10:44:59,644 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 10:44:59,742 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 10:45:00,031 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 10:45:00,031 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 10:45:00,031 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 10:45:00,032 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 10:45:00,032 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 10:45:00,032 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 10:45:00,032 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 10:45:00,033 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 10:45:00,561 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 10:45:05,162 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 10:45:15,252 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 10:45:15,253 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 10:45:15,253 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 10:45:15,253 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 10:45:15,253 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 10:46:17,741 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 10:47:11,500 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 10:47:11,501 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 10:47:11,597 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 10:47:21,816 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 10:47:21,816 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 10:47:21,817 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 10:47:21,817 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-11 10:47:21,818 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级12288 -> mstpd优先级3)
2025-09-11 10:47:21,959 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 10:47:21,960 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 32768 (方法: ovs)
2025-09-11 10:47:21,960 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 10:47:22,079 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 10:47:27,223 - test_additional_rstp - INFO - 使用网桥: SE_ETH2
2025-09-11 10:47:27,224 - test_additional_rstp - INFO - === 步骤1: 禁用端口触发状态转换 ===
2025-09-11 10:47:27,641 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 10:47:27,797 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Root       Forwarding 20000    128.2


2025-09-11 10:47:27,798 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 10:47:27,798 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 10:47:27,798 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 10:47:27,799 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 10:47:28,265 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 10:47:28,265 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 10:47:28,266 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 10:47:28,266 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 10:47:28,266 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 10:47:28,267 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 10:47:28,554 - test_additional_rstp - INFO - 选择测试端口: br3
2025-09-11 10:47:28,555 - FaultInjector_DUT - INFO - 断开链路: br3
2025-09-11 10:47:38,714 - FaultInjector_DUT - INFO - 链路已断开: br3
2025-09-11 10:47:38,715 - test_additional_rstp - INFO - 已禁用端口 br3
2025-09-11 10:47:41,715 - test_additional_rstp - INFO - === 步骤2: 重新启用端口并监控状态转换 ===
2025-09-11 10:47:41,716 - FaultInjector_DUT - INFO - 恢复链路: br3
2025-09-11 10:47:41,841 - FaultInjector_DUT - INFO - 链路已恢复: br3
2025-09-11 10:47:41,841 - test_additional_rstp - INFO - 已启用端口 br3，开始监控状态转换
2025-09-11 10:47:43,256 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 10:47:43,407 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 10:47:43,408 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 10:47:43,409 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 10:47:43,409 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/90:12:10:b5:7d:f7
2025-09-11 10:47:43,409 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 8000/90:12:10:b5:7d:f7
2025-09-11 10:47:43,873 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 10:47:43,873 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 10:47:43,874 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 10:47:43,874 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 10:47:43,875 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 10:47:43,875 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 10:47:44,162 - test_additional_rstp - INFO - T+1.1s: br3 -> 状态=disabled, 角色=designated
2025-09-11 10:47:45,583 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 10:47:45,732 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Root       Forwarding 20000    128.2


2025-09-11 10:47:45,733 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 10:47:45,733 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 10:47:45,733 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 10:47:45,733 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 10:47:46,195 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 10:47:46,196 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 10:47:46,197 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 10:47:46,197 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 10:47:46,197 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 10:47:46,197 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 10:47:46,482 - test_additional_rstp - INFO - T+3.4s: br3 -> 状态=forwarding, 角色=root
2025-09-11 10:47:47,895 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 10:47:48,053 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Root       Forwarding 20000    128.2


2025-09-11 10:47:48,054 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 10:47:48,054 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 10:47:48,054 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 10:47:48,055 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 10:47:48,509 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 10:47:48,510 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 10:47:48,511 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 10:47:48,511 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 10:47:48,511 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 10:47:48,511 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 10:47:50,212 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 10:47:50,371 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Root       Forwarding 20000    128.2


2025-09-11 10:47:50,372 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 10:47:50,373 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 10:47:50,373 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 10:47:50,373 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 10:47:50,848 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 10:47:50,849 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 10:47:50,850 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 10:47:50,850 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 10:47:50,850 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 10:47:50,851 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 10:47:52,551 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 10:47:52,699 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Root       Forwarding 20000    128.2


2025-09-11 10:47:52,700 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 10:47:52,700 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 10:47:52,700 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 10:47:52,700 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 10:47:53,165 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 10:47:53,165 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 10:47:53,167 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 10:47:53,167 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 10:47:53,167 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 10:47:53,167 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 10:47:54,876 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 10:47:55,027 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Root       Forwarding 20000    128.2


2025-09-11 10:47:55,028 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 10:47:55,029 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 10:47:55,029 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 10:47:55,029 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 10:47:55,489 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 10:47:55,489 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 10:47:55,491 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 10:47:55,491 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 10:47:55,491 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 10:47:55,491 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 10:47:57,191 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 10:47:57,343 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Root       Forwarding 20000    128.2


2025-09-11 10:47:57,344 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 10:47:57,344 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 10:47:57,345 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 10:47:57,345 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 10:47:57,805 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 10:47:57,805 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 10:47:57,806 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 10:47:57,807 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 10:47:57,807 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 10:47:57,807 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 10:47:59,562 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 10:47:59,768 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Root       Forwarding 20000    128.2


2025-09-11 10:47:59,769 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 10:47:59,770 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 10:47:59,770 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 10:47:59,770 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 10:48:00,241 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 10:48:00,241 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 10:48:00,242 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 10:48:00,242 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 10:48:00,243 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 10:48:00,243 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 10:48:01,947 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 10:48:02,100 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Root       Forwarding 20000    128.2


2025-09-11 10:48:02,101 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 10:48:02,101 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 10:48:02,101 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 10:48:02,102 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 10:48:02,557 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 10:48:02,557 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 10:48:02,558 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 10:48:02,559 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 10:48:02,559 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 10:48:02,559 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 10:48:04,263 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 10:48:04,415 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Root       Forwarding 20000    128.2


2025-09-11 10:48:04,416 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 10:48:04,416 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 10:48:04,416 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 10:48:04,417 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 10:48:04,878 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 10:48:04,879 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 10:48:04,880 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 10:48:04,880 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 10:48:04,880 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 10:48:04,881 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 10:48:06,863 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 10:48:07,016 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Root       Forwarding 20000    128.2


2025-09-11 10:48:07,017 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 10:48:07,017 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 10:48:07,017 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 10:48:07,017 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 10:48:07,477 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 10:48:07,478 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 10:48:07,479 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 10:48:07,479 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 10:48:07,480 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 10:48:07,480 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 10:48:09,179 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 10:48:09,335 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Root       Forwarding 20000    128.2


2025-09-11 10:48:09,336 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 10:48:09,336 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 10:48:09,336 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 10:48:09,337 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 10:48:09,808 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 10:48:09,809 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 10:48:09,810 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 10:48:09,810 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 10:48:09,811 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 10:48:09,811 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 10:48:11,515 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 10:48:11,667 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Root       Forwarding 20000    128.2


2025-09-11 10:48:11,668 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 10:48:11,668 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 10:48:11,669 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 10:48:11,669 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 10:48:12,133 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 10:48:12,133 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 10:48:12,135 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 10:48:12,135 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 10:48:12,135 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 10:48:12,135 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 10:48:13,831 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 10:48:13,983 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Root       Forwarding 20000    128.2


2025-09-11 10:48:13,985 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 10:48:13,985 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 10:48:13,985 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 10:48:13,985 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 10:48:14,444 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 10:48:14,444 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 10:48:14,446 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 10:48:14,446 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 10:48:14,446 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 10:48:14,446 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 10:48:16,143 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 10:48:16,291 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Root       Forwarding 20000    128.2


2025-09-11 10:48:16,292 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 10:48:16,293 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 10:48:16,293 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 10:48:16,293 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 10:48:16,764 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 10:48:16,764 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 10:48:16,766 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 10:48:16,766 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 10:48:16,766 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 10:48:16,766 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 10:48:17,049 - test_additional_rstp - INFO - === 步骤3: 验证状态转换序列 ===
2025-09-11 10:48:17,050 - test_additional_rstp - INFO - 观察到的状态转换序列:
2025-09-11 10:48:17,050 - test_additional_rstp - INFO -   1. T+1.1s: disabled (designated)
2025-09-11 10:48:17,050 - test_additional_rstp - INFO -   2. T+3.4s: forwarding (root)
2025-09-11 10:48:17,051 - test_additional_rstp - INFO - 未观察到Learning状态 - 可能发生了快速转换
2025-09-11 10:48:17,051 - test_additional_rstp - INFO - ✓ 端口最终达到Forwarding状态
2025-09-11 10:48:17,051 - test_additional_rstp - INFO - 这可能是RSTP快速转换的结果（Proposal/Agreement机制）
2025-09-11 10:48:17,051 - test_additional_rstp - INFO - === 步骤4: 验证最终状态 ===
2025-09-11 10:48:17,507 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 10:48:17,664 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Root       Forwarding 20000    128.2


2025-09-11 10:48:17,665 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 10:48:17,665 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 10:48:17,665 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 10:48:17,665 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 10:48:18,141 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 10:48:18,141 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 10:48:18,143 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 10:48:18,143 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 10:48:18,143 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 10:48:18,143 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 10:48:18,438 - test_additional_rstp - INFO - 最终状态: br3 -> 状态=forwarding, 角色=root
2025-09-11 10:48:18,438 - test_additional_rstp - INFO - ✓ 端口成功恢复到Forwarding状态
2025-09-11 10:48:18,439 - test_additional_rstp - INFO - 端口状态转换测试完成
2025-09-11 10:48:18,445 - RSTPTest - INFO - 测试完成: test_port_state_transitions (耗时: 209.56秒)
2025-09-11 10:48:18,445 - RSTPTest - INFO - ============================================================

2025-09-11 10:48:18,448 - RSTPTest - INFO - ============================================================
2025-09-11 10:48:18,448 - RSTPTest - INFO - 开始测试: test_bpdu_propagation_and_keepalive
2025-09-11 10:48:18,449 - RSTPTest - INFO - ============================================================
2025-09-11 10:48:18,449 - test_additional_rstp - INFO - 开始BPDU传播和保活机制测试
2025-09-11 10:48:18,449 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 10:48:18,450 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 10:48:18,450 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 10:48:18,450 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 10:48:18,450 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 10:48:18,451 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 10:48:18,451 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 10:48:18,451 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 10:48:18,451 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 10:48:18,961 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 10:48:18,962 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 10:48:18,962 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 10:48:19,117 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 10:48:20,180 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 10:48:20,180 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 10:48:20,180 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 10:48:20,180 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 10:48:20,181 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 10:48:20,657 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 10:48:21,133 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 10:48:21,133 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 10:48:21,325 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 10:48:21,325 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 10:48:21,325 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 10:48:21,325 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 10:48:21,326 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 10:48:21,326 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 10:48:21,326 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 10:48:21,326 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 10:48:21,860 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 10:48:26,461 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 10:48:26,610 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 10:48:26,610 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 10:48:26,611 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 10:48:26,611 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 10:48:26,611 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 10:48:27,904 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 10:48:29,200 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 10:48:29,200 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 10:48:29,296 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 10:48:29,558 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 10:48:29,559 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 10:48:29,559 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 10:48:29,559 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 10:48:29,559 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 10:48:29,559 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 10:48:29,560 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 10:48:29,560 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 10:48:30,083 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 10:48:34,681 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 10:48:34,818 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 10:48:34,818 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 10:48:34,818 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 10:48:34,819 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 10:48:34,819 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 10:48:36,078 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 10:48:37,382 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 10:48:37,383 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 10:48:37,479 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 10:48:37,765 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 10:48:37,765 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 10:48:37,765 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 10:48:37,766 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-11 10:48:37,766 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级12288 -> mstpd优先级3)
2025-09-11 10:48:37,919 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 10:48:37,920 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 32768 (方法: ovs)
2025-09-11 10:48:37,920 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 10:48:38,045 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 10:48:38,188 - NetworkTopology_TestNode2 - INFO - TestNode2: 设置网桥优先级 br0 = 24576 (方法: mstpd)
2025-09-11 10:48:38,189 - NetworkTopology_TestNode2 - INFO - TestNode2: 执行mstpd设置优先级命令 (标准优先级24576 -> mstpd优先级6)
2025-09-11 10:48:38,336 - NetworkTopology_TestNode2 - INFO - TestNode2: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 10:48:46,337 - test_additional_rstp - INFO - === 步骤1: 验证分布式BPDU生成 ===
2025-09-11 10:48:46,385 - test_additional_rstp - INFO - 检测到网桥接口: ['18:', '26:']
2025-09-11 10:48:46,385 - test_additional_rstp - INFO - 在接口 18: 上捕获BPDU...
2025-09-11 10:48:46,385 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: 18:, 数量: 10)
2025-09-11 10:48:46,510 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-11 10:48:46,510 - test_additional_rstp - WARNING - 在 18: 上未捕获到BPDU
2025-09-11 10:48:46,510 - test_additional_rstp - INFO - 在接口 26: 上捕获BPDU...
2025-09-11 10:48:46,510 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: 26:, 数量: 10)
2025-09-11 10:48:46,618 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-11 10:48:46,618 - test_additional_rstp - WARNING - 在 26: 上未捕获到BPDU
2025-09-11 10:48:46,618 - test_additional_rstp - INFO - 总共捕获 0 个BPDU，来自 0 个不同源
2025-09-11 10:48:46,619 - test_additional_rstp - WARNING - 未检测到BPDU传播
2025-09-11 10:48:46,619 - test_additional_rstp - INFO - BPDU传播和保活机制测试完成
2025-09-11 10:48:46,620 - RSTPTest - INFO - 测试完成: test_bpdu_propagation_and_keepalive (耗时: 28.17秒)
2025-09-11 10:48:46,620 - RSTPTest - INFO - ============================================================

2025-09-11 10:48:46,621 - RSTPTest - INFO - ============================================================
2025-09-11 10:48:46,622 - RSTPTest - INFO - 开始测试: test_disabled_port_exclusion_enhanced
2025-09-11 10:48:46,622 - RSTPTest - INFO - ============================================================
2025-09-11 10:48:46,622 - test_additional_rstp - INFO - 开始增强的禁用端口排除测试
2025-09-11 10:48:46,623 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 10:48:46,623 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 10:48:46,623 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 10:48:46,623 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 10:48:46,623 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 10:48:46,624 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 10:48:46,624 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 10:48:46,624 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 10:48:46,624 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 10:48:47,117 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 10:48:47,117 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 10:48:47,118 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 10:48:47,271 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 10:48:48,335 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 10:48:48,336 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 10:48:48,336 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 10:48:48,336 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 10:48:48,336 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 10:48:48,817 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 10:48:49,299 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 10:48:49,299 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 10:48:49,488 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 10:48:49,489 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 10:48:49,489 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 10:48:49,489 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 10:48:49,489 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 10:48:49,490 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 10:48:49,490 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 10:48:49,490 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 10:48:50,056 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 10:48:54,655 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 10:48:54,797 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 10:48:54,797 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 10:48:54,797 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 10:48:54,797 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 10:48:54,797 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 10:48:56,064 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 10:48:57,345 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 10:48:57,345 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 10:48:57,443 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 10:48:57,743 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 10:48:57,743 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 10:48:57,744 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 10:48:57,744 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 10:48:57,744 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 10:48:57,744 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 10:48:57,744 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 10:48:57,745 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 10:48:58,296 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 10:50:32,354 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 10:50:42,433 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 10:50:42,433 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 10:50:42,433 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 10:50:42,433 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 10:50:42,434 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 10:51:53,269 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 10:53:00,616 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 10:53:00,616 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 10:53:00,716 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 10:53:05,988 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 10:53:05,988 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 10:53:05,988 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 10:53:05,989 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-11 10:53:05,989 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级12288 -> mstpd优先级3)
2025-09-11 10:53:06,149 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 10:53:06,150 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 32768 (方法: ovs)
2025-09-11 10:53:06,150 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 10:53:06,264 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 10:53:11,830 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 10:53:11,982 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 10:53:11,983 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 10:53:11,984 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 10:53:11,984 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 10:53:11,984 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 10:53:12,440 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 10:53:12,440 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 10:53:12,442 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 10:53:12,442 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 10:53:12,443 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 10:53:12,443 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 10:53:12,729 - test_additional_rstp - INFO - 初始活动端口数量: 2
2025-09-11 10:53:12,729 - test_additional_rstp - INFO - === 步骤1: 禁用端口 ===
2025-09-11 10:53:12,729 - test_additional_rstp - INFO - 禁用端口: br3
2025-09-11 10:53:12,730 - FaultInjector_DUT - INFO - 断开链路: br3
2025-09-11 10:53:22,845 - FaultInjector_DUT - INFO - 链路已断开: br3
2025-09-11 10:53:25,846 - test_additional_rstp - INFO - === 步骤2: 验证禁用端口被排除 ===
2025-09-11 10:53:26,258 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 10:53:26,409 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 20000    128.2


2025-09-11 10:53:26,410 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 10:53:26,411 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 10:53:26,411 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 10:53:26,411 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 10:53:26,872 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 10:53:26,872 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 10:53:26,873 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 10:53:26,874 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 10:53:26,874 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 10:53:26,874 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 10:53:27,212 - test_additional_rstp - INFO - 禁用端口状态: disabled
2025-09-11 10:53:27,213 - test_additional_rstp - INFO - ✓ 端口正确标记为DISABLED
2025-09-11 10:53:27,213 - test_additional_rstp - INFO - 禁用后剩余活动端口: 1
2025-09-11 10:53:27,213 - test_additional_rstp - INFO - ✓ 网络在禁用端口后仍然正常收敛
2025-09-11 10:53:27,214 - test_additional_rstp - INFO - === 步骤3: 重新启用端口 ===
2025-09-11 10:53:27,214 - FaultInjector_DUT - INFO - 恢复链路: br3
2025-09-11 10:53:27,380 - FaultInjector_DUT - INFO - 链路已恢复: br3
2025-09-11 10:53:27,380 - test_additional_rstp - INFO - 重新启用端口: br3
2025-09-11 10:53:32,382 - test_additional_rstp - INFO - === 步骤4: 验证端口重新参与RSTP ===
2025-09-11 10:53:33,094 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 10:53:33,250 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 10:53:33,251 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 10:53:33,251 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 10:53:33,252 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 10:53:33,252 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 10:53:33,720 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 10:53:33,721 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 10:53:33,722 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 10:53:33,723 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 10:53:33,723 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 10:53:33,723 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 10:53:34,020 - test_additional_rstp - INFO - 重新启用后端口状态: forwarding
2025-09-11 10:53:34,021 - test_additional_rstp - INFO - 重新启用后端口角色: root
2025-09-11 10:53:34,021 - test_additional_rstp - INFO - ✓ 端口成功重新参与RSTP
2025-09-11 10:53:34,021 - test_additional_rstp - INFO - 最终活动端口数量: 2
2025-09-11 10:53:34,022 - test_additional_rstp - INFO - ✓ 所有端口都重新参与RSTP
2025-09-11 10:53:34,022 - test_additional_rstp - INFO - 增强的禁用端口排除测试完成
2025-09-11 10:53:34,023 - RSTPTest - INFO - 测试完成: test_disabled_port_exclusion_enhanced (耗时: 287.40秒)
2025-09-11 10:53:34,024 - RSTPTest - INFO - ============================================================

2025-09-11 10:53:34,025 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-11 10:53:34,027 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-11 10:53:34,029 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-11 10:53:34,169 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-11 10:53:34,170 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-11 10:53:34,288 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-11 10:53:34,289 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-11 10:53:34,433 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-11 10:53:34,434 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-11 10:53:34,434 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 10:53:34,434 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 10:53:34,435 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-11 10:53:34,435 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-11 10:53:34,492 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-11 10:53:34,492 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-11 10:53:34,673 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-11 10:53:34,673 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-11 10:53:34,674 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-11 10:53:34,674 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-11 10:53:34,674 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-11 10:53:34,728 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-11 10:53:34,728 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-11 10:53:34,914 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-11 10:53:34,914 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-11 10:53:34,914 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-11 10:53:34,915 - RSTPTest - INFO - ============================================================
2025-09-11 10:53:34,915 - RSTPTest - INFO - 开始测试: test_proposal_agreement_handshake
2025-09-11 10:53:34,915 - RSTPTest - INFO - ============================================================
2025-09-11 10:53:34,916 - test_advanced_rstp_mechanisms - INFO - 开始测试RSTP Proposal/Agreement握手机制
2025-09-11 10:53:34,916 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 10:53:34,916 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 10:53:34,916 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 10:53:34,917 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 10:53:34,917 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 10:53:34,917 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 10:53:34,917 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 10:53:34,917 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 10:53:34,918 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 10:53:35,396 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 10:53:35,396 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 10:53:35,396 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 10:53:35,560 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 10:53:36,635 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 10:53:36,635 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 10:53:36,636 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 10:53:36,636 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 10:53:36,636 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 10:53:37,115 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 10:53:37,608 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 10:53:37,608 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 10:53:37,807 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 10:53:37,808 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 10:53:37,808 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 10:53:37,808 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 10:53:37,808 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 10:53:37,809 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 10:53:37,809 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 10:53:37,809 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 10:53:38,357 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 10:53:43,233 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 10:53:43,375 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 10:53:43,375 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 10:53:43,375 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 10:53:43,375 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 10:53:43,376 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 10:53:44,655 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 10:53:45,954 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 10:53:45,954 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 10:53:46,052 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 10:53:46,336 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 10:53:46,337 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 10:53:46,337 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 10:53:46,337 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 10:53:46,337 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 10:53:46,337 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 10:53:46,337 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 10:53:46,338 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 10:53:46,877 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 10:53:51,473 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 10:53:51,607 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 10:53:51,607 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 10:53:51,608 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 10:53:51,608 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 10:53:51,608 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 10:53:52,893 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 10:53:54,151 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 10:53:54,151 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 10:53:54,247 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 10:53:54,541 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 10:53:54,541 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 10:53:54,542 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 10:53:59,542 - test_advanced_rstp_mechanisms - INFO - 开始在eth0上捕获BPDU
2025-09-11 10:53:59,543 - test_advanced_rstp_mechanisms - INFO - 触发拓扑变更...
2025-09-11 10:53:59,543 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 28672 (方法: mstpd)
2025-09-11 10:53:59,543 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级28672 -> mstpd优先级7)
2025-09-11 10:53:59,671 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 10:54:02,673 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 32768 (方法: mstpd)
2025-09-11 10:54:02,673 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级32768 -> mstpd优先级8)
2025-09-11 10:54:02,819 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 10:54:05,820 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: eth0, 数量: 20)
2025-09-11 10:54:05,908 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-11 10:54:05,909 - test_advanced_rstp_mechanisms - INFO - 捕获到0个BPDU数据包
2025-09-11 10:54:05,909 - test_advanced_rstp_mechanisms - WARNING - 未能捕获到完整的BPDU握手序列，可能是环境限制
2025-09-11 10:54:05,909 - test_advanced_rstp_mechanisms - INFO - 改为验证网络收敛状态...
2025-09-11 10:54:06,373 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 10:54:06,530 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    28672
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 10:54:06,531 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 28672
2025-09-11 10:54:06,531 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 10:54:06,531 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 7000/6e:b3:08:fa:01:34
2025-09-11 10:54:06,531 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 10:54:07,000 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 10:54:07,000 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 10:54:07,001 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 10:54:07,001 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 10:54:07,002 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 10:54:07,002 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 10:54:07,300 - test_advanced_rstp_mechanisms - INFO - ✓ 网络收敛正常，存在根端口
2025-09-11 10:54:09,300 - test_advanced_rstp_mechanisms - INFO - RSTP Proposal/Agreement握手机制测试通过
2025-09-11 10:54:09,301 - RSTPTest - INFO - 测试完成: test_proposal_agreement_handshake (耗时: 34.39秒)
2025-09-11 10:54:09,302 - RSTPTest - INFO - ============================================================

2025-09-11 10:54:09,303 - RSTPTest - INFO - ============================================================
2025-09-11 10:54:09,303 - RSTPTest - INFO - 开始测试: test_tcn_topology_change_notification
2025-09-11 10:54:09,304 - RSTPTest - INFO - ============================================================
2025-09-11 10:54:09,304 - test_advanced_rstp_mechanisms - INFO - 开始测试TCN拓扑变更通知机制
2025-09-11 10:54:09,304 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 10:54:09,305 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 10:54:09,305 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 10:54:09,305 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 10:54:09,305 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 10:54:09,305 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 10:54:09,305 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 10:54:09,306 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 10:54:09,306 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 10:54:09,795 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 10:54:09,795 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 10:54:09,795 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 10:54:09,951 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 10:54:11,059 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 10:54:11,059 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 10:54:11,059 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 10:54:11,060 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 10:54:11,060 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 10:54:11,556 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 10:54:12,044 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 10:54:12,044 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 10:54:12,243 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 10:54:12,244 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 10:54:12,244 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 10:54:12,244 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 10:54:12,244 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 10:54:12,244 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 10:54:12,245 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 10:54:12,245 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 10:54:12,813 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 10:54:17,454 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 10:54:17,589 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 10:54:17,590 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 10:54:17,590 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 10:54:17,590 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 10:54:17,590 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 10:54:18,860 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 10:54:20,130 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 10:54:20,130 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 10:54:20,225 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 10:54:20,512 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 10:54:20,513 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 10:54:20,513 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 10:54:20,513 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 10:54:20,513 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 10:54:20,513 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 10:54:20,514 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 10:54:20,514 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 10:54:21,029 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 10:54:25,694 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 10:54:25,827 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 10:54:25,827 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 10:54:25,827 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 10:54:25,828 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 10:54:25,828 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 10:54:27,285 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 10:54:28,569 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 10:54:28,569 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 10:54:28,664 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 10:54:28,962 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 10:54:28,962 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 10:54:28,962 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 10:54:39,385 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 10:54:39,545 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 10:54:39,547 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 10:54:39,547 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 10:54:39,547 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 10:54:39,547 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 10:54:40,026 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 10:54:40,026 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 10:54:40,027 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 10:54:40,028 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 10:54:40,028 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 10:54:40,028 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 10:54:40,315 - test_advanced_rstp_mechanisms - INFO - 初始网桥端口数量: 3
2025-09-11 10:54:40,316 - test_advanced_rstp_mechanisms - INFO - 触发拓扑变更：临时禁用/启用端口
2025-09-11 10:54:40,471 - test_advanced_rstp_mechanisms - INFO - 初始TC计数: 0
2025-09-11 10:54:48,766 - test_advanced_rstp_mechanisms - INFO - 变更后TC计数: 0
2025-09-11 10:54:48,766 - test_advanced_rstp_mechanisms - INFO - 拓扑变更可能未被检测到，这可能是正常的（取决于实现）
2025-09-11 10:54:49,238 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 10:54:49,397 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 10:54:49,398 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 10:54:49,398 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 10:54:49,398 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 10:54:49,398 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 10:54:49,866 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 10:54:49,866 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 10:54:49,867 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 10:54:49,867 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 10:54:49,868 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 10:54:49,868 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 10:54:50,155 - test_advanced_rstp_mechanisms - INFO - 最终网桥端口数量: 3
2025-09-11 10:54:50,318 - test_advanced_rstp_mechanisms - INFO - 当前MAC地址表老化时间: 300秒
2025-09-11 10:54:50,318 - test_advanced_rstp_mechanisms - WARNING - MAC地址表老化时间(300秒)未缩短，可能是实现差异
2025-09-11 10:54:50,319 - test_advanced_rstp_mechanisms - INFO - TCN拓扑变更通知机制测试通过 - 使用安全的端口状态变更方式
2025-09-11 10:54:50,319 - RSTPTest - INFO - 测试完成: test_tcn_topology_change_notification (耗时: 41.02秒)
2025-09-11 10:54:50,319 - RSTPTest - INFO - ============================================================

2025-09-11 10:54:50,321 - RSTPTest - INFO - ============================================================
2025-09-11 10:54:50,321 - RSTPTest - INFO - 开始测试: test_edge_port_behavior
2025-09-11 10:54:50,321 - RSTPTest - INFO - ============================================================
2025-09-11 10:54:50,322 - test_advanced_rstp_mechanisms - INFO - 开始测试边缘端口行为
2025-09-11 10:54:50,322 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 10:54:50,322 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 10:54:50,322 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 10:54:50,323 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 10:54:50,323 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 10:54:50,323 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 10:54:50,323 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 10:54:50,323 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 10:54:50,323 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 10:54:50,862 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 10:54:50,862 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 10:54:50,862 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 10:54:51,020 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 10:54:52,133 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 10:54:52,134 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 10:54:52,134 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 10:54:52,134 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 10:54:52,134 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 10:54:52,618 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 10:54:53,102 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 10:54:53,103 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 10:54:53,303 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 10:54:53,315 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 10:54:53,315 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 10:54:53,316 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 10:54:53,316 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 10:54:53,317 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 10:54:53,318 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 10:54:53,318 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 10:54:53,853 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 10:54:58,467 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 10:54:58,611 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 10:54:58,612 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 10:54:58,612 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 10:54:58,612 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 10:54:58,612 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 10:54:59,870 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 10:55:01,128 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 10:55:01,128 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 10:55:01,226 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 10:55:01,508 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 10:55:01,508 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 10:55:01,508 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 10:55:01,508 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 10:55:01,509 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 10:55:01,509 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 10:55:01,509 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 10:55:01,509 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 10:55:02,028 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 10:55:06,615 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 10:55:06,749 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 10:55:06,749 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 10:55:06,749 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 10:55:06,750 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 10:55:06,750 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 10:55:08,004 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 10:55:09,269 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 10:55:09,269 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 10:55:09,364 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 10:55:09,664 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 10:55:09,665 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 10:55:09,665 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 10:55:16,825 - test_advanced_rstp_mechanisms - INFO - 可用端口: ['enp1s0']
2025-09-11 10:55:16,825 - test_advanced_rstp_mechanisms - INFO - 选择端口enp1s0作为边缘端口测试
2025-09-11 10:55:16,934 - test_advanced_rstp_mechanisms - INFO - 测试边缘端口立即转发特性
2025-09-11 10:55:19,830 - test_advanced_rstp_mechanisms - INFO - 边缘端口状态转换时间: 2.74秒
2025-09-11 10:55:19,830 - test_advanced_rstp_mechanisms - INFO - ✓ 边缘端口转换时间合理
2025-09-11 10:55:19,942 - test_advanced_rstp_mechanisms - INFO - ✓ 边缘端口状态变化未产生TCN
2025-09-11 10:55:19,942 - test_advanced_rstp_mechanisms - INFO - 测试边缘端口收到BPDU后的行为
2025-09-11 10:55:20,102 - test_advanced_rstp_mechanisms - INFO - 边缘端口状态: 1
1
normal
2025-09-11 10:55:20,102 - test_advanced_rstp_mechanisms - INFO - 边缘端口行为测试通过
2025-09-11 10:55:20,103 - RSTPTest - INFO - 测试完成: test_edge_port_behavior (耗时: 29.78秒)
2025-09-11 10:55:20,103 - RSTPTest - INFO - ============================================================

2025-09-11 10:55:20,104 - RSTPTest - INFO - ============================================================
2025-09-11 10:55:20,104 - RSTPTest - INFO - 开始测试: test_shared_vs_point_to_point_links
2025-09-11 10:55:20,104 - RSTPTest - INFO - ============================================================
2025-09-11 10:55:20,105 - test_advanced_rstp_mechanisms - INFO - 开始测试不同链路类型的行为差异
2025-09-11 10:55:20,105 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 10:55:20,105 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 10:55:20,105 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 10:55:20,106 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 10:55:20,106 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 10:55:20,106 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 10:55:20,106 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 10:55:20,106 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 10:55:20,106 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 10:55:20,646 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 10:55:20,646 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 10:55:20,647 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 10:55:20,799 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 10:55:21,917 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 10:55:21,918 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 10:55:21,918 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 10:55:21,918 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 10:55:21,918 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 10:55:22,403 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 10:55:22,894 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 10:55:22,894 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 10:55:23,090 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 10:55:23,090 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 10:55:23,091 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 10:55:23,091 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 10:55:23,091 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 10:55:23,091 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 10:55:23,091 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 10:55:23,091 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 10:55:23,650 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 10:55:28,230 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 10:55:28,376 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 10:55:28,377 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 10:55:28,377 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 10:55:28,377 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 10:55:28,377 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 10:55:29,635 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 10:55:30,943 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 10:55:30,943 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 10:55:31,038 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 10:55:31,314 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 10:55:31,314 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 10:55:31,315 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 10:55:31,315 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 10:55:31,315 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 10:55:31,315 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 10:55:31,315 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 10:55:31,315 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 10:55:31,834 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 10:55:36,474 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 10:55:36,616 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 10:55:36,617 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 10:55:36,617 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 10:55:36,617 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 10:55:36,617 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 10:55:37,868 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 10:55:39,150 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 10:55:39,150 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 10:55:39,246 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 10:55:39,532 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 10:55:39,533 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 10:55:39,533 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 10:55:44,642 - test_advanced_rstp_mechanisms - INFO - 检测到的链路类型: {}
2025-09-11 10:55:44,643 - test_advanced_rstp_mechanisms - INFO - 测试点对点链路收敛性能
2025-09-11 10:55:49,279 - test_advanced_rstp_mechanisms - INFO - 收敛时间: 4.64秒
2025-09-11 10:55:49,280 - test_advanced_rstp_mechanisms - INFO - 验证链路类型识别
2025-09-11 10:55:49,280 - test_advanced_rstp_mechanisms - INFO - 不同链路类型行为差异测试通过
2025-09-11 10:55:49,281 - RSTPTest - INFO - 测试完成: test_shared_vs_point_to_point_links (耗时: 29.18秒)
2025-09-11 10:55:49,281 - RSTPTest - INFO - ============================================================

2025-09-11 10:55:49,281 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-11 10:55:49,282 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-11 10:55:49,282 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-11 10:55:49,415 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-11 10:55:49,416 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-11 10:55:49,534 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-11 10:55:49,535 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-11 10:55:49,679 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-11 10:55:49,680 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-11 10:55:49,680 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 10:55:49,680 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 10:55:49,681 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-11 10:55:49,681 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-11 10:55:49,737 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-11 10:55:49,737 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-11 10:55:49,914 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-11 10:55:49,914 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-11 10:55:49,915 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-11 10:55:49,915 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-11 10:55:49,915 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-11 10:55:49,970 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-11 10:55:49,970 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-11 10:55:50,152 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-11 10:55:50,152 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-11 10:55:50,153 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-11 10:55:50,153 - RSTPTest - INFO - ============================================================
2025-09-11 10:55:50,153 - RSTPTest - INFO - 开始测试: test_backup_port_concept_verification
2025-09-11 10:55:50,153 - RSTPTest - INFO - ============================================================
2025-09-11 10:55:50,154 - test_backup_port_simulation - INFO - 开始备份端口概念验证测试
2025-09-11 10:55:50,154 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 10:55:50,154 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 10:55:50,155 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 10:55:50,155 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 10:55:50,155 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 10:55:50,155 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 10:55:50,155 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 10:55:50,155 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 10:55:50,156 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 10:55:50,649 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 10:55:50,650 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 10:55:50,650 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 10:55:50,804 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 10:55:51,896 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 10:55:51,897 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 10:55:51,897 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 10:55:51,897 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 10:55:51,897 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 10:55:52,374 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 10:55:52,853 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 10:55:52,854 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 10:55:53,045 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 10:55:53,046 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 10:55:53,046 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 10:55:53,046 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 10:55:53,046 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 10:55:53,046 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 10:55:53,047 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 10:55:53,047 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 10:55:53,577 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 10:55:58,280 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 10:55:58,443 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 10:55:58,443 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 10:55:58,443 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 10:55:58,444 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 10:55:58,444 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 10:55:59,736 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 10:56:00,993 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 10:56:00,993 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 10:56:01,091 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 10:56:01,366 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 10:56:01,366 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 10:56:01,367 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 10:56:01,367 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 10:56:01,367 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 10:56:01,367 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 10:56:01,367 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 10:56:01,367 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 10:56:01,897 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 10:56:06,455 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 10:56:06,590 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 10:56:06,590 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 10:56:06,591 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 10:56:06,591 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 10:56:06,591 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 10:56:07,875 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 10:56:09,156 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 10:56:09,156 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 10:56:09,253 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 10:56:09,527 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 10:56:09,527 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 10:56:09,527 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 10:56:19,946 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 10:56:20,099 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 10:56:20,101 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 10:56:20,101 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 10:56:20,101 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 10:56:20,102 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 10:56:20,561 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 10:56:20,561 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 10:56:20,563 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 10:56:20,563 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 10:56:20,563 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 10:56:20,563 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 10:56:20,849 - test_backup_port_simulation - INFO - === 当前端口状态 ===
2025-09-11 10:56:20,850 - test_backup_port_simulation - INFO - 端口 br3: 角色=root, 状态=forwarding
2025-09-11 10:56:20,850 - test_backup_port_simulation - INFO - 端口 br4: 角色=alternate, 状态=discarding
2025-09-11 10:56:20,850 - test_backup_port_simulation - INFO - 端口 SE_ETH2: 角色=unknown, 状态=disabled
2025-09-11 10:56:20,850 - test_backup_port_simulation - INFO - ⚠ 在当前点对点拓扑中未检测到备份端口（符合预期）
2025-09-11 10:56:20,850 - test_backup_port_simulation - INFO - 备份端口通常出现在共享介质网段中，当前测试环境为点对点链路
2025-09-11 10:56:20,851 - test_backup_port_simulation - INFO - 端口角色分布: {<PortRole.ROOT: 'root'>: ['br3'], <PortRole.ALTERNATE: 'alternate'>: ['br4']}
2025-09-11 10:56:20,851 - test_backup_port_simulation - INFO - === RSTP端口角色覆盖分析 ===
2025-09-11 10:56:20,851 - test_backup_port_simulation - INFO - ✓ root端口: ['br3']
2025-09-11 10:56:20,851 - test_backup_port_simulation - INFO - - designated端口: 未检测到
2025-09-11 10:56:20,851 - test_backup_port_simulation - INFO - ✓ alternate端口: ['br4']
2025-09-11 10:56:20,851 - test_backup_port_simulation - INFO - - backup端口: 未检测到（在点对点拓扑中为正常现象）
2025-09-11 10:56:20,851 - test_backup_port_simulation - INFO - 备份端口概念验证测试完成
2025-09-11 10:56:20,852 - RSTPTest - INFO - 测试完成: test_backup_port_concept_verification (耗时: 30.70秒)
2025-09-11 10:56:20,852 - RSTPTest - INFO - ============================================================

2025-09-11 10:56:20,854 - RSTPTest - INFO - ============================================================
2025-09-11 10:56:20,854 - RSTPTest - INFO - 开始测试: test_shared_medium_simulation_attempt
2025-09-11 10:56:20,854 - RSTPTest - INFO - ============================================================
2025-09-11 10:56:20,855 - test_backup_port_simulation - INFO - 开始共享介质模拟尝试
2025-09-11 10:56:20,855 - test_backup_port_simulation - INFO - === 尝试创建共享介质模拟场景 ===
2025-09-11 10:56:20,855 - test_backup_port_simulation - INFO - 创建中心交换机模拟共享介质...
2025-09-11 10:56:20,855 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 10:56:20,855 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 10:56:20,856 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 10:56:20,856 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 10:56:20,856 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 10:56:20,856 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 10:56:20,857 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 10:56:20,857 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 10:56:20,857 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 10:56:21,377 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 10:56:21,378 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 10:56:21,378 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 10:56:21,534 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 10:56:22,612 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 10:56:22,612 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 10:56:22,613 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 10:56:22,613 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 10:56:22,613 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 10:56:23,089 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 10:56:23,561 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 10:56:23,562 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 10:56:23,753 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 10:56:23,754 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 10:56:23,754 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 10:56:23,754 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 10:56:23,754 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 10:56:23,755 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 10:56:23,755 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 10:56:23,755 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 10:56:24,297 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 10:56:28,914 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 10:56:29,049 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 10:56:29,049 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 10:56:29,049 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 10:56:29,050 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 10:56:29,050 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 10:56:30,328 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 10:56:31,630 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 10:56:31,630 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 10:56:31,728 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 10:56:32,007 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 10:56:32,007 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 10:56:32,007 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 10:56:32,007 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 10:56:32,007 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 10:56:32,008 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 10:56:32,008 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 10:56:32,008 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 10:56:32,548 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 10:56:37,152 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 10:56:37,289 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 10:56:37,289 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 10:56:37,289 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 10:56:37,290 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 10:56:37,290 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 10:56:38,576 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 10:56:39,840 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 10:56:39,841 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 10:56:39,936 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 10:56:40,227 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 10:56:40,227 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 10:56:40,228 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 10:56:50,642 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 10:56:50,791 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 10:56:50,792 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 10:56:50,792 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 10:56:50,792 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 10:56:50,792 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 10:56:51,245 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 10:56:51,245 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 10:56:51,246 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 10:56:51,246 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 10:56:51,247 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 10:56:51,247 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 10:56:51,529 - test_backup_port_simulation - INFO - === 分析当前端口配置 ===
2025-09-11 10:56:51,530 - test_backup_port_simulation - INFO - 活动端口 br3: 角色=root, 状态=forwarding
2025-09-11 10:56:51,530 - test_backup_port_simulation - INFO - 活动端口 br4: 角色=alternate, 状态=discarding
2025-09-11 10:56:51,530 - test_backup_port_simulation - INFO - ⚠ 未检测到备份端口
2025-09-11 10:56:51,530 - test_backup_port_simulation - INFO - 这在当前测试环境中是正常的，因为缺乏真正的共享介质
2025-09-11 10:56:51,531 - test_backup_port_simulation - INFO - 共享介质模拟尝试完成
2025-09-11 10:56:51,531 - RSTPTest - INFO - 测试完成: test_shared_medium_simulation_attempt (耗时: 30.68秒)
2025-09-11 10:56:51,532 - RSTPTest - INFO - ============================================================

2025-09-11 10:56:51,533 - RSTPTest - INFO - ============================================================
2025-09-11 10:56:51,533 - RSTPTest - INFO - 开始测试: test_backup_port_documentation_verification
2025-09-11 10:56:51,533 - RSTPTest - INFO - ============================================================
2025-09-11 10:56:51,534 - test_backup_port_simulation - INFO - 开始备份端口文档验证
2025-09-11 10:56:51,534 - test_backup_port_simulation - INFO - ✓ PortRole.BACKUP 存在
2025-09-11 10:56:51,534 - test_backup_port_simulation - INFO - === 备份端口理论特性验证 ===
2025-09-11 10:56:51,534 - test_backup_port_simulation - INFO - purpose: 为共享介质网段提供冗余
2025-09-11 10:56:51,534 - test_backup_port_simulation - INFO - difference_from_alternate: 备份端口是同一交换机上指定端口的备份，而备用端口是不同交换机提供的路径
2025-09-11 10:56:51,534 - test_backup_port_simulation - INFO - state: Discarding
2025-09-11 10:56:51,535 - test_backup_port_simulation - INFO - scenario: 出现在连接到集线器或共享介质的场景中
2025-09-11 10:56:51,535 - test_backup_port_simulation - INFO - fast_transition: 当对应的指定端口失效时，可以快速转换为指定端口
2025-09-11 10:56:51,535 - test_backup_port_simulation - INFO - === 端口角色对比 ===
2025-09-11 10:56:51,535 - test_backup_port_simulation - INFO - root: 连接到根桥的最佳路径
2025-09-11 10:56:51,535 - test_backup_port_simulation - INFO - designated: 为网段提供转发服务
2025-09-11 10:56:51,535 - test_backup_port_simulation - INFO - alternate: 提供到根桥的备用路径（来自其他交换机）
2025-09-11 10:56:51,536 - test_backup_port_simulation - INFO - backup: 同一交换机上指定端口的备份（共享介质场景）
2025-09-11 10:56:51,536 - test_backup_port_simulation - INFO - === 测试覆盖率分析 ===
2025-09-11 10:56:51,536 - test_backup_port_simulation - INFO - 已覆盖: Root Port, Designated Port, Alternate Port, Disabled Port
2025-09-11 10:56:51,536 - test_backup_port_simulation - INFO - 部分覆盖: Backup Port (概念验证)
2025-09-11 10:56:51,536 - test_backup_port_simulation - INFO - 覆盖限制: 测试框架无法创建真正的共享介质拓扑
2025-09-11 10:56:51,536 - test_backup_port_simulation - INFO - 建议: 在实际部署环境中使用集线器或配置交换机共享模式进行完整测试
2025-09-11 10:56:51,537 - test_backup_port_simulation - INFO - 备份端口文档验证完成
2025-09-11 10:56:51,537 - RSTPTest - INFO - 测试完成: test_backup_port_documentation_verification (耗时: 0.00秒)
2025-09-11 10:56:51,537 - RSTPTest - INFO - ============================================================

2025-09-11 10:56:51,538 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-11 10:56:51,538 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-11 10:56:51,539 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-11 10:56:51,674 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-11 10:56:51,675 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-11 10:56:51,806 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-11 10:56:51,807 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-11 10:56:51,942 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-11 10:56:51,943 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-11 10:56:51,943 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 10:56:51,943 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 10:56:51,943 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-11 10:56:51,944 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-11 10:56:52,001 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-11 10:56:52,001 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-11 10:56:52,170 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-11 10:56:52,170 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-11 10:56:52,170 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-11 10:56:52,171 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-11 10:56:52,171 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-11 10:56:52,225 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-11 10:56:52,225 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-11 10:56:52,413 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-11 10:56:52,414 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-11 10:56:52,414 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-11 10:56:52,414 - RSTPTest - INFO - ============================================================
2025-09-11 10:56:52,414 - RSTPTest - INFO - 开始测试: test_direct_link_failure
2025-09-11 10:56:52,414 - RSTPTest - INFO - ============================================================
2025-09-11 10:56:52,415 - test_convergence - INFO - 开始直接链路故障测试
2025-09-11 10:56:52,415 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 10:56:52,416 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 10:56:52,416 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 10:56:52,416 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 10:56:52,416 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 10:56:52,416 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 10:56:52,416 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 10:56:52,417 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 10:56:52,417 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 10:56:52,901 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 10:56:52,901 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 10:56:52,901 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 10:56:53,056 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 10:56:54,135 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 10:56:54,136 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 10:56:54,136 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 10:56:54,136 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 10:56:54,136 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 10:56:54,613 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 10:56:55,088 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 10:56:55,089 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 10:56:55,280 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 10:56:55,281 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 10:56:55,281 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 10:56:55,281 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 10:56:55,281 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 10:56:55,282 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 10:56:55,282 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 10:56:55,282 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 10:56:55,844 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 10:57:00,462 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 10:57:00,609 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 10:57:00,609 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 10:57:00,610 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 10:57:00,610 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 10:57:00,610 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 10:57:01,876 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 10:57:03,196 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 10:57:03,197 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 10:57:03,292 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 10:57:03,568 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 10:57:03,568 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 10:57:03,569 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 10:57:03,569 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 10:57:03,569 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 10:57:03,569 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 10:57:03,569 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 10:57:03,569 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 10:57:04,087 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 10:57:08,733 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 10:57:08,868 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 10:57:08,868 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 10:57:08,868 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 10:57:08,869 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 10:57:08,869 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 10:57:10,137 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 10:57:11,409 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 10:57:11,409 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 10:57:11,505 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 10:57:11,787 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 10:57:11,787 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 10:57:11,787 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 10:57:11,787 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 16384 (方法: mstpd)
2025-09-11 10:57:11,788 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级16384 -> mstpd优先级4)
2025-09-11 10:57:11,930 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 10:57:11,930 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 32768 (方法: ovs)
2025-09-11 10:57:11,931 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 10:57:12,058 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 10:57:12,220 - NetworkTopology_TestNode2 - INFO - TestNode2: 设置网桥优先级 br0 = 28672 (方法: mstpd)
2025-09-11 10:57:12,220 - NetworkTopology_TestNode2 - INFO - TestNode2: 执行mstpd设置优先级命令 (标准优先级28672 -> mstpd优先级7)
2025-09-11 10:57:12,372 - NetworkTopology_TestNode2 - INFO - TestNode2: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 10:57:12,372 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 10:57:12,782 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 10:57:12,934 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    16384
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 10:57:12,935 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 16384
2025-09-11 10:57:12,935 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 10:57:12,935 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 4000/6e:b3:08:fa:01:34
2025-09-11 10:57:12,935 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 10:57:13,396 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 10:57:13,397 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 10:57:13,398 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 10:57:13,398 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 10:57:13,398 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 10:57:13,398 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 10:57:14,456 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 2.08秒
2025-09-11 10:57:14,457 - test_convergence - INFO - 初始收敛时间: 2.08秒
2025-09-11 10:57:14,883 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 10:57:15,039 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    16384
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 10:57:15,041 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 16384
2025-09-11 10:57:15,041 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 10:57:15,041 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 4000/6e:b3:08:fa:01:34
2025-09-11 10:57:15,041 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 10:57:15,504 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 10:57:15,505 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 10:57:15,506 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 10:57:15,506 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 10:57:15,506 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 10:57:15,506 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 10:57:15,793 - test_convergence - INFO - DUT的Root Port: br3
2025-09-11 10:57:15,793 - FaultInjector_DUT - INFO - 断开链路: br3
2025-09-11 10:57:25,949 - FaultInjector_DUT - INFO - 链路已断开: br3
2025-09-11 10:57:25,949 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 10:57:26,401 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 10:57:26,554 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    16384
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 20000    128.2


2025-09-11 10:57:26,555 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 16384
2025-09-11 10:57:26,555 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 10:57:26,555 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 4000/6e:b3:08:fa:01:34
2025-09-11 10:57:26,555 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 10:57:27,021 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 10:57:27,021 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 10:57:27,022 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 10:57:27,022 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 10:57:27,022 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 10:57:27,022 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 10:57:28,053 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 2.10秒
2025-09-11 10:57:28,466 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 10:57:28,622 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    16384
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 20000    128.2


2025-09-11 10:57:28,623 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 16384
2025-09-11 10:57:28,623 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 10:57:28,623 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 4000/6e:b3:08:fa:01:34
2025-09-11 10:57:28,623 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 10:57:29,099 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 10:57:29,100 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 10:57:29,101 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 10:57:29,101 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 10:57:29,101 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 10:57:29,102 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 10:57:29,392 - test_convergence - INFO - 链路故障收敛时间: 2.10秒
2025-09-11 10:57:29,393 - test_convergence - INFO - 新的Root Port: br4
2025-09-11 10:57:29,393 - test_convergence - INFO - 直接链路故障测试通过
2025-09-11 10:57:29,394 - RSTPTest - INFO - 测试完成: test_direct_link_failure (耗时: 36.98秒)
2025-09-11 10:57:29,394 - RSTPTest - INFO - ============================================================

2025-09-11 10:57:29,436 - RSTPTest - INFO - ============================================================
2025-09-11 10:57:29,436 - RSTPTest - INFO - 开始测试: test_multiple_link_failures
2025-09-11 10:57:29,437 - RSTPTest - INFO - ============================================================
2025-09-11 10:57:29,437 - test_convergence - INFO - 开始多重链路故障测试
2025-09-11 10:57:29,438 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 10:57:29,438 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 10:57:29,438 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 10:57:29,438 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 10:57:29,438 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 10:57:29,438 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 10:57:29,439 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 10:57:29,439 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 10:57:29,439 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 10:57:29,916 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 10:57:29,917 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 10:57:29,917 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 10:57:30,071 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 10:57:31,143 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 10:57:31,143 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 10:57:31,143 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 10:57:31,144 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 10:57:31,144 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 10:57:31,625 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 10:57:32,108 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 10:57:32,108 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 10:57:32,304 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 10:57:32,304 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 10:57:32,304 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 10:57:32,305 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 10:57:32,305 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 10:57:32,305 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 10:57:32,305 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 10:57:32,305 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 10:57:32,856 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 10:57:37,910 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 10:57:38,049 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 10:57:38,050 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 10:57:38,050 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 10:57:38,050 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 10:57:38,050 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 10:57:39,309 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 10:57:41,006 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 10:57:41,006 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 10:57:41,104 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 10:57:41,386 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 10:57:41,386 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 10:57:41,387 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 10:57:41,387 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 10:57:41,387 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 10:57:41,387 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 10:57:41,387 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 10:57:41,387 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 10:57:41,932 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 10:57:46,573 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 10:57:56,655 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 10:57:56,655 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 10:57:56,655 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 10:57:56,655 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 10:57:56,656 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 10:59:02,598 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 10:59:59,185 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 10:59:59,186 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 10:59:59,283 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 11:00:04,550 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 11:00:04,551 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 11:00:04,551 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 11:00:04,551 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 11:00:04,968 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:00:05,120 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Root       Forwarding 20000    128.2


2025-09-11 11:00:05,121 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 11:00:05,121 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:00:05,121 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 11:00:05,122 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:00:05,866 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:00:05,867 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:00:05,868 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:00:05,868 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:00:05,868 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:00:05,868 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:00:22,021 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 17.47秒
2025-09-11 11:00:22,022 - test_convergence - INFO - 注入故障: eth0
2025-09-11 11:00:22,022 - FaultInjector_DUT - INFO - 断开链路: eth0
2025-09-11 11:00:22,240 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth0 (code=1)，将在逻辑上标记为已断开
2025-09-11 11:00:22,240 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 11:00:22,696 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:00:22,853 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Root       Forwarding 20000    128.2


2025-09-11 11:00:22,854 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 11:00:22,855 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:00:22,855 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 11:00:22,855 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:00:23,329 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:00:23,329 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:00:23,331 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:00:23,331 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:00:23,331 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:00:23,331 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:00:39,494 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 17.25秒
2025-09-11 11:00:39,494 - test_convergence - INFO - eth0故障收敛时间: 17.25秒
2025-09-11 11:00:41,495 - test_convergence - INFO - 注入故障: eth2
2025-09-11 11:00:41,496 - FaultInjector_DUT - INFO - 断开链路: eth2
2025-09-11 11:00:41,720 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth2 (code=1)，将在逻辑上标记为已断开
2025-09-11 11:00:41,721 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 11:00:42,194 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:00:42,351 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Root       Forwarding 20000    128.2


2025-09-11 11:00:42,352 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 11:00:42,352 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:00:42,353 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 11:00:42,353 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:00:42,813 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:00:42,813 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:00:42,814 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:00:42,815 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:00:42,815 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:00:42,815 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:00:58,950 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 17.23秒
2025-09-11 11:00:58,951 - test_convergence - INFO - eth2故障收敛时间: 17.23秒
2025-09-11 11:01:00,951 - FaultInjector_DUT - INFO - 恢复链路: eth0
2025-09-11 11:01:01,179 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth0 (code=1)，将在逻辑上标记为已恢复
2025-09-11 11:01:01,180 - FaultInjector_DUT - INFO - 恢复链路: eth2
2025-09-11 11:01:01,451 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth2 (code=1)，将在逻辑上标记为已恢复
2025-09-11 11:01:01,452 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 11:01:01,918 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:01:02,079 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Root       Forwarding 20000    128.2


2025-09-11 11:01:02,080 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 11:01:02,080 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:01:02,080 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 11:01:02,081 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:01:02,545 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:01:02,545 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:01:02,546 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:01:02,547 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:01:02,547 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:01:02,547 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:01:18,661 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 17.21秒
2025-09-11 11:01:19,067 - RSTPTest - INFO - 测试完成: test_multiple_link_failures (耗时: 229.63秒)
2025-09-11 11:01:19,068 - RSTPTest - INFO - ============================================================

2025-09-11 11:01:19,070 - RSTPTest - INFO - ============================================================
2025-09-11 11:01:19,070 - RSTPTest - INFO - 开始测试: test_convergence_with_traffic
2025-09-11 11:01:19,070 - RSTPTest - INFO - ============================================================
2025-09-11 11:01:19,071 - test_convergence - INFO - 开始带流量的收敛测试
2025-09-11 11:01:19,071 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 11:01:19,071 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 11:01:19,071 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 11:01:19,071 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 11:01:19,072 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 11:01:19,072 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 11:01:19,072 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 11:01:19,072 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 11:01:19,072 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 11:01:19,564 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 11:01:19,565 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 11:01:19,565 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 11:01:19,723 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 11:01:20,831 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 11:01:20,832 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 11:01:20,832 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 11:01:20,832 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 11:01:20,833 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 11:01:21,316 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 11:01:21,800 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 11:01:21,801 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 11:01:21,992 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 11:01:21,992 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 11:01:21,993 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 11:01:21,993 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 11:01:21,993 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 11:01:21,993 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 11:01:21,994 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 11:01:21,994 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 11:01:22,535 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 11:01:27,124 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:01:27,273 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:01:27,273 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 11:01:27,274 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 11:01:27,274 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:01:27,274 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 11:01:28,505 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 11:01:29,769 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 11:01:29,769 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 11:01:29,866 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 11:01:30,146 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 11:01:30,147 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 11:01:30,147 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 11:01:30,147 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 11:01:30,147 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 11:01:30,148 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 11:01:30,148 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 11:01:30,148 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 11:01:45,811 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 11:01:50,466 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:01:50,611 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:01:50,612 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 11:01:50,612 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 11:01:50,612 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:01:50,612 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 11:01:51,891 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 11:01:53,145 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 11:01:53,145 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 11:01:53,241 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 11:01:53,527 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 11:01:53,527 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 11:01:53,528 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 11:01:59,787 - TrafficGenerator - INFO - 启动iperf3服务器: 192.168.184.131:5201
2025-09-11 11:02:01,957 - TrafficGenerator - ERROR - iperf3服务器启动失败
2025-09-11 11:02:04,788 - TrafficGenerator - INFO - 启动iperf3客户端: -> 192.168.184.131:5201
2025-09-11 11:02:04,788 - TrafficGenerator - INFO - iperf3客户端已启动 (udp, 100M)
2025-09-11 11:02:09,788 - FaultInjector_DUT - INFO - 断开链路: eth0
2025-09-11 11:02:10,007 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth0 (code=1)，将在逻辑上标记为已断开
2025-09-11 11:02:20,008 - test_convergence - INFO - 丢包数: 0
2025-09-11 11:02:20,008 - test_convergence - INFO - 估计中断时间: 0.000秒
2025-09-11 11:02:20,009 - TrafficGenerator - INFO - 停止流量生成
2025-09-11 11:02:22,163 - test_convergence - INFO - 带流量的收敛测试通过
2025-09-11 11:02:22,164 - RSTPTest - INFO - 测试完成: test_convergence_with_traffic (耗时: 63.09秒)
2025-09-11 11:02:22,164 - RSTPTest - INFO - ============================================================

2025-09-11 11:02:22,165 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-11 11:02:22,165 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-11 11:02:22,166 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-11 11:02:22,301 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-11 11:02:22,301 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-11 11:02:22,420 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-11 11:02:22,420 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-11 11:02:22,553 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-11 11:02:22,554 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-11 11:02:22,554 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 11:02:22,554 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 11:02:22,555 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-11 11:02:22,555 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-11 11:02:22,611 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-11 11:02:22,612 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-11 11:02:22,792 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-11 11:02:22,792 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-11 11:02:22,792 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-11 11:02:22,792 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-11 11:02:22,793 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-11 11:02:22,848 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-11 11:02:22,848 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-11 11:02:23,040 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-11 11:02:23,041 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-11 11:02:23,041 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-11 11:02:23,041 - RSTPTest - INFO - ============================================================
2025-09-11 11:02:23,041 - RSTPTest - INFO - 开始测试: test_backup_port_simulation
2025-09-11 11:02:23,041 - RSTPTest - INFO - ============================================================
2025-09-11 11:02:23,042 - test_enhanced_rstp_coverage - INFO - 开始备份端口模拟测试
2025-09-11 11:02:23,042 - test_enhanced_rstp_coverage - INFO - 创建模拟共享网段拓扑
2025-09-11 11:02:23,919 - test_enhanced_rstp_coverage - INFO - ✓ 创建连接: SE_ETH2:dut_port1 <-> shared_segment:shared_port1
2025-09-11 11:02:24,556 - test_enhanced_rstp_coverage - INFO - ✓ 创建连接: SE_ETH2:dut_port2 <-> shared_segment:shared_port2
2025-09-11 11:02:25,719 - test_enhanced_rstp_coverage - INFO - ✓ 创建远程交换机: remote_switch
2025-09-11 11:02:25,720 - test_enhanced_rstp_coverage - INFO - 等待RSTP收敛...
2025-09-11 11:02:41,134 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:02:41,289 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   aa:f2:82:05:7c:46
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       dut_port1
  root-path-cost  2000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  dut_port2  Alternate  Discarding 2000     128.4
  br4        Designated Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2
  dut_port1  Root       Forwarding 2000     128.3


2025-09-11 11:02:41,290 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 11:02:41,291 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: aa:f2:82:05:7c:46
2025-09-11 11:02:41,291 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/aa:f2:82:05:7c:46
2025-09-11 11:02:41,291 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:02:41,751 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:02:41,751 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 3(dut_port1): addr:7e:a0:93:6b:f7:82
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 4(dut_port2): addr:e2:48:b5:df:0f:04
     config:     0
     state:      0
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:02:41,752 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:02:41,752 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:02:41,753 - RSTPAnalyzer_DUT - INFO - 找到端口: dut_port1 (从行:  3(dut_port1): addr:7e:a0:93:6b:f7:82)
2025-09-11 11:02:41,753 - RSTPAnalyzer_DUT - INFO - 找到端口: dut_port2 (从行:  4(dut_port2): addr:e2:48:b5:df:0f:04)
2025-09-11 11:02:41,753 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:02:41,753 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'dut_port1', 'dut_port2', 'SE_ETH2']
2025-09-11 11:02:42,248 - test_enhanced_rstp_coverage - INFO - DUT桥信息: BridgeInfo(bridge_id='1000/aa:f2:82:05:7c:46', root_id='unknown', root_port='br3', root_path_cost=0, protocol_version='rstp', hello_time=2, forward_delay=15, max_age=20, topology_changes=0, ports={'br3': PortInfo(name='br3', role=<PortRole.ROOT: 'root'>, state=<PortState.FORWARDING: 'forwarding'>, path_cost=0, designated_bridge='', designated_port=''), 'br4': PortInfo(name='br4', role=<PortRole.ALTERNATE: 'alternate'>, state=<PortState.DISCARDING: 'discarding'>, path_cost=0, designated_bridge='', designated_port=''), 'dut_port1': PortInfo(name='dut_port1', role=<PortRole.DESIGNATED: 'designated'>, state=<PortState.FORWARDING: 'forwarding'>, path_cost=0, designated_bridge='', designated_port=''), 'dut_port2': PortInfo(name='dut_port2', role=<PortRole.DESIGNATED: 'designated'>, state=<PortState.FORWARDING: 'forwarding'>, path_cost=0, designated_bridge='', designated_port=''), 'SE_ETH2': PortInfo(name='SE_ETH2', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')})
2025-09-11 11:02:42,249 - test_enhanced_rstp_coverage - INFO - 找到 2 个连接到共享网段的端口
2025-09-11 11:02:42,249 - test_enhanced_rstp_coverage - INFO - Designated端口: ['dut_port1', 'dut_port2']
2025-09-11 11:02:42,249 - test_enhanced_rstp_coverage - INFO - Backup端口: []
2025-09-11 11:02:42,250 - test_enhanced_rstp_coverage - WARNING - 未检测到Backup Port或阻塞端口，可能是OVS实现限制
2025-09-11 11:02:42,250 - test_enhanced_rstp_coverage - INFO - 测试备份端口故障切换
2025-09-11 11:02:42,250 - test_enhanced_rstp_coverage - INFO - 清理测试环境
2025-09-11 11:02:43,237 - test_enhanced_rstp_coverage - INFO - ✓ 备份端口模拟测试完成
2025-09-11 11:02:43,238 - RSTPTest - INFO - 测试完成: test_backup_port_simulation (耗时: 20.20秒)
2025-09-11 11:02:43,238 - RSTPTest - INFO - ============================================================

2025-09-11 11:02:43,239 - RSTPTest - INFO - ============================================================
2025-09-11 11:02:43,240 - RSTPTest - INFO - 开始测试: test_comprehensive_port_state_transitions
2025-09-11 11:02:43,240 - RSTPTest - INFO - ============================================================
2025-09-11 11:02:43,240 - test_enhanced_rstp_coverage - INFO - 开始全面端口状态转换测试
2025-09-11 11:02:43,240 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 11:02:43,241 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 11:02:43,241 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 11:02:43,241 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 11:02:43,241 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 11:02:43,241 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 11:02:43,241 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 11:02:43,241 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 11:02:43,242 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 11:02:43,771 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 11:02:43,771 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 11:02:43,771 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 11:02:43,925 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 11:02:45,006 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 11:02:45,007 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 11:02:45,007 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 11:02:45,007 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 11:02:45,007 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 11:02:45,484 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 11:02:45,959 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 11:02:45,959 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 11:02:46,151 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 11:02:46,151 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 11:02:46,151 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 11:02:46,151 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 11:02:46,151 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 11:02:46,152 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 11:02:46,152 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 11:02:46,152 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 11:02:46,670 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 11:02:51,262 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:02:51,407 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:02:51,408 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 11:02:51,408 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 11:02:51,408 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:02:51,408 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 11:02:52,662 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 11:02:53,922 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 11:02:53,922 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 11:02:54,018 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 11:02:54,303 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 11:02:54,304 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 11:02:54,304 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 11:02:54,304 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 11:02:54,305 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 11:02:54,305 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 11:02:54,305 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 11:02:54,305 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 11:02:54,861 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 11:02:59,465 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:02:59,604 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:02:59,604 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 11:02:59,605 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 11:02:59,605 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:02:59,605 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 11:03:00,896 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 11:03:02,180 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 11:03:02,180 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 11:03:02,276 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 11:03:02,545 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 11:03:02,545 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 11:03:02,546 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 11:03:02,546 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 4096 (方法: mstpd)
2025-09-11 11:03:02,546 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级4096 -> mstpd优先级1)
2025-09-11 11:03:02,690 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 11:03:02,690 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 8192 (方法: ovs)
2025-09-11 11:03:02,691 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 11:03:02,801 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 11:03:02,968 - test_enhanced_rstp_coverage - INFO - 等待初始收敛...
2025-09-11 11:03:02,969 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 11:03:03,413 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:03:03,572 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 11:03:03,573 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 11:03:03,573 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:03:03,574 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 11:03:03,574 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:03:04,041 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:03:04,042 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:03:04,043 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:03:04,043 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:03:04,044 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:03:04,044 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:03:04,331 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.36秒
2025-09-11 11:03:04,789 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:03:04,940 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 11:03:04,941 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 11:03:04,942 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:03:04,942 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 11:03:04,942 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:03:05,402 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:03:05,402 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:03:05,403 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:03:05,403 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:03:05,404 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:03:05,404 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:03:05,696 - test_enhanced_rstp_coverage - INFO - === 测试场景1: 端口重启状态转换 ===
2025-09-11 11:03:05,696 - test_enhanced_rstp_coverage - INFO - 使用端口br3进行重启测试
2025-09-11 11:03:06,152 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:03:06,305 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 11:03:06,306 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 11:03:06,306 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:03:06,306 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 11:03:06,306 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:03:06,770 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:03:06,770 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:03:06,771 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:03:06,771 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:03:06,771 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:03:06,772 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:03:19,688 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:03:19,841 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 11:03:19,842 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 11:03:19,842 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:03:19,842 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 11:03:19,842 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:03:20,302 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:03:20,303 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:03:20,304 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:03:20,304 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:03:20,305 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:03:20,305 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:03:20,595 - test_enhanced_rstp_coverage - INFO - 端口br3状态转换: disabled
2025-09-11 11:03:23,232 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:03:23,381 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 11:03:23,382 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 11:03:23,382 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:03:23,382 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 11:03:23,382 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:03:23,841 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:03:23,841 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:03:23,842 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:03:23,843 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:03:23,843 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:03:23,843 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:03:24,131 - test_enhanced_rstp_coverage - INFO - 端口br3状态转换: forwarding
2025-09-11 11:03:26,548 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:03:26,696 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 11:03:26,697 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 11:03:26,698 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:03:26,698 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 11:03:26,698 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:03:27,154 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:03:27,154 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:03:27,155 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:03:27,156 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:03:27,156 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:03:27,156 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:03:29,872 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:03:30,024 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 11:03:30,026 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 11:03:30,026 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:03:30,026 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 11:03:30,026 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:03:30,489 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:03:30,490 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:03:30,491 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:03:30,491 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:03:30,491 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:03:30,491 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:03:33,193 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:03:33,348 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 11:03:33,349 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 11:03:33,350 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:03:33,350 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 11:03:33,350 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:03:33,809 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:03:33,809 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:03:33,810 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:03:33,810 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:03:33,810 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:03:33,810 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:03:36,095 - test_enhanced_rstp_coverage - INFO - 端口重启状态转换: ['forwarding', 'disabled', 'forwarding']
2025-09-11 11:03:36,096 - test_enhanced_rstp_coverage - INFO - 重启场景状态转换验证
2025-09-11 11:03:36,096 - test_enhanced_rstp_coverage - INFO - ✓ 重启: 状态转换序列正常
2025-09-11 11:03:36,096 - test_enhanced_rstp_coverage - INFO - === 测试场景2: 强制Learning状态 ===
2025-09-11 11:03:36,154 - test_enhanced_rstp_coverage - INFO - 原始Forward Delay: 4
2025-09-11 11:03:36,720 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:03:36,872 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 11:03:36,873 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 11:03:36,873 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:03:36,874 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 11:03:36,874 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:03:37,338 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:03:37,339 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:03:37,340 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:03:37,340 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:03:37,340 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:03:37,340 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:03:50,267 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:03:50,420 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 11:03:50,421 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 11:03:50,421 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:03:50,422 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 11:03:50,422 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:03:50,881 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:03:50,882 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:03:50,883 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:03:50,883 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:03:50,883 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:03:50,883 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:03:51,170 - test_enhanced_rstp_coverage - INFO - 端口br3状态转换: disabled
2025-09-11 11:03:53,580 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:03:53,731 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Discarding 20000    128.2


2025-09-11 11:03:53,733 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 11:03:53,733 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:03:53,733 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 11:03:53,734 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:03:54,189 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:03:54,190 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:03:54,191 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:03:54,191 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:03:54,191 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:03:54,192 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:03:54,478 - test_enhanced_rstp_coverage - INFO - 端口br3状态转换: forwarding
2025-09-11 11:03:56,897 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:03:57,060 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 11:03:57,061 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 11:03:57,061 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:03:57,061 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 11:03:57,062 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:03:57,525 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:03:57,525 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:03:57,526 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:03:57,526 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:03:57,527 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:03:57,527 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:04:00,227 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:04:00,380 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 11:04:00,381 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 11:04:00,381 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:04:00,381 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 11:04:00,382 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:04:00,845 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:04:00,845 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:04:00,846 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:04:00,846 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:04:00,847 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:04:00,847 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:04:03,135 - test_enhanced_rstp_coverage - INFO - Learning状态转换: ['forwarding', 'disabled', 'forwarding']
2025-09-11 11:04:03,136 - test_enhanced_rstp_coverage - WARNING - 未观察到Learning状态，可能是快速转换
2025-09-11 11:04:03,204 - test_enhanced_rstp_coverage - INFO - === 测试场景3: 拓扑变更状态转换 ===
2025-09-11 11:04:03,652 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:04:03,800 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 11:04:03,801 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 11:04:03,801 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:04:03,801 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 11:04:03,801 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:04:04,265 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:04:04,265 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:04:04,266 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:04:04,267 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:04:04,267 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:04:04,267 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:04:04,550 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-11 11:04:04,550 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级12288 -> mstpd优先级3)
2025-09-11 11:04:04,689 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 11:04:05,108 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:04:05,264 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 11:04:05,265 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 11:04:05,265 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:04:05,265 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 11:04:05,265 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:04:05,725 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:04:05,726 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:04:05,727 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:04:05,727 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:04:05,727 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:04:05,728 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:04:08,436 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:04:08,596 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 11:04:08,597 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 11:04:08,597 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:04:08,598 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 11:04:08,598 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:04:09,061 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:04:09,061 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:04:09,062 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:04:09,062 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:04:09,063 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:04:09,063 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:04:11,764 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:04:11,919 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 11:04:11,921 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-11 11:04:11,921 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 11:04:11,921 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-11 11:04:11,922 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-11 11:04:12,381 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:04:12,381 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:04:12,382 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:04:12,382 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:04:12,383 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:04:12,383 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:04:15,088 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:04:15,244 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 11:04:15,246 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-11 11:04:15,246 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 11:04:15,246 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-11 11:04:15,246 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-11 11:04:15,709 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:04:15,709 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:04:15,710 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:04:15,710 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:04:15,710 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:04:15,711 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:04:18,415 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:04:18,567 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 11:04:18,568 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-11 11:04:18,568 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 11:04:18,568 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-11 11:04:18,569 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-11 11:04:19,029 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:04:19,029 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:04:19,031 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:04:19,031 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:04:19,031 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:04:19,031 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:04:21,735 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:04:21,887 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 11:04:21,888 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-11 11:04:21,889 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 11:04:21,889 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-11 11:04:21,889 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-11 11:04:22,361 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:04:22,361 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:04:22,362 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:04:22,362 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:04:22,363 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:04:22,363 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:04:24,703 - test_enhanced_rstp_coverage - INFO - 拓扑变更状态转换: ['forwarding']
2025-09-11 11:04:25,119 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:04:25,271 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 11:04:25,272 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-11 11:04:25,273 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 11:04:25,273 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-11 11:04:25,273 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-11 11:04:25,737 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:04:25,738 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:04:25,739 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:04:25,739 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:04:25,739 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:04:25,740 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:04:26,025 - test_enhanced_rstp_coverage - INFO - ✓ 拓扑变更后端口br3最终状态: forwarding
2025-09-11 11:04:26,026 - test_enhanced_rstp_coverage - INFO - ✓ 全面端口状态转换测试完成
2025-09-11 11:04:26,027 - RSTPTest - INFO - 测试完成: test_comprehensive_port_state_transitions (耗时: 102.79秒)
2025-09-11 11:04:26,027 - RSTPTest - INFO - ============================================================

2025-09-11 11:04:26,029 - RSTPTest - INFO - ============================================================
2025-09-11 11:04:26,029 - RSTPTest - INFO - 开始测试: test_detailed_bpdu_analysis
2025-09-11 11:04:26,030 - RSTPTest - INFO - ============================================================
2025-09-11 11:04:26,031 - test_enhanced_rstp_coverage - INFO - 开始详细BPDU分析测试
2025-09-11 11:04:26,031 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 11:04:26,031 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 11:04:26,031 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 11:04:26,031 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 11:04:26,031 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 11:04:26,032 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 11:04:26,032 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 11:04:26,032 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 11:04:26,032 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 11:04:26,549 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 11:04:26,550 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 11:04:26,550 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 11:04:26,704 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 11:04:27,781 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 11:04:27,782 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 11:04:27,782 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 11:04:27,782 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 11:04:27,782 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 11:04:28,414 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 11:04:28,917 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 11:04:28,917 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 11:04:29,109 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 11:04:29,110 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 11:04:29,110 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 11:04:29,110 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 11:04:29,110 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 11:04:29,110 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 11:04:29,111 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 11:04:29,111 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 11:04:29,667 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 11:04:34,257 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:04:34,404 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:04:34,404 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 11:04:34,405 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 11:04:34,405 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:04:34,405 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 11:04:35,682 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 11:04:36,959 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 11:04:36,960 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 11:04:37,055 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 11:04:37,340 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 11:04:37,340 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 11:04:37,340 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 11:04:37,341 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 11:04:37,341 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 11:04:37,341 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 11:04:37,341 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 11:04:37,341 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 11:04:37,881 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 11:04:42,498 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:04:42,650 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:04:42,650 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 11:04:42,650 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 11:04:42,651 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:04:42,651 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 11:04:43,915 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 11:04:45,182 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 11:04:45,183 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 11:04:45,278 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 11:04:45,585 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 11:04:45,586 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 11:04:45,586 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 11:04:45,586 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 4096 (方法: mstpd)
2025-09-11 11:04:45,586 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级4096 -> mstpd优先级1)
2025-09-11 11:04:45,720 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 11:04:45,721 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 8192 (方法: ovs)
2025-09-11 11:04:45,721 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 11:04:45,832 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 11:04:46,003 - NetworkTopology_TestNode2 - INFO - TestNode2: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-11 11:04:46,003 - NetworkTopology_TestNode2 - INFO - TestNode2: 执行mstpd设置优先级命令 (标准优先级12288 -> mstpd优先级3)
2025-09-11 11:04:46,143 - NetworkTopology_TestNode2 - INFO - TestNode2: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 11:04:46,143 - test_enhanced_rstp_coverage - INFO - 等待RSTP收敛...
2025-09-11 11:04:46,144 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 11:04:46,550 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:04:46,702 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 11:04:46,703 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 11:04:46,704 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:04:46,704 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 11:04:46,704 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:04:47,164 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:04:47,164 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:04:47,166 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:04:47,166 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:04:47,166 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:04:47,166 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:04:47,453 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.31秒
2025-09-11 11:04:47,911 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:04:48,062 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 11:04:48,064 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 11:04:48,064 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:04:48,064 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 11:04:48,064 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:04:48,524 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:04:48,524 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:04:48,526 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:04:48,526 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:04:48,526 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:04:48,526 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:04:48,814 - test_enhanced_rstp_coverage - INFO - Hello Time: 2秒
2025-09-11 11:04:48,815 - test_enhanced_rstp_coverage - INFO - === 测试1: 验证分布式BPDU生成 ===
2025-09-11 11:04:48,815 - test_enhanced_rstp_coverage - INFO - 在端口br3上捕获BPDU
2025-09-11 11:04:48,815 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br3, 数量: 10)
2025-09-11 11:05:00,958 - RSTPAnalyzer_DUT - INFO - 捕获到 5 个BPDU包
2025-09-11 11:05:00,958 - test_enhanced_rstp_coverage - INFO - 端口br3捕获到5个BPDU
2025-09-11 11:05:00,958 - test_enhanced_rstp_coverage - INFO - 在端口br4上捕获BPDU
2025-09-11 11:05:00,958 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br4, 数量: 10)
2025-09-11 11:05:13,090 - RSTPAnalyzer_DUT - INFO - 捕获到 8 个BPDU包
2025-09-11 11:05:13,090 - test_enhanced_rstp_coverage - INFO - 端口br4捕获到8个BPDU
2025-09-11 11:05:13,090 - test_enhanced_rstp_coverage - INFO - 总共捕获13个BPDU，来自0个不同源
2025-09-11 11:05:13,091 - test_enhanced_rstp_coverage - WARNING - 只检测到一个BPDU源，可能是拓扑限制
2025-09-11 11:05:13,091 - test_enhanced_rstp_coverage - INFO - === 测试2: 验证BPDU保活机制 ===
2025-09-11 11:05:13,091 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br3, 数量: 10)
2025-09-11 11:05:19,222 - RSTPAnalyzer_DUT - INFO - 捕获到 3 个BPDU包
2025-09-11 11:05:19,222 - test_enhanced_rstp_coverage - INFO - 正常情况下6秒内收到3个BPDU
2025-09-11 11:05:19,222 - test_enhanced_rstp_coverage - INFO - 模拟邻居故障，断开端口br3
2025-09-11 11:05:41,360 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br3, 数量: 10)
2025-09-11 11:05:45,461 - RSTPAnalyzer_DUT - INFO - 捕获到 1 个BPDU包
2025-09-11 11:05:45,461 - test_enhanced_rstp_coverage - INFO - 恢复后4秒内收到1个BPDU
2025-09-11 11:05:45,462 - test_enhanced_rstp_coverage - INFO - ✓ BPDU保活机制验证成功
2025-09-11 11:05:45,462 - test_enhanced_rstp_coverage - INFO - === 测试3: BPDU内容验证 ===
2025-09-11 11:05:45,462 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br3, 数量: 3)
2025-09-11 11:05:51,729 - RSTPAnalyzer_DUT - INFO - 捕获到 3 个BPDU包
2025-09-11 11:05:51,729 - test_enhanced_rstp_coverage - INFO - BPDU 1 分析:
2025-09-11 11:05:51,730 - test_enhanced_rstp_coverage - WARNING -   缺少字段: bridge_id
2025-09-11 11:05:51,730 - test_enhanced_rstp_coverage - WARNING -   缺少字段: root_id
2025-09-11 11:05:51,730 - test_enhanced_rstp_coverage - WARNING -   缺少字段: root_path_cost
2025-09-11 11:05:51,730 - test_enhanced_rstp_coverage - WARNING -   未检测到RSTP特有字段
2025-09-11 11:05:51,731 - test_enhanced_rstp_coverage - INFO - BPDU 2 分析:
2025-09-11 11:05:51,731 - test_enhanced_rstp_coverage - WARNING -   缺少字段: bridge_id
2025-09-11 11:05:51,731 - test_enhanced_rstp_coverage - WARNING -   缺少字段: root_id
2025-09-11 11:05:51,731 - test_enhanced_rstp_coverage - WARNING -   缺少字段: root_path_cost
2025-09-11 11:05:51,731 - test_enhanced_rstp_coverage - WARNING -   未检测到RSTP特有字段
2025-09-11 11:05:51,731 - test_enhanced_rstp_coverage - INFO - BPDU 3 分析:
2025-09-11 11:05:51,731 - test_enhanced_rstp_coverage - WARNING -   缺少字段: bridge_id
2025-09-11 11:05:51,732 - test_enhanced_rstp_coverage - WARNING -   缺少字段: root_id
2025-09-11 11:05:51,732 - test_enhanced_rstp_coverage - WARNING -   缺少字段: root_path_cost
2025-09-11 11:05:51,732 - test_enhanced_rstp_coverage - WARNING -   未检测到RSTP特有字段
2025-09-11 11:05:51,732 - test_enhanced_rstp_coverage - INFO - ✓ 详细BPDU分析测试完成
2025-09-11 11:05:51,733 - RSTPTest - INFO - 测试完成: test_detailed_bpdu_analysis (耗时: 85.70秒)
2025-09-11 11:05:51,733 - RSTPTest - INFO - ============================================================

2025-09-11 11:05:51,735 - RSTPTest - INFO - ============================================================
2025-09-11 11:05:51,735 - RSTPTest - INFO - 开始测试: test_topology_change_comprehensive
2025-09-11 11:05:51,736 - RSTPTest - INFO - ============================================================
2025-09-11 11:05:51,736 - test_enhanced_rstp_coverage - INFO - 开始全面拓扑变更测试
2025-09-11 11:05:51,736 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 11:05:51,737 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 11:05:51,737 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 11:05:51,737 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 11:05:51,737 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 11:05:51,737 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 11:05:51,737 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 11:05:51,738 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 11:05:51,738 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 11:05:52,260 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 11:05:52,260 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 11:05:52,260 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 11:05:52,415 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 11:05:53,506 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 11:05:53,506 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 11:05:53,507 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 11:05:53,507 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 11:05:53,507 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 11:05:53,983 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 11:05:54,459 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 11:05:54,459 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 11:05:54,651 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 11:05:54,652 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 11:05:54,652 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 11:05:54,652 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 11:05:54,653 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 11:05:54,653 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 11:05:54,653 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 11:05:54,653 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 11:05:55,180 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 11:05:59,760 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:05:59,907 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:05:59,907 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 11:05:59,907 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 11:05:59,908 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:05:59,908 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 11:06:01,175 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 11:06:02,439 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 11:06:02,439 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 11:06:02,535 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 11:06:02,823 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 11:06:02,823 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 11:06:02,824 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 11:06:02,824 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 11:06:02,824 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 11:06:02,824 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 11:06:02,825 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 11:06:02,825 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 11:06:33,166 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 11:07:54,016 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:08:02,140 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:08:02,141 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 11:08:02,141 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 11:08:02,141 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:08:02,141 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 11:08:55,889 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 11:09:52,466 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 11:09:52,467 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 11:09:52,561 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 11:09:57,843 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 11:09:57,843 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 11:09:57,844 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 11:09:57,844 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 4096 (方法: mstpd)
2025-09-11 11:09:57,844 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级4096 -> mstpd优先级1)
2025-09-11 11:09:57,984 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 11:09:57,984 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 8192 (方法: ovs)
2025-09-11 11:09:57,984 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 11:09:58,096 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 11:09:58,266 - test_enhanced_rstp_coverage - INFO - 等待初始收敛...
2025-09-11 11:09:58,266 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 11:09:58,702 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:09:58,854 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  40000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Root       Forwarding 20000    128.2


2025-09-11 11:09:58,855 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 11:09:58,855 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:09:58,855 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 11:09:58,856 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:09:59,319 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:09:59,320 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:09:59,321 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:09:59,321 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:09:59,321 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:09:59,322 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:09:59,608 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.34秒
2025-09-11 11:10:00,070 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:10:00,233 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  40000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Root       Forwarding 20000    128.2


2025-09-11 11:10:00,235 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 11:10:00,235 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:10:00,235 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 11:10:00,236 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:10:00,704 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:10:00,704 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:10:00,705 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:10:00,705 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:10:00,706 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:10:00,706 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:10:01,461 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:10:01,619 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  40000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Root       Forwarding 20000    128.2


2025-09-11 11:10:01,620 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 11:10:01,621 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:10:01,621 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 11:10:01,621 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:10:02,083 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:10:02,084 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:10:02,085 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:10:02,085 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:10:02,085 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:10:02,085 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:10:02,376 - RSTPAnalyzer_DUT - INFO - Root ID为unknown，判定为非根桥
2025-09-11 11:10:02,376 - test_enhanced_rstp_coverage - INFO - 初始状态: DUT是根桥=False
2025-09-11 11:10:02,377 - test_enhanced_rstp_coverage - INFO - === 测试场景1: 根桥变更 ===
2025-09-11 11:10:02,377 - test_enhanced_rstp_coverage - INFO - 将DUT设置为根桥
2025-09-11 11:10:02,377 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 1024 (方法: ovs)
2025-09-11 11:10:02,377 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 11:10:02,546 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 11:10:08,110 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:10:08,262 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 11:10:08,263 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 0
2025-09-11 11:10:08,263 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 11:10:08,263 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 0000/90:12:10:b5:7d:f7
2025-09-11 11:10:08,263 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 0000/90:12:10:b5:7d:f7
2025-09-11 11:10:08,723 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:10:08,724 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:10:08,725 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:10:08,725 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:10:08,725 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:10:08,726 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:10:09,458 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:10:09,614 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 11:10:09,615 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 0
2025-09-11 11:10:09,615 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 11:10:09,615 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 0000/90:12:10:b5:7d:f7
2025-09-11 11:10:09,615 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 0000/90:12:10:b5:7d:f7
2025-09-11 11:10:10,083 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:10:10,084 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:10:10,085 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:10:10,085 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:10:10,085 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:10:10,085 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:10:10,372 - RSTPAnalyzer_DUT - INFO - 根桥检查: bridge_id='0000/90:12:10:b5:7d:f7', root_id='0000/90:12:10:b5:7d:f7', is_root=True
2025-09-11 11:10:10,372 - test_enhanced_rstp_coverage - INFO - ✓ 检测到根桥变更
2025-09-11 11:10:10,373 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br3, 数量: 5)
2025-09-11 11:10:19,728 - RSTPAnalyzer_DUT - INFO - 捕获到 5 个BPDU包
2025-09-11 11:10:19,729 - test_enhanced_rstp_coverage - INFO - === 测试场景2: 端口故障恢复 ===
2025-09-11 11:10:20,190 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:10:20,342 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 11:10:20,344 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 0
2025-09-11 11:10:20,344 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 11:10:20,344 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 0000/90:12:10:b5:7d:f7
2025-09-11 11:10:20,344 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 0000/90:12:10:b5:7d:f7
2025-09-11 11:10:20,811 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:10:20,811 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:10:20,812 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:10:20,813 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:10:20,813 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:10:20,813 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:10:21,100 - test_enhanced_rstp_coverage - INFO - 测试端口br3故障恢复
2025-09-11 11:10:41,596 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:10:41,750 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 20000    128.2


2025-09-11 11:10:41,751 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 0
2025-09-11 11:10:41,751 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 11:10:41,751 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 0000/90:12:10:b5:7d:f7
2025-09-11 11:10:41,751 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 0000/90:12:10:b5:7d:f7
2025-09-11 11:10:42,223 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:10:42,223 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:10:42,224 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:10:42,225 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:10:42,225 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:10:42,225 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:10:42,512 - test_enhanced_rstp_coverage - INFO - ✓ 端口故障引起拓扑变更
2025-09-11 11:10:53,046 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:10:53,208 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 11:10:53,209 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 0
2025-09-11 11:10:53,209 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 11:10:53,209 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 0000/90:12:10:b5:7d:f7
2025-09-11 11:10:53,210 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 0000/90:12:10:b5:7d:f7
2025-09-11 11:10:53,679 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:10:53,679 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:10:53,680 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:10:53,680 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:10:53,680 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:10:53,681 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:10:53,979 - test_enhanced_rstp_coverage - INFO - ✓ 端口br3成功恢复，状态: forwarding
2025-09-11 11:10:53,979 - test_enhanced_rstp_coverage - INFO - === 测试场景3: 端口优先级变更 ===
2025-09-11 11:10:54,437 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:10:54,597 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 11:10:54,598 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 0
2025-09-11 11:10:54,598 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 11:10:54,598 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 0000/90:12:10:b5:7d:f7
2025-09-11 11:10:54,599 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 0000/90:12:10:b5:7d:f7
2025-09-11 11:10:55,066 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:10:55,067 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:10:55,068 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:10:55,068 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:10:55,068 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:10:55,068 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:10:55,363 - test_enhanced_rstp_coverage - INFO - 修改端口br3优先级
2025-09-11 11:11:03,893 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:11:04,048 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Designated Forwarding 20000    64.2


2025-09-11 11:11:04,049 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 0
2025-09-11 11:11:04,050 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 11:11:04,050 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 0000/90:12:10:b5:7d:f7
2025-09-11 11:11:04,050 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 0000/90:12:10:b5:7d:f7
2025-09-11 11:11:04,514 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:11:04,515 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:11:04,516 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:11:04,516 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:11:04,516 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:11:04,516 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:11:04,808 - test_enhanced_rstp_coverage - INFO - 端口br3优先级变更后状态: forwarding
2025-09-11 11:11:04,808 - test_enhanced_rstp_coverage - INFO - ✓ 拓扑变更测试通过：成功检测到多种拓扑变更
2025-09-11 11:11:04,808 - test_enhanced_rstp_coverage - INFO - ✓ 全面拓扑变更测试完成
2025-09-11 11:11:04,809 - RSTPTest - INFO - 测试完成: test_topology_change_comprehensive (耗时: 313.07秒)
2025-09-11 11:11:04,809 - RSTPTest - INFO - ============================================================

2025-09-11 11:11:04,810 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-11 11:11:04,810 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-11 11:11:04,811 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-11 11:11:04,948 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-11 11:11:04,948 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-11 11:11:05,083 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-11 11:11:05,083 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-11 11:11:05,230 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-11 11:11:05,231 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-11 11:11:05,231 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 11:11:05,231 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 11:11:05,232 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-11 11:11:05,232 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-11 11:11:05,287 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-11 11:11:05,288 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-11 11:11:05,486 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-11 11:11:05,487 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-11 11:11:05,487 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-11 11:11:05,487 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-11 11:11:05,487 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-11 11:11:05,541 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-11 11:11:05,542 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-11 11:11:05,719 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-11 11:11:05,720 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-11 11:11:05,720 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-11 11:11:05,720 - RSTPTest - INFO - ============================================================
2025-09-11 11:11:05,720 - RSTPTest - INFO - 开始测试: test_rstp_reconvergence_no_switchover
2025-09-11 11:11:05,721 - RSTPTest - INFO - ============================================================
2025-09-11 11:11:05,721 - test_high_availability - INFO - 开始RSTP重构误判测试
2025-09-11 11:11:05,722 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 11:11:05,722 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 11:11:05,722 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 11:11:05,723 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 11:11:05,723 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 11:11:05,723 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 11:11:05,723 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 11:11:05,723 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 11:11:05,723 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 11:11:06,219 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 11:11:06,219 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 11:11:06,220 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 11:11:06,381 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 11:11:07,474 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 11:11:07,475 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 11:11:07,475 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 11:11:07,476 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 11:11:07,476 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 11:11:07,950 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 11:11:08,443 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 11:11:08,443 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 11:11:08,646 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 11:11:08,647 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 11:11:08,647 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 11:11:08,647 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 11:11:08,648 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 11:11:08,648 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 11:11:08,648 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 11:11:08,648 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 11:11:09,172 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 11:11:13,805 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:11:13,957 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:11:13,957 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 11:11:13,958 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 11:11:13,958 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:11:13,958 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 11:11:15,217 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 11:11:16,495 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 11:11:16,496 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 11:11:16,592 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 11:11:16,875 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 11:11:16,876 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 11:11:16,876 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 11:11:16,876 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 11:11:16,876 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 11:11:16,876 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 11:11:16,877 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 11:11:16,877 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 11:11:17,396 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 11:11:21,996 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:11:22,143 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:11:22,143 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 11:11:22,144 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 11:11:22,144 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:11:22,144 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 11:11:23,377 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 11:11:24,640 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 11:11:24,640 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 11:11:24,736 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 11:11:25,017 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 11:11:25,017 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 11:11:25,018 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 11:11:30,069 - test_high_availability - INFO - 初始HA状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-11 11:11:30,069 - test_high_availability - INFO - 在远端触发RSTP重构...
2025-09-11 11:11:30,070 - FaultInjector_TestNode2 - INFO - 断开链路: eth0
2025-09-11 11:11:30,268 - FaultInjector_TestNode2 - INFO - 链路已断开: eth0
2025-09-11 11:11:40,321 - test_high_availability - INFO - RSTP重构后HA状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-11 11:11:40,321 - FaultInjector_TestNode2 - INFO - 恢复链路: eth0
2025-09-11 11:11:40,468 - FaultInjector_TestNode2 - INFO - 链路已恢复: eth0
2025-09-11 11:11:40,468 - test_high_availability - INFO - RSTP重构误判测试完成
2025-09-11 11:11:40,469 - RSTPTest - INFO - 测试完成: test_rstp_reconvergence_no_switchover (耗时: 34.75秒)
2025-09-11 11:11:40,469 - RSTPTest - INFO - ============================================================

2025-09-11 11:11:40,471 - RSTPTest - INFO - ============================================================
2025-09-11 11:11:40,471 - RSTPTest - INFO - 开始测试: test_split_brain_scenario
2025-09-11 11:11:40,471 - RSTPTest - INFO - ============================================================
2025-09-11 11:11:40,472 - test_high_availability - INFO - 开始裂脑场景测试
2025-09-11 11:11:40,521 - test_high_availability - INFO - 初始状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-11 11:11:40,521 - test_high_availability - INFO - 断开同步链路: eth3
2025-09-11 11:11:40,521 - FaultInjector_DUT - INFO - 断开链路: eth3
2025-09-11 11:11:40,777 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth3 (code=1)，将在逻辑上标记为已断开
2025-09-11 11:11:50,778 - test_high_availability - WARNING - 裂脑测试需要访问两个控制器
2025-09-11 11:11:50,778 - FaultInjector_DUT - INFO - 恢复链路: eth3
2025-09-11 11:11:50,993 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth3 (code=1)，将在逻辑上标记为已恢复
2025-09-11 11:11:50,993 - test_high_availability - INFO - 裂脑场景测试完成
2025-09-11 11:11:50,994 - RSTPTest - INFO - 测试完成: test_split_brain_scenario (耗时: 10.52秒)
2025-09-11 11:11:50,994 - RSTPTest - INFO - ============================================================

2025-09-11 11:11:50,998 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-11 11:11:50,998 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-11 11:11:50,999 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-11 11:11:51,132 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-11 11:11:51,133 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-11 11:11:51,133 - RSTPTest - INFO - ============================================================
2025-09-11 11:11:51,134 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[12288]
2025-09-11 11:11:51,134 - RSTPTest - INFO - ============================================================
2025-09-11 11:11:51,135 - test_parameters - INFO - 测试网桥优先级: 12288
2025-09-11 11:11:52,626 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 11:11:52,626 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 11:11:52,627 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 12288 (方法: ovs)
2025-09-11 11:11:52,627 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 11:11:52,755 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 11:11:52,905 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-11 11:11:55,023 - test_parameters - INFO - 从OVS配置读取到优先级: 12288
2025-09-11 11:11:55,023 - test_parameters - INFO - 优先级12288设置成功
2025-09-11 11:11:55,024 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[12288] (耗时: 3.89秒)
2025-09-11 11:11:55,025 - RSTPTest - INFO - ============================================================

2025-09-11 11:11:55,026 - RSTPTest - INFO - ============================================================
2025-09-11 11:11:55,026 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[16384]
2025-09-11 11:11:55,026 - RSTPTest - INFO - ============================================================
2025-09-11 11:11:55,027 - test_parameters - INFO - 测试网桥优先级: 16384
2025-09-11 11:11:56,498 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 11:11:56,498 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 11:11:56,498 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 16384 (方法: ovs)
2025-09-11 11:11:56,499 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 11:11:56,627 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 11:11:56,772 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-11 11:11:58,877 - test_parameters - INFO - 从OVS配置读取到优先级: 16384
2025-09-11 11:11:58,877 - test_parameters - INFO - 优先级16384设置成功
2025-09-11 11:11:58,878 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[16384] (耗时: 3.85秒)
2025-09-11 11:11:58,878 - RSTPTest - INFO - ============================================================

2025-09-11 11:11:58,879 - RSTPTest - INFO - ============================================================
2025-09-11 11:11:58,880 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[32768]
2025-09-11 11:11:58,880 - RSTPTest - INFO - ============================================================
2025-09-11 11:11:58,880 - test_parameters - INFO - 测试网桥优先级: 32768
2025-09-11 11:12:00,350 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 11:12:00,350 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 11:12:00,351 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 32768 (方法: ovs)
2025-09-11 11:12:00,351 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 11:12:00,477 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 11:12:00,627 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-11 11:12:02,739 - test_parameters - INFO - 从OVS配置读取到优先级: 32768
2025-09-11 11:12:02,740 - test_parameters - INFO - 优先级32768设置成功
2025-09-11 11:12:02,741 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[32768] (耗时: 3.86秒)
2025-09-11 11:12:02,741 - RSTPTest - INFO - ============================================================

2025-09-11 11:12:02,742 - RSTPTest - INFO - ============================================================
2025-09-11 11:12:02,742 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[61440]
2025-09-11 11:12:02,743 - RSTPTest - INFO - ============================================================
2025-09-11 11:12:02,743 - test_parameters - INFO - 测试网桥优先级: 61440
2025-09-11 11:12:04,232 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 11:12:04,232 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 11:12:04,232 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 61440 (方法: ovs)
2025-09-11 11:12:04,233 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 11:12:04,361 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 11:12:04,511 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-11 11:12:06,622 - test_parameters - INFO - 从OVS配置读取到优先级: 61440
2025-09-11 11:12:06,622 - test_parameters - INFO - 优先级61440设置成功
2025-09-11 11:12:06,624 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[61440] (耗时: 3.88秒)
2025-09-11 11:12:06,624 - RSTPTest - INFO - ============================================================

2025-09-11 11:12:06,625 - RSTPTest - INFO - ============================================================
2025-09-11 11:12:06,626 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[4097]
2025-09-11 11:12:06,626 - RSTPTest - INFO - ============================================================
2025-09-11 11:12:06,626 - test_parameters - INFO - 测试无效优先级: 4097
2025-09-11 11:12:07,297 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 11:12:07,298 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 11:12:07,298 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 4097 (方法: ovs)
2025-09-11 11:12:07,298 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 11:12:07,462 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 11:12:08,713 - test_parameters - INFO - DUT处理无效优先级 4097 -> 4097
2025-09-11 11:12:08,713 - test_parameters - ERROR - DUT接受了非标准优先级值 4097，不符合802.1D标准（应为4096的倍数）
2025-09-11 11:12:08,736 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[4097] (耗时: 2.11秒)
2025-09-11 11:12:08,736 - RSTPTest - INFO - ============================================================

2025-09-11 11:12:08,739 - RSTPTest - INFO - ============================================================
2025-09-11 11:12:08,739 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[12289]
2025-09-11 11:12:08,739 - RSTPTest - INFO - ============================================================
2025-09-11 11:12:08,740 - test_parameters - INFO - 测试无效优先级: 12289
2025-09-11 11:12:09,342 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 11:12:09,342 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 11:12:09,342 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 12289 (方法: ovs)
2025-09-11 11:12:09,342 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 11:12:09,509 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 11:12:10,761 - test_parameters - INFO - DUT处理无效优先级 12289 -> 12289
2025-09-11 11:12:10,762 - test_parameters - ERROR - DUT接受了非标准优先级值 12289，不符合802.1D标准（应为4096的倍数）
2025-09-11 11:12:10,786 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[12289] (耗时: 2.05秒)
2025-09-11 11:12:10,787 - RSTPTest - INFO - ============================================================

2025-09-11 11:12:10,788 - RSTPTest - INFO - ============================================================
2025-09-11 11:12:10,789 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[70000]
2025-09-11 11:12:10,789 - RSTPTest - INFO - ============================================================
2025-09-11 11:12:10,789 - test_parameters - INFO - 测试无效优先级: 70000
2025-09-11 11:12:11,345 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 11:12:11,346 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 11:12:11,346 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 70000 (方法: ovs)
2025-09-11 11:12:11,346 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 11:12:11,510 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 11:12:12,769 - test_parameters - INFO - DUT处理无效优先级 70000 -> 70000
2025-09-11 11:12:12,769 - test_parameters - ERROR - DUT接受了非标准优先级值 70000，不符合802.1D标准（应为4096的倍数）
2025-09-11 11:12:12,789 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[70000] (耗时: 2.00秒)
2025-09-11 11:12:12,790 - RSTPTest - INFO - ============================================================

2025-09-11 11:12:12,792 - RSTPTest - INFO - ============================================================
2025-09-11 11:12:12,792 - RSTPTest - INFO - 开始测试: test_hello_time
2025-09-11 11:12:12,792 - RSTPTest - INFO - ============================================================
2025-09-11 11:12:12,793 - test_parameters - INFO - 测试Hello Time参数
2025-09-11 11:12:14,421 - test_parameters - INFO - 设置Hello Time: 1秒
2025-09-11 11:12:14,422 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 11:12:14,422 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 11:12:16,652 - test_parameters - INFO - 设置Hello Time: 2秒
2025-09-11 11:12:16,653 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 11:12:16,653 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 11:12:18,937 - test_parameters - INFO - 设置Hello Time: 5秒
2025-09-11 11:12:18,937 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 11:12:18,938 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 11:12:21,209 - test_parameters - INFO - Hello Time测试通过
2025-09-11 11:12:21,209 - RSTPTest - INFO - 测试完成: test_hello_time (耗时: 8.42秒)
2025-09-11 11:12:21,210 - RSTPTest - INFO - ============================================================

2025-09-11 11:12:21,211 - RSTPTest - INFO - ============================================================
2025-09-11 11:12:21,211 - RSTPTest - INFO - 开始测试: test_forward_delay
2025-09-11 11:12:21,211 - RSTPTest - INFO - ============================================================
2025-09-11 11:12:21,212 - test_parameters - INFO - 测试Forward Delay参数
2025-09-11 11:12:22,814 - test_parameters - INFO - 设置Forward Delay: 4秒
2025-09-11 11:12:22,815 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 11:12:22,815 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 11:12:25,050 - test_parameters - INFO - 设置Forward Delay: 10秒
2025-09-11 11:12:25,051 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 11:12:25,051 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 11:12:27,325 - test_parameters - INFO - 设置Forward Delay: 15秒
2025-09-11 11:12:27,326 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 11:12:27,326 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 11:12:29,598 - test_parameters - INFO - Forward Delay测试通过
2025-09-11 11:12:29,598 - RSTPTest - INFO - 测试完成: test_forward_delay (耗时: 8.39秒)
2025-09-11 11:12:29,599 - RSTPTest - INFO - ============================================================

2025-09-11 11:12:29,600 - RSTPTest - INFO - ============================================================
2025-09-11 11:12:29,600 - RSTPTest - INFO - 开始测试: test_max_age
2025-09-11 11:12:29,600 - RSTPTest - INFO - ============================================================
2025-09-11 11:12:29,601 - test_parameters - INFO - 测试Max Age参数
2025-09-11 11:12:31,208 - test_parameters - INFO - 设置Max Age: 6秒
2025-09-11 11:12:31,208 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 11:12:31,209 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 11:12:33,440 - test_parameters - INFO - 设置Max Age: 10秒
2025-09-11 11:12:33,441 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 11:12:33,441 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 11:12:35,717 - test_parameters - INFO - 设置Max Age: 20秒
2025-09-11 11:12:35,718 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 11:12:35,718 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 11:12:37,988 - test_parameters - INFO - Max Age测试通过
2025-09-11 11:12:37,989 - RSTPTest - INFO - 测试完成: test_max_age (耗时: 8.39秒)
2025-09-11 11:12:37,990 - RSTPTest - INFO - ============================================================

2025-09-11 11:12:38,111 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-11 11:12:38,112 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-11 11:12:38,247 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-11 11:12:38,248 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-11 11:12:38,248 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 11:12:38,248 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 11:12:38,249 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-11 11:12:38,249 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-11 11:12:38,308 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-11 11:12:38,308 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-11 11:12:38,495 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-11 11:12:38,496 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-11 11:12:38,496 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-11 11:12:38,496 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-11 11:12:38,496 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-11 11:12:38,679 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-11 11:12:38,680 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-11 11:12:48,804 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-11 11:12:48,804 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-11 11:12:48,804 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-11 11:12:48,805 - RSTPTest - INFO - ============================================================
2025-09-11 11:12:48,805 - RSTPTest - INFO - 开始测试: test_port_cost
2025-09-11 11:12:48,805 - RSTPTest - INFO - ============================================================
2025-09-11 11:12:48,806 - test_parameters - INFO - 测试端口路径成本
2025-09-11 11:12:48,806 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 11:12:48,807 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 11:12:48,807 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 11:12:48,807 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 11:12:48,807 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 11:12:48,807 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 11:12:48,808 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 11:12:48,808 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 11:12:48,808 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 11:12:49,302 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 11:12:49,302 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 11:12:49,303 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 11:12:49,433 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 11:12:50,460 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 11:12:50,461 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 11:12:50,461 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 11:12:50,461 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 11:12:50,461 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 11:12:50,929 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 11:12:51,373 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 11:12:51,374 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 11:12:51,545 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 11:12:51,545 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 11:12:51,546 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 11:12:51,546 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 11:12:51,546 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 11:12:51,546 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 11:12:51,546 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 11:12:51,547 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 11:12:52,091 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 11:12:56,695 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:12:56,838 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:12:56,838 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 11:12:56,839 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 11:12:56,839 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:12:56,839 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 11:12:58,094 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 11:12:59,357 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 11:12:59,358 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 11:12:59,451 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 11:12:59,728 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 11:12:59,728 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 11:12:59,729 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 11:12:59,729 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 11:12:59,729 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 11:12:59,729 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 11:12:59,729 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 11:12:59,729 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 11:13:30,070 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 11:15:04,121 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:15:14,199 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:15:14,200 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 11:15:14,200 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 11:15:14,200 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:15:14,200 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 11:16:21,145 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 11:17:14,875 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 11:17:14,876 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 11:17:14,970 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 11:17:23,270 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 11:17:23,270 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 11:17:23,271 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 11:17:28,271 - test_parameters - INFO - 设置端口eth0成本: 10
2025-09-11 11:17:28,272 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 11:17:28,272 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 11:17:28,335 - test_parameters - INFO - 设置端口eth0成本: 100
2025-09-11 11:17:28,335 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 11:17:28,335 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 11:17:28,439 - test_parameters - INFO - 设置端口eth0成本: 1000
2025-09-11 11:17:28,440 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 11:17:28,440 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 11:17:28,547 - test_parameters - INFO - 设置端口eth0成本: 20000
2025-09-11 11:17:28,548 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 11:17:28,548 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 11:17:28,654 - test_parameters - INFO - 端口成本测试通过
2025-09-11 11:17:28,655 - RSTPTest - INFO - 测试完成: test_port_cost (耗时: 279.85秒)
2025-09-11 11:17:28,656 - RSTPTest - INFO - ============================================================

2025-09-11 11:17:28,657 - RSTPTest - INFO - ============================================================
2025-09-11 11:17:28,657 - RSTPTest - INFO - 开始测试: test_parameter_persistence
2025-09-11 11:17:28,658 - RSTPTest - INFO - ============================================================
2025-09-11 11:17:28,658 - test_parameters - INFO - 测试参数持久性
2025-09-11 11:17:30,309 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 11:17:30,309 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 11:17:30,309 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 16384 (方法: ovs)
2025-09-11 11:17:30,309 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 11:17:30,428 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 11:17:36,300 - test_parameters - INFO - 参数持久性测试通过
2025-09-11 11:17:36,301 - RSTPTest - INFO - 测试完成: test_parameter_persistence (耗时: 7.64秒)
2025-09-11 11:17:36,301 - RSTPTest - INFO - ============================================================

2025-09-11 11:17:36,302 - RSTPTest - INFO - ============================================================
2025-09-11 11:17:36,302 - RSTPTest - INFO - 开始测试: test_parameter_boundaries
2025-09-11 11:17:36,302 - RSTPTest - INFO - ============================================================
2025-09-11 11:17:36,303 - test_parameters - INFO - 测试参数边界值
2025-09-11 11:17:37,979 - test_parameters - INFO - 最小值0: 失败
2025-09-11 11:17:38,087 - test_parameters - INFO - 最大值65535: 失败
2025-09-11 11:17:38,191 - test_parameters - INFO - 正确拒绝了无效值-1
2025-09-11 11:17:38,294 - test_parameters - INFO - 正确拒绝了无效值65536
2025-09-11 11:17:38,398 - test_parameters - INFO - 最小值1: 失败
2025-09-11 11:17:38,498 - test_parameters - INFO - 最大值10: 失败
2025-09-11 11:17:38,603 - test_parameters - INFO - 正确拒绝了无效值0
2025-09-11 11:17:38,703 - test_parameters - INFO - 正确拒绝了无效值11
2025-09-11 11:17:38,811 - test_parameters - INFO - 最小值4: 失败
2025-09-11 11:17:38,919 - test_parameters - INFO - 最大值30: 失败
2025-09-11 11:17:39,032 - test_parameters - INFO - 正确拒绝了无效值3
2025-09-11 11:17:39,135 - test_parameters - INFO - 正确拒绝了无效值31
2025-09-11 11:17:39,238 - test_parameters - INFO - 最小值6: 失败
2025-09-11 11:17:39,338 - test_parameters - INFO - 最大值40: 失败
2025-09-11 11:17:39,439 - test_parameters - INFO - 正确拒绝了无效值5
2025-09-11 11:17:39,539 - test_parameters - INFO - 正确拒绝了无效值41
2025-09-11 11:17:39,539 - test_parameters - INFO - 参数边界测试完成
2025-09-11 11:17:39,540 - RSTPTest - INFO - 测试完成: test_parameter_boundaries (耗时: 3.24秒)
2025-09-11 11:17:39,540 - RSTPTest - INFO - ============================================================

2025-09-11 11:17:39,541 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-11 11:17:39,541 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-11 11:17:39,541 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-11 11:17:39,682 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-11 11:17:39,682 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-11 11:17:39,812 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-11 11:17:39,813 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-11 11:17:39,962 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-11 11:17:39,962 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-11 11:17:39,963 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 11:17:39,963 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 11:17:39,963 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-11 11:17:39,963 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-11 11:17:40,020 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-11 11:17:40,020 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-11 11:17:40,196 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-11 11:17:40,197 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-11 11:17:40,197 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-11 11:17:40,197 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-11 11:17:40,197 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-11 11:17:40,250 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-11 11:17:40,251 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-11 11:17:48,419 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-11 11:17:48,419 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-11 11:17:48,419 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-11 11:17:48,419 - RSTPTest - INFO - ============================================================
2025-09-11 11:17:48,420 - RSTPTest - INFO - 开始测试: test_port_role_assignment_simplified
2025-09-11 11:17:48,420 - RSTPTest - INFO - ============================================================
2025-09-11 11:17:48,420 - test_protocol_conformance - INFO - 开始端口角色分配测试
2025-09-11 11:17:48,421 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 11:17:48,421 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 11:17:48,421 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 11:17:48,421 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 11:17:48,421 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 11:17:48,421 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 11:17:48,422 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 11:17:48,422 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 11:17:48,422 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 11:17:48,907 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 11:17:48,908 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 11:17:48,908 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 11:17:49,069 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 11:17:50,107 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 11:17:50,108 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 11:17:50,108 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 11:17:50,109 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 11:17:50,109 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 11:17:50,578 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 11:17:51,025 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 11:17:51,025 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 11:17:51,196 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 11:17:51,196 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 11:17:51,196 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 11:17:51,196 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 11:17:51,197 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 11:17:51,197 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 11:17:51,197 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 11:17:51,197 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 11:17:51,711 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 11:17:56,311 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:17:56,455 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:17:56,455 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 11:17:56,455 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 11:17:56,456 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:17:56,456 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 11:17:57,748 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 11:17:59,048 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 11:17:59,048 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 11:17:59,147 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 11:17:59,424 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 11:17:59,424 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 11:17:59,424 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 11:17:59,424 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 11:17:59,425 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 11:17:59,425 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 11:17:59,425 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 11:17:59,425 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 11:18:15,104 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 11:18:19,725 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:18:19,878 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:18:19,878 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 11:18:19,879 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 11:18:19,879 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:18:19,879 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 11:18:21,179 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 11:18:22,470 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 11:18:22,470 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 11:18:22,565 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 11:18:22,824 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 11:18:22,824 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 11:18:22,825 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 11:18:22,825 - test_protocol_conformance - INFO - 验证拓扑完整性...
2025-09-11 11:18:22,825 - NetworkTopology - INFO - 开始验证拓扑完整性...
2025-09-11 11:18:23,974 - NetworkTopology - INFO - 拓扑完整性验证通过
2025-09-11 11:18:23,974 - test_protocol_conformance - INFO - 设置网桥优先级...
2025-09-11 11:18:23,974 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-11 11:18:23,974 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级12288 -> mstpd优先级3)
2025-09-11 11:18:24,115 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 11:18:24,116 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 32768 (方法: ovs)
2025-09-11 11:18:24,116 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 11:18:24,235 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 11:18:24,379 - test_protocol_conformance - INFO - 等待网络收敛...
2025-09-11 11:18:24,380 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 11:18:24,818 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:18:24,969 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Alternate  Discarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 11:18:24,970 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 11:18:24,970 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:18:24,970 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 11:18:24,971 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:18:25,431 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:18:25,431 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:18:25,432 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:18:25,432 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:18:25,432 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:18:25,432 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:18:25,720 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.34秒
2025-09-11 11:18:26,198 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:18:26,350 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Alternate  Discarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 11:18:26,351 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 11:18:26,352 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:18:26,352 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 11:18:26,352 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:18:26,819 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:18:26,820 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:18:26,821 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:18:26,821 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:18:26,822 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:18:26,822 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:18:27,565 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:18:27,718 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Alternate  Discarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 11:18:27,719 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 11:18:27,719 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:18:27,719 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 11:18:27,720 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:18:28,187 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:18:28,188 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:18:28,189 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:18:28,189 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:18:28,189 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:18:28,189 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:18:28,476 - RSTPAnalyzer_DUT - INFO - Root ID为unknown，判定为非根桥
2025-09-11 11:18:28,477 - test_protocol_conformance - INFO - DUT是根桥: False
2025-09-11 11:18:28,477 - test_protocol_conformance - INFO - 活动端口角色: {<PortRole.ROOT: 'root'>: ['br3'], <PortRole.ALTERNATE: 'alternate'>: ['br4']}
2025-09-11 11:18:28,477 - test_protocol_conformance - INFO - 禁用端口: ['SE_ETH2']
2025-09-11 11:18:28,478 - test_protocol_conformance - INFO - 端口角色分配测试通过
2025-09-11 11:18:28,478 - RSTPTest - INFO - 测试完成: test_port_role_assignment_simplified (耗时: 40.06秒)
2025-09-11 11:18:28,479 - RSTPTest - INFO - ============================================================

2025-09-11 11:18:28,480 - RSTPTest - INFO - ============================================================
2025-09-11 11:18:28,480 - RSTPTest - INFO - 开始测试: test_root_bridge_election
2025-09-11 11:18:28,480 - RSTPTest - INFO - ============================================================
2025-09-11 11:18:28,481 - test_protocol_conformance - INFO - 开始根网桥选举测试
2025-09-11 11:18:28,481 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 11:18:28,481 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 11:18:28,481 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 11:18:28,482 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 11:18:28,482 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 11:18:28,482 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 11:18:28,482 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 11:18:28,482 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 11:18:28,482 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 11:18:28,991 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 11:18:28,992 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 11:18:28,992 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 11:18:29,146 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 11:18:30,218 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 11:18:30,218 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 11:18:30,219 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 11:18:30,219 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 11:18:30,219 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 11:18:30,703 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 11:18:31,184 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 11:18:31,184 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 11:18:31,379 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 11:18:31,380 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 11:18:31,380 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 11:18:31,380 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 11:18:31,380 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 11:18:31,381 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 11:18:31,381 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 11:18:31,381 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 11:18:31,932 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 11:18:37,326 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:18:37,470 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:18:37,470 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 11:18:37,471 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 11:18:37,471 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:18:37,471 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 11:18:38,729 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 11:18:40,007 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 11:18:40,007 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 11:18:40,101 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 11:18:40,387 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 11:18:40,387 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 11:18:40,388 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 11:18:40,388 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 11:18:40,388 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 11:18:40,388 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 11:18:40,388 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 11:18:40,389 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 11:18:40,915 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 11:18:45,486 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:18:45,627 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:18:45,627 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 11:18:45,628 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 11:18:45,628 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:18:45,628 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 11:18:46,916 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 11:18:48,167 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 11:18:48,168 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 11:18:48,263 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 11:18:48,547 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 11:18:48,548 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 11:18:48,548 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 11:18:51,549 - test_protocol_conformance - INFO - === 检查DUT网桥配置 ===
2025-09-11 11:18:51,549 - test_protocol_conformance - INFO - DUT使用OVS网桥: SE_ETH2
2025-09-11 11:18:51,616 - test_protocol_conformance - INFO - OVS网桥 SE_ETH2 存在
2025-09-11 11:18:51,720 - test_protocol_conformance - INFO - SE_ETH2 RSTP状态: true
2025-09-11 11:18:51,721 - test_protocol_conformance - INFO - === 初始网桥状态 ===
2025-09-11 11:18:52,177 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:18:52,329 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 11:18:52,331 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 11:18:52,331 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:18:52,331 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 11:18:52,331 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:18:52,794 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:18:52,794 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:18:52,795 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:18:52,796 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:18:52,796 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:18:52,796 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:18:53,084 - test_protocol_conformance - INFO - 活动端口数: 2
2025-09-11 11:18:53,084 - test_protocol_conformance - INFO - 初始端口状态:
2025-09-11 11:18:53,084 - test_protocol_conformance - INFO -   br3: 角色=root, 状态=forwarding
2025-09-11 11:18:53,084 - test_protocol_conformance - INFO -   br4: 角色=alternate, 状态=discarding
2025-09-11 11:18:53,085 - test_protocol_conformance - INFO - 初始状态 - DUT有Root Port: True
2025-09-11 11:18:53,085 - test_protocol_conformance - INFO - === 配置网桥优先级 ===
2025-09-11 11:18:53,085 - test_protocol_conformance - INFO - 设置TestNode1优先级为16384
2025-09-11 11:18:53,085 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 16384 (方法: mstpd)
2025-09-11 11:18:53,086 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级16384 -> mstpd优先级4)
2025-09-11 11:18:53,243 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 11:18:53,243 - test_protocol_conformance - INFO - 设置DUT优先级为32768
2025-09-11 11:18:53,311 - test_protocol_conformance - INFO - OVS设置优先级结果: ('', '', 0)
2025-09-11 11:18:53,416 - test_protocol_conformance - INFO - 验证优先级设置: ('"32768"\n', '', 0)
2025-09-11 11:18:53,417 - test_protocol_conformance - INFO - 设置TestNode2优先级为24576
2025-09-11 11:18:53,417 - NetworkTopology_TestNode2 - INFO - TestNode2: 设置网桥优先级 br0 = 24576 (方法: mstpd)
2025-09-11 11:18:53,417 - NetworkTopology_TestNode2 - INFO - TestNode2: 执行mstpd设置优先级命令 (标准优先级24576 -> mstpd优先级6)
2025-09-11 11:18:53,557 - NetworkTopology_TestNode2 - INFO - TestNode2: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 11:18:53,557 - test_protocol_conformance - INFO - 等待RSTP收敛...
2025-09-11 11:19:03,558 - test_protocol_conformance - INFO - === 第一阶段验证 ===
2025-09-11 11:19:03,977 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:19:04,129 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    16384
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 11:19:04,130 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 16384
2025-09-11 11:19:04,130 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:19:04,130 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 4000/6e:b3:08:fa:01:34
2025-09-11 11:19:04,130 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:19:04,589 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:19:04,589 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:19:04,590 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:19:04,591 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:19:04,591 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:19:04,591 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:19:04,984 - test_protocol_conformance - INFO - DUT当前优先级: 32768
2025-09-11 11:19:04,984 - test_protocol_conformance - INFO - 优先级验证通过
2025-09-11 11:19:04,984 - test_protocol_conformance - INFO -   br3: 角色=root
2025-09-11 11:19:04,984 - test_protocol_conformance - INFO -   br4: 角色=alternate
2025-09-11 11:19:04,985 - test_protocol_conformance - INFO - ✓ 第一阶段通过：DUT有Root Port，不是根桥
2025-09-11 11:19:04,985 - test_protocol_conformance - INFO - 
=== 第二阶段：DUT应成为根桥 ===
2025-09-11 11:19:04,985 - test_protocol_conformance - INFO - 设置DUT优先级为12288（最低）
2025-09-11 11:19:05,096 - test_protocol_conformance - INFO - OVS设置最低优先级结果: ('', '', 0)
2025-09-11 11:19:05,203 - test_protocol_conformance - INFO - 设置后优先级: 12288
2025-09-11 11:19:05,204 - test_protocol_conformance - INFO - 最低优先级设置验证通过
2025-09-11 11:19:05,204 - test_protocol_conformance - INFO - 等待RSTP重新收敛...
2025-09-11 11:19:15,204 - test_protocol_conformance - INFO - === 最终验证 ===
2025-09-11 11:19:15,621 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:19:15,773 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    16384
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 11:19:15,774 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 16384
2025-09-11 11:19:15,774 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:19:15,774 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 4000/6e:b3:08:fa:01:34
2025-09-11 11:19:15,774 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:19:16,233 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:19:16,234 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:19:16,235 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:19:16,235 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:19:16,235 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:19:16,235 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:19:16,523 - test_protocol_conformance - INFO -   br3: 角色=root, 状态=forwarding
2025-09-11 11:19:16,523 - test_protocol_conformance - INFO -   br4: 角色=alternate, 状态=discarding
2025-09-11 11:19:16,524 - test_protocol_conformance - ERROR - DUT RSTP实现问题诊断:
2025-09-11 11:19:16,524 - test_protocol_conformance - ERROR - 1. DUT优先级已设置为12288（最低）
2025-09-11 11:19:16,524 - test_protocol_conformance - ERROR - 2. 但DUT仍有Root Port: True
2025-09-11 11:19:16,524 - test_protocol_conformance - ERROR - 3. Designated端口数: 0
2025-09-11 11:19:16,524 - test_protocol_conformance - ERROR - 可能的原因:
2025-09-11 11:19:16,525 - test_protocol_conformance - ERROR - - DUT的RSTP实现不符合标准
2025-09-11 11:19:16,525 - test_protocol_conformance - ERROR - - DUT没有正确处理优先级变化
2025-09-11 11:19:16,525 - test_protocol_conformance - ERROR - - DUT的BPDU发送/接收有问题
2025-09-11 11:19:16,577 - RSTPTest - INFO - 测试完成: test_root_bridge_election (耗时: 48.10秒)
2025-09-11 11:19:16,578 - RSTPTest - INFO - ============================================================

2025-09-11 11:19:16,581 - RSTPTest - INFO - ============================================================
2025-09-11 11:19:16,581 - RSTPTest - INFO - 开始测试: test_port_role_assignment
2025-09-11 11:19:16,583 - RSTPTest - INFO - ============================================================
2025-09-11 11:19:16,585 - test_protocol_conformance - INFO - 开始端口角色分配测试
2025-09-11 11:19:16,585 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 11:19:16,586 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 11:19:16,586 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 11:19:16,586 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 11:19:16,586 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 11:19:16,587 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 11:19:16,587 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 11:19:16,587 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 11:19:16,588 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 11:19:17,071 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 11:19:17,071 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 11:19:17,071 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 11:19:17,228 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 11:19:18,321 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 11:19:18,322 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 11:19:18,322 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 11:19:18,322 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 11:19:18,322 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 11:19:18,798 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 11:19:19,275 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 11:19:19,275 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 11:19:19,466 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 11:19:19,466 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 11:19:19,466 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 11:19:19,466 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 11:19:19,467 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 11:19:19,467 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 11:19:19,467 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 11:19:19,467 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 11:19:19,996 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 11:19:24,595 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:19:24,755 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:19:24,755 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 11:19:24,756 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 11:19:24,756 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:19:24,756 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 11:20:25,694 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 11:21:27,895 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 11:21:27,895 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 11:21:27,990 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 11:21:38,206 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 11:21:38,206 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 11:21:38,207 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 11:21:38,207 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 11:21:38,208 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 11:21:38,208 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 11:21:38,208 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 11:21:38,208 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 11:21:38,750 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 11:21:43,364 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:21:43,506 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:21:43,506 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 11:21:43,507 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 11:21:43,507 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:21:43,507 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 11:21:44,765 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 11:21:46,046 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 11:21:46,046 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 11:21:46,143 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 11:21:46,425 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 11:21:46,426 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 11:21:46,426 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 11:21:46,426 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-11 11:21:46,426 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级12288 -> mstpd优先级3)
2025-09-11 11:21:54,600 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 11:21:54,601 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 32768 (方法: ovs)
2025-09-11 11:21:54,601 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 11:21:54,720 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 11:21:57,864 - test_protocol_conformance - INFO - 检查DUT的OVS网桥接口...
2025-09-11 11:21:58,007 - test_protocol_conformance - INFO - OVS配置状态:
('8c812ea9-3b0c-46a1-bd3c-ef3904d38c1a\n    Bridge SE_ETH2\n        Port br4\n            Interface br4\n        Port SE_ETH2\n            Interface SE_ETH2\n                type: internal\n        Port br3\n            Interface br3\n    Bridge SE_ETH4\n        Port SE_ETH4\n            Interface SE_ETH4\n                type: internal\n    Bridge SE_ETH6\n        Port SE_ETH6\n            Interface SE_ETH6\n                type: internal\n    Bridge rstp0\n        Port rstp0\n            Interface rstp0\n                type: internal\n    Bridge br0\n        Port eth0\n            Interface eth0\n                error: "could not open network device eth0 (No such device)"\n        Port br0\n            Interface br0\n                type: internal\n                error: "could not add network device br0 to ofproto (File exists)"\n        Port eth2\n            Interface eth2\n                error: "could not open network device eth2 (No such device)"\n    ovs_version: "3.1.0"\n', '', 0)
2025-09-11 11:21:58,105 - test_protocol_conformance - INFO - SE_ETH2 网桥端口:
('br3\nbr4\n', '', 0)
2025-09-11 11:21:58,213 - test_protocol_conformance - INFO - SE_ETH2 STP状态:
('true\n', '', 0)
2025-09-11 11:21:58,320 - test_protocol_conformance - INFO - SE_ETH2 端口信息:
('OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7\nn_tables:254, n_buffers:0\ncapabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP\nactions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst\n 1(br3): addr:90:12:10:b5:7d:f7\n     config:     0\n     state:      0\n     current:    1GB-FD AUTO_NEG\n     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM\n     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM\n     speed: 1000 Mbps now, 1000 Mbps max\n 2(br4): addr:90:12:10:b5:7d:f7\n     config:     0\n     state:      STP_FORWARD\n     current:    1GB-FD AUTO_NEG\n     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM\n     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM\n     speed: 1000 Mbps now, 1000 Mbps max\n LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7\n     config:     0\n     state:      0\n     speed: 0 Mbps now, 0 Mbps max\nOFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0\n', '', 0)
2025-09-11 11:21:58,321 - test_protocol_conformance - INFO - 获取初始网桥状态...
2025-09-11 11:21:58,789 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:21:58,947 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 11:21:58,948 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 11:21:58,948 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:21:58,948 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 11:21:58,948 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:21:59,407 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:21:59,407 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:21:59,408 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:21:59,408 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:21:59,408 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:21:59,409 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:21:59,701 - test_protocol_conformance - INFO - Bridge ID: 3000/6e:b3:08:fa:01:34
2025-09-11 11:21:59,701 - test_protocol_conformance - INFO - Root ID: unknown
2025-09-11 11:21:59,702 - test_protocol_conformance - INFO - Root Port: br3
2025-09-11 11:21:59,702 - test_protocol_conformance - INFO - 协议版本: rstp
2025-09-11 11:21:59,702 - test_protocol_conformance - INFO - 端口 br3: 角色=root, 状态=forwarding, 成本=0
2025-09-11 11:21:59,702 - test_protocol_conformance - INFO - 端口 br4: 角色=alternate, 状态=discarding, 成本=0
2025-09-11 11:21:59,702 - test_protocol_conformance - INFO - 端口 SE_ETH2: 角色=unknown, 状态=disabled, 成本=0
2025-09-11 11:21:59,703 - test_protocol_conformance - INFO - 等待网络收敛...
2025-09-11 11:21:59,703 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 11:22:00,166 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:22:00,318 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 11:22:00,319 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 11:22:00,319 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:22:00,319 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 11:22:00,319 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:22:00,776 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:22:00,776 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:22:00,777 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:22:00,778 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:22:00,778 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:22:00,778 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:22:01,064 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.36秒
2025-09-11 11:22:01,526 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:22:01,678 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 11:22:01,680 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 11:22:01,680 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:22:01,680 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 11:22:01,681 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:22:02,168 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:22:02,168 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:22:02,170 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:22:02,170 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:22:02,170 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:22:02,170 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:22:02,456 - test_protocol_conformance - INFO - 收敛后的端口状态:
2025-09-11 11:22:02,456 - test_protocol_conformance - INFO - 端口 br3: 角色=root, 状态=forwarding, 成本=0
2025-09-11 11:22:02,457 - test_protocol_conformance - INFO - 端口 br4: 角色=alternate, 状态=discarding, 成本=0
2025-09-11 11:22:02,457 - test_protocol_conformance - INFO - 端口 SE_ETH2: 角色=unknown, 状态=disabled, 成本=0
2025-09-11 11:22:02,922 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:22:03,078 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 11:22:03,080 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 11:22:03,080 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:22:03,080 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 11:22:03,080 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:22:03,547 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:22:03,547 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:22:03,549 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:22:03,549 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:22:03,549 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:22:03,550 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:22:03,836 - RSTPAnalyzer_DUT - INFO - Root ID为unknown，判定为非根桥
2025-09-11 11:22:03,837 - test_protocol_conformance - INFO - is_root_bridge() 返回: False
2025-09-11 11:22:03,837 - test_protocol_conformance - INFO - 有Root Port: True
2025-09-11 11:22:03,837 - test_protocol_conformance - INFO - 最终判定 - DUT是根桥: False
2025-09-11 11:22:03,838 - test_protocol_conformance - INFO - 活动端口数: 2
2025-09-11 11:22:03,838 - test_protocol_conformance - INFO - 禁用端口: ['SE_ETH2']
2025-09-11 11:22:03,838 - test_protocol_conformance - INFO - 端口角色分布: {<PortRole.ROOT: 'root'>: ['br3'], <PortRole.ALTERNATE: 'alternate'>: ['br4']}
2025-09-11 11:22:03,838 - test_protocol_conformance - INFO - 两端口验证：检查Root Port和Designated Port
2025-09-11 11:22:03,884 - RSTPTest - INFO - 测试完成: test_port_role_assignment (耗时: 167.30秒)
2025-09-11 11:22:03,884 - RSTPTest - INFO - ============================================================

2025-09-11 11:22:03,887 - RSTPTest - INFO - ============================================================
2025-09-11 11:22:03,887 - RSTPTest - INFO - 开始测试: test_rstp_protocol_verification
2025-09-11 11:22:03,888 - RSTPTest - INFO - ============================================================
2025-09-11 11:22:03,888 - test_protocol_conformance - INFO - 开始RSTP协议验证
2025-09-11 11:22:03,888 - test_protocol_conformance - INFO - === 检查OVS配置 ===
2025-09-11 11:22:03,943 - test_protocol_conformance - INFO - 当前OVS配置:
8c812ea9-3b0c-46a1-bd3c-ef3904d38c1a
    Bridge SE_ETH2
        Port br4
            Interface br4
        Port SE_ETH2
            Interface SE_ETH2
                type: internal
        Port br3
            Interface br3
    Bridge SE_ETH4
        Port SE_ETH4
            Interface SE_ETH4
                type: internal
    Bridge SE_ETH6
        Port SE_ETH6
            Interface SE_ETH6
                type: internal
    Bridge rstp0
        Port rstp0
            Interface rstp0
          
2025-09-11 11:22:04,043 - test_protocol_conformance - INFO - 使用现有网桥 SE_ETH2，端口: ['br3', 'br4']
2025-09-11 11:22:04,044 - test_protocol_conformance - INFO - === 配置RSTP（确保是RSTP而不是STP）===
2025-09-11 11:22:05,261 - test_protocol_conformance - INFO - 启用RSTP...
2025-09-11 11:22:05,324 - test_protocol_conformance - INFO - ✓ RSTP已启用
2025-09-11 11:22:05,324 - test_protocol_conformance - INFO - 设置RSTP参数...
2025-09-11 11:22:05,439 - test_protocol_conformance - INFO - ✓ 设置: rstp-hello-time=2
2025-09-11 11:22:05,556 - test_protocol_conformance - INFO - ✓ 设置: rstp-forward-delay=4
2025-09-11 11:22:05,668 - test_protocol_conformance - INFO - ✓ 设置: rstp-max-age=6
2025-09-11 11:22:05,768 - test_protocol_conformance - INFO - ✓ 设置: rstp-priority=32768
2025-09-11 11:22:05,880 - test_protocol_conformance - INFO - ✓ 设置: rstp-force-protocol-version=2
2025-09-11 11:22:06,196 - test_protocol_conformance - INFO - ✓ 端口 br3 RSTP已启用
2025-09-11 11:22:06,508 - test_protocol_conformance - INFO - ✓ 端口 br4 RSTP已启用
2025-09-11 11:22:06,604 - test_protocol_conformance - INFO - 等待RSTP初始化...
2025-09-11 11:22:11,605 - test_protocol_conformance - INFO - === 验证RSTP配置 ===
2025-09-11 11:22:11,659 - test_protocol_conformance - INFO - RSTP状态:
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     6s
  stp-fwd-delay   4s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 11:22:11,660 - test_protocol_conformance - INFO - ✓ 使用RSTP时间参数
2025-09-11 11:22:11,660 - test_protocol_conformance - INFO - === 创建测试拓扑 ===
2025-09-11 11:22:11,660 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 11:22:11,660 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 11:22:11,660 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 11:22:11,661 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 11:22:11,661 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 11:22:11,661 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 11:22:11,661 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 11:22:11,661 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 11:22:11,662 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 11:22:12,182 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 11:22:12,182 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 11:22:12,183 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 11:22:12,325 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 11:22:13,383 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 11:22:13,383 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 11:22:13,383 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 11:22:13,384 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 11:22:13,384 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 11:22:13,860 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 11:22:14,351 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 11:22:14,352 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 11:22:14,555 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 11:22:14,556 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 11:22:14,556 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 11:22:14,556 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 11:22:14,556 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 11:22:14,557 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 11:22:14,557 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 11:22:14,557 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 11:22:30,207 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 11:22:34,811 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:22:34,945 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:22:34,946 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 11:22:34,946 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 11:22:34,946 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:22:34,946 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 11:22:36,210 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 11:22:37,482 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 11:22:37,483 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 11:22:37,578 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 11:22:37,863 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 11:22:37,863 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 11:22:37,864 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 11:22:37,864 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 11:22:37,864 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 11:22:37,864 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 11:22:37,864 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 11:22:37,865 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 11:22:38,421 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 11:22:43,003 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:22:43,158 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:22:43,158 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 11:22:43,158 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 11:22:43,158 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:22:43,159 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 11:22:44,486 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 11:22:45,807 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 11:22:45,807 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 11:22:45,903 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 11:22:46,191 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 11:22:46,191 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 11:22:46,191 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 11:22:51,192 - test_protocol_conformance - INFO - === 捕获BPDU ===
2025-09-11 11:22:51,192 - test_protocol_conformance - INFO - 在 SE_ETH2 上捕获BPDU...
2025-09-11 11:22:51,193 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: SE_ETH2, 数量: 10)
2025-09-11 11:23:01,292 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-11 11:23:01,292 - test_protocol_conformance - INFO - 在 br3 上捕获BPDU...
2025-09-11 11:23:01,293 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br3, 数量: 10)
2025-09-11 11:23:11,428 - RSTPAnalyzer_DUT - INFO - 捕获到 5 个BPDU包
2025-09-11 11:23:11,428 - test_protocol_conformance - INFO - ✓ 捕获到 5 个BPDU
2025-09-11 11:23:11,428 - test_protocol_conformance - INFO - === 分析BPDU ===
2025-09-11 11:23:11,429 - test_protocol_conformance - INFO - 第一个BPDU信息: {'timestamp': '11:23:05.785826', 'raw': '11:23:05.785826 00:e0:0c:25:0c:5c > 01:80:c2:00:00:00, 802.3, length 39: LLC, dsap STP (0x42) Individual, ssap STP (0x42) Command, ctrl 0x03: STP 802.1w, Rapid STP, Flags [Proposal, Learn, Forward, Agreement], bridge-id 8000.6e:b3:08:fa:01:34.8002, length 36', 'is_rstp': False}
2025-09-11 11:23:11,429 - test_protocol_conformance - INFO - BPDU统计: RSTP=0, STP=5
2025-09-11 11:23:11,429 - test_protocol_conformance - WARNING - 检测到更多STP BPDU
2025-09-11 11:23:11,526 - test_protocol_conformance - INFO - rstp_enable状态: true
2025-09-11 11:23:11,626 - test_protocol_conformance - INFO - stp_enable状态: true
2025-09-11 11:23:11,727 - test_protocol_conformance - WARNING - OVS配置为RSTP但发送STP BPDU，可能是实现限制
2025-09-11 11:23:11,727 - test_protocol_conformance - INFO - 基于配置判断为RSTP
2025-09-11 11:23:11,727 - test_protocol_conformance - INFO - ✓ RSTP协议验证通过（检测到 5 个RSTP BPDU）
2025-09-11 11:23:11,728 - RSTPTest - INFO - 测试完成: test_rstp_protocol_verification (耗时: 67.84秒)
2025-09-11 11:23:11,728 - RSTPTest - INFO - ============================================================

2025-09-11 11:23:11,729 - RSTPTest - INFO - ============================================================
2025-09-11 11:23:11,730 - RSTPTest - INFO - 开始测试: test_alternate_port_verification
2025-09-11 11:23:11,730 - RSTPTest - INFO - ============================================================
2025-09-11 11:23:11,731 - test_protocol_conformance - INFO - 开始Alternate Port验证测试
2025-09-11 11:23:11,731 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 11:23:11,731 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 11:23:11,731 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 11:23:11,731 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 11:23:11,732 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 11:23:11,732 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 11:23:11,732 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 11:23:11,732 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 11:23:11,732 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 11:23:12,275 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 11:23:12,275 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 11:23:12,275 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 11:23:12,429 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 11:23:13,508 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 11:23:13,508 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 11:23:13,508 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 11:23:13,509 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 11:23:13,509 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 11:23:13,986 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 11:23:14,470 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 11:23:14,470 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 11:23:14,662 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 11:23:14,662 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 11:23:14,662 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 11:23:14,663 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 11:23:14,663 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 11:23:14,663 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 11:23:14,663 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 11:23:14,663 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 11:23:15,231 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 11:23:19,843 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:23:19,990 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:23:19,990 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 11:23:19,990 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 11:23:19,990 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:23:19,990 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 11:23:21,326 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 11:23:22,604 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 11:23:22,605 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 11:23:22,700 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 11:23:22,990 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 11:23:22,990 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 11:23:22,991 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 11:23:22,991 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 11:23:22,991 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 11:23:22,991 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 11:23:22,992 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 11:23:22,992 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 11:23:23,525 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 11:23:28,510 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:23:28,641 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:23:28,642 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 11:23:28,642 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 11:23:28,642 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:23:28,642 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 11:23:29,906 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 11:23:31,225 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 11:23:31,225 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 11:23:31,321 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 11:23:31,605 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 11:23:31,606 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 11:23:31,606 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 11:23:31,606 - test_protocol_conformance - INFO - 设置网桥优先级
2025-09-11 11:23:31,607 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 4096 (方法: mstpd)
2025-09-11 11:23:31,607 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级4096 -> mstpd优先级1)
2025-09-11 11:23:31,751 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 11:23:31,751 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 8192 (方法: ovs)
2025-09-11 11:23:31,751 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 11:23:31,862 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 11:23:32,026 - NetworkTopology_TestNode2 - INFO - TestNode2: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-11 11:23:32,026 - NetworkTopology_TestNode2 - INFO - TestNode2: 执行mstpd设置优先级命令 (标准优先级12288 -> mstpd优先级3)
2025-09-11 11:23:32,186 - NetworkTopology_TestNode2 - INFO - TestNode2: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 11:23:32,187 - test_protocol_conformance - INFO - 等待RSTP收敛...
2025-09-11 11:23:32,187 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 11:23:32,592 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:23:32,744 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 11:23:32,746 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 11:23:32,746 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:23:32,746 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 11:23:32,746 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:23:33,210 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:23:33,211 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:23:33,213 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:23:33,213 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:23:33,213 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:23:33,213 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:23:33,495 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.31秒
2025-09-11 11:23:33,953 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:23:34,108 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 11:23:34,109 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 11:23:34,109 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:23:34,109 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 11:23:34,109 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:23:34,575 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:23:34,575 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:23:34,576 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:23:34,576 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:23:34,576 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:23:34,577 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:23:34,862 - test_protocol_conformance - INFO - DUT桥信息: BridgeInfo(bridge_id='1000/6e:b3:08:fa:01:34', root_id='unknown', root_port='br3', root_path_cost=0, protocol_version='rstp', hello_time=2, forward_delay=15, max_age=20, topology_changes=0, ports={'br3': PortInfo(name='br3', role=<PortRole.ROOT: 'root'>, state=<PortState.FORWARDING: 'forwarding'>, path_cost=0, designated_bridge='', designated_port=''), 'br4': PortInfo(name='br4', role=<PortRole.ALTERNATE: 'alternate'>, state=<PortState.DISCARDING: 'discarding'>, path_cost=0, designated_bridge='', designated_port=''), 'SE_ETH2': PortInfo(name='SE_ETH2', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')})
2025-09-11 11:23:35,316 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:23:35,468 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 11:23:35,469 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 11:23:35,469 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:23:35,470 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 11:23:35,470 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:23:35,934 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:23:35,934 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:23:35,935 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:23:35,935 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:23:35,935 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:23:35,936 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:23:36,223 - RSTPAnalyzer_DUT - INFO - Root ID为unknown，判定为非根桥
2025-09-11 11:23:36,223 - test_protocol_conformance - INFO - DUT根桥判断结果: False
2025-09-11 11:23:36,224 - test_protocol_conformance - INFO - DUT桥信息 - bridge_id: '1000/6e:b3:08:fa:01:34', root_id: 'unknown'
2025-09-11 11:23:36,224 - test_protocol_conformance - INFO - 活动端口数量: 2
2025-09-11 11:23:36,224 - test_protocol_conformance - INFO - 端口角色分布: {<PortRole.ROOT: 'root'>: ['br3'], <PortRole.ALTERNATE: 'alternate'>: ['br4']}
2025-09-11 11:23:36,224 - test_protocol_conformance - INFO - ✓ Alternate端口br4状态正确: discarding
2025-09-11 11:23:36,225 - test_protocol_conformance - INFO - ✓ 成功验证Alternate Port: ['br4']
2025-09-11 11:23:36,225 - test_protocol_conformance - INFO - Alternate Port验证测试完成
2025-09-11 11:23:36,226 - RSTPTest - INFO - 测试完成: test_alternate_port_verification (耗时: 24.50秒)
2025-09-11 11:23:36,226 - RSTPTest - INFO - ============================================================

2025-09-11 11:23:36,227 - RSTPTest - INFO - ============================================================
2025-09-11 11:23:36,227 - RSTPTest - INFO - 开始测试: test_port_state_transitions
2025-09-11 11:23:36,228 - RSTPTest - INFO - ============================================================
2025-09-11 11:23:36,228 - test_protocol_conformance - INFO - 开始端口状态转换测试
2025-09-11 11:23:36,228 - NetworkTopology - INFO - 创建RSTP线性拓扑...
2025-09-11 11:23:36,229 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 11:23:36,229 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 11:23:36,229 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 11:23:36,229 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 11:23:36,229 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 11:23:36,229 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 11:23:36,230 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 11:23:36,230 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 11:23:36,738 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 11:23:36,739 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 11:23:36,739 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 11:23:36,895 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 11:23:37,965 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"32768
2025-09-11 11:23:37,965 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 11:23:37,966 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 11:23:37,966 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br4']
2025-09-11 11:23:37,966 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 11:23:38,442 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 11:23:38,442 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 11:23:38,634 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 11:23:38,634 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 11:23:38,635 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 11:23:38,635 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 11:23:38,635 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 11:23:38,635 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 11:23:38,635 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 11:23:38,635 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 11:23:39,362 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 11:24:44,161 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:24:54,245 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:24:54,245 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 11:24:54,245 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 11:24:54,246 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:24:54,246 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 11:25:54,540 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 11:26:51,127 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 11:26:51,128 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 11:26:51,223 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 11:26:56,496 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 11:26:56,496 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 11:26:56,496 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 11:26:56,496 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 11:26:56,497 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 11:26:56,497 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 11:26:56,497 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 11:26:56,497 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 11:26:57,066 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 11:27:01,662 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:27:01,798 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:27:01,799 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 11:27:01,799 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 11:27:01,799 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0']
2025-09-11 11:27:01,799 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 11:27:03,062 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 11:27:03,062 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 11:27:03,158 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 11:27:03,439 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 11:27:03,439 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 11:27:03,440 - NetworkTopology - INFO - 线性拓扑创建完成
2025-09-11 11:27:03,440 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 4096 (方法: mstpd)
2025-09-11 11:27:03,440 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级4096 -> mstpd优先级1)
2025-09-11 11:27:13,519 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 11:27:13,520 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 8192 (方法: ovs)
2025-09-11 11:27:13,520 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 11:27:13,639 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 11:27:13,782 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-11 11:27:13,783 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 11:27:14,225 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:27:14,377 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Discarding 20000    128.2


2025-09-11 11:27:14,378 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 11:27:14,378 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:27:14,379 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 11:27:14,379 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:27:14,842 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:27:14,843 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:27:14,844 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:27:14,844 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:27:14,844 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:27:14,844 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:27:15,131 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.35秒
2025-09-11 11:27:15,589 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:27:15,743 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Discarding 20000    128.2


2025-09-11 11:27:15,744 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 11:27:15,744 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:27:15,744 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 11:27:15,744 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:27:16,217 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:27:16,218 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:27:16,219 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:27:16,219 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:27:16,219 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:27:16,219 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:27:16,507 - test_protocol_conformance - INFO - 使用端口br3进行状态转换测试
2025-09-11 11:27:16,507 - test_protocol_conformance - INFO - 禁用端口br3
2025-09-11 11:27:16,508 - FaultInjector_DUT - INFO - 断开链路: br3
2025-09-11 11:27:26,688 - FaultInjector_DUT - INFO - 链路已断开: br3
2025-09-11 11:27:32,105 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:27:32,407 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 20000    128.2


2025-09-11 11:27:32,408 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 11:27:32,408 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:27:32,408 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 11:27:32,409 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:27:33,022 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:27:33,022 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:27:33,023 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:27:33,023 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:27:33,023 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:27:33,023 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:27:33,311 - test_protocol_conformance - INFO - ✓ 端口br3已成功禁用
2025-09-11 11:27:33,311 - test_protocol_conformance - INFO - 重新启用端口br3并监控状态转换
2025-09-11 11:27:33,311 - FaultInjector_DUT - INFO - 恢复链路: br3
2025-09-11 11:27:33,477 - FaultInjector_DUT - INFO - 链路已恢复: br3
2025-09-11 11:27:33,921 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:27:34,073 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 11:27:34,074 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 11:27:34,074 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:27:34,074 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 11:27:34,074 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:27:34,546 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:27:34,546 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:27:34,547 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:27:34,547 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:27:34,548 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:27:34,548 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:27:34,835 - test_protocol_conformance - INFO - 端口br3状态转换: disabled
2025-09-11 11:27:37,254 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:27:37,409 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 11:27:37,410 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 11:27:37,411 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:27:37,411 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 11:27:37,411 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:27:37,870 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:27:37,870 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:27:37,871 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:27:37,871 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:27:37,872 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:27:37,872 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:27:38,159 - test_protocol_conformance - INFO - 端口br3状态转换: forwarding
2025-09-11 11:27:38,159 - test_protocol_conformance - INFO - 状态转换序列: ['disabled', 'forwarding']
2025-09-11 11:27:38,617 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:27:38,773 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 11:27:38,774 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 11:27:38,774 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:27:38,774 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 11:27:38,775 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:27:39,238 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:27:39,239 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:27:39,240 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:27:39,240 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:27:39,240 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:27:39,241 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:27:39,527 - test_protocol_conformance - INFO - ✓ 端口br3最终状态正确: forwarding
2025-09-11 11:27:39,527 - test_protocol_conformance - INFO - 端口状态转换测试完成
2025-09-11 11:27:39,528 - RSTPTest - INFO - 测试完成: test_port_state_transitions (耗时: 243.30秒)
2025-09-11 11:27:39,528 - RSTPTest - INFO - ============================================================

2025-09-11 11:27:39,530 - RSTPTest - INFO - ============================================================
2025-09-11 11:27:39,530 - RSTPTest - INFO - 开始测试: test_bpdu_propagation_and_keepalive
2025-09-11 11:27:39,530 - RSTPTest - INFO - ============================================================
2025-09-11 11:27:39,531 - test_protocol_conformance - INFO - 开始BPDU传播和保活机制测试
2025-09-11 11:27:39,531 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 11:27:39,531 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 11:27:39,531 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 11:27:39,532 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 11:27:39,532 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 11:27:39,532 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 11:27:39,532 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 11:27:39,532 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 11:27:39,532 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 11:27:40,043 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 11:27:40,043 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 11:27:40,043 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 11:27:40,198 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 11:27:41,282 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 11:27:41,282 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 11:27:41,282 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 11:27:41,283 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 11:27:41,283 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 11:27:41,758 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 11:27:42,231 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 11:27:42,232 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 11:27:42,427 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 11:27:42,428 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 11:27:42,428 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 11:27:42,428 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 11:27:42,428 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 11:27:42,428 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 11:27:42,429 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 11:27:42,429 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 11:27:53,108 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 11:27:57,674 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:27:57,822 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:27:57,823 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 11:27:57,823 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 11:27:57,823 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:27:57,823 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 11:27:59,409 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 11:28:00,689 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 11:28:00,689 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 11:28:00,785 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 11:28:01,064 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 11:28:01,065 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 11:28:01,065 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 11:28:01,065 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 11:28:01,065 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 11:28:01,065 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 11:28:01,066 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 11:28:01,066 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 11:28:31,410 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 11:30:05,452 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:30:15,533 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:30:15,533 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 11:30:15,533 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 11:30:15,534 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:30:15,534 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 11:31:20,615 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 11:32:17,196 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 11:32:17,197 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 11:32:17,293 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 11:32:22,566 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 11:32:22,566 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 11:32:22,566 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 11:32:22,567 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 4096 (方法: mstpd)
2025-09-11 11:32:22,567 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级4096 -> mstpd优先级1)
2025-09-11 11:32:22,713 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 11:32:22,714 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 8192 (方法: ovs)
2025-09-11 11:32:22,714 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 11:32:22,825 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 11:32:22,989 - NetworkTopology_TestNode2 - INFO - TestNode2: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-11 11:32:22,990 - NetworkTopology_TestNode2 - INFO - TestNode2: 执行mstpd设置优先级命令 (标准优先级12288 -> mstpd优先级3)
2025-09-11 11:32:33,069 - NetworkTopology_TestNode2 - INFO - TestNode2: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 11:32:33,070 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-11 11:32:33,070 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 11:32:33,483 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:32:33,635 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 11:32:33,636 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 11:32:33,637 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:32:33,637 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 11:32:33,637 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:32:34,096 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:32:34,097 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:32:34,098 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:32:34,098 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:32:34,098 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:32:34,098 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:32:34,386 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.32秒
2025-09-11 11:32:34,844 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:32:35,000 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 11:32:35,002 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 11:32:35,002 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:32:35,002 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 11:32:35,002 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:32:35,473 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:32:35,474 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:32:35,475 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:32:35,475 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:32:35,475 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:32:35,475 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:32:35,758 - test_protocol_conformance - INFO - Hello Time: 2秒
2025-09-11 11:32:35,758 - test_protocol_conformance - INFO - 开始捕获BPDU报文
2025-09-11 11:32:35,758 - test_protocol_conformance - INFO - 在端口br3上开始BPDU捕获
2025-09-11 11:32:35,759 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br3, 数量: 10)
2025-09-11 11:32:45,907 - RSTPAnalyzer_DUT - INFO - 捕获到 4 个BPDU包
2025-09-11 11:32:45,907 - test_protocol_conformance - INFO - 端口br3捕获到4个BPDU
2025-09-11 11:32:45,907 - test_protocol_conformance - INFO - 在端口br4上开始BPDU捕获
2025-09-11 11:32:45,908 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br4, 数量: 10)
2025-09-11 11:32:56,054 - RSTPAnalyzer_DUT - INFO - 捕获到 5 个BPDU包
2025-09-11 11:32:56,055 - test_protocol_conformance - INFO - 端口br4捕获到5个BPDU
2025-09-11 11:32:56,055 - test_protocol_conformance - INFO - 总共捕获到9个BPDU
2025-09-11 11:32:56,055 - test_protocol_conformance - INFO - 端口br3平均BPDU间隔: 2.34秒
2025-09-11 11:32:56,055 - test_protocol_conformance - INFO - ✓ 端口br3BPDU周期性验证通过
2025-09-11 11:32:56,055 - test_protocol_conformance - INFO - 端口br4平均BPDU间隔: 2.00秒
2025-09-11 11:32:56,056 - test_protocol_conformance - INFO - ✓ 端口br4BPDU周期性验证通过
2025-09-11 11:32:56,056 - test_protocol_conformance - INFO - 端口br3BPDU: 时间戳=11:32:40.401088, RSTP=False
2025-09-11 11:32:56,056 - test_protocol_conformance - INFO - 端口br3BPDU: 时间戳=11:32:42.404588, RSTP=False
2025-09-11 11:32:56,056 - test_protocol_conformance - INFO - 端口br3BPDU: 时间戳=11:32:44.906578, RSTP=False
2025-09-11 11:32:56,056 - test_protocol_conformance - INFO - 端口br4BPDU: 时间戳=11:32:49.886489, RSTP=False
2025-09-11 11:32:56,057 - test_protocol_conformance - INFO - 端口br4BPDU: 时间戳=11:32:51.887550, RSTP=False
2025-09-11 11:32:56,057 - test_protocol_conformance - INFO - 端口br4BPDU: 时间戳=11:32:53.887533, RSTP=False
2025-09-11 11:32:56,057 - test_protocol_conformance - INFO - ✓ BPDU传播和保活机制验证完成
2025-09-11 11:32:56,058 - RSTPTest - INFO - 测试完成: test_bpdu_propagation_and_keepalive (耗时: 316.53秒)
2025-09-11 11:32:56,058 - RSTPTest - INFO - ============================================================

2025-09-11 11:32:56,059 - RSTPTest - INFO - ============================================================
2025-09-11 11:32:56,060 - RSTPTest - INFO - 开始测试: test_disabled_port_exclusion
2025-09-11 11:32:56,060 - RSTPTest - INFO - ============================================================
2025-09-11 11:32:56,060 - test_protocol_conformance - INFO - 开始禁用端口排除测试
2025-09-11 11:32:56,060 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 11:32:56,061 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 11:32:56,061 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 11:32:56,061 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 11:32:56,061 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 11:32:56,061 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 11:32:56,061 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 11:32:56,061 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 11:32:56,062 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 11:32:56,570 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 11:32:56,570 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 11:32:56,570 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 11:32:56,725 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 11:32:57,801 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 11:32:57,801 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 11:32:57,802 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 11:32:57,802 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 11:32:57,802 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 11:32:58,281 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 11:32:58,761 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 11:32:58,762 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 11:32:58,953 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 11:32:58,953 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 11:32:58,954 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 11:32:58,954 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 11:32:58,954 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 11:32:58,954 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 11:32:58,954 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 11:32:58,954 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 11:32:59,497 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 11:33:04,101 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:33:04,241 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:33:04,241 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 11:33:04,241 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 11:33:04,242 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:33:04,242 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 11:33:05,542 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 11:33:06,839 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 11:33:06,840 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 11:33:06,937 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 11:33:07,222 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 11:33:07,222 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 11:33:07,222 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 11:33:07,223 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 11:33:07,223 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 11:33:07,223 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 11:33:07,224 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 11:33:07,224 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 11:33:22,880 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 11:33:27,512 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:33:27,660 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:33:27,660 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 11:33:27,661 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 11:33:27,661 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:33:27,661 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 11:33:28,915 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 11:33:30,181 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 11:33:30,182 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 11:33:30,278 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 11:33:30,559 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 11:33:30,559 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 11:33:30,560 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 11:33:30,560 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 4096 (方法: mstpd)
2025-09-11 11:33:30,560 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级4096 -> mstpd优先级1)
2025-09-11 11:33:30,693 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 11:33:30,693 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 8192 (方法: ovs)
2025-09-11 11:33:30,693 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 11:33:30,804 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 11:33:30,973 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-11 11:33:30,974 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 11:33:31,414 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:33:31,567 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 11:33:31,568 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 11:33:31,568 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:33:31,569 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 11:33:31,569 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:33:32,037 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:33:32,037 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:33:32,038 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:33:32,039 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:33:32,039 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:33:32,039 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:33:32,321 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.35秒
2025-09-11 11:33:32,796 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:33:32,955 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 11:33:32,956 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 11:33:32,957 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:33:32,957 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 11:33:32,957 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:33:33,432 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:33:33,433 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:33:33,434 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:33:33,434 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:33:33,434 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:33:33,434 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:33:33,721 - test_protocol_conformance - INFO - 所有端口信息: {'br3': PortInfo(name='br3', role=<PortRole.ROOT: 'root'>, state=<PortState.FORWARDING: 'forwarding'>, path_cost=0, designated_bridge='', designated_port=''), 'br4': PortInfo(name='br4', role=<PortRole.ALTERNATE: 'alternate'>, state=<PortState.DISCARDING: 'discarding'>, path_cost=0, designated_bridge='', designated_port=''), 'SE_ETH2': PortInfo(name='SE_ETH2', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')}
2025-09-11 11:33:33,878 - test_protocol_conformance - INFO - RSTP show输出 (code=0): 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 11:33:33,879 - test_protocol_conformance - INFO - 初始活动端口: ['br3', 'br4']
2025-09-11 11:33:33,880 - test_protocol_conformance - INFO - 选择端口br4进行禁用测试
2025-09-11 11:33:33,880 - test_protocol_conformance - INFO - 禁用端口br4
2025-09-11 11:33:33,880 - FaultInjector_DUT - INFO - 断开链路: br4
2025-09-11 11:33:43,998 - FaultInjector_DUT - INFO - 链路已断开: br4
2025-09-11 11:33:43,998 - test_protocol_conformance - INFO - 禁用命令结果: ('', '', 0)
2025-09-11 11:33:44,151 - test_protocol_conformance - INFO - 端口br4配置: stdout='1
1
{rstp-enable="true", rstp-port-admin-edge="true", rstp-port-auto-edge="true", stp-path-cost="20000"}
', stderr='', code=0
2025-09-11 11:33:59,566 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:33:59,728 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  40000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Disabled   Discarding 20000    128.1
  br3        Root       Forwarding 20000    128.2


2025-09-11 11:33:59,729 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 11:33:59,729 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:33:59,729 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 11:33:59,730 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:34:00,243 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:34:00,244 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:34:00,245 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:34:00,245 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:34:00,245 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:34:00,245 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:34:00,537 - test_protocol_conformance - INFO - 禁用后所有端口状态: [('br3', 'forwarding'), ('br4', 'disabled'), ('SE_ETH2', 'disabled')]
2025-09-11 11:34:00,537 - test_protocol_conformance - INFO - 端口br4状态: disabled, 角色: alternate
2025-09-11 11:34:00,538 - test_protocol_conformance - INFO - 禁用后活动端口: ['br3']
2025-09-11 11:34:00,538 - test_protocol_conformance - INFO - 活动端口数量: 1, 初始活动端口数量: 2
2025-09-11 11:34:00,538 - test_protocol_conformance - INFO - 禁用后端口角色分布: {<PortRole.ROOT: 'root'>: ['br3']}
2025-09-11 11:34:01,001 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:34:01,158 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  40000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Disabled   Discarding 20000    128.1
  br3        Root       Forwarding 20000    128.2


2025-09-11 11:34:01,159 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 11:34:01,159 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:34:01,159 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 11:34:01,160 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:34:01,623 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:34:01,624 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:34:01,625 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:34:01,625 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:34:01,625 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:34:01,626 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:34:01,912 - RSTPAnalyzer_DUT - INFO - Root ID为unknown，判定为非根桥
2025-09-11 11:34:01,913 - test_protocol_conformance - INFO - 重新启用端口br4
2025-09-11 11:34:01,913 - FaultInjector_DUT - INFO - 恢复链路: br4
2025-09-11 11:34:02,079 - FaultInjector_DUT - INFO - 链路已恢复: br4
2025-09-11 11:34:17,494 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:34:17,645 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 11:34:17,647 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 11:34:17,647 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:34:17,647 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 11:34:17,648 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:34:18,104 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:34:18,104 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:34:18,105 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:34:18,105 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:34:18,105 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:34:18,106 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:34:18,392 - test_protocol_conformance - INFO - ✓ 端口br4已重新启用，状态: discarding
2025-09-11 11:34:18,393 - test_protocol_conformance - INFO - ✓ 禁用端口排除测试完成
2025-09-11 11:34:18,394 - RSTPTest - INFO - 测试完成: test_disabled_port_exclusion (耗时: 82.33秒)
2025-09-11 11:34:18,394 - RSTPTest - INFO - ============================================================

2025-09-11 11:34:18,396 - RSTPTest - INFO - ============================================================
2025-09-11 11:34:18,396 - RSTPTest - INFO - 开始测试: test_topology_change_notification
2025-09-11 11:34:18,396 - RSTPTest - INFO - ============================================================
2025-09-11 11:34:18,396 - test_protocol_conformance - INFO - 开始拓扑变更通知测试
2025-09-11 11:34:18,397 - test_protocol_conformance - INFO - === 步骤1: 创建多网桥环形拓扑 ===
2025-09-11 11:34:19,240 - test_protocol_conformance - INFO - 创建网桥 SE_ETH2 (优先级: 32768)
2025-09-11 11:34:19,664 - test_protocol_conformance - INFO - 创建网桥 rstp2 (优先级: 36864)
2025-09-11 11:34:20,089 - test_protocol_conformance - INFO - 创建网桥 rstp3 (优先级: 40960)
2025-09-11 11:34:20,781 - test_protocol_conformance - INFO - ✓ 连接 rstp1 <-> rstp2
2025-09-11 11:34:21,532 - test_protocol_conformance - INFO - ✓ 连接 rstp2 <-> rstp3
2025-09-11 11:34:22,264 - test_protocol_conformance - INFO - ✓ 连接 rstp3 <-> rstp1
2025-09-11 11:34:22,264 - test_protocol_conformance - INFO - 等待RSTP初始收敛...
2025-09-11 11:34:32,265 - test_protocol_conformance - INFO - === 步骤2: 验证初始RSTP状态 ===
2025-09-11 11:34:32,322 - test_protocol_conformance - INFO - 
SE_ETH2 初始RSTP状态:
2025-09-11 11:34:32,323 - test_protocol_conformance - INFO -   ---- SE_ETH2 ----
2025-09-11 11:34:32,323 - test_protocol_conformance - INFO -   Root ID:
2025-09-11 11:34:32,323 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-11 11:34:32,323 - test_protocol_conformance - INFO -     stp-system-id   f6:f7:98:29:50:40
2025-09-11 11:34:32,324 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-11 11:34:32,324 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-11 11:34:32,324 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-11 11:34:32,324 - test_protocol_conformance - INFO -     This bridge is the root
2025-09-11 11:34:32,324 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-11 11:34:32,324 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-11 11:34:32,324 - test_protocol_conformance - INFO -     stp-system-id   f6:f7:98:29:50:40
2025-09-11 11:34:32,325 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-11 11:34:32,325 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-11 11:34:32,325 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-11 11:34:32,325 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-11 11:34:32,325 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-11 11:34:32,325 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-11 11:34:32,422 - test_protocol_conformance - INFO - 
rstp2 初始RSTP状态:
2025-09-11 11:34:32,422 - test_protocol_conformance - INFO -   ---- rstp2 ----
2025-09-11 11:34:32,423 - test_protocol_conformance - INFO -   Root ID:
2025-09-11 11:34:32,423 - test_protocol_conformance - INFO -     stp-priority    36864
2025-09-11 11:34:32,423 - test_protocol_conformance - INFO -     stp-system-id   06:01:f3:ef:5c:4f
2025-09-11 11:34:32,423 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-11 11:34:32,423 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-11 11:34:32,424 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-11 11:34:32,424 - test_protocol_conformance - INFO -     This bridge is the root
2025-09-11 11:34:32,424 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-11 11:34:32,424 - test_protocol_conformance - INFO -     stp-priority    36864
2025-09-11 11:34:32,425 - test_protocol_conformance - INFO -     stp-system-id   06:01:f3:ef:5c:4f
2025-09-11 11:34:32,425 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-11 11:34:32,425 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-11 11:34:32,425 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-11 11:34:32,425 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-11 11:34:32,425 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-11 11:34:32,426 - test_protocol_conformance - INFO -     veth12b    Designated Forwarding 2000     128.1
2025-09-11 11:34:32,426 - test_protocol_conformance - INFO -     veth23a    Designated Forwarding 2000     128.2
2025-09-11 11:34:32,426 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-11 11:34:32,426 - test_protocol_conformance - INFO -   → 有转发端口
2025-09-11 11:34:32,521 - test_protocol_conformance - INFO - 
rstp3 初始RSTP状态:
2025-09-11 11:34:32,522 - test_protocol_conformance - INFO -   ---- rstp3 ----
2025-09-11 11:34:32,522 - test_protocol_conformance - INFO -   Root ID:
2025-09-11 11:34:32,522 - test_protocol_conformance - INFO -     stp-priority    36864
2025-09-11 11:34:32,522 - test_protocol_conformance - INFO -     stp-system-id   06:01:f3:ef:5c:4f
2025-09-11 11:34:32,523 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-11 11:34:32,523 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-11 11:34:32,523 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-11 11:34:32,523 - test_protocol_conformance - INFO -     root-port       veth23b
2025-09-11 11:34:32,523 - test_protocol_conformance - INFO -     root-path-cost  2000
2025-09-11 11:34:32,523 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-11 11:34:32,523 - test_protocol_conformance - INFO -     stp-priority    40960
2025-09-11 11:34:32,524 - test_protocol_conformance - INFO -     stp-system-id   16:d2:1f:6b:3a:49
2025-09-11 11:34:32,524 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-11 11:34:32,524 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-11 11:34:32,524 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-11 11:34:32,524 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-11 11:34:32,524 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-11 11:34:32,525 - test_protocol_conformance - INFO -     veth23b    Root       Forwarding 2000     128.1
2025-09-11 11:34:32,525 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-11 11:34:32,525 - test_protocol_conformance - INFO -   → 有转发端口
2025-09-11 11:34:32,525 - test_protocol_conformance - INFO - === 步骤3: 分析网络拓扑 ===
2025-09-11 11:34:32,525 - test_protocol_conformance - INFO - ✓ SE_ETH2 是根桥
2025-09-11 11:34:32,525 - test_protocol_conformance - INFO - ✓ rstp2 是根桥
2025-09-11 11:34:32,526 - test_protocol_conformance - INFO - === 步骤4: 触发拓扑变更 ===
2025-09-11 11:34:32,526 - test_protocol_conformance - INFO - 断开活动端口: veth31a
2025-09-11 11:34:37,878 - test_protocol_conformance - INFO - ✓ rstp3 状态已变化
2025-09-11 11:34:42,972 - test_protocol_conformance - INFO - === 步骤5: 验证拓扑变更 ===
2025-09-11 11:34:43,024 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: veth12a, 数量: 5)
2025-09-11 11:34:48,172 - RSTPAnalyzer_DUT - INFO - 捕获到 2 个BPDU包
2025-09-11 11:34:48,173 - test_protocol_conformance - INFO - 在 veth12a 捕获到 2 个BPDU
2025-09-11 11:34:48,173 - test_protocol_conformance - INFO - === 步骤6: 最终验证 ===
2025-09-11 11:34:48,173 - test_protocol_conformance - INFO - ✓ 测试通过：检测到拓扑变更
2025-09-11 11:34:48,270 - test_protocol_conformance - INFO - 
========== SE_ETH2 最终状态 ==========
2025-09-11 11:34:48,270 - test_protocol_conformance - INFO - ---- SE_ETH2 ----
2025-09-11 11:34:48,270 - test_protocol_conformance - INFO - Root ID:
2025-09-11 11:34:48,270 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-11 11:34:48,271 - test_protocol_conformance - INFO -   stp-system-id   f6:f7:98:29:50:40
2025-09-11 11:34:48,271 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-11 11:34:48,271 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-11 11:34:48,271 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-11 11:34:48,271 - test_protocol_conformance - INFO -   This bridge is the root
2025-09-11 11:34:48,271 - test_protocol_conformance - INFO - Bridge ID:
2025-09-11 11:34:48,272 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-11 11:34:48,272 - test_protocol_conformance - INFO -   stp-system-id   f6:f7:98:29:50:40
2025-09-11 11:34:48,272 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-11 11:34:48,272 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-11 11:34:48,272 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-11 11:34:48,272 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-11 11:34:48,273 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-11 11:34:48,366 - test_protocol_conformance - INFO - 
========== rstp2 最终状态 ==========
2025-09-11 11:34:48,366 - test_protocol_conformance - INFO - ---- rstp2 ----
2025-09-11 11:34:48,367 - test_protocol_conformance - INFO - Root ID:
2025-09-11 11:34:48,367 - test_protocol_conformance - INFO -   stp-priority    36864
2025-09-11 11:34:48,367 - test_protocol_conformance - INFO -   stp-system-id   06:01:f3:ef:5c:4f
2025-09-11 11:34:48,367 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-11 11:34:48,367 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-11 11:34:48,368 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-11 11:34:48,368 - test_protocol_conformance - INFO -   This bridge is the root
2025-09-11 11:34:48,368 - test_protocol_conformance - INFO - Bridge ID:
2025-09-11 11:34:48,368 - test_protocol_conformance - INFO -   stp-priority    36864
2025-09-11 11:34:48,368 - test_protocol_conformance - INFO -   stp-system-id   06:01:f3:ef:5c:4f
2025-09-11 11:34:48,368 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-11 11:34:48,369 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-11 11:34:48,369 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-11 11:34:48,369 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-11 11:34:48,369 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-11 11:34:48,369 - test_protocol_conformance - INFO -   veth12b    Designated Forwarding 2000     128.1
2025-09-11 11:34:48,369 - test_protocol_conformance - INFO -   veth23a    Designated Forwarding 2000     128.2
2025-09-11 11:34:48,466 - test_protocol_conformance - INFO - 
========== rstp3 最终状态 ==========
2025-09-11 11:34:48,466 - test_protocol_conformance - INFO - ---- rstp3 ----
2025-09-11 11:34:48,467 - test_protocol_conformance - INFO - Root ID:
2025-09-11 11:34:48,467 - test_protocol_conformance - INFO -   stp-priority    36864
2025-09-11 11:34:48,467 - test_protocol_conformance - INFO -   stp-system-id   06:01:f3:ef:5c:4f
2025-09-11 11:34:48,467 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-11 11:34:48,467 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-11 11:34:48,467 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-11 11:34:48,468 - test_protocol_conformance - INFO -   root-port       veth23b
2025-09-11 11:34:48,468 - test_protocol_conformance - INFO -   root-path-cost  2000
2025-09-11 11:34:48,468 - test_protocol_conformance - INFO - Bridge ID:
2025-09-11 11:34:48,468 - test_protocol_conformance - INFO -   stp-priority    40960
2025-09-11 11:34:48,468 - test_protocol_conformance - INFO -   stp-system-id   16:d2:1f:6b:3a:49
2025-09-11 11:34:48,468 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-11 11:34:48,469 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-11 11:34:48,469 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-11 11:34:48,469 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-11 11:34:48,469 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-11 11:34:48,469 - test_protocol_conformance - INFO -   veth23b    Root       Forwarding 2000     128.1
2025-09-11 11:34:48,469 - test_protocol_conformance - INFO -   veth31a    Designated Forwarding 2000     128.2
2025-09-11 11:34:48,469 - test_protocol_conformance - INFO - 
=== 诊断信息 ===
2025-09-11 11:34:48,570 - test_protocol_conformance - INFO - 系统日志中的STP/RSTP信息:
2025-09-11 11:34:48,571 - test_protocol_conformance - INFO - [605642.971822] rstp2: entered promiscuous mode
[605643.395316] rstp3: entered promiscuous mode

2025-09-11 11:34:48,671 - test_protocol_conformance - INFO - OVS日志中的拓扑变更信息:
2025-09-11 11:34:48,672 - test_protocol_conformance - INFO - 2025-09-11T03:34:41.607Z|29514|bridge|WARN|br0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-11T03:34:41.607Z|29515|bridge|WARN|rstp0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-11T03:34:41.619Z|29519|bridge|WARN|br0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-11T03:34:41.619Z|29520|bridge|WARN|rstp0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-11T03:34:46.761Z|29524|bridge|WARN|br0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-11T03:34:46.761Z|29525|bridge|WARN|rstp0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-11T03:34:51.759Z|29529|bridge|WARN|br0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-11T03:34:51.759Z|29530|bridge|WARN|rstp0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP

2025-09-11 11:34:48,672 - test_protocol_conformance - INFO - === 清理测试环境 ===
2025-09-11 11:34:49,323 - test_protocol_conformance - INFO - 拓扑变更通知测试完成
2025-09-11 11:34:49,324 - RSTPTest - INFO - 测试完成: test_topology_change_notification (耗时: 30.93秒)
2025-09-11 11:34:49,324 - RSTPTest - INFO - ============================================================

2025-09-11 11:34:49,325 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-11 11:34:49,325 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-11 11:34:49,325 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-11 11:34:49,461 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-11 11:34:49,461 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-11 11:34:49,582 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-11 11:34:49,583 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-11 11:34:49,718 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-11 11:34:49,718 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-11 11:34:49,719 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 11:34:49,719 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 11:34:49,719 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-11 11:34:49,720 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-11 11:34:49,776 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-11 11:34:49,776 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-11 11:34:49,959 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-11 11:34:49,959 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-11 11:34:49,959 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-11 11:34:49,959 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-11 11:34:49,959 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-11 11:34:50,014 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-11 11:34:50,015 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-11 11:34:50,191 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-11 11:34:50,191 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-11 11:34:50,191 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-11 11:34:50,192 - RSTPTest - INFO - ============================================================
2025-09-11 11:34:50,192 - RSTPTest - INFO - 开始测试: test_root_bridge_hijack_attack
2025-09-11 11:34:50,192 - RSTPTest - INFO - ============================================================
2025-09-11 11:34:50,193 - test_security - INFO - 开始根网桥劫持攻击测试
2025-09-11 11:34:50,193 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 11:34:50,193 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 11:34:50,193 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 11:34:50,193 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 11:34:50,194 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 11:34:50,194 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 11:34:50,194 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 11:34:50,194 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 11:34:50,194 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 11:34:50,690 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 11:34:50,691 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 11:34:50,691 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 11:34:50,846 - NetworkTopology - INFO - DUT: 创建新网桥SE_ETH2
2025-09-11 11:34:52,034 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 11:34:52,035 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 11:34:52,035 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 11:34:52,035 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 11:34:52,035 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 11:34:52,496 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 11:34:52,937 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 11:34:52,937 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 11:34:53,111 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 11:34:53,112 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 11:34:53,112 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 11:34:53,112 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 11:34:53,112 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 11:34:53,113 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 11:34:53,113 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 11:34:53,113 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 11:34:53,638 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 11:34:58,212 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:34:58,366 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:34:58,366 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 11:34:58,367 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 11:34:58,367 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:34:58,367 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 11:34:59,617 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 11:35:00,895 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 11:35:00,895 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 11:35:00,989 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 11:35:01,272 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 11:35:01,272 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 11:35:01,272 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 11:35:01,273 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 11:35:01,273 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 11:35:01,273 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 11:35:01,273 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 11:35:01,274 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 11:35:01,801 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 11:35:06,417 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:35:06,553 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:35:06,553 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 11:35:06,553 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 11:35:06,554 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:35:06,554 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 11:35:07,794 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 11:35:09,052 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 11:35:09,052 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 11:35:09,149 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 11:35:09,420 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 11:35:09,420 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 11:35:09,420 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 11:35:15,038 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:35:15,193 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Root       Forwarding 20000    128.1
  br4        Alternate  Discarding 20000    128.2


2025-09-11 11:35:15,194 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 11:35:15,194 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:35:15,195 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 11:35:15,195 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:35:15,654 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:35:15,654 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:35:15,655 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:35:15,656 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:35:15,656 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:35:15,656 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:35:15,944 - RSTPAnalyzer_DUT - INFO - Root ID为unknown，判定为非根桥
2025-09-11 11:35:15,969 - RSTPTest - INFO - 测试完成: test_root_bridge_hijack_attack (耗时: 25.78秒)
2025-09-11 11:35:15,970 - RSTPTest - INFO - ============================================================

2025-09-11 11:35:15,971 - RSTPTest - INFO - ============================================================
2025-09-11 11:35:15,972 - RSTPTest - INFO - 开始测试: test_bpdu_flood_attack
2025-09-11 11:35:15,972 - RSTPTest - INFO - ============================================================
2025-09-11 11:35:15,972 - test_security - INFO - 开始BPDU洪泛攻击测试
2025-09-11 11:35:15,973 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 11:35:15,973 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 11:35:15,973 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 11:35:15,973 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 11:35:15,974 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 11:35:15,974 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 11:35:15,974 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 11:35:15,974 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 11:35:15,974 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 11:35:16,475 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 11:35:16,475 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 11:35:16,475 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 11:35:16,630 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 11:35:17,710 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 11:35:17,710 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 11:35:17,711 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 11:35:17,711 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 11:35:17,711 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 11:35:18,186 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 11:35:18,663 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 11:35:18,664 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 11:35:18,855 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 11:35:18,855 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 11:35:18,855 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 11:35:18,856 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 11:35:18,856 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 11:35:18,856 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 11:35:18,856 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 11:35:18,856 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 11:35:19,395 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 11:35:23,966 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:35:24,111 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:35:24,111 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 11:35:24,111 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 11:35:24,112 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:35:24,112 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 11:35:25,379 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 11:35:26,677 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 11:35:26,677 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 11:35:26,772 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 11:35:27,059 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 11:35:27,059 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 11:35:27,060 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 11:35:27,060 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 11:35:27,060 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 11:35:27,060 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 11:35:27,060 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 11:35:27,060 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 11:35:27,589 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 11:35:32,196 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:35:32,332 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:35:32,332 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 11:35:32,332 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 11:35:32,333 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:35:32,333 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 11:35:33,589 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 11:35:34,852 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 11:35:34,853 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 11:35:34,946 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 11:35:35,239 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 11:35:35,239 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 11:35:35,239 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 11:35:40,455 - test_security - INFO - 初始CPU使用率: 25.0%
2025-09-11 11:35:50,818 - test_security - INFO - 洪泛时CPU使用率: 50.0%
2025-09-11 11:35:51,280 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:35:51,432 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 11:35:51,433 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 11:35:51,434 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:35:51,434 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 11:35:51,434 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:35:51,903 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:35:51,903 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:35:51,904 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:35:51,904 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:35:51,905 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:35:51,905 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:35:52,207 - test_security - INFO - 网络在BPDU洪泛下保持稳定
2025-09-11 11:35:52,208 - test_security - INFO - BPDU洪泛攻击测试完成
2025-09-11 11:35:52,208 - RSTPTest - INFO - 测试完成: test_bpdu_flood_attack (耗时: 36.24秒)
2025-09-11 11:35:52,209 - RSTPTest - INFO - ============================================================

2025-09-11 11:35:52,210 - RSTPTest - INFO - ============================================================
2025-09-11 11:35:52,210 - RSTPTest - INFO - 开始测试: test_topology_change_attack
2025-09-11 11:35:52,210 - RSTPTest - INFO - ============================================================
2025-09-11 11:35:52,211 - test_security - INFO - 开始拓扑变更攻击测试
2025-09-11 11:35:52,212 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 11:35:52,212 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 11:35:52,212 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 11:35:52,212 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 11:35:52,212 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 11:35:52,213 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 11:35:52,213 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 11:35:52,213 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 11:35:52,213 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 11:35:52,735 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 11:35:52,735 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 11:35:52,736 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 11:35:52,890 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 11:35:53,966 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 11:35:53,966 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 11:35:53,966 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 11:35:53,967 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 11:35:53,967 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 11:35:54,438 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 11:35:54,914 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 11:35:54,915 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 11:35:55,106 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 11:35:55,106 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 11:35:55,107 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 11:35:55,107 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 11:35:55,107 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 11:35:55,107 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 11:35:55,108 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 11:35:55,108 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 11:35:55,630 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 11:36:00,202 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:36:00,354 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:36:00,354 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 11:36:00,354 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 11:36:00,354 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:36:00,355 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 11:36:01,619 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 11:36:02,876 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 11:36:02,877 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 11:36:02,973 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 11:36:03,249 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 11:36:03,249 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 11:36:03,249 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 11:36:03,249 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 11:36:03,250 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 11:36:03,250 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 11:36:03,250 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 11:36:03,250 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 11:36:03,798 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 11:36:08,390 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:36:08,533 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:36:08,534 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 11:36:08,534 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 11:36:08,534 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:36:08,534 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 11:36:09,790 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 11:36:11,075 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 11:36:11,076 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 11:36:11,170 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 11:36:11,453 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 11:36:11,454 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 11:36:11,454 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 11:36:16,972 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:36:17,124 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 11:36:17,125 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 11:36:17,125 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:36:17,125 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 11:36:17,126 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:36:17,586 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:36:17,586 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:36:17,588 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:36:17,588 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:36:17,588 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:36:17,588 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:36:17,874 - test_security - INFO - 触发快速拓扑变更...
2025-09-11 11:36:36,739 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:36:36,888 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 11:36:36,889 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 11:36:36,889 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:36:36,890 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 11:36:36,890 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:36:37,353 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:36:37,353 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:36:37,354 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:36:37,355 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:36:37,355 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:36:37,355 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:36:37,646 - test_security - INFO - 检测到0次拓扑变更
2025-09-11 11:36:38,112 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:36:38,268 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 11:36:38,269 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 11:36:38,269 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:36:38,269 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 11:36:38,269 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:36:38,740 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:36:38,741 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:36:38,742 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:36:38,742 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:36:38,742 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:36:38,742 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:36:39,030 - test_security - INFO - 网络在频繁拓扑变更后保持稳定
2025-09-11 11:36:39,030 - test_security - INFO - 拓扑变更攻击测试完成
2025-09-11 11:36:39,031 - RSTPTest - INFO - 测试完成: test_topology_change_attack (耗时: 46.82秒)
2025-09-11 11:36:39,031 - RSTPTest - INFO - ============================================================

2025-09-11 11:36:39,033 - RSTPTest - INFO - ============================================================
2025-09-11 11:36:39,033 - RSTPTest - INFO - 开始测试: test_mac_spoofing
2025-09-11 11:36:39,033 - RSTPTest - INFO - ============================================================
2025-09-11 11:36:39,034 - test_security - INFO - 开始MAC地址欺骗测试
2025-09-11 11:36:39,034 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 11:36:39,034 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 11:36:39,034 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 11:36:39,034 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 11:36:39,035 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 11:36:39,035 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 11:36:39,035 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 11:36:39,035 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 11:36:39,035 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 11:36:39,557 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 11:36:39,557 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 11:36:39,557 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 11:36:39,717 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 11:36:40,824 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 11:36:40,825 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 11:36:40,825 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 11:36:40,825 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 11:36:40,825 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 11:36:41,312 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 11:36:41,789 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 11:36:41,790 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 11:36:41,981 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 11:36:41,981 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 11:36:41,982 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 11:36:41,982 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 11:36:41,982 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 11:36:41,982 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 11:36:41,983 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 11:36:41,983 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 11:36:42,494 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 11:36:47,085 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:36:47,214 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:36:47,214 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 11:36:47,214 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 11:36:47,215 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:36:47,215 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 11:36:48,486 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 11:36:49,752 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 11:36:49,753 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 11:36:49,848 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 11:36:50,117 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 11:36:50,117 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 11:36:50,118 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 11:36:50,118 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 11:36:50,118 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 11:36:50,118 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 11:36:50,118 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 11:36:50,118 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 11:36:50,610 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 11:36:55,190 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:36:55,337 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:36:55,338 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 11:36:55,338 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 11:36:55,338 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:36:55,339 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 11:36:56,592 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 11:36:57,829 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 11:36:57,829 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 11:36:57,925 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 11:36:58,197 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 11:36:58,198 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 11:36:58,198 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 11:37:03,250 - test_security - INFO - DUT MAC地址: 90:12:10:b5:7d:f7
2025-09-11 11:37:03,250 - test_security - INFO - 尝试MAC地址欺骗...
2025-09-11 11:37:09,215 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:37:09,371 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 11:37:09,372 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 11:37:09,372 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:37:09,372 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 11:37:09,372 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:37:09,836 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:37:09,837 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:37:09,838 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:37:09,838 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:37:09,838 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:37:09,839 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:37:10,125 - test_security - INFO - 网络对MAC欺骗具有抗性
2025-09-11 11:37:16,753 - test_security - INFO - MAC地址欺骗测试完成
2025-09-11 11:37:16,754 - RSTPTest - INFO - 测试完成: test_mac_spoofing (耗时: 37.72秒)
2025-09-11 11:37:16,754 - RSTPTest - INFO - ============================================================

2025-09-11 11:37:16,755 - RSTPTest - INFO - ============================================================
2025-09-11 11:37:16,756 - RSTPTest - INFO - 开始测试: test_port_security
2025-09-11 11:37:16,756 - RSTPTest - INFO - ============================================================
2025-09-11 11:37:16,756 - test_security - INFO - 开始端口安全测试
2025-09-11 11:37:16,808 - test_security - WARNING - 未检测到任何端口安全功能
2025-09-11 11:37:16,809 - RSTPTest - INFO - 测试完成: test_port_security (耗时: 0.05秒)
2025-09-11 11:37:16,809 - RSTPTest - INFO - ============================================================

2025-09-11 11:37:16,810 - RSTPTest - INFO - ============================================================
2025-09-11 11:37:16,810 - RSTPTest - INFO - 开始测试: test_bpdu_filter_functionality
2025-09-11 11:37:16,810 - RSTPTest - INFO - ============================================================
2025-09-11 11:37:16,811 - test_security - INFO - 开始BPDU过滤器功能测试
2025-09-11 11:37:16,856 - NetworkTopology - INFO - 创建RSTP线性拓扑...
2025-09-11 11:37:16,856 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 11:37:16,857 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 11:37:16,857 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 11:37:16,857 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 11:37:16,858 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 11:37:16,858 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 11:37:16,858 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 11:37:16,858 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 11:37:17,388 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 11:37:17,389 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 11:37:17,389 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 11:37:17,544 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 11:37:18,612 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"32768
2025-09-11 11:37:18,612 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 11:37:18,612 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 11:37:18,613 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br4']
2025-09-11 11:37:18,613 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 11:37:19,097 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 11:37:19,097 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 11:37:19,289 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 11:37:19,289 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 11:37:19,289 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 11:37:19,290 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 11:37:19,290 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 11:37:19,290 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 11:37:19,290 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 11:37:19,291 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 11:37:31,886 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 11:37:56,371 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:38:06,447 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:38:06,448 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 11:38:06,448 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 11:38:06,448 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:38:06,449 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 11:39:09,184 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 11:40:02,928 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 11:40:02,929 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 11:40:03,025 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 11:40:11,327 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 11:40:11,328 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 11:40:11,328 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 11:40:11,328 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 11:40:11,328 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 11:40:11,328 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 11:40:11,329 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 11:40:11,329 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 11:40:11,845 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 11:40:16,428 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:40:16,556 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:40:16,556 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 11:40:16,556 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 11:40:16,556 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0']
2025-09-11 11:40:16,556 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 11:40:17,755 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 11:40:17,756 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 11:40:17,853 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 11:40:18,114 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 11:40:18,114 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 11:40:18,114 - NetworkTopology - INFO - 线性拓扑创建完成
2025-09-11 11:40:23,247 - test_security - WARNING - BPDU包统计命令执行失败: 
2025-09-11 11:40:23,247 - test_security - INFO - 启用过滤器前端口 eth2 BPDU数量: 0
2025-09-11 11:40:23,390 - test_security - INFO - 在端口 eth2 启用BPDU过滤器
2025-09-11 11:40:33,519 - test_security - WARNING - BPDU包统计命令执行失败: 
2025-09-11 11:40:33,519 - test_security - INFO - 启用过滤器后端口 eth2 BPDU数量: 0
2025-09-11 11:40:33,519 - test_security - INFO - BPDU过滤器功能正常：BPDU发送已停止或减少
2025-09-11 11:40:33,519 - test_security - INFO - 测试向过滤端口发送外部BPDU
2025-09-11 11:40:52,951 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:40:53,103 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 11:40:53,104 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 11:40:53,104 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:40:53,105 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 11:40:53,105 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:40:53,561 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:40:53,561 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:40:53,562 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:40:53,562 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:40:53,562 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:40:53,562 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:40:53,850 - test_security - INFO - BPDU过滤器功能正常：外部BPDU被忽略，网络保持稳定
2025-09-11 11:40:53,851 - test_security - INFO - 测试BPDU过滤器错误配置场景
2025-09-11 11:40:54,004 - test_security - WARNING - OVS设置BPDU过滤器失败，尝试使用系统文件方法
2025-09-11 11:40:54,102 - test_security - ERROR - 启用BPDU过滤器失败: BPDU过滤器配置失败: 
2025-09-11 11:40:54,102 - test_security - ERROR - BPDU过滤器错误配置测试失败: BPDU过滤器配置失败: 
2025-09-11 11:40:54,390 - test_security - WARNING - 清理命令执行失败: echo 0 > /sys/class/net/SE_ETH2/bridge/ports/eth2/bpdu_filter, 错误: 
2025-09-11 11:40:54,391 - test_security - INFO - BPDU过滤器功能测试完成
2025-09-11 11:40:54,391 - RSTPTest - INFO - 测试完成: test_bpdu_filter_functionality (耗时: 217.58秒)
2025-09-11 11:40:54,392 - RSTPTest - INFO - ============================================================

2025-09-11 11:40:54,393 - RSTPTest - INFO - ============================================================
2025-09-11 11:40:54,394 - RSTPTest - INFO - 开始测试: test_malformed_bpdu_handling
2025-09-11 11:40:54,394 - RSTPTest - INFO - ============================================================
2025-09-11 11:40:54,394 - test_security - INFO - 开始畸形BPDU处理测试
2025-09-11 11:40:54,436 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 11:40:54,437 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 11:40:54,437 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 11:40:54,437 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 11:40:54,438 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 11:40:54,438 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 11:40:54,438 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 11:40:54,438 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 11:40:54,438 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 11:40:54,965 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 11:40:54,966 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 11:40:54,966 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 11:40:55,121 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 11:40:56,175 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 11:40:56,176 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 11:40:56,176 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 11:40:56,176 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 11:40:56,177 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 11:40:56,649 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 11:40:57,125 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 11:40:57,125 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 11:40:57,317 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 11:40:57,318 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 11:40:57,318 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 11:40:57,318 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 11:40:57,318 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 11:40:57,318 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 11:40:57,319 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 11:40:57,319 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 11:41:12,943 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 11:41:17,454 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:41:17,576 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:41:17,576 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 11:41:17,576 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 11:41:17,577 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:41:17,577 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 11:41:18,743 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 11:41:19,933 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 11:41:19,933 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 11:41:20,028 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 11:41:20,295 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 11:41:20,295 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 11:41:20,295 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 11:41:20,295 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 11:41:20,296 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 11:41:20,296 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 11:41:20,296 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 11:41:20,296 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 11:41:20,787 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 11:41:25,272 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:41:25,398 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:41:25,398 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 11:41:25,398 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 11:41:25,399 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:41:25,399 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 11:41:26,580 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 11:41:27,751 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 11:41:27,751 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 11:41:27,847 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 11:41:28,103 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 11:41:28,104 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 11:41:28,104 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 11:41:33,523 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:41:33,675 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 11:41:33,676 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 11:41:33,676 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:41:33,677 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 11:41:33,677 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:41:34,144 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:41:34,144 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:41:34,145 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:41:34,145 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:41:34,145 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:41:34,146 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:41:34,894 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:41:35,046 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 11:41:35,048 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 11:41:35,048 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:41:35,048 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 11:41:35,048 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:41:35,513 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:41:35,513 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:41:35,514 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:41:35,514 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:41:35,514 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:41:35,515 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:41:35,801 - test_security - INFO - 初始网络状态: 稳定
2025-09-11 11:41:35,801 - test_security - INFO - 执行测试: _test_oversized_bpdu
2025-09-11 11:41:40,166 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:41:40,318 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 11:41:40,319 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 11:41:40,320 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:41:40,320 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 11:41:40,320 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:41:40,780 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:41:40,780 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:41:40,782 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:41:40,782 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:41:40,782 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:41:40,782 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:41:41,069 - test_security - INFO - _test_oversized_bpdu 网络保持稳定
2025-09-11 11:41:41,069 - test_security - INFO - 执行测试: _test_undersized_bpdu
2025-09-11 11:41:41,125 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

# 创建过小的BPDU（缺少必要字段）
target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 只包含最小字段的BPDU
truncated_bpdu = Raw(load=b"     ")  # 截断的BPDU

packet = eth/llc/truncated_bpdu
sendp(packet, iface=interface, count=5, inter=1, verbose=0)
print("Undersized BPDU sent")
' > /tmp/undersized_bpdu.py
错误: 
2025-09-11 11:41:41,126 - test_security - WARNING - _test_undersized_bpdu 执行异常但继续测试: 
2025-09-11 11:41:41,127 - test_security - INFO - 执行测试: _test_invalid_protocol_id
2025-09-11 11:41:41,127 - test_security - WARNING - TestNode1: SSH连接断开，尝试重连...
2025-09-11 11:41:41,127 - SSH_TestNode1 - INFO - TestNode1: 尝试重新建立SSH连接...
2025-09-11 11:41:41,127 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-11 11:41:41,258 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-11 11:41:42,940 - test_security - INFO - TestNode1: 无效协议ID BPDU测试完成
2025-09-11 11:41:46,362 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:41:46,514 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 11:41:46,515 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 11:41:46,515 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:41:46,515 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 11:41:46,516 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:41:46,977 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:41:46,978 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:41:46,979 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:41:46,979 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:41:46,979 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:41:46,979 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:41:47,265 - test_security - INFO - _test_invalid_protocol_id 网络保持稳定
2025-09-11 11:41:47,266 - test_security - INFO - 执行测试: _test_invalid_version
2025-09-11 11:41:48,880 - test_security - INFO - TestNode1: 无效版本号BPDU测试完成
2025-09-11 11:41:52,295 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:41:52,451 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 11:41:52,452 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 11:41:52,452 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:41:52,453 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 11:41:52,453 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:41:52,919 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:41:52,920 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:41:52,921 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:41:52,921 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:41:52,921 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:41:52,921 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:41:53,213 - test_security - INFO - _test_invalid_version 网络保持稳定
2025-09-11 11:41:53,213 - test_security - INFO - 执行测试: _test_invalid_message_type
2025-09-11 11:41:54,820 - test_security - INFO - TestNode1: 无效消息类型BPDU测试完成
2025-09-11 11:41:58,242 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:41:58,394 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 11:41:58,395 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 11:41:58,396 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:41:58,396 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 11:41:58,396 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:41:58,856 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:41:58,857 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:41:58,859 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:41:58,859 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:41:58,859 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:41:58,859 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:41:59,145 - test_security - INFO - _test_invalid_message_type 网络保持稳定
2025-09-11 11:41:59,146 - test_security - INFO - 执行测试: _test_corrupted_fields
2025-09-11 11:42:01,020 - test_security - INFO - TestNode1: 损坏字段BPDU测试完成
2025-09-11 11:42:04,437 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:42:04,590 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 11:42:04,591 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 11:42:04,591 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:42:04,591 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 11:42:04,591 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:42:05,051 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:42:05,051 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:42:05,052 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:42:05,053 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:42:05,053 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:42:05,053 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:42:05,340 - test_security - INFO - _test_corrupted_fields 网络保持稳定
2025-09-11 11:42:09,130 - test_security - INFO - 畸形BPDU处理测试完成
2025-09-11 11:42:09,131 - RSTPTest - INFO - 测试完成: test_malformed_bpdu_handling (耗时: 74.74秒)
2025-09-11 11:42:09,131 - RSTPTest - INFO - ============================================================

2025-09-11 11:42:09,132 - RSTPTest - INFO - ============================================================
2025-09-11 11:42:09,133 - RSTPTest - INFO - 开始测试: test_non_standard_bpdu_handling
2025-09-11 11:42:09,133 - RSTPTest - INFO - ============================================================
2025-09-11 11:42:09,133 - test_security - INFO - 开始非标准BPDU处理测试
2025-09-11 11:42:09,138 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 11:42:09,138 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 11:42:09,139 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 11:42:09,139 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 11:42:09,139 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 11:42:09,139 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 11:42:09,140 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 11:42:09,140 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 11:42:09,140 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 11:42:09,667 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 11:42:09,668 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 11:42:09,668 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 11:42:09,824 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 11:42:10,907 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 11:42:10,908 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 11:42:10,908 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 11:42:10,908 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 11:42:10,909 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 11:42:11,392 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 11:42:11,868 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 11:42:11,869 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 11:42:12,063 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 11:42:12,064 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 11:42:12,064 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 11:42:12,064 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 11:42:12,064 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 11:42:12,065 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 11:42:12,065 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 11:42:12,065 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 11:42:12,555 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 11:42:17,045 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:42:17,172 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:42:17,172 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 11:42:17,172 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 11:42:17,172 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:42:17,172 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 11:42:18,361 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 11:42:19,541 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 11:42:19,542 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 11:42:19,635 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 11:42:19,896 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 11:42:19,896 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 11:42:19,896 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 11:42:19,896 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 11:42:19,897 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 11:42:19,897 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 11:42:19,897 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 11:42:19,897 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 11:42:20,391 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 11:42:24,883 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:42:25,001 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:42:25,001 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 11:42:25,002 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 11:42:25,002 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:42:25,002 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 11:42:26,201 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 11:42:27,387 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 11:42:27,388 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 11:42:27,485 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 11:42:27,749 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 11:42:27,750 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 11:42:27,750 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 11:42:32,751 - test_security - INFO - 执行测试: _test_pvst_plus_bpdu
2025-09-11 11:42:32,801 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

# PVST+ 使用不同的目标MAC地址
pvst_mac = "01:00:0c:cc:cc:cd"
interface = "eth0"

eth = Ether(dst=pvst_mac, src="00:11:22:33:44:55")
# PVST+ 使用SNAP封装
snap = SNAP(OUI=0x00000c, code=0x010b)
# 模拟PVST+ BPDU结构
pvst_bpdu = Raw(load=b"    " + b" " * 30 + b" ")  # 包含VLAN ID

packet = eth/snap/pvst_bpdu
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("PVST+ BPDU sent")
' > /tmp/pvst_bpdu.py
错误: 
2025-09-11 11:42:32,802 - test_security - ERROR - _test_pvst_plus_bpdu 执行失败: 
2025-09-11 11:42:32,802 - test_security - INFO - 执行测试: _test_cisco_proprietary_bpdu
2025-09-11 11:42:32,803 - SSH_TestNode1 - WARNING - TestNode1: SSH连接已断开，尝试重连...
2025-09-11 11:42:32,932 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-11 11:42:33,053 - SSH_TestNode1 - INFO - TestNode1: SSH重连成功
2025-09-11 11:42:33,099 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 模拟包含Cisco专有扩展的BPDU
cisco_bpdu = Raw(load=b"    " + b" " * 30 + 
                     b" )   ")  # Cisco OUI + 专有数据

packet = eth/llc/cisco_bpdu
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("Cisco proprietary BPDU sent")
' > /tmp/cisco_bpdu.py
错误: 
2025-09-11 11:42:33,100 - test_security - ERROR - _test_cisco_proprietary_bpdu 执行失败: 
2025-09-11 11:42:33,100 - test_security - INFO - 执行测试: _test_vlan_tagged_bpdu
2025-09-11 11:42:33,100 - SSH_TestNode1 - WARNING - TestNode1: SSH连接已断开，尝试重连...
2025-09-11 11:42:33,222 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-11 11:42:33,354 - SSH_TestNode1 - INFO - TestNode1: SSH重连成功
2025-09-11 11:42:40,670 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:42:40,821 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Root       Forwarding 20000    128.1
  br4        Alternate  Discarding 20000    128.2


2025-09-11 11:42:40,823 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 11:42:40,823 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:42:40,823 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 11:42:40,823 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:42:41,283 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:42:41,283 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:42:41,285 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:42:41,285 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:42:41,285 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:42:41,285 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:42:41,573 - test_security - INFO - _test_vlan_tagged_bpdu 网络保持稳定
2025-09-11 11:42:41,573 - test_security - INFO - 执行测试: _test_unknown_tlv_bpdu
2025-09-11 11:42:41,626 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 标准BPDU + 未知TLV
standard_bpdu = b"    " + b" " * 30
unknown_tlv = b"ÿÿ "  # 未知类型和长度的TLV
bpdu_with_tlv = Raw(load=standard_bpdu + unknown_tlv)

packet = eth/llc/bpdu_with_tlv
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("BPDU with unknown TLV sent")
' > /tmp/unknown_tlv.py
错误: 
2025-09-11 11:42:41,627 - test_security - ERROR - _test_unknown_tlv_bpdu 执行失败: 
2025-09-11 11:42:41,815 - test_security - INFO - 非标准BPDU处理测试完成
2025-09-11 11:42:41,816 - RSTPTest - INFO - 测试完成: test_non_standard_bpdu_handling (耗时: 32.68秒)
2025-09-11 11:42:41,817 - RSTPTest - INFO - ============================================================

2025-09-11 11:42:41,819 - RSTPTest - INFO - ============================================================
2025-09-11 11:42:41,819 - RSTPTest - INFO - 开始测试: test_bpdu_guard_functionality
2025-09-11 11:42:41,819 - RSTPTest - INFO - ============================================================
2025-09-11 11:42:41,821 - test_security - INFO - 开始BPDU防护功能测试
2025-09-11 11:42:41,825 - NetworkTopology - INFO - 创建RSTP线性拓扑...
2025-09-11 11:42:41,826 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 11:42:41,826 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 11:42:41,826 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 11:42:41,826 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 11:42:41,827 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 11:42:41,827 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 11:42:41,827 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 11:42:41,827 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 11:42:42,351 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 11:42:42,352 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 11:42:42,352 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 11:42:42,516 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 11:42:43,643 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"32768
2025-09-11 11:42:43,643 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 11:42:43,644 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 11:42:43,644 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br4']
2025-09-11 11:42:43,644 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 11:42:44,184 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 11:42:44,184 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 11:42:44,376 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 11:42:44,376 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 11:42:44,377 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 11:42:44,377 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 11:42:44,377 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 11:42:44,377 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 11:42:44,378 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 11:42:44,378 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 11:42:44,378 - SSH_TestNode1 - WARNING - TestNode1: SSH连接已断开，尝试重连...
2025-09-11 11:42:44,499 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-11 11:42:44,633 - SSH_TestNode1 - INFO - TestNode1: SSH重连成功
2025-09-11 11:42:45,142 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 11:42:49,641 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:42:49,768 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:42:49,769 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 11:42:49,769 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 11:42:49,769 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:42:49,770 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 11:42:50,944 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 11:42:52,144 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 11:42:52,145 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 11:42:52,256 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 11:42:52,530 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 11:42:52,530 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 11:42:52,530 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 11:42:52,530 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 11:42:52,530 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 11:42:52,531 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 11:42:52,531 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 11:42:52,531 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 11:42:53,005 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 11:42:57,504 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:42:57,630 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:42:57,630 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 11:42:57,631 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 11:42:57,631 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0']
2025-09-11 11:42:57,631 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 11:42:58,804 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 11:42:58,804 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 11:42:58,898 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 11:42:59,159 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 11:42:59,159 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 11:42:59,160 - NetworkTopology - INFO - 线性拓扑创建完成
2025-09-11 11:43:04,622 - test_security - INFO - 边缘端口 eth2 初始状态: {}
2025-09-11 11:43:04,623 - test_security - INFO - 向边缘端口 eth2 发送BPDU
2025-09-11 11:43:11,714 - test_security - INFO - BPDU防护触发后端口 eth2 状态: {}
2025-09-11 11:43:11,714 - test_security - ERROR - BPDU防护功能异常：端口未被禁用
2025-09-11 11:43:11,947 - RSTPTest - INFO - 测试完成: test_bpdu_guard_functionality (耗时: 30.13秒)
2025-09-11 11:43:11,948 - RSTPTest - INFO - ============================================================

2025-09-11 11:43:11,950 - RSTPTest - INFO - ============================================================
2025-09-11 11:43:11,950 - RSTPTest - INFO - 开始测试: test_root_guard_functionality
2025-09-11 11:43:11,950 - RSTPTest - INFO - ============================================================
2025-09-11 11:43:11,950 - test_security - INFO - 开始根防护功能测试
2025-09-11 11:43:11,970 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 11:43:11,970 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 11:43:11,970 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 11:43:11,971 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 11:43:11,971 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 11:43:11,971 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 11:43:11,971 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 11:43:11,971 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 11:43:11,971 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 11:43:12,499 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 11:43:12,499 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 11:43:12,499 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 11:43:12,654 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 11:43:13,730 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 11:43:13,730 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 11:43:13,730 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 11:43:13,731 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 11:43:13,731 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 11:43:14,214 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 11:43:14,695 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 11:43:14,695 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 11:43:14,887 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 11:43:14,887 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 11:43:14,887 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 11:43:14,887 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 11:43:14,888 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 11:43:14,888 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 11:43:14,888 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 11:43:14,888 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 11:43:15,406 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 11:43:19,967 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:43:20,105 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:43:20,106 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 11:43:20,106 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 11:43:20,106 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:43:20,107 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 11:43:21,305 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 11:43:22,529 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 11:43:22,529 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 11:43:22,623 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 11:43:22,907 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 11:43:22,907 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 11:43:22,907 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 11:43:22,907 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 11:43:22,908 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 11:43:22,908 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 11:43:22,908 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 11:43:22,908 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 11:43:23,469 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 11:43:28,025 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:43:28,165 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:43:28,165 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 11:43:28,166 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 11:43:28,166 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:43:28,166 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 11:43:29,447 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 11:43:30,748 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 11:43:30,748 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 11:43:30,843 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 11:43:31,113 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 11:43:31,113 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 11:43:31,114 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 11:43:36,529 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:43:36,680 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Root       Forwarding 20000    128.1
  br4        Alternate  Discarding 20000    128.2


2025-09-11 11:43:36,681 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 11:43:36,682 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:43:36,682 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 11:43:36,682 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:43:37,138 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:43:37,138 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:43:37,140 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:43:37,140 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:43:37,140 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:43:37,140 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:43:37,427 - test_security - INFO - 当前根桥ID: unknown
2025-09-11 11:43:37,766 - test_security - WARNING - 启用根防护失败: 
2025-09-11 11:43:37,767 - test_security - INFO - 在端口 eth1 启用根防护
2025-09-11 11:43:38,170 - test_security - INFO - 端口 eth1 初始状态: unknown
2025-09-11 11:43:38,170 - test_security - INFO - 发送更优BPDU尝试劫持根桥
2025-09-11 11:43:54,493 - test_security - INFO - 根防护触发后端口 eth1 状态: unknown
2025-09-11 11:43:55,280 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 11:43:55,428 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Root       Forwarding 20000    128.1
  br4        Alternate  Discarding 20000    128.2


2025-09-11 11:43:55,429 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 11:43:55,429 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 11:43:55,429 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 11:43:55,430 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 11:43:55,885 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 11:43:55,886 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 11:43:55,887 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 11:43:55,888 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 11:43:55,888 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 11:43:55,888 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 11:43:56,175 - test_security - INFO - 根防护功能正常：根桥身份未被劫持
2025-09-11 11:43:56,176 - test_security - ERROR - 根防护功能异常：端口未进入阻塞状态
2025-09-11 11:43:56,176 - test_security - INFO - 测试根防护端口 eth1 恢复功能
2025-09-11 11:43:56,176 - test_security - INFO - 停止发送更优BPDU
2025-09-11 11:44:06,534 - test_security - INFO - 端口恢复后状态: unknown
2025-09-11 11:44:06,534 - test_security - WARNING - 根防护端口未能自动恢复
2025-09-11 11:44:06,778 - RSTPTest - INFO - 测试完成: test_root_guard_functionality (耗时: 54.83秒)
2025-09-11 11:44:06,778 - RSTPTest - INFO - ============================================================

2025-09-11 11:44:06,781 - RSTPTest - INFO - ============================================================
2025-09-11 11:44:06,781 - RSTPTest - INFO - 开始测试: test_loop_guard_functionality
2025-09-11 11:44:06,782 - RSTPTest - INFO - ============================================================
2025-09-11 11:44:06,782 - test_security - INFO - 开始环路防护功能测试
2025-09-11 11:44:06,782 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 11:44:06,783 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 11:44:06,783 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 11:44:06,783 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 11:44:06,783 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 11:44:06,783 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 11:44:06,784 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 11:44:06,784 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 11:44:06,784 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 11:44:07,306 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 11:44:07,306 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 11:44:07,306 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 11:44:07,471 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 11:44:08,555 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 11:44:08,555 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 11:44:08,555 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 11:44:08,556 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 11:44:08,556 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 11:44:09,029 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 11:44:09,506 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 11:44:09,506 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 11:44:09,698 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 11:44:09,698 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 11:44:09,698 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 11:44:09,698 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 11:44:09,699 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 11:44:09,699 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 11:44:09,699 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 11:44:09,699 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 11:44:10,234 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 11:44:14,799 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:44:14,931 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:44:14,932 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 11:44:14,932 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 11:44:14,932 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:44:14,933 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 11:44:16,119 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 11:44:17,370 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 11:44:17,371 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 11:44:17,467 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 11:44:17,748 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 11:44:17,749 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 11:44:17,749 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 11:44:17,750 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 11:44:17,750 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 11:44:17,750 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 11:44:17,750 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 11:44:17,751 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 11:44:18,261 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 11:44:22,862 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 11:44:23,003 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 11:44:23,004 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 11:44:23,004 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 11:44:23,004 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 11:44:23,004 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 11:44:24,278 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 11:44:25,524 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 11:44:25,524 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 11:44:25,619 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 11:44:25,914 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 11:44:25,914 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 11:44:25,914 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 11:44:31,193 - test_security - WARNING - 启用环路防护失败: 
2025-09-11 11:44:31,193 - test_security - INFO - 在端口 eth1 启用环路防护
2025-09-11 11:44:31,593 - test_security - INFO - 端口 eth1 初始状态: unknown
2025-09-11 11:44:31,593 - test_security - INFO - 模拟单向链路故障
2025-09-11 11:44:31,593 - test_security - INFO - 停止从测试节点发送BPDU
2025-09-11 11:44:52,089 - test_security - INFO - 环路防护触发后端口 eth1 状态: unknown
2025-09-11 11:44:52,089 - test_security - WARNING - 环路防护功能异常：端口未进入阻塞状态
2025-09-11 11:44:52,089 - test_security - INFO - 测试环路防护端口 eth1 恢复功能
2025-09-11 11:44:52,089 - test_security - INFO - 恢复BPDU发送
2025-09-11 11:45:02,584 - test_security - INFO - 端口恢复后状态: unknown
2025-09-11 11:45:02,584 - test_security - WARNING - 环路防护端口未能自动恢复
2025-09-11 11:45:02,800 - test_security - INFO - 环路防护功能测试完成
2025-09-11 11:45:02,801 - RSTPTest - INFO - 测试完成: test_loop_guard_functionality (耗时: 56.02秒)
2025-09-11 11:45:02,801 - RSTPTest - INFO - ============================================================

2025-09-11 11:45:02,802 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-11 11:45:02,802 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-11 11:45:02,803 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-11 11:45:03,286 - __main__ - INFO - ============================================================
2025-09-11 11:45:03,287 - __main__ - INFO - 测试完成，返回码: 1
2025-09-11 11:45:03,287 - __main__ - INFO - ============================================================
