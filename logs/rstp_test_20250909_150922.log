2025-09-09 15:09:22,160 - root - INFO - 日志系统初始化完成，日志文件: logs\rstp_test_20250909_150922.log
2025-09-09 15:09:22,388 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 15:09:22,388 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 15:09:22,515 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 15:09:22,516 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 15:09:22,642 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 15:09:22,643 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 15:09:22,654 - RSTPTest - INFO - ============================================================
2025-09-09 15:09:22,654 - RSTPTest - INFO - 开始测试: test_port_state_transitions
2025-09-09 15:09:22,654 - RSTPTest - INFO - ============================================================
2025-09-09 15:09:22,655 - test_additional_rstp - INFO - 开始端口状态转换测试
2025-09-09 15:09:22,655 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 15:09:22,656 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 15:09:22,656 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 15:09:22,656 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 15:09:22,656 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 15:09:22,657 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 15:09:22,657 - NetworkTopology - INFO - DUT: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 15:09:22,657 - NetworkTopology - INFO - DUT: 检查mstpd支持...
2025-09-09 15:09:22,663 - NetworkTopology - INFO - DUT: mstpd检查结果: code=1
2025-09-09 15:09:22,663 - NetworkTopology - INFO - DUT: 检查iproute2支持...
2025-09-09 15:09:22,710 - NetworkTopology - INFO - DUT: ip命令检查: code=0
2025-09-09 15:09:22,710 - NetworkTopology - INFO - DUT: 使用iproute2配置RSTP
2025-09-09 15:09:22,710 - NetworkTopology - INFO - DUT: 最终选择RSTP方法: iproute2
2025-09-09 15:09:22,710 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 15:09:22,710 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 15:09:23,034 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 15:09:23,425 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 15:09:23,425 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 15:09:23,425 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 15:09:23,425 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 15:09:23,545 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 15:09:23,664 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 15:09:23,665 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 15:09:23,717 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 15:09:23,766 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 15:09:23,814 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 15:09:23,814 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 15:09:23,814 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 15:09:23,814 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 15:09:23,815 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 15:09:23,815 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 15:09:23,815 - NetworkTopology - INFO - TestNode1: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 15:09:23,815 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 15:09:23,822 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 15:09:23,823 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 15:09:23,941 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=1, output=
2025-09-09 15:09:23,942 - NetworkTopology - INFO - TestNode1: 尝试启动mstpd服务...
2025-09-09 15:09:24,121 - NetworkTopology - INFO - TestNode1: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 15:09:26,206 - NetworkTopology - INFO - TestNode1: mstpd启动后状态: code=1
2025-09-09 15:09:26,207 - NetworkTopology - INFO - TestNode1: mstpd启动失败，使用iproute2
2025-09-09 15:09:26,207 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: iproute2
2025-09-09 15:09:26,207 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 15:09:26,208 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 15:09:26,751 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 15:09:27,921 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 15:09:27,921 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 15:09:27,921 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 15:09:27,922 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 15:09:28,270 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 15:09:28,603 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 15:09:28,604 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 15:09:28,786 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 15:09:28,835 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 15:09:28,886 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 15:09:28,886 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 15:09:28,886 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 15:09:28,886 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 15:09:28,887 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 15:09:28,887 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 15:09:28,887 - NetworkTopology - INFO - TestNode2: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 15:09:28,887 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 15:09:28,895 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 15:09:28,895 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 15:09:29,021 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=1, output=
2025-09-09 15:09:29,021 - NetworkTopology - INFO - TestNode2: 尝试启动mstpd服务...
2025-09-09 15:09:29,190 - NetworkTopology - INFO - TestNode2: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 15:09:31,284 - NetworkTopology - INFO - TestNode2: mstpd启动后状态: code=1
2025-09-09 15:09:31,284 - NetworkTopology - INFO - TestNode2: mstpd启动失败，使用iproute2
2025-09-09 15:09:31,284 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: iproute2
2025-09-09 15:09:31,284 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 15:09:31,284 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 15:09:31,855 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 15:09:32,955 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 15:09:32,955 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 15:09:32,955 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 15:09:32,955 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 15:09:33,312 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 15:09:33,677 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 15:09:33,677 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 15:09:33,860 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 15:09:33,909 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 15:09:33,959 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 15:09:33,960 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 15:09:33,960 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 15:09:39,108 - test_additional_rstp - INFO - 使用网桥: rstp0
2025-09-09 15:09:39,108 - test_additional_rstp - INFO - === 步骤1: 禁用端口触发状态转换 ===
2025-09-09 15:09:39,172 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:09:39,342 - RSTPTest - INFO - 测试完成: test_port_state_transitions (耗时: 16.69秒)
2025-09-09 15:09:39,343 - RSTPTest - INFO - ============================================================

2025-09-09 15:09:39,345 - RSTPTest - INFO - ============================================================
2025-09-09 15:09:39,346 - RSTPTest - INFO - 开始测试: test_bpdu_propagation_and_keepalive
2025-09-09 15:09:39,346 - RSTPTest - INFO - ============================================================
2025-09-09 15:09:39,347 - test_additional_rstp - INFO - 开始BPDU传播和保活机制测试
2025-09-09 15:09:39,347 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 15:09:39,348 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 15:09:39,348 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 15:09:39,348 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 15:09:39,348 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 15:09:39,349 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 15:09:39,349 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 15:09:39,349 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 15:09:39,645 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 15:09:40,037 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 15:09:40,037 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 15:09:40,037 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 15:09:40,038 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 15:09:40,157 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 15:09:40,277 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 15:09:40,277 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 15:09:40,334 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 15:09:40,382 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 15:09:40,430 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 15:09:40,430 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 15:09:40,430 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 15:09:40,430 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 15:09:40,430 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 15:09:40,431 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 15:09:40,431 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 15:09:40,431 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 15:09:40,973 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 15:09:42,111 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 15:09:42,112 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 15:09:42,112 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 15:09:42,113 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 15:09:42,447 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 15:09:42,799 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 15:09:42,800 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 15:09:42,967 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 15:09:43,016 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 15:09:43,065 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 15:09:43,066 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 15:09:43,066 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 15:09:43,066 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 15:09:43,066 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 15:09:43,067 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 15:09:43,067 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 15:09:43,067 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 15:09:43,570 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 15:09:44,756 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 15:09:44,757 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 15:09:44,757 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 15:09:44,757 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 15:09:45,106 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 15:09:45,467 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 15:09:45,467 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 15:09:45,665 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 15:09:45,713 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 15:09:45,762 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 15:09:45,762 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 15:09:45,762 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 15:09:54,007 - test_additional_rstp - INFO - === 步骤1: 验证分布式BPDU生成 ===
2025-09-09 15:09:54,013 - test_additional_rstp - INFO - 检测到网桥接口: ['18:', '26:']
2025-09-09 15:09:54,013 - test_additional_rstp - INFO - 在接口 18: 上捕获BPDU...
2025-09-09 15:09:54,013 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: 18:, 数量: 10)
2025-09-09 15:09:54,091 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-09 15:09:54,091 - test_additional_rstp - WARNING - 在 18: 上未捕获到BPDU
2025-09-09 15:09:54,091 - test_additional_rstp - INFO - 在接口 26: 上捕获BPDU...
2025-09-09 15:09:54,092 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: 26:, 数量: 10)
2025-09-09 15:09:54,154 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-09 15:09:54,154 - test_additional_rstp - WARNING - 在 26: 上未捕获到BPDU
2025-09-09 15:09:54,155 - test_additional_rstp - INFO - 总共捕获 0 个BPDU，来自 0 个不同源
2025-09-09 15:09:54,155 - test_additional_rstp - WARNING - 未检测到BPDU传播
2025-09-09 15:09:54,155 - test_additional_rstp - INFO - BPDU传播和保活机制测试完成
2025-09-09 15:09:54,156 - RSTPTest - INFO - 测试完成: test_bpdu_propagation_and_keepalive (耗时: 14.81秒)
2025-09-09 15:09:54,156 - RSTPTest - INFO - ============================================================

2025-09-09 15:09:54,157 - RSTPTest - INFO - ============================================================
2025-09-09 15:09:54,157 - RSTPTest - INFO - 开始测试: test_disabled_port_exclusion_enhanced
2025-09-09 15:09:54,157 - RSTPTest - INFO - ============================================================
2025-09-09 15:09:54,158 - test_additional_rstp - INFO - 开始增强的禁用端口排除测试
2025-09-09 15:09:54,158 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 15:09:54,158 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 15:09:54,158 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 15:09:54,159 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 15:09:54,159 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 15:09:54,159 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 15:09:54,159 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 15:09:54,159 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 15:09:54,453 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 15:09:54,845 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 15:09:54,845 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 15:09:54,846 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 15:09:54,846 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 15:09:54,960 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 15:09:55,080 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 15:09:55,081 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 15:09:55,137 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 15:09:55,186 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 15:09:55,233 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 15:09:55,234 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 15:09:55,234 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 15:09:55,234 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 15:09:55,234 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 15:09:55,234 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 15:09:55,234 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 15:09:55,235 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 15:09:55,748 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 15:09:56,903 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 15:09:56,903 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 15:09:56,903 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 15:09:56,904 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 15:09:57,269 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 15:09:57,607 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 15:09:57,608 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 15:09:57,797 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 15:09:57,845 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 15:09:57,893 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 15:09:57,894 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 15:09:57,894 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 15:09:57,894 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 15:09:57,894 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 15:09:57,895 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 15:09:57,895 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 15:09:57,895 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 15:09:58,410 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 15:09:59,532 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 15:09:59,533 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 15:09:59,533 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 15:09:59,533 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 15:09:59,889 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 15:10:00,231 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 15:10:00,231 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 15:10:00,402 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 15:10:00,451 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 15:10:00,499 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 15:10:00,500 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 15:10:00,500 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 15:10:05,707 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:10:05,862 - test_additional_rstp - INFO - 初始活动端口数量: 0
2025-09-09 15:10:05,863 - RSTPTest - INFO - 测试完成: test_disabled_port_exclusion_enhanced (耗时: 11.71秒)
2025-09-09 15:10:05,863 - RSTPTest - INFO - ============================================================

2025-09-09 15:10:05,864 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 15:10:05,864 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 15:10:05,865 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 15:10:06,011 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 15:10:06,011 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 15:10:06,141 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 15:10:06,141 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 15:10:06,262 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 15:10:06,263 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 15:10:06,264 - RSTPTest - INFO - ============================================================
2025-09-09 15:10:06,264 - RSTPTest - INFO - 开始测试: test_proposal_agreement_handshake
2025-09-09 15:10:06,265 - RSTPTest - INFO - ============================================================
2025-09-09 15:10:06,266 - test_advanced_rstp_mechanisms - INFO - 开始测试RSTP Proposal/Agreement握手机制
2025-09-09 15:10:06,267 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 15:10:06,267 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 15:10:06,267 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 15:10:06,268 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 15:10:06,268 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 15:10:06,268 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 15:10:06,268 - NetworkTopology - INFO - DUT: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 15:10:06,269 - NetworkTopology - INFO - DUT: 检查mstpd支持...
2025-09-09 15:10:06,275 - NetworkTopology - INFO - DUT: mstpd检查结果: code=1
2025-09-09 15:10:06,275 - NetworkTopology - INFO - DUT: 检查iproute2支持...
2025-09-09 15:10:06,321 - NetworkTopology - INFO - DUT: ip命令检查: code=0
2025-09-09 15:10:06,321 - NetworkTopology - INFO - DUT: 使用iproute2配置RSTP
2025-09-09 15:10:06,322 - NetworkTopology - INFO - DUT: 最终选择RSTP方法: iproute2
2025-09-09 15:10:06,322 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 15:10:06,322 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 15:10:06,641 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 15:10:07,032 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 15:10:07,033 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 15:10:07,033 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 15:10:07,033 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 15:10:07,152 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 15:10:07,276 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 15:10:07,276 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 15:10:07,333 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 15:10:07,382 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 15:10:07,429 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 15:10:07,429 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 15:10:07,429 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 15:10:07,429 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 15:10:07,430 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 15:10:07,430 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 15:10:07,430 - NetworkTopology - INFO - TestNode1: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 15:10:07,430 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 15:10:07,438 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 15:10:07,438 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 15:10:07,568 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=1, output=
2025-09-09 15:10:07,568 - NetworkTopology - INFO - TestNode1: 尝试启动mstpd服务...
2025-09-09 15:10:07,757 - NetworkTopology - INFO - TestNode1: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 15:10:09,842 - NetworkTopology - INFO - TestNode1: mstpd启动后状态: code=1
2025-09-09 15:10:09,843 - NetworkTopology - INFO - TestNode1: mstpd启动失败，使用iproute2
2025-09-09 15:10:09,843 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: iproute2
2025-09-09 15:10:09,843 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 15:10:09,844 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 15:10:10,385 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 15:10:11,517 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 15:10:11,517 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 15:10:11,518 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 15:10:11,518 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 15:10:11,881 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 15:10:12,250 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 15:10:12,250 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 15:10:12,453 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 15:10:12,505 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 15:10:12,554 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 15:10:12,554 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 15:10:12,554 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 15:10:12,554 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 15:10:12,554 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 15:10:12,555 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 15:10:12,555 - NetworkTopology - INFO - TestNode2: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 15:10:12,555 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 15:10:12,562 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 15:10:12,563 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 15:10:12,689 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=1, output=
2025-09-09 15:10:12,690 - NetworkTopology - INFO - TestNode2: 尝试启动mstpd服务...
2025-09-09 15:10:12,868 - NetworkTopology - INFO - TestNode2: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 15:10:14,975 - NetworkTopology - INFO - TestNode2: mstpd启动后状态: code=1
2025-09-09 15:10:14,975 - NetworkTopology - INFO - TestNode2: mstpd启动失败，使用iproute2
2025-09-09 15:10:14,975 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: iproute2
2025-09-09 15:10:14,976 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 15:10:14,976 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 15:10:15,522 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 15:10:16,625 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 15:10:16,625 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 15:10:16,626 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 15:10:16,626 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 15:10:16,967 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 15:10:17,335 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 15:10:17,336 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 15:10:17,504 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 15:10:17,554 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 15:10:17,601 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 15:10:17,602 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 15:10:17,602 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 15:10:22,603 - test_advanced_rstp_mechanisms - INFO - 开始在eth0上捕获BPDU
2025-09-09 15:10:22,603 - test_advanced_rstp_mechanisms - INFO - 触发拓扑变更...
2025-09-09 15:10:28,868 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: eth0, 数量: 20)
2025-09-09 15:10:28,910 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-09 15:10:28,910 - test_advanced_rstp_mechanisms - INFO - 捕获到0个BPDU数据包
2025-09-09 15:10:28,910 - test_advanced_rstp_mechanisms - WARNING - 未能捕获到完整的BPDU握手序列，可能是环境限制
2025-09-09 15:10:28,910 - test_advanced_rstp_mechanisms - INFO - 改为验证网络收敛状态...
2025-09-09 15:10:29,015 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:10:29,170 - test_advanced_rstp_mechanisms - INFO - ✓ 网络收敛正常，存在根端口
2025-09-09 15:10:31,171 - test_advanced_rstp_mechanisms - INFO - RSTP Proposal/Agreement握手机制测试通过
2025-09-09 15:10:31,172 - RSTPTest - INFO - 测试完成: test_proposal_agreement_handshake (耗时: 24.91秒)
2025-09-09 15:10:31,173 - RSTPTest - INFO - ============================================================

2025-09-09 15:10:31,174 - RSTPTest - INFO - ============================================================
2025-09-09 15:10:31,174 - RSTPTest - INFO - 开始测试: test_tcn_topology_change_notification
2025-09-09 15:10:31,175 - RSTPTest - INFO - ============================================================
2025-09-09 15:10:31,175 - test_advanced_rstp_mechanisms - INFO - 开始测试TCN拓扑变更通知机制
2025-09-09 15:10:31,175 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 15:10:31,175 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 15:10:31,175 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 15:10:31,176 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 15:10:31,176 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 15:10:31,176 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 15:10:31,176 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 15:10:31,176 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 15:10:31,445 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 15:10:31,836 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 15:10:31,836 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 15:10:31,836 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 15:10:31,837 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 15:10:31,955 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 15:10:32,073 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 15:10:32,073 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 15:10:32,129 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 15:10:32,176 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 15:10:32,224 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 15:10:32,225 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 15:10:32,225 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 15:10:32,225 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 15:10:32,225 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 15:10:32,226 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 15:10:32,226 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 15:10:32,226 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 15:10:32,746 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 15:10:33,835 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 15:10:33,835 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 15:10:33,835 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 15:10:33,835 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 15:10:34,177 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 15:10:34,530 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 15:10:34,531 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 15:10:34,714 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 15:10:34,762 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 15:10:34,809 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 15:10:34,810 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 15:10:34,810 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 15:10:34,810 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 15:10:34,810 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 15:10:34,811 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 15:10:34,811 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 15:10:34,811 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 15:10:35,326 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 15:10:36,409 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 15:10:36,409 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 15:10:36,410 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 15:10:36,410 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 15:10:36,763 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 15:10:37,132 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 15:10:37,133 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 15:10:37,305 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 15:10:37,353 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 15:10:37,402 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 15:10:37,402 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 15:10:37,403 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 15:10:47,516 - test_advanced_rstp_mechanisms - INFO - 初始网桥端口数量: 3
2025-09-09 15:10:47,516 - test_advanced_rstp_mechanisms - INFO - 触发拓扑变更：临时禁用/启用端口
2025-09-09 15:10:47,571 - test_advanced_rstp_mechanisms - INFO - 初始TC计数: 0
2025-09-09 15:10:55,656 - test_advanced_rstp_mechanisms - INFO - 变更后TC计数: 0
2025-09-09 15:10:55,656 - test_advanced_rstp_mechanisms - INFO - 拓扑变更可能未被检测到，这可能是正常的（取决于实现）
2025-09-09 15:10:55,809 - test_advanced_rstp_mechanisms - INFO - 最终网桥端口数量: 3
2025-09-09 15:10:55,867 - test_advanced_rstp_mechanisms - INFO - 当前MAC地址表老化时间: 300秒
2025-09-09 15:10:55,868 - test_advanced_rstp_mechanisms - WARNING - MAC地址表老化时间(300秒)未缩短，可能是实现差异
2025-09-09 15:10:55,868 - test_advanced_rstp_mechanisms - INFO - TCN拓扑变更通知机制测试通过 - 使用安全的端口状态变更方式
2025-09-09 15:10:55,869 - RSTPTest - INFO - 测试完成: test_tcn_topology_change_notification (耗时: 24.69秒)
2025-09-09 15:10:55,869 - RSTPTest - INFO - ============================================================

2025-09-09 15:10:55,871 - RSTPTest - INFO - ============================================================
2025-09-09 15:10:55,871 - RSTPTest - INFO - 开始测试: test_edge_port_behavior
2025-09-09 15:10:55,871 - RSTPTest - INFO - ============================================================
2025-09-09 15:10:55,872 - test_advanced_rstp_mechanisms - INFO - 开始测试边缘端口行为
2025-09-09 15:10:55,872 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 15:10:55,872 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 15:10:55,873 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 15:10:55,873 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 15:10:55,873 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 15:10:55,873 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 15:10:55,873 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 15:10:55,874 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 15:10:56,183 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 15:10:56,575 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 15:10:56,575 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 15:10:56,575 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 15:10:56,575 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 15:10:56,691 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 15:10:56,811 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 15:10:56,812 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 15:10:56,868 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 15:10:56,917 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 15:10:56,965 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 15:10:56,965 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 15:10:56,965 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 15:10:56,966 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 15:10:56,966 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 15:10:56,966 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 15:10:56,966 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 15:10:56,966 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 15:10:57,480 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 15:10:58,567 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 15:10:58,568 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 15:10:58,568 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 15:10:58,568 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 15:10:58,908 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 15:10:59,264 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 15:10:59,265 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 15:10:59,443 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 15:10:59,492 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 15:10:59,540 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 15:10:59,540 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 15:10:59,541 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 15:10:59,541 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 15:10:59,541 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 15:10:59,541 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 15:10:59,542 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 15:10:59,542 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 15:11:00,043 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 15:11:01,148 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 15:11:01,148 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 15:11:01,148 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 15:11:01,149 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 15:11:01,480 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 15:11:01,825 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 15:11:01,826 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 15:11:02,001 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 15:11:02,049 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 15:11:02,097 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 15:11:02,098 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 15:11:02,098 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 15:11:07,639 - test_advanced_rstp_mechanisms - INFO - 可用端口: ['enp1s0']
2025-09-09 15:11:07,640 - test_advanced_rstp_mechanisms - INFO - 选择端口enp1s0作为边缘端口测试
2025-09-09 15:11:07,699 - test_advanced_rstp_mechanisms - INFO - 测试边缘端口立即转发特性
2025-09-09 15:11:10,394 - test_advanced_rstp_mechanisms - INFO - 边缘端口状态转换时间: 2.64秒
2025-09-09 15:11:10,394 - test_advanced_rstp_mechanisms - INFO - ✓ 边缘端口转换时间合理
2025-09-09 15:11:10,407 - test_advanced_rstp_mechanisms - INFO - ✓ 边缘端口状态变化未产生TCN
2025-09-09 15:11:10,407 - test_advanced_rstp_mechanisms - INFO - 测试边缘端口收到BPDU后的行为
2025-09-09 15:11:10,463 - test_advanced_rstp_mechanisms - INFO - 边缘端口状态: 1
1
normal
2025-09-09 15:11:10,464 - test_advanced_rstp_mechanisms - INFO - 边缘端口行为测试通过
2025-09-09 15:11:10,465 - RSTPTest - INFO - 测试完成: test_edge_port_behavior (耗时: 14.59秒)
2025-09-09 15:11:10,465 - RSTPTest - INFO - ============================================================

2025-09-09 15:11:10,466 - RSTPTest - INFO - ============================================================
2025-09-09 15:11:10,466 - RSTPTest - INFO - 开始测试: test_shared_vs_point_to_point_links
2025-09-09 15:11:10,466 - RSTPTest - INFO - ============================================================
2025-09-09 15:11:10,467 - test_advanced_rstp_mechanisms - INFO - 开始测试不同链路类型的行为差异
2025-09-09 15:11:10,467 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 15:11:10,467 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 15:11:10,467 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 15:11:10,468 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 15:11:10,468 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 15:11:10,468 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 15:11:10,468 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 15:11:10,468 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 15:11:10,787 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 15:11:11,176 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 15:11:11,176 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 15:11:11,176 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 15:11:11,176 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 15:11:11,296 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 15:11:11,415 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 15:11:11,416 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 15:11:11,471 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 15:11:11,520 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 15:11:11,572 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 15:11:11,572 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 15:11:11,572 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 15:11:11,572 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 15:11:11,573 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 15:11:11,573 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 15:11:11,573 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 15:11:11,573 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 15:11:12,090 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 15:11:13,197 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 15:11:13,198 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 15:11:13,198 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 15:11:13,198 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 15:11:13,547 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 15:11:13,876 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 15:11:13,877 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 15:11:14,046 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 15:11:14,095 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 15:11:14,144 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 15:11:14,144 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 15:11:14,145 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 15:11:14,145 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 15:11:14,145 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 15:11:14,145 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 15:11:14,145 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 15:11:14,146 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 15:11:14,618 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 15:11:15,733 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 15:11:15,733 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 15:11:15,733 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 15:11:15,734 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 15:11:16,084 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 15:11:16,443 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 15:11:16,443 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 15:11:16,621 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 15:11:16,670 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 15:11:16,718 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 15:11:16,718 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 15:11:16,718 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 15:11:21,733 - test_advanced_rstp_mechanisms - INFO - 检测到的链路类型: {}
2025-09-09 15:11:21,734 - test_advanced_rstp_mechanisms - INFO - 测试点对点链路收敛性能
2025-09-09 15:11:24,547 - test_advanced_rstp_mechanisms - INFO - 收敛时间: 2.81秒
2025-09-09 15:11:24,548 - test_advanced_rstp_mechanisms - INFO - 验证链路类型识别
2025-09-09 15:11:24,548 - test_advanced_rstp_mechanisms - INFO - 不同链路类型行为差异测试通过
2025-09-09 15:11:24,548 - RSTPTest - INFO - 测试完成: test_shared_vs_point_to_point_links (耗时: 14.08秒)
2025-09-09 15:11:24,549 - RSTPTest - INFO - ============================================================

2025-09-09 15:11:24,549 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 15:11:24,549 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 15:11:24,550 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 15:11:24,686 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 15:11:24,686 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 15:11:24,813 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 15:11:24,813 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 15:11:24,930 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 15:11:24,930 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 15:11:24,931 - RSTPTest - INFO - ============================================================
2025-09-09 15:11:24,931 - RSTPTest - INFO - 开始测试: test_backup_port_concept_verification
2025-09-09 15:11:24,931 - RSTPTest - INFO - ============================================================
2025-09-09 15:11:24,932 - test_backup_port_simulation - INFO - 开始备份端口概念验证测试
2025-09-09 15:11:24,932 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 15:11:24,933 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 15:11:24,933 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 15:11:24,933 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 15:11:24,933 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 15:11:24,933 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 15:11:24,934 - NetworkTopology - INFO - DUT: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 15:11:24,934 - NetworkTopology - INFO - DUT: 检查mstpd支持...
2025-09-09 15:11:24,939 - NetworkTopology - INFO - DUT: mstpd检查结果: code=1
2025-09-09 15:11:24,940 - NetworkTopology - INFO - DUT: 检查iproute2支持...
2025-09-09 15:11:24,988 - NetworkTopology - INFO - DUT: ip命令检查: code=0
2025-09-09 15:11:24,988 - NetworkTopology - INFO - DUT: 使用iproute2配置RSTP
2025-09-09 15:11:24,988 - NetworkTopology - INFO - DUT: 最终选择RSTP方法: iproute2
2025-09-09 15:11:24,988 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 15:11:24,988 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 15:11:25,291 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 15:11:25,687 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 15:11:25,687 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 15:11:25,688 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 15:11:25,688 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 15:11:25,807 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 15:11:25,928 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 15:11:25,928 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 15:11:25,983 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 15:11:26,032 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 15:11:26,081 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 15:11:26,081 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 15:11:26,081 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 15:11:26,082 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 15:11:26,082 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 15:11:26,082 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 15:11:26,082 - NetworkTopology - INFO - TestNode1: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 15:11:26,082 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 15:11:26,093 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 15:11:26,093 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 15:11:26,223 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=1, output=
2025-09-09 15:11:26,223 - NetworkTopology - INFO - TestNode1: 尝试启动mstpd服务...
2025-09-09 15:11:26,427 - NetworkTopology - INFO - TestNode1: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 15:11:28,529 - NetworkTopology - INFO - TestNode1: mstpd启动后状态: code=1
2025-09-09 15:11:28,530 - NetworkTopology - INFO - TestNode1: mstpd启动失败，使用iproute2
2025-09-09 15:11:28,530 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: iproute2
2025-09-09 15:11:28,530 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 15:11:28,530 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 15:11:29,082 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 15:11:30,150 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 15:11:30,150 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 15:11:30,151 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 15:11:30,151 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 15:11:30,502 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 15:11:30,864 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 15:11:30,864 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 15:11:31,047 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 15:11:31,096 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 15:11:31,144 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 15:11:31,144 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 15:11:31,144 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 15:11:31,144 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 15:11:31,145 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 15:11:31,145 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 15:11:31,145 - NetworkTopology - INFO - TestNode2: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 15:11:31,145 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 15:11:31,152 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 15:11:31,153 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 15:11:31,279 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=1, output=
2025-09-09 15:11:31,279 - NetworkTopology - INFO - TestNode2: 尝试启动mstpd服务...
2025-09-09 15:11:31,443 - NetworkTopology - INFO - TestNode2: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 15:11:33,541 - NetworkTopology - INFO - TestNode2: mstpd启动后状态: code=1
2025-09-09 15:11:33,542 - NetworkTopology - INFO - TestNode2: mstpd启动失败，使用iproute2
2025-09-09 15:11:33,542 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: iproute2
2025-09-09 15:11:33,542 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 15:11:33,542 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 15:11:34,061 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 15:11:35,108 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 15:11:35,109 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 15:11:35,109 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 15:11:35,109 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 15:11:35,460 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 15:11:35,823 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 15:11:35,824 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 15:11:36,003 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 15:11:36,051 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 15:11:36,099 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 15:11:36,100 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 15:11:36,100 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 15:11:46,166 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:11:46,319 - test_backup_port_simulation - INFO - === 当前端口状态 ===
2025-09-09 15:11:46,320 - test_backup_port_simulation - INFO - 端口 eth0: 角色=root, 状态=disabled
2025-09-09 15:11:46,320 - test_backup_port_simulation - INFO - 端口 eth2: 角色=unknown, 状态=disabled
2025-09-09 15:11:46,320 - test_backup_port_simulation - INFO - 端口 eth3: 角色=unknown, 状态=disabled
2025-09-09 15:11:46,320 - test_backup_port_simulation - INFO - ⚠ 在当前点对点拓扑中未检测到备份端口（符合预期）
2025-09-09 15:11:46,320 - test_backup_port_simulation - INFO - 备份端口通常出现在共享介质网段中，当前测试环境为点对点链路
2025-09-09 15:11:46,321 - test_backup_port_simulation - INFO - 端口角色分布: {}
2025-09-09 15:11:46,321 - test_backup_port_simulation - INFO - === RSTP端口角色覆盖分析 ===
2025-09-09 15:11:46,321 - test_backup_port_simulation - INFO - - root端口: 未检测到
2025-09-09 15:11:46,321 - test_backup_port_simulation - INFO - - designated端口: 未检测到
2025-09-09 15:11:46,321 - test_backup_port_simulation - INFO - - alternate端口: 未检测到
2025-09-09 15:11:46,321 - test_backup_port_simulation - INFO - - backup端口: 未检测到（在点对点拓扑中为正常现象）
2025-09-09 15:11:46,321 - test_backup_port_simulation - INFO - 备份端口概念验证测试完成
2025-09-09 15:11:46,322 - RSTPTest - INFO - 测试完成: test_backup_port_concept_verification (耗时: 21.39秒)
2025-09-09 15:11:46,322 - RSTPTest - INFO - ============================================================

2025-09-09 15:11:46,324 - RSTPTest - INFO - ============================================================
2025-09-09 15:11:46,324 - RSTPTest - INFO - 开始测试: test_shared_medium_simulation_attempt
2025-09-09 15:11:46,324 - RSTPTest - INFO - ============================================================
2025-09-09 15:11:46,324 - test_backup_port_simulation - INFO - 开始共享介质模拟尝试
2025-09-09 15:11:46,325 - test_backup_port_simulation - INFO - === 尝试创建共享介质模拟场景 ===
2025-09-09 15:11:46,325 - test_backup_port_simulation - INFO - 创建中心交换机模拟共享介质...
2025-09-09 15:11:46,325 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 15:11:46,325 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 15:11:46,325 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 15:11:46,325 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 15:11:46,326 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 15:11:46,326 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 15:11:46,326 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 15:11:46,326 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 15:11:46,611 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 15:11:47,007 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 15:11:47,008 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 15:11:47,008 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 15:11:47,008 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 15:11:47,133 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 15:11:47,257 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 15:11:47,257 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 15:11:47,311 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 15:11:47,364 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 15:11:47,412 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 15:11:47,412 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 15:11:47,413 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 15:11:47,413 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 15:11:47,413 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 15:11:47,413 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 15:11:47,413 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 15:11:47,414 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 15:11:47,925 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 15:11:49,057 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 15:11:49,057 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 15:11:49,058 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 15:11:49,058 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 15:11:49,382 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 15:11:49,705 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 15:11:49,705 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 15:11:49,884 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 15:11:49,932 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 15:11:49,980 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 15:11:49,980 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 15:11:49,980 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 15:11:49,980 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 15:11:49,981 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 15:11:49,981 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 15:11:49,981 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 15:11:49,981 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 15:11:50,488 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 15:11:51,574 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 15:11:51,574 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 15:11:51,574 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 15:11:51,574 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 15:11:51,909 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 15:11:52,263 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 15:11:52,263 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 15:11:52,443 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 15:11:52,491 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 15:11:52,539 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 15:11:52,539 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 15:11:52,539 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 15:12:02,602 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:12:02,760 - test_backup_port_simulation - INFO - === 分析当前端口配置 ===
2025-09-09 15:12:02,760 - test_backup_port_simulation - INFO - ⚠ 未检测到备份端口
2025-09-09 15:12:02,760 - test_backup_port_simulation - INFO - 这在当前测试环境中是正常的，因为缺乏真正的共享介质
2025-09-09 15:12:02,761 - test_backup_port_simulation - INFO - 共享介质模拟尝试完成
2025-09-09 15:12:02,761 - RSTPTest - INFO - 测试完成: test_shared_medium_simulation_attempt (耗时: 16.44秒)
2025-09-09 15:12:02,762 - RSTPTest - INFO - ============================================================

2025-09-09 15:12:02,763 - RSTPTest - INFO - ============================================================
2025-09-09 15:12:02,763 - RSTPTest - INFO - 开始测试: test_backup_port_documentation_verification
2025-09-09 15:12:02,764 - RSTPTest - INFO - ============================================================
2025-09-09 15:12:02,764 - test_backup_port_simulation - INFO - 开始备份端口文档验证
2025-09-09 15:12:02,764 - test_backup_port_simulation - INFO - ✓ PortRole.BACKUP 存在
2025-09-09 15:12:02,764 - test_backup_port_simulation - INFO - === 备份端口理论特性验证 ===
2025-09-09 15:12:02,765 - test_backup_port_simulation - INFO - purpose: 为共享介质网段提供冗余
2025-09-09 15:12:02,765 - test_backup_port_simulation - INFO - difference_from_alternate: 备份端口是同一交换机上指定端口的备份，而备用端口是不同交换机提供的路径
2025-09-09 15:12:02,765 - test_backup_port_simulation - INFO - state: Discarding
2025-09-09 15:12:02,765 - test_backup_port_simulation - INFO - scenario: 出现在连接到集线器或共享介质的场景中
2025-09-09 15:12:02,766 - test_backup_port_simulation - INFO - fast_transition: 当对应的指定端口失效时，可以快速转换为指定端口
2025-09-09 15:12:02,766 - test_backup_port_simulation - INFO - === 端口角色对比 ===
2025-09-09 15:12:02,766 - test_backup_port_simulation - INFO - root: 连接到根桥的最佳路径
2025-09-09 15:12:02,766 - test_backup_port_simulation - INFO - designated: 为网段提供转发服务
2025-09-09 15:12:02,766 - test_backup_port_simulation - INFO - alternate: 提供到根桥的备用路径（来自其他交换机）
2025-09-09 15:12:02,767 - test_backup_port_simulation - INFO - backup: 同一交换机上指定端口的备份（共享介质场景）
2025-09-09 15:12:02,767 - test_backup_port_simulation - INFO - === 测试覆盖率分析 ===
2025-09-09 15:12:02,767 - test_backup_port_simulation - INFO - 已覆盖: Root Port, Designated Port, Alternate Port, Disabled Port
2025-09-09 15:12:02,767 - test_backup_port_simulation - INFO - 部分覆盖: Backup Port (概念验证)
2025-09-09 15:12:02,768 - test_backup_port_simulation - INFO - 覆盖限制: 测试框架无法创建真正的共享介质拓扑
2025-09-09 15:12:02,768 - test_backup_port_simulation - INFO - 建议: 在实际部署环境中使用集线器或配置交换机共享模式进行完整测试
2025-09-09 15:12:02,769 - test_backup_port_simulation - INFO - 备份端口文档验证完成
2025-09-09 15:12:02,770 - RSTPTest - INFO - 测试完成: test_backup_port_documentation_verification (耗时: 0.01秒)
2025-09-09 15:12:02,770 - RSTPTest - INFO - ============================================================

2025-09-09 15:12:02,770 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 15:12:02,771 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 15:12:02,771 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 15:12:02,937 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 15:12:02,937 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 15:12:03,061 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 15:12:03,062 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 15:12:03,179 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 15:12:03,179 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 15:12:03,179 - RSTPTest - INFO - ============================================================
2025-09-09 15:12:03,180 - RSTPTest - INFO - 开始测试: test_direct_link_failure
2025-09-09 15:12:03,180 - RSTPTest - INFO - ============================================================
2025-09-09 15:12:03,181 - test_convergence - INFO - 开始直接链路故障测试
2025-09-09 15:12:03,181 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 15:12:03,181 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 15:12:03,181 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 15:12:03,181 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 15:12:03,181 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 15:12:03,182 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 15:12:03,182 - NetworkTopology - INFO - DUT: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 15:12:03,182 - NetworkTopology - INFO - DUT: 检查mstpd支持...
2025-09-09 15:12:03,187 - NetworkTopology - INFO - DUT: mstpd检查结果: code=1
2025-09-09 15:12:03,187 - NetworkTopology - INFO - DUT: 检查iproute2支持...
2025-09-09 15:12:03,236 - NetworkTopology - INFO - DUT: ip命令检查: code=0
2025-09-09 15:12:03,237 - NetworkTopology - INFO - DUT: 使用iproute2配置RSTP
2025-09-09 15:12:03,237 - NetworkTopology - INFO - DUT: 最终选择RSTP方法: iproute2
2025-09-09 15:12:03,237 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 15:12:03,237 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 15:12:03,554 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 15:12:03,943 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 15:12:03,943 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 15:12:03,944 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 15:12:03,944 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 15:12:04,057 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 15:12:04,174 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 15:12:04,174 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 15:12:04,231 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 15:12:04,279 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 15:12:04,327 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 15:12:04,327 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 15:12:04,328 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 15:12:04,328 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 15:12:04,328 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 15:12:04,328 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 15:12:04,328 - NetworkTopology - INFO - TestNode1: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 15:12:04,329 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 15:12:04,336 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 15:12:04,336 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 15:12:04,452 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=1, output=
2025-09-09 15:12:04,453 - NetworkTopology - INFO - TestNode1: 尝试启动mstpd服务...
2025-09-09 15:12:04,620 - NetworkTopology - INFO - TestNode1: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 15:12:06,700 - NetworkTopology - INFO - TestNode1: mstpd启动后状态: code=1
2025-09-09 15:12:06,700 - NetworkTopology - INFO - TestNode1: mstpd启动失败，使用iproute2
2025-09-09 15:12:06,701 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: iproute2
2025-09-09 15:12:06,701 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 15:12:06,701 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 15:12:07,205 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 15:12:08,232 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 15:12:08,232 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 15:12:08,232 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 15:12:08,233 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 15:12:08,559 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 15:12:08,874 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 15:12:08,874 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 15:12:09,037 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 15:12:09,085 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 15:12:09,135 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 15:12:09,136 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 15:12:09,136 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 15:12:09,136 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 15:12:09,136 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 15:12:09,137 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 15:12:09,137 - NetworkTopology - INFO - TestNode2: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 15:12:09,137 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 15:12:09,144 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 15:12:09,144 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 15:12:09,257 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=1, output=
2025-09-09 15:12:09,258 - NetworkTopology - INFO - TestNode2: 尝试启动mstpd服务...
2025-09-09 15:12:09,424 - NetworkTopology - INFO - TestNode2: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 15:12:11,510 - NetworkTopology - INFO - TestNode2: mstpd启动后状态: code=1
2025-09-09 15:12:11,510 - NetworkTopology - INFO - TestNode2: mstpd启动失败，使用iproute2
2025-09-09 15:12:11,511 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: iproute2
2025-09-09 15:12:11,511 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 15:12:11,511 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 15:12:12,031 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 15:12:13,050 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 15:12:13,050 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 15:12:13,051 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 15:12:13,051 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 15:12:13,370 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 15:12:13,706 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 15:12:13,707 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 15:12:13,868 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 15:12:13,917 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 15:12:13,966 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 15:12:13,966 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 15:12:13,966 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 15:12:14,234 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 15:12:14,298 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:12:15,020 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.79秒
2025-09-09 15:12:15,020 - test_convergence - INFO - 初始收敛时间: 0.79秒
2025-09-09 15:12:15,081 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:12:15,239 - test_convergence - INFO - DUT的Root Port: eth2
2025-09-09 15:12:15,240 - FaultInjector_DUT - INFO - 断开链路: eth2
2025-09-09 15:12:15,362 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth2 (code=1)，将在逻辑上标记为已断开
2025-09-09 15:12:15,362 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 15:12:15,478 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:12:16,376 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.01秒
2025-09-09 15:12:16,445 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:12:16,919 - RSTPTest - INFO - 测试完成: test_direct_link_failure (耗时: 13.74秒)
2025-09-09 15:12:16,919 - RSTPTest - INFO - ============================================================

2025-09-09 15:12:16,958 - RSTPTest - INFO - ============================================================
2025-09-09 15:12:16,958 - RSTPTest - INFO - 开始测试: test_multiple_link_failures
2025-09-09 15:12:16,958 - RSTPTest - INFO - ============================================================
2025-09-09 15:12:16,959 - test_convergence - INFO - 开始多重链路故障测试
2025-09-09 15:12:16,959 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 15:12:16,959 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 15:12:16,959 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 15:12:16,959 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 15:12:16,960 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 15:12:16,960 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 15:12:16,960 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 15:12:16,960 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 15:12:17,238 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 15:12:17,654 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 15:12:17,654 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 15:12:17,655 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 15:12:17,655 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 15:12:17,778 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 15:12:17,898 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 15:12:17,898 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 15:12:17,950 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 15:12:17,999 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 15:12:18,051 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 15:12:18,051 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 15:12:18,051 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 15:12:18,052 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 15:12:18,052 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 15:12:18,052 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 15:12:18,052 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 15:12:18,053 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 15:12:18,564 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 15:12:19,646 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 15:12:19,646 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 15:12:19,646 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 15:12:19,647 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 15:12:20,006 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 15:12:20,371 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 15:12:20,371 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 15:12:20,552 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 15:12:20,600 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 15:12:20,648 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 15:12:20,649 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 15:12:20,649 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 15:12:20,649 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 15:12:20,649 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 15:12:20,650 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 15:12:20,650 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 15:12:20,650 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 15:12:21,132 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 15:12:22,201 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 15:12:22,201 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 15:12:22,201 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 15:12:22,202 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 15:12:22,529 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 15:12:22,868 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 15:12:22,868 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 15:12:23,031 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 15:12:23,079 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 15:12:23,127 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 15:12:23,127 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 15:12:23,128 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 15:12:23,128 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 15:12:23,193 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:12:23,834 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.71秒
2025-09-09 15:12:23,834 - test_convergence - INFO - 注入故障: eth0
2025-09-09 15:12:23,834 - FaultInjector_DUT - INFO - 断开链路: eth0
2025-09-09 15:12:23,910 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth0 (code=1)，将在逻辑上标记为已断开
2025-09-09 15:12:23,910 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 15:12:24,021 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:12:24,680 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.77秒
2025-09-09 15:12:24,681 - test_convergence - INFO - eth0故障收敛时间: 0.77秒
2025-09-09 15:12:26,681 - test_convergence - INFO - 注入故障: eth2
2025-09-09 15:12:26,682 - FaultInjector_DUT - INFO - 断开链路: eth2
2025-09-09 15:12:26,757 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth2 (code=1)，将在逻辑上标记为已断开
2025-09-09 15:12:26,757 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 15:12:26,861 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:12:27,473 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.72秒
2025-09-09 15:12:27,473 - test_convergence - INFO - eth2故障收敛时间: 0.72秒
2025-09-09 15:12:29,474 - FaultInjector_DUT - INFO - 恢复链路: eth0
2025-09-09 15:12:29,554 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth0 (code=1)，将在逻辑上标记为已恢复
2025-09-09 15:12:29,554 - FaultInjector_DUT - INFO - 恢复链路: eth2
2025-09-09 15:12:29,677 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth2 (code=1)，将在逻辑上标记为已恢复
2025-09-09 15:12:29,677 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 15:12:29,785 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:12:30,387 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.71秒
2025-09-09 15:12:30,387 - test_convergence - INFO - 最终恢复收敛时间: 0.71秒
2025-09-09 15:12:30,388 - test_convergence - INFO - 多重链路故障测试通过
2025-09-09 15:12:30,388 - RSTPTest - INFO - 测试完成: test_multiple_link_failures (耗时: 13.43秒)
2025-09-09 15:12:30,388 - RSTPTest - INFO - ============================================================

2025-09-09 15:12:30,390 - RSTPTest - INFO - ============================================================
2025-09-09 15:12:30,390 - RSTPTest - INFO - 开始测试: test_convergence_with_traffic
2025-09-09 15:12:30,390 - RSTPTest - INFO - ============================================================
2025-09-09 15:12:30,391 - test_convergence - INFO - 开始带流量的收敛测试
2025-09-09 15:12:30,391 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 15:12:30,391 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 15:12:30,391 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 15:12:30,391 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 15:12:30,391 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 15:12:30,392 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 15:12:30,392 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 15:12:30,392 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 15:12:30,665 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 15:12:31,054 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 15:12:31,054 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 15:12:31,054 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 15:12:31,054 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 15:12:31,170 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 15:12:31,286 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 15:12:31,286 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 15:12:31,343 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 15:12:31,391 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 15:12:31,439 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 15:12:31,439 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 15:12:31,440 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 15:12:31,440 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 15:12:31,440 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 15:12:31,440 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 15:12:31,440 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 15:12:31,441 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 15:12:31,937 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 15:12:33,027 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 15:12:33,027 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 15:12:33,027 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 15:12:33,028 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 15:12:33,385 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 15:12:33,723 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 15:12:33,723 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 15:12:33,887 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 15:12:33,934 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 15:12:33,982 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 15:12:33,982 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 15:12:33,983 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 15:12:33,983 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 15:12:33,983 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 15:12:33,983 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 15:12:33,983 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 15:12:33,983 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 15:12:34,498 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 15:12:35,545 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 15:12:35,545 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 15:12:35,546 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 15:12:35,546 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 15:12:35,876 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 15:12:36,228 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 15:12:36,228 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 15:12:36,405 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 15:12:36,453 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 15:12:36,500 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 15:12:36,501 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 15:12:36,501 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 15:12:42,611 - TrafficGenerator - INFO - 启动iperf3服务器: 192.168.184.131:5201
2025-09-09 15:12:44,687 - TrafficGenerator - ERROR - iperf3服务器启动失败
2025-09-09 15:12:47,613 - TrafficGenerator - INFO - 启动iperf3客户端: -> 192.168.184.131:5201
2025-09-09 15:12:47,613 - TrafficGenerator - INFO - iperf3客户端已启动 (udp, 100M)
2025-09-09 15:12:52,613 - FaultInjector_DUT - INFO - 断开链路: eth0
2025-09-09 15:12:52,689 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth0 (code=1)，将在逻辑上标记为已断开
2025-09-09 15:13:02,690 - test_convergence - INFO - 丢包数: 0
2025-09-09 15:13:02,690 - test_convergence - INFO - 估计中断时间: 0.000秒
2025-09-09 15:13:02,690 - TrafficGenerator - INFO - 停止流量生成
2025-09-09 15:13:04,750 - test_convergence - INFO - 带流量的收敛测试通过
2025-09-09 15:13:04,751 - RSTPTest - INFO - 测试完成: test_convergence_with_traffic (耗时: 34.36秒)
2025-09-09 15:13:04,751 - RSTPTest - INFO - ============================================================

2025-09-09 15:13:04,752 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 15:13:04,752 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 15:13:04,753 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 15:13:04,896 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 15:13:04,896 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 15:13:05,029 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 15:13:05,029 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 15:13:05,157 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 15:13:05,157 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 15:13:05,158 - RSTPTest - INFO - ============================================================
2025-09-09 15:13:05,158 - RSTPTest - INFO - 开始测试: test_backup_port_simulation
2025-09-09 15:13:05,158 - RSTPTest - INFO - ============================================================
2025-09-09 15:13:05,159 - test_enhanced_rstp_coverage - INFO - 开始备份端口模拟测试
2025-09-09 15:13:05,159 - test_enhanced_rstp_coverage - INFO - 创建模拟共享网段拓扑
2025-09-09 15:13:05,667 - test_enhanced_rstp_coverage - INFO - ✓ 创建连接: rstp0:dut_port1 <-> shared_segment:shared_port1
2025-09-09 15:13:06,095 - test_enhanced_rstp_coverage - INFO - ✓ 创建连接: rstp0:dut_port2 <-> shared_segment:shared_port2
2025-09-09 15:13:06,903 - test_enhanced_rstp_coverage - INFO - ✓ 创建远程交换机: remote_switch
2025-09-09 15:13:06,904 - test_enhanced_rstp_coverage - INFO - 等待RSTP收敛...
2025-09-09 15:13:21,968 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:13:22,123 - test_enhanced_rstp_coverage - INFO - DUT桥信息: BridgeInfo(bridge_id='', root_id='', root_port='eth0', root_path_cost=0, protocol_version='unknown', hello_time=0, forward_delay=0, max_age=0, topology_changes=0, ports={'eth0': PortInfo(name='eth0', role=<PortRole.ROOT: 'root'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth2': PortInfo(name='eth2', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth3': PortInfo(name='eth3', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')})
2025-09-09 15:13:22,123 - test_enhanced_rstp_coverage - INFO - 清理测试环境
2025-09-09 15:13:22,794 - test_enhanced_rstp_coverage - INFO - ✓ 备份端口模拟测试完成
2025-09-09 15:13:22,796 - RSTPTest - INFO - 测试完成: test_backup_port_simulation (耗时: 17.64秒)
2025-09-09 15:13:22,796 - RSTPTest - INFO - ============================================================

2025-09-09 15:13:22,797 - RSTPTest - INFO - ============================================================
2025-09-09 15:13:22,798 - RSTPTest - INFO - 开始测试: test_comprehensive_port_state_transitions
2025-09-09 15:13:22,798 - RSTPTest - INFO - ============================================================
2025-09-09 15:13:22,798 - test_enhanced_rstp_coverage - INFO - 开始全面端口状态转换测试
2025-09-09 15:13:22,799 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 15:13:22,799 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 15:13:22,799 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 15:13:22,799 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 15:13:22,799 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 15:13:22,799 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 15:13:22,800 - NetworkTopology - INFO - DUT: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 15:13:22,800 - NetworkTopology - INFO - DUT: 检查mstpd支持...
2025-09-09 15:13:22,842 - NetworkTopology - INFO - DUT: mstpd检查结果: code=1
2025-09-09 15:13:22,842 - NetworkTopology - INFO - DUT: 检查iproute2支持...
2025-09-09 15:13:22,890 - NetworkTopology - INFO - DUT: ip命令检查: code=0
2025-09-09 15:13:22,890 - NetworkTopology - INFO - DUT: 使用iproute2配置RSTP
2025-09-09 15:13:22,890 - NetworkTopology - INFO - DUT: 最终选择RSTP方法: iproute2
2025-09-09 15:13:22,891 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 15:13:22,891 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 15:13:23,201 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 15:13:23,597 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 15:13:23,597 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 15:13:23,598 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 15:13:23,598 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 15:13:23,717 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 15:13:23,833 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 15:13:23,833 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 15:13:23,890 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 15:13:23,938 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 15:13:23,986 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 15:13:23,986 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 15:13:23,986 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 15:13:23,987 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 15:13:23,987 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 15:13:23,987 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 15:13:23,987 - NetworkTopology - INFO - TestNode1: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 15:13:23,987 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 15:13:23,994 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 15:13:23,995 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 15:13:24,128 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=1, output=
2025-09-09 15:13:24,129 - NetworkTopology - INFO - TestNode1: 尝试启动mstpd服务...
2025-09-09 15:13:24,312 - NetworkTopology - INFO - TestNode1: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 15:13:26,395 - NetworkTopology - INFO - TestNode1: mstpd启动后状态: code=1
2025-09-09 15:13:26,396 - NetworkTopology - INFO - TestNode1: mstpd启动失败，使用iproute2
2025-09-09 15:13:26,396 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: iproute2
2025-09-09 15:13:26,396 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 15:13:26,396 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 15:13:26,977 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 15:13:28,105 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 15:13:28,106 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 15:13:28,106 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 15:13:28,106 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 15:13:28,443 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 15:13:28,786 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 15:13:28,787 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 15:13:28,943 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 15:13:28,992 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 15:13:29,042 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 15:13:29,042 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 15:13:29,042 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 15:13:29,043 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 15:13:29,043 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 15:13:29,043 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 15:13:29,043 - NetworkTopology - INFO - TestNode2: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 15:13:29,043 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 15:13:29,052 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 15:13:29,052 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 15:13:29,181 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=1, output=
2025-09-09 15:13:29,182 - NetworkTopology - INFO - TestNode2: 尝试启动mstpd服务...
2025-09-09 15:13:29,347 - NetworkTopology - INFO - TestNode2: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 15:13:31,443 - NetworkTopology - INFO - TestNode2: mstpd启动后状态: code=1
2025-09-09 15:13:31,444 - NetworkTopology - INFO - TestNode2: mstpd启动失败，使用iproute2
2025-09-09 15:13:31,444 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: iproute2
2025-09-09 15:13:31,444 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 15:13:31,444 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 15:13:32,010 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 15:13:33,108 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 15:13:33,109 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 15:13:33,109 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 15:13:33,109 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 15:13:33,503 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 15:13:33,874 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 15:13:33,875 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 15:13:34,044 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 15:13:34,094 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 15:13:34,143 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 15:13:34,144 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 15:13:34,144 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 15:13:34,303 - test_enhanced_rstp_coverage - INFO - 等待初始收敛...
2025-09-09 15:13:34,303 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 15:13:34,409 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:13:34,566 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.26秒
2025-09-09 15:13:34,676 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:13:34,846 - RSTPTest - INFO - 测试完成: test_comprehensive_port_state_transitions (耗时: 12.05秒)
2025-09-09 15:13:34,846 - RSTPTest - INFO - ============================================================

2025-09-09 15:13:34,848 - RSTPTest - INFO - ============================================================
2025-09-09 15:13:34,848 - RSTPTest - INFO - 开始测试: test_detailed_bpdu_analysis
2025-09-09 15:13:34,848 - RSTPTest - INFO - ============================================================
2025-09-09 15:13:34,849 - test_enhanced_rstp_coverage - INFO - 开始详细BPDU分析测试
2025-09-09 15:13:34,849 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 15:13:34,849 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 15:13:34,849 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 15:13:34,850 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 15:13:34,850 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 15:13:34,850 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 15:13:34,850 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 15:13:34,850 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 15:13:35,153 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 15:13:35,544 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 15:13:35,545 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 15:13:35,545 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 15:13:35,545 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 15:13:35,669 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 15:13:35,789 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 15:13:35,790 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 15:13:35,850 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 15:13:35,898 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 15:13:35,946 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 15:13:35,946 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 15:13:35,946 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 15:13:35,947 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 15:13:35,947 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 15:13:35,947 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 15:13:35,947 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 15:13:35,947 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 15:13:36,490 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 15:13:37,588 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 15:13:37,589 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 15:13:37,589 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 15:13:37,589 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 15:13:37,976 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 15:13:38,307 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 15:13:38,307 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 15:13:38,481 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 15:13:38,529 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 15:13:38,577 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 15:13:38,578 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 15:13:38,578 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 15:13:38,578 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 15:13:38,578 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 15:13:38,578 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 15:13:38,578 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 15:13:38,578 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 15:13:39,074 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 15:13:40,193 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 15:13:40,194 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 15:13:40,194 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 15:13:40,194 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 15:13:40,520 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 15:13:40,899 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 15:13:40,899 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 15:13:41,102 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 15:13:41,152 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 15:13:41,200 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 15:13:41,201 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 15:13:41,201 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 15:13:41,517 - test_enhanced_rstp_coverage - INFO - 等待RSTP收敛...
2025-09-09 15:13:41,517 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 15:13:41,580 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:13:41,734 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.22秒
2025-09-09 15:13:41,840 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:13:41,997 - test_enhanced_rstp_coverage - INFO - Hello Time: 0秒
2025-09-09 15:13:41,998 - test_enhanced_rstp_coverage - INFO - === 测试1: 验证分布式BPDU生成 ===
2025-09-09 15:13:41,998 - test_enhanced_rstp_coverage - INFO - 总共捕获0个BPDU，来自0个不同源
2025-09-09 15:13:42,015 - RSTPTest - INFO - 测试完成: test_detailed_bpdu_analysis (耗时: 7.17秒)
2025-09-09 15:13:42,015 - RSTPTest - INFO - ============================================================

2025-09-09 15:13:42,017 - RSTPTest - INFO - ============================================================
2025-09-09 15:13:42,017 - RSTPTest - INFO - 开始测试: test_topology_change_comprehensive
2025-09-09 15:13:42,017 - RSTPTest - INFO - ============================================================
2025-09-09 15:13:42,018 - test_enhanced_rstp_coverage - INFO - 开始全面拓扑变更测试
2025-09-09 15:13:42,018 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 15:13:42,019 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 15:13:42,019 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 15:13:42,019 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 15:13:42,019 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 15:13:42,019 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 15:13:42,020 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 15:13:42,020 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 15:13:42,324 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 15:13:42,721 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 15:13:42,721 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 15:13:42,722 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 15:13:42,722 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 15:13:42,841 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 15:13:42,965 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 15:13:42,965 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 15:13:43,021 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 15:13:43,070 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 15:13:43,118 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 15:13:43,118 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 15:13:43,118 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 15:13:43,118 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 15:13:43,119 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 15:13:43,119 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 15:13:43,119 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 15:13:43,119 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 15:13:43,597 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 15:13:44,664 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 15:13:44,665 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 15:13:44,665 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 15:13:44,665 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 15:13:44,987 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 15:13:45,316 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 15:13:45,316 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 15:13:45,476 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 15:13:45,524 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 15:13:45,574 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 15:13:45,574 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 15:13:45,574 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 15:13:45,574 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 15:13:45,575 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 15:13:45,575 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 15:13:45,575 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 15:13:45,575 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 15:13:46,117 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 15:13:47,195 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 15:13:47,196 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 15:13:47,196 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 15:13:47,196 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 15:13:47,542 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 15:13:47,902 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 15:13:47,902 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 15:13:48,074 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 15:13:48,123 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 15:13:48,171 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 15:13:48,172 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 15:13:48,172 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 15:13:48,312 - test_enhanced_rstp_coverage - INFO - 等待初始收敛...
2025-09-09 15:13:48,313 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 15:13:48,416 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:13:48,582 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.27秒
2025-09-09 15:13:48,688 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:13:49,005 - test_enhanced_rstp_coverage - INFO - 初始状态: DUT是根桥=True
2025-09-09 15:13:49,006 - test_enhanced_rstp_coverage - INFO - === 测试场景1: 根桥变更 ===
2025-09-09 15:13:49,006 - test_enhanced_rstp_coverage - INFO - === 测试场景2: 端口故障恢复 ===
2025-09-09 15:13:49,120 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:13:49,285 - test_enhanced_rstp_coverage - INFO - === 测试场景3: 端口优先级变更 ===
2025-09-09 15:13:49,392 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:13:49,548 - test_enhanced_rstp_coverage - WARNING - 未检测到明显的拓扑变更，可能是测试环境限制
2025-09-09 15:13:49,548 - test_enhanced_rstp_coverage - INFO - ✓ 全面拓扑变更测试完成
2025-09-09 15:13:49,549 - RSTPTest - INFO - 测试完成: test_topology_change_comprehensive (耗时: 7.53秒)
2025-09-09 15:13:49,550 - RSTPTest - INFO - ============================================================

2025-09-09 15:13:49,550 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 15:13:49,551 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 15:13:49,551 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 15:13:49,691 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 15:13:49,691 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 15:13:49,829 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 15:13:49,829 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 15:13:49,946 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 15:13:49,946 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 15:13:49,947 - RSTPTest - INFO - ============================================================
2025-09-09 15:13:49,947 - RSTPTest - INFO - 开始测试: test_rstp_reconvergence_no_switchover
2025-09-09 15:13:49,947 - RSTPTest - INFO - ============================================================
2025-09-09 15:13:49,948 - test_high_availability - INFO - 开始RSTP重构误判测试
2025-09-09 15:13:49,948 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 15:13:49,948 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 15:13:49,949 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 15:13:49,949 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 15:13:49,949 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 15:13:49,949 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 15:13:49,950 - NetworkTopology - INFO - DUT: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 15:13:49,950 - NetworkTopology - INFO - DUT: 检查mstpd支持...
2025-09-09 15:13:49,955 - NetworkTopology - INFO - DUT: mstpd检查结果: code=1
2025-09-09 15:13:49,956 - NetworkTopology - INFO - DUT: 检查iproute2支持...
2025-09-09 15:13:50,002 - NetworkTopology - INFO - DUT: ip命令检查: code=0
2025-09-09 15:13:50,002 - NetworkTopology - INFO - DUT: 使用iproute2配置RSTP
2025-09-09 15:13:50,002 - NetworkTopology - INFO - DUT: 最终选择RSTP方法: iproute2
2025-09-09 15:13:50,002 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 15:13:50,003 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 15:13:50,325 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 15:13:50,716 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 15:13:50,717 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 15:13:50,717 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 15:13:50,717 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 15:13:50,833 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 15:13:50,953 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 15:13:50,953 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 15:13:51,009 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 15:13:51,058 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 15:13:51,105 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 15:13:51,106 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 15:13:51,106 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 15:13:51,106 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 15:13:51,106 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 15:13:51,107 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 15:13:51,107 - NetworkTopology - INFO - TestNode1: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 15:13:51,107 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 15:13:51,114 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 15:13:51,115 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 15:13:51,236 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=1, output=
2025-09-09 15:13:51,236 - NetworkTopology - INFO - TestNode1: 尝试启动mstpd服务...
2025-09-09 15:13:51,405 - NetworkTopology - INFO - TestNode1: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 15:13:53,483 - NetworkTopology - INFO - TestNode1: mstpd启动后状态: code=1
2025-09-09 15:13:53,484 - NetworkTopology - INFO - TestNode1: mstpd启动失败，使用iproute2
2025-09-09 15:13:53,484 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: iproute2
2025-09-09 15:13:53,484 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 15:13:53,484 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 15:13:54,019 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 15:13:55,106 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 15:13:55,107 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 15:13:55,107 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 15:13:55,107 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 15:13:55,459 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 15:13:55,798 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 15:13:55,798 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 15:13:56,388 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 15:13:56,436 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 15:13:56,486 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 15:13:56,486 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 15:13:56,486 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 15:13:56,487 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 15:13:56,487 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 15:13:56,487 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 15:13:56,487 - NetworkTopology - INFO - TestNode2: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 15:13:56,487 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 15:13:56,495 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 15:13:56,495 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 15:13:56,619 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=1, output=
2025-09-09 15:13:56,619 - NetworkTopology - INFO - TestNode2: 尝试启动mstpd服务...
2025-09-09 15:13:56,793 - NetworkTopology - INFO - TestNode2: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 15:13:58,888 - NetworkTopology - INFO - TestNode2: mstpd启动后状态: code=1
2025-09-09 15:13:58,888 - NetworkTopology - INFO - TestNode2: mstpd启动失败，使用iproute2
2025-09-09 15:13:58,888 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: iproute2
2025-09-09 15:13:58,888 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 15:13:58,889 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 15:13:59,454 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 15:14:00,559 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 15:14:00,560 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 15:14:00,560 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 15:14:00,560 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 15:14:00,928 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 15:14:01,289 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 15:14:01,289 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 15:14:01,522 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 15:14:01,570 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 15:14:01,618 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 15:14:01,618 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 15:14:01,619 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 15:14:06,680 - test_high_availability - INFO - 初始HA状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-09 15:14:06,680 - test_high_availability - INFO - 在远端触发RSTP重构...
2025-09-09 15:14:06,680 - FaultInjector_TestNode2 - INFO - 断开链路: eth0
2025-09-09 15:14:06,856 - FaultInjector_TestNode2 - INFO - 链路已断开: eth0
2025-09-09 15:14:16,861 - test_high_availability - INFO - RSTP重构后HA状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-09 15:14:16,861 - FaultInjector_TestNode2 - INFO - 恢复链路: eth0
2025-09-09 15:14:16,999 - FaultInjector_TestNode2 - INFO - 链路已恢复: eth0
2025-09-09 15:14:16,999 - test_high_availability - INFO - RSTP重构误判测试完成
2025-09-09 15:14:17,001 - RSTPTest - INFO - 测试完成: test_rstp_reconvergence_no_switchover (耗时: 27.05秒)
2025-09-09 15:14:17,001 - RSTPTest - INFO - ============================================================

2025-09-09 15:14:17,003 - RSTPTest - INFO - ============================================================
2025-09-09 15:14:17,003 - RSTPTest - INFO - 开始测试: test_split_brain_scenario
2025-09-09 15:14:17,003 - RSTPTest - INFO - ============================================================
2025-09-09 15:14:17,004 - test_high_availability - INFO - 开始裂脑场景测试
2025-09-09 15:14:17,009 - test_high_availability - INFO - 初始状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-09 15:14:17,010 - test_high_availability - INFO - 断开同步链路: eth3
2025-09-09 15:14:17,010 - FaultInjector_DUT - INFO - 断开链路: eth3
2025-09-09 15:14:17,128 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth3 (code=1)，将在逻辑上标记为已断开
2025-09-09 15:14:27,129 - test_high_availability - WARNING - 裂脑测试需要访问两个控制器
2025-09-09 15:14:27,130 - FaultInjector_DUT - INFO - 恢复链路: eth3
2025-09-09 15:14:27,205 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth3 (code=1)，将在逻辑上标记为已恢复
2025-09-09 15:14:27,206 - test_high_availability - INFO - 裂脑场景测试完成
2025-09-09 15:14:27,206 - RSTPTest - INFO - 测试完成: test_split_brain_scenario (耗时: 10.20秒)
2025-09-09 15:14:27,206 - RSTPTest - INFO - ============================================================

2025-09-09 15:14:27,210 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 15:14:27,210 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 15:14:27,211 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 15:14:27,347 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 15:14:27,347 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 15:14:27,347 - RSTPTest - INFO - ============================================================
2025-09-09 15:14:27,348 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[12288]
2025-09-09 15:14:27,348 - RSTPTest - INFO - ============================================================
2025-09-09 15:14:27,348 - test_parameters - INFO - 测试网桥优先级: 12288
2025-09-09 15:14:27,424 - test_parameters - INFO - 创建OVS网桥 rstp0
2025-09-09 15:14:28,662 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-09 15:14:30,680 - test_parameters - INFO - 从OVS配置读取到优先级: 12288
2025-09-09 15:14:30,680 - test_parameters - INFO - 优先级12288设置成功
2025-09-09 15:14:30,681 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[12288] (耗时: 3.33秒)
2025-09-09 15:14:30,681 - RSTPTest - INFO - ============================================================

2025-09-09 15:14:30,682 - RSTPTest - INFO - ============================================================
2025-09-09 15:14:30,683 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[16384]
2025-09-09 15:14:30,683 - RSTPTest - INFO - ============================================================
2025-09-09 15:14:30,683 - test_parameters - INFO - 测试网桥优先级: 16384
2025-09-09 15:14:31,943 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-09 15:14:33,962 - test_parameters - INFO - 从OVS配置读取到优先级: 16384
2025-09-09 15:14:33,962 - test_parameters - INFO - 优先级16384设置成功
2025-09-09 15:14:33,963 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[16384] (耗时: 3.28秒)
2025-09-09 15:14:33,963 - RSTPTest - INFO - ============================================================

2025-09-09 15:14:33,964 - RSTPTest - INFO - ============================================================
2025-09-09 15:14:33,964 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[32768]
2025-09-09 15:14:33,965 - RSTPTest - INFO - ============================================================
2025-09-09 15:14:33,965 - test_parameters - INFO - 测试网桥优先级: 32768
2025-09-09 15:14:35,218 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-09 15:14:37,237 - test_parameters - INFO - 从OVS配置读取到优先级: 32768
2025-09-09 15:14:37,238 - test_parameters - INFO - 优先级32768设置成功
2025-09-09 15:14:37,238 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[32768] (耗时: 3.27秒)
2025-09-09 15:14:37,239 - RSTPTest - INFO - ============================================================

2025-09-09 15:14:37,240 - RSTPTest - INFO - ============================================================
2025-09-09 15:14:37,240 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[61440]
2025-09-09 15:14:37,240 - RSTPTest - INFO - ============================================================
2025-09-09 15:14:37,241 - test_parameters - INFO - 测试网桥优先级: 61440
2025-09-09 15:14:38,498 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-09 15:14:40,517 - test_parameters - INFO - 从OVS配置读取到优先级: 61440
2025-09-09 15:14:40,517 - test_parameters - INFO - 优先级61440设置成功
2025-09-09 15:14:40,518 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[61440] (耗时: 3.28秒)
2025-09-09 15:14:40,518 - RSTPTest - INFO - ============================================================

2025-09-09 15:14:40,519 - RSTPTest - INFO - ============================================================
2025-09-09 15:14:40,519 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[4097]
2025-09-09 15:14:40,519 - RSTPTest - INFO - ============================================================
2025-09-09 15:14:40,520 - test_parameters - INFO - 测试无效优先级: 4097
2025-09-09 15:14:41,880 - test_parameters - INFO - DUT处理无效优先级 4097 -> 4097
2025-09-09 15:14:41,880 - test_parameters - WARNING - DUT接受了非标准优先级值 4097，不符合802.1D标准（应为4096的倍数）
2025-09-09 15:14:41,880 - test_parameters - INFO - 无效优先级4097被正确处理
2025-09-09 15:14:41,881 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[4097] (耗时: 1.36秒)
2025-09-09 15:14:41,881 - RSTPTest - INFO - ============================================================

2025-09-09 15:14:41,883 - RSTPTest - INFO - ============================================================
2025-09-09 15:14:41,883 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[12289]
2025-09-09 15:14:41,883 - RSTPTest - INFO - ============================================================
2025-09-09 15:14:41,884 - test_parameters - INFO - 测试无效优先级: 12289
2025-09-09 15:14:43,234 - test_parameters - INFO - DUT处理无效优先级 12289 -> 12289
2025-09-09 15:14:43,234 - test_parameters - WARNING - DUT接受了非标准优先级值 12289，不符合802.1D标准（应为4096的倍数）
2025-09-09 15:14:43,234 - test_parameters - INFO - 无效优先级12289被正确处理
2025-09-09 15:14:43,235 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[12289] (耗时: 1.35秒)
2025-09-09 15:14:43,235 - RSTPTest - INFO - ============================================================

2025-09-09 15:14:43,236 - RSTPTest - INFO - ============================================================
2025-09-09 15:14:43,237 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[70000]
2025-09-09 15:14:43,237 - RSTPTest - INFO - ============================================================
2025-09-09 15:14:43,237 - test_parameters - INFO - 测试无效优先级: 70000
2025-09-09 15:14:44,591 - test_parameters - INFO - DUT处理无效优先级 70000 -> 70000
2025-09-09 15:14:44,592 - test_parameters - WARNING - DUT接受了非标准优先级值 70000，不符合802.1D标准（应为4096的倍数）
2025-09-09 15:14:44,592 - test_parameters - INFO - 无效优先级70000被正确处理
2025-09-09 15:14:44,593 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[70000] (耗时: 1.36秒)
2025-09-09 15:14:44,594 - RSTPTest - INFO - ============================================================

2025-09-09 15:14:44,595 - RSTPTest - INFO - ============================================================
2025-09-09 15:14:44,595 - RSTPTest - INFO - 开始测试: test_hello_time
2025-09-09 15:14:44,595 - RSTPTest - INFO - ============================================================
2025-09-09 15:14:44,596 - test_parameters - INFO - 测试Hello Time参数
2025-09-09 15:14:45,858 - test_parameters - INFO - 设置Hello Time: 1秒
2025-09-09 15:14:47,901 - test_parameters - INFO - Hello Time 1秒设置成功
2025-09-09 15:14:47,901 - test_parameters - INFO - 设置Hello Time: 2秒
2025-09-09 15:14:49,981 - test_parameters - INFO - Hello Time 2秒设置成功
2025-09-09 15:14:49,981 - test_parameters - INFO - 设置Hello Time: 5秒
2025-09-09 15:14:52,061 - test_parameters - INFO - Hello Time 5秒设置成功
2025-09-09 15:14:52,062 - test_parameters - INFO - Hello Time测试通过
2025-09-09 15:14:52,062 - RSTPTest - INFO - 测试完成: test_hello_time (耗时: 7.47秒)
2025-09-09 15:14:52,062 - RSTPTest - INFO - ============================================================

2025-09-09 15:14:52,064 - RSTPTest - INFO - ============================================================
2025-09-09 15:14:52,064 - RSTPTest - INFO - 开始测试: test_forward_delay
2025-09-09 15:14:52,064 - RSTPTest - INFO - ============================================================
2025-09-09 15:14:52,065 - test_parameters - INFO - 测试Forward Delay参数
2025-09-09 15:14:53,341 - test_parameters - INFO - 设置Forward Delay: 4秒
2025-09-09 15:14:55,383 - test_parameters - INFO - Forward Delay 4秒设置成功
2025-09-09 15:14:55,383 - test_parameters - INFO - 设置Forward Delay: 10秒
2025-09-09 15:14:57,470 - test_parameters - INFO - Forward Delay 10秒设置成功
2025-09-09 15:14:57,470 - test_parameters - INFO - 设置Forward Delay: 15秒
2025-09-09 15:14:59,549 - test_parameters - INFO - Forward Delay 15秒设置成功
2025-09-09 15:14:59,549 - test_parameters - INFO - Forward Delay测试通过
2025-09-09 15:14:59,550 - RSTPTest - INFO - 测试完成: test_forward_delay (耗时: 7.49秒)
2025-09-09 15:14:59,551 - RSTPTest - INFO - ============================================================

2025-09-09 15:14:59,552 - RSTPTest - INFO - ============================================================
2025-09-09 15:14:59,552 - RSTPTest - INFO - 开始测试: test_max_age
2025-09-09 15:14:59,552 - RSTPTest - INFO - ============================================================
2025-09-09 15:14:59,553 - test_parameters - INFO - 测试Max Age参数
2025-09-09 15:15:00,820 - test_parameters - INFO - 设置Max Age: 6秒
2025-09-09 15:15:02,863 - test_parameters - INFO - Max Age 6秒设置成功
2025-09-09 15:15:02,863 - test_parameters - INFO - 设置Max Age: 10秒
2025-09-09 15:15:04,944 - test_parameters - INFO - Max Age 10秒设置成功
2025-09-09 15:15:04,945 - test_parameters - INFO - 设置Max Age: 20秒
2025-09-09 15:15:07,024 - test_parameters - INFO - Max Age 20秒设置成功
2025-09-09 15:15:07,025 - test_parameters - INFO - Max Age测试通过
2025-09-09 15:15:07,026 - RSTPTest - INFO - 测试完成: test_max_age (耗时: 7.47秒)
2025-09-09 15:15:07,026 - RSTPTest - INFO - ============================================================

2025-09-09 15:15:07,152 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 15:15:07,153 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 15:15:07,269 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 15:15:07,270 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 15:15:07,270 - RSTPTest - INFO - ============================================================
2025-09-09 15:15:07,270 - RSTPTest - INFO - 开始测试: test_port_cost
2025-09-09 15:15:07,271 - RSTPTest - INFO - ============================================================
2025-09-09 15:15:07,271 - test_parameters - INFO - 测试端口路径成本
2025-09-09 15:15:07,272 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 15:15:07,272 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 15:15:07,272 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 15:15:07,272 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 15:15:07,273 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 15:15:07,273 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 15:15:07,273 - NetworkTopology - INFO - DUT: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 15:15:07,273 - NetworkTopology - INFO - DUT: 检查mstpd支持...
2025-09-09 15:15:07,278 - NetworkTopology - INFO - DUT: mstpd检查结果: code=1
2025-09-09 15:15:07,279 - NetworkTopology - INFO - DUT: 检查iproute2支持...
2025-09-09 15:15:07,324 - NetworkTopology - INFO - DUT: ip命令检查: code=0
2025-09-09 15:15:07,324 - NetworkTopology - INFO - DUT: 使用iproute2配置RSTP
2025-09-09 15:15:07,325 - NetworkTopology - INFO - DUT: 最终选择RSTP方法: iproute2
2025-09-09 15:15:07,325 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 15:15:07,325 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 15:15:07,627 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 15:15:08,023 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 15:15:08,024 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 15:15:08,024 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 15:15:08,024 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 15:15:08,139 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 15:15:08,259 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 15:15:08,260 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 15:15:08,320 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 15:15:08,368 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 15:15:08,416 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 15:15:08,417 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 15:15:08,417 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 15:15:08,417 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 15:15:08,417 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 15:15:08,417 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 15:15:08,418 - NetworkTopology - INFO - TestNode1: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 15:15:08,418 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 15:15:08,425 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 15:15:08,425 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 15:15:08,553 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=1, output=
2025-09-09 15:15:08,553 - NetworkTopology - INFO - TestNode1: 尝试启动mstpd服务...
2025-09-09 15:15:08,724 - NetworkTopology - INFO - TestNode1: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 15:15:10,798 - NetworkTopology - INFO - TestNode1: mstpd启动后状态: code=1
2025-09-09 15:15:10,798 - NetworkTopology - INFO - TestNode1: mstpd启动失败，使用iproute2
2025-09-09 15:15:10,798 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: iproute2
2025-09-09 15:15:10,799 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 15:15:10,799 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 15:15:11,372 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 15:15:12,473 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 15:15:12,473 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 15:15:12,473 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 15:15:12,474 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 15:15:12,818 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 15:15:13,138 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 15:15:13,139 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 15:15:13,347 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 15:15:13,397 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 15:15:13,446 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 15:15:13,447 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 15:15:13,447 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 15:15:13,447 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 15:15:13,447 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 15:15:13,447 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 15:15:13,447 - NetworkTopology - INFO - TestNode2: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 15:15:13,448 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 15:15:13,454 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 15:15:13,454 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 15:15:13,576 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=1, output=
2025-09-09 15:15:13,577 - NetworkTopology - INFO - TestNode2: 尝试启动mstpd服务...
2025-09-09 15:15:13,738 - NetworkTopology - INFO - TestNode2: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 15:15:15,818 - NetworkTopology - INFO - TestNode2: mstpd启动后状态: code=1
2025-09-09 15:15:15,819 - NetworkTopology - INFO - TestNode2: mstpd启动失败，使用iproute2
2025-09-09 15:15:15,819 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: iproute2
2025-09-09 15:15:15,819 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 15:15:15,819 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 15:15:16,353 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 15:16:17,075 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 15:16:17,076 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 15:16:17,076 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 15:16:17,076 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 15:16:37,310 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 15:16:55,498 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 15:16:55,498 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 15:17:02,775 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 15:17:02,826 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 15:17:02,876 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 15:17:02,876 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 15:17:02,877 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 15:17:07,878 - test_parameters - INFO - 设置端口eth0成本: 10
2025-09-09 15:17:07,894 - test_parameters - INFO - 设置端口eth0成本: 100
2025-09-09 15:17:07,953 - test_parameters - INFO - 设置端口eth0成本: 1000
2025-09-09 15:17:08,009 - test_parameters - INFO - 设置端口eth0成本: 20000
2025-09-09 15:17:08,069 - test_parameters - INFO - 端口成本测试通过
2025-09-09 15:17:08,070 - RSTPTest - INFO - 测试完成: test_port_cost (耗时: 120.80秒)
2025-09-09 15:17:08,070 - RSTPTest - INFO - ============================================================

2025-09-09 15:17:08,071 - RSTPTest - INFO - ============================================================
2025-09-09 15:17:08,072 - RSTPTest - INFO - 开始测试: test_parameter_persistence
2025-09-09 15:17:08,072 - RSTPTest - INFO - ============================================================
2025-09-09 15:17:08,072 - test_parameters - INFO - 测试参数持久性
2025-09-09 15:17:14,609 - test_parameters - INFO - 参数持久性测试通过
2025-09-09 15:17:14,610 - RSTPTest - INFO - 测试完成: test_parameter_persistence (耗时: 6.54秒)
2025-09-09 15:17:14,610 - RSTPTest - INFO - ============================================================

2025-09-09 15:17:14,611 - RSTPTest - INFO - ============================================================
2025-09-09 15:17:14,612 - RSTPTest - INFO - 开始测试: test_parameter_boundaries
2025-09-09 15:17:14,612 - RSTPTest - INFO - ============================================================
2025-09-09 15:17:14,613 - test_parameters - INFO - 测试参数边界值
2025-09-09 15:17:15,902 - test_parameters - INFO - 最小值0: 成功
2025-09-09 15:17:15,957 - test_parameters - INFO - 最大值65535: 成功
2025-09-09 15:17:16,014 - test_parameters - INFO - 正确拒绝了无效值-1
2025-09-09 15:17:16,069 - test_parameters - WARNING - 接受了无效值65536
2025-09-09 15:17:16,125 - test_parameters - INFO - 最小值1: 成功
2025-09-09 15:17:16,182 - test_parameters - INFO - 最大值10: 成功
2025-09-09 15:17:16,237 - test_parameters - INFO - 正确拒绝了无效值0
2025-09-09 15:17:16,292 - test_parameters - INFO - 正确拒绝了无效值11
2025-09-09 15:17:16,344 - test_parameters - INFO - 最小值4: 成功
2025-09-09 15:17:16,398 - test_parameters - INFO - 最大值30: 成功
2025-09-09 15:17:16,454 - test_parameters - WARNING - 接受了无效值3
2025-09-09 15:17:16,509 - test_parameters - INFO - 正确拒绝了无效值31
2025-09-09 15:17:16,562 - test_parameters - INFO - 最小值6: 成功
2025-09-09 15:17:16,617 - test_parameters - INFO - 最大值40: 成功
2025-09-09 15:17:16,672 - test_parameters - INFO - 正确拒绝了无效值5
2025-09-09 15:17:16,724 - test_parameters - INFO - 正确拒绝了无效值41
2025-09-09 15:17:16,725 - test_parameters - INFO - 参数边界测试完成
2025-09-09 15:17:16,725 - RSTPTest - INFO - 测试完成: test_parameter_boundaries (耗时: 2.11秒)
2025-09-09 15:17:16,726 - RSTPTest - INFO - ============================================================

2025-09-09 15:17:16,726 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 15:17:16,726 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 15:17:16,726 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 15:17:16,872 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 15:17:16,872 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 15:17:16,999 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 15:17:17,000 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 15:17:17,132 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 15:17:17,132 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 15:17:17,132 - RSTPTest - INFO - ============================================================
2025-09-09 15:17:17,133 - RSTPTest - INFO - 开始测试: test_port_role_assignment_simplified
2025-09-09 15:17:17,133 - RSTPTest - INFO - ============================================================
2025-09-09 15:17:17,135 - RSTPTest - INFO - 测试完成: test_port_role_assignment_simplified (耗时: 0.00秒)
2025-09-09 15:17:17,135 - RSTPTest - INFO - ============================================================

2025-09-09 15:17:17,137 - RSTPTest - INFO - ============================================================
2025-09-09 15:17:17,137 - RSTPTest - INFO - 开始测试: test_root_bridge_election
2025-09-09 15:17:17,137 - RSTPTest - INFO - ============================================================
2025-09-09 15:17:17,138 - test_protocol_conformance - INFO - 开始根网桥选举测试
2025-09-09 15:17:17,138 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 15:17:17,138 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 15:17:17,138 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 15:17:17,138 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 15:17:17,139 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 15:17:17,139 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 15:17:17,139 - NetworkTopology - INFO - DUT: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 15:17:17,139 - NetworkTopology - INFO - DUT: 检查mstpd支持...
2025-09-09 15:17:17,145 - NetworkTopology - INFO - DUT: mstpd检查结果: code=1
2025-09-09 15:17:17,145 - NetworkTopology - INFO - DUT: 检查iproute2支持...
2025-09-09 15:17:17,194 - NetworkTopology - INFO - DUT: ip命令检查: code=0
2025-09-09 15:17:17,194 - NetworkTopology - INFO - DUT: 使用iproute2配置RSTP
2025-09-09 15:17:17,195 - NetworkTopology - INFO - DUT: 最终选择RSTP方法: iproute2
2025-09-09 15:17:17,195 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 15:17:17,195 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 15:17:17,512 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 15:17:17,941 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 15:17:17,941 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 15:17:17,941 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 15:17:17,941 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 15:17:18,056 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 15:17:18,173 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 15:17:18,173 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 15:17:18,230 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 15:17:18,278 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 15:17:18,326 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 15:17:18,327 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 15:17:18,327 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 15:17:18,328 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 15:17:18,328 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 15:17:18,328 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 15:17:18,328 - NetworkTopology - INFO - TestNode1: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 15:17:18,328 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 15:17:18,336 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 15:17:18,336 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 15:17:18,456 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=1, output=
2025-09-09 15:17:18,457 - NetworkTopology - INFO - TestNode1: 尝试启动mstpd服务...
2025-09-09 15:17:18,623 - NetworkTopology - INFO - TestNode1: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 15:17:20,721 - NetworkTopology - INFO - TestNode1: mstpd启动后状态: code=1
2025-09-09 15:17:20,721 - NetworkTopology - INFO - TestNode1: mstpd启动失败，使用iproute2
2025-09-09 15:17:20,722 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: iproute2
2025-09-09 15:17:20,722 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 15:17:20,722 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 15:17:21,296 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 15:17:22,364 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 15:17:22,365 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 15:17:22,365 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 15:17:22,365 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 15:17:22,702 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 15:17:23,062 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 15:17:23,063 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 15:17:23,248 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 15:17:23,295 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 15:17:23,343 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 15:17:23,344 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 15:17:23,344 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 15:17:23,344 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 15:17:23,344 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 15:17:23,344 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 15:17:23,344 - NetworkTopology - INFO - TestNode2: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 15:17:23,344 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 15:17:23,353 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 15:17:23,353 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 15:17:28,522 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=1, output=
2025-09-09 15:17:28,522 - NetworkTopology - INFO - TestNode2: 尝试启动mstpd服务...
2025-09-09 15:17:38,634 - NetworkTopology - INFO - TestNode2: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 15:17:43,947 - NetworkTopology - INFO - TestNode2: mstpd启动后状态: code=1
2025-09-09 15:17:43,947 - NetworkTopology - INFO - TestNode2: mstpd启动失败，使用iproute2
2025-09-09 15:17:43,948 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: iproute2
2025-09-09 15:17:43,948 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 15:17:43,948 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 15:17:59,589 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 15:18:00,690 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 15:18:00,690 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 15:18:00,690 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 15:18:00,691 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 15:18:01,041 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 15:18:01,387 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 15:18:01,387 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 15:18:01,559 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 15:18:01,607 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 15:18:01,655 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 15:18:01,655 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 15:18:01,655 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 15:18:04,656 - test_protocol_conformance - INFO - === 检查DUT网桥配置 ===
2025-09-09 15:18:04,662 - test_protocol_conformance - INFO - 找到测试网桥: br0
2025-09-09 15:18:04,714 - test_protocol_conformance - INFO - 启用br0的RSTP
2025-09-09 15:18:04,761 - test_protocol_conformance - INFO - br0 STP状态: ('', 'cat: /sys/class/net/br0/bridge/stp_state: No such file or directory\n', 1)
2025-09-09 15:18:04,761 - test_protocol_conformance - INFO - === 初始网桥状态 ===
2025-09-09 15:18:04,868 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:18:05,022 - test_protocol_conformance - INFO - 活动端口数: 0
2025-09-09 15:18:05,022 - test_protocol_conformance - WARNING - 活动端口不足，尝试启用更多端口
2025-09-09 15:18:08,424 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:18:08,577 - test_protocol_conformance - INFO - 初始端口状态:
2025-09-09 15:18:08,578 - test_protocol_conformance - INFO - 初始状态 - DUT有Root Port: False
2025-09-09 15:18:08,578 - test_protocol_conformance - INFO - === 配置网桥优先级 ===
2025-09-09 15:18:08,578 - test_protocol_conformance - INFO - 设置TestNode1优先级为16384
2025-09-09 15:18:08,719 - test_protocol_conformance - INFO - 设置DUT优先级为32768
2025-09-09 15:18:08,729 - test_protocol_conformance - INFO - ip命令设置结果: ('', 'RTNETLINK answers: Operation not supported\n', 2)
2025-09-09 15:18:08,782 - test_protocol_conformance - INFO - sysfs设置结果: ('32768\n', 'tee: /sys/class/net/br0/bridge/priority: No such file or directory\n', 1)
2025-09-09 15:18:08,782 - test_protocol_conformance - INFO - 设置TestNode2优先级为24576
2025-09-09 15:18:08,913 - test_protocol_conformance - INFO - 等待RSTP收敛...
2025-09-09 15:18:18,914 - test_protocol_conformance - INFO - === 第一阶段验证 ===
2025-09-09 15:18:18,980 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:18:19,181 - test_protocol_conformance - INFO - DUT当前优先级: 
2025-09-09 15:18:19,182 - test_protocol_conformance - WARNING - 优先级验证失败: 优先级设置失败，期望32768，实际
assert '' == '32768'
  
  [0m[91m- 32768[39;49;00m[90m[39;49;00m
2025-09-09 15:18:19,182 - test_protocol_conformance - INFO - 
=== 第二阶段：DUT应成为根桥 ===
2025-09-09 15:18:19,182 - test_protocol_conformance - INFO - 设置DUT优先级为12288（最低）
2025-09-09 15:18:19,333 - test_protocol_conformance - INFO - 设置后优先级: 
2025-09-09 15:18:19,333 - test_protocol_conformance - INFO - 等待RSTP重新收敛...
2025-09-09 15:18:29,334 - test_protocol_conformance - INFO - === 最终验证 ===
2025-09-09 15:18:29,396 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:18:29,553 - test_protocol_conformance - ERROR - DUT RSTP实现问题诊断:
2025-09-09 15:18:29,553 - test_protocol_conformance - ERROR - 1. DUT优先级已设置为12288（最低）
2025-09-09 15:18:29,553 - test_protocol_conformance - ERROR - 2. 但DUT仍有Root Port: False
2025-09-09 15:18:29,554 - test_protocol_conformance - ERROR - 3. Designated端口数: 0
2025-09-09 15:18:29,554 - test_protocol_conformance - ERROR - 可能的原因:
2025-09-09 15:18:29,554 - test_protocol_conformance - ERROR - - DUT的RSTP实现不符合标准
2025-09-09 15:18:29,554 - test_protocol_conformance - ERROR - - DUT没有正确处理优先级变化
2025-09-09 15:18:29,554 - test_protocol_conformance - ERROR - - DUT的BPDU发送/接收有问题
2025-09-09 15:18:29,599 - RSTPTest - INFO - 测试完成: test_root_bridge_election (耗时: 72.46秒)
2025-09-09 15:18:29,600 - RSTPTest - INFO - ============================================================

2025-09-09 15:18:29,602 - RSTPTest - INFO - ============================================================
2025-09-09 15:18:29,602 - RSTPTest - INFO - 开始测试: test_port_role_assignment
2025-09-09 15:18:29,602 - RSTPTest - INFO - ============================================================
2025-09-09 15:18:29,603 - test_protocol_conformance - INFO - 开始端口角色分配测试
2025-09-09 15:18:29,603 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 15:18:29,603 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 15:18:29,603 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 15:18:29,604 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 15:18:29,604 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 15:18:29,604 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 15:18:29,604 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 15:18:29,604 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 15:18:29,905 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 15:18:30,296 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 15:18:30,296 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 15:18:30,296 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 15:18:30,297 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 15:18:30,416 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 15:18:30,536 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 15:18:30,537 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 15:18:30,592 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 15:18:30,641 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 15:18:30,689 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 15:18:30,689 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 15:18:30,689 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 15:18:30,689 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 15:18:30,690 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 15:18:30,690 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 15:18:30,690 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 15:18:30,690 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 15:18:31,239 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 15:18:32,370 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 15:18:32,371 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 15:18:32,371 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 15:18:32,371 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 15:18:32,700 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 15:18:33,043 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 15:18:33,044 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 15:18:33,227 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 15:18:33,275 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 15:18:33,323 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 15:18:33,324 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 15:18:33,324 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 15:18:33,324 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 15:18:33,324 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 15:18:33,324 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 15:18:33,325 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 15:18:33,325 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 15:18:33,830 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 15:18:34,982 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 15:18:34,982 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 15:18:34,983 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 15:18:34,983 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 15:18:35,340 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 15:18:35,695 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 15:18:35,695 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 15:18:35,877 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 15:18:35,924 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 15:18:35,972 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 15:18:35,972 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 15:18:35,973 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 15:18:39,114 - test_protocol_conformance - INFO - 启用DUT的网桥接口...
2025-09-09 15:18:39,241 - test_protocol_conformance - INFO - 已启用接口 eth0
2025-09-09 15:18:39,410 - test_protocol_conformance - INFO - 已启用接口 eth1
2025-09-09 15:18:39,578 - test_protocol_conformance - INFO - 已启用接口 eth2
2025-09-09 15:18:42,584 - test_protocol_conformance - INFO - br0 网桥接口状态:
('18: veth45650b3@if17: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 master br-b2bd2c7fedc8 state forwarding priority 32 cost 2 \n26: veth6d7f1eb@if25: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 master br-b2bd2c7fedc8 state forwarding priority 32 cost 2 \n', '', 0)
2025-09-09 15:18:42,633 - test_protocol_conformance - INFO - br0 状态:
('5: br0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1508 qdisc mq state UP mode DEFAULT group default qlen 1000\n    link/ether 90:12:10:b5:7d:f7 brd ff:ff:ff:ff:ff:ff\n    altname enp0s30f4\n', '', 0)
2025-09-09 15:18:42,681 - test_protocol_conformance - INFO - br0 STP状态:
('', 'cat: /sys/class/net/br0/bridge/stp_state: No such file or directory\n', 1)
2025-09-09 15:18:42,681 - test_protocol_conformance - INFO - 获取初始网桥状态...
2025-09-09 15:18:42,789 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:18:42,946 - test_protocol_conformance - INFO - Bridge ID: 未获取
2025-09-09 15:18:42,946 - test_protocol_conformance - INFO - Root ID: 未获取
2025-09-09 15:18:42,946 - test_protocol_conformance - INFO - Root Port: eth0
2025-09-09 15:18:42,946 - test_protocol_conformance - INFO - 协议版本: unknown
2025-09-09 15:18:42,946 - test_protocol_conformance - INFO - 端口 eth0: 角色=root, 状态=disabled, 成本=0
2025-09-09 15:18:42,947 - test_protocol_conformance - INFO - 端口 eth2: 角色=unknown, 状态=disabled, 成本=0
2025-09-09 15:18:42,947 - test_protocol_conformance - INFO - 端口 eth3: 角色=unknown, 状态=disabled, 成本=0
2025-09-09 15:18:42,947 - test_protocol_conformance - INFO - 等待网络收敛...
2025-09-09 15:18:42,947 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 15:18:43,052 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:18:43,210 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.26秒
2025-09-09 15:18:43,315 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:18:43,469 - test_protocol_conformance - INFO - 收敛后的端口状态:
2025-09-09 15:18:43,470 - test_protocol_conformance - INFO - 端口 eth0: 角色=root, 状态=disabled, 成本=0
2025-09-09 15:18:43,470 - test_protocol_conformance - INFO - 端口 eth2: 角色=unknown, 状态=disabled, 成本=0
2025-09-09 15:18:43,471 - test_protocol_conformance - INFO - 端口 eth3: 角色=unknown, 状态=disabled, 成本=0
2025-09-09 15:18:43,625 - test_protocol_conformance - INFO - is_root_bridge() 返回: True
2025-09-09 15:18:43,625 - test_protocol_conformance - INFO - 有Root Port: False
2025-09-09 15:18:43,625 - test_protocol_conformance - INFO - 最终判定 - DUT是根桥: True
2025-09-09 15:18:43,626 - test_protocol_conformance - INFO - 活动端口数: 0
2025-09-09 15:18:43,626 - test_protocol_conformance - INFO - 禁用端口: ['eth0', 'eth2', 'eth3']
2025-09-09 15:18:43,626 - test_protocol_conformance - WARNING - 活动端口不足，尝试启用禁用的端口...
2025-09-09 15:18:43,626 - test_protocol_conformance - INFO - 尝试启用端口 eth0
2025-09-09 15:18:43,793 - test_protocol_conformance - INFO - 尝试启用端口 eth2
2025-09-09 15:18:49,031 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:18:49,185 - test_protocol_conformance - INFO - 重新配置后 - 活动端口数: 0
2025-09-09 15:18:49,185 - test_protocol_conformance - INFO - 重新配置后 - 禁用端口: ['eth0', 'eth2', 'eth3']
2025-09-09 15:18:49,185 - test_protocol_conformance - INFO - 端口角色分布: {}
2025-09-09 15:18:49,223 - RSTPTest - INFO - 测试完成: test_port_role_assignment (耗时: 19.62秒)
2025-09-09 15:18:49,224 - RSTPTest - INFO - ============================================================

2025-09-09 15:18:49,226 - RSTPTest - INFO - ============================================================
2025-09-09 15:18:49,226 - RSTPTest - INFO - 开始测试: test_rstp_protocol_verification
2025-09-09 15:18:49,226 - RSTPTest - INFO - ============================================================
2025-09-09 15:18:49,227 - test_protocol_conformance - INFO - 开始RSTP协议验证
2025-09-09 15:18:49,227 - test_protocol_conformance - INFO - === 检查OVS配置 ===
2025-09-09 15:18:49,237 - test_protocol_conformance - INFO - 当前OVS配置:
8c812ea9-3b0c-46a1-bd3c-ef3904d38c1a
    Bridge SE_ETH4
        Port SE_ETH4
            Interface SE_ETH4
                type: internal
    Bridge SE_ETH6
        Port SE_ETH6
            Interface SE_ETH6
                type: internal
    Bridge br0
        Port eth0
            Interface eth0
                error: "could not open network device eth0 (No such device)"
        Port br0
            Interface br0
                type: internal
                error: "could not add network devi
2025-09-09 15:18:49,288 - test_protocol_conformance - INFO - 使用现有网桥 SE_ETH2，端口: ['br3', 'br4']
2025-09-09 15:18:49,289 - test_protocol_conformance - INFO - === 配置RSTP（确保是RSTP而不是STP）===
2025-09-09 15:18:50,402 - test_protocol_conformance - INFO - 启用RSTP...
2025-09-09 15:18:50,421 - test_protocol_conformance - INFO - ✓ RSTP已启用
2025-09-09 15:18:50,421 - test_protocol_conformance - INFO - 设置RSTP参数...
2025-09-09 15:18:50,473 - test_protocol_conformance - INFO - ✓ 设置: rstp-hello-time=2
2025-09-09 15:18:50,524 - test_protocol_conformance - INFO - ✓ 设置: rstp-forward-delay=4
2025-09-09 15:18:50,576 - test_protocol_conformance - INFO - ✓ 设置: rstp-max-age=6
2025-09-09 15:18:50,628 - test_protocol_conformance - INFO - ✓ 设置: rstp-priority=32768
2025-09-09 15:18:50,680 - test_protocol_conformance - INFO - ✓ 设置: rstp-force-protocol-version=2
2025-09-09 15:18:50,832 - test_protocol_conformance - INFO - ✓ 端口 br3 RSTP已启用
2025-09-09 15:18:50,984 - test_protocol_conformance - INFO - ✓ 端口 br4 RSTP已启用
2025-09-09 15:18:51,033 - test_protocol_conformance - INFO - 等待RSTP初始化...
2025-09-09 15:18:56,033 - test_protocol_conformance - INFO - === 验证RSTP配置 ===
2025-09-09 15:18:56,042 - test_protocol_conformance - INFO - RSTP状态:
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     6s
  stp-fwd-delay   4s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-09 15:18:56,043 - test_protocol_conformance - INFO - ✓ 使用RSTP时间参数
2025-09-09 15:18:56,043 - test_protocol_conformance - INFO - === 创建测试拓扑 ===
2025-09-09 15:18:56,043 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 15:18:56,044 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 15:18:56,044 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 15:18:56,044 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 15:18:56,045 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 15:18:56,045 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 15:18:56,045 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 15:18:56,045 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 15:18:56,335 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 15:18:56,728 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 15:18:56,728 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 15:18:56,728 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 15:18:56,729 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 15:18:56,843 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 15:18:56,963 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 15:18:56,964 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 15:18:57,020 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 15:18:57,069 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 15:18:57,116 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 15:18:57,117 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 15:18:57,117 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 15:18:57,117 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 15:18:57,117 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 15:18:57,117 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 15:18:57,117 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 15:18:57,117 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 15:18:57,655 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 15:18:58,701 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 15:18:58,701 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 15:18:58,701 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 15:18:58,702 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 15:18:59,077 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 15:18:59,437 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 15:18:59,437 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 15:18:59,612 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 15:18:59,659 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 15:18:59,706 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 15:18:59,707 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 15:18:59,707 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 15:18:59,707 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 15:18:59,707 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 15:18:59,707 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 15:18:59,708 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 15:18:59,708 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 15:19:00,188 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 15:19:01,241 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 15:19:01,242 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 15:19:01,242 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 15:19:01,242 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 15:19:01,593 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 15:19:01,936 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 15:19:01,936 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 15:19:02,120 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 15:19:02,168 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 15:19:02,216 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 15:19:02,217 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 15:19:02,217 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 15:19:07,217 - test_protocol_conformance - INFO - === 捕获BPDU ===
2025-09-09 15:19:07,218 - test_protocol_conformance - INFO - 在 SE_ETH2 上捕获BPDU...
2025-09-09 15:19:07,218 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: SE_ETH2, 数量: 10)
2025-09-09 15:19:17,273 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-09 15:19:17,274 - test_protocol_conformance - INFO - 在 br3 上捕获BPDU...
2025-09-09 15:19:17,274 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br3, 数量: 10)
2025-09-09 15:19:27,369 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-09 15:19:27,369 - test_protocol_conformance - INFO - 在 br4 上捕获BPDU...
2025-09-09 15:19:27,370 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br4, 数量: 10)
2025-09-09 15:19:37,477 - RSTPAnalyzer_DUT - INFO - 捕获到 4 个BPDU包
2025-09-09 15:19:37,477 - test_protocol_conformance - INFO - ✓ 捕获到 4 个BPDU
2025-09-09 15:19:37,477 - test_protocol_conformance - INFO - === 分析BPDU ===
2025-09-09 15:19:37,478 - test_protocol_conformance - INFO - 第一个BPDU信息: {'timestamp': '15:19:30.206291', 'raw': '15:19:30.206291 00:e0:0c:25:0c:01 > 01:80:c2:00:00:00, 802.3, length 39: LLC, dsap STP (0x42) Individual, ssap STP (0x42) Command, ctrl 0x03: STP 802.1w, Rapid STP, Flags [Learn, Forward, Agreement], bridge-id 8000.6e:b3:08:fa:01:34.8002, length 36', 'is_rstp': False}
2025-09-09 15:19:37,478 - test_protocol_conformance - INFO - BPDU统计: RSTP=0, STP=4
2025-09-09 15:19:37,478 - test_protocol_conformance - WARNING - 检测到更多STP BPDU
2025-09-09 15:19:37,527 - test_protocol_conformance - INFO - rstp_enable状态: true
2025-09-09 15:19:37,580 - test_protocol_conformance - INFO - stp_enable状态: false
2025-09-09 15:19:37,631 - test_protocol_conformance - WARNING - OVS配置为RSTP但发送STP BPDU，可能是实现限制
2025-09-09 15:19:37,631 - test_protocol_conformance - INFO - 基于配置判断为RSTP
2025-09-09 15:19:37,632 - test_protocol_conformance - INFO - ✓ RSTP协议验证通过（检测到 4 个RSTP BPDU）
2025-09-09 15:19:37,632 - RSTPTest - INFO - 测试完成: test_rstp_protocol_verification (耗时: 48.41秒)
2025-09-09 15:19:37,633 - RSTPTest - INFO - ============================================================

2025-09-09 15:19:37,635 - RSTPTest - INFO - ============================================================
2025-09-09 15:19:37,635 - RSTPTest - INFO - 开始测试: test_alternate_port_verification
2025-09-09 15:19:37,635 - RSTPTest - INFO - ============================================================
2025-09-09 15:19:37,636 - test_protocol_conformance - INFO - 开始Alternate Port验证测试
2025-09-09 15:19:37,636 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 15:19:37,636 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 15:19:37,636 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 15:19:37,637 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 15:19:37,637 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 15:19:37,637 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 15:19:37,637 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 15:19:37,638 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 15:19:37,948 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 15:19:38,340 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 15:19:38,340 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 15:19:38,340 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 15:19:38,341 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 15:19:38,460 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 15:19:38,579 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 15:19:38,580 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 15:19:38,635 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 15:19:38,684 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 15:19:38,732 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 15:19:38,732 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 15:19:38,732 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 15:19:38,732 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 15:19:38,732 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 15:19:38,732 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 15:19:38,733 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 15:19:38,733 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 15:19:39,237 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 15:19:40,333 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 15:19:40,333 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 15:19:40,333 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 15:19:40,333 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 15:19:40,697 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 15:19:41,058 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 15:19:41,059 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 15:19:41,254 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 15:19:41,306 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 15:19:41,354 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 15:19:41,355 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 15:19:41,355 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 15:19:41,355 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 15:19:41,355 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 15:19:41,355 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 15:19:41,356 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 15:19:41,356 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 15:19:41,855 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 15:19:42,982 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 15:19:42,983 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 15:19:42,983 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 15:19:42,983 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 15:19:43,317 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 15:19:43,682 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 15:19:43,682 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 15:19:43,854 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 15:19:43,904 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 15:19:43,952 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 15:19:43,953 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 15:19:43,953 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 15:19:43,953 - test_protocol_conformance - INFO - 设置网桥优先级
2025-09-09 15:19:44,256 - test_protocol_conformance - INFO - 等待RSTP收敛...
2025-09-09 15:19:44,256 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 15:19:44,318 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:19:44,472 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.22秒
2025-09-09 15:19:44,578 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:19:44,731 - test_protocol_conformance - INFO - DUT桥信息: BridgeInfo(bridge_id='', root_id='', root_port='eth2', root_path_cost=0, protocol_version='unknown', hello_time=0, forward_delay=0, max_age=0, topology_changes=0, ports={'eth0': PortInfo(name='eth0', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth2': PortInfo(name='eth2', role=<PortRole.ROOT: 'root'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth3': PortInfo(name='eth3', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')})
2025-09-09 15:19:44,923 - RSTPTest - INFO - 测试完成: test_alternate_port_verification (耗时: 7.29秒)
2025-09-09 15:19:44,924 - RSTPTest - INFO - ============================================================

2025-09-09 15:19:44,926 - RSTPTest - INFO - ============================================================
2025-09-09 15:19:44,926 - RSTPTest - INFO - 开始测试: test_port_state_transitions
2025-09-09 15:19:44,926 - RSTPTest - INFO - ============================================================
2025-09-09 15:19:44,927 - test_protocol_conformance - INFO - 开始端口状态转换测试
2025-09-09 15:19:44,967 - RSTPTest - INFO - 测试完成: test_port_state_transitions (耗时: 0.04秒)
2025-09-09 15:19:44,967 - RSTPTest - INFO - ============================================================

2025-09-09 15:19:44,969 - RSTPTest - INFO - ============================================================
2025-09-09 15:19:44,969 - RSTPTest - INFO - 开始测试: test_bpdu_propagation_and_keepalive
2025-09-09 15:19:44,969 - RSTPTest - INFO - ============================================================
2025-09-09 15:19:44,970 - test_protocol_conformance - INFO - 开始BPDU传播和保活机制测试
2025-09-09 15:19:44,970 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 15:19:44,970 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 15:19:44,970 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 15:19:44,971 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 15:19:44,971 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 15:19:44,971 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 15:19:44,971 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 15:19:44,971 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 15:19:45,255 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 15:19:45,656 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 15:19:45,657 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 15:19:45,657 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 15:19:45,657 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 15:19:45,775 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 15:19:45,895 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 15:19:45,895 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 15:19:45,951 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 15:19:46,000 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 15:19:46,047 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 15:19:46,048 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 15:19:46,048 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 15:19:46,048 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 15:19:46,048 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 15:19:46,048 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 15:19:46,048 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 15:19:46,049 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 15:19:46,575 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 15:19:47,645 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 15:19:47,645 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 15:19:47,645 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 15:19:47,645 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 15:19:47,975 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 15:19:48,337 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 15:19:48,337 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 15:19:48,534 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 15:19:48,583 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 15:19:48,631 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 15:19:48,632 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 15:19:48,632 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 15:19:48,632 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 15:19:48,632 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 15:19:48,633 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 15:19:48,633 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 15:19:48,633 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 15:19:49,170 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 15:19:50,285 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 15:19:50,285 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 15:19:50,285 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 15:19:50,285 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 15:19:50,638 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 15:19:50,987 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 15:19:50,987 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 15:19:51,155 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 15:19:51,203 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 15:19:51,251 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 15:19:51,251 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 15:19:51,252 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 15:19:51,528 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-09 15:19:51,528 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 15:19:51,590 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:19:51,744 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.22秒
2025-09-09 15:19:51,855 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:19:52,012 - test_protocol_conformance - INFO - Hello Time: 0秒
2025-09-09 15:19:52,013 - test_protocol_conformance - INFO - 开始捕获BPDU报文
2025-09-09 15:19:52,050 - RSTPTest - INFO - 测试完成: test_bpdu_propagation_and_keepalive (耗时: 7.08秒)
2025-09-09 15:19:52,050 - RSTPTest - INFO - ============================================================

2025-09-09 15:19:52,052 - RSTPTest - INFO - ============================================================
2025-09-09 15:19:52,052 - RSTPTest - INFO - 开始测试: test_disabled_port_exclusion
2025-09-09 15:19:52,053 - RSTPTest - INFO - ============================================================
2025-09-09 15:19:52,053 - test_protocol_conformance - INFO - 开始禁用端口排除测试
2025-09-09 15:19:52,053 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 15:19:52,054 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 15:19:52,054 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 15:19:52,054 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 15:19:52,054 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 15:19:52,055 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 15:19:52,055 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 15:19:52,055 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 15:19:52,339 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 15:19:52,735 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 15:19:52,735 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 15:19:52,735 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 15:19:52,735 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 15:19:52,854 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 15:19:52,971 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 15:19:52,971 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 15:19:53,027 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 15:19:53,076 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 15:19:53,124 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 15:19:53,124 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 15:19:53,124 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 15:19:53,125 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 15:19:53,125 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 15:19:53,125 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 15:19:53,125 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 15:19:53,126 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 15:19:53,647 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 15:19:54,792 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 15:19:54,792 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 15:19:54,792 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 15:19:54,792 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 15:19:55,140 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 15:19:55,492 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 15:19:55,493 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 15:19:55,685 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 15:19:55,735 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 15:19:55,784 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 15:19:55,785 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 15:19:55,785 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 15:19:55,785 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 15:19:55,785 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 15:19:55,785 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 15:19:55,785 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 15:19:55,785 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 15:19:56,326 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 15:19:57,530 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 15:19:57,531 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 15:19:57,531 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 15:19:57,531 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 15:19:57,905 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 15:19:58,269 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 15:19:58,269 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 15:19:58,457 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 15:19:58,505 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 15:19:58,553 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 15:19:58,554 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 15:19:58,554 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 15:19:58,698 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-09 15:19:58,699 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 15:19:58,806 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:19:58,959 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.26秒
2025-09-09 15:19:59,066 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:19:59,219 - test_protocol_conformance - INFO - 所有端口信息: {'eth0': PortInfo(name='eth0', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth2': PortInfo(name='eth2', role=<PortRole.ROOT: 'root'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth3': PortInfo(name='eth3', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')}
2025-09-09 15:19:59,278 - test_protocol_conformance - INFO - RSTP show输出 (code=2): 1
1
No such RSTP object
ovs-appctl: ovs-vswitchd: server returned an error

2025-09-09 15:19:59,333 - test_protocol_conformance - INFO - STP show输出 (code=2): 1
1
no such stp object
ovs-appctl: ovs-vswitchd: server returned an error

2025-09-09 15:19:59,334 - test_protocol_conformance - INFO - 初始活动端口: []
2025-09-09 15:19:59,334 - test_protocol_conformance - INFO - 没有找到活动端口，使用所有端口
2025-09-09 15:19:59,334 - test_protocol_conformance - INFO - 选择端口eth0进行禁用测试
2025-09-09 15:19:59,334 - test_protocol_conformance - INFO - 禁用端口eth0
2025-09-09 15:19:59,334 - FaultInjector_DUT - INFO - 断开链路: eth0
2025-09-09 15:19:59,451 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth0 (code=1)，将在逻辑上标记为已断开
2025-09-09 15:19:59,451 - test_protocol_conformance - INFO - 禁用命令结果: ('', '', 0)
2025-09-09 15:19:59,510 - test_protocol_conformance - INFO - 端口eth0配置: stdout='1
1
{rstp-enable="true", stp-enable="true", stp-path-cost="20000"}
', stderr='', code=0
2025-09-09 15:20:14,578 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:20:14,683 - test_protocol_conformance - INFO - 禁用后所有端口状态: [('eth0', 'disabled'), ('eth2', 'disabled'), ('eth3', 'disabled')]
2025-09-09 15:20:14,684 - test_protocol_conformance - INFO - 端口eth0状态: disabled, 角色: root
2025-09-09 15:20:14,684 - test_protocol_conformance - INFO - 禁用后活动端口: []
2025-09-09 15:20:14,685 - test_protocol_conformance - INFO - 活动端口数量: 0, 初始活动端口数量: 3
2025-09-09 15:20:14,685 - test_protocol_conformance - INFO - 禁用后端口角色分布: {}
2025-09-09 15:20:14,844 - test_protocol_conformance - INFO - 重新启用端口eth0
2025-09-09 15:20:14,844 - FaultInjector_DUT - INFO - 恢复链路: eth0
2025-09-09 15:20:14,962 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth0 (code=1)，将在逻辑上标记为已恢复
2025-09-09 15:20:30,025 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:20:30,127 - test_protocol_conformance - INFO - ✓ 端口eth0已重新启用，状态: forwarding
2025-09-09 15:20:30,165 - RSTPTest - INFO - 测试完成: test_disabled_port_exclusion (耗时: 38.11秒)
2025-09-09 15:20:30,165 - RSTPTest - INFO - ============================================================

2025-09-09 15:20:30,168 - RSTPTest - INFO - ============================================================
2025-09-09 15:20:30,168 - RSTPTest - INFO - 开始测试: test_topology_change_notification
2025-09-09 15:20:30,168 - RSTPTest - INFO - ============================================================
2025-09-09 15:20:30,169 - test_protocol_conformance - INFO - 开始拓扑变更通知测试
2025-09-09 15:20:30,169 - test_protocol_conformance - INFO - === 步骤1: 创建多网桥环形拓扑 ===
2025-09-09 15:20:30,523 - test_protocol_conformance - INFO - 创建网桥 rstp1 (优先级: 32768)
2025-09-09 15:20:30,759 - test_protocol_conformance - INFO - 创建网桥 rstp2 (优先级: 36864)
2025-09-09 15:20:30,999 - test_protocol_conformance - INFO - 创建网桥 rstp3 (优先级: 40960)
2025-09-09 15:20:31,440 - test_protocol_conformance - INFO - ✓ 连接 rstp1 <-> rstp2
2025-09-09 15:20:31,884 - test_protocol_conformance - INFO - ✓ 连接 rstp2 <-> rstp3
2025-09-09 15:20:32,328 - test_protocol_conformance - INFO - ✓ 连接 rstp3 <-> rstp1
2025-09-09 15:20:32,328 - test_protocol_conformance - INFO - 等待RSTP初始收敛...
2025-09-09 15:20:42,330 - test_protocol_conformance - INFO - === 步骤2: 验证初始RSTP状态 ===
2025-09-09 15:20:42,339 - test_protocol_conformance - INFO - 
rstp1 初始RSTP状态:
2025-09-09 15:20:42,339 - test_protocol_conformance - INFO -   ---- rstp1 ----
2025-09-09 15:20:42,339 - test_protocol_conformance - INFO -   Root ID:
2025-09-09 15:20:42,339 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-09 15:20:42,340 - test_protocol_conformance - INFO -     stp-system-id   fa:72:ed:8b:67:4e
2025-09-09 15:20:42,340 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-09 15:20:42,340 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-09 15:20:42,340 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-09 15:20:42,341 - test_protocol_conformance - INFO -     This bridge is the root
2025-09-09 15:20:42,341 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-09 15:20:42,341 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-09 15:20:42,341 - test_protocol_conformance - INFO -     stp-system-id   fa:72:ed:8b:67:4e
2025-09-09 15:20:42,341 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-09 15:20:42,342 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-09 15:20:42,342 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-09 15:20:42,342 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-09 15:20:42,342 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-09 15:20:42,343 - test_protocol_conformance - INFO -     veth12a    Designated Forwarding 2000     128.1
2025-09-09 15:20:42,343 - test_protocol_conformance - INFO -     veth31b    Designated Forwarding 2000     128.2
2025-09-09 15:20:42,343 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-09 15:20:42,343 - test_protocol_conformance - INFO -   → 有转发端口
2025-09-09 15:20:42,391 - test_protocol_conformance - INFO - 
rstp2 初始RSTP状态:
2025-09-09 15:20:42,391 - test_protocol_conformance - INFO -   ---- rstp2 ----
2025-09-09 15:20:42,392 - test_protocol_conformance - INFO -   Root ID:
2025-09-09 15:20:42,392 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-09 15:20:42,392 - test_protocol_conformance - INFO -     stp-system-id   fa:72:ed:8b:67:4e
2025-09-09 15:20:42,392 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-09 15:20:42,393 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-09 15:20:42,393 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-09 15:20:42,393 - test_protocol_conformance - INFO -     root-port       veth12b
2025-09-09 15:20:42,393 - test_protocol_conformance - INFO -     root-path-cost  2000
2025-09-09 15:20:42,393 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-09 15:20:42,393 - test_protocol_conformance - INFO -     stp-priority    36864
2025-09-09 15:20:42,394 - test_protocol_conformance - INFO -     stp-system-id   c2:a4:a7:60:93:45
2025-09-09 15:20:42,394 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-09 15:20:42,394 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-09 15:20:42,394 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-09 15:20:42,394 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-09 15:20:42,394 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-09 15:20:42,394 - test_protocol_conformance - INFO -     veth12b    Root       Forwarding 2000     128.1
2025-09-09 15:20:42,395 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-09 15:20:42,395 - test_protocol_conformance - INFO -   → 有转发端口
2025-09-09 15:20:42,442 - test_protocol_conformance - INFO - 
rstp3 初始RSTP状态:
2025-09-09 15:20:42,443 - test_protocol_conformance - INFO -   ---- rstp3 ----
2025-09-09 15:20:42,443 - test_protocol_conformance - INFO -   Root ID:
2025-09-09 15:20:42,443 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-09 15:20:42,443 - test_protocol_conformance - INFO -     stp-system-id   fa:72:ed:8b:67:4e
2025-09-09 15:20:42,443 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-09 15:20:42,444 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-09 15:20:42,444 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-09 15:20:42,444 - test_protocol_conformance - INFO -     root-port       veth31a
2025-09-09 15:20:42,444 - test_protocol_conformance - INFO -     root-path-cost  2000
2025-09-09 15:20:42,444 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-09 15:20:42,445 - test_protocol_conformance - INFO -     stp-priority    40960
2025-09-09 15:20:42,445 - test_protocol_conformance - INFO -     stp-system-id   ee:8b:34:4a:7d:43
2025-09-09 15:20:42,445 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-09 15:20:42,445 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-09 15:20:42,445 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-09 15:20:42,445 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-09 15:20:42,445 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-09 15:20:42,446 - test_protocol_conformance - INFO -     veth23b    Alternate  Discarding 2000     128.1
2025-09-09 15:20:42,446 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-09 15:20:42,446 - test_protocol_conformance - INFO -   → 有转发端口
2025-09-09 15:20:42,446 - test_protocol_conformance - INFO -   → 有阻塞端口（防环路）
2025-09-09 15:20:42,446 - test_protocol_conformance - INFO - === 步骤3: 分析网络拓扑 ===
2025-09-09 15:20:42,446 - test_protocol_conformance - INFO - ✓ rstp1 是根桥
2025-09-09 15:20:42,446 - test_protocol_conformance - INFO - ✓ 找到阻塞端口: veth23b
2025-09-09 15:20:42,447 - test_protocol_conformance - INFO - === 步骤4: 触发拓扑变更 ===
2025-09-09 15:20:42,447 - test_protocol_conformance - INFO - 断开活动端口: veth31a
2025-09-09 15:20:47,523 - test_protocol_conformance - INFO - ✓ rstp1 状态已变化
2025-09-09 15:20:47,621 - test_protocol_conformance - INFO - ✓ rstp3 状态已变化
2025-09-09 15:20:52,668 - test_protocol_conformance - INFO - === 步骤5: 验证拓扑变更 ===
2025-09-09 15:20:52,674 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: veth12a, 数量: 5)
2025-09-09 15:20:57,772 - RSTPAnalyzer_DUT - INFO - 捕获到 2 个BPDU包
2025-09-09 15:20:57,772 - test_protocol_conformance - INFO - 在 veth12a 捕获到 2 个BPDU
2025-09-09 15:20:57,772 - test_protocol_conformance - INFO - === 步骤6: 最终验证 ===
2025-09-09 15:20:57,772 - test_protocol_conformance - INFO - ✓ 测试通过：检测到拓扑变更
2025-09-09 15:20:57,821 - test_protocol_conformance - INFO - 
========== rstp1 最终状态 ==========
2025-09-09 15:20:57,822 - test_protocol_conformance - INFO - ---- rstp1 ----
2025-09-09 15:20:57,822 - test_protocol_conformance - INFO - Root ID:
2025-09-09 15:20:57,822 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-09 15:20:57,822 - test_protocol_conformance - INFO -   stp-system-id   fa:72:ed:8b:67:4e
2025-09-09 15:20:57,823 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-09 15:20:57,823 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-09 15:20:57,823 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-09 15:20:57,823 - test_protocol_conformance - INFO -   This bridge is the root
2025-09-09 15:20:57,823 - test_protocol_conformance - INFO - Bridge ID:
2025-09-09 15:20:57,823 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-09 15:20:57,824 - test_protocol_conformance - INFO -   stp-system-id   fa:72:ed:8b:67:4e
2025-09-09 15:20:57,824 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-09 15:20:57,824 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-09 15:20:57,824 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-09 15:20:57,824 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-09 15:20:57,824 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-09 15:20:57,825 - test_protocol_conformance - INFO -   veth12a    Designated Forwarding 2000     128.1
2025-09-09 15:20:57,825 - test_protocol_conformance - INFO -   veth31b    Designated Forwarding 2000     128.2
2025-09-09 15:20:57,873 - test_protocol_conformance - INFO - 
========== rstp2 最终状态 ==========
2025-09-09 15:20:57,873 - test_protocol_conformance - INFO - ---- rstp2 ----
2025-09-09 15:20:57,874 - test_protocol_conformance - INFO - Root ID:
2025-09-09 15:20:57,874 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-09 15:20:57,874 - test_protocol_conformance - INFO -   stp-system-id   fa:72:ed:8b:67:4e
2025-09-09 15:20:57,874 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-09 15:20:57,874 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-09 15:20:57,875 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-09 15:20:57,875 - test_protocol_conformance - INFO -   root-port       veth12b
2025-09-09 15:20:57,875 - test_protocol_conformance - INFO -   root-path-cost  2000
2025-09-09 15:20:57,875 - test_protocol_conformance - INFO - Bridge ID:
2025-09-09 15:20:57,876 - test_protocol_conformance - INFO -   stp-priority    36864
2025-09-09 15:20:57,876 - test_protocol_conformance - INFO -   stp-system-id   c2:a4:a7:60:93:45
2025-09-09 15:20:57,876 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-09 15:20:57,876 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-09 15:20:57,876 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-09 15:20:57,876 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-09 15:20:57,877 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-09 15:20:57,877 - test_protocol_conformance - INFO -   veth12b    Root       Forwarding 2000     128.1
2025-09-09 15:20:57,877 - test_protocol_conformance - INFO -   veth23a    Designated Forwarding 2000     128.2
2025-09-09 15:20:57,921 - test_protocol_conformance - INFO - 
========== rstp3 最终状态 ==========
2025-09-09 15:20:57,922 - test_protocol_conformance - INFO - ---- rstp3 ----
2025-09-09 15:20:57,922 - test_protocol_conformance - INFO - Root ID:
2025-09-09 15:20:57,922 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-09 15:20:57,922 - test_protocol_conformance - INFO -   stp-system-id   fa:72:ed:8b:67:4e
2025-09-09 15:20:57,923 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-09 15:20:57,923 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-09 15:20:57,923 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-09 15:20:57,923 - test_protocol_conformance - INFO -   root-port       veth31a
2025-09-09 15:20:57,923 - test_protocol_conformance - INFO -   root-path-cost  2000
2025-09-09 15:20:57,923 - test_protocol_conformance - INFO - Bridge ID:
2025-09-09 15:20:57,923 - test_protocol_conformance - INFO -   stp-priority    40960
2025-09-09 15:20:57,924 - test_protocol_conformance - INFO -   stp-system-id   ee:8b:34:4a:7d:43
2025-09-09 15:20:57,924 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-09 15:20:57,924 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-09 15:20:57,924 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-09 15:20:57,924 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-09 15:20:57,924 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-09 15:20:57,924 - test_protocol_conformance - INFO -   veth23b    Alternate  Discarding 2000     128.1
2025-09-09 15:20:57,925 - test_protocol_conformance - INFO -   veth31a    Root       Forwarding 2000     128.2
2025-09-09 15:20:57,925 - test_protocol_conformance - INFO - 
=== 诊断信息 ===
2025-09-09 15:20:57,978 - test_protocol_conformance - INFO - 系统日志中的STP/RSTP信息:
2025-09-09 15:20:57,978 - test_protocol_conformance - INFO - [444790.550809] rstp2: left promiscuous mode
[444790.726382] rstp3: left promiscuous mode
[446409.849040] rstp1: entered promiscuous mode
[446410.081955] rstp2: entered promiscuous mode
[446410.319022] rstp3: entered promiscuous mode

2025-09-09 15:20:58,027 - test_protocol_conformance - INFO - OVS日志中的拓扑变更信息:
2025-09-09 15:20:58,027 - test_protocol_conformance - INFO - 2025-09-09T07:20:58.202Z|8550746|rstp_sm|DBG|SE_ETH2, port 2: port_transmit_sm ROLE == DISABLED.
2025-09-09T07:20:58.202Z|8550747|rstp_sm|DBG|rstp2: move_rstp()
2025-09-09T07:20:58.202Z|8550748|rstp_sm|DBG|rstp2, port 1: Port_role_transition_sm 7 -> 6
2025-09-09T07:20:58.202Z|8550749|rstp_sm|DBG|rstp2, port 1: port_transmit_sm 6 -> 3
2025-09-09T07:20:58.202Z|8550750|rstp_sm|DBG|rstp2: move_rstp()
2025-09-09T07:20:58.202Z|8550751|rstp_sm|DBG|rstp2, port 1: Port_role_transition_sm 6 -> 7
2025-09-09T07:20:58.202Z|8550752|rstp_sm|DBG|rstp2, port 1: port_transmit_sm 3 -> 5
2025-09-09T07:20:58.202Z|8550753|rstp_sm|DBG|rstp2: move_rstp()
2025-09-09T07:20:58.202Z|8550754|rstp_sm|DBG|rstp2, port 1: port_transmit_sm 5 -> 6
2025-09-09T07:20:58.202Z|8550755|rstp_sm|DBG|rstp2: move_rstp()
2025-09-09T07:20:58.202Z|8550756|rstp_sm|DBG|br0: move_rstp()
2025-09-09T07:20:58.202Z|8550757|rstp_sm|DBG|rstp1: move_rstp()
2025-09-09T07:20:58.740Z|8550761|bridge|WARN|br0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-09T07:20:58.751Z|8550765|bridge|WARN|br0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP

2025-09-09 15:20:58,028 - test_protocol_conformance - INFO - === 清理测试环境 ===
2025-09-09 15:20:58,551 - test_protocol_conformance - INFO - 拓扑变更通知测试完成
2025-09-09 15:20:58,552 - RSTPTest - INFO - 测试完成: test_topology_change_notification (耗时: 28.38秒)
2025-09-09 15:20:58,552 - RSTPTest - INFO - ============================================================

2025-09-09 15:20:58,553 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 15:20:58,553 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 15:20:58,554 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 15:20:58,696 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 15:20:58,696 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 15:20:58,823 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 15:20:58,824 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 15:20:58,954 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 15:20:58,954 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 15:20:58,954 - RSTPTest - INFO - ============================================================
2025-09-09 15:20:58,955 - RSTPTest - INFO - 开始测试: test_root_bridge_hijack_attack
2025-09-09 15:20:58,955 - RSTPTest - INFO - ============================================================
2025-09-09 15:20:58,955 - test_security - INFO - 开始根网桥劫持攻击测试
2025-09-09 15:20:58,956 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 15:20:58,956 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 15:20:58,956 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 15:20:58,956 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 15:20:58,956 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 15:20:58,957 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 15:20:58,957 - NetworkTopology - INFO - DUT: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 15:20:58,957 - NetworkTopology - INFO - DUT: 检查mstpd支持...
2025-09-09 15:20:58,962 - NetworkTopology - INFO - DUT: mstpd检查结果: code=1
2025-09-09 15:20:58,962 - NetworkTopology - INFO - DUT: 检查iproute2支持...
2025-09-09 15:20:59,010 - NetworkTopology - INFO - DUT: ip命令检查: code=0
2025-09-09 15:20:59,011 - NetworkTopology - INFO - DUT: 使用iproute2配置RSTP
2025-09-09 15:20:59,011 - NetworkTopology - INFO - DUT: 最终选择RSTP方法: iproute2
2025-09-09 15:20:59,011 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 15:20:59,011 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 15:20:59,317 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 15:20:59,714 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 15:20:59,715 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 15:20:59,715 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 15:20:59,715 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 15:20:59,834 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 15:20:59,954 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 15:20:59,955 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 15:21:00,011 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 15:21:00,059 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 15:21:00,106 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 15:21:00,106 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 15:21:00,106 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 15:21:00,107 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 15:21:00,107 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 15:21:00,107 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 15:21:00,107 - NetworkTopology - INFO - TestNode1: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 15:21:00,107 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 15:21:00,114 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 15:21:00,114 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 15:21:00,230 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=1, output=
2025-09-09 15:21:00,231 - NetworkTopology - INFO - TestNode1: 尝试启动mstpd服务...
2025-09-09 15:21:00,392 - NetworkTopology - INFO - TestNode1: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 15:21:02,493 - NetworkTopology - INFO - TestNode1: mstpd启动后状态: code=1
2025-09-09 15:21:02,494 - NetworkTopology - INFO - TestNode1: mstpd启动失败，使用iproute2
2025-09-09 15:21:02,494 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: iproute2
2025-09-09 15:21:02,495 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 15:21:02,495 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 15:21:03,073 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 15:21:04,239 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 15:21:04,239 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 15:21:04,240 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 15:21:04,240 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 15:21:04,572 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 15:21:04,919 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 15:21:04,919 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 15:21:05,101 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 15:21:05,149 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 15:21:05,197 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 15:21:05,198 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 15:21:05,198 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 15:21:05,198 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 15:21:05,198 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 15:21:05,199 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 15:21:05,199 - NetworkTopology - INFO - TestNode2: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 15:21:05,199 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 15:21:05,206 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 15:21:05,206 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 15:21:05,331 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=1, output=
2025-09-09 15:21:05,332 - NetworkTopology - INFO - TestNode2: 尝试启动mstpd服务...
2025-09-09 15:21:05,495 - NetworkTopology - INFO - TestNode2: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 15:21:07,600 - NetworkTopology - INFO - TestNode2: mstpd启动后状态: code=1
2025-09-09 15:21:07,601 - NetworkTopology - INFO - TestNode2: mstpd启动失败，使用iproute2
2025-09-09 15:21:07,601 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: iproute2
2025-09-09 15:21:07,601 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 15:21:07,601 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 15:21:08,150 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 15:21:09,220 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 15:21:09,220 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 15:21:09,220 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 15:21:09,220 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 15:21:09,571 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 15:21:09,920 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 15:21:09,920 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 15:21:10,088 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 15:21:10,137 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 15:21:10,185 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 15:21:10,185 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 15:21:10,186 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 15:21:15,557 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:21:15,714 - test_security - INFO - 初始根网桥: 
2025-09-09 15:21:15,715 - FaultInjector_TestNode1 - WARNING - 注入恶意BPDU到 eth0
2025-09-09 15:21:15,816 - FaultInjector_TestNode1 - WARNING - 恶意BPDU注入已启动 (优先级: 0)
2025-09-09 15:21:30,881 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:21:31,038 - test_security - INFO - 根网桥未被劫持（可能已启用防护）
2025-09-09 15:21:31,039 - test_security - INFO - 根网桥劫持攻击测试完成
2025-09-09 15:21:31,040 - RSTPTest - INFO - 测试完成: test_root_bridge_hijack_attack (耗时: 32.08秒)
2025-09-09 15:21:31,040 - RSTPTest - INFO - ============================================================

2025-09-09 15:21:31,041 - RSTPTest - INFO - ============================================================
2025-09-09 15:21:31,042 - RSTPTest - INFO - 开始测试: test_bpdu_flood_attack
2025-09-09 15:21:31,042 - RSTPTest - INFO - ============================================================
2025-09-09 15:21:31,042 - test_security - INFO - 开始BPDU洪泛攻击测试
2025-09-09 15:21:31,042 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 15:21:31,042 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 15:21:31,043 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 15:21:31,043 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 15:21:31,043 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 15:21:31,043 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 15:21:31,043 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 15:21:31,043 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 15:21:31,341 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 15:21:31,738 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 15:21:31,738 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 15:21:31,738 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 15:21:31,738 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 15:21:31,857 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 15:21:31,977 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 15:21:31,978 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 15:21:32,034 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 15:21:32,082 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 15:21:32,130 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 15:21:32,130 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 15:21:32,130 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 15:21:32,130 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 15:21:32,131 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 15:21:32,131 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 15:21:32,131 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 15:21:32,131 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 15:21:32,657 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 15:21:33,782 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 15:21:33,782 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 15:21:33,782 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 15:21:33,782 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 15:21:34,118 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 15:21:34,450 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 15:21:34,451 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 15:21:34,612 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 15:21:34,661 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 15:21:34,708 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 15:21:34,709 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 15:21:34,709 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 15:21:34,709 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 15:21:34,709 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 15:21:34,710 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 15:21:34,710 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 15:21:34,710 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 15:21:35,215 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 15:21:36,319 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 15:21:36,320 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 15:21:36,320 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 15:21:36,320 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 15:21:36,677 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 15:21:37,011 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 15:21:37,012 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 15:21:37,202 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 15:21:37,250 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 15:21:37,299 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 15:21:37,299 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 15:21:37,299 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 15:21:42,470 - test_security - INFO - 初始CPU使用率: 0.0%
2025-09-09 15:21:52,694 - test_security - INFO - 洪泛时CPU使用率: 0.0%
2025-09-09 15:21:52,846 - test_security - INFO - 网络在BPDU洪泛下保持稳定
2025-09-09 15:21:52,846 - test_security - INFO - BPDU洪泛攻击测试完成
2025-09-09 15:21:52,847 - RSTPTest - INFO - 测试完成: test_bpdu_flood_attack (耗时: 21.81秒)
2025-09-09 15:21:52,847 - RSTPTest - INFO - ============================================================

2025-09-09 15:21:52,848 - RSTPTest - INFO - ============================================================
2025-09-09 15:21:52,849 - RSTPTest - INFO - 开始测试: test_topology_change_attack
2025-09-09 15:21:52,849 - RSTPTest - INFO - ============================================================
2025-09-09 15:21:52,849 - test_security - INFO - 开始拓扑变更攻击测试
2025-09-09 15:21:52,850 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 15:21:52,850 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 15:21:52,850 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 15:21:52,850 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 15:21:52,850 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 15:21:52,850 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 15:21:52,851 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 15:21:52,851 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 15:21:53,145 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 15:21:53,537 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 15:21:53,537 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 15:21:53,537 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 15:21:53,537 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 15:21:53,657 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 15:21:53,777 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 15:21:53,778 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 15:21:53,833 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 15:21:53,882 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 15:21:53,929 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 15:21:53,930 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 15:21:53,930 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 15:21:53,930 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 15:21:53,930 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 15:21:53,930 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 15:21:53,931 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 15:21:53,931 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 15:21:54,452 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 15:21:55,565 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 15:21:55,565 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 15:21:55,566 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 15:21:55,566 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 15:21:55,897 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 15:21:56,256 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 15:21:56,257 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 15:21:56,435 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 15:21:56,483 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 15:21:56,532 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 15:21:56,532 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 15:21:56,532 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 15:21:56,532 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 15:21:56,533 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 15:21:56,533 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 15:21:56,533 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 15:21:56,533 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 15:21:57,053 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 15:21:58,147 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 15:21:58,147 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 15:21:58,147 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 15:21:58,148 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 15:21:58,501 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 15:21:58,856 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 15:21:58,856 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 15:21:59,038 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 15:21:59,086 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 15:21:59,135 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 15:21:59,136 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 15:21:59,136 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 15:22:04,200 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:22:04,358 - test_security - INFO - 触发快速拓扑变更...
2025-09-09 15:22:22,497 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 15:22:22,653 - test_security - INFO - 检测到0次拓扑变更
2025-09-09 15:22:22,809 - test_security - INFO - 网络在频繁拓扑变更后保持稳定
2025-09-09 15:22:22,809 - test_security - INFO - 拓扑变更攻击测试完成
2025-09-09 15:22:22,810 - RSTPTest - INFO - 测试完成: test_topology_change_attack (耗时: 29.96秒)
2025-09-09 15:22:22,810 - RSTPTest - INFO - ============================================================

2025-09-09 15:22:22,812 - RSTPTest - INFO - ============================================================
2025-09-09 15:22:22,812 - RSTPTest - INFO - 开始测试: test_mac_spoofing
2025-09-09 15:22:22,812 - RSTPTest - INFO - ============================================================
2025-09-09 15:22:22,813 - test_security - INFO - 开始MAC地址欺骗测试
2025-09-09 15:22:22,813 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 15:22:22,813 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 15:22:22,813 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 15:22:22,813 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 15:22:22,814 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 15:22:22,814 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 15:22:22,814 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 15:22:22,814 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 15:22:23,109 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 15:22:23,501 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 15:22:23,501 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 15:22:23,501 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 15:22:23,502 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 15:22:23,621 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 15:22:23,740 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 15:22:23,740 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 15:22:23,797 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 15:22:23,845 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 15:22:23,893 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 15:22:23,893 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 15:22:23,893 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 15:22:23,893 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 15:22:23,894 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 15:22:23,894 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 15:22:23,894 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 15:22:23,894 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 15:22:24,394 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 15:22:25,454 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 15:22:25,455 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 15:22:25,455 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 15:22:25,455 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 15:22:25,791 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 15:22:26,161 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 15:22:26,162 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 15:22:26,343 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 15:22:26,391 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 15:22:26,439 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 15:22:26,439 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 15:22:26,439 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 15:22:26,440 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 15:22:26,440 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 15:22:26,440 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 15:22:26,440 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 15:22:26,440 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 15:22:26,930 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 15:22:28,018 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 15:22:28,018 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 15:22:28,018 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 15:22:28,018 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 15:22:28,371 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 15:22:28,733 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 15:22:28,734 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 15:22:28,910 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 15:22:28,957 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 15:22:29,005 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 15:22:29,006 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 15:22:29,006 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 15:22:34,013 - test_security - INFO - DUT MAC地址: 90:12:10:b5:7d:f7
2025-09-09 15:22:34,013 - test_security - INFO - 尝试MAC地址欺骗...
2025-09-09 15:22:39,646 - test_security - INFO - 网络对MAC欺骗具有抗性
2025-09-09 15:22:40,133 - test_security - INFO - MAC地址欺骗测试完成
2025-09-09 15:22:40,135 - RSTPTest - INFO - 测试完成: test_mac_spoofing (耗时: 17.32秒)
2025-09-09 15:22:40,135 - RSTPTest - INFO - ============================================================

2025-09-09 15:22:40,136 - RSTPTest - INFO - ============================================================
2025-09-09 15:22:40,137 - RSTPTest - INFO - 开始测试: test_port_security
2025-09-09 15:22:40,137 - RSTPTest - INFO - ============================================================
2025-09-09 15:22:40,137 - test_security - INFO - 开始端口安全测试
2025-09-09 15:22:40,142 - test_security - WARNING - 未检测到任何端口安全功能
2025-09-09 15:22:40,143 - RSTPTest - INFO - 测试完成: test_port_security (耗时: 0.01秒)
2025-09-09 15:22:40,144 - RSTPTest - INFO - ============================================================

2025-09-09 15:22:40,144 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 15:22:40,144 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 15:22:40,145 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 15:22:40,556 - __main__ - INFO - ============================================================
2025-09-09 15:22:40,556 - __main__ - INFO - 测试完成，返回码: 1
2025-09-09 15:22:40,557 - __main__ - INFO - ============================================================
