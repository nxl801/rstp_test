2025-09-10 14:55:09,761 - root - INFO - 日志系统初始化完成，日志文件: logs\rstp_test_20250910_145509.log
2025-09-10 14:55:10,126 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 14:55:10,127 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 14:55:10,258 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 14:55:10,258 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 14:55:10,399 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 14:55:10,399 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 14:55:10,400 - RSTPTest - INFO - ============================================================
2025-09-10 14:55:10,400 - RSTPTest - INFO - 开始测试: test_port_state_transitions
2025-09-10 14:55:10,400 - RSTPTest - INFO - ============================================================
2025-09-10 14:55:10,401 - test_additional_rstp - INFO - 开始端口状态转换测试
2025-09-10 14:55:10,401 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 14:55:10,402 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 14:55:10,402 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 14:55:10,402 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 14:55:10,402 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 14:55:10,403 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 14:55:10,403 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 14:55:10,456 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 14:55:10,562 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 14:55:10,562 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 14:55:10,562 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 14:55:10,562 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 14:55:11,195 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 14:55:11,196 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 14:55:12,253 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 14:55:12,253 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 14:55:12,254 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 14:55:12,254 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 14:55:12,713 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 14:55:13,201 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 14:55:13,202 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 14:55:13,304 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 14:55:13,504 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 14:55:13,505 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 14:55:13,505 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 14:55:13,505 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 14:55:13,505 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 14:55:13,506 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 14:55:13,506 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 14:55:13,560 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 14:55:13,560 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 14:55:13,734 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 14:55:13,734 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 14:55:13,734 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 14:55:13,734 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 14:55:13,735 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 14:55:14,282 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 14:55:18,836 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:55:18,963 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:55:18,963 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 14:55:18,963 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 14:55:18,964 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 14:55:18,964 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 14:55:20,205 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 14:55:21,432 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 14:55:21,432 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 14:55:21,527 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 14:55:21,795 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 14:55:21,795 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 14:55:21,795 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 14:55:21,795 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 14:55:21,796 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 14:55:21,796 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 14:55:21,796 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 14:55:21,851 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 14:55:21,851 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 14:55:22,026 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 14:55:22,026 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 14:55:22,027 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 14:55:22,027 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 14:55:22,027 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 14:55:22,590 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 14:55:27,142 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:55:27,281 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:55:27,281 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 14:55:27,282 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 14:55:27,282 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 14:55:27,282 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 14:55:28,489 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 14:55:29,739 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 14:55:29,739 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 14:55:29,834 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 14:55:30,118 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 14:55:30,119 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 14:55:30,119 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 14:55:35,332 - test_additional_rstp - INFO - 使用网桥: SE_ETH2
2025-09-10 14:55:35,333 - test_additional_rstp - INFO - === 步骤1: 禁用端口触发状态转换 ===
2025-09-10 14:55:36,354 - RSTPTest - INFO - 测试完成: test_port_state_transitions (耗时: 25.95秒)
2025-09-10 14:55:36,354 - RSTPTest - INFO - ============================================================

2025-09-10 14:55:36,356 - RSTPTest - INFO - ============================================================
2025-09-10 14:55:36,356 - RSTPTest - INFO - 开始测试: test_bpdu_propagation_and_keepalive
2025-09-10 14:55:36,356 - RSTPTest - INFO - ============================================================
2025-09-10 14:55:36,357 - test_additional_rstp - INFO - 开始BPDU传播和保活机制测试
2025-09-10 14:55:36,357 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 14:55:36,357 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 14:55:36,357 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 14:55:36,357 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 14:55:36,357 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 14:55:36,357 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 14:55:36,358 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 14:55:36,358 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 14:55:37,127 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 14:55:37,128 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 14:55:38,172 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 14:55:38,172 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 14:55:38,172 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 14:55:38,173 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 14:55:38,628 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 14:55:39,100 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 14:55:39,100 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 14:55:39,203 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 14:55:39,396 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 14:55:39,397 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 14:55:39,397 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 14:55:39,397 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 14:55:39,397 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 14:55:39,398 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 14:55:39,398 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 14:55:39,398 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 14:55:39,916 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 14:55:44,457 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:55:44,594 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:55:44,594 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 14:55:44,595 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 14:55:44,595 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 14:55:44,595 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 14:55:45,835 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 14:55:47,066 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 14:55:47,067 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 14:55:47,162 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 14:55:47,429 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 14:55:47,429 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 14:55:47,429 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 14:55:47,429 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 14:55:47,430 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 14:55:47,430 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 14:55:47,430 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 14:55:47,430 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 14:55:47,941 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 14:55:52,474 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:55:52,608 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:55:52,609 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 14:55:52,609 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 14:55:52,609 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 14:55:52,609 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 14:55:53,845 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 14:55:55,099 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 14:55:55,099 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 14:55:55,196 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 14:55:55,463 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 14:55:55,463 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 14:55:55,463 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 14:56:03,804 - test_additional_rstp - INFO - === 步骤1: 验证分布式BPDU生成 ===
2025-09-10 14:56:03,860 - test_additional_rstp - INFO - 检测到网桥接口: ['18:', '26:']
2025-09-10 14:56:03,861 - test_additional_rstp - INFO - 在接口 18: 上捕获BPDU...
2025-09-10 14:56:03,861 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: 18:, 数量: 10)
2025-09-10 14:56:03,997 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-10 14:56:03,998 - test_additional_rstp - WARNING - 在 18: 上未捕获到BPDU
2025-09-10 14:56:03,998 - test_additional_rstp - INFO - 在接口 26: 上捕获BPDU...
2025-09-10 14:56:03,998 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: 26:, 数量: 10)
2025-09-10 14:56:04,113 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-10 14:56:04,113 - test_additional_rstp - WARNING - 在 26: 上未捕获到BPDU
2025-09-10 14:56:04,113 - test_additional_rstp - INFO - 总共捕获 0 个BPDU，来自 0 个不同源
2025-09-10 14:56:04,114 - test_additional_rstp - WARNING - 未检测到BPDU传播
2025-09-10 14:56:04,114 - test_additional_rstp - INFO - BPDU传播和保活机制测试完成
2025-09-10 14:56:04,115 - RSTPTest - INFO - 测试完成: test_bpdu_propagation_and_keepalive (耗时: 27.76秒)
2025-09-10 14:56:04,115 - RSTPTest - INFO - ============================================================

2025-09-10 14:56:04,116 - RSTPTest - INFO - ============================================================
2025-09-10 14:56:04,116 - RSTPTest - INFO - 开始测试: test_disabled_port_exclusion_enhanced
2025-09-10 14:56:04,116 - RSTPTest - INFO - ============================================================
2025-09-10 14:56:04,117 - test_additional_rstp - INFO - 开始增强的禁用端口排除测试
2025-09-10 14:56:04,117 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 14:56:04,117 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 14:56:04,117 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 14:56:04,118 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 14:56:04,118 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 14:56:04,118 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 14:56:04,118 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 14:56:04,118 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 14:56:04,622 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 14:56:04,623 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 14:56:05,656 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 14:56:05,656 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 14:56:05,656 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 14:56:05,656 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 14:56:06,111 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 14:56:06,587 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 14:56:06,587 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 14:56:06,691 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 14:56:06,883 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 14:56:06,884 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 14:56:06,884 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 14:56:06,884 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 14:56:06,885 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 14:56:06,885 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 14:56:06,885 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 14:56:06,885 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 14:56:07,434 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 14:56:11,983 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:56:12,117 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:56:12,117 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 14:56:12,117 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 14:56:12,118 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 14:56:12,118 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 14:56:13,341 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 14:56:14,549 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 14:56:14,550 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 14:56:14,646 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 14:56:14,920 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 14:56:14,920 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 14:56:14,920 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 14:56:14,921 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 14:56:14,921 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 14:56:14,921 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 14:56:14,921 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 14:56:14,921 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 14:56:15,431 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 14:56:19,966 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:56:20,100 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:56:20,100 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 14:56:20,101 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 14:56:20,101 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 14:56:20,101 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 14:56:21,328 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 14:56:22,585 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 14:56:22,586 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 14:56:22,682 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 14:56:22,948 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 14:56:22,948 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 14:56:22,948 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 14:56:29,165 - test_additional_rstp - INFO - 初始活动端口数量: 0
2025-09-10 14:56:29,166 - RSTPTest - INFO - 测试完成: test_disabled_port_exclusion_enhanced (耗时: 25.05秒)
2025-09-10 14:56:29,166 - RSTPTest - INFO - ============================================================

2025-09-10 14:56:29,166 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 14:56:29,167 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 14:56:29,167 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 14:56:29,309 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 14:56:29,310 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 14:56:29,434 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 14:56:29,435 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 14:56:29,570 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 14:56:29,571 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 14:56:29,571 - RSTPTest - INFO - ============================================================
2025-09-10 14:56:29,572 - RSTPTest - INFO - 开始测试: test_proposal_agreement_handshake
2025-09-10 14:56:29,572 - RSTPTest - INFO - ============================================================
2025-09-10 14:56:29,573 - test_advanced_rstp_mechanisms - INFO - 开始测试RSTP Proposal/Agreement握手机制
2025-09-10 14:56:29,573 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 14:56:29,573 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 14:56:29,573 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 14:56:29,574 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 14:56:29,574 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 14:56:29,574 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 14:56:29,574 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 14:56:29,627 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 14:56:29,733 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 14:56:29,733 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 14:56:29,734 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 14:56:29,734 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 14:56:30,266 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 14:56:30,267 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 14:56:31,319 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 14:56:31,320 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 14:56:31,320 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 14:56:31,320 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 14:56:31,793 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 14:56:32,281 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 14:56:32,281 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 14:56:32,384 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 14:56:32,576 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 14:56:32,576 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 14:56:32,576 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 14:56:32,576 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 14:56:32,576 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 14:56:32,577 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 14:56:32,577 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 14:56:32,631 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 14:56:32,631 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 14:56:32,809 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 14:56:32,809 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 14:56:32,809 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 14:56:32,810 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 14:56:32,810 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 14:56:33,353 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 14:56:37,921 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:56:38,054 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:56:38,055 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 14:56:38,055 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 14:56:38,055 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 14:56:38,055 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 14:56:39,293 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 14:56:40,521 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 14:56:40,521 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 14:56:40,616 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 14:56:40,890 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 14:56:40,890 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 14:56:40,891 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 14:56:40,891 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 14:56:40,891 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 14:56:40,891 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 14:56:40,891 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 14:56:40,947 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 14:56:40,947 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 14:56:41,121 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 14:56:41,122 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 14:56:41,122 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 14:56:41,122 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 14:56:41,122 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 14:56:41,691 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 14:56:46,226 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:56:56,308 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:56:56,308 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 14:56:56,309 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 14:56:56,309 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 14:56:56,309 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 14:58:02,297 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 14:58:58,891 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 14:58:58,891 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 14:58:58,987 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 14:59:04,249 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 14:59:04,249 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 14:59:04,250 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 14:59:09,250 - test_advanced_rstp_mechanisms - INFO - 开始在eth0上捕获BPDU
2025-09-10 14:59:09,251 - test_advanced_rstp_mechanisms - INFO - 触发拓扑变更...
2025-09-10 14:59:15,516 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: eth0, 数量: 20)
2025-09-10 14:59:15,598 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-10 14:59:15,598 - test_advanced_rstp_mechanisms - INFO - 捕获到0个BPDU数据包
2025-09-10 14:59:15,598 - test_advanced_rstp_mechanisms - WARNING - 未能捕获到完整的BPDU握手序列，可能是环境限制
2025-09-10 14:59:15,599 - test_advanced_rstp_mechanisms - INFO - 改为验证网络收敛状态...
2025-09-10 14:59:16,649 - test_advanced_rstp_mechanisms - INFO - ✓ 网络收敛正常，存在根端口
2025-09-10 14:59:18,650 - test_advanced_rstp_mechanisms - INFO - RSTP Proposal/Agreement握手机制测试通过
2025-09-10 14:59:18,651 - RSTPTest - INFO - 测试完成: test_proposal_agreement_handshake (耗时: 169.08秒)
2025-09-10 14:59:18,651 - RSTPTest - INFO - ============================================================

2025-09-10 14:59:18,652 - RSTPTest - INFO - ============================================================
2025-09-10 14:59:18,652 - RSTPTest - INFO - 开始测试: test_tcn_topology_change_notification
2025-09-10 14:59:18,653 - RSTPTest - INFO - ============================================================
2025-09-10 14:59:18,653 - test_advanced_rstp_mechanisms - INFO - 开始测试TCN拓扑变更通知机制
2025-09-10 14:59:18,653 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 14:59:18,654 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 14:59:18,654 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 14:59:18,654 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 14:59:18,654 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 14:59:18,654 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 14:59:18,654 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 14:59:18,655 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 14:59:19,103 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 14:59:19,104 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 14:59:20,149 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 14:59:20,149 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 14:59:20,149 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 14:59:20,149 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 14:59:20,610 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 14:59:21,089 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 14:59:21,089 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 14:59:21,193 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 14:59:21,385 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 14:59:21,385 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 14:59:21,385 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 14:59:21,386 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 14:59:21,386 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 14:59:21,386 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 14:59:21,386 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 14:59:21,386 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 14:59:21,890 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 14:59:26,459 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:59:26,604 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:59:26,604 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 14:59:26,605 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 14:59:26,605 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 14:59:26,605 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 14:59:27,840 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 14:59:29,072 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 14:59:29,073 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 14:59:29,170 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 14:59:29,435 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 14:59:29,435 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 14:59:29,435 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 14:59:29,435 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 14:59:29,436 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 14:59:29,436 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 14:59:29,436 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 14:59:29,436 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 14:59:45,087 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 14:59:49,641 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:59:49,773 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:59:49,773 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 14:59:49,773 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 14:59:49,773 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 14:59:49,774 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 14:59:50,998 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 14:59:52,250 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 14:59:52,251 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 14:59:52,345 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 14:59:52,618 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 14:59:52,618 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 14:59:52,618 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 15:00:03,641 - test_advanced_rstp_mechanisms - INFO - 初始网桥端口数量: 3
2025-09-10 15:00:03,642 - test_advanced_rstp_mechanisms - INFO - 触发拓扑变更：临时禁用/启用端口
2025-09-10 15:00:03,796 - test_advanced_rstp_mechanisms - INFO - 初始TC计数: 0
2025-09-10 15:00:12,075 - test_advanced_rstp_mechanisms - INFO - 变更后TC计数: 0
2025-09-10 15:00:12,075 - test_advanced_rstp_mechanisms - INFO - 拓扑变更可能未被检测到，这可能是正常的（取决于实现）
2025-09-10 15:00:13,148 - test_advanced_rstp_mechanisms - INFO - 最终网桥端口数量: 3
2025-09-10 15:00:13,303 - test_advanced_rstp_mechanisms - INFO - 当前MAC地址表老化时间: 300秒
2025-09-10 15:00:13,304 - test_advanced_rstp_mechanisms - WARNING - MAC地址表老化时间(300秒)未缩短，可能是实现差异
2025-09-10 15:00:13,304 - test_advanced_rstp_mechanisms - INFO - TCN拓扑变更通知机制测试通过 - 使用安全的端口状态变更方式
2025-09-10 15:00:13,305 - RSTPTest - INFO - 测试完成: test_tcn_topology_change_notification (耗时: 54.65秒)
2025-09-10 15:00:13,305 - RSTPTest - INFO - ============================================================

2025-09-10 15:00:13,306 - RSTPTest - INFO - ============================================================
2025-09-10 15:00:13,307 - RSTPTest - INFO - 开始测试: test_edge_port_behavior
2025-09-10 15:00:13,307 - RSTPTest - INFO - ============================================================
2025-09-10 15:00:13,307 - test_advanced_rstp_mechanisms - INFO - 开始测试边缘端口行为
2025-09-10 15:00:13,307 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 15:00:13,308 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 15:00:13,308 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 15:00:13,308 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 15:00:13,308 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 15:00:13,308 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 15:00:13,308 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 15:00:13,309 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 15:00:13,832 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 15:00:13,832 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 15:00:14,876 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 15:00:14,876 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 15:00:14,877 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 15:00:14,877 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 15:00:15,335 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 15:00:15,816 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 15:00:15,816 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 15:00:15,920 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 15:00:16,116 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 15:00:16,117 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 15:00:16,117 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 15:00:16,117 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 15:00:16,117 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 15:00:16,118 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 15:00:16,118 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 15:00:16,118 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 15:00:16,632 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 15:00:21,556 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:00:21,687 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:00:21,687 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 15:00:21,687 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 15:00:21,688 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 15:00:21,688 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 15:00:22,899 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 15:00:24,131 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 15:00:24,132 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 15:00:24,226 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 15:00:24,503 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 15:00:24,504 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 15:00:24,504 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 15:00:24,504 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 15:00:24,504 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 15:00:24,504 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 15:00:24,505 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 15:00:24,505 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 15:00:25,025 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 15:00:29,589 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:00:29,741 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:00:29,741 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 15:00:29,742 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 15:00:29,742 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 15:00:29,742 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 15:00:30,967 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 15:00:32,227 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 15:00:32,227 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 15:00:32,322 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 15:00:32,597 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 15:00:32,597 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 15:00:32,597 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 15:00:39,107 - test_advanced_rstp_mechanisms - INFO - 可用端口: ['enp1s0']
2025-09-10 15:00:39,107 - test_advanced_rstp_mechanisms - INFO - 选择端口enp1s0作为边缘端口测试
2025-09-10 15:00:39,215 - test_advanced_rstp_mechanisms - INFO - 测试边缘端口立即转发特性
2025-09-10 15:00:42,103 - test_advanced_rstp_mechanisms - INFO - 边缘端口状态转换时间: 2.74秒
2025-09-10 15:00:42,103 - test_advanced_rstp_mechanisms - INFO - ✓ 边缘端口转换时间合理
2025-09-10 15:00:42,213 - test_advanced_rstp_mechanisms - INFO - ✓ 边缘端口状态变化未产生TCN
2025-09-10 15:00:42,213 - test_advanced_rstp_mechanisms - INFO - 测试边缘端口收到BPDU后的行为
2025-09-10 15:00:42,368 - test_advanced_rstp_mechanisms - INFO - 边缘端口状态: 1
1
normal
2025-09-10 15:00:42,369 - test_advanced_rstp_mechanisms - INFO - 边缘端口行为测试通过
2025-09-10 15:00:42,369 - RSTPTest - INFO - 测试完成: test_edge_port_behavior (耗时: 29.06秒)
2025-09-10 15:00:42,370 - RSTPTest - INFO - ============================================================

2025-09-10 15:00:42,371 - RSTPTest - INFO - ============================================================
2025-09-10 15:00:42,371 - RSTPTest - INFO - 开始测试: test_shared_vs_point_to_point_links
2025-09-10 15:00:42,371 - RSTPTest - INFO - ============================================================
2025-09-10 15:00:42,372 - test_advanced_rstp_mechanisms - INFO - 开始测试不同链路类型的行为差异
2025-09-10 15:00:42,372 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 15:00:42,372 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 15:00:42,372 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 15:00:42,373 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 15:00:42,373 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 15:00:42,373 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 15:00:42,373 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 15:00:42,373 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 15:00:42,917 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 15:00:42,917 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 15:00:43,965 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 15:00:43,965 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 15:00:43,965 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 15:00:43,965 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 15:00:44,432 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 15:00:44,912 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 15:00:44,912 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 15:00:45,016 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 15:00:45,208 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 15:00:45,208 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 15:00:45,208 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 15:00:45,209 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 15:00:45,209 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 15:00:45,209 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 15:00:45,209 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 15:00:45,209 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 15:00:45,719 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 15:00:50,312 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:00:51,349 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:00:51,349 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 15:00:51,349 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 15:00:51,350 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 15:00:51,350 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 15:01:00,922 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 15:01:02,180 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 15:01:02,180 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 15:01:02,277 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 15:01:02,545 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 15:01:02,546 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 15:01:02,546 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 15:01:02,546 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 15:01:02,546 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 15:01:02,546 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 15:01:02,547 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 15:01:02,547 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 15:01:03,053 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 15:01:07,609 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:01:07,741 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:01:07,742 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 15:01:07,742 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 15:01:07,742 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 15:01:07,743 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 15:01:08,955 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 15:01:10,213 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 15:01:10,213 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 15:01:10,311 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 15:01:10,582 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 15:01:10,582 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 15:01:10,582 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 15:01:15,692 - test_advanced_rstp_mechanisms - INFO - 检测到的链路类型: {}
2025-09-10 15:01:15,692 - test_advanced_rstp_mechanisms - INFO - 测试点对点链路收敛性能
2025-09-10 15:01:19,663 - test_advanced_rstp_mechanisms - INFO - 收敛时间: 3.97秒
2025-09-10 15:01:19,664 - test_advanced_rstp_mechanisms - INFO - 验证链路类型识别
2025-09-10 15:01:19,664 - test_advanced_rstp_mechanisms - INFO - 不同链路类型行为差异测试通过
2025-09-10 15:01:19,665 - RSTPTest - INFO - 测试完成: test_shared_vs_point_to_point_links (耗时: 37.29秒)
2025-09-10 15:01:19,665 - RSTPTest - INFO - ============================================================

2025-09-10 15:01:19,666 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 15:01:19,666 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 15:01:19,667 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 15:01:19,800 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 15:01:19,801 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 15:01:19,918 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 15:01:19,919 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 15:01:20,051 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 15:01:20,052 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 15:01:20,052 - RSTPTest - INFO - ============================================================
2025-09-10 15:01:20,052 - RSTPTest - INFO - 开始测试: test_backup_port_concept_verification
2025-09-10 15:01:20,053 - RSTPTest - INFO - ============================================================
2025-09-10 15:01:20,053 - test_backup_port_simulation - INFO - 开始备份端口概念验证测试
2025-09-10 15:01:20,053 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 15:01:20,054 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 15:01:20,054 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 15:01:20,054 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 15:01:20,054 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 15:01:20,055 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 15:01:20,055 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 15:01:20,107 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 15:01:20,213 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 15:01:20,214 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 15:01:20,214 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 15:01:20,214 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 15:01:20,750 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 15:01:20,751 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 15:01:21,787 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 15:01:21,787 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 15:01:21,787 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 15:01:21,787 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 15:01:22,257 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 15:01:22,720 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 15:01:22,720 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 15:01:22,826 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 15:01:23,019 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 15:01:23,020 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 15:01:23,020 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 15:01:23,020 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 15:01:23,020 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 15:01:23,021 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 15:01:23,021 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 15:01:23,076 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 15:01:23,076 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 15:01:23,259 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 15:01:23,260 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 15:01:23,260 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 15:01:23,260 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 15:01:23,260 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 15:01:23,820 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 15:01:28,365 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:01:28,494 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:01:28,495 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 15:01:28,495 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 15:01:28,495 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 15:01:28,496 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 15:01:29,768 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 15:01:30,991 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 15:01:30,992 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 15:01:31,088 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 15:01:31,364 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 15:01:31,364 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 15:01:31,364 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 15:01:31,365 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 15:01:31,365 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 15:01:31,365 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 15:01:31,365 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 15:01:31,420 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 15:01:31,420 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 15:01:31,597 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 15:01:31,598 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 15:01:31,598 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 15:01:31,598 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 15:01:31,598 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 15:01:32,149 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 15:01:36,695 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:01:36,823 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:01:36,823 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 15:01:36,824 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 15:01:36,824 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 15:01:36,824 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 15:01:38,043 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 15:01:39,303 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 15:01:39,303 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 15:01:39,399 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 15:01:39,681 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 15:01:39,681 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 15:01:39,681 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 15:01:50,706 - test_backup_port_simulation - INFO - === 当前端口状态 ===
2025-09-10 15:01:50,706 - test_backup_port_simulation - INFO - 端口 eth0: 角色=root, 状态=disabled
2025-09-10 15:01:50,706 - test_backup_port_simulation - INFO - 端口 eth2: 角色=alternate, 状态=disabled
2025-09-10 15:01:50,707 - test_backup_port_simulation - INFO - 端口 eth3: 角色=unknown, 状态=disabled
2025-09-10 15:01:50,707 - test_backup_port_simulation - INFO - ⚠ 在当前点对点拓扑中未检测到备份端口（符合预期）
2025-09-10 15:01:50,707 - test_backup_port_simulation - INFO - 备份端口通常出现在共享介质网段中，当前测试环境为点对点链路
2025-09-10 15:01:50,707 - test_backup_port_simulation - INFO - 端口角色分布: {}
2025-09-10 15:01:50,707 - test_backup_port_simulation - INFO - === RSTP端口角色覆盖分析 ===
2025-09-10 15:01:50,707 - test_backup_port_simulation - INFO - - root端口: 未检测到
2025-09-10 15:01:50,707 - test_backup_port_simulation - INFO - - designated端口: 未检测到
2025-09-10 15:01:50,708 - test_backup_port_simulation - INFO - - alternate端口: 未检测到
2025-09-10 15:01:50,708 - test_backup_port_simulation - INFO - - backup端口: 未检测到（在点对点拓扑中为正常现象）
2025-09-10 15:01:50,708 - test_backup_port_simulation - INFO - 备份端口概念验证测试完成
2025-09-10 15:01:50,709 - RSTPTest - INFO - 测试完成: test_backup_port_concept_verification (耗时: 30.66秒)
2025-09-10 15:01:50,709 - RSTPTest - INFO - ============================================================

2025-09-10 15:01:50,710 - RSTPTest - INFO - ============================================================
2025-09-10 15:01:50,710 - RSTPTest - INFO - 开始测试: test_shared_medium_simulation_attempt
2025-09-10 15:01:50,710 - RSTPTest - INFO - ============================================================
2025-09-10 15:01:50,711 - test_backup_port_simulation - INFO - 开始共享介质模拟尝试
2025-09-10 15:01:50,711 - test_backup_port_simulation - INFO - === 尝试创建共享介质模拟场景 ===
2025-09-10 15:01:50,711 - test_backup_port_simulation - INFO - 创建中心交换机模拟共享介质...
2025-09-10 15:01:50,712 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 15:01:50,712 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 15:01:50,712 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 15:01:50,712 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 15:01:50,713 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 15:01:50,713 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 15:01:50,713 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 15:01:50,713 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 15:01:51,210 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 15:01:51,210 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 15:01:52,256 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 15:01:52,257 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 15:01:52,257 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 15:01:52,258 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 15:01:52,720 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 15:01:53,205 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 15:01:53,205 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 15:01:53,314 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 15:01:53,506 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 15:01:53,506 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 15:01:53,506 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 15:01:53,507 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 15:01:53,507 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 15:01:53,507 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 15:01:53,507 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 15:01:53,508 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 15:01:54,027 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 15:01:58,586 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:01:58,717 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:01:58,718 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 15:01:58,718 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 15:01:58,718 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 15:01:58,718 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 15:01:59,942 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 15:02:01,174 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 15:02:01,174 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 15:02:01,271 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 15:02:01,539 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 15:02:01,540 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 15:02:01,540 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 15:02:01,540 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 15:02:01,540 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 15:02:01,541 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 15:02:01,541 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 15:02:01,541 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 15:02:02,072 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 15:02:06,621 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:02:06,757 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:02:06,758 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 15:02:06,758 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 15:02:06,758 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 15:02:06,759 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 15:02:08,002 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 15:02:09,274 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 15:02:09,274 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 15:02:09,368 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 15:02:09,644 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 15:02:09,645 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 15:02:09,645 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 15:02:20,657 - test_backup_port_simulation - INFO - === 分析当前端口配置 ===
2025-09-10 15:02:20,658 - test_backup_port_simulation - INFO - ⚠ 未检测到备份端口
2025-09-10 15:02:20,658 - test_backup_port_simulation - INFO - 这在当前测试环境中是正常的，因为缺乏真正的共享介质
2025-09-10 15:02:20,658 - test_backup_port_simulation - INFO - 共享介质模拟尝试完成
2025-09-10 15:02:20,659 - RSTPTest - INFO - 测试完成: test_shared_medium_simulation_attempt (耗时: 29.95秒)
2025-09-10 15:02:20,659 - RSTPTest - INFO - ============================================================

2025-09-10 15:02:20,660 - RSTPTest - INFO - ============================================================
2025-09-10 15:02:20,660 - RSTPTest - INFO - 开始测试: test_backup_port_documentation_verification
2025-09-10 15:02:20,661 - RSTPTest - INFO - ============================================================
2025-09-10 15:02:20,661 - test_backup_port_simulation - INFO - 开始备份端口文档验证
2025-09-10 15:02:20,661 - test_backup_port_simulation - INFO - ✓ PortRole.BACKUP 存在
2025-09-10 15:02:20,661 - test_backup_port_simulation - INFO - === 备份端口理论特性验证 ===
2025-09-10 15:02:20,662 - test_backup_port_simulation - INFO - purpose: 为共享介质网段提供冗余
2025-09-10 15:02:20,662 - test_backup_port_simulation - INFO - difference_from_alternate: 备份端口是同一交换机上指定端口的备份，而备用端口是不同交换机提供的路径
2025-09-10 15:02:20,662 - test_backup_port_simulation - INFO - state: Discarding
2025-09-10 15:02:20,662 - test_backup_port_simulation - INFO - scenario: 出现在连接到集线器或共享介质的场景中
2025-09-10 15:02:20,662 - test_backup_port_simulation - INFO - fast_transition: 当对应的指定端口失效时，可以快速转换为指定端口
2025-09-10 15:02:20,662 - test_backup_port_simulation - INFO - === 端口角色对比 ===
2025-09-10 15:02:20,662 - test_backup_port_simulation - INFO - root: 连接到根桥的最佳路径
2025-09-10 15:02:20,663 - test_backup_port_simulation - INFO - designated: 为网段提供转发服务
2025-09-10 15:02:20,663 - test_backup_port_simulation - INFO - alternate: 提供到根桥的备用路径（来自其他交换机）
2025-09-10 15:02:20,663 - test_backup_port_simulation - INFO - backup: 同一交换机上指定端口的备份（共享介质场景）
2025-09-10 15:02:20,663 - test_backup_port_simulation - INFO - === 测试覆盖率分析 ===
2025-09-10 15:02:20,663 - test_backup_port_simulation - INFO - 已覆盖: Root Port, Designated Port, Alternate Port, Disabled Port
2025-09-10 15:02:20,663 - test_backup_port_simulation - INFO - 部分覆盖: Backup Port (概念验证)
2025-09-10 15:02:20,664 - test_backup_port_simulation - INFO - 覆盖限制: 测试框架无法创建真正的共享介质拓扑
2025-09-10 15:02:20,664 - test_backup_port_simulation - INFO - 建议: 在实际部署环境中使用集线器或配置交换机共享模式进行完整测试
2025-09-10 15:02:20,664 - test_backup_port_simulation - INFO - 备份端口文档验证完成
2025-09-10 15:02:20,665 - RSTPTest - INFO - 测试完成: test_backup_port_documentation_verification (耗时: 0.00秒)
2025-09-10 15:02:20,665 - RSTPTest - INFO - ============================================================

2025-09-10 15:02:20,666 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 15:02:20,666 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 15:02:20,666 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 15:02:20,799 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 15:02:20,800 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 15:02:20,919 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 15:02:20,920 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 15:02:21,053 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 15:02:21,053 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 15:02:21,054 - RSTPTest - INFO - ============================================================
2025-09-10 15:02:21,054 - RSTPTest - INFO - 开始测试: test_direct_link_failure
2025-09-10 15:02:21,054 - RSTPTest - INFO - ============================================================
2025-09-10 15:02:21,055 - test_convergence - INFO - 开始直接链路故障测试
2025-09-10 15:02:21,055 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 15:02:21,055 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 15:02:21,056 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 15:02:21,056 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 15:02:21,056 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 15:02:21,057 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 15:02:21,057 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 15:02:21,109 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 15:02:21,219 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 15:02:21,219 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 15:02:21,220 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 15:02:21,220 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 15:02:21,737 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 15:02:21,737 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 15:02:22,774 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 15:02:22,774 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 15:02:22,775 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 15:02:22,775 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 15:02:23,253 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 15:02:23,734 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 15:02:23,734 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 15:02:23,837 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 15:02:24,030 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 15:02:24,031 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 15:02:24,031 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 15:02:24,031 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 15:02:24,031 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 15:02:24,031 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 15:02:24,032 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 15:02:24,086 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 15:02:24,087 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 15:02:24,255 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 15:02:24,256 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 15:02:24,256 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 15:02:24,256 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 15:02:24,256 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 15:02:24,807 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 15:02:29,375 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:02:29,502 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:02:29,502 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 15:02:29,502 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 15:02:29,503 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 15:02:29,503 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 15:02:30,717 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 15:02:31,945 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 15:02:31,946 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 15:02:32,042 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 15:02:32,309 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 15:02:32,310 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 15:02:32,310 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 15:02:32,310 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 15:02:32,310 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 15:02:32,311 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 15:02:32,311 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 15:02:32,366 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 15:02:32,366 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 15:02:32,537 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 15:02:32,538 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 15:02:32,538 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 15:02:32,538 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 15:02:32,538 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 15:02:33,093 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 15:02:37,674 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:02:37,809 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:02:37,810 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 15:02:37,810 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 15:02:37,810 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 15:02:37,810 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 15:02:39,028 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 15:02:40,297 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 15:02:40,297 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 15:02:40,394 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 15:02:40,668 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 15:02:40,668 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 15:02:40,669 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 15:02:40,991 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 15:02:42,734 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.74秒
2025-09-10 15:02:42,734 - test_convergence - INFO - 初始收敛时间: 1.74秒
2025-09-10 15:02:43,757 - test_convergence - INFO - DUT的Root Port: eth0
2025-09-10 15:02:43,758 - FaultInjector_DUT - INFO - 断开链路: eth0
2025-09-10 15:02:44,024 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth0 (code=1)，将在逻辑上标记为已断开
2025-09-10 15:02:44,024 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 15:02:45,694 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.67秒
2025-09-10 15:02:46,617 - test_convergence - INFO - 链路故障收敛时间: 1.67秒
2025-09-10 15:02:46,618 - test_convergence - INFO - 新的Root Port: eth2
2025-09-10 15:02:46,618 - test_convergence - INFO - 直接链路故障测试通过
2025-09-10 15:02:46,619 - RSTPTest - INFO - 测试完成: test_direct_link_failure (耗时: 25.56秒)
2025-09-10 15:02:46,619 - RSTPTest - INFO - ============================================================

2025-09-10 15:02:46,671 - RSTPTest - INFO - ============================================================
2025-09-10 15:02:46,672 - RSTPTest - INFO - 开始测试: test_multiple_link_failures
2025-09-10 15:02:46,672 - RSTPTest - INFO - ============================================================
2025-09-10 15:02:46,672 - test_convergence - INFO - 开始多重链路故障测试
2025-09-10 15:02:46,673 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 15:02:46,673 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 15:02:46,673 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 15:02:46,673 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 15:02:46,673 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 15:02:46,673 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 15:02:46,673 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 15:02:46,674 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 15:02:47,166 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 15:02:47,166 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 15:02:48,229 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 15:02:48,229 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 15:02:48,230 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 15:02:48,230 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 15:02:48,688 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 15:02:49,169 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 15:02:49,170 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 15:02:49,273 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 15:02:49,465 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 15:02:49,465 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 15:02:49,466 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 15:02:49,466 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 15:02:49,466 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 15:02:49,466 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 15:02:49,466 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 15:02:49,466 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 15:02:49,998 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 15:02:54,550 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:02:54,690 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:02:54,691 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 15:02:54,691 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 15:02:54,691 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 15:02:54,691 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 15:02:55,921 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 15:02:57,145 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 15:02:57,145 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 15:02:57,241 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 15:02:57,509 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 15:02:57,510 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 15:02:57,510 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 15:02:57,511 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 15:02:57,511 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 15:02:57,511 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 15:02:57,511 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 15:02:57,512 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 15:02:58,023 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 15:03:02,556 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:03:02,695 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:03:02,695 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 15:03:02,695 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 15:03:02,695 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 15:03:02,696 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 15:03:03,935 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 15:03:05,194 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 15:03:05,194 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 15:03:05,290 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 15:03:05,553 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 15:03:05,553 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 15:03:05,553 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 15:03:05,553 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 15:03:07,218 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.66秒
2025-09-10 15:03:07,218 - test_convergence - INFO - 注入故障: eth0
2025-09-10 15:03:07,218 - FaultInjector_DUT - INFO - 断开链路: eth0
2025-09-10 15:03:07,437 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth0 (code=1)，将在逻辑上标记为已断开
2025-09-10 15:03:07,437 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 15:03:09,110 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.67秒
2025-09-10 15:03:09,111 - test_convergence - INFO - eth0故障收敛时间: 1.67秒
2025-09-10 15:03:11,111 - test_convergence - INFO - 注入故障: eth2
2025-09-10 15:03:11,112 - FaultInjector_DUT - INFO - 断开链路: eth2
2025-09-10 15:03:11,332 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth2 (code=1)，将在逻辑上标记为已断开
2025-09-10 15:03:11,332 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 15:03:12,910 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.58秒
2025-09-10 15:03:12,910 - test_convergence - INFO - eth2故障收敛时间: 1.58秒
2025-09-10 15:03:14,911 - FaultInjector_DUT - INFO - 恢复链路: eth0
2025-09-10 15:03:15,218 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth0 (code=1)，将在逻辑上标记为已恢复
2025-09-10 15:03:15,218 - FaultInjector_DUT - INFO - 恢复链路: eth2
2025-09-10 15:03:15,552 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth2 (code=1)，将在逻辑上标记为已恢复
2025-09-10 15:03:15,553 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 15:03:17,337 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.78秒
2025-09-10 15:03:17,338 - test_convergence - INFO - 最终恢复收敛时间: 1.78秒
2025-09-10 15:03:17,338 - test_convergence - INFO - 多重链路故障测试通过
2025-09-10 15:03:17,339 - RSTPTest - INFO - 测试完成: test_multiple_link_failures (耗时: 30.67秒)
2025-09-10 15:03:17,339 - RSTPTest - INFO - ============================================================

2025-09-10 15:03:17,340 - RSTPTest - INFO - ============================================================
2025-09-10 15:03:17,340 - RSTPTest - INFO - 开始测试: test_convergence_with_traffic
2025-09-10 15:03:17,340 - RSTPTest - INFO - ============================================================
2025-09-10 15:03:17,341 - test_convergence - INFO - 开始带流量的收敛测试
2025-09-10 15:03:17,341 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 15:03:17,341 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 15:03:17,342 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 15:03:17,342 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 15:03:17,342 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 15:03:17,342 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 15:03:17,342 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 15:03:17,342 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 15:03:17,828 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 15:03:17,829 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 15:03:18,868 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 15:03:18,868 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 15:03:18,868 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 15:03:18,868 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 15:03:19,329 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 15:03:19,810 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 15:03:19,810 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 15:03:19,913 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 15:03:20,113 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 15:03:20,114 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 15:03:20,114 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 15:03:20,114 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 15:03:20,115 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 15:03:20,115 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 15:03:20,115 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 15:03:20,115 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 15:03:20,624 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 15:03:25,154 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:03:25,279 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:03:25,279 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 15:03:25,279 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 15:03:25,279 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 15:03:25,280 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 15:03:26,504 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 15:03:27,737 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 15:03:27,737 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 15:03:27,834 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 15:03:28,103 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 15:03:28,104 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 15:03:28,104 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 15:03:28,104 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 15:03:28,104 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 15:03:28,104 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 15:03:28,105 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 15:03:28,105 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 15:03:28,610 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 15:03:33,181 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:03:33,314 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:03:33,314 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 15:03:33,314 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 15:03:33,314 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 15:03:33,315 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 15:03:34,534 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 15:03:35,804 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 15:03:35,805 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 15:03:35,901 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 15:03:36,168 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 15:03:36,168 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 15:03:36,168 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 15:03:42,423 - TrafficGenerator - INFO - 启动iperf3服务器: 192.168.184.131:5201
2025-09-10 15:03:44,596 - TrafficGenerator - ERROR - iperf3服务器启动失败
2025-09-10 15:03:47,425 - TrafficGenerator - INFO - 启动iperf3客户端: -> 192.168.184.131:5201
2025-09-10 15:03:47,425 - TrafficGenerator - INFO - iperf3客户端已启动 (udp, 100M)
2025-09-10 15:03:52,426 - FaultInjector_DUT - INFO - 断开链路: eth0
2025-09-10 15:03:52,647 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth0 (code=1)，将在逻辑上标记为已断开
2025-09-10 15:04:02,647 - test_convergence - INFO - 丢包数: 0
2025-09-10 15:04:02,648 - test_convergence - INFO - 估计中断时间: 0.000秒
2025-09-10 15:04:02,648 - TrafficGenerator - INFO - 停止流量生成
2025-09-10 15:04:04,802 - test_convergence - INFO - 带流量的收敛测试通过
2025-09-10 15:04:04,803 - RSTPTest - INFO - 测试完成: test_convergence_with_traffic (耗时: 47.46秒)
2025-09-10 15:04:04,803 - RSTPTest - INFO - ============================================================

2025-09-10 15:04:04,804 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 15:04:04,804 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 15:04:04,804 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 15:04:04,954 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 15:04:04,954 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 15:04:05,088 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 15:04:05,089 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 15:04:05,223 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 15:04:05,223 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 15:04:05,224 - RSTPTest - INFO - ============================================================
2025-09-10 15:04:05,224 - RSTPTest - INFO - 开始测试: test_backup_port_simulation
2025-09-10 15:04:05,224 - RSTPTest - INFO - ============================================================
2025-09-10 15:04:05,225 - test_enhanced_rstp_coverage - INFO - 开始备份端口模拟测试
2025-09-10 15:04:05,225 - test_enhanced_rstp_coverage - INFO - 创建模拟共享网段拓扑
2025-09-10 15:04:06,105 - test_enhanced_rstp_coverage - INFO - ✓ 创建连接: SE_ETH2:dut_port1 <-> shared_segment:shared_port1
2025-09-10 15:04:06,713 - test_enhanced_rstp_coverage - INFO - ✓ 创建连接: SE_ETH2:dut_port2 <-> shared_segment:shared_port2
2025-09-10 15:04:07,864 - test_enhanced_rstp_coverage - INFO - ✓ 创建远程交换机: remote_switch
2025-09-10 15:04:07,864 - test_enhanced_rstp_coverage - INFO - 等待RSTP收敛...
2025-09-10 15:04:23,888 - test_enhanced_rstp_coverage - INFO - DUT桥信息: BridgeInfo(bridge_id='', root_id='', root_port='eth0', root_path_cost=0, protocol_version='rstp', hello_time=2, forward_delay=15, max_age=20, topology_changes=0, ports={'eth0': PortInfo(name='eth0', role=<PortRole.ROOT: 'root'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth2': PortInfo(name='eth2', role=<PortRole.ALTERNATE: 'alternate'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth3': PortInfo(name='eth3', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')})
2025-09-10 15:04:23,889 - test_enhanced_rstp_coverage - INFO - 清理测试环境
2025-09-10 15:04:24,882 - test_enhanced_rstp_coverage - INFO - ✓ 备份端口模拟测试完成
2025-09-10 15:04:24,883 - RSTPTest - INFO - 测试完成: test_backup_port_simulation (耗时: 19.66秒)
2025-09-10 15:04:24,884 - RSTPTest - INFO - ============================================================

2025-09-10 15:04:24,885 - RSTPTest - INFO - ============================================================
2025-09-10 15:04:24,885 - RSTPTest - INFO - 开始测试: test_comprehensive_port_state_transitions
2025-09-10 15:04:24,885 - RSTPTest - INFO - ============================================================
2025-09-10 15:04:24,886 - test_enhanced_rstp_coverage - INFO - 开始全面端口状态转换测试
2025-09-10 15:04:24,886 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 15:04:24,886 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 15:04:24,887 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 15:04:24,887 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 15:04:24,887 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 15:04:24,887 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 15:04:24,887 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 15:04:24,976 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 15:04:25,080 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 15:04:25,081 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 15:04:25,081 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 15:04:25,081 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 15:04:25,599 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 15:04:25,599 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 15:04:26,635 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 15:04:26,635 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 15:04:26,636 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 15:04:26,636 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 15:04:27,095 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 15:04:27,588 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 15:04:27,589 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 15:04:27,691 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 15:04:27,883 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 15:04:27,884 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 15:04:27,884 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 15:04:27,884 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 15:04:27,884 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 15:04:27,885 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 15:04:27,885 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 15:04:27,940 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 15:04:27,941 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 15:04:28,117 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 15:04:28,117 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 15:04:28,118 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 15:04:28,118 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 15:04:28,118 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 15:04:28,666 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 15:04:33,218 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:04:33,352 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:04:33,352 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 15:04:33,352 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 15:04:33,352 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 15:04:33,352 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 15:04:34,577 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 15:04:35,809 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 15:04:35,810 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 15:04:35,905 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 15:04:36,171 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 15:04:36,171 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 15:04:36,171 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 15:04:36,171 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 15:04:36,172 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 15:04:36,172 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 15:04:36,172 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 15:04:36,228 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 15:04:36,229 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 15:04:36,405 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 15:04:36,405 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 15:04:36,405 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 15:04:36,406 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 15:04:36,406 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 15:04:36,948 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 15:04:41,483 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:04:41,626 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:04:41,626 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 15:04:41,626 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 15:04:41,627 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 15:04:41,627 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 15:04:42,848 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 15:04:44,103 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 15:04:44,103 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 15:04:44,199 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 15:04:44,467 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 15:04:44,467 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 15:04:44,467 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 15:04:44,675 - test_enhanced_rstp_coverage - INFO - 等待初始收敛...
2025-09-10 15:04:44,676 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 15:04:45,720 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.04秒
2025-09-10 15:04:47,169 - RSTPTest - INFO - 测试完成: test_comprehensive_port_state_transitions (耗时: 22.28秒)
2025-09-10 15:04:47,169 - RSTPTest - INFO - ============================================================

2025-09-10 15:04:47,170 - RSTPTest - INFO - ============================================================
2025-09-10 15:04:47,171 - RSTPTest - INFO - 开始测试: test_detailed_bpdu_analysis
2025-09-10 15:04:47,171 - RSTPTest - INFO - ============================================================
2025-09-10 15:04:47,172 - test_enhanced_rstp_coverage - INFO - 开始详细BPDU分析测试
2025-09-10 15:04:47,172 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 15:04:47,172 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 15:04:47,172 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 15:04:47,173 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 15:04:47,173 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 15:04:47,173 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 15:04:47,173 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 15:04:47,173 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 15:04:47,647 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 15:04:47,647 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 15:04:48,683 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 15:04:48,683 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 15:04:48,684 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 15:04:48,684 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 15:04:49,144 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 15:04:49,623 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 15:04:49,624 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 15:04:49,727 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 15:04:49,919 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 15:04:49,919 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 15:04:49,919 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 15:04:49,920 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 15:04:49,920 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 15:04:49,920 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 15:04:49,920 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 15:04:49,921 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 15:04:50,440 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 15:04:55,005 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:04:55,139 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:04:55,139 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 15:04:55,139 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 15:04:55,139 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 15:04:55,140 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 15:04:56,382 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 15:04:57,608 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 15:04:57,608 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 15:04:57,704 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 15:04:57,967 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 15:04:57,968 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 15:04:57,968 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 15:04:57,968 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 15:04:57,968 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 15:04:57,969 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 15:04:57,969 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 15:04:57,969 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 15:04:58,483 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 15:05:03,017 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:05:03,157 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:05:03,157 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 15:05:03,158 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 15:05:03,158 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 15:05:03,158 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 15:05:04,388 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 15:05:05,634 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 15:05:05,634 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 15:05:05,732 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 15:05:06,003 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 15:05:06,004 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 15:05:06,004 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 15:05:06,344 - test_enhanced_rstp_coverage - INFO - 等待RSTP收敛...
2025-09-10 15:05:06,345 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 15:05:07,369 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.02秒
2025-09-10 15:05:08,427 - test_enhanced_rstp_coverage - INFO - Hello Time: 2秒
2025-09-10 15:05:08,427 - test_enhanced_rstp_coverage - INFO - === 测试1: 验证分布式BPDU生成 ===
2025-09-10 15:05:08,427 - test_enhanced_rstp_coverage - INFO - 总共捕获0个BPDU，来自0个不同源
2025-09-10 15:05:08,443 - RSTPTest - INFO - 测试完成: test_detailed_bpdu_analysis (耗时: 21.27秒)
2025-09-10 15:05:08,443 - RSTPTest - INFO - ============================================================

2025-09-10 15:05:08,445 - RSTPTest - INFO - ============================================================
2025-09-10 15:05:08,445 - RSTPTest - INFO - 开始测试: test_topology_change_comprehensive
2025-09-10 15:05:08,446 - RSTPTest - INFO - ============================================================
2025-09-10 15:05:08,447 - test_enhanced_rstp_coverage - INFO - 开始全面拓扑变更测试
2025-09-10 15:05:08,447 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 15:05:08,447 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 15:05:08,447 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 15:05:08,447 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 15:05:08,448 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 15:05:08,448 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 15:05:08,448 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 15:05:08,448 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 15:05:08,950 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 15:05:08,950 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 15:05:10,002 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 15:05:10,003 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 15:05:10,003 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 15:05:10,003 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 15:05:10,459 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 15:05:10,939 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 15:05:10,939 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 15:05:11,042 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 15:05:11,235 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 15:05:11,235 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 15:05:11,235 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 15:05:11,236 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 15:05:11,236 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 15:05:11,236 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 15:05:11,236 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 15:05:11,236 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 15:05:11,760 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 15:05:16,324 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:05:16,464 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:05:16,465 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 15:05:16,465 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 15:05:16,465 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 15:05:16,465 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 15:05:17,697 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 15:05:18,919 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 15:05:18,919 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 15:05:19,015 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 15:05:19,285 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 15:05:19,286 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 15:05:19,286 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 15:05:19,286 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 15:05:19,286 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 15:05:19,286 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 15:05:19,286 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 15:05:19,287 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 15:05:19,794 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 15:05:24,333 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:05:24,464 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:05:24,465 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 15:05:24,465 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 15:05:24,465 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 15:05:24,465 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 15:05:25,690 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 15:05:26,964 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 15:05:26,965 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 15:05:27,060 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 15:05:27,331 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 15:05:27,332 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 15:05:27,332 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 15:05:27,539 - test_enhanced_rstp_coverage - INFO - 等待初始收敛...
2025-09-10 15:05:27,540 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 15:05:28,583 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.04秒
2025-09-10 15:05:30,711 - test_enhanced_rstp_coverage - INFO - 初始状态: DUT是根桥=True
2025-09-10 15:05:30,711 - test_enhanced_rstp_coverage - INFO - === 测试场景1: 根桥变更 ===
2025-09-10 15:05:30,711 - test_enhanced_rstp_coverage - INFO - === 测试场景2: 端口故障恢复 ===
2025-09-10 15:05:31,783 - test_enhanced_rstp_coverage - INFO - === 测试场景3: 端口优先级变更 ===
2025-09-10 15:05:32,846 - test_enhanced_rstp_coverage - WARNING - 未检测到明显的拓扑变更，可能是测试环境限制
2025-09-10 15:05:32,847 - test_enhanced_rstp_coverage - INFO - ✓ 全面拓扑变更测试完成
2025-09-10 15:05:32,848 - RSTPTest - INFO - 测试完成: test_topology_change_comprehensive (耗时: 24.40秒)
2025-09-10 15:05:32,848 - RSTPTest - INFO - ============================================================

2025-09-10 15:05:32,848 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 15:05:32,849 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 15:05:32,849 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 15:05:32,985 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 15:05:32,985 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 15:05:33,119 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 15:05:33,119 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 15:05:33,255 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 15:05:33,255 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 15:05:33,256 - RSTPTest - INFO - ============================================================
2025-09-10 15:05:33,256 - RSTPTest - INFO - 开始测试: test_rstp_reconvergence_no_switchover
2025-09-10 15:05:33,256 - RSTPTest - INFO - ============================================================
2025-09-10 15:05:33,257 - test_high_availability - INFO - 开始RSTP重构误判测试
2025-09-10 15:05:33,257 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 15:05:33,257 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 15:05:33,257 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 15:05:33,257 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 15:05:33,258 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 15:05:33,258 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 15:05:33,258 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 15:05:33,310 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 15:05:33,416 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 15:05:33,417 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 15:05:33,417 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 15:05:33,417 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 15:05:33,922 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 15:05:33,922 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 15:05:34,986 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 15:05:34,986 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 15:05:34,986 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 15:05:34,987 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 15:05:35,442 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 15:05:35,922 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 15:05:35,923 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 15:05:36,026 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 15:05:36,218 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 15:05:36,219 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 15:05:36,219 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 15:05:36,219 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 15:05:36,219 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 15:05:36,219 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 15:05:36,220 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 15:05:36,275 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 15:05:36,275 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 15:05:36,449 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 15:05:36,449 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 15:05:36,449 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 15:05:36,449 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 15:05:36,450 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 15:05:36,985 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 15:05:41,546 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:05:41,684 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:05:41,684 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 15:05:41,685 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 15:05:41,685 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 15:05:41,685 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 15:05:42,926 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 15:05:44,165 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 15:05:44,166 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 15:05:44,260 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 15:05:44,536 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 15:05:44,537 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 15:05:44,537 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 15:05:44,537 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 15:05:44,537 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 15:05:44,537 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 15:05:44,537 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 15:05:44,592 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 15:05:44,592 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 15:05:44,765 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 15:05:44,765 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 15:05:44,765 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 15:05:44,765 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 15:05:44,766 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 15:05:45,315 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 15:05:49,860 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:05:49,995 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:05:49,995 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 15:05:49,995 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 15:05:49,996 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 15:05:49,996 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 15:05:51,219 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 15:05:52,484 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 15:05:52,484 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 15:05:52,585 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 15:05:52,852 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 15:05:52,852 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 15:05:52,853 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 15:05:57,906 - test_high_availability - INFO - 初始HA状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-10 15:05:57,907 - test_high_availability - INFO - 在远端触发RSTP重构...
2025-09-10 15:05:57,907 - FaultInjector_TestNode2 - INFO - 断开链路: eth0
2025-09-10 15:05:58,085 - FaultInjector_TestNode2 - INFO - 链路已断开: eth0
2025-09-10 15:06:08,137 - test_high_availability - INFO - RSTP重构后HA状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-10 15:06:08,138 - FaultInjector_TestNode2 - INFO - 恢复链路: eth0
2025-09-10 15:06:08,283 - FaultInjector_TestNode2 - INFO - 链路已恢复: eth0
2025-09-10 15:06:08,283 - test_high_availability - INFO - RSTP重构误判测试完成
2025-09-10 15:06:08,284 - RSTPTest - INFO - 测试完成: test_rstp_reconvergence_no_switchover (耗时: 35.03秒)
2025-09-10 15:06:08,284 - RSTPTest - INFO - ============================================================

2025-09-10 15:06:08,285 - RSTPTest - INFO - ============================================================
2025-09-10 15:06:08,286 - RSTPTest - INFO - 开始测试: test_split_brain_scenario
2025-09-10 15:06:08,286 - RSTPTest - INFO - ============================================================
2025-09-10 15:06:08,287 - test_high_availability - INFO - 开始裂脑场景测试
2025-09-10 15:06:08,337 - test_high_availability - INFO - 初始状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-10 15:06:08,337 - test_high_availability - INFO - 断开同步链路: eth3
2025-09-10 15:06:08,338 - FaultInjector_DUT - INFO - 断开链路: eth3
2025-09-10 15:06:08,601 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth3 (code=1)，将在逻辑上标记为已断开
2025-09-10 15:06:18,601 - test_high_availability - WARNING - 裂脑测试需要访问两个控制器
2025-09-10 15:06:18,602 - FaultInjector_DUT - INFO - 恢复链路: eth3
2025-09-10 15:06:18,833 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth3 (code=1)，将在逻辑上标记为已恢复
2025-09-10 15:06:18,833 - test_high_availability - INFO - 裂脑场景测试完成
2025-09-10 15:06:18,834 - RSTPTest - INFO - 测试完成: test_split_brain_scenario (耗时: 10.55秒)
2025-09-10 15:06:18,834 - RSTPTest - INFO - ============================================================

2025-09-10 15:06:18,838 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 15:06:18,839 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 15:06:18,839 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 15:06:18,980 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 15:06:18,980 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 15:06:18,980 - RSTPTest - INFO - ============================================================
2025-09-10 15:06:18,981 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[12288]
2025-09-10 15:06:18,981 - RSTPTest - INFO - ============================================================
2025-09-10 15:06:18,981 - test_parameters - INFO - 测试网桥优先级: 12288
2025-09-10 15:06:20,546 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-10 15:06:22,654 - test_parameters - INFO - 从OVS配置读取到优先级: 12288
2025-09-10 15:06:22,655 - test_parameters - INFO - 优先级12288设置成功
2025-09-10 15:06:22,656 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[12288] (耗时: 3.67秒)
2025-09-10 15:06:22,656 - RSTPTest - INFO - ============================================================

2025-09-10 15:06:22,657 - RSTPTest - INFO - ============================================================
2025-09-10 15:06:22,657 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[16384]
2025-09-10 15:06:22,658 - RSTPTest - INFO - ============================================================
2025-09-10 15:06:22,658 - test_parameters - INFO - 测试网桥优先级: 16384
2025-09-10 15:06:24,221 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-10 15:06:26,375 - test_parameters - INFO - 从OVS配置读取到优先级: 16384
2025-09-10 15:06:26,375 - test_parameters - INFO - 优先级16384设置成功
2025-09-10 15:06:26,376 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[16384] (耗时: 3.72秒)
2025-09-10 15:06:26,376 - RSTPTest - INFO - ============================================================

2025-09-10 15:06:26,378 - RSTPTest - INFO - ============================================================
2025-09-10 15:06:26,378 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[32768]
2025-09-10 15:06:26,378 - RSTPTest - INFO - ============================================================
2025-09-10 15:06:26,379 - test_parameters - INFO - 测试网桥优先级: 32768
2025-09-10 15:06:27,920 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-10 15:06:30,029 - test_parameters - INFO - 从OVS配置读取到优先级: 32768
2025-09-10 15:06:30,029 - test_parameters - INFO - 优先级32768设置成功
2025-09-10 15:06:30,030 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[32768] (耗时: 3.65秒)
2025-09-10 15:06:30,030 - RSTPTest - INFO - ============================================================

2025-09-10 15:06:30,031 - RSTPTest - INFO - ============================================================
2025-09-10 15:06:30,032 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[61440]
2025-09-10 15:06:30,032 - RSTPTest - INFO - ============================================================
2025-09-10 15:06:30,032 - test_parameters - INFO - 测试网桥优先级: 61440
2025-09-10 15:06:31,676 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-10 15:06:33,789 - test_parameters - INFO - 从OVS配置读取到优先级: 61440
2025-09-10 15:06:33,789 - test_parameters - INFO - 优先级61440设置成功
2025-09-10 15:06:33,790 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[61440] (耗时: 3.76秒)
2025-09-10 15:06:33,790 - RSTPTest - INFO - ============================================================

2025-09-10 15:06:33,791 - RSTPTest - INFO - ============================================================
2025-09-10 15:06:33,791 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[4097]
2025-09-10 15:06:33,792 - RSTPTest - INFO - ============================================================
2025-09-10 15:06:33,792 - test_parameters - INFO - 测试无效优先级: 4097
2025-09-10 15:06:35,610 - test_parameters - INFO - DUT处理无效优先级 4097 -> 4097
2025-09-10 15:06:35,610 - test_parameters - ERROR - DUT接受了非标准优先级值 4097，不符合802.1D标准（应为4096的倍数）
2025-09-10 15:06:35,630 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[4097] (耗时: 1.84秒)
2025-09-10 15:06:35,631 - RSTPTest - INFO - ============================================================

2025-09-10 15:06:35,633 - RSTPTest - INFO - ============================================================
2025-09-10 15:06:35,633 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[12289]
2025-09-10 15:06:35,633 - RSTPTest - INFO - ============================================================
2025-09-10 15:06:35,635 - test_parameters - INFO - 测试无效优先级: 12289
2025-09-10 15:06:37,437 - test_parameters - INFO - DUT处理无效优先级 12289 -> 12289
2025-09-10 15:06:37,437 - test_parameters - ERROR - DUT接受了非标准优先级值 12289，不符合802.1D标准（应为4096的倍数）
2025-09-10 15:06:37,454 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[12289] (耗时: 1.82秒)
2025-09-10 15:06:37,455 - RSTPTest - INFO - ============================================================

2025-09-10 15:06:37,456 - RSTPTest - INFO - ============================================================
2025-09-10 15:06:37,456 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[70000]
2025-09-10 15:06:37,456 - RSTPTest - INFO - ============================================================
2025-09-10 15:06:37,457 - test_parameters - INFO - 测试无效优先级: 70000
2025-09-10 15:06:39,249 - test_parameters - INFO - DUT处理无效优先级 70000 -> 70000
2025-09-10 15:06:39,249 - test_parameters - ERROR - DUT接受了非标准优先级值 70000，不符合802.1D标准（应为4096的倍数）
2025-09-10 15:06:39,265 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[70000] (耗时: 1.81秒)
2025-09-10 15:06:39,266 - RSTPTest - INFO - ============================================================

2025-09-10 15:06:39,267 - RSTPTest - INFO - ============================================================
2025-09-10 15:06:39,268 - RSTPTest - INFO - 开始测试: test_hello_time
2025-09-10 15:06:39,268 - RSTPTest - INFO - ============================================================
2025-09-10 15:06:39,268 - test_parameters - INFO - 测试Hello Time参数
2025-09-10 15:06:40,841 - test_parameters - INFO - 设置Hello Time: 1秒
2025-09-10 15:06:43,022 - test_parameters - INFO - Hello Time 1秒设置成功
2025-09-10 15:06:43,022 - test_parameters - INFO - 设置Hello Time: 2秒
2025-09-10 15:06:45,250 - test_parameters - INFO - Hello Time 2秒设置成功
2025-09-10 15:06:45,251 - test_parameters - INFO - 设置Hello Time: 5秒
2025-09-10 15:06:47,472 - test_parameters - INFO - Hello Time 5秒设置成功
2025-09-10 15:06:47,473 - test_parameters - INFO - Hello Time测试通过
2025-09-10 15:06:47,473 - RSTPTest - INFO - 测试完成: test_hello_time (耗时: 8.21秒)
2025-09-10 15:06:47,474 - RSTPTest - INFO - ============================================================

2025-09-10 15:06:47,475 - RSTPTest - INFO - ============================================================
2025-09-10 15:06:47,475 - RSTPTest - INFO - 开始测试: test_forward_delay
2025-09-10 15:06:47,475 - RSTPTest - INFO - ============================================================
2025-09-10 15:06:47,475 - test_parameters - INFO - 测试Forward Delay参数
2025-09-10 15:06:49,066 - test_parameters - INFO - 设置Forward Delay: 4秒
2025-09-10 15:06:51,245 - test_parameters - INFO - Forward Delay 4秒设置成功
2025-09-10 15:06:51,245 - test_parameters - INFO - 设置Forward Delay: 10秒
2025-09-10 15:06:53,470 - test_parameters - INFO - Forward Delay 10秒设置成功
2025-09-10 15:06:53,470 - test_parameters - INFO - 设置Forward Delay: 15秒
2025-09-10 15:06:55,692 - test_parameters - INFO - Forward Delay 15秒设置成功
2025-09-10 15:06:55,693 - test_parameters - INFO - Forward Delay测试通过
2025-09-10 15:06:55,693 - RSTPTest - INFO - 测试完成: test_forward_delay (耗时: 8.22秒)
2025-09-10 15:06:55,694 - RSTPTest - INFO - ============================================================

2025-09-10 15:06:55,695 - RSTPTest - INFO - ============================================================
2025-09-10 15:06:55,695 - RSTPTest - INFO - 开始测试: test_max_age
2025-09-10 15:06:55,695 - RSTPTest - INFO - ============================================================
2025-09-10 15:06:55,696 - test_parameters - INFO - 测试Max Age参数
2025-09-10 15:06:57,298 - test_parameters - INFO - 设置Max Age: 6秒
2025-09-10 15:06:59,477 - test_parameters - INFO - Max Age 6秒设置成功
2025-09-10 15:06:59,477 - test_parameters - INFO - 设置Max Age: 10秒
2025-09-10 15:07:01,704 - test_parameters - INFO - Max Age 10秒设置成功
2025-09-10 15:07:01,704 - test_parameters - INFO - 设置Max Age: 20秒
2025-09-10 15:07:03,934 - test_parameters - INFO - Max Age 20秒设置成功
2025-09-10 15:07:03,934 - test_parameters - INFO - Max Age测试通过
2025-09-10 15:07:03,935 - RSTPTest - INFO - 测试完成: test_max_age (耗时: 8.24秒)
2025-09-10 15:07:03,935 - RSTPTest - INFO - ============================================================

2025-09-10 15:07:04,056 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 15:07:04,056 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 15:07:04,201 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 15:07:04,201 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 15:07:04,202 - RSTPTest - INFO - ============================================================
2025-09-10 15:07:04,202 - RSTPTest - INFO - 开始测试: test_port_cost
2025-09-10 15:07:04,202 - RSTPTest - INFO - ============================================================
2025-09-10 15:07:04,203 - test_parameters - INFO - 测试端口路径成本
2025-09-10 15:07:04,203 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 15:07:04,203 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 15:07:04,203 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 15:07:04,203 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 15:07:04,203 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 15:07:04,204 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 15:07:04,204 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 15:07:04,257 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 15:07:04,369 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 15:07:04,370 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 15:07:04,370 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 15:07:04,371 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 15:07:04,889 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 15:07:04,889 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 15:07:05,928 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 15:07:05,929 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 15:07:05,929 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 15:07:05,929 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 15:07:06,386 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 15:07:06,864 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 15:07:06,865 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 15:07:06,969 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 15:07:07,166 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 15:07:07,166 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 15:07:07,166 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 15:07:07,166 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 15:07:07,167 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 15:07:07,167 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 15:07:07,167 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 15:07:07,221 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 15:07:07,222 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 15:07:07,400 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 15:07:07,401 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 15:07:07,401 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 15:07:07,401 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 15:07:07,401 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 15:07:07,959 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 15:07:12,520 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:07:12,668 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:07:12,669 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 15:07:12,669 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 15:07:12,670 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 15:07:12,670 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 15:07:14,003 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 15:07:15,225 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 15:07:15,225 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 15:07:15,323 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 15:07:15,593 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 15:07:15,594 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 15:07:15,594 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 15:07:15,595 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 15:07:15,595 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 15:07:15,595 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 15:07:15,595 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 15:07:15,650 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 15:07:15,651 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 15:07:15,837 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 15:07:15,837 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 15:07:15,837 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 15:07:15,837 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 15:07:15,838 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 15:07:16,375 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 15:08:50,437 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:09:00,519 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:09:00,519 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 15:09:00,519 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 15:09:00,519 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 15:09:00,520 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 15:10:02,362 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 15:10:57,036 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 15:10:57,036 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 15:10:57,133 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 15:11:04,314 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 15:11:04,314 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 15:11:04,314 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 15:11:09,315 - test_parameters - INFO - 设置端口eth0成本: 10
2025-09-10 15:11:09,379 - test_parameters - INFO - 设置端口eth0成本: 100
2025-09-10 15:11:09,483 - test_parameters - INFO - 设置端口eth0成本: 1000
2025-09-10 15:11:09,587 - test_parameters - INFO - 设置端口eth0成本: 20000
2025-09-10 15:11:09,691 - test_parameters - INFO - 端口成本测试通过
2025-09-10 15:11:09,692 - RSTPTest - INFO - 测试完成: test_port_cost (耗时: 245.49秒)
2025-09-10 15:11:09,693 - RSTPTest - INFO - ============================================================

2025-09-10 15:11:09,694 - RSTPTest - INFO - ============================================================
2025-09-10 15:11:09,694 - RSTPTest - INFO - 开始测试: test_parameter_persistence
2025-09-10 15:11:09,694 - RSTPTest - INFO - ============================================================
2025-09-10 15:11:09,695 - test_parameters - INFO - 测试参数持久性
2025-09-10 15:11:16,941 - test_parameters - INFO - 参数持久性测试通过
2025-09-10 15:11:16,942 - RSTPTest - INFO - 测试完成: test_parameter_persistence (耗时: 7.25秒)
2025-09-10 15:11:16,943 - RSTPTest - INFO - ============================================================

2025-09-10 15:11:16,944 - RSTPTest - INFO - ============================================================
2025-09-10 15:11:16,944 - RSTPTest - INFO - 开始测试: test_parameter_boundaries
2025-09-10 15:11:16,944 - RSTPTest - INFO - ============================================================
2025-09-10 15:11:16,945 - test_parameters - INFO - 测试参数边界值
2025-09-10 15:11:18,607 - test_parameters - INFO - 最小值0: 失败
2025-09-10 15:11:18,708 - test_parameters - INFO - 最大值65535: 失败
2025-09-10 15:11:18,812 - test_parameters - INFO - 正确拒绝了无效值-1
2025-09-10 15:11:18,915 - test_parameters - INFO - 正确拒绝了无效值65536
2025-09-10 15:11:19,015 - test_parameters - INFO - 最小值1: 失败
2025-09-10 15:11:19,115 - test_parameters - INFO - 最大值10: 失败
2025-09-10 15:11:19,215 - test_parameters - INFO - 正确拒绝了无效值0
2025-09-10 15:11:19,315 - test_parameters - INFO - 正确拒绝了无效值11
2025-09-10 15:11:19,415 - test_parameters - INFO - 最小值4: 失败
2025-09-10 15:11:19,515 - test_parameters - INFO - 最大值30: 失败
2025-09-10 15:11:19,616 - test_parameters - INFO - 正确拒绝了无效值3
2025-09-10 15:11:19,719 - test_parameters - INFO - 正确拒绝了无效值31
2025-09-10 15:11:19,819 - test_parameters - INFO - 最小值6: 失败
2025-09-10 15:11:19,920 - test_parameters - INFO - 最大值40: 失败
2025-09-10 15:11:20,023 - test_parameters - INFO - 正确拒绝了无效值5
2025-09-10 15:11:20,123 - test_parameters - INFO - 正确拒绝了无效值41
2025-09-10 15:11:20,124 - test_parameters - INFO - 参数边界测试完成
2025-09-10 15:11:20,125 - RSTPTest - INFO - 测试完成: test_parameter_boundaries (耗时: 3.18秒)
2025-09-10 15:11:20,125 - RSTPTest - INFO - ============================================================

2025-09-10 15:11:20,125 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 15:11:20,126 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 15:11:20,126 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 15:11:20,279 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 15:11:20,279 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 15:11:20,397 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 15:11:20,397 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 15:11:20,532 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 15:11:20,532 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 15:11:20,532 - RSTPTest - INFO - ============================================================
2025-09-10 15:11:20,533 - RSTPTest - INFO - 开始测试: test_port_role_assignment_simplified
2025-09-10 15:11:20,533 - RSTPTest - INFO - ============================================================
2025-09-10 15:11:20,534 - test_protocol_conformance - INFO - 开始端口角色分配测试
2025-09-10 15:11:20,534 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 15:11:20,534 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 15:11:20,534 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 15:11:20,534 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 15:11:20,534 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 15:11:20,535 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 15:11:20,535 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 15:11:20,588 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 15:11:20,696 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 15:11:20,696 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 15:11:20,696 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 15:11:20,697 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 15:11:21,247 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 15:11:21,248 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 15:11:22,295 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 15:11:22,296 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 15:11:22,296 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 15:11:22,296 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 15:11:22,770 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 15:11:23,249 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 15:11:23,249 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 15:11:23,353 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 15:11:23,546 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 15:11:23,546 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 15:11:23,546 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 15:11:23,546 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 15:11:23,546 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 15:11:23,547 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 15:11:23,547 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 15:11:23,601 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 15:11:23,601 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 15:11:23,773 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 15:11:23,774 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 15:11:23,774 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 15:11:23,774 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 15:11:23,774 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 15:11:24,345 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 15:11:28,889 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:11:29,022 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:11:29,022 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 15:11:29,022 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 15:11:29,023 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 15:11:29,023 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 15:11:30,240 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 15:11:31,472 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 15:11:31,472 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 15:11:31,569 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 15:11:31,851 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 15:11:31,851 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 15:11:31,852 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 15:11:31,852 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 15:11:31,852 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 15:11:31,852 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 15:11:31,853 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 15:11:31,914 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 15:11:31,915 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 15:11:40,102 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 15:11:40,103 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 15:11:40,103 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 15:11:40,103 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 15:11:40,103 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 15:11:55,785 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 15:12:00,337 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:12:00,471 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:12:00,471 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 15:12:00,471 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 15:12:00,471 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 15:12:00,471 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 15:12:01,703 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 15:12:02,976 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 15:12:02,977 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 15:12:03,072 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 15:12:03,339 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 15:12:03,339 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 15:12:03,339 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 15:12:03,535 - test_protocol_conformance - INFO - 等待网络收敛...
2025-09-10 15:12:03,536 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 15:12:04,600 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.06秒
2025-09-10 15:12:06,729 - test_protocol_conformance - INFO - DUT是根桥: True
2025-09-10 15:12:06,729 - test_protocol_conformance - INFO - 活动端口角色: {}
2025-09-10 15:12:06,729 - test_protocol_conformance - INFO - 禁用端口: ['eth0', 'eth2', 'eth3']
2025-09-10 15:12:06,767 - RSTPTest - INFO - 测试完成: test_port_role_assignment_simplified (耗时: 46.23秒)
2025-09-10 15:12:06,767 - RSTPTest - INFO - ============================================================

2025-09-10 15:12:06,768 - RSTPTest - INFO - ============================================================
2025-09-10 15:12:06,768 - RSTPTest - INFO - 开始测试: test_root_bridge_election
2025-09-10 15:12:06,769 - RSTPTest - INFO - ============================================================
2025-09-10 15:12:06,769 - test_protocol_conformance - INFO - 开始根网桥选举测试
2025-09-10 15:12:06,769 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 15:12:06,769 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 15:12:06,770 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 15:12:06,770 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 15:12:06,770 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 15:12:06,770 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 15:12:06,770 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 15:12:06,771 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 15:12:07,247 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 15:12:07,247 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 15:12:08,295 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 15:12:08,296 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 15:12:08,296 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 15:12:08,296 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 15:12:08,756 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 15:12:09,232 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 15:12:09,232 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 15:12:09,336 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 15:12:09,524 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 15:12:09,524 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 15:12:09,524 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 15:12:09,524 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 15:12:09,525 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 15:12:09,525 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 15:12:09,525 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 15:12:09,525 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 15:12:10,043 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 15:12:14,580 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:12:14,716 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:12:14,716 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 15:12:14,717 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 15:12:14,717 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 15:12:14,717 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 15:12:15,923 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 15:12:17,175 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 15:12:17,175 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 15:12:17,272 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 15:12:17,543 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 15:12:17,543 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 15:12:17,543 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 15:12:17,543 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 15:12:17,543 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 15:12:17,544 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 15:12:17,544 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 15:12:17,544 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 15:12:18,057 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 15:12:22,598 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:12:22,735 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:12:22,736 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 15:12:22,736 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 15:12:22,736 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 15:12:22,736 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 15:12:23,954 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 15:12:25,232 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 15:12:25,233 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 15:12:25,327 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 15:12:25,599 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 15:12:25,600 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 15:12:25,600 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 15:12:28,600 - test_protocol_conformance - INFO - === 检查DUT网桥配置 ===
2025-09-10 15:12:28,652 - test_protocol_conformance - INFO - 找到测试网桥: br0
2025-09-10 15:12:28,753 - test_protocol_conformance - INFO - 启用br0的RSTP
2025-09-10 15:12:28,848 - test_protocol_conformance - INFO - br0 STP状态: ('', 'cat: /sys/class/net/br0/bridge/stp_state: No such file or directory\n', 1)
2025-09-10 15:12:28,849 - test_protocol_conformance - INFO - === 初始网桥状态 ===
2025-09-10 15:12:29,908 - test_protocol_conformance - INFO - 活动端口数: 0
2025-09-10 15:12:29,909 - test_protocol_conformance - WARNING - 活动端口不足，尝试启用更多端口
2025-09-10 15:12:34,559 - test_protocol_conformance - INFO - 初始端口状态:
2025-09-10 15:12:34,560 - test_protocol_conformance - INFO - 初始状态 - DUT有Root Port: False
2025-09-10 15:12:34,560 - test_protocol_conformance - INFO - === 配置网桥优先级 ===
2025-09-10 15:12:34,560 - test_protocol_conformance - INFO - 设置TestNode1优先级为16384
2025-09-10 15:12:34,689 - test_protocol_conformance - INFO - 设置DUT优先级为32768
2025-09-10 15:12:34,744 - test_protocol_conformance - INFO - ip命令设置结果: ('', 'RTNETLINK answers: Operation not supported\n', 2)
2025-09-10 15:12:34,845 - test_protocol_conformance - INFO - sysfs设置结果: ('32768\n', 'tee: /sys/class/net/br0/bridge/priority: No such file or directory\n', 1)
2025-09-10 15:12:34,845 - test_protocol_conformance - INFO - 设置TestNode2优先级为24576
2025-09-10 15:12:34,978 - test_protocol_conformance - INFO - 等待RSTP收敛...
2025-09-10 15:12:44,979 - test_protocol_conformance - INFO - === 第一阶段验证 ===
2025-09-10 15:12:46,111 - test_protocol_conformance - INFO - DUT当前优先级: 
2025-09-10 15:12:46,112 - test_protocol_conformance - WARNING - 优先级验证失败: 优先级设置失败，期望32768，实际
assert '' == '32768'
  
  [0m[91m- 32768[39;49;00m[90m[39;49;00m
2025-09-10 15:12:46,112 - test_protocol_conformance - INFO - 
=== 第二阶段：DUT应成为根桥 ===
2025-09-10 15:12:46,113 - test_protocol_conformance - INFO - 设置DUT优先级为12288（最低）
2025-09-10 15:12:46,408 - test_protocol_conformance - INFO - 设置后优先级: 
2025-09-10 15:12:46,409 - test_protocol_conformance - INFO - 等待RSTP重新收敛...
2025-09-10 15:12:56,410 - test_protocol_conformance - INFO - === 最终验证 ===
2025-09-10 15:12:57,435 - test_protocol_conformance - ERROR - DUT RSTP实现问题诊断:
2025-09-10 15:12:57,435 - test_protocol_conformance - ERROR - 1. DUT优先级已设置为12288（最低）
2025-09-10 15:12:57,435 - test_protocol_conformance - ERROR - 2. 但DUT仍有Root Port: False
2025-09-10 15:12:57,436 - test_protocol_conformance - ERROR - 3. Designated端口数: 0
2025-09-10 15:12:57,436 - test_protocol_conformance - ERROR - 可能的原因:
2025-09-10 15:12:57,436 - test_protocol_conformance - ERROR - - DUT的RSTP实现不符合标准
2025-09-10 15:12:57,436 - test_protocol_conformance - ERROR - - DUT没有正确处理优先级变化
2025-09-10 15:12:57,436 - test_protocol_conformance - ERROR - - DUT的BPDU发送/接收有问题
2025-09-10 15:12:57,473 - RSTPTest - INFO - 测试完成: test_root_bridge_election (耗时: 50.70秒)
2025-09-10 15:12:57,474 - RSTPTest - INFO - ============================================================

2025-09-10 15:12:57,475 - RSTPTest - INFO - ============================================================
2025-09-10 15:12:57,476 - RSTPTest - INFO - 开始测试: test_port_role_assignment
2025-09-10 15:12:57,476 - RSTPTest - INFO - ============================================================
2025-09-10 15:12:57,477 - test_protocol_conformance - INFO - 开始端口角色分配测试
2025-09-10 15:12:57,477 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 15:12:57,477 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 15:12:57,477 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 15:12:57,477 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 15:12:57,477 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 15:12:57,478 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 15:12:57,478 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 15:12:57,478 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 15:12:57,946 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 15:12:57,947 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 15:12:58,983 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 15:12:58,984 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 15:12:58,984 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 15:12:58,984 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 15:12:59,514 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 15:12:59,986 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 15:12:59,987 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 15:13:00,091 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 15:13:00,283 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 15:13:00,283 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 15:13:00,284 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 15:13:00,284 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 15:13:00,284 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 15:13:00,284 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 15:13:00,284 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 15:13:00,285 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 15:13:00,807 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 15:13:05,361 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:13:05,502 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:13:05,502 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 15:13:05,502 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 15:13:05,502 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 15:13:05,503 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 15:13:06,734 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 15:13:08,014 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 15:13:08,015 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 15:13:08,110 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 15:13:08,387 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 15:13:08,388 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 15:13:08,388 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 15:13:08,388 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 15:13:08,388 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 15:13:08,388 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 15:13:08,389 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 15:13:08,389 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 15:13:08,904 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 15:13:13,436 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:13:13,574 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:13:13,575 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 15:13:13,575 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 15:13:13,575 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 15:13:13,575 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 15:13:14,784 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 15:13:16,035 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 15:13:16,036 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 15:13:16,131 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 15:13:16,393 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 15:13:16,393 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 15:13:16,393 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 15:13:19,596 - test_protocol_conformance - INFO - 启用DUT的网桥接口...
2025-09-10 15:13:19,864 - test_protocol_conformance - INFO - 已启用接口 eth0
2025-09-10 15:13:20,176 - test_protocol_conformance - INFO - 已启用接口 eth1
2025-09-10 15:13:20,492 - test_protocol_conformance - INFO - 已启用接口 eth2
2025-09-10 15:13:23,543 - test_protocol_conformance - INFO - br0 网桥接口状态:
('18: veth45650b3@if17: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 master br-b2bd2c7fedc8 state forwarding priority 32 cost 2 \n26: veth6d7f1eb@if25: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 master br-b2bd2c7fedc8 state forwarding priority 32 cost 2 \n', '', 0)
2025-09-10 15:13:23,643 - test_protocol_conformance - INFO - br0 状态:
('5: br0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1508 qdisc mq state UP mode DEFAULT group default qlen 1000\n    link/ether 90:12:10:b5:7d:f7 brd ff:ff:ff:ff:ff:ff\n    altname enp0s30f4\n', '', 0)
2025-09-10 15:13:23,738 - test_protocol_conformance - INFO - br0 STP状态:
('', 'cat: /sys/class/net/br0/bridge/stp_state: No such file or directory\n', 1)
2025-09-10 15:13:23,738 - test_protocol_conformance - INFO - 获取初始网桥状态...
2025-09-10 15:13:24,807 - test_protocol_conformance - INFO - Bridge ID: 未获取
2025-09-10 15:13:24,807 - test_protocol_conformance - INFO - Root ID: 未获取
2025-09-10 15:13:24,807 - test_protocol_conformance - INFO - Root Port: eth0
2025-09-10 15:13:24,807 - test_protocol_conformance - INFO - 协议版本: rstp
2025-09-10 15:13:24,808 - test_protocol_conformance - INFO - 端口 eth0: 角色=root, 状态=disabled, 成本=0
2025-09-10 15:13:24,808 - test_protocol_conformance - INFO - 端口 eth2: 角色=alternate, 状态=disabled, 成本=0
2025-09-10 15:13:24,808 - test_protocol_conformance - INFO - 端口 eth3: 角色=unknown, 状态=disabled, 成本=0
2025-09-10 15:13:24,808 - test_protocol_conformance - INFO - 等待网络收敛...
2025-09-10 15:13:24,808 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 15:13:25,871 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.06秒
2025-09-10 15:13:26,935 - test_protocol_conformance - INFO - 收敛后的端口状态:
2025-09-10 15:13:26,935 - test_protocol_conformance - INFO - 端口 eth0: 角色=root, 状态=disabled, 成本=0
2025-09-10 15:13:26,935 - test_protocol_conformance - INFO - 端口 eth2: 角色=alternate, 状态=disabled, 成本=0
2025-09-10 15:13:26,936 - test_protocol_conformance - INFO - 端口 eth3: 角色=unknown, 状态=disabled, 成本=0
2025-09-10 15:13:27,995 - test_protocol_conformance - INFO - is_root_bridge() 返回: True
2025-09-10 15:13:27,996 - test_protocol_conformance - INFO - 有Root Port: False
2025-09-10 15:13:27,996 - test_protocol_conformance - INFO - 最终判定 - DUT是根桥: True
2025-09-10 15:13:27,996 - test_protocol_conformance - INFO - 活动端口数: 0
2025-09-10 15:13:27,997 - test_protocol_conformance - INFO - 禁用端口: ['eth0', 'eth2', 'eth3']
2025-09-10 15:13:27,997 - test_protocol_conformance - WARNING - 活动端口不足，尝试启用禁用的端口...
2025-09-10 15:13:27,997 - test_protocol_conformance - INFO - 尝试启用端口 eth0
2025-09-10 15:13:28,313 - test_protocol_conformance - INFO - 尝试启用端口 eth2
2025-09-10 15:13:34,647 - test_protocol_conformance - INFO - 重新配置后 - 活动端口数: 0
2025-09-10 15:13:34,648 - test_protocol_conformance - INFO - 重新配置后 - 禁用端口: ['eth0', 'eth2', 'eth3']
2025-09-10 15:13:34,648 - test_protocol_conformance - INFO - 端口角色分布: {}
2025-09-10 15:13:34,691 - RSTPTest - INFO - 测试完成: test_port_role_assignment (耗时: 37.21秒)
2025-09-10 15:13:34,691 - RSTPTest - INFO - ============================================================

2025-09-10 15:13:34,693 - RSTPTest - INFO - ============================================================
2025-09-10 15:13:34,693 - RSTPTest - INFO - 开始测试: test_rstp_protocol_verification
2025-09-10 15:13:34,693 - RSTPTest - INFO - ============================================================
2025-09-10 15:13:34,694 - test_protocol_conformance - INFO - 开始RSTP协议验证
2025-09-10 15:13:34,694 - test_protocol_conformance - INFO - === 检查OVS配置 ===
2025-09-10 15:13:34,750 - test_protocol_conformance - INFO - 当前OVS配置:
8c812ea9-3b0c-46a1-bd3c-ef3904d38c1a
    Bridge SE_ETH4
        Port SE_ETH4
            Interface SE_ETH4
                type: internal
    Bridge SE_ETH6
        Port SE_ETH6
            Interface SE_ETH6
                type: internal
    Bridge rstp0
        Port rstp0
            Interface rstp0
                type: internal
    Bridge br0
        Port eth0
            Interface eth0
                error: "could not open network device eth0 (No such device)"
        Port br0
            
2025-09-10 15:13:34,851 - test_protocol_conformance - INFO - 使用网桥 SE_ETH2
2025-09-10 15:13:34,851 - test_protocol_conformance - INFO - === 配置RSTP（确保是RSTP而不是STP）===
2025-09-10 15:13:36,071 - test_protocol_conformance - INFO - 启用RSTP...
2025-09-10 15:13:36,134 - test_protocol_conformance - INFO - ✓ RSTP已启用
2025-09-10 15:13:36,135 - test_protocol_conformance - INFO - 设置RSTP参数...
2025-09-10 15:13:36,243 - test_protocol_conformance - INFO - ✓ 设置: rstp-hello-time=2
2025-09-10 15:13:36,350 - test_protocol_conformance - INFO - ✓ 设置: rstp-forward-delay=4
2025-09-10 15:13:36,458 - test_protocol_conformance - INFO - ✓ 设置: rstp-max-age=6
2025-09-10 15:13:36,566 - test_protocol_conformance - INFO - ✓ 设置: rstp-priority=32768
2025-09-10 15:13:36,674 - test_protocol_conformance - INFO - ✓ 设置: rstp-force-protocol-version=2
2025-09-10 15:13:36,771 - test_protocol_conformance - INFO - 等待RSTP初始化...
2025-09-10 15:13:41,772 - test_protocol_conformance - INFO - === 验证RSTP配置 ===
2025-09-10 15:13:41,825 - test_protocol_conformance - INFO - RSTP状态:
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:4e:07:e8:51:48
  stp-hello-time  2s
  stp-max-age     6s
  stp-fwd-delay   4s
  This bridge is the root

Bridge ID:
  stp-priority    32768
  stp-system-id   6e:4e:07:e8:51:48
  stp-hello-time  2s
  stp-max-age     6s
  stp-fwd-delay   4s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------


2025-09-10 15:13:41,826 - test_protocol_conformance - INFO - ✓ 使用RSTP时间参数
2025-09-10 15:13:41,826 - test_protocol_conformance - INFO - === 创建测试拓扑 ===
2025-09-10 15:13:41,827 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 15:13:41,827 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 15:13:41,827 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 15:13:41,827 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 15:13:41,827 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 15:13:41,827 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 15:13:41,828 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 15:13:41,828 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 15:13:42,374 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 15:13:42,374 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 15:13:43,415 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 15:13:43,415 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 15:13:43,415 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 15:13:43,415 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 15:13:43,867 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 15:13:44,347 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 15:13:44,348 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 15:13:44,450 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 15:13:44,643 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 15:13:44,643 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 15:13:44,643 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 15:13:44,644 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 15:13:44,644 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 15:13:44,644 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 15:13:44,644 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 15:13:44,645 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 15:13:45,163 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 15:13:49,700 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:13:49,833 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:13:49,833 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 15:13:49,834 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 15:13:49,834 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 15:13:49,834 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 15:13:51,049 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 15:13:52,317 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 15:13:52,317 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 15:13:52,415 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 15:13:52,684 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 15:13:52,685 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 15:13:52,685 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 15:13:52,685 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 15:13:52,685 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 15:13:52,685 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 15:13:52,686 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 15:13:52,686 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 15:13:53,203 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 15:13:57,751 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:13:57,891 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:13:57,891 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 15:13:57,892 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 15:13:57,892 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 15:13:57,892 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 15:13:59,114 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 15:14:00,366 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 15:14:00,366 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 15:14:00,462 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 15:14:00,731 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 15:14:00,732 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 15:14:00,732 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 15:14:05,733 - test_protocol_conformance - INFO - === 捕获BPDU ===
2025-09-10 15:14:05,790 - test_protocol_conformance - INFO - 在 SE_ETH2 上捕获BPDU...
2025-09-10 15:14:05,790 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: SE_ETH2, 数量: 10)
2025-09-10 15:14:15,947 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-10 15:14:15,948 - test_protocol_conformance - INFO - 在 any 上捕获BPDU...
2025-09-10 15:14:15,948 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: any, 数量: 20)
2025-09-10 15:14:16,103 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-10 15:14:16,103 - test_protocol_conformance - WARNING - 未捕获到BPDU，检查OVS内部状态
2025-09-10 15:14:16,236 - RSTPTest - INFO - 测试完成: test_rstp_protocol_verification (耗时: 41.54秒)
2025-09-10 15:14:16,237 - RSTPTest - INFO - ============================================================

2025-09-10 15:14:16,238 - RSTPTest - INFO - ============================================================
2025-09-10 15:14:16,238 - RSTPTest - INFO - 开始测试: test_alternate_port_verification
2025-09-10 15:14:16,238 - RSTPTest - INFO - ============================================================
2025-09-10 15:14:16,239 - test_protocol_conformance - INFO - 开始Alternate Port验证测试
2025-09-10 15:14:16,239 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 15:14:16,239 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 15:14:16,239 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 15:14:16,240 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 15:14:16,240 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 15:14:16,240 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 15:14:16,240 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 15:14:16,240 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 15:14:16,725 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 15:14:16,725 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 15:14:17,762 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 15:14:17,762 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 15:14:17,762 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 15:14:17,762 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 15:14:18,217 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 15:14:18,692 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 15:14:18,692 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 15:14:18,794 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 15:14:18,982 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 15:14:18,982 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 15:14:18,982 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 15:14:18,983 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 15:14:18,983 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 15:14:18,983 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 15:14:18,984 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 15:14:18,984 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 15:14:19,496 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 15:14:24,034 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:14:24,167 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:14:24,168 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 15:14:24,168 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 15:14:24,168 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 15:14:24,168 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 15:14:25,398 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 15:14:26,600 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 15:14:26,601 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 15:14:26,697 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 15:14:26,967 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 15:14:26,968 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 15:14:26,968 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 15:14:26,968 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 15:14:26,969 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 15:14:26,969 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 15:14:26,969 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 15:14:26,969 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 15:14:27,486 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 15:14:32,035 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:14:32,161 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:14:32,161 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 15:14:32,162 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 15:14:32,162 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 15:14:32,162 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 15:14:33,402 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 15:14:34,661 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 15:14:34,662 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 15:14:34,760 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 15:14:35,026 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 15:14:35,027 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 15:14:35,027 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 15:14:35,027 - test_protocol_conformance - INFO - 设置网桥优先级
2025-09-10 15:14:35,380 - test_protocol_conformance - INFO - 等待RSTP收敛...
2025-09-10 15:14:35,380 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 15:14:36,398 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.02秒
2025-09-10 15:14:37,457 - test_protocol_conformance - INFO - DUT桥信息: BridgeInfo(bridge_id='', root_id='', root_port='eth0', root_path_cost=0, protocol_version='rstp', hello_time=2, forward_delay=15, max_age=20, topology_changes=0, ports={'eth0': PortInfo(name='eth0', role=<PortRole.ROOT: 'root'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth2': PortInfo(name='eth2', role=<PortRole.ALTERNATE: 'alternate'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth3': PortInfo(name='eth3', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')})
2025-09-10 15:14:38,592 - RSTPTest - INFO - 测试完成: test_alternate_port_verification (耗时: 22.35秒)
2025-09-10 15:14:38,592 - RSTPTest - INFO - ============================================================

2025-09-10 15:14:38,593 - RSTPTest - INFO - ============================================================
2025-09-10 15:14:38,594 - RSTPTest - INFO - 开始测试: test_port_state_transitions
2025-09-10 15:14:38,594 - RSTPTest - INFO - ============================================================
2025-09-10 15:14:38,594 - test_protocol_conformance - INFO - 开始端口状态转换测试
2025-09-10 15:14:38,594 - NetworkTopology - INFO - 创建RSTP线性拓扑...
2025-09-10 15:14:38,595 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 15:14:38,595 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 15:14:38,595 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 15:14:38,595 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 15:14:38,595 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 15:14:38,595 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 15:14:38,595 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 15:14:39,101 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 15:14:39,101 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 15:14:40,132 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 15:14:40,133 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 15:14:40,133 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth2']
2025-09-10 15:14:40,133 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 15:14:40,589 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 15:14:40,589 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 15:14:40,693 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 15:14:40,885 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 15:14:40,886 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 15:14:40,886 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 15:14:40,886 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 15:14:40,887 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 15:14:40,887 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 15:14:40,887 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 15:14:40,887 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 15:14:41,411 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 15:14:45,969 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:14:46,111 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:14:46,111 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 15:14:46,112 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 15:14:46,112 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 15:14:46,112 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 15:14:47,350 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 15:14:48,575 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 15:14:48,575 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 15:14:48,671 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 15:14:48,936 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 15:14:48,936 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 15:14:48,936 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 15:14:48,937 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 15:14:48,937 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 15:14:48,937 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 15:14:48,937 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 15:14:48,938 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 15:14:49,448 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 15:14:53,978 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:14:54,118 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:14:54,119 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 15:14:54,119 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 15:14:54,119 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0']
2025-09-10 15:14:54,119 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 15:14:55,329 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 15:14:55,329 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 15:14:55,424 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 15:14:55,693 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 15:14:55,694 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 15:14:55,694 - NetworkTopology - INFO - 线性拓扑创建完成
2025-09-10 15:14:55,906 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-10 15:14:55,907 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 15:14:56,949 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.04秒
2025-09-10 15:14:58,039 - RSTPTest - INFO - 测试完成: test_port_state_transitions (耗时: 19.45秒)
2025-09-10 15:14:58,040 - RSTPTest - INFO - ============================================================

2025-09-10 15:14:58,041 - RSTPTest - INFO - ============================================================
2025-09-10 15:14:58,042 - RSTPTest - INFO - 开始测试: test_bpdu_propagation_and_keepalive
2025-09-10 15:14:58,042 - RSTPTest - INFO - ============================================================
2025-09-10 15:14:58,043 - test_protocol_conformance - INFO - 开始BPDU传播和保活机制测试
2025-09-10 15:14:58,043 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 15:14:58,043 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 15:14:58,043 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 15:14:58,043 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 15:14:58,043 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 15:14:58,044 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 15:14:58,044 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 15:14:58,044 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 15:14:58,524 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 15:14:58,524 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 15:14:59,565 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 15:14:59,565 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 15:14:59,565 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 15:14:59,566 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 15:15:00,021 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 15:15:00,497 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 15:15:00,497 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 15:15:00,600 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 15:15:00,793 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 15:15:00,793 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 15:15:00,794 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 15:15:00,794 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 15:15:00,794 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 15:15:00,795 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 15:15:00,795 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 15:15:00,795 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 15:15:01,304 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 15:15:05,886 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:15:06,019 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:15:06,020 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 15:15:06,020 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 15:15:06,020 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 15:15:06,020 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 15:15:07,248 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 15:15:08,482 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 15:15:08,482 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 15:15:08,577 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 15:15:08,848 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 15:15:08,849 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 15:15:08,849 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 15:15:08,849 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 15:15:08,849 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 15:15:08,849 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 15:15:08,849 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 15:15:08,850 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 15:15:09,364 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 15:15:13,957 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:15:14,524 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:15:14,525 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 15:15:14,525 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 15:15:14,525 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 15:15:14,525 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 15:15:15,732 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 15:15:17,015 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 15:15:17,015 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 15:15:17,112 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 15:15:17,378 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 15:15:17,378 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 15:15:17,379 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 15:15:17,737 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-10 15:15:17,737 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 15:15:18,758 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.02秒
2025-09-10 15:15:19,821 - test_protocol_conformance - INFO - Hello Time: 2秒
2025-09-10 15:15:19,821 - test_protocol_conformance - INFO - 开始捕获BPDU报文
2025-09-10 15:15:19,857 - RSTPTest - INFO - 测试完成: test_bpdu_propagation_and_keepalive (耗时: 21.82秒)
2025-09-10 15:15:19,857 - RSTPTest - INFO - ============================================================

2025-09-10 15:15:19,859 - RSTPTest - INFO - ============================================================
2025-09-10 15:15:19,859 - RSTPTest - INFO - 开始测试: test_disabled_port_exclusion
2025-09-10 15:15:19,859 - RSTPTest - INFO - ============================================================
2025-09-10 15:15:19,860 - test_protocol_conformance - INFO - 开始禁用端口排除测试
2025-09-10 15:15:19,860 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 15:15:19,860 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 15:15:19,860 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 15:15:19,860 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 15:15:19,860 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 15:15:19,861 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 15:15:19,861 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 15:15:19,861 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 15:15:20,372 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 15:15:20,372 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 15:15:21,408 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 15:15:21,408 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 15:15:21,408 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 15:15:21,408 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 15:15:21,884 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 15:15:22,361 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 15:15:22,362 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 15:15:22,469 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 15:15:22,661 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 15:15:22,661 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 15:15:22,662 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 15:15:22,662 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 15:15:22,662 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 15:15:22,662 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 15:15:22,663 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 15:15:22,663 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 15:15:23,178 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 15:15:27,748 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:15:27,889 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:15:27,889 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 15:15:27,889 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 15:15:27,889 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 15:15:27,890 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 15:15:29,126 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 15:15:30,339 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 15:15:30,340 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 15:15:30,436 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 15:15:30,699 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 15:15:30,699 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 15:15:30,699 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 15:15:30,700 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 15:15:30,700 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 15:15:30,700 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 15:15:30,700 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 15:15:30,701 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 15:15:31,222 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 15:15:35,800 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:15:35,939 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:15:35,939 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 15:15:35,940 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 15:15:35,940 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 15:15:35,940 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 15:15:37,175 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 15:15:38,427 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 15:15:38,427 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 15:15:38,526 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 15:15:38,805 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 15:15:38,806 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 15:15:38,806 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 15:15:39,008 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-10 15:15:39,009 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 15:15:40,052 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.04秒
2025-09-10 15:15:41,131 - test_protocol_conformance - INFO - 所有端口信息: {'eth0': PortInfo(name='eth0', role=<PortRole.ROOT: 'root'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth2': PortInfo(name='eth2', role=<PortRole.ALTERNATE: 'alternate'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth3': PortInfo(name='eth3', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')}
2025-09-10 15:15:41,288 - test_protocol_conformance - INFO - RSTP show输出 (code=0): 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   b6:c0:81:55:79:42
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    32768
  stp-system-id   b6:c0:81:55:79:42
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------


2025-09-10 15:15:41,289 - test_protocol_conformance - INFO - 初始活动端口: []
2025-09-10 15:15:41,289 - test_protocol_conformance - INFO - 没有找到活动端口，使用所有端口
2025-09-10 15:15:41,290 - test_protocol_conformance - INFO - 选择端口eth2进行禁用测试
2025-09-10 15:15:41,290 - test_protocol_conformance - INFO - 禁用端口eth2
2025-09-10 15:15:41,290 - FaultInjector_DUT - INFO - 断开链路: eth2
2025-09-10 15:15:41,552 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth2 (code=1)，将在逻辑上标记为已断开
2025-09-10 15:15:41,552 - test_protocol_conformance - INFO - 禁用命令结果: ('', '', 0)
2025-09-10 15:15:41,708 - test_protocol_conformance - INFO - 端口eth2配置: stdout='1
1
{rstp-enable="true", stp-enable="true", stp-path-cost="20000"}
', stderr='', code=0
2025-09-10 15:15:57,632 - test_protocol_conformance - INFO - 禁用后所有端口状态: [('eth0', 'disabled'), ('eth3', 'disabled')]
2025-09-10 15:15:57,632 - test_protocol_conformance - ERROR - 端口eth2不存在于端口列表中
2025-09-10 15:15:57,633 - RSTPTest - INFO - 测试完成: test_disabled_port_exclusion (耗时: 37.77秒)
2025-09-10 15:15:57,634 - RSTPTest - INFO - ============================================================

2025-09-10 15:15:57,635 - RSTPTest - INFO - ============================================================
2025-09-10 15:15:57,635 - RSTPTest - INFO - 开始测试: test_topology_change_notification
2025-09-10 15:15:57,635 - RSTPTest - INFO - ============================================================
2025-09-10 15:15:57,636 - test_protocol_conformance - INFO - 开始拓扑变更通知测试
2025-09-10 15:15:57,636 - test_protocol_conformance - INFO - === 步骤1: 创建多网桥环形拓扑 ===
2025-09-10 15:15:58,433 - test_protocol_conformance - INFO - 创建网桥 SE_ETH2 (优先级: 32768)
2025-09-10 15:15:58,857 - test_protocol_conformance - INFO - 创建网桥 rstp2 (优先级: 36864)
2025-09-10 15:15:59,281 - test_protocol_conformance - INFO - 创建网桥 rstp3 (优先级: 40960)
2025-09-10 15:16:00,000 - test_protocol_conformance - INFO - ✓ 连接 rstp1 <-> rstp2
2025-09-10 15:16:00,713 - test_protocol_conformance - INFO - ✓ 连接 rstp2 <-> rstp3
2025-09-10 15:16:01,413 - test_protocol_conformance - INFO - ✓ 连接 rstp3 <-> rstp1
2025-09-10 15:16:01,413 - test_protocol_conformance - INFO - 等待RSTP初始收敛...
2025-09-10 15:16:11,414 - test_protocol_conformance - INFO - === 步骤2: 验证初始RSTP状态 ===
2025-09-10 15:16:11,467 - test_protocol_conformance - INFO - 
SE_ETH2 初始RSTP状态:
2025-09-10 15:16:11,467 - test_protocol_conformance - INFO -   ---- SE_ETH2 ----
2025-09-10 15:16:11,467 - test_protocol_conformance - INFO -   Root ID:
2025-09-10 15:16:11,468 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-10 15:16:11,468 - test_protocol_conformance - INFO -     stp-system-id   4a:ae:cd:ec:3f:4a
2025-09-10 15:16:11,468 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 15:16:11,468 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 15:16:11,468 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 15:16:11,469 - test_protocol_conformance - INFO -     This bridge is the root
2025-09-10 15:16:11,469 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-10 15:16:11,469 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-10 15:16:11,469 - test_protocol_conformance - INFO -     stp-system-id   4a:ae:cd:ec:3f:4a
2025-09-10 15:16:11,470 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 15:16:11,470 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 15:16:11,470 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 15:16:11,470 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 15:16:11,470 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-10 15:16:11,471 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-10 15:16:11,562 - test_protocol_conformance - INFO - 
rstp2 初始RSTP状态:
2025-09-10 15:16:11,563 - test_protocol_conformance - INFO -   ---- rstp2 ----
2025-09-10 15:16:11,563 - test_protocol_conformance - INFO -   Root ID:
2025-09-10 15:16:11,563 - test_protocol_conformance - INFO -     stp-priority    36864
2025-09-10 15:16:11,563 - test_protocol_conformance - INFO -     stp-system-id   f2:c2:8c:9e:8b:46
2025-09-10 15:16:11,564 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 15:16:11,564 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 15:16:11,564 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 15:16:11,564 - test_protocol_conformance - INFO -     This bridge is the root
2025-09-10 15:16:11,564 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-10 15:16:11,564 - test_protocol_conformance - INFO -     stp-priority    36864
2025-09-10 15:16:11,565 - test_protocol_conformance - INFO -     stp-system-id   f2:c2:8c:9e:8b:46
2025-09-10 15:16:11,565 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 15:16:11,565 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 15:16:11,565 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 15:16:11,565 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 15:16:11,565 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-10 15:16:11,565 - test_protocol_conformance - INFO -     veth12b    Designated Forwarding 2000     128.1
2025-09-10 15:16:11,566 - test_protocol_conformance - INFO -     veth23a    Designated Forwarding 2000     128.2
2025-09-10 15:16:11,566 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-10 15:16:11,566 - test_protocol_conformance - INFO -   → 有转发端口
2025-09-10 15:16:11,659 - test_protocol_conformance - INFO - 
rstp3 初始RSTP状态:
2025-09-10 15:16:11,659 - test_protocol_conformance - INFO -   ---- rstp3 ----
2025-09-10 15:16:11,660 - test_protocol_conformance - INFO -   Root ID:
2025-09-10 15:16:11,660 - test_protocol_conformance - INFO -     stp-priority    36864
2025-09-10 15:16:11,660 - test_protocol_conformance - INFO -     stp-system-id   f2:c2:8c:9e:8b:46
2025-09-10 15:16:11,660 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 15:16:11,660 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 15:16:11,660 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 15:16:11,660 - test_protocol_conformance - INFO -     root-port       veth23b
2025-09-10 15:16:11,661 - test_protocol_conformance - INFO -     root-path-cost  2000
2025-09-10 15:16:11,661 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-10 15:16:11,661 - test_protocol_conformance - INFO -     stp-priority    40960
2025-09-10 15:16:11,661 - test_protocol_conformance - INFO -     stp-system-id   52:66:99:94:71:4f
2025-09-10 15:16:11,661 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 15:16:11,662 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 15:16:11,662 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 15:16:11,662 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 15:16:11,662 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-10 15:16:11,662 - test_protocol_conformance - INFO -     veth23b    Root       Forwarding 2000     128.1
2025-09-10 15:16:11,663 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-10 15:16:11,663 - test_protocol_conformance - INFO -   → 有转发端口
2025-09-10 15:16:11,663 - test_protocol_conformance - INFO - === 步骤3: 分析网络拓扑 ===
2025-09-10 15:16:11,663 - test_protocol_conformance - INFO - ✓ SE_ETH2 是根桥
2025-09-10 15:16:11,663 - test_protocol_conformance - INFO - ✓ rstp2 是根桥
2025-09-10 15:16:11,663 - test_protocol_conformance - INFO - === 步骤4: 触发拓扑变更 ===
2025-09-10 15:16:11,664 - test_protocol_conformance - INFO - 断开活动端口: veth31a
2025-09-10 15:16:17,023 - test_protocol_conformance - INFO - ✓ rstp3 状态已变化
2025-09-10 15:16:22,121 - test_protocol_conformance - INFO - === 步骤5: 验证拓扑变更 ===
2025-09-10 15:16:22,173 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: veth12a, 数量: 5)
2025-09-10 15:16:27,317 - RSTPAnalyzer_DUT - INFO - 捕获到 2 个BPDU包
2025-09-10 15:16:27,318 - test_protocol_conformance - INFO - 在 veth12a 捕获到 2 个BPDU
2025-09-10 15:16:27,318 - test_protocol_conformance - INFO - === 步骤6: 最终验证 ===
2025-09-10 15:16:27,318 - test_protocol_conformance - INFO - ✓ 测试通过：检测到拓扑变更
2025-09-10 15:16:27,418 - test_protocol_conformance - INFO - 
========== SE_ETH2 最终状态 ==========
2025-09-10 15:16:27,418 - test_protocol_conformance - INFO - ---- SE_ETH2 ----
2025-09-10 15:16:27,418 - test_protocol_conformance - INFO - Root ID:
2025-09-10 15:16:27,419 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-10 15:16:27,419 - test_protocol_conformance - INFO -   stp-system-id   4a:ae:cd:ec:3f:4a
2025-09-10 15:16:27,420 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 15:16:27,420 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 15:16:27,420 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 15:16:27,420 - test_protocol_conformance - INFO -   This bridge is the root
2025-09-10 15:16:27,421 - test_protocol_conformance - INFO - Bridge ID:
2025-09-10 15:16:27,421 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-10 15:16:27,421 - test_protocol_conformance - INFO -   stp-system-id   4a:ae:cd:ec:3f:4a
2025-09-10 15:16:27,421 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 15:16:27,421 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 15:16:27,421 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 15:16:27,422 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 15:16:27,422 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-10 15:16:27,514 - test_protocol_conformance - INFO - 
========== rstp2 最终状态 ==========
2025-09-10 15:16:27,514 - test_protocol_conformance - INFO - ---- rstp2 ----
2025-09-10 15:16:27,514 - test_protocol_conformance - INFO - Root ID:
2025-09-10 15:16:27,515 - test_protocol_conformance - INFO -   stp-priority    36864
2025-09-10 15:16:27,515 - test_protocol_conformance - INFO -   stp-system-id   f2:c2:8c:9e:8b:46
2025-09-10 15:16:27,515 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 15:16:27,515 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 15:16:27,515 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 15:16:27,516 - test_protocol_conformance - INFO -   This bridge is the root
2025-09-10 15:16:27,516 - test_protocol_conformance - INFO - Bridge ID:
2025-09-10 15:16:27,516 - test_protocol_conformance - INFO -   stp-priority    36864
2025-09-10 15:16:27,516 - test_protocol_conformance - INFO -   stp-system-id   f2:c2:8c:9e:8b:46
2025-09-10 15:16:27,516 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 15:16:27,516 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 15:16:27,517 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 15:16:27,517 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 15:16:27,517 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-10 15:16:27,517 - test_protocol_conformance - INFO -   veth12b    Designated Forwarding 2000     128.1
2025-09-10 15:16:27,517 - test_protocol_conformance - INFO -   veth23a    Designated Forwarding 2000     128.2
2025-09-10 15:16:27,610 - test_protocol_conformance - INFO - 
========== rstp3 最终状态 ==========
2025-09-10 15:16:27,611 - test_protocol_conformance - INFO - ---- rstp3 ----
2025-09-10 15:16:27,611 - test_protocol_conformance - INFO - Root ID:
2025-09-10 15:16:27,611 - test_protocol_conformance - INFO -   stp-priority    36864
2025-09-10 15:16:27,611 - test_protocol_conformance - INFO -   stp-system-id   f2:c2:8c:9e:8b:46
2025-09-10 15:16:27,612 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 15:16:27,612 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 15:16:27,612 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 15:16:27,612 - test_protocol_conformance - INFO -   root-port       veth23b
2025-09-10 15:16:27,612 - test_protocol_conformance - INFO -   root-path-cost  2000
2025-09-10 15:16:27,613 - test_protocol_conformance - INFO - Bridge ID:
2025-09-10 15:16:27,613 - test_protocol_conformance - INFO -   stp-priority    40960
2025-09-10 15:16:27,613 - test_protocol_conformance - INFO -   stp-system-id   52:66:99:94:71:4f
2025-09-10 15:16:27,613 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 15:16:27,613 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 15:16:27,614 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 15:16:27,614 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 15:16:27,614 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-10 15:16:27,614 - test_protocol_conformance - INFO -   veth23b    Root       Forwarding 2000     128.1
2025-09-10 15:16:27,614 - test_protocol_conformance - INFO -   veth31a    Designated Forwarding 2000     128.2
2025-09-10 15:16:27,614 - test_protocol_conformance - INFO - 
=== 诊断信息 ===
2025-09-10 15:16:27,711 - test_protocol_conformance - INFO - 系统日志中的STP/RSTP信息:
2025-09-10 15:16:27,711 - test_protocol_conformance - INFO - [530662.623638] rstp0: entered promiscuous mode
[530715.359540] rstp0: left promiscuous mode
[530715.935526] rstp0: entered promiscuous mode
[532540.269819] rstp2: entered promiscuous mode
[532540.694341] rstp3: entered promiscuous mode

2025-09-10 15:16:27,808 - test_protocol_conformance - INFO - OVS日志中的拓扑变更信息:
2025-09-10 15:16:27,808 - test_protocol_conformance - INFO - 2025-09-10T07:16:29.072Z|00102|rstp_sm(handler3422)|DBG|rstp3, port 1: Port_information_sm 7 -> 8
2025-09-10T07:16:29.072Z|00103|rstp_sm(handler3422)|DBG|rstp3: move_rstp()
2025-09-10T07:16:29.572Z|10253846|rstp_sm|DBG|SE_ETH2: move_rstp()
2025-09-10T07:16:29.703Z|10253850|bridge|WARN|rstp0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-10T07:16:29.703Z|10253851|bridge|WARN|br0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-10T07:16:30.072Z|10253852|rstp_sm|DBG|rstp0: move_rstp()
2025-09-10T07:16:30.072Z|10253853|rstp_sm|DBG|rstp2: move_rstp()
2025-09-10T07:16:30.072Z|10253854|rstp_sm|DBG|br0: move_rstp()
2025-09-10T07:16:30.072Z|10253855|rstp_sm|DBG|rstp3: move_rstp()
2025-09-10T07:16:30.072Z|10253856|rstp_sm|DBG|rstp3, port 1: Port_role_transition_sm 7 -> 6
2025-09-10T07:16:30.072Z|10253857|rstp_sm|DBG|rstp3, port 1: port_transmit_sm 6 -> 3
2025-09-10T07:16:30.072Z|10253858|rstp_sm|DBG|rstp3: move_rstp()
2025-09-10T07:16:30.072Z|10253859|rstp_sm|DBG|rstp3, port 1: Port_role_transition_sm 6 -> 7
2025-09-10T07:16:30.072Z|10253860|rstp_sm|DBG|rstp3, port 1: port_transmit_sm 3 -> 5
2025-09-10T07:16:30.072Z|10253861|rstp_sm|DBG|rstp3: move_rstp()
2025-09-10T07:16:30.072Z|10253862|rstp_sm|DBG|rstp3, port 1: port_transmit_sm 5 -> 6
2025-09-10T07:16:30.072Z|10253863|rstp_sm|DBG|rstp3: move_rstp()

2025-09-10 15:16:27,809 - test_protocol_conformance - INFO - === 清理测试环境 ===
2025-09-10 15:16:28,476 - test_protocol_conformance - INFO - 拓扑变更通知测试完成
2025-09-10 15:16:28,477 - RSTPTest - INFO - 测试完成: test_topology_change_notification (耗时: 30.84秒)
2025-09-10 15:16:28,477 - RSTPTest - INFO - ============================================================

2025-09-10 15:16:28,478 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 15:16:28,478 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 15:16:28,478 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 15:16:28,617 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 15:16:28,618 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 15:16:28,735 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 15:16:28,735 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 15:16:28,876 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 15:16:28,876 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 15:16:28,876 - RSTPTest - INFO - ============================================================
2025-09-10 15:16:28,877 - RSTPTest - INFO - 开始测试: test_root_bridge_hijack_attack
2025-09-10 15:16:28,877 - RSTPTest - INFO - ============================================================
2025-09-10 15:16:28,877 - test_security - INFO - 开始根网桥劫持攻击测试
2025-09-10 15:16:28,878 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 15:16:28,878 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 15:16:28,878 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 15:16:28,878 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 15:16:28,878 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 15:16:28,879 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 15:16:28,879 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 15:16:28,931 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 15:16:29,037 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 15:16:29,037 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 15:16:29,037 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 15:16:29,037 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 15:16:29,463 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 15:16:29,463 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 15:16:30,503 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 15:16:30,503 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 15:16:30,503 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 15:16:30,504 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 15:16:30,960 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 15:16:31,439 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 15:16:31,440 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 15:16:31,543 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 15:16:31,735 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 15:16:31,736 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 15:16:31,736 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 15:16:31,736 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 15:16:31,736 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 15:16:31,736 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 15:16:31,737 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 15:16:31,792 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 15:16:31,793 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 15:16:31,967 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 15:16:31,967 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 15:16:31,967 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 15:16:31,968 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 15:16:31,968 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 15:16:32,524 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 15:16:37,163 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:16:37,305 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:16:37,305 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 15:16:37,306 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 15:16:37,306 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 15:16:37,306 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 15:16:38,537 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 15:16:39,764 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 15:16:39,765 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 15:16:39,861 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 15:16:40,132 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 15:16:40,132 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 15:16:40,132 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 15:16:40,133 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 15:16:40,133 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 15:16:40,133 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 15:16:40,133 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 15:16:40,187 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 15:16:40,188 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 15:16:40,365 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 15:16:40,365 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 15:16:40,366 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 15:16:40,366 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 15:16:40,366 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 15:16:40,910 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 15:16:45,462 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:16:45,607 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:16:45,607 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 15:16:45,607 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 15:16:45,608 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 15:16:45,608 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 15:16:46,829 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 15:16:48,082 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 15:16:48,083 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 15:16:48,178 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 15:16:48,445 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 15:16:48,446 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 15:16:48,446 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 15:16:55,727 - test_security - INFO - 初始根网桥: 
2025-09-10 15:16:55,728 - FaultInjector_TestNode1 - WARNING - 注入恶意BPDU到 eth0
2025-09-10 15:16:55,974 - FaultInjector_TestNode1 - WARNING - 恶意BPDU注入已启动 (优先级: 0)
2025-09-10 15:17:11,996 - test_security - INFO - 根网桥未被劫持（可能已启用防护）
2025-09-10 15:17:11,996 - test_security - INFO - 根网桥劫持攻击测试完成
2025-09-10 15:17:11,997 - RSTPTest - INFO - 测试完成: test_root_bridge_hijack_attack (耗时: 43.12秒)
2025-09-10 15:17:11,997 - RSTPTest - INFO - ============================================================

2025-09-10 15:17:11,999 - RSTPTest - INFO - ============================================================
2025-09-10 15:17:11,999 - RSTPTest - INFO - 开始测试: test_bpdu_flood_attack
2025-09-10 15:17:11,999 - RSTPTest - INFO - ============================================================
2025-09-10 15:17:11,999 - test_security - INFO - 开始BPDU洪泛攻击测试
2025-09-10 15:17:12,000 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 15:17:12,000 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 15:17:12,000 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 15:17:12,000 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 15:17:12,000 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 15:17:12,000 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 15:17:12,001 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 15:17:12,001 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 15:17:12,514 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 15:17:12,515 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 15:17:13,555 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 15:17:13,555 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 15:17:13,555 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 15:17:13,555 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 15:17:14,019 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 15:17:14,499 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 15:17:14,499 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 15:17:14,603 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 15:17:14,795 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 15:17:14,795 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 15:17:14,796 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 15:17:14,796 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 15:17:14,796 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 15:17:14,796 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 15:17:14,796 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 15:17:14,797 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 15:17:15,312 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 15:17:19,877 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:17:20,019 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:17:20,019 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 15:17:20,019 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 15:17:20,020 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 15:17:20,020 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 15:17:21,235 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 15:17:22,469 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 15:17:22,469 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 15:17:22,564 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 15:17:22,829 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 15:17:22,829 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 15:17:22,829 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 15:17:22,830 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 15:17:22,830 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 15:17:22,830 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 15:17:22,830 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 15:17:22,830 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 15:17:23,328 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 15:17:27,871 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:17:27,999 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:17:27,999 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 15:17:27,999 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 15:17:28,000 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 15:17:28,000 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 15:17:29,226 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 15:17:30,485 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 15:17:30,485 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 15:17:30,581 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 15:17:30,849 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 15:17:30,850 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 15:17:30,850 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 15:17:36,069 - test_security - INFO - 初始CPU使用率: 0.0%
2025-09-10 15:17:46,435 - test_security - INFO - 洪泛时CPU使用率: 25.0%
2025-09-10 15:17:47,503 - test_security - INFO - 网络在BPDU洪泛下保持稳定
2025-09-10 15:17:47,503 - test_security - INFO - BPDU洪泛攻击测试完成
2025-09-10 15:17:47,504 - RSTPTest - INFO - 测试完成: test_bpdu_flood_attack (耗时: 35.50秒)
2025-09-10 15:17:47,504 - RSTPTest - INFO - ============================================================

2025-09-10 15:17:47,506 - RSTPTest - INFO - ============================================================
2025-09-10 15:17:47,506 - RSTPTest - INFO - 开始测试: test_topology_change_attack
2025-09-10 15:17:47,506 - RSTPTest - INFO - ============================================================
2025-09-10 15:17:47,506 - test_security - INFO - 开始拓扑变更攻击测试
2025-09-10 15:17:47,507 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 15:17:47,507 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 15:17:47,507 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 15:17:47,507 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 15:17:47,507 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 15:17:47,508 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 15:17:47,508 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 15:17:47,508 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 15:17:48,045 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 15:17:48,045 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 15:17:49,070 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 15:17:49,071 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 15:17:49,071 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 15:17:49,071 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 15:17:49,531 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 15:17:50,010 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 15:17:50,011 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 15:17:50,114 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 15:17:50,306 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 15:17:50,307 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 15:17:50,307 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 15:17:50,307 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 15:17:50,308 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 15:17:50,308 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 15:17:50,308 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 15:17:50,308 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 15:17:50,851 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 15:17:55,389 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:17:55,521 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:17:55,521 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 15:17:55,521 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 15:17:55,522 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 15:17:55,522 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 15:17:56,757 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 15:17:57,980 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 15:17:57,980 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 15:17:58,075 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 15:17:58,336 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 15:17:58,336 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 15:17:58,337 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 15:17:58,337 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 15:17:58,337 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 15:17:58,337 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 15:17:58,337 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 15:17:58,338 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 15:17:58,858 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 15:18:03,395 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:18:03,530 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:18:03,530 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 15:18:03,530 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 15:18:03,531 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 15:18:03,531 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 15:18:04,754 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 15:18:06,001 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 15:18:06,001 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 15:18:06,095 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 15:18:06,364 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 15:18:06,364 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 15:18:06,365 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 15:18:12,386 - test_security - INFO - 触发快速拓扑变更...
2025-09-10 15:18:31,670 - test_security - INFO - 检测到0次拓扑变更
2025-09-10 15:18:33,023 - test_security - INFO - 网络在频繁拓扑变更后保持稳定
2025-09-10 15:18:33,023 - test_security - INFO - 拓扑变更攻击测试完成
2025-09-10 15:18:33,024 - RSTPTest - INFO - 测试完成: test_topology_change_attack (耗时: 45.52秒)
2025-09-10 15:18:33,025 - RSTPTest - INFO - ============================================================

2025-09-10 15:18:33,027 - RSTPTest - INFO - ============================================================
2025-09-10 15:18:33,027 - RSTPTest - INFO - 开始测试: test_mac_spoofing
2025-09-10 15:18:33,027 - RSTPTest - INFO - ============================================================
2025-09-10 15:18:33,028 - test_security - INFO - 开始MAC地址欺骗测试
2025-09-10 15:18:33,028 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 15:18:33,028 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 15:18:33,029 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 15:18:33,029 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 15:18:33,029 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 15:18:33,029 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 15:18:33,030 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 15:18:33,030 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 15:18:33,534 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 15:18:33,534 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 15:18:34,561 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 15:18:34,561 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 15:18:34,562 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 15:18:34,562 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 15:18:35,022 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 15:18:35,502 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 15:18:35,502 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 15:18:35,606 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 15:18:35,798 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 15:18:35,798 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 15:18:35,798 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 15:18:35,799 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 15:18:35,799 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 15:18:35,799 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 15:18:35,799 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 15:18:35,799 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 15:18:36,327 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 15:18:40,881 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:18:41,019 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:18:41,019 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 15:18:41,020 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 15:18:41,020 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 15:18:41,020 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 15:18:42,232 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 15:18:43,484 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 15:18:43,484 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 15:18:43,580 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 15:18:43,854 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 15:18:43,854 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 15:18:43,855 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 15:18:43,855 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 15:18:43,855 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 15:18:43,855 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 15:18:43,855 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 15:18:43,855 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 15:18:44,492 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 15:18:49,021 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:18:49,163 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:18:49,163 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 15:18:49,163 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 15:18:49,163 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 15:18:49,164 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 15:18:50,376 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 15:18:51,644 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 15:18:51,644 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 15:18:51,739 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 15:18:52,017 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 15:18:52,018 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 15:18:52,018 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 15:18:57,070 - test_security - INFO - DUT MAC地址: 90:12:10:b5:7d:f7
2025-09-10 15:18:57,070 - test_security - INFO - 尝试MAC地址欺骗...
2025-09-10 15:19:03,646 - test_security - INFO - 网络对MAC欺骗具有抗性
2025-09-10 15:19:10,263 - test_security - INFO - MAC地址欺骗测试完成
2025-09-10 15:19:10,265 - RSTPTest - INFO - 测试完成: test_mac_spoofing (耗时: 37.24秒)
2025-09-10 15:19:10,265 - RSTPTest - INFO - ============================================================

2025-09-10 15:19:10,267 - RSTPTest - INFO - ============================================================
2025-09-10 15:19:10,267 - RSTPTest - INFO - 开始测试: test_port_security
2025-09-10 15:19:10,267 - RSTPTest - INFO - ============================================================
2025-09-10 15:19:10,268 - test_security - INFO - 开始端口安全测试
2025-09-10 15:19:10,320 - test_security - WARNING - 未检测到任何端口安全功能
2025-09-10 15:19:10,322 - RSTPTest - INFO - 测试完成: test_port_security (耗时: 0.05秒)
2025-09-10 15:19:10,322 - RSTPTest - INFO - ============================================================

2025-09-10 15:19:10,323 - RSTPTest - INFO - ============================================================
2025-09-10 15:19:10,323 - RSTPTest - INFO - 开始测试: test_bpdu_filter_functionality
2025-09-10 15:19:10,324 - RSTPTest - INFO - ============================================================
2025-09-10 15:19:10,324 - test_security - INFO - 开始BPDU过滤器功能测试
2025-09-10 15:19:10,368 - NetworkTopology - INFO - 创建RSTP线性拓扑...
2025-09-10 15:19:10,369 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 15:19:10,369 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 15:19:10,369 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 15:19:10,369 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 15:19:10,369 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 15:19:10,370 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 15:19:10,370 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 15:19:10,911 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 15:19:10,911 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 15:19:11,950 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 15:19:11,951 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 15:19:11,951 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth2']
2025-09-10 15:19:11,951 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 15:19:12,409 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 15:19:12,409 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 15:19:12,517 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 15:19:12,714 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 15:19:12,714 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 15:19:12,715 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 15:19:12,715 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 15:19:12,715 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 15:19:12,716 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 15:19:12,716 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 15:19:12,716 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 15:19:25,435 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 15:19:39,980 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:19:50,058 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:19:50,058 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 15:19:50,059 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 15:19:50,059 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 15:19:50,059 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 15:21:00,003 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 15:21:43,157 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 15:21:43,158 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 15:21:43,252 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 15:21:45,451 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 15:21:45,451 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 15:21:45,451 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 15:21:45,452 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 15:21:45,452 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 15:21:45,452 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 15:21:45,452 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 15:21:45,452 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 15:21:45,987 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 15:21:50,570 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:21:50,706 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:21:50,706 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 15:21:50,706 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 15:21:50,706 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0']
2025-09-10 15:21:50,707 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 15:21:51,927 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 15:21:51,928 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 15:21:52,024 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 15:21:52,294 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 15:21:52,295 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 15:21:52,295 - NetworkTopology - INFO - 线性拓扑创建完成
2025-09-10 15:21:57,424 - test_security - WARNING - BPDU包统计命令执行失败: 
2025-09-10 15:21:57,424 - test_security - INFO - 启用过滤器前端口 eth2 BPDU数量: 0
2025-09-10 15:21:57,551 - test_security - WARNING - mstpctl设置BPDU过滤器失败，尝试使用brctl
2025-09-10 15:21:57,648 - test_security - ERROR - 启用BPDU过滤器失败: BPDU过滤器配置失败: 
2025-09-10 15:21:57,648 - test_security - ERROR - 启用BPDU过滤器失败: BPDU过滤器配置失败: 
2025-09-10 15:21:57,795 - test_security - WARNING - 清理命令执行失败: mstpctl setportbpdufilter br0 eth2 no, 错误: 
2025-09-10 15:21:57,939 - test_security - WARNING - 清理命令执行失败: echo 0 > /sys/class/net/br0/bridge/ports/eth2/bpdu_filter, 错误: 
2025-09-10 15:21:57,977 - RSTPTest - INFO - 测试完成: test_bpdu_filter_functionality (耗时: 167.65秒)
2025-09-10 15:21:57,977 - RSTPTest - INFO - ============================================================

2025-09-10 15:21:57,978 - RSTPTest - INFO - ============================================================
2025-09-10 15:21:57,978 - RSTPTest - INFO - 开始测试: test_malformed_bpdu_handling
2025-09-10 15:21:57,979 - RSTPTest - INFO - ============================================================
2025-09-10 15:21:57,980 - test_security - INFO - 开始畸形BPDU处理测试
2025-09-10 15:21:57,986 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 15:21:57,986 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 15:21:57,986 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 15:21:57,986 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 15:21:57,987 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 15:21:57,987 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 15:21:57,987 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 15:21:57,987 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 15:21:58,510 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 15:21:58,510 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 15:21:59,550 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 15:21:59,550 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 15:21:59,550 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 15:21:59,550 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 15:22:00,010 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 15:22:00,494 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 15:22:00,494 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 15:22:00,598 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 15:22:00,790 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 15:22:00,791 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 15:22:00,791 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 15:22:00,791 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 15:22:00,791 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 15:22:00,791 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 15:22:00,791 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 15:22:00,792 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 15:22:14,279 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 15:22:18,818 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:22:18,951 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:22:18,951 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 15:22:18,951 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 15:22:18,952 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 15:22:18,952 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 15:22:20,188 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 15:22:21,435 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 15:22:21,436 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 15:22:21,531 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 15:22:21,804 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 15:22:21,804 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 15:22:21,804 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 15:22:21,804 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 15:22:21,805 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 15:22:21,805 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 15:22:21,805 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 15:22:21,805 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 15:22:22,305 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 15:22:26,848 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:22:26,982 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:22:26,983 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 15:22:26,983 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 15:22:26,983 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 15:22:26,983 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 15:22:28,210 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 15:22:29,480 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 15:22:29,481 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 15:22:29,578 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 15:22:29,851 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 15:22:29,852 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 15:22:29,852 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 15:22:36,941 - test_security - INFO - 初始网络状态: 稳定
2025-09-10 15:22:36,941 - test_security - INFO - 执行测试: _test_oversized_bpdu
2025-09-10 15:22:41,918 - test_security - INFO - _test_oversized_bpdu 网络保持稳定
2025-09-10 15:22:41,918 - test_security - INFO - 执行测试: _test_undersized_bpdu
2025-09-10 15:22:41,970 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

# 创建过小的BPDU（缺少必要字段）
target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 只包含最小字段的BPDU
truncated_bpdu = Raw(load=b"     ")  # 截断的BPDU

packet = eth/llc/truncated_bpdu
sendp(packet, iface=interface, count=5, inter=1, verbose=0)
print("Undersized BPDU sent")
' > /tmp/undersized_bpdu.py
错误: 
2025-09-10 15:22:41,971 - test_security - WARNING - _test_undersized_bpdu 执行异常但继续测试: 
2025-09-10 15:22:41,971 - test_security - INFO - 执行测试: _test_invalid_protocol_id
2025-09-10 15:22:41,972 - test_security - WARNING - TestNode1: SSH连接断开，尝试重连...
2025-09-10 15:22:41,972 - SSH_TestNode1 - INFO - TestNode1: 尝试重新建立SSH连接...
2025-09-10 15:22:41,972 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 15:22:42,092 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 15:22:43,775 - test_security - INFO - TestNode1: 无效协议ID BPDU测试完成
2025-09-10 15:22:47,814 - test_security - INFO - _test_invalid_protocol_id 网络保持稳定
2025-09-10 15:22:47,814 - test_security - INFO - 执行测试: _test_invalid_version
2025-09-10 15:22:59,365 - test_security - INFO - TestNode1: 无效版本号BPDU测试完成
2025-09-10 15:23:03,389 - test_security - INFO - _test_invalid_version 网络保持稳定
2025-09-10 15:23:03,390 - test_security - INFO - 执行测试: _test_invalid_message_type
2025-09-10 15:23:08,656 - test_security - INFO - TestNode1: 无效消息类型BPDU测试完成
2025-09-10 15:23:12,677 - test_security - INFO - _test_invalid_message_type 网络保持稳定
2025-09-10 15:23:12,677 - test_security - INFO - 执行测试: _test_corrupted_fields
2025-09-10 15:23:14,575 - test_security - INFO - TestNode1: 损坏字段BPDU测试完成
2025-09-10 15:23:18,597 - test_security - INFO - _test_corrupted_fields 网络保持稳定
2025-09-10 15:23:21,754 - test_security - INFO - 畸形BPDU处理测试完成
2025-09-10 15:23:21,754 - RSTPTest - INFO - 测试完成: test_malformed_bpdu_handling (耗时: 83.78秒)
2025-09-10 15:23:21,755 - RSTPTest - INFO - ============================================================

2025-09-10 15:23:21,756 - RSTPTest - INFO - ============================================================
2025-09-10 15:23:21,756 - RSTPTest - INFO - 开始测试: test_non_standard_bpdu_handling
2025-09-10 15:23:21,756 - RSTPTest - INFO - ============================================================
2025-09-10 15:23:21,757 - test_security - INFO - 开始非标准BPDU处理测试
2025-09-10 15:23:21,761 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 15:23:21,762 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 15:23:21,762 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 15:23:21,762 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 15:23:21,762 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 15:23:21,762 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 15:23:21,763 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 15:23:21,763 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 15:23:22,281 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 15:23:22,281 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 15:23:23,343 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 15:23:23,343 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 15:23:23,343 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 15:23:23,343 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 15:23:23,803 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 15:23:24,283 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 15:23:24,284 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 15:23:24,384 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 15:23:24,578 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 15:23:24,578 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 15:23:24,578 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 15:23:24,579 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 15:23:24,579 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 15:23:24,579 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 15:23:24,579 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 15:23:24,580 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 15:23:25,091 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 15:23:29,646 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:23:29,774 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:23:29,774 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 15:23:29,774 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 15:23:29,775 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 15:23:29,775 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 15:23:30,991 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 15:23:32,200 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 15:23:32,200 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 15:23:32,296 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 15:23:32,565 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 15:23:32,565 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 15:23:32,565 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 15:23:32,566 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 15:23:32,566 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 15:23:32,566 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 15:23:32,566 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 15:23:32,566 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 15:23:33,073 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 15:23:37,627 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:23:37,771 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:23:37,771 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 15:23:37,771 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 15:23:37,772 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 15:23:37,772 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 15:23:38,980 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 15:23:40,233 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 15:23:40,233 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 15:23:40,332 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 15:23:40,603 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 15:23:40,603 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 15:23:40,603 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 15:23:45,603 - test_security - INFO - 执行测试: _test_pvst_plus_bpdu
2025-09-10 15:23:45,656 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

# PVST+ 使用不同的目标MAC地址
pvst_mac = "01:00:0c:cc:cc:cd"
interface = "eth0"

eth = Ether(dst=pvst_mac, src="00:11:22:33:44:55")
# PVST+ 使用SNAP封装
snap = SNAP(OUI=0x00000c, code=0x010b)
# 模拟PVST+ BPDU结构
pvst_bpdu = Raw(load=b"    " + b" " * 30 + b" ")  # 包含VLAN ID

packet = eth/snap/pvst_bpdu
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("PVST+ BPDU sent")
' > /tmp/pvst_bpdu.py
错误: 
2025-09-10 15:23:45,657 - test_security - ERROR - _test_pvst_plus_bpdu 执行失败: 
2025-09-10 15:23:45,658 - test_security - INFO - 执行测试: _test_cisco_proprietary_bpdu
2025-09-10 15:23:45,658 - SSH_TestNode1 - WARNING - TestNode1: SSH连接已断开，尝试重连...
2025-09-10 15:23:45,777 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 15:23:45,901 - SSH_TestNode1 - INFO - TestNode1: SSH重连成功
2025-09-10 15:23:45,947 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 模拟包含Cisco专有扩展的BPDU
cisco_bpdu = Raw(load=b"    " + b" " * 30 + 
                     b" )   ")  # Cisco OUI + 专有数据

packet = eth/llc/cisco_bpdu
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("Cisco proprietary BPDU sent")
' > /tmp/cisco_bpdu.py
错误: 
2025-09-10 15:23:45,948 - test_security - ERROR - _test_cisco_proprietary_bpdu 执行失败: 
2025-09-10 15:23:45,948 - test_security - INFO - 执行测试: _test_vlan_tagged_bpdu
2025-09-10 15:23:45,948 - SSH_TestNode1 - WARNING - TestNode1: SSH连接已断开，尝试重连...
2025-09-10 15:23:46,067 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 15:23:46,204 - SSH_TestNode1 - INFO - TestNode1: SSH重连成功
2025-09-10 15:23:54,138 - test_security - INFO - _test_vlan_tagged_bpdu 网络保持稳定
2025-09-10 15:23:54,139 - test_security - INFO - 执行测试: _test_unknown_tlv_bpdu
2025-09-10 15:23:54,193 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 标准BPDU + 未知TLV
standard_bpdu = b"    " + b" " * 30
unknown_tlv = b"ÿÿ "  # 未知类型和长度的TLV
bpdu_with_tlv = Raw(load=standard_bpdu + unknown_tlv)

packet = eth/llc/bpdu_with_tlv
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("BPDU with unknown TLV sent")
' > /tmp/unknown_tlv.py
错误: 
2025-09-10 15:23:54,194 - test_security - ERROR - _test_unknown_tlv_bpdu 执行失败: 
2025-09-10 15:23:54,382 - test_security - INFO - 非标准BPDU处理测试完成
2025-09-10 15:23:54,383 - RSTPTest - INFO - 测试完成: test_non_standard_bpdu_handling (耗时: 32.63秒)
2025-09-10 15:23:54,383 - RSTPTest - INFO - ============================================================

2025-09-10 15:23:54,385 - RSTPTest - INFO - ============================================================
2025-09-10 15:23:54,385 - RSTPTest - INFO - 开始测试: test_bpdu_guard_functionality
2025-09-10 15:23:54,386 - RSTPTest - INFO - ============================================================
2025-09-10 15:23:54,386 - test_security - INFO - 开始BPDU防护功能测试
2025-09-10 15:23:54,391 - NetworkTopology - INFO - 创建RSTP线性拓扑...
2025-09-10 15:23:54,392 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 15:23:54,392 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 15:23:54,392 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 15:23:54,392 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 15:23:54,393 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 15:23:54,393 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 15:23:54,393 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 15:23:54,939 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 15:23:54,940 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 15:23:55,980 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 15:23:55,980 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 15:23:55,980 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth2']
2025-09-10 15:23:55,980 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 15:23:56,441 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 15:23:56,442 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 15:23:56,544 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 15:23:56,736 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 15:23:56,736 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 15:23:56,737 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 15:23:56,737 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 15:23:56,737 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 15:23:56,737 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 15:23:56,737 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 15:23:56,738 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 15:23:56,738 - SSH_TestNode1 - WARNING - TestNode1: SSH连接已断开，尝试重连...
2025-09-10 15:23:56,856 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 15:23:56,990 - SSH_TestNode1 - INFO - TestNode1: SSH重连成功
2025-09-10 15:23:57,496 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 15:24:02,045 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:24:02,176 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:24:02,176 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 15:24:02,177 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 15:24:02,177 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 15:24:02,177 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 15:24:03,382 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 15:24:04,596 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 15:24:04,596 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 15:24:04,691 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 15:24:04,957 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 15:24:04,958 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 15:24:04,958 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 15:24:04,958 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 15:24:04,958 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 15:24:04,958 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 15:24:04,958 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 15:24:04,958 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 15:24:05,495 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 15:24:10,073 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:24:10,215 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:24:10,216 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 15:24:10,216 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 15:24:10,216 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0']
2025-09-10 15:24:10,216 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 15:24:11,448 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 15:24:11,448 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 15:24:11,545 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 15:24:11,816 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 15:24:11,817 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 15:24:11,817 - NetworkTopology - INFO - 线性拓扑创建完成
2025-09-10 15:24:16,872 - test_security - WARNING - 启用BPDU防护失败: 
2025-09-10 15:24:16,969 - test_security - INFO - 边缘端口 eth2 初始状态: unknown
2025-09-10 15:24:16,969 - test_security - INFO - 向边缘端口 eth2 发送BPDU
2025-09-10 15:24:23,928 - test_security - INFO - BPDU防护触发后端口 eth2 状态: unknown
2025-09-10 15:24:23,928 - test_security - ERROR - BPDU防护功能异常：端口未被禁用
2025-09-10 15:24:24,159 - RSTPTest - INFO - 测试完成: test_bpdu_guard_functionality (耗时: 29.77秒)
2025-09-10 15:24:24,159 - RSTPTest - INFO - ============================================================

2025-09-10 15:24:24,160 - RSTPTest - INFO - ============================================================
2025-09-10 15:24:24,161 - RSTPTest - INFO - 开始测试: test_root_guard_functionality
2025-09-10 15:24:24,161 - RSTPTest - INFO - ============================================================
2025-09-10 15:24:24,162 - test_security - INFO - 开始根防护功能测试
2025-09-10 15:24:24,183 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 15:24:24,184 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 15:24:24,184 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 15:24:24,184 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 15:24:24,184 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 15:24:24,184 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 15:24:24,185 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 15:24:24,185 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 15:24:24,694 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 15:24:24,695 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 15:24:25,731 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 15:24:25,732 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 15:24:25,732 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 15:24:25,732 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 15:24:26,193 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 15:24:26,668 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 15:24:26,668 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 15:24:26,773 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 15:24:26,964 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 15:24:26,964 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 15:24:26,964 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 15:24:26,965 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 15:24:26,965 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 15:24:26,965 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 15:24:26,965 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 15:24:26,965 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 15:24:27,473 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 15:24:32,044 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:24:32,179 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:24:32,179 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 15:24:32,180 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 15:24:32,180 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 15:24:32,180 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 15:24:33,396 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 15:24:34,614 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 15:24:34,615 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 15:24:34,709 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 15:24:34,981 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 15:24:34,981 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 15:24:34,981 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 15:24:34,981 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 15:24:34,981 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 15:24:34,982 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 15:24:34,982 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 15:24:34,982 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 15:24:35,509 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 15:24:40,066 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:24:40,205 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:24:40,205 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 15:24:40,205 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 15:24:40,205 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 15:24:40,206 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 15:24:41,422 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 15:24:42,699 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 15:24:42,700 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 15:24:42,795 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 15:24:43,072 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 15:24:43,072 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 15:24:43,072 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 15:24:49,100 - test_security - INFO - 当前根桥ID: 
2025-09-10 15:24:49,200 - test_security - WARNING - 启用根防护失败: 
2025-09-10 15:24:49,201 - test_security - INFO - 在端口 eth1 启用根防护
2025-09-10 15:24:49,296 - test_security - INFO - 端口 eth1 初始状态: unknown
2025-09-10 15:24:49,296 - test_security - INFO - 发送更优BPDU尝试劫持根桥
2025-09-10 15:25:05,311 - test_security - INFO - 根防护触发后端口 eth1 状态: unknown
2025-09-10 15:25:06,503 - test_security - INFO - 根防护功能正常：根桥身份未被劫持
2025-09-10 15:25:06,504 - test_security - ERROR - 根防护功能异常：端口未进入阻塞状态
2025-09-10 15:25:06,504 - test_security - INFO - 测试根防护端口 eth1 恢复功能
2025-09-10 15:25:06,504 - test_security - INFO - 停止发送更优BPDU
2025-09-10 15:25:16,555 - test_security - INFO - 端口恢复后状态: unknown
2025-09-10 15:25:16,556 - test_security - WARNING - 根防护端口未能自动恢复
2025-09-10 15:25:16,786 - RSTPTest - INFO - 测试完成: test_root_guard_functionality (耗时: 52.62秒)
2025-09-10 15:25:16,786 - RSTPTest - INFO - ============================================================

2025-09-10 15:25:16,788 - RSTPTest - INFO - ============================================================
2025-09-10 15:25:16,789 - RSTPTest - INFO - 开始测试: test_loop_guard_functionality
2025-09-10 15:25:16,789 - RSTPTest - INFO - ============================================================
2025-09-10 15:25:16,790 - test_security - INFO - 开始环路防护功能测试
2025-09-10 15:25:16,790 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 15:25:16,791 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 15:25:16,791 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 15:25:16,791 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 15:25:16,791 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 15:25:16,792 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 15:25:16,792 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 15:25:16,792 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 15:25:17,278 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 15:25:17,278 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 15:25:18,323 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 15:25:18,323 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 15:25:18,324 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 15:25:18,324 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 15:25:18,787 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 15:25:19,263 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 15:25:19,263 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 15:25:19,367 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 15:25:19,559 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 15:25:19,559 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 15:25:19,560 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 15:25:19,560 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 15:25:19,560 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 15:25:19,560 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 15:25:19,561 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 15:25:19,561 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 15:25:20,064 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 15:25:24,630 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:25:24,770 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:25:24,771 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 15:25:24,771 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 15:25:24,771 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 15:25:24,771 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 15:25:26,020 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 15:25:27,241 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 15:25:27,241 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 15:25:27,340 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 15:25:27,615 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 15:25:27,615 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 15:25:27,615 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 15:25:27,616 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 15:25:27,616 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 15:25:27,616 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 15:25:27,616 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 15:25:27,616 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 15:25:28,130 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 15:25:32,681 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 15:25:32,812 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 15:25:32,812 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 15:25:32,813 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 15:25:32,813 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 15:25:32,813 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 15:25:34,039 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 15:25:35,314 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 15:25:35,315 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 15:25:35,410 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 15:25:35,689 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 15:25:35,690 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 15:25:35,691 - NetworkTopology - INFO - 环形拓扑创建完成
