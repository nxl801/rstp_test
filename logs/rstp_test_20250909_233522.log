2025-09-09 23:35:22,756 - root - INFO - 日志系统初始化完成，日志文件: logs\rstp_test_20250909_233522.log
2025-09-09 23:35:23,003 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 23:35:23,004 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 23:35:23,122 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 23:35:23,123 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 23:35:23,257 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 23:35:23,257 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 23:35:23,268 - RSTPTest - INFO - ============================================================
2025-09-09 23:35:23,268 - RSTPTest - INFO - 开始测试: test_port_state_transitions
2025-09-09 23:35:23,269 - RSTPTest - INFO - ============================================================
2025-09-09 23:35:23,270 - test_additional_rstp - INFO - 开始端口状态转换测试
2025-09-09 23:35:23,270 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 23:35:23,271 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 23:35:23,271 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 23:35:23,271 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 23:35:23,271 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 23:35:23,272 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 23:35:23,272 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-09 23:35:23,277 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-09 23:35:23,335 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-09 23:35:23,335 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-09 23:35:23,335 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 23:35:23,335 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 23:35:23,869 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 23:35:23,870 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 23:35:24,910 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 23:35:24,910 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 23:35:24,911 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 23:35:24,911 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 23:35:25,370 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 23:35:25,849 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 23:35:25,850 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 23:35:25,953 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 23:35:26,049 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 23:35:26,050 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 23:35:26,050 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 23:35:26,050 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 23:35:26,050 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 23:35:26,051 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 23:35:26,051 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 23:35:26,062 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 23:35:26,062 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 23:35:36,137 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-09 23:35:36,138 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-09 23:35:36,138 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-09 23:35:36,138 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-09 23:35:36,138 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 23:36:06,537 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-09 23:36:26,785 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:36:36,903 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-09 23:36:47,025 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:36:57,147 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:37:07,266 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:37:17,553 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:37:17,554 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-09 23:37:17,554 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 23:37:17,554 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 23:37:17,554 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 23:38:06,784 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 23:38:47,105 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 23:38:47,105 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 23:38:50,306 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 23:39:00,522 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 23:39:00,523 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 23:39:00,523 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 23:39:00,523 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 23:39:00,523 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 23:39:00,523 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 23:39:00,524 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 23:39:00,532 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 23:39:00,533 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 23:39:10,607 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-09 23:39:10,608 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-09 23:39:10,608 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-09 23:39:10,608 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-09 23:39:10,608 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 23:39:40,990 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-09 23:40:01,237 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:40:11,356 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-09 23:40:21,476 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:40:31,595 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:40:41,715 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:40:51,837 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:40:51,838 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-09 23:40:51,838 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 23:40:51,838 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 23:40:51,838 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 23:42:03,152 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 23:42:44,515 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 23:42:44,516 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 23:42:46,799 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 23:42:50,061 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 23:42:50,061 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 23:42:50,062 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 23:43:05,206 - test_additional_rstp - INFO - 使用网桥: rstp0
2025-09-09 23:43:05,207 - test_additional_rstp - INFO - === 步骤1: 禁用端口触发状态转换 ===
2025-09-09 23:43:05,457 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:43:05,621 - RSTPTest - INFO - 测试完成: test_port_state_transitions (耗时: 462.35秒)
2025-09-09 23:43:05,622 - RSTPTest - INFO - ============================================================

2025-09-09 23:43:05,624 - RSTPTest - INFO - ============================================================
2025-09-09 23:43:05,625 - RSTPTest - INFO - 开始测试: test_bpdu_propagation_and_keepalive
2025-09-09 23:43:05,625 - RSTPTest - INFO - ============================================================
2025-09-09 23:43:05,625 - test_additional_rstp - INFO - 开始BPDU传播和保活机制测试
2025-09-09 23:43:05,626 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 23:43:05,626 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 23:43:05,626 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 23:43:05,626 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 23:43:05,626 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 23:43:05,626 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 23:43:05,627 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 23:43:05,627 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 23:43:06,193 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 23:43:06,193 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 23:43:07,230 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 23:43:07,230 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 23:43:07,230 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 23:43:07,230 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 23:43:07,694 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 23:43:08,178 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 23:43:08,178 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 23:43:08,281 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 23:43:08,378 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 23:43:08,378 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 23:43:08,378 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 23:43:08,379 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 23:43:08,379 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 23:43:08,379 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-09 23:43:08,379 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-09 23:43:08,379 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 23:43:21,872 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-09 23:43:22,215 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:43:22,386 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-09 23:43:22,590 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:43:22,756 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:43:22,920 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:43:23,084 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:43:23,084 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-09 23:43:23,085 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 23:43:23,085 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 23:43:23,085 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 23:43:24,261 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 23:43:25,453 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 23:43:25,453 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 23:43:25,626 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 23:43:25,903 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 23:43:25,904 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 23:43:25,904 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 23:43:25,904 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 23:43:25,905 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 23:43:25,905 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-09 23:43:25,905 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-09 23:43:25,905 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 23:43:39,339 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-09 23:43:39,678 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:43:39,843 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-09 23:43:40,017 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:43:40,187 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:43:40,354 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:43:40,520 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:43:40,521 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-09 23:43:40,521 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 23:43:40,521 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 23:43:40,521 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 23:43:41,709 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 23:43:42,936 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 23:43:42,936 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 23:43:43,101 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 23:43:43,368 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 23:43:43,368 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 23:43:43,368 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 23:43:51,686 - test_additional_rstp - INFO - === 步骤1: 验证分布式BPDU生成 ===
2025-09-09 23:43:51,692 - test_additional_rstp - INFO - 检测到网桥接口: ['18:', '26:']
2025-09-09 23:43:51,692 - test_additional_rstp - INFO - 在接口 18: 上捕获BPDU...
2025-09-09 23:43:51,693 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: 18:, 数量: 10)
2025-09-09 23:43:51,770 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-09 23:43:51,771 - test_additional_rstp - WARNING - 在 18: 上未捕获到BPDU
2025-09-09 23:43:51,771 - test_additional_rstp - INFO - 在接口 26: 上捕获BPDU...
2025-09-09 23:43:51,771 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: 26:, 数量: 10)
2025-09-09 23:43:51,838 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-09 23:43:51,839 - test_additional_rstp - WARNING - 在 26: 上未捕获到BPDU
2025-09-09 23:43:51,839 - test_additional_rstp - INFO - 总共捕获 0 个BPDU，来自 0 个不同源
2025-09-09 23:43:51,839 - test_additional_rstp - WARNING - 未检测到BPDU传播
2025-09-09 23:43:51,839 - test_additional_rstp - INFO - BPDU传播和保活机制测试完成
2025-09-09 23:43:51,840 - RSTPTest - INFO - 测试完成: test_bpdu_propagation_and_keepalive (耗时: 46.22秒)
2025-09-09 23:43:51,840 - RSTPTest - INFO - ============================================================

2025-09-09 23:43:51,842 - RSTPTest - INFO - ============================================================
2025-09-09 23:43:51,842 - RSTPTest - INFO - 开始测试: test_disabled_port_exclusion_enhanced
2025-09-09 23:43:51,842 - RSTPTest - INFO - ============================================================
2025-09-09 23:43:51,843 - test_additional_rstp - INFO - 开始增强的禁用端口排除测试
2025-09-09 23:43:51,843 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 23:43:51,843 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 23:43:51,843 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 23:43:51,843 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 23:43:51,844 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 23:43:51,844 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 23:43:51,844 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 23:43:51,844 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 23:43:52,336 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 23:43:52,337 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 23:43:53,540 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 23:43:53,541 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 23:43:53,541 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 23:43:53,541 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 23:43:53,997 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 23:43:54,477 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 23:43:54,478 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 23:43:54,581 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 23:43:54,678 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 23:43:54,678 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 23:43:54,678 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 23:43:54,679 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 23:43:54,679 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 23:43:54,679 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-09 23:43:54,679 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-09 23:43:54,680 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 23:43:55,178 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-09 23:43:55,521 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:43:55,692 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-09 23:43:55,864 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:43:56,041 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:43:56,207 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:43:56,379 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:43:56,379 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-09 23:43:56,379 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 23:43:56,380 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 23:43:56,380 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 23:43:57,564 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 23:43:58,730 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 23:43:58,731 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 23:43:58,900 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 23:43:59,165 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 23:43:59,165 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 23:43:59,165 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 23:43:59,165 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 23:43:59,166 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 23:43:59,166 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-09 23:43:59,166 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-09 23:43:59,166 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 23:43:59,675 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-09 23:44:00,016 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:44:00,184 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-09 23:44:00,357 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:44:00,522 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:44:00,688 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:44:00,860 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:44:00,860 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-09 23:44:00,861 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 23:44:00,861 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 23:44:00,861 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 23:44:02,218 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 23:44:03,632 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 23:44:03,633 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 23:44:03,808 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 23:44:04,076 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 23:44:04,076 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 23:44:04,076 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 23:44:09,524 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:44:09,686 - test_additional_rstp - INFO - 初始活动端口数量: 0
2025-09-09 23:44:09,688 - RSTPTest - INFO - 测试完成: test_disabled_port_exclusion_enhanced (耗时: 17.85秒)
2025-09-09 23:44:09,688 - RSTPTest - INFO - ============================================================

2025-09-09 23:44:09,688 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 23:44:09,689 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 23:44:09,689 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 23:44:09,823 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 23:44:09,823 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 23:44:09,949 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 23:44:09,950 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 23:44:10,097 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 23:44:10,097 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 23:44:10,098 - RSTPTest - INFO - ============================================================
2025-09-09 23:44:10,098 - RSTPTest - INFO - 开始测试: test_proposal_agreement_handshake
2025-09-09 23:44:10,098 - RSTPTest - INFO - ============================================================
2025-09-09 23:44:10,099 - test_advanced_rstp_mechanisms - INFO - 开始测试RSTP Proposal/Agreement握手机制
2025-09-09 23:44:10,100 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 23:44:10,100 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 23:44:10,100 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 23:44:10,100 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 23:44:10,100 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 23:44:10,100 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 23:44:10,101 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-09 23:44:10,106 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-09 23:44:10,162 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-09 23:44:10,163 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-09 23:44:10,163 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 23:44:10,163 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 23:44:10,668 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 23:44:10,668 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 23:44:11,727 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 23:44:11,727 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 23:44:11,728 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 23:44:11,728 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 23:44:12,190 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 23:44:12,681 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 23:44:12,682 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 23:44:12,790 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 23:44:12,893 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 23:44:12,893 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 23:44:12,893 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 23:44:12,894 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 23:44:12,894 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 23:44:12,894 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 23:44:12,894 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 23:44:12,902 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 23:44:12,903 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 23:44:13,025 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-09 23:44:13,025 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-09 23:44:13,026 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-09 23:44:13,026 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-09 23:44:13,026 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 23:44:13,561 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-09 23:44:13,897 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:44:14,061 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-09 23:44:14,227 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:44:14,400 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:44:14,567 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:44:14,742 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:44:14,742 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-09 23:44:14,742 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 23:44:14,743 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 23:44:14,743 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 23:44:15,919 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 23:44:17,522 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 23:44:17,523 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 23:44:17,690 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 23:44:17,956 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 23:44:17,957 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 23:44:17,957 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 23:44:17,957 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 23:44:17,957 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 23:44:17,958 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 23:44:17,958 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 23:44:17,965 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 23:44:17,965 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 23:44:18,087 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-09 23:44:18,088 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-09 23:44:18,088 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-09 23:44:18,088 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-09 23:44:18,088 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 23:44:18,620 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-09 23:44:18,960 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:44:19,134 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-09 23:44:19,302 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:44:19,471 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:44:19,642 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:44:19,817 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:44:19,817 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-09 23:44:19,817 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 23:44:19,818 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 23:44:19,818 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 23:44:20,998 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 23:44:22,227 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 23:44:22,228 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 23:44:22,396 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 23:44:22,666 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 23:44:22,667 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 23:44:22,667 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 23:44:27,668 - test_advanced_rstp_mechanisms - INFO - 开始在eth0上捕获BPDU
2025-09-09 23:44:27,668 - test_advanced_rstp_mechanisms - INFO - 触发拓扑变更...
2025-09-09 23:44:33,930 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: eth0, 数量: 20)
2025-09-09 23:44:33,970 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-09 23:44:33,970 - test_advanced_rstp_mechanisms - INFO - 捕获到0个BPDU数据包
2025-09-09 23:44:33,970 - test_advanced_rstp_mechanisms - WARNING - 未能捕获到完整的BPDU握手序列，可能是环境限制
2025-09-09 23:44:33,971 - test_advanced_rstp_mechanisms - INFO - 改为验证网络收敛状态...
2025-09-09 23:44:34,247 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:44:34,400 - test_advanced_rstp_mechanisms - INFO - ✓ 网络收敛正常，存在根端口
2025-09-09 23:44:36,402 - test_advanced_rstp_mechanisms - INFO - RSTP Proposal/Agreement握手机制测试通过
2025-09-09 23:44:36,403 - RSTPTest - INFO - 测试完成: test_proposal_agreement_handshake (耗时: 26.30秒)
2025-09-09 23:44:36,403 - RSTPTest - INFO - ============================================================

2025-09-09 23:44:36,404 - RSTPTest - INFO - ============================================================
2025-09-09 23:44:36,405 - RSTPTest - INFO - 开始测试: test_tcn_topology_change_notification
2025-09-09 23:44:36,405 - RSTPTest - INFO - ============================================================
2025-09-09 23:44:36,405 - test_advanced_rstp_mechanisms - INFO - 开始测试TCN拓扑变更通知机制
2025-09-09 23:44:36,405 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 23:44:36,405 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 23:44:36,406 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 23:44:36,406 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 23:44:36,406 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 23:44:36,406 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 23:44:36,406 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 23:44:36,406 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 23:44:36,884 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 23:44:36,884 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 23:44:37,932 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 23:44:37,932 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 23:44:37,932 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 23:44:37,932 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 23:44:38,385 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 23:44:38,857 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 23:44:38,857 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 23:44:38,960 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 23:44:39,056 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 23:44:39,057 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 23:44:39,057 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 23:44:39,057 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 23:44:39,057 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 23:44:39,058 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-09 23:44:39,058 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-09 23:44:39,058 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 23:44:39,547 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-09 23:44:39,881 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:44:40,051 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-09 23:44:40,216 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:44:40,381 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:44:40,551 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:44:40,714 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:44:40,714 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-09 23:44:40,714 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 23:44:40,715 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 23:44:40,715 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 23:44:41,917 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 23:44:43,106 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 23:44:43,106 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 23:44:43,276 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 23:44:43,544 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 23:44:43,544 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 23:44:43,544 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 23:44:43,544 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 23:44:43,544 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 23:44:43,545 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-09 23:44:43,545 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-09 23:44:43,545 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 23:44:44,040 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-09 23:44:44,371 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:44:44,536 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-09 23:44:44,701 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:44:44,867 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:44:45,036 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:44:45,206 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:44:45,206 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-09 23:44:45,206 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 23:44:45,206 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 23:44:45,207 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 23:44:46,385 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 23:44:47,605 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 23:44:47,605 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 23:44:47,774 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 23:44:48,040 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 23:44:48,040 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 23:44:48,040 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 23:44:58,340 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-09 23:44:58,509 - test_advanced_rstp_mechanisms - INFO - 初始网桥端口数量: 3
2025-09-09 23:44:58,509 - test_advanced_rstp_mechanisms - INFO - 触发拓扑变更：临时禁用/启用端口
2025-09-09 23:44:58,663 - test_advanced_rstp_mechanisms - INFO - 初始TC计数: 0
2025-09-09 23:45:06,947 - test_advanced_rstp_mechanisms - INFO - 变更后TC计数: 0
2025-09-09 23:45:06,948 - test_advanced_rstp_mechanisms - INFO - 拓扑变更可能未被检测到，这可能是正常的（取决于实现）
2025-09-09 23:45:07,247 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-09 23:45:07,404 - test_advanced_rstp_mechanisms - INFO - 最终网桥端口数量: 3
2025-09-09 23:45:07,559 - test_advanced_rstp_mechanisms - INFO - 当前MAC地址表老化时间: 300秒
2025-09-09 23:45:07,559 - test_advanced_rstp_mechanisms - WARNING - MAC地址表老化时间(300秒)未缩短，可能是实现差异
2025-09-09 23:45:07,560 - test_advanced_rstp_mechanisms - INFO - TCN拓扑变更通知机制测试通过 - 使用安全的端口状态变更方式
2025-09-09 23:45:07,560 - RSTPTest - INFO - 测试完成: test_tcn_topology_change_notification (耗时: 31.16秒)
2025-09-09 23:45:07,560 - RSTPTest - INFO - ============================================================

2025-09-09 23:45:07,562 - RSTPTest - INFO - ============================================================
2025-09-09 23:45:07,562 - RSTPTest - INFO - 开始测试: test_edge_port_behavior
2025-09-09 23:45:07,562 - RSTPTest - INFO - ============================================================
2025-09-09 23:45:07,563 - test_advanced_rstp_mechanisms - INFO - 开始测试边缘端口行为
2025-09-09 23:45:07,563 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 23:45:07,563 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 23:45:07,563 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 23:45:07,563 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 23:45:07,564 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 23:45:07,564 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 23:45:07,564 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 23:45:07,564 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 23:45:08,075 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 23:45:08,075 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 23:45:09,117 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 23:45:09,117 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 23:45:09,117 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 23:45:09,117 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 23:45:09,577 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 23:45:10,063 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 23:45:10,064 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 23:45:10,167 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 23:45:10,261 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 23:45:10,261 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 23:45:10,261 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 23:45:10,261 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 23:45:10,262 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 23:45:10,262 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-09 23:45:10,262 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-09 23:45:10,262 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 23:45:10,758 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-09 23:45:11,119 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:45:11,285 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-09 23:45:11,452 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:45:11,623 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:45:11,798 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:45:11,963 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:45:11,964 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-09 23:45:11,964 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 23:45:11,964 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 23:45:11,964 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 23:45:13,148 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 23:45:14,332 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 23:45:14,332 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 23:45:14,504 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 23:45:14,769 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 23:45:14,770 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 23:45:14,770 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 23:45:14,770 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 23:45:14,770 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 23:45:14,771 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-09 23:45:14,771 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-09 23:45:14,771 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 23:45:15,256 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-09 23:45:15,600 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:45:15,764 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-09 23:45:15,937 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:45:16,101 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:45:16,266 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:45:16,431 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:45:16,432 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-09 23:45:16,432 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 23:45:16,432 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 23:45:16,432 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 23:45:17,631 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 23:45:18,856 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 23:45:18,856 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 23:45:19,027 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 23:45:19,294 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 23:45:19,295 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 23:45:19,295 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 23:45:25,799 - test_advanced_rstp_mechanisms - INFO - 可用端口: ['enp1s0']
2025-09-09 23:45:25,799 - test_advanced_rstp_mechanisms - INFO - 选择端口enp1s0作为边缘端口测试
2025-09-09 23:45:25,907 - test_advanced_rstp_mechanisms - INFO - 测试边缘端口立即转发特性
2025-09-09 23:45:28,807 - test_advanced_rstp_mechanisms - INFO - 边缘端口状态转换时间: 2.75秒
2025-09-09 23:45:28,807 - test_advanced_rstp_mechanisms - INFO - ✓ 边缘端口转换时间合理
2025-09-09 23:45:28,915 - test_advanced_rstp_mechanisms - INFO - ✓ 边缘端口状态变化未产生TCN
2025-09-09 23:45:28,916 - test_advanced_rstp_mechanisms - INFO - 测试边缘端口收到BPDU后的行为
2025-09-09 23:45:29,071 - test_advanced_rstp_mechanisms - INFO - 边缘端口状态: 1
1
normal
2025-09-09 23:45:29,072 - test_advanced_rstp_mechanisms - INFO - 边缘端口行为测试通过
2025-09-09 23:45:29,073 - RSTPTest - INFO - 测试完成: test_edge_port_behavior (耗时: 21.51秒)
2025-09-09 23:45:29,073 - RSTPTest - INFO - ============================================================

2025-09-09 23:45:29,074 - RSTPTest - INFO - ============================================================
2025-09-09 23:45:29,074 - RSTPTest - INFO - 开始测试: test_shared_vs_point_to_point_links
2025-09-09 23:45:29,074 - RSTPTest - INFO - ============================================================
2025-09-09 23:45:29,075 - test_advanced_rstp_mechanisms - INFO - 开始测试不同链路类型的行为差异
2025-09-09 23:45:29,075 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 23:45:29,075 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 23:45:29,075 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 23:45:29,076 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 23:45:29,076 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 23:45:29,076 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 23:45:29,076 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 23:45:29,076 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 23:45:29,606 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 23:45:29,606 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 23:45:30,631 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 23:45:30,631 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 23:45:30,631 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 23:45:30,632 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 23:45:31,093 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 23:45:31,572 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 23:45:31,573 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 23:45:31,677 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 23:45:31,772 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 23:45:31,773 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 23:45:31,773 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 23:45:31,773 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 23:45:31,773 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 23:45:31,774 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-09 23:45:31,774 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-09 23:45:31,774 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 23:45:32,261 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-09 23:45:32,593 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:45:32,760 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-09 23:45:32,926 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:45:33,092 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:45:33,262 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:45:33,427 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:45:33,428 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-09 23:45:33,428 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 23:45:33,428 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 23:45:33,428 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 23:45:34,607 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 23:45:35,794 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 23:45:35,795 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 23:45:35,971 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 23:45:36,239 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 23:45:36,239 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 23:45:36,240 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 23:45:36,240 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 23:45:36,240 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 23:45:36,240 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-09 23:45:36,241 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-09 23:45:36,241 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 23:45:36,746 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-09 23:45:37,080 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:45:37,253 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-09 23:45:37,422 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:45:37,594 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:45:37,763 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:45:37,935 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:45:37,936 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-09 23:45:37,936 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 23:45:37,936 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 23:45:37,936 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 23:45:39,147 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 23:45:40,373 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 23:45:40,374 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 23:45:40,542 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 23:45:40,812 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 23:45:40,813 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 23:45:40,813 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 23:45:45,929 - test_advanced_rstp_mechanisms - INFO - 检测到的链路类型: {}
2025-09-09 23:45:45,930 - test_advanced_rstp_mechanisms - INFO - 测试点对点链路收敛性能
2025-09-09 23:45:49,903 - test_advanced_rstp_mechanisms - INFO - 收敛时间: 3.97秒
2025-09-09 23:45:49,903 - test_advanced_rstp_mechanisms - INFO - 验证链路类型识别
2025-09-09 23:45:49,904 - test_advanced_rstp_mechanisms - INFO - 不同链路类型行为差异测试通过
2025-09-09 23:45:49,904 - RSTPTest - INFO - 测试完成: test_shared_vs_point_to_point_links (耗时: 20.83秒)
2025-09-09 23:45:49,905 - RSTPTest - INFO - ============================================================

2025-09-09 23:45:49,905 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 23:45:49,905 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 23:45:49,906 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 23:45:50,041 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 23:45:50,041 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 23:45:50,160 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 23:45:50,160 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 23:45:50,295 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 23:45:50,295 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 23:45:50,296 - RSTPTest - INFO - ============================================================
2025-09-09 23:45:50,296 - RSTPTest - INFO - 开始测试: test_backup_port_concept_verification
2025-09-09 23:45:50,296 - RSTPTest - INFO - ============================================================
2025-09-09 23:45:50,297 - test_backup_port_simulation - INFO - 开始备份端口概念验证测试
2025-09-09 23:45:50,297 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 23:45:50,297 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 23:45:50,297 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 23:45:50,297 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 23:45:50,298 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 23:45:50,298 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 23:45:50,298 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-09 23:45:50,303 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-09 23:45:50,360 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-09 23:45:50,360 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-09 23:45:50,360 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 23:45:50,360 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 23:45:50,874 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 23:45:50,874 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 23:45:51,914 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 23:45:51,914 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 23:45:51,914 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 23:45:51,915 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 23:45:52,372 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 23:45:52,848 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 23:45:52,848 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 23:45:52,954 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 23:45:53,052 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 23:45:53,053 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 23:45:53,053 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 23:45:53,053 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 23:45:53,053 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 23:45:53,053 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 23:45:53,054 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 23:45:53,061 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 23:45:53,062 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 23:45:53,183 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-09 23:45:53,184 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-09 23:45:53,184 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-09 23:45:53,184 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-09 23:45:53,184 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 23:45:53,716 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-09 23:45:54,055 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:45:54,222 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-09 23:45:54,390 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:45:54,558 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:45:54,722 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:45:54,885 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:45:54,885 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-09 23:45:54,886 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 23:45:54,886 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 23:45:54,886 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 23:45:56,090 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 23:45:57,284 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 23:45:57,285 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 23:45:57,453 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 23:45:57,723 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 23:45:57,724 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 23:45:57,724 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 23:45:57,724 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 23:45:57,724 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 23:45:57,724 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 23:45:57,725 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 23:45:57,733 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 23:45:57,733 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 23:45:57,852 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-09 23:45:57,853 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-09 23:45:57,853 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-09 23:45:57,853 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-09 23:45:57,853 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 23:45:58,381 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-09 23:45:58,714 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:45:58,888 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-09 23:45:59,051 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:45:59,220 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:45:59,388 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:45:59,553 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:45:59,554 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-09 23:45:59,554 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 23:45:59,554 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 23:45:59,554 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 23:46:00,730 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 23:46:01,957 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 23:46:01,957 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 23:46:02,129 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 23:46:02,391 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 23:46:02,391 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 23:46:02,391 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 23:46:12,645 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:46:12,803 - test_backup_port_simulation - INFO - === 当前端口状态 ===
2025-09-09 23:46:12,804 - test_backup_port_simulation - INFO - 端口 eth0: 角色=root, 状态=disabled
2025-09-09 23:46:12,804 - test_backup_port_simulation - INFO - 端口 eth2: 角色=unknown, 状态=disabled
2025-09-09 23:46:12,804 - test_backup_port_simulation - INFO - 端口 eth3: 角色=unknown, 状态=disabled
2025-09-09 23:46:12,804 - test_backup_port_simulation - INFO - ⚠ 在当前点对点拓扑中未检测到备份端口（符合预期）
2025-09-09 23:46:12,804 - test_backup_port_simulation - INFO - 备份端口通常出现在共享介质网段中，当前测试环境为点对点链路
2025-09-09 23:46:12,805 - test_backup_port_simulation - INFO - 端口角色分布: {}
2025-09-09 23:46:12,805 - test_backup_port_simulation - INFO - === RSTP端口角色覆盖分析 ===
2025-09-09 23:46:12,805 - test_backup_port_simulation - INFO - - root端口: 未检测到
2025-09-09 23:46:12,806 - test_backup_port_simulation - INFO - - designated端口: 未检测到
2025-09-09 23:46:12,806 - test_backup_port_simulation - INFO - - alternate端口: 未检测到
2025-09-09 23:46:12,806 - test_backup_port_simulation - INFO - - backup端口: 未检测到（在点对点拓扑中为正常现象）
2025-09-09 23:46:12,806 - test_backup_port_simulation - INFO - 备份端口概念验证测试完成
2025-09-09 23:46:12,807 - RSTPTest - INFO - 测试完成: test_backup_port_concept_verification (耗时: 22.51秒)
2025-09-09 23:46:12,808 - RSTPTest - INFO - ============================================================

2025-09-09 23:46:12,809 - RSTPTest - INFO - ============================================================
2025-09-09 23:46:12,809 - RSTPTest - INFO - 开始测试: test_shared_medium_simulation_attempt
2025-09-09 23:46:12,810 - RSTPTest - INFO - ============================================================
2025-09-09 23:46:12,810 - test_backup_port_simulation - INFO - 开始共享介质模拟尝试
2025-09-09 23:46:12,810 - test_backup_port_simulation - INFO - === 尝试创建共享介质模拟场景 ===
2025-09-09 23:46:12,811 - test_backup_port_simulation - INFO - 创建中心交换机模拟共享介质...
2025-09-09 23:46:12,811 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 23:46:12,811 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 23:46:12,811 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 23:46:12,811 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 23:46:12,812 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 23:46:12,812 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 23:46:12,812 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 23:46:12,812 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 23:46:13,339 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 23:46:13,339 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 23:46:14,394 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 23:46:14,395 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 23:46:14,395 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 23:46:14,395 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 23:46:14,875 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 23:46:15,362 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 23:46:15,363 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 23:46:15,475 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 23:46:15,579 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 23:46:15,580 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 23:46:15,580 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 23:46:15,580 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 23:46:15,580 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 23:46:15,581 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-09 23:46:15,581 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-09 23:46:15,581 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 23:46:16,075 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-09 23:46:16,412 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:46:16,584 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-09 23:46:16,755 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:46:16,921 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:46:17,086 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:46:17,254 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:46:17,254 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-09 23:46:17,255 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 23:46:17,255 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 23:46:17,255 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 23:46:18,421 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 23:46:19,598 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 23:46:19,598 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 23:46:19,765 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 23:46:20,035 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 23:46:20,035 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 23:46:20,035 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 23:46:20,035 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 23:46:20,036 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 23:46:20,036 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-09 23:46:20,036 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-09 23:46:20,036 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 23:46:20,535 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-09 23:46:20,868 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:46:21,035 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-09 23:46:21,203 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:46:21,369 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:46:21,534 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:46:21,702 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:46:21,702 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-09 23:46:21,702 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 23:46:21,702 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 23:46:21,703 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 23:46:22,897 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 23:46:24,135 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 23:46:24,136 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 23:46:24,308 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 23:46:24,594 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 23:46:24,594 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 23:46:24,595 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 23:46:34,865 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:46:35,027 - test_backup_port_simulation - INFO - === 分析当前端口配置 ===
2025-09-09 23:46:35,028 - test_backup_port_simulation - INFO - ⚠ 未检测到备份端口
2025-09-09 23:46:35,028 - test_backup_port_simulation - INFO - 这在当前测试环境中是正常的，因为缺乏真正的共享介质
2025-09-09 23:46:35,028 - test_backup_port_simulation - INFO - 共享介质模拟尝试完成
2025-09-09 23:46:35,029 - RSTPTest - INFO - 测试完成: test_shared_medium_simulation_attempt (耗时: 22.22秒)
2025-09-09 23:46:35,029 - RSTPTest - INFO - ============================================================

2025-09-09 23:46:35,031 - RSTPTest - INFO - ============================================================
2025-09-09 23:46:35,031 - RSTPTest - INFO - 开始测试: test_backup_port_documentation_verification
2025-09-09 23:46:35,031 - RSTPTest - INFO - ============================================================
2025-09-09 23:46:35,032 - test_backup_port_simulation - INFO - 开始备份端口文档验证
2025-09-09 23:46:35,032 - test_backup_port_simulation - INFO - ✓ PortRole.BACKUP 存在
2025-09-09 23:46:35,032 - test_backup_port_simulation - INFO - === 备份端口理论特性验证 ===
2025-09-09 23:46:35,032 - test_backup_port_simulation - INFO - purpose: 为共享介质网段提供冗余
2025-09-09 23:46:35,032 - test_backup_port_simulation - INFO - difference_from_alternate: 备份端口是同一交换机上指定端口的备份，而备用端口是不同交换机提供的路径
2025-09-09 23:46:35,033 - test_backup_port_simulation - INFO - state: Discarding
2025-09-09 23:46:35,033 - test_backup_port_simulation - INFO - scenario: 出现在连接到集线器或共享介质的场景中
2025-09-09 23:46:35,033 - test_backup_port_simulation - INFO - fast_transition: 当对应的指定端口失效时，可以快速转换为指定端口
2025-09-09 23:46:35,033 - test_backup_port_simulation - INFO - === 端口角色对比 ===
2025-09-09 23:46:35,033 - test_backup_port_simulation - INFO - root: 连接到根桥的最佳路径
2025-09-09 23:46:35,034 - test_backup_port_simulation - INFO - designated: 为网段提供转发服务
2025-09-09 23:46:35,034 - test_backup_port_simulation - INFO - alternate: 提供到根桥的备用路径（来自其他交换机）
2025-09-09 23:46:35,034 - test_backup_port_simulation - INFO - backup: 同一交换机上指定端口的备份（共享介质场景）
2025-09-09 23:46:35,034 - test_backup_port_simulation - INFO - === 测试覆盖率分析 ===
2025-09-09 23:46:35,034 - test_backup_port_simulation - INFO - 已覆盖: Root Port, Designated Port, Alternate Port, Disabled Port
2025-09-09 23:46:35,034 - test_backup_port_simulation - INFO - 部分覆盖: Backup Port (概念验证)
2025-09-09 23:46:35,035 - test_backup_port_simulation - INFO - 覆盖限制: 测试框架无法创建真正的共享介质拓扑
2025-09-09 23:46:35,035 - test_backup_port_simulation - INFO - 建议: 在实际部署环境中使用集线器或配置交换机共享模式进行完整测试
2025-09-09 23:46:35,035 - test_backup_port_simulation - INFO - 备份端口文档验证完成
2025-09-09 23:46:35,036 - RSTPTest - INFO - 测试完成: test_backup_port_documentation_verification (耗时: 0.00秒)
2025-09-09 23:46:35,036 - RSTPTest - INFO - ============================================================

2025-09-09 23:46:35,036 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 23:46:35,037 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 23:46:35,037 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 23:46:35,173 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 23:46:35,173 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 23:46:35,305 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 23:46:35,305 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 23:46:35,438 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 23:46:35,438 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 23:46:35,439 - RSTPTest - INFO - ============================================================
2025-09-09 23:46:35,439 - RSTPTest - INFO - 开始测试: test_direct_link_failure
2025-09-09 23:46:35,439 - RSTPTest - INFO - ============================================================
2025-09-09 23:46:35,440 - test_convergence - INFO - 开始直接链路故障测试
2025-09-09 23:46:35,440 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 23:46:35,440 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 23:46:35,440 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 23:46:35,440 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 23:46:35,441 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 23:46:35,441 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 23:46:35,441 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-09 23:46:35,446 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-09 23:46:35,504 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-09 23:46:35,505 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-09 23:46:35,505 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 23:46:35,505 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 23:46:36,038 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 23:46:36,038 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 23:46:37,086 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 23:46:37,087 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 23:46:37,087 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 23:46:37,087 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 23:46:37,547 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 23:46:38,026 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 23:46:38,026 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 23:46:38,131 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 23:46:38,227 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 23:46:38,227 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 23:46:38,227 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 23:46:38,227 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 23:46:38,228 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 23:46:38,228 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 23:46:38,228 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 23:46:38,236 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 23:46:38,236 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 23:46:38,373 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-09 23:46:38,374 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-09 23:46:38,374 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-09 23:46:38,374 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-09 23:46:38,374 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 23:46:38,906 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-09 23:46:39,240 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:46:39,406 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-09 23:46:39,569 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:46:39,738 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:46:39,907 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:46:40,074 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:46:40,074 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-09 23:46:40,074 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 23:46:40,074 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 23:46:40,075 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 23:46:41,284 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 23:46:42,475 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 23:46:42,476 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 23:46:42,647 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 23:46:42,912 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 23:46:42,913 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 23:46:42,913 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 23:46:42,913 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 23:46:42,914 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 23:46:42,914 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 23:46:42,914 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 23:46:42,921 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 23:46:42,922 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 23:46:43,047 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-09 23:46:43,047 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-09 23:46:43,047 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-09 23:46:43,047 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-09 23:46:43,048 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 23:46:43,593 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-09 23:46:43,938 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:46:44,118 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-09 23:46:44,285 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:46:44,456 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:46:44,627 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:46:44,796 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:46:44,797 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-09 23:46:44,797 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 23:46:44,797 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 23:46:44,797 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 23:46:45,974 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 23:46:47,202 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 23:46:47,203 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 23:46:47,371 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 23:46:47,640 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 23:46:47,640 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 23:46:47,641 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 23:46:47,950 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 23:46:48,206 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:46:49,245 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.30秒
2025-09-09 23:46:49,246 - test_convergence - INFO - 初始收敛时间: 1.30秒
2025-09-09 23:46:49,502 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:46:49,659 - test_convergence - INFO - DUT的Root Port: eth2
2025-09-09 23:46:49,660 - FaultInjector_DUT - INFO - 断开链路: eth2
2025-09-09 23:46:49,925 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth2 (code=1)，将在逻辑上标记为已断开
2025-09-09 23:46:49,926 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 23:46:50,221 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:46:51,205 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.28秒
2025-09-09 23:46:51,457 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:46:51,972 - RSTPTest - INFO - 测试完成: test_direct_link_failure (耗时: 16.53秒)
2025-09-09 23:46:51,973 - RSTPTest - INFO - ============================================================

2025-09-09 23:46:52,016 - RSTPTest - INFO - ============================================================
2025-09-09 23:46:52,017 - RSTPTest - INFO - 开始测试: test_multiple_link_failures
2025-09-09 23:46:52,017 - RSTPTest - INFO - ============================================================
2025-09-09 23:46:52,017 - test_convergence - INFO - 开始多重链路故障测试
2025-09-09 23:46:52,018 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 23:46:52,018 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 23:46:52,018 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 23:46:52,018 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 23:46:52,018 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 23:46:52,018 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 23:46:52,018 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 23:46:52,019 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 23:46:52,497 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 23:46:52,497 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 23:46:53,535 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 23:46:53,535 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 23:46:53,536 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 23:46:53,536 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 23:46:53,994 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 23:46:54,474 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 23:46:54,475 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 23:46:54,578 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 23:46:54,674 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 23:46:54,674 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 23:46:54,674 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 23:46:54,675 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 23:46:54,675 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 23:46:54,675 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-09 23:46:54,675 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-09 23:46:54,675 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 23:46:55,165 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-09 23:46:55,501 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:46:55,671 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-09 23:46:55,845 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:46:56,016 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:46:56,190 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:46:56,359 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:46:56,359 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-09 23:46:56,359 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 23:46:56,359 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 23:46:56,360 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 23:46:57,582 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 23:46:58,776 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 23:46:58,777 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 23:46:58,948 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 23:46:59,213 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 23:46:59,214 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 23:46:59,214 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 23:46:59,214 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 23:46:59,214 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 23:46:59,215 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-09 23:46:59,215 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-09 23:46:59,215 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 23:46:59,709 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-09 23:47:00,045 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:47:00,204 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-09 23:47:00,367 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:47:00,538 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:47:00,707 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:47:00,871 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:47:00,871 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-09 23:47:00,872 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 23:47:00,872 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 23:47:00,872 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 23:47:02,047 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 23:47:03,259 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 23:47:03,260 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 23:47:03,429 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 23:47:03,696 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 23:47:03,696 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 23:47:03,696 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 23:47:03,697 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 23:47:03,949 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:47:04,926 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.23秒
2025-09-09 23:47:04,927 - test_convergence - INFO - 注入故障: eth0
2025-09-09 23:47:04,927 - FaultInjector_DUT - INFO - 断开链路: eth0
2025-09-09 23:47:05,145 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth0 (code=1)，将在逻辑上标记为已断开
2025-09-09 23:47:05,146 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 23:47:05,446 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:47:06,368 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.22秒
2025-09-09 23:47:06,368 - test_convergence - INFO - eth0故障收敛时间: 1.22秒
2025-09-09 23:47:08,369 - test_convergence - INFO - 注入故障: eth2
2025-09-09 23:47:08,369 - FaultInjector_DUT - INFO - 断开链路: eth2
2025-09-09 23:47:08,601 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth2 (code=1)，将在逻辑上标记为已断开
2025-09-09 23:47:08,602 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 23:47:08,905 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:47:09,843 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.24秒
2025-09-09 23:47:09,844 - test_convergence - INFO - eth2故障收敛时间: 1.24秒
2025-09-09 23:47:11,844 - FaultInjector_DUT - INFO - 恢复链路: eth0
2025-09-09 23:47:12,065 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth0 (code=1)，将在逻辑上标记为已恢复
2025-09-09 23:47:12,066 - FaultInjector_DUT - INFO - 恢复链路: eth2
2025-09-09 23:47:12,329 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth2 (code=1)，将在逻辑上标记为已恢复
2025-09-09 23:47:12,329 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 23:47:12,628 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:47:13,545 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.22秒
2025-09-09 23:47:13,545 - test_convergence - INFO - 最终恢复收敛时间: 1.22秒
2025-09-09 23:47:13,546 - test_convergence - INFO - 多重链路故障测试通过
2025-09-09 23:47:13,546 - RSTPTest - INFO - 测试完成: test_multiple_link_failures (耗时: 21.53秒)
2025-09-09 23:47:13,547 - RSTPTest - INFO - ============================================================

2025-09-09 23:47:13,548 - RSTPTest - INFO - ============================================================
2025-09-09 23:47:13,549 - RSTPTest - INFO - 开始测试: test_convergence_with_traffic
2025-09-09 23:47:13,549 - RSTPTest - INFO - ============================================================
2025-09-09 23:47:13,549 - test_convergence - INFO - 开始带流量的收敛测试
2025-09-09 23:47:13,550 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 23:47:13,550 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 23:47:13,550 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 23:47:13,550 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 23:47:13,551 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 23:47:13,551 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 23:47:13,551 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 23:47:13,551 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 23:47:14,053 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 23:47:14,053 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 23:47:15,458 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 23:47:15,458 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 23:47:15,458 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 23:47:15,458 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 23:47:15,918 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 23:47:16,404 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 23:47:16,404 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 23:47:16,507 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 23:47:16,602 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 23:47:16,603 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 23:47:16,603 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 23:47:16,603 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 23:47:16,603 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 23:47:16,604 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-09 23:47:16,604 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-09 23:47:16,604 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 23:47:17,097 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-09 23:47:17,430 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:47:17,600 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-09 23:47:17,768 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:47:17,931 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:47:18,103 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:47:18,271 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:47:18,272 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-09 23:47:18,272 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 23:47:18,272 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 23:47:18,273 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 23:47:19,447 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 23:47:20,623 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 23:47:20,624 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 23:47:20,797 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 23:47:21,063 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 23:47:21,064 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 23:47:21,064 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 23:47:21,064 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 23:47:21,064 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 23:47:21,064 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-09 23:47:21,064 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-09 23:47:21,065 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 23:47:21,567 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-09 23:47:21,904 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:47:22,061 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-09 23:47:22,227 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:47:22,399 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:47:22,566 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:47:22,734 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:47:22,734 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-09 23:47:22,734 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 23:47:22,735 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 23:47:22,735 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 23:47:23,928 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 23:47:25,143 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 23:47:25,143 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 23:47:25,314 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 23:47:25,580 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 23:47:25,581 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 23:47:25,581 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 23:47:31,693 - TrafficGenerator - INFO - 启动iperf3服务器: 192.168.184.131:5201
2025-09-09 23:47:33,771 - TrafficGenerator - ERROR - iperf3服务器启动失败
2025-09-09 23:47:36,695 - TrafficGenerator - INFO - 启动iperf3客户端: -> 192.168.184.131:5201
2025-09-09 23:47:36,695 - TrafficGenerator - INFO - iperf3客户端已启动 (udp, 100M)
2025-09-09 23:47:41,696 - FaultInjector_DUT - INFO - 断开链路: eth0
2025-09-09 23:47:41,916 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth0 (code=1)，将在逻辑上标记为已断开
2025-09-09 23:47:51,917 - test_convergence - INFO - 丢包数: 0
2025-09-09 23:47:51,918 - test_convergence - INFO - 估计中断时间: 0.000秒
2025-09-09 23:47:51,918 - TrafficGenerator - INFO - 停止流量生成
2025-09-09 23:47:53,983 - test_convergence - INFO - 带流量的收敛测试通过
2025-09-09 23:47:53,984 - RSTPTest - INFO - 测试完成: test_convergence_with_traffic (耗时: 40.44秒)
2025-09-09 23:47:53,984 - RSTPTest - INFO - ============================================================

2025-09-09 23:47:53,985 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 23:47:53,985 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 23:47:53,986 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 23:47:54,119 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 23:47:54,120 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 23:47:54,252 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 23:47:54,252 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 23:47:54,387 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 23:47:54,388 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 23:47:54,388 - RSTPTest - INFO - ============================================================
2025-09-09 23:47:54,389 - RSTPTest - INFO - 开始测试: test_backup_port_simulation
2025-09-09 23:47:54,389 - RSTPTest - INFO - ============================================================
2025-09-09 23:47:54,389 - test_enhanced_rstp_coverage - INFO - 开始备份端口模拟测试
2025-09-09 23:47:54,390 - test_enhanced_rstp_coverage - INFO - 创建模拟共享网段拓扑
2025-09-09 23:47:54,841 - test_enhanced_rstp_coverage - INFO - ✓ 创建连接: rstp0:dut_port1 <-> shared_segment:shared_port1
2025-09-09 23:47:55,198 - test_enhanced_rstp_coverage - INFO - ✓ 创建连接: rstp0:dut_port2 <-> shared_segment:shared_port2
2025-09-09 23:47:55,827 - test_enhanced_rstp_coverage - INFO - ✓ 创建远程交换机: remote_switch
2025-09-09 23:47:55,827 - test_enhanced_rstp_coverage - INFO - 等待RSTP收敛...
2025-09-09 23:48:11,085 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:48:11,241 - test_enhanced_rstp_coverage - INFO - DUT桥信息: BridgeInfo(bridge_id='', root_id='', root_port='eth0', root_path_cost=0, protocol_version='unknown', hello_time=0, forward_delay=0, max_age=0, topology_changes=0, ports={'eth0': PortInfo(name='eth0', role=<PortRole.ROOT: 'root'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth2': PortInfo(name='eth2', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth3': PortInfo(name='eth3', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')})
2025-09-09 23:48:11,242 - test_enhanced_rstp_coverage - INFO - 清理测试环境
2025-09-09 23:48:11,984 - test_enhanced_rstp_coverage - INFO - ✓ 备份端口模拟测试完成
2025-09-09 23:48:11,985 - RSTPTest - INFO - 测试完成: test_backup_port_simulation (耗时: 17.60秒)
2025-09-09 23:48:11,985 - RSTPTest - INFO - ============================================================

2025-09-09 23:48:11,986 - RSTPTest - INFO - ============================================================
2025-09-09 23:48:11,986 - RSTPTest - INFO - 开始测试: test_comprehensive_port_state_transitions
2025-09-09 23:48:11,987 - RSTPTest - INFO - ============================================================
2025-09-09 23:48:11,987 - test_enhanced_rstp_coverage - INFO - 开始全面端口状态转换测试
2025-09-09 23:48:11,988 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 23:48:11,988 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 23:48:11,988 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 23:48:11,988 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 23:48:11,988 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 23:48:11,988 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 23:48:11,989 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-09 23:48:12,033 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-09 23:48:12,090 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-09 23:48:12,090 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-09 23:48:12,090 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 23:48:12,091 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 23:48:12,616 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 23:48:12,616 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 23:48:13,649 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 23:48:13,649 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 23:48:13,650 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 23:48:13,650 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 23:48:14,109 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 23:48:14,635 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 23:48:14,635 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 23:48:14,743 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 23:48:14,850 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 23:48:14,850 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 23:48:14,850 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 23:48:14,850 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 23:48:14,851 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 23:48:14,851 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 23:48:14,851 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 23:48:14,859 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 23:48:14,859 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 23:48:14,982 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-09 23:48:14,982 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-09 23:48:14,982 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-09 23:48:14,983 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-09 23:48:14,983 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 23:48:15,516 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-09 23:48:15,852 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:48:16,023 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-09 23:48:16,200 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:48:16,366 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:48:16,535 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:48:16,696 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:48:16,697 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-09 23:48:16,697 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 23:48:16,697 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 23:48:16,697 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 23:48:17,881 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 23:48:19,123 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 23:48:19,124 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 23:48:19,300 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 23:48:19,570 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 23:48:19,570 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 23:48:19,571 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 23:48:19,571 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 23:48:19,571 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 23:48:19,571 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 23:48:19,572 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 23:48:19,579 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 23:48:19,579 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 23:48:19,701 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-09 23:48:19,702 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-09 23:48:19,702 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-09 23:48:19,702 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-09 23:48:19,702 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 23:48:20,233 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-09 23:48:20,574 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:48:20,740 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-09 23:48:20,909 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:48:21,081 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:48:21,250 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:48:21,411 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:48:21,411 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-09 23:48:21,412 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 23:48:21,412 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 23:48:21,412 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 23:48:22,592 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 23:48:23,805 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 23:48:23,805 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 23:48:23,976 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 23:48:24,244 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 23:48:24,245 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 23:48:24,245 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 23:48:24,449 - test_enhanced_rstp_coverage - INFO - 等待初始收敛...
2025-09-09 23:48:24,449 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 23:48:24,727 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:48:24,881 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.43秒
2025-09-09 23:48:25,175 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:48:25,350 - RSTPTest - INFO - 测试完成: test_comprehensive_port_state_transitions (耗时: 13.36秒)
2025-09-09 23:48:25,350 - RSTPTest - INFO - ============================================================

2025-09-09 23:48:25,352 - RSTPTest - INFO - ============================================================
2025-09-09 23:48:25,352 - RSTPTest - INFO - 开始测试: test_detailed_bpdu_analysis
2025-09-09 23:48:25,352 - RSTPTest - INFO - ============================================================
2025-09-09 23:48:25,353 - test_enhanced_rstp_coverage - INFO - 开始详细BPDU分析测试
2025-09-09 23:48:25,353 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 23:48:25,353 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 23:48:25,354 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 23:48:25,354 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 23:48:25,354 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 23:48:25,354 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 23:48:25,354 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 23:48:25,354 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 23:48:25,860 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 23:48:25,860 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 23:48:26,915 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 23:48:26,915 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 23:48:26,916 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 23:48:26,916 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 23:48:27,372 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 23:48:27,853 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 23:48:27,854 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 23:48:27,956 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 23:48:28,053 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 23:48:28,053 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 23:48:28,053 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 23:48:28,053 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 23:48:28,054 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 23:48:28,054 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-09 23:48:28,054 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-09 23:48:28,054 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 23:48:28,551 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-09 23:48:28,885 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:48:29,055 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-09 23:48:29,222 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:48:29,388 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:48:29,557 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:48:29,721 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:48:29,721 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-09 23:48:29,722 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 23:48:29,722 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 23:48:29,722 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 23:48:30,913 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 23:48:32,093 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 23:48:32,093 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 23:48:32,266 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 23:48:32,538 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 23:48:32,538 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 23:48:32,539 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 23:48:32,539 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 23:48:32,539 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 23:48:32,539 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-09 23:48:32,539 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-09 23:48:32,540 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 23:48:33,033 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-09 23:48:33,384 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:48:33,548 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-09 23:48:33,717 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:48:33,887 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:48:34,047 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:48:34,223 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:48:34,223 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-09 23:48:34,224 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 23:48:34,224 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 23:48:34,224 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 23:48:35,412 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 23:48:36,643 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 23:48:36,643 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 23:48:36,813 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 23:48:37,083 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 23:48:37,084 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 23:48:37,084 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 23:48:37,413 - test_enhanced_rstp_coverage - INFO - 等待RSTP收敛...
2025-09-09 23:48:37,414 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 23:48:37,664 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:48:37,821 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.41秒
2025-09-09 23:48:38,119 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:48:38,273 - test_enhanced_rstp_coverage - INFO - Hello Time: 0秒
2025-09-09 23:48:38,273 - test_enhanced_rstp_coverage - INFO - === 测试1: 验证分布式BPDU生成 ===
2025-09-09 23:48:38,274 - test_enhanced_rstp_coverage - INFO - 总共捕获0个BPDU，来自0个不同源
2025-09-09 23:48:38,290 - RSTPTest - INFO - 测试完成: test_detailed_bpdu_analysis (耗时: 12.94秒)
2025-09-09 23:48:38,290 - RSTPTest - INFO - ============================================================

2025-09-09 23:48:38,292 - RSTPTest - INFO - ============================================================
2025-09-09 23:48:38,292 - RSTPTest - INFO - 开始测试: test_topology_change_comprehensive
2025-09-09 23:48:38,293 - RSTPTest - INFO - ============================================================
2025-09-09 23:48:38,293 - test_enhanced_rstp_coverage - INFO - 开始全面拓扑变更测试
2025-09-09 23:48:38,293 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 23:48:38,294 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 23:48:38,294 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 23:48:38,294 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 23:48:38,294 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 23:48:38,294 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 23:48:38,295 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 23:48:38,295 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 23:48:38,792 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 23:48:38,792 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 23:48:39,834 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 23:48:39,835 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 23:48:39,835 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 23:48:39,835 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 23:48:40,293 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 23:48:40,772 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 23:48:40,772 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 23:48:40,876 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 23:48:40,972 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 23:48:40,973 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 23:48:40,973 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 23:48:40,973 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 23:48:40,973 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 23:48:40,974 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-09 23:48:40,974 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-09 23:48:40,974 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 23:48:41,486 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-09 23:48:41,823 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:48:41,992 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-09 23:48:42,159 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:48:42,325 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:48:42,493 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:48:42,656 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:48:42,656 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-09 23:48:42,656 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 23:48:42,656 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 23:48:42,656 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 23:48:43,844 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 23:48:45,036 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 23:48:45,036 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 23:48:45,203 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 23:48:45,468 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 23:48:45,469 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 23:48:45,469 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 23:48:45,469 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 23:48:45,470 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 23:48:45,470 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-09 23:48:45,470 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-09 23:48:45,470 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 23:48:45,962 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-09 23:48:46,310 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:48:46,476 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-09 23:48:46,652 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:48:46,820 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:48:46,992 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:48:47,157 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:48:47,158 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-09 23:48:47,158 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 23:48:47,158 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 23:48:47,158 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 23:48:48,332 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 23:48:49,553 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 23:48:49,553 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 23:48:49,722 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 23:48:49,993 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 23:48:49,993 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 23:48:49,993 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 23:48:50,192 - test_enhanced_rstp_coverage - INFO - 等待初始收敛...
2025-09-09 23:48:50,192 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 23:48:50,471 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:48:50,625 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.43秒
2025-09-09 23:48:50,923 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:48:51,384 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-09 23:48:51,542 - test_enhanced_rstp_coverage - INFO - 初始状态: DUT是根桥=True
2025-09-09 23:48:51,542 - test_enhanced_rstp_coverage - INFO - === 测试场景1: 根桥变更 ===
2025-09-09 23:48:51,542 - test_enhanced_rstp_coverage - INFO - === 测试场景2: 端口故障恢复 ===
2025-09-09 23:48:51,843 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:48:52,002 - test_enhanced_rstp_coverage - INFO - === 测试场景3: 端口优先级变更 ===
2025-09-09 23:48:52,300 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:48:52,458 - test_enhanced_rstp_coverage - WARNING - 未检测到明显的拓扑变更，可能是测试环境限制
2025-09-09 23:48:52,458 - test_enhanced_rstp_coverage - INFO - ✓ 全面拓扑变更测试完成
2025-09-09 23:48:52,459 - RSTPTest - INFO - 测试完成: test_topology_change_comprehensive (耗时: 14.17秒)
2025-09-09 23:48:52,459 - RSTPTest - INFO - ============================================================

2025-09-09 23:48:52,459 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 23:48:52,460 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 23:48:52,460 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 23:48:52,598 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 23:48:52,598 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 23:48:52,721 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 23:48:52,721 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 23:48:52,855 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 23:48:52,855 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 23:48:52,856 - RSTPTest - INFO - ============================================================
2025-09-09 23:48:52,856 - RSTPTest - INFO - 开始测试: test_rstp_reconvergence_no_switchover
2025-09-09 23:48:52,856 - RSTPTest - INFO - ============================================================
2025-09-09 23:48:52,857 - test_high_availability - INFO - 开始RSTP重构误判测试
2025-09-09 23:48:52,857 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 23:48:52,857 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 23:48:52,858 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 23:48:52,858 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 23:48:52,858 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 23:48:52,858 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 23:48:52,858 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-09 23:48:52,864 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-09 23:48:52,928 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-09 23:48:52,929 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-09 23:48:52,929 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 23:48:52,929 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 23:48:53,459 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 23:48:53,459 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 23:48:54,535 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 23:48:54,536 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 23:48:54,536 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 23:48:54,536 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 23:48:54,984 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 23:48:55,464 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 23:48:55,465 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 23:48:55,568 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 23:48:55,664 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 23:48:55,664 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 23:48:55,664 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 23:48:55,665 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 23:48:55,665 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 23:48:55,665 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 23:48:55,665 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 23:48:55,673 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 23:48:55,674 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 23:48:55,797 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-09 23:48:55,797 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-09 23:48:55,797 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-09 23:48:55,797 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-09 23:48:55,798 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 23:48:56,368 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-09 23:48:56,721 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:48:56,899 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-09 23:48:57,073 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:48:57,241 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:48:57,411 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:48:57,588 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:48:57,588 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-09 23:48:57,588 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 23:48:57,589 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 23:48:57,589 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 23:48:58,798 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 23:48:59,989 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 23:48:59,989 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 23:49:00,161 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 23:49:00,424 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 23:49:00,425 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 23:49:00,425 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 23:49:00,425 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 23:49:00,426 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 23:49:00,426 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 23:49:00,426 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 23:49:00,434 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 23:49:00,434 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 23:49:00,562 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-09 23:49:00,563 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-09 23:49:00,563 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-09 23:49:00,563 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-09 23:49:00,564 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 23:49:01,091 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-09 23:49:01,433 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:49:01,601 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-09 23:49:01,769 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:49:01,937 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:49:02,103 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:49:02,274 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:49:02,274 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-09 23:49:02,274 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 23:49:02,274 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 23:49:02,275 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 23:49:03,443 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 23:49:04,662 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 23:49:04,662 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 23:49:04,831 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 23:49:05,098 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 23:49:05,098 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 23:49:05,098 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 23:49:10,104 - test_high_availability - INFO - 初始HA状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-09 23:49:10,104 - test_high_availability - INFO - 在远端触发RSTP重构...
2025-09-09 23:49:10,105 - FaultInjector_TestNode2 - INFO - 断开链路: eth0
2025-09-09 23:49:10,276 - FaultInjector_TestNode2 - INFO - 链路已断开: eth0
2025-09-09 23:49:20,333 - test_high_availability - INFO - RSTP重构后HA状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-09 23:49:20,334 - FaultInjector_TestNode2 - INFO - 恢复链路: eth0
2025-09-09 23:49:20,468 - FaultInjector_TestNode2 - INFO - 链路已恢复: eth0
2025-09-09 23:49:20,468 - test_high_availability - INFO - RSTP重构误判测试完成
2025-09-09 23:49:20,469 - RSTPTest - INFO - 测试完成: test_rstp_reconvergence_no_switchover (耗时: 27.61秒)
2025-09-09 23:49:20,470 - RSTPTest - INFO - ============================================================

2025-09-09 23:49:20,471 - RSTPTest - INFO - ============================================================
2025-09-09 23:49:20,472 - RSTPTest - INFO - 开始测试: test_split_brain_scenario
2025-09-09 23:49:20,472 - RSTPTest - INFO - ============================================================
2025-09-09 23:49:20,472 - test_high_availability - INFO - 开始裂脑场景测试
2025-09-09 23:49:20,477 - test_high_availability - INFO - 初始状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-09 23:49:20,478 - test_high_availability - INFO - 断开同步链路: eth3
2025-09-09 23:49:20,478 - FaultInjector_DUT - INFO - 断开链路: eth3
2025-09-09 23:49:20,738 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth3 (code=1)，将在逻辑上标记为已断开
2025-09-09 23:49:30,739 - test_high_availability - WARNING - 裂脑测试需要访问两个控制器
2025-09-09 23:49:30,739 - FaultInjector_DUT - INFO - 恢复链路: eth3
2025-09-09 23:49:30,967 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth3 (code=1)，将在逻辑上标记为已恢复
2025-09-09 23:49:30,967 - test_high_availability - INFO - 裂脑场景测试完成
2025-09-09 23:49:30,968 - RSTPTest - INFO - 测试完成: test_split_brain_scenario (耗时: 10.50秒)
2025-09-09 23:49:30,968 - RSTPTest - INFO - ============================================================

2025-09-09 23:49:30,972 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 23:49:30,972 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 23:49:30,972 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 23:49:31,110 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 23:49:31,110 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 23:49:31,111 - RSTPTest - INFO - ============================================================
2025-09-09 23:49:31,111 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[12288]
2025-09-09 23:49:31,111 - RSTPTest - INFO - ============================================================
2025-09-09 23:49:31,112 - test_parameters - INFO - 测试网桥优先级: 12288
2025-09-09 23:49:32,676 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-09 23:49:34,784 - test_parameters - INFO - 从OVS配置读取到优先级: 12288
2025-09-09 23:49:34,785 - test_parameters - INFO - 优先级12288设置成功
2025-09-09 23:49:34,786 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[12288] (耗时: 3.67秒)
2025-09-09 23:49:34,786 - RSTPTest - INFO - ============================================================

2025-09-09 23:49:34,787 - RSTPTest - INFO - ============================================================
2025-09-09 23:49:34,787 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[16384]
2025-09-09 23:49:34,787 - RSTPTest - INFO - ============================================================
2025-09-09 23:49:34,788 - test_parameters - INFO - 测试网桥优先级: 16384
2025-09-09 23:49:36,335 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-09 23:49:38,443 - test_parameters - INFO - 从OVS配置读取到优先级: 16384
2025-09-09 23:49:38,443 - test_parameters - INFO - 优先级16384设置成功
2025-09-09 23:49:38,444 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[16384] (耗时: 3.66秒)
2025-09-09 23:49:38,444 - RSTPTest - INFO - ============================================================

2025-09-09 23:49:38,446 - RSTPTest - INFO - ============================================================
2025-09-09 23:49:38,446 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[32768]
2025-09-09 23:49:38,446 - RSTPTest - INFO - ============================================================
2025-09-09 23:49:38,447 - test_parameters - INFO - 测试网桥优先级: 32768
2025-09-09 23:49:39,992 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-09 23:49:42,099 - test_parameters - INFO - 从OVS配置读取到优先级: 32768
2025-09-09 23:49:42,099 - test_parameters - INFO - 优先级32768设置成功
2025-09-09 23:49:42,100 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[32768] (耗时: 3.65秒)
2025-09-09 23:49:42,100 - RSTPTest - INFO - ============================================================

2025-09-09 23:49:42,101 - RSTPTest - INFO - ============================================================
2025-09-09 23:49:42,102 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[61440]
2025-09-09 23:49:42,102 - RSTPTest - INFO - ============================================================
2025-09-09 23:49:42,103 - test_parameters - INFO - 测试网桥优先级: 61440
2025-09-09 23:49:43,648 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-09 23:49:45,759 - test_parameters - INFO - 从OVS配置读取到优先级: 61440
2025-09-09 23:49:45,760 - test_parameters - INFO - 优先级61440设置成功
2025-09-09 23:49:45,761 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[61440] (耗时: 3.66秒)
2025-09-09 23:49:45,761 - RSTPTest - INFO - ============================================================

2025-09-09 23:49:45,762 - RSTPTest - INFO - ============================================================
2025-09-09 23:49:45,762 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[4097]
2025-09-09 23:49:45,763 - RSTPTest - INFO - ============================================================
2025-09-09 23:49:45,763 - test_parameters - INFO - 测试无效优先级: 4097
2025-09-09 23:49:47,595 - test_parameters - INFO - DUT处理无效优先级 4097 -> 4097
2025-09-09 23:49:47,596 - test_parameters - WARNING - DUT接受了非标准优先级值 4097，不符合802.1D标准（应为4096的倍数）
2025-09-09 23:49:47,596 - test_parameters - INFO - 无效优先级4097被正确处理
2025-09-09 23:49:47,597 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[4097] (耗时: 1.83秒)
2025-09-09 23:49:47,597 - RSTPTest - INFO - ============================================================

2025-09-09 23:49:47,598 - RSTPTest - INFO - ============================================================
2025-09-09 23:49:47,598 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[12289]
2025-09-09 23:49:47,598 - RSTPTest - INFO - ============================================================
2025-09-09 23:49:47,599 - test_parameters - INFO - 测试无效优先级: 12289
2025-09-09 23:49:49,419 - test_parameters - INFO - DUT处理无效优先级 12289 -> 12289
2025-09-09 23:49:49,420 - test_parameters - WARNING - DUT接受了非标准优先级值 12289，不符合802.1D标准（应为4096的倍数）
2025-09-09 23:49:49,420 - test_parameters - INFO - 无效优先级12289被正确处理
2025-09-09 23:49:49,420 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[12289] (耗时: 1.82秒)
2025-09-09 23:49:49,421 - RSTPTest - INFO - ============================================================

2025-09-09 23:49:49,422 - RSTPTest - INFO - ============================================================
2025-09-09 23:49:49,422 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[70000]
2025-09-09 23:49:49,422 - RSTPTest - INFO - ============================================================
2025-09-09 23:49:49,423 - test_parameters - INFO - 测试无效优先级: 70000
2025-09-09 23:49:51,239 - test_parameters - INFO - DUT处理无效优先级 70000 -> 70000
2025-09-09 23:49:51,240 - test_parameters - WARNING - DUT接受了非标准优先级值 70000，不符合802.1D标准（应为4096的倍数）
2025-09-09 23:49:51,240 - test_parameters - INFO - 无效优先级70000被正确处理
2025-09-09 23:49:51,241 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[70000] (耗时: 1.82秒)
2025-09-09 23:49:51,241 - RSTPTest - INFO - ============================================================

2025-09-09 23:49:51,242 - RSTPTest - INFO - ============================================================
2025-09-09 23:49:51,242 - RSTPTest - INFO - 开始测试: test_hello_time
2025-09-09 23:49:51,242 - RSTPTest - INFO - ============================================================
2025-09-09 23:49:51,243 - test_parameters - INFO - 测试Hello Time参数
2025-09-09 23:49:52,879 - test_parameters - INFO - 设置Hello Time: 1秒
2025-09-09 23:49:55,058 - test_parameters - INFO - Hello Time 1秒设置成功
2025-09-09 23:49:55,059 - test_parameters - INFO - 设置Hello Time: 2秒
2025-09-09 23:49:57,279 - test_parameters - INFO - Hello Time 2秒设置成功
2025-09-09 23:49:57,279 - test_parameters - INFO - 设置Hello Time: 5秒
2025-09-09 23:49:59,504 - test_parameters - INFO - Hello Time 5秒设置成功
2025-09-09 23:49:59,504 - test_parameters - INFO - Hello Time测试通过
2025-09-09 23:49:59,505 - RSTPTest - INFO - 测试完成: test_hello_time (耗时: 8.26秒)
2025-09-09 23:49:59,505 - RSTPTest - INFO - ============================================================

2025-09-09 23:49:59,506 - RSTPTest - INFO - ============================================================
2025-09-09 23:49:59,506 - RSTPTest - INFO - 开始测试: test_forward_delay
2025-09-09 23:49:59,507 - RSTPTest - INFO - ============================================================
2025-09-09 23:49:59,507 - test_parameters - INFO - 测试Forward Delay参数
2025-09-09 23:50:01,135 - test_parameters - INFO - 设置Forward Delay: 4秒
2025-09-09 23:50:03,319 - test_parameters - INFO - Forward Delay 4秒设置成功
2025-09-09 23:50:03,319 - test_parameters - INFO - 设置Forward Delay: 10秒
2025-09-09 23:50:05,543 - test_parameters - INFO - Forward Delay 10秒设置成功
2025-09-09 23:50:05,543 - test_parameters - INFO - 设置Forward Delay: 15秒
2025-09-09 23:50:07,767 - test_parameters - INFO - Forward Delay 15秒设置成功
2025-09-09 23:50:07,767 - test_parameters - INFO - Forward Delay测试通过
2025-09-09 23:50:07,768 - RSTPTest - INFO - 测试完成: test_forward_delay (耗时: 8.26秒)
2025-09-09 23:50:07,768 - RSTPTest - INFO - ============================================================

2025-09-09 23:50:07,769 - RSTPTest - INFO - ============================================================
2025-09-09 23:50:07,769 - RSTPTest - INFO - 开始测试: test_max_age
2025-09-09 23:50:07,769 - RSTPTest - INFO - ============================================================
2025-09-09 23:50:07,770 - test_parameters - INFO - 测试Max Age参数
2025-09-09 23:50:09,375 - test_parameters - INFO - 设置Max Age: 6秒
2025-09-09 23:50:11,555 - test_parameters - INFO - Max Age 6秒设置成功
2025-09-09 23:50:11,556 - test_parameters - INFO - 设置Max Age: 10秒
2025-09-09 23:50:13,778 - test_parameters - INFO - Max Age 10秒设置成功
2025-09-09 23:50:13,778 - test_parameters - INFO - 设置Max Age: 20秒
2025-09-09 23:50:16,007 - test_parameters - INFO - Max Age 20秒设置成功
2025-09-09 23:50:16,007 - test_parameters - INFO - Max Age测试通过
2025-09-09 23:50:16,008 - RSTPTest - INFO - 测试完成: test_max_age (耗时: 8.24秒)
2025-09-09 23:50:16,008 - RSTPTest - INFO - ============================================================

2025-09-09 23:50:16,128 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 23:50:16,128 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 23:50:16,277 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 23:50:16,277 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 23:50:16,278 - RSTPTest - INFO - ============================================================
2025-09-09 23:50:16,278 - RSTPTest - INFO - 开始测试: test_port_cost
2025-09-09 23:50:16,278 - RSTPTest - INFO - ============================================================
2025-09-09 23:50:16,279 - test_parameters - INFO - 测试端口路径成本
2025-09-09 23:50:16,279 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 23:50:16,280 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 23:50:16,280 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 23:50:16,280 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 23:50:16,280 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 23:50:16,281 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 23:50:16,281 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-09 23:50:16,287 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-09 23:50:16,345 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-09 23:50:16,345 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-09 23:50:16,346 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 23:50:16,346 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 23:50:16,878 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 23:50:16,878 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 23:50:17,924 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 23:50:17,924 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 23:50:17,924 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 23:50:17,925 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 23:50:18,383 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 23:50:18,862 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 23:50:18,863 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 23:50:18,966 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 23:50:19,063 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 23:50:19,064 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 23:50:19,064 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 23:50:19,064 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 23:50:19,064 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 23:50:19,064 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 23:50:19,064 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 23:50:19,072 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 23:50:19,073 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 23:50:19,199 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-09 23:50:19,199 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-09 23:50:19,200 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-09 23:50:19,200 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-09 23:50:19,200 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 23:50:19,732 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-09 23:50:20,068 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:50:20,231 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-09 23:50:20,397 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:50:20,560 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:50:20,731 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:50:20,899 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:50:20,899 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-09 23:50:20,899 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 23:50:20,900 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 23:50:20,900 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 23:50:22,092 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 23:50:23,273 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 23:50:23,273 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 23:50:23,444 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 23:50:23,712 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 23:50:23,712 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 23:50:23,713 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 23:50:23,713 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 23:50:23,713 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 23:50:23,713 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 23:50:23,714 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 23:50:23,721 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 23:50:23,722 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 23:50:23,841 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-09 23:50:23,842 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-09 23:50:23,842 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-09 23:50:23,842 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-09 23:50:23,842 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 23:50:24,375 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-09 23:50:44,611 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:50:54,730 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-09 23:51:04,850 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:51:14,971 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:51:25,090 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:51:35,208 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:51:35,208 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-09 23:51:35,208 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 23:51:35,208 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 23:51:35,209 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 23:52:46,043 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 23:53:42,474 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 23:53:42,474 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 23:53:49,746 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 23:53:58,013 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 23:53:58,013 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 23:53:58,014 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 23:54:03,015 - test_parameters - INFO - 设置端口eth0成本: 10
2025-09-09 23:54:03,078 - test_parameters - INFO - 设置端口eth0成本: 100
2025-09-09 23:54:03,182 - test_parameters - INFO - 设置端口eth0成本: 1000
2025-09-09 23:54:03,290 - test_parameters - INFO - 设置端口eth0成本: 20000
2025-09-09 23:54:03,399 - test_parameters - INFO - 端口成本测试通过
2025-09-09 23:54:03,400 - RSTPTest - INFO - 测试完成: test_port_cost (耗时: 227.12秒)
2025-09-09 23:54:03,400 - RSTPTest - INFO - ============================================================

2025-09-09 23:54:03,401 - RSTPTest - INFO - ============================================================
2025-09-09 23:54:03,402 - RSTPTest - INFO - 开始测试: test_parameter_persistence
2025-09-09 23:54:03,402 - RSTPTest - INFO - ============================================================
2025-09-09 23:54:03,402 - test_parameters - INFO - 测试参数持久性
2025-09-09 23:54:10,619 - test_parameters - INFO - 参数持久性测试通过
2025-09-09 23:54:10,620 - RSTPTest - INFO - 测试完成: test_parameter_persistence (耗时: 7.22秒)
2025-09-09 23:54:10,620 - RSTPTest - INFO - ============================================================

2025-09-09 23:54:10,621 - RSTPTest - INFO - ============================================================
2025-09-09 23:54:10,621 - RSTPTest - INFO - 开始测试: test_parameter_boundaries
2025-09-09 23:54:10,621 - RSTPTest - INFO - ============================================================
2025-09-09 23:54:10,622 - test_parameters - INFO - 测试参数边界值
2025-09-09 23:54:12,294 - test_parameters - INFO - 最小值0: 失败
2025-09-09 23:54:12,401 - test_parameters - INFO - 最大值65535: 失败
2025-09-09 23:54:12,502 - test_parameters - INFO - 正确拒绝了无效值-1
2025-09-09 23:54:12,607 - test_parameters - INFO - 正确拒绝了无效值65536
2025-09-09 23:54:12,715 - test_parameters - INFO - 最小值1: 失败
2025-09-09 23:54:12,822 - test_parameters - INFO - 最大值10: 失败
2025-09-09 23:54:12,926 - test_parameters - INFO - 正确拒绝了无效值0
2025-09-09 23:54:13,030 - test_parameters - INFO - 正确拒绝了无效值11
2025-09-09 23:54:13,132 - test_parameters - INFO - 最小值4: 失败
2025-09-09 23:54:13,239 - test_parameters - INFO - 最大值30: 失败
2025-09-09 23:54:13,346 - test_parameters - INFO - 正确拒绝了无效值3
2025-09-09 23:54:13,455 - test_parameters - INFO - 正确拒绝了无效值31
2025-09-09 23:54:13,559 - test_parameters - INFO - 最小值6: 失败
2025-09-09 23:54:13,662 - test_parameters - INFO - 最大值40: 失败
2025-09-09 23:54:13,762 - test_parameters - INFO - 正确拒绝了无效值5
2025-09-09 23:54:13,866 - test_parameters - INFO - 正确拒绝了无效值41
2025-09-09 23:54:13,867 - test_parameters - INFO - 参数边界测试完成
2025-09-09 23:54:13,868 - RSTPTest - INFO - 测试完成: test_parameter_boundaries (耗时: 3.25秒)
2025-09-09 23:54:13,868 - RSTPTest - INFO - ============================================================

2025-09-09 23:54:13,868 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 23:54:13,869 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 23:54:13,869 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 23:54:14,005 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 23:54:14,006 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 23:54:14,127 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 23:54:14,128 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 23:54:14,262 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 23:54:14,263 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 23:54:14,263 - RSTPTest - INFO - ============================================================
2025-09-09 23:54:14,263 - RSTPTest - INFO - 开始测试: test_port_role_assignment_simplified
2025-09-09 23:54:14,264 - RSTPTest - INFO - ============================================================
2025-09-09 23:54:14,266 - RSTPTest - INFO - 测试完成: test_port_role_assignment_simplified (耗时: 0.00秒)
2025-09-09 23:54:14,267 - RSTPTest - INFO - ============================================================

2025-09-09 23:54:14,268 - RSTPTest - INFO - ============================================================
2025-09-09 23:54:14,269 - RSTPTest - INFO - 开始测试: test_root_bridge_election
2025-09-09 23:54:14,269 - RSTPTest - INFO - ============================================================
2025-09-09 23:54:14,270 - test_protocol_conformance - INFO - 开始根网桥选举测试
2025-09-09 23:54:14,270 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 23:54:14,271 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 23:54:14,271 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 23:54:14,271 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 23:54:14,271 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 23:54:14,271 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 23:54:14,272 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-09 23:54:14,278 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-09 23:54:14,338 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-09 23:54:14,339 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-09 23:54:14,339 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 23:54:14,339 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 23:54:14,866 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 23:54:14,866 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 23:54:15,907 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 23:54:15,907 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 23:54:15,907 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 23:54:15,908 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 23:54:16,368 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 23:54:16,851 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 23:54:16,852 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 23:54:16,955 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 23:54:17,051 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 23:54:17,051 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 23:54:17,051 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 23:54:17,052 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 23:54:17,052 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 23:54:17,052 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 23:54:17,052 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 23:54:17,060 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 23:54:17,060 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 23:54:17,181 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-09 23:54:17,181 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-09 23:54:17,181 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-09 23:54:17,182 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-09 23:54:17,182 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 23:54:17,716 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-09 23:54:18,054 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:54:18,226 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-09 23:54:18,394 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:54:18,559 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:54:18,730 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:54:18,906 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:54:18,907 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-09 23:54:18,907 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 23:54:18,907 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 23:54:18,907 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 23:54:20,085 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 23:54:21,274 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 23:54:21,274 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 23:54:21,441 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 23:54:21,708 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 23:54:21,708 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 23:54:21,709 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 23:54:21,709 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 23:54:21,709 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 23:54:21,709 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 23:54:21,709 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 23:54:21,718 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 23:54:21,718 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 23:54:31,791 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-09 23:54:31,791 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-09 23:54:31,792 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-09 23:54:31,792 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-09 23:54:31,792 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 23:54:47,476 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-09 23:54:47,805 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:54:47,971 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-09 23:54:48,142 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:54:48,310 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:54:48,471 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:54:48,638 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:54:48,639 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-09 23:54:48,639 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 23:54:48,639 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 23:54:48,639 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 23:54:49,822 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 23:54:51,043 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 23:54:51,044 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 23:54:51,209 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 23:54:51,481 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 23:54:51,481 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 23:54:51,481 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 23:54:54,482 - test_protocol_conformance - INFO - === 检查DUT网桥配置 ===
2025-09-09 23:54:54,488 - test_protocol_conformance - INFO - 找到测试网桥: br0
2025-09-09 23:54:54,543 - test_protocol_conformance - INFO - 启用br0的RSTP
2025-09-09 23:54:54,590 - test_protocol_conformance - INFO - br0 STP状态: ('', 'cat: /sys/class/net/br0/bridge/stp_state: No such file or directory\n', 1)
2025-09-09 23:54:54,591 - test_protocol_conformance - INFO - === 初始网桥状态 ===
2025-09-09 23:54:54,889 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:54:55,047 - test_protocol_conformance - INFO - 活动端口数: 0
2025-09-09 23:54:55,047 - test_protocol_conformance - WARNING - 活动端口不足，尝试启用更多端口
2025-09-09 23:54:58,638 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:54:58,795 - test_protocol_conformance - INFO - 初始端口状态:
2025-09-09 23:54:58,795 - test_protocol_conformance - INFO - 初始状态 - DUT有Root Port: False
2025-09-09 23:54:58,795 - test_protocol_conformance - INFO - === 配置网桥优先级 ===
2025-09-09 23:54:58,796 - test_protocol_conformance - INFO - 设置TestNode1优先级为16384
2025-09-09 23:54:58,924 - test_protocol_conformance - INFO - 设置DUT优先级为32768
2025-09-09 23:54:58,935 - test_protocol_conformance - INFO - ip命令设置结果: ('', 'RTNETLINK answers: Operation not supported\n', 2)
2025-09-09 23:54:58,987 - test_protocol_conformance - INFO - sysfs设置结果: ('32768\n', 'tee: /sys/class/net/br0/bridge/priority: No such file or directory\n', 1)
2025-09-09 23:54:58,988 - test_protocol_conformance - INFO - 设置TestNode2优先级为24576
2025-09-09 23:54:59,118 - test_protocol_conformance - INFO - 等待RSTP收敛...
2025-09-09 23:55:09,119 - test_protocol_conformance - INFO - === 第一阶段验证 ===
2025-09-09 23:55:09,373 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:55:09,578 - test_protocol_conformance - INFO - DUT当前优先级: 
2025-09-09 23:55:09,579 - test_protocol_conformance - WARNING - 优先级验证失败: 优先级设置失败，期望32768，实际
assert '' == '32768'
  
  [0m[91m- 32768[39;49;00m[90m[39;49;00m
2025-09-09 23:55:09,580 - test_protocol_conformance - INFO - 
=== 第二阶段：DUT应成为根桥 ===
2025-09-09 23:55:09,580 - test_protocol_conformance - INFO - 设置DUT优先级为12288（最低）
2025-09-09 23:55:09,730 - test_protocol_conformance - INFO - 设置后优先级: 
2025-09-09 23:55:09,731 - test_protocol_conformance - INFO - 等待RSTP重新收敛...
2025-09-09 23:55:19,731 - test_protocol_conformance - INFO - === 最终验证 ===
2025-09-09 23:55:19,985 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:55:20,141 - test_protocol_conformance - ERROR - DUT RSTP实现问题诊断:
2025-09-09 23:55:20,142 - test_protocol_conformance - ERROR - 1. DUT优先级已设置为12288（最低）
2025-09-09 23:55:20,142 - test_protocol_conformance - ERROR - 2. 但DUT仍有Root Port: False
2025-09-09 23:55:20,142 - test_protocol_conformance - ERROR - 3. Designated端口数: 0
2025-09-09 23:55:20,143 - test_protocol_conformance - ERROR - 可能的原因:
2025-09-09 23:55:20,143 - test_protocol_conformance - ERROR - - DUT的RSTP实现不符合标准
2025-09-09 23:55:20,143 - test_protocol_conformance - ERROR - - DUT没有正确处理优先级变化
2025-09-09 23:55:20,143 - test_protocol_conformance - ERROR - - DUT的BPDU发送/接收有问题
2025-09-09 23:55:20,187 - RSTPTest - INFO - 测试完成: test_root_bridge_election (耗时: 65.92秒)
2025-09-09 23:55:20,188 - RSTPTest - INFO - ============================================================

2025-09-09 23:55:20,191 - RSTPTest - INFO - ============================================================
2025-09-09 23:55:20,191 - RSTPTest - INFO - 开始测试: test_port_role_assignment
2025-09-09 23:55:20,191 - RSTPTest - INFO - ============================================================
2025-09-09 23:55:20,192 - test_protocol_conformance - INFO - 开始端口角色分配测试
2025-09-09 23:55:20,192 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 23:55:20,192 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 23:55:20,192 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 23:55:20,192 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 23:55:20,192 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 23:55:20,192 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 23:55:20,193 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 23:55:20,193 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 23:55:20,653 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 23:55:20,653 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 23:55:21,722 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 23:55:21,722 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 23:55:21,723 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 23:55:21,723 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 23:55:22,186 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 23:55:22,693 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 23:55:22,693 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 23:55:22,803 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 23:55:22,898 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 23:55:22,899 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 23:55:22,899 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 23:55:22,899 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 23:55:22,899 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 23:55:22,899 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-09 23:55:22,899 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-09 23:55:22,900 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 23:55:23,390 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-09 23:55:23,725 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:55:23,889 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-09 23:55:24,060 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:55:24,231 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:55:24,397 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:55:24,559 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:55:24,559 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-09 23:55:24,560 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 23:55:24,560 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 23:55:24,560 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 23:55:25,734 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 23:55:26,943 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 23:55:26,944 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 23:55:27,118 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 23:55:27,385 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 23:55:27,386 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 23:55:27,386 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 23:55:27,386 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 23:55:27,386 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 23:55:27,386 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-09 23:55:27,386 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-09 23:55:27,387 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 23:55:27,880 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-09 23:55:28,218 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:55:28,379 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-09 23:55:28,548 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:55:28,718 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:55:28,882 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:55:29,047 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:55:29,047 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-09 23:55:29,047 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 23:55:29,047 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 23:55:29,048 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 23:55:30,227 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 23:55:31,440 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 23:55:31,440 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 23:55:31,611 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 23:55:31,875 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 23:55:31,875 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 23:55:31,875 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 23:55:35,074 - test_protocol_conformance - INFO - 启用DUT的网桥接口...
2025-09-09 23:55:35,202 - test_protocol_conformance - INFO - 已启用接口 eth0
2025-09-09 23:55:35,370 - test_protocol_conformance - INFO - 已启用接口 eth1
2025-09-09 23:55:35,538 - test_protocol_conformance - INFO - 已启用接口 eth2
2025-09-09 23:55:38,545 - test_protocol_conformance - INFO - br0 网桥接口状态:
('18: veth45650b3@if17: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 master br-b2bd2c7fedc8 state forwarding priority 32 cost 2 \n26: veth6d7f1eb@if25: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 master br-b2bd2c7fedc8 state forwarding priority 32 cost 2 \n', '', 0)
2025-09-09 23:55:38,594 - test_protocol_conformance - INFO - br0 状态:
('5: br0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1508 qdisc mq state UP mode DEFAULT group default qlen 1000\n    link/ether 90:12:10:b5:7d:f7 brd ff:ff:ff:ff:ff:ff\n    altname enp0s30f4\n', '', 0)
2025-09-09 23:55:38,641 - test_protocol_conformance - INFO - br0 STP状态:
('', 'cat: /sys/class/net/br0/bridge/stp_state: No such file or directory\n', 1)
2025-09-09 23:55:38,642 - test_protocol_conformance - INFO - 获取初始网桥状态...
2025-09-09 23:55:38,945 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:55:39,106 - test_protocol_conformance - INFO - Bridge ID: 未获取
2025-09-09 23:55:39,106 - test_protocol_conformance - INFO - Root ID: 未获取
2025-09-09 23:55:39,106 - test_protocol_conformance - INFO - Root Port: eth0
2025-09-09 23:55:39,106 - test_protocol_conformance - INFO - 协议版本: unknown
2025-09-09 23:55:39,107 - test_protocol_conformance - INFO - 端口 eth0: 角色=root, 状态=disabled, 成本=0
2025-09-09 23:55:39,107 - test_protocol_conformance - INFO - 端口 eth2: 角色=unknown, 状态=disabled, 成本=0
2025-09-09 23:55:39,107 - test_protocol_conformance - INFO - 端口 eth3: 角色=unknown, 状态=disabled, 成本=0
2025-09-09 23:55:39,107 - test_protocol_conformance - INFO - 等待网络收敛...
2025-09-09 23:55:39,107 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 23:55:39,404 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:55:39,559 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.45秒
2025-09-09 23:55:39,861 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:55:40,019 - test_protocol_conformance - INFO - 收敛后的端口状态:
2025-09-09 23:55:40,019 - test_protocol_conformance - INFO - 端口 eth0: 角色=root, 状态=disabled, 成本=0
2025-09-09 23:55:40,020 - test_protocol_conformance - INFO - 端口 eth2: 角色=unknown, 状态=disabled, 成本=0
2025-09-09 23:55:40,020 - test_protocol_conformance - INFO - 端口 eth3: 角色=unknown, 状态=disabled, 成本=0
2025-09-09 23:55:40,316 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-09 23:55:40,474 - test_protocol_conformance - INFO - is_root_bridge() 返回: True
2025-09-09 23:55:40,475 - test_protocol_conformance - INFO - 有Root Port: False
2025-09-09 23:55:40,475 - test_protocol_conformance - INFO - 最终判定 - DUT是根桥: True
2025-09-09 23:55:40,475 - test_protocol_conformance - INFO - 活动端口数: 0
2025-09-09 23:55:40,475 - test_protocol_conformance - INFO - 禁用端口: ['eth0', 'eth2', 'eth3']
2025-09-09 23:55:40,476 - test_protocol_conformance - WARNING - 活动端口不足，尝试启用禁用的端口...
2025-09-09 23:55:40,476 - test_protocol_conformance - INFO - 尝试启用端口 eth0
2025-09-09 23:55:40,643 - test_protocol_conformance - INFO - 尝试启用端口 eth2
2025-09-09 23:55:46,060 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:55:46,214 - test_protocol_conformance - INFO - 重新配置后 - 活动端口数: 0
2025-09-09 23:55:46,214 - test_protocol_conformance - INFO - 重新配置后 - 禁用端口: ['eth0', 'eth2', 'eth3']
2025-09-09 23:55:46,214 - test_protocol_conformance - INFO - 端口角色分布: {}
2025-09-09 23:55:46,253 - RSTPTest - INFO - 测试完成: test_port_role_assignment (耗时: 26.06秒)
2025-09-09 23:55:46,253 - RSTPTest - INFO - ============================================================

2025-09-09 23:55:46,255 - RSTPTest - INFO - ============================================================
2025-09-09 23:55:46,256 - RSTPTest - INFO - 开始测试: test_rstp_protocol_verification
2025-09-09 23:55:46,256 - RSTPTest - INFO - ============================================================
2025-09-09 23:55:46,257 - test_protocol_conformance - INFO - 开始RSTP协议验证
2025-09-09 23:55:46,257 - test_protocol_conformance - INFO - === 检查OVS配置 ===
2025-09-09 23:55:46,266 - test_protocol_conformance - INFO - 当前OVS配置:
8c812ea9-3b0c-46a1-bd3c-ef3904d38c1a
    Bridge SE_ETH4
        Port SE_ETH4
            Interface SE_ETH4
                type: internal
    Bridge SE_ETH6
        Port SE_ETH6
            Interface SE_ETH6
                type: internal
    Bridge br0
        Port eth0
            Interface eth0
                error: "could not open network device eth0 (No such device)"
        Port br0
            Interface br0
                type: internal
                error: "could not add network devi
2025-09-09 23:55:46,322 - test_protocol_conformance - INFO - 使用现有网桥 SE_ETH2，端口: ['br3', 'br4']
2025-09-09 23:55:46,322 - test_protocol_conformance - INFO - === 配置RSTP（确保是RSTP而不是STP）===
2025-09-09 23:55:47,434 - test_protocol_conformance - INFO - 启用RSTP...
2025-09-09 23:55:47,454 - test_protocol_conformance - INFO - ✓ RSTP已启用
2025-09-09 23:55:47,454 - test_protocol_conformance - INFO - 设置RSTP参数...
2025-09-09 23:55:47,506 - test_protocol_conformance - INFO - ✓ 设置: rstp-hello-time=2
2025-09-09 23:55:47,558 - test_protocol_conformance - INFO - ✓ 设置: rstp-forward-delay=4
2025-09-09 23:55:47,610 - test_protocol_conformance - INFO - ✓ 设置: rstp-max-age=6
2025-09-09 23:55:47,661 - test_protocol_conformance - INFO - ✓ 设置: rstp-priority=32768
2025-09-09 23:55:47,714 - test_protocol_conformance - INFO - ✓ 设置: rstp-force-protocol-version=2
2025-09-09 23:55:47,865 - test_protocol_conformance - INFO - ✓ 端口 br3 RSTP已启用
2025-09-09 23:55:48,017 - test_protocol_conformance - INFO - ✓ 端口 br4 RSTP已启用
2025-09-09 23:55:48,065 - test_protocol_conformance - INFO - 等待RSTP初始化...
2025-09-09 23:55:53,067 - test_protocol_conformance - INFO - === 验证RSTP配置 ===
2025-09-09 23:55:53,098 - test_protocol_conformance - INFO - RSTP状态:
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     6s
  stp-fwd-delay   4s
  This bridge is the root

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     6s
  stp-fwd-delay   4s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-09 23:55:53,099 - test_protocol_conformance - INFO - ✓ 使用RSTP时间参数
2025-09-09 23:55:53,099 - test_protocol_conformance - INFO - === 创建测试拓扑 ===
2025-09-09 23:55:53,099 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 23:55:53,100 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 23:55:53,100 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 23:55:53,100 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 23:55:53,100 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 23:55:53,100 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 23:55:53,101 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 23:55:53,101 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 23:55:53,692 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 23:55:53,692 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 23:55:54,737 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 23:55:54,738 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 23:55:54,738 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 23:55:54,738 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 23:55:55,206 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 23:55:55,685 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 23:55:55,686 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 23:55:55,789 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 23:55:55,885 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 23:55:55,886 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 23:55:55,886 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 23:55:55,886 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 23:55:55,886 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 23:55:55,886 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-09 23:55:55,887 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-09 23:55:55,887 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 23:55:56,388 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-09 23:55:56,726 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:55:56,892 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-09 23:55:57,064 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:55:57,281 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:55:57,448 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:55:57,619 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:55:57,619 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-09 23:55:57,619 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 23:55:57,620 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 23:55:57,620 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 23:55:58,798 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 23:55:59,994 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 23:55:59,994 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 23:56:00,168 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 23:56:00,432 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 23:56:00,432 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 23:56:00,432 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 23:56:00,433 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 23:56:00,433 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 23:56:00,433 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-09 23:56:00,433 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-09 23:56:00,433 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 23:56:00,919 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-09 23:56:01,261 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:56:01,431 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-09 23:56:01,600 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:56:01,767 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:56:01,942 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:56:02,114 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:56:02,114 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-09 23:56:02,114 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 23:56:02,115 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 23:56:02,115 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 23:56:03,295 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 23:56:04,519 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 23:56:04,519 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 23:56:04,686 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 23:56:04,957 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 23:56:04,958 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 23:56:04,958 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 23:56:09,959 - test_protocol_conformance - INFO - === 捕获BPDU ===
2025-09-09 23:56:09,959 - test_protocol_conformance - INFO - 在 SE_ETH2 上捕获BPDU...
2025-09-09 23:56:09,959 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: SE_ETH2, 数量: 10)
2025-09-09 23:56:20,010 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-09 23:56:20,010 - test_protocol_conformance - INFO - 在 br3 上捕获BPDU...
2025-09-09 23:56:20,011 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br3, 数量: 10)
2025-09-09 23:56:30,098 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-09 23:56:30,098 - test_protocol_conformance - INFO - 在 br4 上捕获BPDU...
2025-09-09 23:56:30,098 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br4, 数量: 10)
2025-09-09 23:56:40,194 - RSTPAnalyzer_DUT - INFO - 捕获到 5 个BPDU包
2025-09-09 23:56:40,194 - test_protocol_conformance - INFO - ✓ 捕获到 5 个BPDU
2025-09-09 23:56:40,194 - test_protocol_conformance - INFO - === 分析BPDU ===
2025-09-09 23:56:40,195 - test_protocol_conformance - INFO - 第一个BPDU信息: {'timestamp': '23:56:32.577044', 'raw': '23:56:32.577044 90:12:10:b5:7d:f7 > 01:80:c2:00:00:00, 802.3, length 39: LLC, dsap STP (0x42) Individual, ssap STP (0x42) Command, ctrl 0x03: STP 802.1w, Rapid STP, Flags [Proposal, Learn, Forward], bridge-id 8000.90:12:10:b5:7d:f7.8001, length 36', 'is_rstp': False}
2025-09-09 23:56:40,195 - test_protocol_conformance - INFO - BPDU统计: RSTP=0, STP=5
2025-09-09 23:56:40,195 - test_protocol_conformance - WARNING - 检测到更多STP BPDU
2025-09-09 23:56:40,244 - test_protocol_conformance - INFO - rstp_enable状态: true
2025-09-09 23:56:40,300 - test_protocol_conformance - INFO - stp_enable状态: false
2025-09-09 23:56:40,352 - test_protocol_conformance - WARNING - OVS配置为RSTP但发送STP BPDU，可能是实现限制
2025-09-09 23:56:40,352 - test_protocol_conformance - INFO - 基于配置判断为RSTP
2025-09-09 23:56:40,353 - test_protocol_conformance - INFO - ✓ RSTP协议验证通过（检测到 5 个RSTP BPDU）
2025-09-09 23:56:40,353 - RSTPTest - INFO - 测试完成: test_rstp_protocol_verification (耗时: 54.10秒)
2025-09-09 23:56:40,354 - RSTPTest - INFO - ============================================================

2025-09-09 23:56:40,355 - RSTPTest - INFO - ============================================================
2025-09-09 23:56:40,355 - RSTPTest - INFO - 开始测试: test_alternate_port_verification
2025-09-09 23:56:40,355 - RSTPTest - INFO - ============================================================
2025-09-09 23:56:40,356 - test_protocol_conformance - INFO - 开始Alternate Port验证测试
2025-09-09 23:56:40,356 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 23:56:40,356 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 23:56:40,357 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 23:56:40,357 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 23:56:40,357 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 23:56:40,357 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 23:56:40,357 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 23:56:40,357 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 23:56:40,896 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 23:56:40,896 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 23:56:41,937 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 23:56:41,938 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 23:56:41,938 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 23:56:41,938 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 23:56:42,405 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 23:56:42,889 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 23:56:42,890 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 23:56:42,993 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 23:56:43,088 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 23:56:43,089 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 23:56:43,089 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 23:56:43,089 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 23:56:43,089 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 23:56:43,089 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-09 23:56:43,089 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-09 23:56:43,090 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 23:56:43,577 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-09 23:56:43,918 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:56:44,094 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-09 23:56:44,258 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:56:44,427 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:56:44,593 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:56:44,761 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:56:44,761 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-09 23:56:44,761 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 23:56:44,762 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 23:56:44,762 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 23:56:45,957 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 23:56:47,135 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 23:56:47,136 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 23:56:47,309 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 23:56:47,575 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 23:56:47,575 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 23:56:47,576 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 23:56:47,576 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 23:56:47,576 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 23:56:47,577 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-09 23:56:47,577 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-09 23:56:47,577 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 23:56:48,075 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-09 23:56:48,412 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:56:48,579 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-09 23:56:48,745 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:56:48,918 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:56:49,088 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:56:49,252 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:56:49,253 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-09 23:56:49,253 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 23:56:49,253 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 23:56:49,254 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 23:56:50,438 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 23:56:51,675 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 23:56:51,675 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 23:56:51,840 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 23:56:52,105 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 23:56:52,105 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 23:56:52,105 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 23:56:52,106 - test_protocol_conformance - INFO - 设置网桥优先级
2025-09-09 23:56:52,431 - test_protocol_conformance - INFO - 等待RSTP收敛...
2025-09-09 23:56:52,431 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 23:56:52,689 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:56:52,845 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.41秒
2025-09-09 23:56:53,143 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:56:53,298 - test_protocol_conformance - INFO - DUT桥信息: BridgeInfo(bridge_id='', root_id='', root_port='eth2', root_path_cost=0, protocol_version='unknown', hello_time=0, forward_delay=0, max_age=0, topology_changes=0, ports={'eth0': PortInfo(name='eth0', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth2': PortInfo(name='eth2', role=<PortRole.ROOT: 'root'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth3': PortInfo(name='eth3', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')})
2025-09-09 23:56:53,599 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-09 23:56:53,793 - RSTPTest - INFO - 测试完成: test_alternate_port_verification (耗时: 13.44秒)
2025-09-09 23:56:53,793 - RSTPTest - INFO - ============================================================

2025-09-09 23:56:53,795 - RSTPTest - INFO - ============================================================
2025-09-09 23:56:53,795 - RSTPTest - INFO - 开始测试: test_port_state_transitions
2025-09-09 23:56:53,796 - RSTPTest - INFO - ============================================================
2025-09-09 23:56:53,796 - test_protocol_conformance - INFO - 开始端口状态转换测试
2025-09-09 23:56:53,796 - NetworkTopology - INFO - 创建RSTP线性拓扑...
2025-09-09 23:56:53,797 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 23:56:53,797 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 23:56:53,797 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 23:56:53,797 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 23:56:53,797 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 23:56:53,797 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 23:56:53,797 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 23:56:54,288 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 23:56:54,288 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 23:56:55,326 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 23:56:55,326 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 23:56:55,327 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth2']
2025-09-09 23:56:55,327 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 23:56:55,793 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 23:56:55,793 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 23:56:55,896 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 23:56:55,993 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 23:56:55,993 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 23:56:55,993 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 23:56:55,993 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 23:56:55,994 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 23:56:55,994 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-09 23:56:55,994 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-09 23:56:55,994 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 23:56:56,499 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-09 23:56:56,835 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:56:57,008 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-09 23:56:57,177 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:56:57,346 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:56:57,517 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:56:57,684 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:56:57,685 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-09 23:56:57,685 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 23:56:57,685 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 23:56:57,685 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 23:56:58,872 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 23:57:00,046 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 23:57:00,046 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 23:57:00,226 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 23:57:00,489 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 23:57:00,490 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 23:57:00,490 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 23:57:00,490 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 23:57:00,490 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 23:57:00,491 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-09 23:57:00,491 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-09 23:57:00,491 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 23:57:00,988 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-09 23:57:01,329 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:57:01,499 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-09 23:57:01,668 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:57:01,836 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:57:02,009 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:57:02,177 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:57:02,177 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-09 23:57:02,177 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 23:57:02,177 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0']
2025-09-09 23:57:02,178 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 23:57:03,354 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 23:57:03,355 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 23:57:03,523 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 23:57:03,786 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 23:57:03,786 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 23:57:03,786 - NetworkTopology - INFO - 线性拓扑创建完成
2025-09-09 23:57:03,985 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-09 23:57:03,985 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 23:57:04,373 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:57:04,615 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.63秒
2025-09-09 23:57:04,916 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:57:05,107 - RSTPTest - INFO - 测试完成: test_port_state_transitions (耗时: 11.31秒)
2025-09-09 23:57:05,107 - RSTPTest - INFO - ============================================================

2025-09-09 23:57:05,109 - RSTPTest - INFO - ============================================================
2025-09-09 23:57:05,109 - RSTPTest - INFO - 开始测试: test_bpdu_propagation_and_keepalive
2025-09-09 23:57:05,109 - RSTPTest - INFO - ============================================================
2025-09-09 23:57:05,110 - test_protocol_conformance - INFO - 开始BPDU传播和保活机制测试
2025-09-09 23:57:05,110 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 23:57:05,110 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 23:57:05,110 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 23:57:05,110 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 23:57:05,111 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 23:57:05,111 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 23:57:05,111 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 23:57:05,111 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 23:57:05,608 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 23:57:05,608 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 23:57:06,643 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 23:57:06,644 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 23:57:06,644 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 23:57:06,644 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 23:57:07,099 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 23:57:07,579 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 23:57:07,580 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 23:57:07,683 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 23:57:07,780 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 23:57:07,780 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 23:57:07,780 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 23:57:07,780 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 23:57:07,781 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 23:57:07,781 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-09 23:57:07,781 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-09 23:57:07,781 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 23:57:08,283 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-09 23:57:08,618 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:57:08,791 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-09 23:57:08,955 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:57:09,131 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:57:09,301 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:57:09,469 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:57:09,470 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-09 23:57:09,470 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 23:57:09,470 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 23:57:09,470 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 23:57:10,646 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 23:57:11,847 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 23:57:11,848 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 23:57:12,025 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 23:57:12,299 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 23:57:12,299 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 23:57:12,299 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 23:57:12,300 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 23:57:12,300 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 23:57:12,300 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-09 23:57:12,300 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-09 23:57:12,300 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 23:57:12,796 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-09 23:57:13,129 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:57:13,296 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-09 23:57:13,461 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:57:13,628 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:57:13,799 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:57:13,969 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:57:13,970 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-09 23:57:13,970 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 23:57:13,970 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 23:57:13,970 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 23:57:15,172 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 23:57:16,395 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 23:57:16,396 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 23:57:16,574 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 23:57:16,844 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 23:57:16,844 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 23:57:16,844 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 23:57:17,168 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-09 23:57:17,168 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 23:57:17,419 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:57:17,572 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.40秒
2025-09-09 23:57:17,871 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:57:18,025 - test_protocol_conformance - INFO - Hello Time: 0秒
2025-09-09 23:57:18,025 - test_protocol_conformance - INFO - 开始捕获BPDU报文
2025-09-09 23:57:18,062 - RSTPTest - INFO - 测试完成: test_bpdu_propagation_and_keepalive (耗时: 12.95秒)
2025-09-09 23:57:18,063 - RSTPTest - INFO - ============================================================

2025-09-09 23:57:18,064 - RSTPTest - INFO - ============================================================
2025-09-09 23:57:18,065 - RSTPTest - INFO - 开始测试: test_disabled_port_exclusion
2025-09-09 23:57:18,065 - RSTPTest - INFO - ============================================================
2025-09-09 23:57:18,065 - test_protocol_conformance - INFO - 开始禁用端口排除测试
2025-09-09 23:57:18,066 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 23:57:18,066 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 23:57:18,066 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 23:57:18,066 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 23:57:18,066 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 23:57:18,066 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 23:57:18,067 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 23:57:18,067 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 23:57:18,532 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 23:57:18,532 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 23:57:19,568 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 23:57:19,568 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 23:57:19,568 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 23:57:19,569 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 23:57:20,031 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 23:57:20,516 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 23:57:20,516 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 23:57:20,620 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 23:57:20,716 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 23:57:20,716 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 23:57:20,717 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 23:57:20,717 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 23:57:20,717 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 23:57:20,718 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-09 23:57:20,718 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-09 23:57:20,718 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 23:57:21,212 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-09 23:57:21,551 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:57:21,715 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-09 23:57:21,885 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:57:22,055 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:57:22,221 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:57:22,384 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:57:22,384 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-09 23:57:22,385 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 23:57:22,385 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 23:57:22,385 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 23:57:23,567 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 23:57:24,769 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 23:57:24,770 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 23:57:24,934 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 23:57:25,201 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 23:57:25,201 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 23:57:25,201 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 23:57:25,202 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 23:57:25,202 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 23:57:25,202 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-09 23:57:25,202 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-09 23:57:25,202 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 23:57:25,704 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-09 23:57:26,037 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:57:26,212 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-09 23:57:26,382 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:57:26,556 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:57:26,727 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:57:26,900 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:57:26,900 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-09 23:57:26,900 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 23:57:26,901 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 23:57:26,901 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 23:57:28,091 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 23:57:29,315 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 23:57:29,315 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 23:57:29,490 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 23:57:29,754 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 23:57:29,754 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 23:57:29,754 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 23:57:29,966 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-09 23:57:29,967 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 23:57:30,255 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:57:30,420 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.45秒
2025-09-09 23:57:30,718 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:57:30,872 - test_protocol_conformance - INFO - 所有端口信息: {'eth0': PortInfo(name='eth0', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth2': PortInfo(name='eth2', role=<PortRole.ROOT: 'root'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth3': PortInfo(name='eth3', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')}
2025-09-09 23:57:31,025 - test_protocol_conformance - INFO - RSTP show输出 (code=0): 1
1
---- rstp0 ----
Root ID:
  stp-priority    32768
  stp-system-id   1e:2c:47:66:f3:4b
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    32768
  stp-system-id   1e:2c:47:66:f3:4b
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------


2025-09-09 23:57:31,026 - test_protocol_conformance - INFO - 初始活动端口: []
2025-09-09 23:57:31,026 - test_protocol_conformance - INFO - 没有找到活动端口，使用所有端口
2025-09-09 23:57:31,026 - test_protocol_conformance - INFO - 选择端口eth0进行禁用测试
2025-09-09 23:57:31,026 - test_protocol_conformance - INFO - 禁用端口eth0
2025-09-09 23:57:31,027 - FaultInjector_DUT - INFO - 断开链路: eth0
2025-09-09 23:57:31,287 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth0 (code=1)，将在逻辑上标记为已断开
2025-09-09 23:57:31,287 - test_protocol_conformance - INFO - 禁用命令结果: ('', '', 0)
2025-09-09 23:57:31,445 - test_protocol_conformance - INFO - 端口eth0配置: stdout='1
1
{rstp-enable="true", stp-enable="true", stp-path-cost="20000"}
', stderr='', code=0
2025-09-09 23:57:46,702 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:57:46,803 - test_protocol_conformance - INFO - 禁用后所有端口状态: [('eth0', 'disabled'), ('eth2', 'disabled'), ('eth3', 'disabled')]
2025-09-09 23:57:46,804 - test_protocol_conformance - INFO - 端口eth0状态: disabled, 角色: root
2025-09-09 23:57:46,804 - test_protocol_conformance - INFO - 禁用后活动端口: []
2025-09-09 23:57:46,804 - test_protocol_conformance - INFO - 活动端口数量: 0, 初始活动端口数量: 3
2025-09-09 23:57:46,804 - test_protocol_conformance - INFO - 禁用后端口角色分布: {}
2025-09-09 23:57:47,098 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-09 23:57:47,204 - test_protocol_conformance - INFO - 重新启用端口eth0
2025-09-09 23:57:47,204 - FaultInjector_DUT - INFO - 恢复链路: eth0
2025-09-09 23:57:47,466 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth0 (code=1)，将在逻辑上标记为已恢复
2025-09-09 23:58:02,724 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:58:02,827 - test_protocol_conformance - INFO - ✓ 端口eth0已重新启用，状态: forwarding
2025-09-09 23:58:02,866 - RSTPTest - INFO - 测试完成: test_disabled_port_exclusion (耗时: 44.80秒)
2025-09-09 23:58:02,866 - RSTPTest - INFO - ============================================================

2025-09-09 23:58:02,868 - RSTPTest - INFO - ============================================================
2025-09-09 23:58:02,868 - RSTPTest - INFO - 开始测试: test_topology_change_notification
2025-09-09 23:58:02,869 - RSTPTest - INFO - ============================================================
2025-09-09 23:58:02,869 - test_protocol_conformance - INFO - 开始拓扑变更通知测试
2025-09-09 23:58:02,869 - test_protocol_conformance - INFO - === 步骤1: 创建多网桥环形拓扑 ===
2025-09-09 23:58:03,216 - test_protocol_conformance - INFO - 创建网桥 rstp1 (优先级: 32768)
2025-09-09 23:58:03,451 - test_protocol_conformance - INFO - 创建网桥 rstp2 (优先级: 36864)
2025-09-09 23:58:03,688 - test_protocol_conformance - INFO - 创建网桥 rstp3 (优先级: 40960)
2025-09-09 23:58:04,155 - test_protocol_conformance - INFO - ✓ 连接 rstp1 <-> rstp2
2025-09-09 23:58:04,648 - test_protocol_conformance - INFO - ✓ 连接 rstp2 <-> rstp3
2025-09-09 23:58:05,056 - test_protocol_conformance - INFO - ✓ 连接 rstp3 <-> rstp1
2025-09-09 23:58:05,056 - test_protocol_conformance - INFO - 等待RSTP初始收敛...
2025-09-09 23:58:15,057 - test_protocol_conformance - INFO - === 步骤2: 验证初始RSTP状态 ===
2025-09-09 23:58:15,065 - test_protocol_conformance - INFO - 
rstp1 初始RSTP状态:
2025-09-09 23:58:15,065 - test_protocol_conformance - INFO -   ---- rstp1 ----
2025-09-09 23:58:15,065 - test_protocol_conformance - INFO -   Root ID:
2025-09-09 23:58:15,066 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-09 23:58:15,066 - test_protocol_conformance - INFO -     stp-system-id   26:14:e1:34:5f:48
2025-09-09 23:58:15,066 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-09 23:58:15,067 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-09 23:58:15,067 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-09 23:58:15,067 - test_protocol_conformance - INFO -     This bridge is the root
2025-09-09 23:58:15,067 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-09 23:58:15,067 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-09 23:58:15,068 - test_protocol_conformance - INFO -     stp-system-id   26:14:e1:34:5f:48
2025-09-09 23:58:15,068 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-09 23:58:15,068 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-09 23:58:15,068 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-09 23:58:15,068 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-09 23:58:15,068 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-09 23:58:15,068 - test_protocol_conformance - INFO -     veth12a    Designated Forwarding 2000     128.1
2025-09-09 23:58:15,069 - test_protocol_conformance - INFO -     veth31b    Designated Forwarding 2000     128.2
2025-09-09 23:58:15,069 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-09 23:58:15,069 - test_protocol_conformance - INFO -   → 有转发端口
2025-09-09 23:58:15,113 - test_protocol_conformance - INFO - 
rstp2 初始RSTP状态:
2025-09-09 23:58:15,114 - test_protocol_conformance - INFO -   ---- rstp2 ----
2025-09-09 23:58:15,114 - test_protocol_conformance - INFO -   Root ID:
2025-09-09 23:58:15,114 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-09 23:58:15,114 - test_protocol_conformance - INFO -     stp-system-id   26:14:e1:34:5f:48
2025-09-09 23:58:15,115 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-09 23:58:15,115 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-09 23:58:15,115 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-09 23:58:15,115 - test_protocol_conformance - INFO -     root-port       veth12b
2025-09-09 23:58:15,115 - test_protocol_conformance - INFO -     root-path-cost  2000
2025-09-09 23:58:15,116 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-09 23:58:15,116 - test_protocol_conformance - INFO -     stp-priority    36864
2025-09-09 23:58:15,116 - test_protocol_conformance - INFO -     stp-system-id   76:c3:c7:f3:13:42
2025-09-09 23:58:15,116 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-09 23:58:15,116 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-09 23:58:15,116 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-09 23:58:15,116 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-09 23:58:15,117 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-09 23:58:15,117 - test_protocol_conformance - INFO -     veth12b    Root       Forwarding 2000     128.1
2025-09-09 23:58:15,117 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-09 23:58:15,117 - test_protocol_conformance - INFO -   → 有转发端口
2025-09-09 23:58:15,161 - test_protocol_conformance - INFO - 
rstp3 初始RSTP状态:
2025-09-09 23:58:15,162 - test_protocol_conformance - INFO -   ---- rstp3 ----
2025-09-09 23:58:15,162 - test_protocol_conformance - INFO -   Root ID:
2025-09-09 23:58:15,162 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-09 23:58:15,162 - test_protocol_conformance - INFO -     stp-system-id   26:14:e1:34:5f:48
2025-09-09 23:58:15,162 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-09 23:58:15,163 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-09 23:58:15,163 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-09 23:58:15,163 - test_protocol_conformance - INFO -     root-port       veth31a
2025-09-09 23:58:15,163 - test_protocol_conformance - INFO -     root-path-cost  2000
2025-09-09 23:58:15,163 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-09 23:58:15,164 - test_protocol_conformance - INFO -     stp-priority    40960
2025-09-09 23:58:15,164 - test_protocol_conformance - INFO -     stp-system-id   86:5a:5e:30:75:4b
2025-09-09 23:58:15,164 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-09 23:58:15,164 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-09 23:58:15,164 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-09 23:58:15,164 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-09 23:58:15,165 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-09 23:58:15,165 - test_protocol_conformance - INFO -     veth23b    Alternate  Discarding 2000     128.1
2025-09-09 23:58:15,165 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-09 23:58:15,165 - test_protocol_conformance - INFO -   → 有转发端口
2025-09-09 23:58:15,165 - test_protocol_conformance - INFO -   → 有阻塞端口（防环路）
2025-09-09 23:58:15,165 - test_protocol_conformance - INFO - === 步骤3: 分析网络拓扑 ===
2025-09-09 23:58:15,165 - test_protocol_conformance - INFO - ✓ rstp1 是根桥
2025-09-09 23:58:15,166 - test_protocol_conformance - INFO - ✓ 找到阻塞端口: veth23b
2025-09-09 23:58:15,166 - test_protocol_conformance - INFO - === 步骤4: 触发拓扑变更 ===
2025-09-09 23:58:15,166 - test_protocol_conformance - INFO - 断开活动端口: veth31a
2025-09-09 23:58:20,231 - test_protocol_conformance - INFO - ✓ rstp1 状态已变化
2025-09-09 23:58:20,333 - test_protocol_conformance - INFO - ✓ rstp3 状态已变化
2025-09-09 23:58:25,380 - test_protocol_conformance - INFO - === 步骤5: 验证拓扑变更 ===
2025-09-09 23:58:25,390 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: veth12a, 数量: 5)
2025-09-09 23:58:30,484 - RSTPAnalyzer_DUT - INFO - 捕获到 2 个BPDU包
2025-09-09 23:58:30,484 - test_protocol_conformance - INFO - 在 veth12a 捕获到 2 个BPDU
2025-09-09 23:58:30,485 - test_protocol_conformance - INFO - === 步骤6: 最终验证 ===
2025-09-09 23:58:30,485 - test_protocol_conformance - INFO - ✓ 测试通过：检测到拓扑变更
2025-09-09 23:58:30,533 - test_protocol_conformance - INFO - 
========== rstp1 最终状态 ==========
2025-09-09 23:58:30,534 - test_protocol_conformance - INFO - ---- rstp1 ----
2025-09-09 23:58:30,534 - test_protocol_conformance - INFO - Root ID:
2025-09-09 23:58:30,534 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-09 23:58:30,534 - test_protocol_conformance - INFO -   stp-system-id   26:14:e1:34:5f:48
2025-09-09 23:58:30,534 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-09 23:58:30,535 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-09 23:58:30,535 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-09 23:58:30,535 - test_protocol_conformance - INFO -   This bridge is the root
2025-09-09 23:58:30,535 - test_protocol_conformance - INFO - Bridge ID:
2025-09-09 23:58:30,535 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-09 23:58:30,536 - test_protocol_conformance - INFO -   stp-system-id   26:14:e1:34:5f:48
2025-09-09 23:58:30,536 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-09 23:58:30,536 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-09 23:58:30,536 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-09 23:58:30,536 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-09 23:58:30,536 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-09 23:58:30,537 - test_protocol_conformance - INFO -   veth12a    Designated Forwarding 2000     128.1
2025-09-09 23:58:30,537 - test_protocol_conformance - INFO -   veth31b    Designated Forwarding 2000     128.2
2025-09-09 23:58:30,586 - test_protocol_conformance - INFO - 
========== rstp2 最终状态 ==========
2025-09-09 23:58:30,586 - test_protocol_conformance - INFO - ---- rstp2 ----
2025-09-09 23:58:30,586 - test_protocol_conformance - INFO - Root ID:
2025-09-09 23:58:30,587 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-09 23:58:30,587 - test_protocol_conformance - INFO -   stp-system-id   26:14:e1:34:5f:48
2025-09-09 23:58:30,587 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-09 23:58:30,587 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-09 23:58:30,587 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-09 23:58:30,587 - test_protocol_conformance - INFO -   root-port       veth12b
2025-09-09 23:58:30,587 - test_protocol_conformance - INFO -   root-path-cost  2000
2025-09-09 23:58:30,588 - test_protocol_conformance - INFO - Bridge ID:
2025-09-09 23:58:30,588 - test_protocol_conformance - INFO -   stp-priority    36864
2025-09-09 23:58:30,588 - test_protocol_conformance - INFO -   stp-system-id   76:c3:c7:f3:13:42
2025-09-09 23:58:30,588 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-09 23:58:30,588 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-09 23:58:30,588 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-09 23:58:30,588 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-09 23:58:30,589 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-09 23:58:30,589 - test_protocol_conformance - INFO -   veth12b    Root       Forwarding 2000     128.1
2025-09-09 23:58:30,589 - test_protocol_conformance - INFO -   veth23a    Designated Forwarding 2000     128.2
2025-09-09 23:58:30,637 - test_protocol_conformance - INFO - 
========== rstp3 最终状态 ==========
2025-09-09 23:58:30,638 - test_protocol_conformance - INFO - ---- rstp3 ----
2025-09-09 23:58:30,638 - test_protocol_conformance - INFO - Root ID:
2025-09-09 23:58:30,638 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-09 23:58:30,638 - test_protocol_conformance - INFO -   stp-system-id   26:14:e1:34:5f:48
2025-09-09 23:58:30,639 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-09 23:58:30,639 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-09 23:58:30,639 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-09 23:58:30,639 - test_protocol_conformance - INFO -   root-port       veth31a
2025-09-09 23:58:30,639 - test_protocol_conformance - INFO -   root-path-cost  2000
2025-09-09 23:58:30,639 - test_protocol_conformance - INFO - Bridge ID:
2025-09-09 23:58:30,639 - test_protocol_conformance - INFO -   stp-priority    40960
2025-09-09 23:58:30,639 - test_protocol_conformance - INFO -   stp-system-id   86:5a:5e:30:75:4b
2025-09-09 23:58:30,640 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-09 23:58:30,640 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-09 23:58:30,640 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-09 23:58:30,640 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-09 23:58:30,640 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-09 23:58:30,640 - test_protocol_conformance - INFO -   veth23b    Alternate  Discarding 2000     128.1
2025-09-09 23:58:30,640 - test_protocol_conformance - INFO -   veth31a    Root       Forwarding 2000     128.2
2025-09-09 23:58:30,641 - test_protocol_conformance - INFO - 
=== 诊断信息 ===
2025-09-09 23:58:30,690 - test_protocol_conformance - INFO - 系统日志中的STP/RSTP信息:
2025-09-09 23:58:30,690 - test_protocol_conformance - INFO - [477418.445181] rstp0: left promiscuous mode
[477418.997300] rstp0: entered promiscuous mode
[477463.353819] rstp1: entered promiscuous mode
[477463.578923] rstp2: entered promiscuous mode
[477463.815392] rstp3: entered promiscuous mode

2025-09-09 23:58:30,739 - test_protocol_conformance - INFO - OVS日志中的拓扑变更信息:
2025-09-09 23:58:30,739 - test_protocol_conformance - INFO - 2025-09-09T15:58:31.441Z|00501|rstp_sm(handler1772)|DBG|rstp3: move_rstp()
2025-09-09T15:58:31.441Z|00502|rstp_sm(handler1772)|DBG|v1: 8.000.2614e1345f48, 0, 8.000.2614e1345f48, 32770, 0
2025-09-09T15:58:31.441Z|00503|rstp_sm(handler1772)|DBG|v2: 8.000.2614e1345f48, 0, 8.000.2614e1345f48, 32770, 0
2025-09-09T15:58:31.441Z|00504|rstp_sm(handler1772)|DBG|superior_same
2025-09-09T15:58:31.441Z|00505|rstp_sm(handler1772)|DBG|rstp3, port 2: Port_information_sm 9 -> 17
2025-09-09T15:58:31.441Z|00506|rstp_sm(handler1772)|DBG|rstp3: move_rstp()
2025-09-09T15:58:31.441Z|00507|rstp_sm(handler1772)|DBG|rstp3, port 2: Port_information_sm 17 -> 7
2025-09-09T15:58:31.441Z|00508|rstp_sm(handler1772)|DBG|rstp3: move_rstp()
2025-09-09T15:58:31.441Z|00509|rstp_sm(handler1772)|DBG|rstp3, port 2: Port_information_sm 7 -> 8
2025-09-09T15:58:31.441Z|00510|rstp_sm(handler1772)|DBG|rstp3: move_rstp()
2025-09-09T15:58:31.967Z|9164104|bridge|WARN|rstp0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-09T15:58:31.967Z|9164105|bridge|WARN|br0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-09T15:58:31.978Z|9164109|bridge|WARN|rstp0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-09T15:58:31.978Z|9164110|bridge|WARN|br0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP

2025-09-09 23:58:30,740 - test_protocol_conformance - INFO - === 清理测试环境 ===
2025-09-09 23:58:31,271 - test_protocol_conformance - INFO - 拓扑变更通知测试完成
2025-09-09 23:58:31,272 - RSTPTest - INFO - 测试完成: test_topology_change_notification (耗时: 28.40秒)
2025-09-09 23:58:31,272 - RSTPTest - INFO - ============================================================

2025-09-09 23:58:31,273 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 23:58:31,273 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 23:58:31,274 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 23:58:31,409 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 23:58:31,409 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 23:58:31,538 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 23:58:31,539 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 23:58:31,672 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 23:58:31,672 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 23:58:31,673 - RSTPTest - INFO - ============================================================
2025-09-09 23:58:31,673 - RSTPTest - INFO - 开始测试: test_root_bridge_hijack_attack
2025-09-09 23:58:31,673 - RSTPTest - INFO - ============================================================
2025-09-09 23:58:31,674 - test_security - INFO - 开始根网桥劫持攻击测试
2025-09-09 23:58:31,674 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 23:58:31,674 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 23:58:31,674 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 23:58:31,675 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 23:58:31,675 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 23:58:31,675 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 23:58:31,675 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-09 23:58:31,682 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-09 23:58:31,742 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-09 23:58:31,742 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-09 23:58:31,743 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 23:58:31,743 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 23:58:32,274 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 23:58:32,274 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 23:58:33,330 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 23:58:33,330 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 23:58:33,330 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 23:58:33,331 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 23:58:33,790 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 23:58:34,271 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 23:58:34,271 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 23:58:34,382 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 23:58:34,487 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 23:58:34,488 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 23:58:34,488 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 23:58:34,488 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 23:58:34,488 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 23:58:34,488 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 23:58:34,488 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 23:58:34,496 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 23:58:34,497 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 23:58:34,633 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-09 23:58:34,633 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-09 23:58:34,633 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-09 23:58:34,634 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-09 23:58:34,634 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 23:58:35,176 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-09 23:58:35,527 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:58:35,690 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-09 23:58:35,855 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:58:36,025 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:58:36,188 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:58:36,352 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:58:36,352 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-09 23:58:36,352 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 23:58:36,353 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 23:58:36,353 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 23:58:37,544 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 23:58:38,736 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 23:58:38,736 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 23:58:38,903 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 23:58:39,169 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 23:58:39,169 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 23:58:39,169 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 23:58:39,169 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 23:58:39,169 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 23:58:39,170 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 23:58:39,170 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 23:58:39,177 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 23:58:39,177 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 23:58:39,299 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-09 23:58:39,300 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-09 23:58:39,300 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-09 23:58:39,300 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-09 23:58:39,300 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 23:58:39,831 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-09 23:58:40,168 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:58:40,337 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-09 23:58:40,504 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:58:40,671 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:58:40,834 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:58:41,011 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:58:41,011 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-09 23:58:41,011 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 23:58:41,011 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 23:58:41,012 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 23:58:42,223 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 23:58:43,444 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 23:58:43,445 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 23:58:43,614 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 23:58:43,876 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 23:58:43,876 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 23:58:43,876 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 23:58:49,317 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-09 23:58:49,773 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:58:49,931 - test_security - INFO - 初始根网桥: 
2025-09-09 23:58:49,931 - FaultInjector_TestNode1 - WARNING - 注入恶意BPDU到 eth0
2025-09-09 23:58:50,080 - FaultInjector_TestNode1 - WARNING - 恶意BPDU注入已启动 (优先级: 0)
2025-09-09 23:59:05,337 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 23:59:05,490 - test_security - INFO - 根网桥未被劫持（可能已启用防护）
2025-09-09 23:59:05,490 - test_security - INFO - 根网桥劫持攻击测试完成
2025-09-09 23:59:05,491 - RSTPTest - INFO - 测试完成: test_root_bridge_hijack_attack (耗时: 33.82秒)
2025-09-09 23:59:05,491 - RSTPTest - INFO - ============================================================

2025-09-09 23:59:05,493 - RSTPTest - INFO - ============================================================
2025-09-09 23:59:05,493 - RSTPTest - INFO - 开始测试: test_bpdu_flood_attack
2025-09-09 23:59:05,493 - RSTPTest - INFO - ============================================================
2025-09-09 23:59:05,493 - test_security - INFO - 开始BPDU洪泛攻击测试
2025-09-09 23:59:05,494 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 23:59:05,494 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 23:59:05,494 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 23:59:05,494 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 23:59:05,494 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 23:59:05,494 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 23:59:05,494 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 23:59:05,495 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 23:59:06,013 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 23:59:06,013 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 23:59:07,054 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 23:59:07,055 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 23:59:07,055 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 23:59:07,055 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 23:59:07,515 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 23:59:07,994 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 23:59:07,995 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 23:59:08,099 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 23:59:08,194 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 23:59:08,194 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 23:59:08,194 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 23:59:08,195 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 23:59:08,195 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 23:59:08,195 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-09 23:59:08,195 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-09 23:59:08,195 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 23:59:08,697 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-09 23:59:09,038 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:59:09,210 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-09 23:59:09,378 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:59:09,546 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:59:09,712 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:59:09,881 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:59:09,881 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-09 23:59:09,881 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 23:59:09,882 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 23:59:09,882 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 23:59:11,062 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 23:59:12,265 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 23:59:12,266 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 23:59:12,444 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 23:59:12,712 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 23:59:12,712 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 23:59:12,713 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 23:59:12,713 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 23:59:12,713 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 23:59:12,713 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-09 23:59:12,714 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-09 23:59:12,714 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 23:59:13,206 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-09 23:59:13,549 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-09 23:59:13,719 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-09 23:59:13,884 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-09 23:59:14,059 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-09 23:59:14,231 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-09 23:59:14,406 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-09 23:59:14,407 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-09 23:59:14,407 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 23:59:14,407 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 23:59:14,407 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 23:59:15,606 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 23:59:16,830 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 23:59:16,830 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 23:59:16,998 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 23:59:17,265 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 23:59:17,265 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 23:59:17,266 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 23:59:22,436 - test_security - INFO - 初始CPU使用率: 0.0%
2025-09-09 23:59:32,708 - test_security - INFO - 洪泛时CPU使用率: 33.3%
2025-09-09 23:59:33,004 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-09 23:59:33,162 - test_security - INFO - 网络在BPDU洪泛下保持稳定
2025-09-09 23:59:33,162 - test_security - INFO - BPDU洪泛攻击测试完成
2025-09-09 23:59:33,163 - RSTPTest - INFO - 测试完成: test_bpdu_flood_attack (耗时: 27.67秒)
2025-09-09 23:59:33,163 - RSTPTest - INFO - ============================================================

2025-09-09 23:59:33,165 - RSTPTest - INFO - ============================================================
2025-09-09 23:59:33,165 - RSTPTest - INFO - 开始测试: test_topology_change_attack
2025-09-09 23:59:33,165 - RSTPTest - INFO - ============================================================
2025-09-09 23:59:33,165 - test_security - INFO - 开始拓扑变更攻击测试
2025-09-09 23:59:33,166 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 23:59:33,166 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 23:59:33,166 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 23:59:33,166 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 23:59:33,166 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 23:59:33,166 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 23:59:33,167 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 23:59:33,167 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 23:59:33,674 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 23:59:33,674 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 23:59:34,705 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 23:59:34,706 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 23:59:34,706 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 23:59:34,706 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 23:59:35,170 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 23:59:35,650 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 23:59:35,650 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 23:59:35,753 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 23:59:35,850 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 23:59:35,850 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 23:59:35,850 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 23:59:35,851 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 23:59:35,851 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 23:59:35,851 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-09 23:59:35,851 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-09 23:59:35,851 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 23:59:36,344 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-09 23:59:56,592 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 00:00:06,710 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 00:00:16,830 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 00:00:26,950 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 00:00:37,071 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 00:00:47,192 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 00:00:47,192 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 00:00:47,193 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 00:00:47,193 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 00:00:47,193 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 00:01:52,971 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 00:02:49,556 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 00:02:49,557 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 00:02:54,924 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 00:03:05,136 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 00:03:05,137 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 00:03:05,137 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 00:03:05,137 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 00:03:05,137 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 00:03:05,138 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 00:03:05,138 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 00:03:05,138 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 00:03:05,624 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 00:03:05,957 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 00:03:06,125 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 00:03:06,295 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 00:03:06,468 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 00:03:06,635 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 00:03:06,804 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 00:03:06,805 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 00:03:06,805 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 00:03:06,805 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 00:03:06,805 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 00:03:07,983 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 00:03:09,210 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 00:03:09,211 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 00:03:09,384 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 00:03:09,649 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 00:03:09,650 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 00:03:09,650 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 00:03:14,905 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 00:03:15,066 - test_security - INFO - 触发快速拓扑变更...
2025-09-10 00:04:37,688 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 00:04:37,845 - test_security - INFO - 检测到0次拓扑变更
2025-09-10 00:04:38,147 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 00:04:38,309 - test_security - INFO - 网络在频繁拓扑变更后保持稳定
2025-09-10 00:04:38,309 - test_security - INFO - 拓扑变更攻击测试完成
2025-09-10 00:04:38,310 - RSTPTest - INFO - 测试完成: test_topology_change_attack (耗时: 305.14秒)
2025-09-10 00:04:38,310 - RSTPTest - INFO - ============================================================

2025-09-10 00:04:38,311 - RSTPTest - INFO - ============================================================
2025-09-10 00:04:38,312 - RSTPTest - INFO - 开始测试: test_mac_spoofing
2025-09-10 00:04:38,312 - RSTPTest - INFO - ============================================================
2025-09-10 00:04:38,312 - test_security - INFO - 开始MAC地址欺骗测试
2025-09-10 00:04:38,312 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 00:04:38,313 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 00:04:38,313 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 00:04:38,313 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 00:04:38,313 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 00:04:38,313 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 00:04:38,313 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 00:04:38,313 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 00:04:38,836 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 00:04:38,836 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 00:04:39,872 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 00:04:39,873 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 00:04:39,873 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 00:04:39,873 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 00:04:40,338 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 00:04:40,823 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 00:04:40,823 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 00:04:40,932 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 00:04:41,037 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 00:04:41,037 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 00:04:41,037 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 00:04:41,038 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 00:04:41,038 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 00:04:41,038 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 00:04:41,038 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 00:04:41,039 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 00:04:47,055 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 00:04:47,389 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 00:04:47,559 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 00:04:47,724 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 00:04:47,893 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 00:04:48,068 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 00:04:48,234 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 00:04:48,235 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 00:04:48,235 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 00:04:48,235 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 00:04:48,235 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 00:04:49,461 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 00:04:50,635 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 00:04:50,635 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 00:04:50,801 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 00:04:51,074 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 00:04:51,075 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 00:04:51,075 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 00:04:51,075 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 00:04:51,075 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 00:04:51,075 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 00:04:51,076 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 00:04:51,076 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 00:04:51,577 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 00:04:51,909 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 00:04:52,072 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 00:04:52,240 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 00:04:52,407 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 00:04:52,573 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 00:04:52,738 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 00:04:52,739 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 00:04:52,739 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 00:04:52,739 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 00:04:52,739 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 00:04:53,921 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 00:04:55,138 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 00:04:55,139 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 00:04:55,312 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 00:04:55,571 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 00:04:55,571 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 00:04:55,572 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 00:05:00,579 - test_security - INFO - DUT MAC地址: 90:12:10:b5:7d:f7
2025-09-10 00:05:00,579 - test_security - INFO - 尝试MAC地址欺骗...
2025-09-10 00:05:06,351 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 00:05:06,509 - test_security - INFO - 网络对MAC欺骗具有抗性
2025-09-10 00:05:13,106 - test_security - INFO - MAC地址欺骗测试完成
2025-09-10 00:05:13,107 - RSTPTest - INFO - 测试完成: test_mac_spoofing (耗时: 34.80秒)
2025-09-10 00:05:13,107 - RSTPTest - INFO - ============================================================

2025-09-10 00:05:13,109 - RSTPTest - INFO - ============================================================
2025-09-10 00:05:13,109 - RSTPTest - INFO - 开始测试: test_port_security
2025-09-10 00:05:13,109 - RSTPTest - INFO - ============================================================
2025-09-10 00:05:13,110 - test_security - INFO - 开始端口安全测试
2025-09-10 00:05:13,115 - test_security - WARNING - 未检测到任何端口安全功能
2025-09-10 00:05:13,116 - RSTPTest - INFO - 测试完成: test_port_security (耗时: 0.01秒)
2025-09-10 00:05:13,116 - RSTPTest - INFO - ============================================================

2025-09-10 00:05:13,118 - RSTPTest - INFO - ============================================================
2025-09-10 00:05:13,118 - RSTPTest - INFO - 开始测试: test_bpdu_filter_functionality
2025-09-10 00:05:13,118 - RSTPTest - INFO - ============================================================
2025-09-10 00:05:13,119 - test_security - INFO - 开始BPDU过滤器功能测试
2025-09-10 00:05:13,163 - NetworkTopology - INFO - 创建RSTP线性拓扑...
2025-09-10 00:05:13,164 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 00:05:13,164 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 00:05:13,164 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 00:05:13,164 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 00:05:13,165 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 00:05:13,165 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 00:05:13,165 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 00:05:13,675 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 00:05:13,675 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 00:05:14,712 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 00:05:14,712 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 00:05:14,712 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth2']
2025-09-10 00:05:14,713 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 00:05:15,167 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 00:05:15,168 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 00:05:15,272 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 00:05:15,368 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 00:05:15,369 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 00:05:15,369 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 00:05:15,369 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 00:05:15,369 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 00:05:15,369 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 00:05:15,370 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 00:05:15,370 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 00:05:28,067 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 00:05:28,395 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 00:05:28,561 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 00:05:28,722 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 00:05:28,890 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 00:05:29,062 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 00:05:29,227 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 00:05:29,228 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 00:05:29,228 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 00:05:29,228 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 00:05:29,228 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 00:05:30,404 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 00:05:31,602 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 00:05:31,603 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 00:05:31,776 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 00:05:32,043 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 00:05:32,043 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 00:05:32,043 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 00:05:32,043 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 00:05:32,044 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 00:05:32,044 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 00:05:32,044 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 00:05:32,044 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 00:05:32,545 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 00:05:32,889 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 00:05:33,057 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 00:05:33,225 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 00:05:33,395 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 00:05:33,557 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 00:05:33,727 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 00:05:33,728 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 00:05:33,728 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 00:05:33,728 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0']
2025-09-10 00:05:33,729 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 00:05:34,907 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 00:05:34,907 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 00:05:35,082 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 00:05:35,353 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 00:05:35,353 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 00:05:35,353 - NetworkTopology - INFO - 线性拓扑创建完成
2025-09-10 00:05:40,489 - test_security - WARNING - BPDU包统计命令执行失败: 
2025-09-10 00:05:40,489 - test_security - INFO - 启用过滤器前端口 eth2 BPDU数量: 0
2025-09-10 00:05:40,635 - test_security - WARNING - mstpctl设置BPDU过滤器失败，尝试使用brctl
2025-09-10 00:05:40,733 - test_security - ERROR - 启用BPDU过滤器失败: BPDU过滤器配置失败: 
2025-09-10 00:05:40,733 - test_security - ERROR - 启用BPDU过滤器失败: BPDU过滤器配置失败: 
2025-09-10 00:05:40,879 - test_security - WARNING - 清理命令执行失败: mstpctl setportbpdufilter br0 eth2 no, 错误: 
2025-09-10 00:05:41,025 - test_security - WARNING - 清理命令执行失败: echo 0 > /sys/class/net/br0/bridge/ports/eth2/bpdu_filter, 错误: 
2025-09-10 00:05:41,059 - RSTPTest - INFO - 测试完成: test_bpdu_filter_functionality (耗时: 27.94秒)
2025-09-10 00:05:41,059 - RSTPTest - INFO - ============================================================

2025-09-10 00:05:41,062 - RSTPTest - INFO - ============================================================
2025-09-10 00:05:41,062 - RSTPTest - INFO - 开始测试: test_malformed_bpdu_handling
2025-09-10 00:05:41,063 - RSTPTest - INFO - ============================================================
2025-09-10 00:05:41,063 - test_security - INFO - 开始畸形BPDU处理测试
2025-09-10 00:05:41,071 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 00:05:41,071 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 00:05:41,071 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 00:05:41,071 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 00:05:41,071 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 00:05:41,072 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 00:05:41,072 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 00:05:41,072 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 00:05:41,595 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 00:05:41,596 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 00:05:42,648 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 00:05:42,648 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 00:05:42,648 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 00:05:42,649 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 00:05:43,135 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 00:05:43,616 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 00:05:43,616 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 00:05:43,719 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 00:05:43,816 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 00:05:43,817 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 00:05:43,817 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 00:05:43,817 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 00:05:43,817 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 00:05:43,818 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 00:05:43,818 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 00:05:43,818 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 00:05:44,319 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 00:05:44,656 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 00:05:44,830 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 00:05:45,002 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 00:05:45,175 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 00:05:45,339 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 00:05:45,506 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 00:05:45,506 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 00:05:45,506 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 00:05:45,507 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 00:05:45,507 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 00:05:46,691 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 00:05:47,886 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 00:05:47,886 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 00:05:48,049 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 00:05:48,319 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 00:05:48,320 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 00:05:48,320 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 00:05:48,320 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 00:05:48,320 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 00:05:48,321 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 00:05:48,321 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 00:05:48,321 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 00:05:48,809 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 00:05:49,151 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 00:05:49,313 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 00:05:49,479 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 00:05:49,642 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 00:05:49,809 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 00:05:49,978 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 00:05:49,978 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 00:05:49,978 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 00:05:49,978 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 00:05:49,979 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 00:05:51,157 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 00:05:52,370 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 00:05:52,370 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 00:05:52,540 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 00:05:52,807 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 00:05:52,807 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 00:05:52,807 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 00:05:58,062 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 00:05:58,523 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 00:05:58,687 - test_security - INFO - 初始网络状态: 稳定
2025-09-10 00:05:58,688 - test_security - INFO - 执行测试: _test_oversized_bpdu
2025-09-10 00:06:02,969 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 00:06:03,128 - test_security - INFO - _test_oversized_bpdu 网络保持稳定
2025-09-10 00:06:03,128 - test_security - INFO - 执行测试: _test_undersized_bpdu
2025-09-10 00:06:03,133 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

# 创建过小的BPDU（缺少必要字段）
target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 只包含最小字段的BPDU
truncated_bpdu = Raw(load=b"     ")  # 截断的BPDU

packet = eth/llc/truncated_bpdu
sendp(packet, iface=interface, count=5, inter=1, verbose=0)
print("Undersized BPDU sent")
' > /tmp/undersized_bpdu.py
错误: 
2025-09-10 00:06:03,135 - test_security - ERROR - _test_undersized_bpdu 执行失败: 
2025-09-10 00:06:03,135 - test_security - INFO - 执行测试: _test_invalid_protocol_id
2025-09-10 00:06:03,135 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 使用无效的协议ID（正常应该是0x0000）
invalid_bpdu = Raw(load=b"ÿÿ   " + b" " * 30)

packet = eth/llc/invalid_bpdu
sendp(packet, iface=interface, count=5, inter=1, verbose=0)
print("Invalid protocol ID BPDU sent")
' > /tmp/invalid_protocol.py
错误: SSH session not active
2025-09-10 00:06:03,136 - test_security - ERROR - _test_invalid_protocol_id 执行失败: SSH session not active
2025-09-10 00:06:03,136 - test_security - INFO - 执行测试: _test_invalid_version
2025-09-10 00:06:03,137 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 使用无效版本号（正常RSTP应该是2）
invalid_version_bpdu = Raw(load=b"  ÿ  " + b" " * 30)

packet = eth/llc/invalid_version_bpdu
sendp(packet, iface=interface, count=5, inter=1, verbose=0)
print("Invalid version BPDU sent")
' > /tmp/invalid_version.py
错误: SSH session not active
2025-09-10 00:06:03,138 - test_security - ERROR - _test_invalid_version 执行失败: SSH session not active
2025-09-10 00:06:03,138 - test_security - INFO - 执行测试: _test_invalid_message_type
2025-09-10 00:06:03,138 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 使用无效消息类型（正常配置BPDU是0x00，TCN是0x80）
invalid_type_bpdu = Raw(load=b"  ÿ " + b" " * 30)

packet = eth/llc/invalid_type_bpdu
sendp(packet, iface=interface, count=5, inter=1, verbose=0)
print("Invalid message type BPDU sent")
' > /tmp/invalid_type.py
错误: SSH session not active
2025-09-10 00:06:03,139 - test_security - ERROR - _test_invalid_message_type 执行失败: SSH session not active
2025-09-10 00:06:03,140 - test_security - INFO - 执行测试: _test_corrupted_fields
2025-09-10 00:06:03,140 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *
import random

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)

# 创建包含随机损坏数据的BPDU
corrupted_data = bytes([random.randint(0, 255) for _ in range(36)])
corrupted_bpdu = Raw(load=corrupted_data)

packet = eth/llc/corrupted_bpdu
sendp(packet, iface=interface, count=5, inter=1, verbose=0)
print("Corrupted BPDU sent")
' > /tmp/corrupted_bpdu.py
错误: SSH session not active
2025-09-10 00:06:03,140 - test_security - ERROR - _test_corrupted_fields 执行失败: SSH session not active
2025-09-10 00:06:06,304 - RSTPTest - INFO - 测试完成: test_malformed_bpdu_handling (耗时: 25.24秒)
2025-09-10 00:06:06,305 - RSTPTest - INFO - ============================================================

2025-09-10 00:06:06,307 - RSTPTest - INFO - ============================================================
2025-09-10 00:06:06,307 - RSTPTest - INFO - 开始测试: test_non_standard_bpdu_handling
2025-09-10 00:06:06,307 - RSTPTest - INFO - ============================================================
2025-09-10 00:06:06,308 - test_security - INFO - 开始非标准BPDU处理测试
2025-09-10 00:06:06,313 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 00:06:06,313 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 00:06:06,313 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 00:06:06,313 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 00:06:06,314 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 00:06:06,314 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 00:06:06,314 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 00:06:06,314 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 00:06:06,826 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 00:06:06,827 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 00:06:07,899 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 00:06:07,899 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 00:06:07,899 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 00:06:07,900 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 00:06:08,359 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 00:06:08,839 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 00:06:08,840 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 00:06:08,943 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 00:06:09,039 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 00:06:09,039 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 00:06:09,039 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 00:06:09,040 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 00:06:09,040 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 00:06:09,040 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 00:06:09,040 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 00:06:09,040 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 00:06:09,041 - SSH_TestNode1 - WARNING - TestNode1: SSH连接已断开，尝试重连...
2025-09-10 00:06:09,159 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 00:06:09,281 - SSH_TestNode1 - INFO - TestNode1: SSH重连成功
2025-09-10 00:06:09,769 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 00:06:30,008 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 00:06:40,120 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 00:06:50,239 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 00:07:00,358 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 00:07:10,478 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 00:07:20,591 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 00:07:20,592 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 00:07:20,592 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 00:07:20,592 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 00:07:20,592 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 00:08:23,873 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 00:09:19,421 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 00:09:19,422 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 00:09:27,638 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 00:09:34,911 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 00:09:34,911 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 00:09:34,911 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 00:09:34,911 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 00:09:34,912 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 00:09:34,912 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 00:09:34,912 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 00:09:34,912 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 00:09:35,414 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 00:09:35,761 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 00:09:35,935 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 00:09:36,106 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 00:09:36,272 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 00:09:36,437 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 00:09:36,606 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 00:09:36,607 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 00:09:36,607 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 00:09:36,607 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 00:09:36,607 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 00:09:37,781 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 00:09:39,000 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 00:09:39,001 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 00:09:39,171 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 00:09:39,439 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 00:09:39,439 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 00:09:39,440 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 00:09:44,441 - test_security - INFO - 执行测试: _test_pvst_plus_bpdu
2025-09-10 00:09:44,445 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

# PVST+ 使用不同的目标MAC地址
pvst_mac = "01:00:0c:cc:cc:cd"
interface = "eth0"

eth = Ether(dst=pvst_mac, src="00:11:22:33:44:55")
# PVST+ 使用SNAP封装
snap = SNAP(OUI=0x00000c, code=0x010b)
# 模拟PVST+ BPDU结构
pvst_bpdu = Raw(load=b"    " + b" " * 30 + b" ")  # 包含VLAN ID

packet = eth/snap/pvst_bpdu
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("PVST+ BPDU sent")
' > /tmp/pvst_bpdu.py
错误: 
2025-09-10 00:09:44,446 - test_security - ERROR - _test_pvst_plus_bpdu 执行失败: 
2025-09-10 00:09:44,447 - test_security - INFO - 执行测试: _test_cisco_proprietary_bpdu
2025-09-10 00:09:44,447 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 模拟包含Cisco专有扩展的BPDU
cisco_bpdu = Raw(load=b"    " + b" " * 30 + 
                     b" )   ")  # Cisco OUI + 专有数据

packet = eth/llc/cisco_bpdu
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("Cisco proprietary BPDU sent")
' > /tmp/cisco_bpdu.py
错误: SSH session not active
2025-09-10 00:09:44,448 - test_security - ERROR - _test_cisco_proprietary_bpdu 执行失败: SSH session not active
2025-09-10 00:09:44,448 - test_security - INFO - 执行测试: _test_vlan_tagged_bpdu
2025-09-10 00:09:44,449 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
# 添加VLAN标签
vlan = Dot1Q(vlan=100)
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
bpdu = STP(bpdutype=0x00, rootid=32768, bridgeid=32768)

packet = eth/vlan/llc/bpdu
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("VLAN tagged BPDU sent")
' > /tmp/vlan_bpdu.py
错误: SSH session not active
2025-09-10 00:09:44,449 - test_security - ERROR - _test_vlan_tagged_bpdu 执行失败: SSH session not active
2025-09-10 00:09:44,450 - test_security - INFO - 执行测试: _test_unknown_tlv_bpdu
2025-09-10 00:09:44,450 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 标准BPDU + 未知TLV
standard_bpdu = b"    " + b" " * 30
unknown_tlv = b"ÿÿ "  # 未知类型和长度的TLV
bpdu_with_tlv = Raw(load=standard_bpdu + unknown_tlv)

packet = eth/llc/bpdu_with_tlv
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("BPDU with unknown TLV sent")
' > /tmp/unknown_tlv.py
错误: SSH session not active
2025-09-10 00:09:44,451 - test_security - ERROR - _test_unknown_tlv_bpdu 执行失败: SSH session not active
2025-09-10 00:09:44,631 - test_security - INFO - 非标准BPDU处理测试完成
2025-09-10 00:09:44,632 - RSTPTest - INFO - 测试完成: test_non_standard_bpdu_handling (耗时: 218.32秒)
2025-09-10 00:09:44,632 - RSTPTest - INFO - ============================================================

2025-09-10 00:09:44,634 - RSTPTest - INFO - ============================================================
2025-09-10 00:09:44,634 - RSTPTest - INFO - 开始测试: test_bpdu_guard_functionality
2025-09-10 00:09:44,634 - RSTPTest - INFO - ============================================================
2025-09-10 00:09:44,635 - test_security - INFO - 开始BPDU防护功能测试
2025-09-10 00:09:44,639 - NetworkTopology - INFO - 创建RSTP线性拓扑...
2025-09-10 00:09:44,640 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 00:09:44,640 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 00:09:44,640 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 00:09:44,640 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 00:09:44,640 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 00:09:44,641 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 00:09:44,641 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 00:09:45,155 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 00:09:45,155 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 00:09:46,183 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 00:09:46,183 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 00:09:46,184 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth2']
2025-09-10 00:09:46,184 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 00:09:46,639 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 00:09:46,639 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 00:09:46,743 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 00:09:46,840 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 00:09:46,840 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 00:09:46,840 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 00:09:46,841 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 00:09:46,841 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 00:09:46,841 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 00:09:46,841 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 00:09:46,842 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 00:09:46,842 - SSH_TestNode1 - WARNING - TestNode1: SSH连接已断开，尝试重连...
2025-09-10 00:09:46,967 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 00:09:47,094 - SSH_TestNode1 - INFO - TestNode1: SSH重连成功
2025-09-10 00:10:02,499 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 00:10:02,838 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 00:10:03,005 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 00:10:03,175 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 00:10:03,349 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 00:10:03,519 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 00:10:03,686 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 00:10:03,687 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 00:10:03,687 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 00:10:03,687 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 00:10:03,687 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 00:10:04,869 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 00:10:06,061 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 00:10:06,061 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 00:10:06,230 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 00:10:06,494 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 00:10:06,494 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 00:10:06,495 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 00:10:06,495 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 00:10:06,495 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 00:10:06,495 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 00:10:06,495 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 00:10:06,496 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 00:10:06,995 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 00:10:07,331 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 00:10:07,498 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 00:10:07,673 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 00:10:07,840 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 00:10:08,010 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 00:10:08,180 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 00:10:08,181 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 00:10:08,181 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 00:10:08,181 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0']
2025-09-10 00:10:08,181 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 00:10:09,381 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 00:10:09,382 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 00:10:09,556 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 00:10:09,826 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 00:10:09,826 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 00:10:09,826 - NetworkTopology - INFO - 线性拓扑创建完成
2025-09-10 00:10:14,884 - test_security - WARNING - 启用BPDU防护失败: 
2025-09-10 00:10:14,931 - test_security - INFO - 边缘端口 eth2 初始状态: unknown
2025-09-10 00:10:14,932 - test_security - INFO - 向边缘端口 eth2 发送BPDU
2025-09-10 00:10:21,805 - test_security - INFO - BPDU防护触发后端口 eth2 状态: unknown
2025-09-10 00:10:21,805 - test_security - ERROR - BPDU防护功能异常：端口未被禁用
2025-09-10 00:10:22,032 - RSTPTest - INFO - 测试完成: test_bpdu_guard_functionality (耗时: 37.40秒)
2025-09-10 00:10:22,033 - RSTPTest - INFO - ============================================================

2025-09-10 00:10:22,035 - RSTPTest - INFO - ============================================================
2025-09-10 00:10:22,035 - RSTPTest - INFO - 开始测试: test_root_guard_functionality
2025-09-10 00:10:22,036 - RSTPTest - INFO - ============================================================
2025-09-10 00:10:22,036 - test_security - INFO - 开始根防护功能测试
2025-09-10 00:10:22,058 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 00:10:22,058 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 00:10:22,058 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 00:10:22,059 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 00:10:22,059 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 00:10:22,059 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 00:10:22,059 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 00:10:22,059 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 00:10:22,570 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 00:10:22,571 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 00:10:23,602 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 00:10:23,603 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 00:10:23,603 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 00:10:23,603 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 00:10:24,059 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 00:10:24,543 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 00:10:24,543 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 00:10:24,647 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 00:10:24,748 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 00:10:24,748 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 00:10:24,748 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 00:10:24,749 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 00:10:24,749 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 00:10:24,749 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 00:10:24,749 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 00:10:24,750 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 00:10:25,247 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 00:10:25,586 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 00:10:25,750 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 00:10:25,925 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 00:10:26,086 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 00:10:26,250 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 00:10:26,419 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 00:10:26,419 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 00:10:26,419 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 00:10:26,420 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 00:10:26,420 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 00:10:27,628 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 00:10:28,822 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 00:10:28,823 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 00:10:28,989 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 00:10:29,255 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 00:10:29,256 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 00:10:29,256 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 00:10:29,256 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 00:10:29,257 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 00:10:29,257 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 00:10:29,257 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 00:10:29,257 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 00:10:29,746 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 00:10:30,078 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 00:10:30,246 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 00:10:30,414 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 00:10:30,582 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 00:10:30,745 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 00:10:30,918 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 00:10:30,918 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 00:10:30,918 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 00:10:30,918 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 00:10:30,919 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 00:10:32,098 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 00:10:33,307 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 00:10:33,307 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 00:10:33,477 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 00:10:33,743 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 00:10:33,743 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 00:10:33,744 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 00:10:39,002 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 00:10:39,160 - test_security - INFO - 当前根桥ID: 
2025-09-10 00:10:39,259 - test_security - WARNING - 启用根防护失败: 
2025-09-10 00:10:39,259 - test_security - INFO - 在端口 eth1 启用根防护
2025-09-10 00:10:39,307 - test_security - INFO - 端口 eth1 初始状态: unknown
2025-09-10 00:10:39,307 - test_security - INFO - 发送更优BPDU尝试劫持根桥
2025-09-10 00:10:55,235 - test_security - INFO - 根防护触发后端口 eth1 状态: unknown
2025-09-10 00:10:55,534 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 00:10:55,691 - test_security - INFO - 根防护功能正常：根桥身份未被劫持
2025-09-10 00:10:55,692 - test_security - ERROR - 根防护功能异常：端口未进入阻塞状态
2025-09-10 00:10:55,692 - test_security - INFO - 测试根防护端口 eth1 恢复功能
2025-09-10 00:10:55,692 - test_security - INFO - 停止发送更优BPDU
2025-09-10 00:11:05,698 - test_security - INFO - 端口恢复后状态: unknown
2025-09-10 00:11:05,699 - test_security - WARNING - 根防护端口未能自动恢复
2025-09-10 00:11:05,926 - RSTPTest - INFO - 测试完成: test_root_guard_functionality (耗时: 43.89秒)
2025-09-10 00:11:05,927 - RSTPTest - INFO - ============================================================

2025-09-10 00:11:05,929 - RSTPTest - INFO - ============================================================
2025-09-10 00:11:05,929 - RSTPTest - INFO - 开始测试: test_loop_guard_functionality
2025-09-10 00:11:05,929 - RSTPTest - INFO - ============================================================
2025-09-10 00:11:05,930 - test_security - INFO - 开始环路防护功能测试
2025-09-10 00:11:05,930 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 00:11:05,930 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 00:11:05,930 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 00:11:05,930 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 00:11:05,931 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 00:11:05,931 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 00:11:05,931 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 00:11:05,931 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 00:11:06,417 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 00:11:06,417 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 00:11:07,453 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 00:11:07,454 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 00:11:07,454 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 00:11:07,454 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 00:11:07,915 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 00:11:08,394 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 00:11:08,394 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 00:11:08,498 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 00:11:08,594 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 00:11:08,594 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 00:11:08,594 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 00:11:08,595 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 00:11:08,595 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 00:11:08,595 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 00:11:08,595 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 00:11:08,595 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 00:11:09,088 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 00:11:09,433 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 00:11:09,599 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 00:11:09,764 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 00:11:09,929 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 00:11:10,096 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 00:11:10,263 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 00:11:10,263 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 00:11:10,263 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 00:11:10,264 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 00:11:10,264 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 00:11:11,440 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 00:11:12,658 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 00:11:12,659 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 00:11:12,829 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 00:11:13,095 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 00:11:13,096 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 00:11:13,096 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 00:11:13,096 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 00:11:13,096 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 00:11:13,096 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 00:11:13,097 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 00:11:13,097 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 00:11:13,579 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 00:11:13,917 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 00:11:14,081 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 00:11:14,246 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 00:11:14,412 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 00:11:14,582 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 00:11:14,756 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 00:11:14,756 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 00:11:14,756 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 00:11:14,756 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 00:11:14,757 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 00:11:15,937 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 00:11:17,164 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 00:11:17,165 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 00:11:17,338 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 00:11:17,604 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 00:11:17,604 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 00:11:17,604 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 00:11:22,663 - test_security - WARNING - 启用环路防护失败: 
2025-09-10 00:11:22,663 - test_security - INFO - 在端口 eth1 启用环路防护
2025-09-10 00:11:22,710 - test_security - INFO - 端口 eth1 初始状态: unknown
2025-09-10 00:11:22,711 - test_security - INFO - 模拟单向链路故障
2025-09-10 00:11:22,711 - test_security - INFO - 停止从测试节点发送BPDU
2025-09-10 00:11:42,847 - test_security - INFO - 环路防护触发后端口 eth1 状态: unknown
2025-09-10 00:11:42,847 - test_security - WARNING - 环路防护功能异常：端口未进入阻塞状态
2025-09-10 00:11:42,848 - test_security - INFO - 测试环路防护端口 eth1 恢复功能
2025-09-10 00:11:42,848 - test_security - INFO - 恢复BPDU发送
2025-09-10 00:11:52,981 - test_security - INFO - 端口恢复后状态: unknown
2025-09-10 00:11:52,982 - test_security - WARNING - 环路防护端口未能自动恢复
2025-09-10 00:11:53,189 - test_security - INFO - 环路防护功能测试完成
2025-09-10 00:11:53,190 - RSTPTest - INFO - 测试完成: test_loop_guard_functionality (耗时: 47.26秒)
2025-09-10 00:11:53,190 - RSTPTest - INFO - ============================================================

2025-09-10 00:11:53,190 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 00:11:53,191 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 00:11:53,191 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 00:11:53,708 - __main__ - INFO - ============================================================
2025-09-10 00:11:53,708 - __main__ - INFO - 测试完成，返回码: 1
2025-09-10 00:11:53,708 - __main__ - INFO - ============================================================
