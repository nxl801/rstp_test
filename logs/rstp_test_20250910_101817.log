2025-09-10 10:18:17,231 - root - INFO - 日志系统初始化完成，日志文件: logs\rstp_test_20250910_101817.log
2025-09-10 10:18:17,699 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 10:18:17,699 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 10:18:17,828 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 10:18:17,829 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 10:18:17,961 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 10:18:17,962 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 10:18:17,967 - RSTPTest - INFO - ============================================================
2025-09-10 10:18:17,967 - RSTPTest - INFO - 开始测试: test_port_state_transitions
2025-09-10 10:18:17,968 - RSTPTest - INFO - ============================================================
2025-09-10 10:18:17,969 - test_additional_rstp - INFO - 开始端口状态转换测试
2025-09-10 10:18:17,969 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 10:18:17,969 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 10:18:17,970 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 10:18:17,970 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 10:18:17,970 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 10:18:17,970 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 10:18:17,970 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 10:18:17,976 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 10:18:18,035 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 10:18:18,035 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 10:18:18,035 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 10:18:18,035 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 10:18:18,565 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 10:18:18,566 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 10:18:19,601 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 10:18:19,601 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 10:18:19,602 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 10:18:19,602 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 10:18:20,066 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 10:18:20,553 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 10:18:20,553 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 10:18:20,662 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 10:18:20,758 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 10:18:20,758 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 10:18:20,758 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 10:18:20,759 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 10:18:20,759 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 10:18:20,759 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 10:18:20,759 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 10:18:20,767 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 10:18:20,768 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 10:18:30,839 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 10:18:30,840 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 10:18:30,840 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 10:18:30,840 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 10:18:30,840 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 10:19:01,209 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 10:19:21,452 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:19:36,575 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 10:19:46,700 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:20:01,829 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:20:11,949 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:20:22,068 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:20:22,069 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 10:20:22,069 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 10:20:22,069 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 10:20:22,069 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 10:21:25,696 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 10:21:59,221 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 10:21:59,222 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 10:22:02,426 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 10:22:12,649 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 10:22:12,649 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 10:22:12,650 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 10:22:12,650 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 10:22:12,650 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 10:22:12,650 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 10:22:12,650 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 10:22:12,658 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 10:22:12,658 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 10:22:22,730 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 10:22:22,730 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 10:22:22,731 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 10:22:22,731 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 10:22:22,731 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 10:22:53,119 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 10:23:13,359 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:23:23,477 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 10:23:33,598 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:23:43,718 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:23:53,838 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:24:03,958 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:24:03,958 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 10:24:03,958 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 10:24:03,958 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 10:24:03,959 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 10:24:51,209 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 10:25:32,567 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 10:25:32,567 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 10:25:34,856 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 10:25:38,119 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 10:25:38,119 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 10:25:38,119 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 10:25:46,366 - test_additional_rstp - INFO - 使用网桥: rstp0
2025-09-10 10:25:46,366 - test_additional_rstp - INFO - === 步骤1: 禁用端口触发状态转换 ===
2025-09-10 10:25:46,620 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:25:46,780 - RSTPTest - INFO - 测试完成: test_port_state_transitions (耗时: 448.81秒)
2025-09-10 10:25:46,780 - RSTPTest - INFO - ============================================================

2025-09-10 10:25:46,783 - RSTPTest - INFO - ============================================================
2025-09-10 10:25:46,783 - RSTPTest - INFO - 开始测试: test_bpdu_propagation_and_keepalive
2025-09-10 10:25:46,783 - RSTPTest - INFO - ============================================================
2025-09-10 10:25:46,784 - test_additional_rstp - INFO - 开始BPDU传播和保活机制测试
2025-09-10 10:25:46,784 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 10:25:46,785 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 10:25:46,785 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 10:25:46,785 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 10:25:46,785 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 10:25:46,785 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 10:25:46,786 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 10:25:46,786 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 10:25:47,281 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 10:25:47,281 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 10:25:48,313 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 10:25:48,314 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 10:25:48,314 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 10:25:48,314 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 10:25:48,777 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 10:25:49,254 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 10:25:49,254 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 10:25:49,362 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 10:25:49,458 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 10:25:49,458 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 10:25:49,458 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 10:25:49,459 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 10:25:49,459 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 10:25:49,459 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 10:25:49,459 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 10:25:49,459 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 10:26:02,064 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 10:26:02,411 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:26:02,589 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 10:26:02,761 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:26:02,934 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:26:03,113 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:26:03,284 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:26:03,284 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 10:26:03,285 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 10:26:03,285 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 10:26:03,285 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 10:26:04,518 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 10:26:05,749 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 10:26:05,749 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 10:26:05,923 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 10:26:06,196 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 10:26:06,196 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 10:26:06,196 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 10:26:06,197 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 10:26:06,197 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 10:26:06,197 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 10:26:06,197 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 10:26:06,197 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 10:26:19,667 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 10:26:20,024 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:26:20,202 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 10:26:20,384 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:26:20,557 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:26:20,726 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:26:20,903 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:26:20,903 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 10:26:20,903 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 10:26:20,904 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 10:26:20,904 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 10:26:22,109 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 10:26:23,370 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 10:26:23,370 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 10:26:23,543 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 10:26:23,814 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 10:26:23,814 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 10:26:23,815 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 10:26:32,152 - test_additional_rstp - INFO - === 步骤1: 验证分布式BPDU生成 ===
2025-09-10 10:26:32,158 - test_additional_rstp - INFO - 检测到网桥接口: ['18:', '26:']
2025-09-10 10:26:32,158 - test_additional_rstp - INFO - 在接口 18: 上捕获BPDU...
2025-09-10 10:26:32,159 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: 18:, 数量: 10)
2025-09-10 10:26:32,234 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-10 10:26:32,235 - test_additional_rstp - WARNING - 在 18: 上未捕获到BPDU
2025-09-10 10:26:32,235 - test_additional_rstp - INFO - 在接口 26: 上捕获BPDU...
2025-09-10 10:26:32,235 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: 26:, 数量: 10)
2025-09-10 10:26:32,298 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-10 10:26:32,298 - test_additional_rstp - WARNING - 在 26: 上未捕获到BPDU
2025-09-10 10:26:32,299 - test_additional_rstp - INFO - 总共捕获 0 个BPDU，来自 0 个不同源
2025-09-10 10:26:32,299 - test_additional_rstp - WARNING - 未检测到BPDU传播
2025-09-10 10:26:32,299 - test_additional_rstp - INFO - BPDU传播和保活机制测试完成
2025-09-10 10:26:32,300 - RSTPTest - INFO - 测试完成: test_bpdu_propagation_and_keepalive (耗时: 45.52秒)
2025-09-10 10:26:32,300 - RSTPTest - INFO - ============================================================

2025-09-10 10:26:32,301 - RSTPTest - INFO - ============================================================
2025-09-10 10:26:32,301 - RSTPTest - INFO - 开始测试: test_disabled_port_exclusion_enhanced
2025-09-10 10:26:32,302 - RSTPTest - INFO - ============================================================
2025-09-10 10:26:32,302 - test_additional_rstp - INFO - 开始增强的禁用端口排除测试
2025-09-10 10:26:32,302 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 10:26:32,302 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 10:26:32,303 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 10:26:32,303 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 10:26:32,303 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 10:26:32,303 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 10:26:32,303 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 10:26:32,303 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 10:26:32,796 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 10:26:32,796 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 10:26:33,841 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 10:26:33,841 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 10:26:33,842 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 10:26:33,842 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 10:26:34,297 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 10:26:34,777 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 10:26:34,777 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 10:26:34,881 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 10:26:34,977 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 10:26:34,977 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 10:26:34,977 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 10:26:34,977 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 10:26:34,978 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 10:26:34,978 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 10:26:34,978 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 10:26:34,979 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 10:26:35,510 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 10:26:35,862 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:26:36,038 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 10:26:36,225 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:26:36,419 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:26:36,594 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:26:36,765 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:26:36,765 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 10:26:36,766 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 10:26:36,766 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 10:26:36,766 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 10:26:38,004 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 10:26:39,227 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 10:26:39,227 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 10:26:39,410 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 10:26:39,693 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 10:26:39,693 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 10:26:39,693 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 10:26:39,694 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 10:26:39,694 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 10:26:39,694 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 10:26:39,694 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 10:26:39,694 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 10:26:40,226 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 10:26:40,625 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:26:40,799 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 10:26:40,971 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:26:41,152 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:26:41,325 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:26:41,499 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:26:41,499 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 10:26:41,500 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 10:26:41,500 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 10:26:41,500 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 10:26:42,733 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 10:26:43,996 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 10:26:43,997 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 10:26:44,185 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 10:26:44,462 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 10:26:44,462 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 10:26:44,463 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 10:26:49,924 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:26:50,090 - test_additional_rstp - INFO - 初始活动端口数量: 0
2025-09-10 10:26:50,091 - RSTPTest - INFO - 测试完成: test_disabled_port_exclusion_enhanced (耗时: 17.79秒)
2025-09-10 10:26:50,091 - RSTPTest - INFO - ============================================================

2025-09-10 10:26:50,091 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 10:26:50,092 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 10:26:50,092 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 10:26:50,230 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 10:26:50,231 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 10:26:50,348 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 10:26:50,348 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 10:26:50,497 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 10:26:50,497 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 10:26:50,498 - RSTPTest - INFO - ============================================================
2025-09-10 10:26:50,498 - RSTPTest - INFO - 开始测试: test_proposal_agreement_handshake
2025-09-10 10:26:50,499 - RSTPTest - INFO - ============================================================
2025-09-10 10:26:50,500 - test_advanced_rstp_mechanisms - INFO - 开始测试RSTP Proposal/Agreement握手机制
2025-09-10 10:26:50,500 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 10:26:50,500 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 10:26:50,501 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 10:26:50,501 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 10:26:50,501 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 10:26:50,501 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 10:26:50,501 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 10:26:50,507 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 10:26:50,567 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 10:26:50,567 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 10:26:50,568 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 10:26:50,568 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 10:26:51,116 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 10:26:51,117 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 10:26:52,160 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 10:26:52,160 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 10:26:52,161 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 10:26:52,161 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 10:26:52,619 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 10:26:53,104 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 10:26:53,105 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 10:26:53,209 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 10:26:53,304 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 10:26:53,305 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 10:26:53,305 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 10:26:53,305 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 10:26:53,306 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 10:26:53,306 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 10:26:53,306 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 10:26:53,314 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 10:26:53,315 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 10:26:53,444 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 10:26:53,445 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 10:26:53,445 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 10:26:53,445 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 10:26:53,445 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 10:26:54,004 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 10:26:54,345 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:26:54,526 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 10:26:54,701 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:26:54,877 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:26:55,052 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:26:55,231 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:26:55,232 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 10:26:55,232 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 10:26:55,232 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 10:26:55,232 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 10:26:56,450 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 10:26:57,669 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 10:26:57,669 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 10:26:57,856 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 10:26:58,132 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 10:26:58,132 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 10:26:58,132 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 10:26:58,133 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 10:26:58,133 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 10:26:58,133 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 10:26:58,133 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 10:26:58,141 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 10:26:58,142 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 10:26:58,275 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 10:26:58,276 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 10:26:58,276 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 10:26:58,277 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 10:26:58,277 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 10:26:58,831 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 10:26:59,184 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:26:59,360 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 10:26:59,548 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:26:59,729 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:26:59,907 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:27:00,091 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:27:00,091 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 10:27:00,091 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 10:27:00,092 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 10:27:00,092 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 10:27:01,352 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 10:27:02,665 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 10:27:02,665 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 10:27:02,843 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 10:27:03,123 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 10:27:03,124 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 10:27:03,124 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 10:27:08,125 - test_advanced_rstp_mechanisms - INFO - 开始在eth0上捕获BPDU
2025-09-10 10:27:08,125 - test_advanced_rstp_mechanisms - INFO - 触发拓扑变更...
2025-09-10 10:27:14,413 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: eth0, 数量: 20)
2025-09-10 10:27:14,453 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-10 10:27:14,454 - test_advanced_rstp_mechanisms - INFO - 捕获到0个BPDU数据包
2025-09-10 10:27:14,454 - test_advanced_rstp_mechanisms - WARNING - 未能捕获到完整的BPDU握手序列，可能是环境限制
2025-09-10 10:27:14,454 - test_advanced_rstp_mechanisms - INFO - 改为验证网络收敛状态...
2025-09-10 10:27:14,751 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:27:14,909 - test_advanced_rstp_mechanisms - INFO - ✓ 网络收敛正常，存在根端口
2025-09-10 10:27:16,909 - test_advanced_rstp_mechanisms - INFO - RSTP Proposal/Agreement握手机制测试通过
2025-09-10 10:27:16,911 - RSTPTest - INFO - 测试完成: test_proposal_agreement_handshake (耗时: 26.41秒)
2025-09-10 10:27:16,911 - RSTPTest - INFO - ============================================================

2025-09-10 10:27:16,913 - RSTPTest - INFO - ============================================================
2025-09-10 10:27:16,913 - RSTPTest - INFO - 开始测试: test_tcn_topology_change_notification
2025-09-10 10:27:16,913 - RSTPTest - INFO - ============================================================
2025-09-10 10:27:16,914 - test_advanced_rstp_mechanisms - INFO - 开始测试TCN拓扑变更通知机制
2025-09-10 10:27:16,914 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 10:27:16,914 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 10:27:16,914 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 10:27:16,915 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 10:27:16,915 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 10:27:16,915 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 10:27:16,915 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 10:27:16,916 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 10:27:17,387 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 10:27:17,387 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 10:27:18,428 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 10:27:18,428 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 10:27:18,428 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 10:27:18,429 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 10:27:18,888 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 10:27:19,368 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 10:27:19,368 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 10:27:19,472 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 10:27:19,568 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 10:27:19,569 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 10:27:19,569 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 10:27:19,569 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 10:27:19,569 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 10:27:19,570 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 10:27:19,570 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 10:27:19,570 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 10:27:20,072 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 10:27:20,422 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:27:20,595 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 10:27:20,770 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:27:20,946 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:27:21,124 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:27:21,300 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:27:21,300 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 10:27:21,301 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 10:27:21,301 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 10:27:21,301 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 10:27:22,556 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 10:27:23,807 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 10:27:23,807 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 10:27:23,985 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 10:27:24,266 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 10:27:24,267 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 10:27:24,267 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 10:27:24,267 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 10:27:24,267 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 10:27:24,267 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 10:27:24,268 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 10:27:24,268 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 10:27:24,770 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 10:27:25,526 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:27:25,714 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 10:27:25,900 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:27:26,077 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:27:26,254 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:27:26,428 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:27:26,429 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 10:27:26,429 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 10:27:26,429 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 10:27:26,430 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 10:27:27,685 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 10:27:28,961 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 10:27:28,961 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 10:27:29,136 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 10:27:29,401 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 10:27:29,402 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 10:27:29,402 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 10:27:39,659 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 10:27:39,813 - test_advanced_rstp_mechanisms - INFO - 初始网桥端口数量: 3
2025-09-10 10:27:39,813 - test_advanced_rstp_mechanisms - INFO - 触发拓扑变更：临时禁用/启用端口
2025-09-10 10:27:39,964 - test_advanced_rstp_mechanisms - INFO - 初始TC计数: 0
2025-09-10 10:27:48,243 - test_advanced_rstp_mechanisms - INFO - 变更后TC计数: 0
2025-09-10 10:27:48,243 - test_advanced_rstp_mechanisms - INFO - 拓扑变更可能未被检测到，这可能是正常的（取决于实现）
2025-09-10 10:27:48,534 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 10:27:48,688 - test_advanced_rstp_mechanisms - INFO - 最终网桥端口数量: 3
2025-09-10 10:27:48,843 - test_advanced_rstp_mechanisms - INFO - 当前MAC地址表老化时间: 300秒
2025-09-10 10:27:48,843 - test_advanced_rstp_mechanisms - WARNING - MAC地址表老化时间(300秒)未缩短，可能是实现差异
2025-09-10 10:27:48,844 - test_advanced_rstp_mechanisms - INFO - TCN拓扑变更通知机制测试通过 - 使用安全的端口状态变更方式
2025-09-10 10:27:48,844 - RSTPTest - INFO - 测试完成: test_tcn_topology_change_notification (耗时: 31.93秒)
2025-09-10 10:27:48,845 - RSTPTest - INFO - ============================================================

2025-09-10 10:27:48,846 - RSTPTest - INFO - ============================================================
2025-09-10 10:27:48,846 - RSTPTest - INFO - 开始测试: test_edge_port_behavior
2025-09-10 10:27:48,847 - RSTPTest - INFO - ============================================================
2025-09-10 10:27:48,847 - test_advanced_rstp_mechanisms - INFO - 开始测试边缘端口行为
2025-09-10 10:27:48,847 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 10:27:48,848 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 10:27:48,848 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 10:27:48,848 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 10:27:48,848 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 10:27:48,848 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 10:27:48,849 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 10:27:48,849 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 10:27:49,351 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 10:27:49,351 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 10:27:50,409 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 10:27:50,410 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 10:27:50,410 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 10:27:50,410 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 10:27:50,870 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 10:27:51,348 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 10:27:51,348 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 10:27:51,452 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 10:27:51,548 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 10:27:51,549 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 10:27:51,549 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 10:27:51,549 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 10:27:51,550 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 10:27:51,550 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 10:27:51,550 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 10:27:51,550 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 10:27:52,049 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 10:27:52,404 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:27:52,583 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 10:27:52,761 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:27:52,941 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:27:53,118 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:27:53,283 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:27:53,284 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 10:27:53,284 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 10:27:53,284 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 10:27:53,284 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 10:27:54,540 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 10:27:55,807 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 10:27:55,808 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 10:27:55,987 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 10:27:56,255 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 10:27:56,256 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 10:27:56,256 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 10:27:56,256 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 10:27:56,256 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 10:27:56,257 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 10:27:56,257 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 10:27:56,257 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 10:27:56,781 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 10:27:57,139 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:27:57,309 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 10:27:57,483 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:27:57,655 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:27:57,826 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:27:58,007 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:27:58,008 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 10:27:58,008 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 10:27:58,008 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 10:27:58,008 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 10:27:59,243 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 10:28:00,520 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 10:28:00,520 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 10:28:00,700 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 10:28:00,986 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 10:28:00,986 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 10:28:00,986 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 10:28:07,914 - test_advanced_rstp_mechanisms - INFO - 可用端口: ['enp1s0']
2025-09-10 10:28:07,915 - test_advanced_rstp_mechanisms - INFO - 选择端口enp1s0作为边缘端口测试
2025-09-10 10:28:08,023 - test_advanced_rstp_mechanisms - INFO - 测试边缘端口立即转发特性
2025-09-10 10:28:10,919 - test_advanced_rstp_mechanisms - INFO - 边缘端口状态转换时间: 2.74秒
2025-09-10 10:28:10,920 - test_advanced_rstp_mechanisms - INFO - ✓ 边缘端口转换时间合理
2025-09-10 10:28:11,033 - test_advanced_rstp_mechanisms - INFO - ✓ 边缘端口状态变化未产生TCN
2025-09-10 10:28:11,033 - test_advanced_rstp_mechanisms - INFO - 测试边缘端口收到BPDU后的行为
2025-09-10 10:28:11,192 - test_advanced_rstp_mechanisms - INFO - 边缘端口状态: 1
1
normal
2025-09-10 10:28:11,193 - test_advanced_rstp_mechanisms - INFO - 边缘端口行为测试通过
2025-09-10 10:28:11,194 - RSTPTest - INFO - 测试完成: test_edge_port_behavior (耗时: 22.35秒)
2025-09-10 10:28:11,194 - RSTPTest - INFO - ============================================================

2025-09-10 10:28:11,197 - RSTPTest - INFO - ============================================================
2025-09-10 10:28:11,197 - RSTPTest - INFO - 开始测试: test_shared_vs_point_to_point_links
2025-09-10 10:28:11,197 - RSTPTest - INFO - ============================================================
2025-09-10 10:28:11,198 - test_advanced_rstp_mechanisms - INFO - 开始测试不同链路类型的行为差异
2025-09-10 10:28:11,199 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 10:28:11,199 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 10:28:11,199 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 10:28:11,199 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 10:28:11,199 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 10:28:11,200 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 10:28:11,200 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 10:28:11,200 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 10:28:11,715 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 10:28:11,715 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 10:28:12,749 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 10:28:12,749 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 10:28:12,749 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 10:28:12,750 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 10:28:13,216 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 10:28:13,699 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 10:28:13,699 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 10:28:13,803 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 10:28:13,900 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 10:28:13,900 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 10:28:13,900 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 10:28:13,901 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 10:28:13,901 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 10:28:13,901 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 10:28:13,901 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 10:28:13,902 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 10:28:14,420 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 10:28:14,772 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:28:14,952 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 10:28:15,119 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:28:15,304 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:28:15,478 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:28:15,671 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:28:15,672 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 10:28:15,672 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 10:28:15,672 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 10:28:15,672 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 10:28:16,918 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 10:28:18,165 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 10:28:18,166 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 10:28:18,349 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 10:28:18,619 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 10:28:18,620 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 10:28:18,620 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 10:28:18,620 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 10:28:18,621 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 10:28:18,621 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 10:28:18,621 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 10:28:18,621 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 10:28:19,119 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 10:28:19,474 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:28:19,664 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 10:28:19,838 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:28:20,019 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:28:20,189 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:28:20,364 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:28:20,364 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 10:28:20,364 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 10:28:20,365 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 10:28:20,365 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 10:28:21,577 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 10:28:22,892 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 10:28:22,893 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 10:28:23,068 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 10:28:23,338 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 10:28:23,338 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 10:28:23,338 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 10:28:28,449 - test_advanced_rstp_mechanisms - INFO - 检测到的链路类型: {}
2025-09-10 10:28:28,449 - test_advanced_rstp_mechanisms - INFO - 测试点对点链路收敛性能
2025-09-10 10:28:32,430 - test_advanced_rstp_mechanisms - INFO - 收敛时间: 3.98秒
2025-09-10 10:28:32,430 - test_advanced_rstp_mechanisms - INFO - 验证链路类型识别
2025-09-10 10:28:32,431 - test_advanced_rstp_mechanisms - INFO - 不同链路类型行为差异测试通过
2025-09-10 10:28:32,431 - RSTPTest - INFO - 测试完成: test_shared_vs_point_to_point_links (耗时: 21.23秒)
2025-09-10 10:28:32,432 - RSTPTest - INFO - ============================================================

2025-09-10 10:28:32,432 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 10:28:32,433 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 10:28:32,433 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 10:28:32,569 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 10:28:32,569 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 10:28:32,689 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 10:28:32,689 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 10:28:32,821 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 10:28:32,822 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 10:28:32,822 - RSTPTest - INFO - ============================================================
2025-09-10 10:28:32,823 - RSTPTest - INFO - 开始测试: test_backup_port_concept_verification
2025-09-10 10:28:32,823 - RSTPTest - INFO - ============================================================
2025-09-10 10:28:32,824 - test_backup_port_simulation - INFO - 开始备份端口概念验证测试
2025-09-10 10:28:32,824 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 10:28:32,824 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 10:28:32,824 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 10:28:32,825 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 10:28:32,825 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 10:28:32,825 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 10:28:32,825 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 10:28:32,831 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 10:28:32,889 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 10:28:32,889 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 10:28:32,889 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 10:28:32,890 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 10:28:33,406 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 10:28:33,407 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 10:28:34,438 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 10:28:34,439 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 10:28:34,439 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 10:28:34,439 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 10:28:34,902 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 10:28:35,380 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 10:28:35,380 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 10:28:35,483 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 10:28:35,579 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 10:28:35,579 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 10:28:35,579 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 10:28:35,580 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 10:28:35,580 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 10:28:35,580 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 10:28:35,580 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 10:28:35,588 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 10:28:35,589 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 10:28:35,716 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 10:28:35,717 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 10:28:35,717 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 10:28:35,717 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 10:28:35,718 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 10:28:36,299 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 10:28:36,659 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:28:36,849 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 10:28:37,022 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:28:37,211 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:28:37,377 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:28:37,552 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:28:37,552 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 10:28:37,553 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 10:28:37,553 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 10:28:37,553 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 10:28:38,831 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 10:28:40,107 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 10:28:40,107 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 10:28:40,285 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 10:28:40,556 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 10:28:40,557 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 10:28:40,557 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 10:28:40,557 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 10:28:40,557 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 10:28:40,558 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 10:28:40,558 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 10:28:40,566 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 10:28:40,567 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 10:28:40,695 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 10:28:40,695 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 10:28:40,696 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 10:28:40,696 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 10:28:40,696 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 10:28:41,254 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 10:28:41,620 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:28:41,799 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 10:28:41,973 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:28:42,143 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:28:42,312 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:28:42,481 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:28:42,482 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 10:28:42,482 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 10:28:42,482 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 10:28:42,482 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 10:28:43,700 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 10:28:44,982 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 10:28:44,983 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 10:28:45,158 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 10:28:45,451 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 10:28:45,452 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 10:28:45,452 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 10:28:55,710 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:28:55,866 - test_backup_port_simulation - INFO - === 当前端口状态 ===
2025-09-10 10:28:55,867 - test_backup_port_simulation - INFO - 端口 eth0: 角色=root, 状态=disabled
2025-09-10 10:28:55,867 - test_backup_port_simulation - INFO - 端口 eth2: 角色=unknown, 状态=disabled
2025-09-10 10:28:55,867 - test_backup_port_simulation - INFO - 端口 eth3: 角色=unknown, 状态=disabled
2025-09-10 10:28:55,868 - test_backup_port_simulation - INFO - ⚠ 在当前点对点拓扑中未检测到备份端口（符合预期）
2025-09-10 10:28:55,868 - test_backup_port_simulation - INFO - 备份端口通常出现在共享介质网段中，当前测试环境为点对点链路
2025-09-10 10:28:55,868 - test_backup_port_simulation - INFO - 端口角色分布: {}
2025-09-10 10:28:55,868 - test_backup_port_simulation - INFO - === RSTP端口角色覆盖分析 ===
2025-09-10 10:28:55,869 - test_backup_port_simulation - INFO - - root端口: 未检测到
2025-09-10 10:28:55,869 - test_backup_port_simulation - INFO - - designated端口: 未检测到
2025-09-10 10:28:55,869 - test_backup_port_simulation - INFO - - alternate端口: 未检测到
2025-09-10 10:28:55,869 - test_backup_port_simulation - INFO - - backup端口: 未检测到（在点对点拓扑中为正常现象）
2025-09-10 10:28:55,869 - test_backup_port_simulation - INFO - 备份端口概念验证测试完成
2025-09-10 10:28:55,870 - RSTPTest - INFO - 测试完成: test_backup_port_concept_verification (耗时: 23.05秒)
2025-09-10 10:28:55,870 - RSTPTest - INFO - ============================================================

2025-09-10 10:28:55,872 - RSTPTest - INFO - ============================================================
2025-09-10 10:28:55,872 - RSTPTest - INFO - 开始测试: test_shared_medium_simulation_attempt
2025-09-10 10:28:55,872 - RSTPTest - INFO - ============================================================
2025-09-10 10:28:55,873 - test_backup_port_simulation - INFO - 开始共享介质模拟尝试
2025-09-10 10:28:55,873 - test_backup_port_simulation - INFO - === 尝试创建共享介质模拟场景 ===
2025-09-10 10:28:55,873 - test_backup_port_simulation - INFO - 创建中心交换机模拟共享介质...
2025-09-10 10:28:55,873 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 10:28:55,873 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 10:28:55,873 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 10:28:55,874 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 10:28:55,874 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 10:28:55,874 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 10:28:55,874 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 10:28:55,874 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 10:28:56,378 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 10:28:56,378 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 10:28:57,410 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 10:28:57,411 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 10:28:57,411 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 10:28:57,411 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 10:28:57,870 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 10:28:58,350 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 10:28:58,350 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 10:28:58,454 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 10:28:58,551 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 10:28:58,552 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 10:28:58,552 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 10:28:58,552 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 10:28:58,553 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 10:28:58,553 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 10:28:58,553 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 10:28:58,553 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 10:28:59,075 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 10:28:59,437 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:28:59,621 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 10:28:59,798 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:28:59,972 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:29:00,142 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:29:00,318 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:29:00,318 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 10:29:00,319 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 10:29:00,319 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 10:29:00,319 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 10:29:01,568 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 10:29:02,808 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 10:29:02,808 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 10:29:02,976 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 10:29:03,249 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 10:29:03,249 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 10:29:03,250 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 10:29:03,250 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 10:29:03,250 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 10:29:03,250 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 10:29:03,250 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 10:29:03,251 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 10:29:03,761 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 10:29:04,106 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:29:04,278 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 10:29:04,447 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:29:04,614 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:29:04,791 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:29:04,965 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:29:04,965 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 10:29:04,965 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 10:29:04,966 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 10:29:04,966 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 10:29:06,196 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 10:29:07,479 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 10:29:07,480 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 10:29:07,644 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 10:29:07,921 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 10:29:07,921 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 10:29:07,921 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 10:29:18,177 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:29:18,335 - test_backup_port_simulation - INFO - === 分析当前端口配置 ===
2025-09-10 10:29:18,335 - test_backup_port_simulation - INFO - ⚠ 未检测到备份端口
2025-09-10 10:29:18,335 - test_backup_port_simulation - INFO - 这在当前测试环境中是正常的，因为缺乏真正的共享介质
2025-09-10 10:29:18,336 - test_backup_port_simulation - INFO - 共享介质模拟尝试完成
2025-09-10 10:29:18,336 - RSTPTest - INFO - 测试完成: test_shared_medium_simulation_attempt (耗时: 22.46秒)
2025-09-10 10:29:18,337 - RSTPTest - INFO - ============================================================

2025-09-10 10:29:18,338 - RSTPTest - INFO - ============================================================
2025-09-10 10:29:18,338 - RSTPTest - INFO - 开始测试: test_backup_port_documentation_verification
2025-09-10 10:29:18,338 - RSTPTest - INFO - ============================================================
2025-09-10 10:29:18,339 - test_backup_port_simulation - INFO - 开始备份端口文档验证
2025-09-10 10:29:18,339 - test_backup_port_simulation - INFO - ✓ PortRole.BACKUP 存在
2025-09-10 10:29:18,339 - test_backup_port_simulation - INFO - === 备份端口理论特性验证 ===
2025-09-10 10:29:18,340 - test_backup_port_simulation - INFO - purpose: 为共享介质网段提供冗余
2025-09-10 10:29:18,340 - test_backup_port_simulation - INFO - difference_from_alternate: 备份端口是同一交换机上指定端口的备份，而备用端口是不同交换机提供的路径
2025-09-10 10:29:18,340 - test_backup_port_simulation - INFO - state: Discarding
2025-09-10 10:29:18,340 - test_backup_port_simulation - INFO - scenario: 出现在连接到集线器或共享介质的场景中
2025-09-10 10:29:18,341 - test_backup_port_simulation - INFO - fast_transition: 当对应的指定端口失效时，可以快速转换为指定端口
2025-09-10 10:29:18,341 - test_backup_port_simulation - INFO - === 端口角色对比 ===
2025-09-10 10:29:18,341 - test_backup_port_simulation - INFO - root: 连接到根桥的最佳路径
2025-09-10 10:29:18,341 - test_backup_port_simulation - INFO - designated: 为网段提供转发服务
2025-09-10 10:29:18,341 - test_backup_port_simulation - INFO - alternate: 提供到根桥的备用路径（来自其他交换机）
2025-09-10 10:29:18,342 - test_backup_port_simulation - INFO - backup: 同一交换机上指定端口的备份（共享介质场景）
2025-09-10 10:29:18,342 - test_backup_port_simulation - INFO - === 测试覆盖率分析 ===
2025-09-10 10:29:18,342 - test_backup_port_simulation - INFO - 已覆盖: Root Port, Designated Port, Alternate Port, Disabled Port
2025-09-10 10:29:18,342 - test_backup_port_simulation - INFO - 部分覆盖: Backup Port (概念验证)
2025-09-10 10:29:18,343 - test_backup_port_simulation - INFO - 覆盖限制: 测试框架无法创建真正的共享介质拓扑
2025-09-10 10:29:18,343 - test_backup_port_simulation - INFO - 建议: 在实际部署环境中使用集线器或配置交换机共享模式进行完整测试
2025-09-10 10:29:18,343 - test_backup_port_simulation - INFO - 备份端口文档验证完成
2025-09-10 10:29:18,344 - RSTPTest - INFO - 测试完成: test_backup_port_documentation_verification (耗时: 0.01秒)
2025-09-10 10:29:18,344 - RSTPTest - INFO - ============================================================

2025-09-10 10:29:18,345 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 10:29:18,345 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 10:29:18,345 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 10:29:18,480 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 10:29:18,480 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 10:29:18,600 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 10:29:18,601 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 10:29:18,734 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 10:29:18,735 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 10:29:18,735 - RSTPTest - INFO - ============================================================
2025-09-10 10:29:18,735 - RSTPTest - INFO - 开始测试: test_direct_link_failure
2025-09-10 10:29:18,736 - RSTPTest - INFO - ============================================================
2025-09-10 10:29:18,737 - test_convergence - INFO - 开始直接链路故障测试
2025-09-10 10:29:18,737 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 10:29:18,737 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 10:29:18,737 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 10:29:18,738 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 10:29:18,738 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 10:29:18,738 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 10:29:18,738 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 10:29:18,743 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 10:29:18,799 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 10:29:18,800 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 10:29:18,800 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 10:29:18,800 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 10:29:19,314 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 10:29:19,314 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 10:29:20,370 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 10:29:20,371 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 10:29:20,371 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 10:29:20,371 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 10:29:20,835 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 10:29:21,319 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 10:29:21,319 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 10:29:21,423 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 10:29:21,518 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 10:29:21,519 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 10:29:21,519 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 10:29:21,519 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 10:29:21,519 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 10:29:21,520 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 10:29:21,520 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 10:29:21,528 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 10:29:21,528 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 10:29:21,658 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 10:29:21,658 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 10:29:21,658 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 10:29:21,659 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 10:29:21,659 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 10:29:22,218 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 10:29:22,570 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:29:22,754 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 10:29:22,919 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:29:23,093 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:29:23,270 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:29:23,442 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:29:23,442 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 10:29:23,443 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 10:29:23,443 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 10:29:23,443 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 10:29:24,660 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 10:29:25,896 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 10:29:25,896 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 10:29:26,074 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 10:29:26,346 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 10:29:26,347 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 10:29:26,347 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 10:29:26,347 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 10:29:26,347 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 10:29:26,348 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 10:29:26,348 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 10:29:26,356 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 10:29:26,356 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 10:29:26,483 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 10:29:26,484 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 10:29:26,484 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 10:29:26,484 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 10:29:26,485 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 10:29:27,037 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 10:29:27,381 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:29:27,550 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 10:29:27,714 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:29:27,891 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:29:28,067 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:29:28,233 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:29:28,233 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 10:29:28,233 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 10:29:28,233 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 10:29:28,234 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 10:29:29,470 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 10:29:30,742 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 10:29:30,742 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 10:29:30,916 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 10:29:31,185 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 10:29:31,186 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 10:29:31,186 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 10:29:31,518 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 10:29:31,778 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:29:32,846 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.33秒
2025-09-10 10:29:32,847 - test_convergence - INFO - 初始收敛时间: 1.33秒
2025-09-10 10:29:33,103 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:29:33,258 - test_convergence - INFO - DUT的Root Port: eth2
2025-09-10 10:29:33,259 - FaultInjector_DUT - INFO - 断开链路: eth2
2025-09-10 10:29:33,517 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth2 (code=1)，将在逻辑上标记为已断开
2025-09-10 10:29:33,517 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 10:29:33,817 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:29:34,821 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.30秒
2025-09-10 10:29:35,081 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:29:35,627 - RSTPTest - INFO - 测试完成: test_direct_link_failure (耗时: 16.89秒)
2025-09-10 10:29:35,627 - RSTPTest - INFO - ============================================================

2025-09-10 10:29:35,681 - RSTPTest - INFO - ============================================================
2025-09-10 10:29:35,681 - RSTPTest - INFO - 开始测试: test_multiple_link_failures
2025-09-10 10:29:35,681 - RSTPTest - INFO - ============================================================
2025-09-10 10:29:35,682 - test_convergence - INFO - 开始多重链路故障测试
2025-09-10 10:29:35,682 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 10:29:35,682 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 10:29:35,683 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 10:29:35,683 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 10:29:35,683 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 10:29:35,683 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 10:29:35,683 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 10:29:35,683 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 10:29:36,158 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 10:29:36,158 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 10:29:37,198 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 10:29:37,198 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 10:29:37,198 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 10:29:37,199 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 10:29:37,658 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 10:29:38,134 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 10:29:38,134 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 10:29:38,238 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 10:29:38,334 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 10:29:38,335 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 10:29:38,335 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 10:29:38,335 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 10:29:38,335 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 10:29:38,336 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 10:29:38,336 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 10:29:38,336 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 10:29:38,846 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 10:29:39,186 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:29:39,355 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 10:29:39,529 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:29:39,708 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:29:39,883 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:29:40,064 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:29:40,064 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 10:29:40,065 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 10:29:40,065 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 10:29:40,065 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 10:29:41,320 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 10:29:42,530 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 10:29:42,530 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 10:29:42,697 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 10:29:42,984 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 10:29:42,985 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 10:29:42,985 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 10:29:42,985 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 10:29:42,986 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 10:29:42,986 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 10:29:42,986 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 10:29:42,986 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 10:29:43,482 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 10:29:43,825 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:29:44,008 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 10:29:44,182 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:29:44,358 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:29:44,529 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:29:44,711 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:29:44,712 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 10:29:44,712 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 10:29:44,712 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 10:29:44,713 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 10:29:45,928 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 10:29:47,222 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 10:29:47,222 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 10:29:47,403 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 10:29:47,676 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 10:29:47,676 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 10:29:47,676 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 10:29:47,676 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 10:29:47,932 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:29:48,949 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.27秒
2025-09-10 10:29:48,950 - test_convergence - INFO - 注入故障: eth0
2025-09-10 10:29:48,950 - FaultInjector_DUT - INFO - 断开链路: eth0
2025-09-10 10:29:49,165 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth0 (code=1)，将在逻辑上标记为已断开
2025-09-10 10:29:49,165 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 10:29:49,465 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:29:50,434 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.27秒
2025-09-10 10:29:50,434 - test_convergence - INFO - eth0故障收敛时间: 1.27秒
2025-09-10 10:29:52,435 - test_convergence - INFO - 注入故障: eth2
2025-09-10 10:29:52,435 - FaultInjector_DUT - INFO - 断开链路: eth2
2025-09-10 10:29:52,653 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth2 (code=1)，将在逻辑上标记为已断开
2025-09-10 10:29:52,654 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 10:29:52,952 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:29:53,908 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.25秒
2025-09-10 10:29:53,908 - test_convergence - INFO - eth2故障收敛时间: 1.25秒
2025-09-10 10:29:55,910 - FaultInjector_DUT - INFO - 恢复链路: eth0
2025-09-10 10:29:56,129 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth0 (code=1)，将在逻辑上标记为已恢复
2025-09-10 10:29:56,129 - FaultInjector_DUT - INFO - 恢复链路: eth2
2025-09-10 10:29:56,392 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth2 (code=1)，将在逻辑上标记为已恢复
2025-09-10 10:29:56,393 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 10:29:56,692 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:29:57,661 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.27秒
2025-09-10 10:29:57,662 - test_convergence - INFO - 最终恢复收敛时间: 1.27秒
2025-09-10 10:29:57,662 - test_convergence - INFO - 多重链路故障测试通过
2025-09-10 10:29:57,663 - RSTPTest - INFO - 测试完成: test_multiple_link_failures (耗时: 21.98秒)
2025-09-10 10:29:57,663 - RSTPTest - INFO - ============================================================

2025-09-10 10:29:57,665 - RSTPTest - INFO - ============================================================
2025-09-10 10:29:57,665 - RSTPTest - INFO - 开始测试: test_convergence_with_traffic
2025-09-10 10:29:57,665 - RSTPTest - INFO - ============================================================
2025-09-10 10:29:57,666 - test_convergence - INFO - 开始带流量的收敛测试
2025-09-10 10:29:57,666 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 10:29:57,666 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 10:29:57,667 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 10:29:57,667 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 10:29:57,667 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 10:29:57,667 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 10:29:57,667 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 10:29:57,667 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 10:29:58,136 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 10:29:58,137 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 10:29:59,161 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 10:29:59,161 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 10:29:59,162 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 10:29:59,162 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 10:29:59,618 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 10:30:00,102 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 10:30:00,102 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 10:30:00,207 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 10:30:00,306 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 10:30:00,306 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 10:30:00,306 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 10:30:00,307 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 10:30:00,307 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 10:30:00,307 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 10:30:00,307 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 10:30:00,307 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 10:30:00,835 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 10:30:01,190 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:30:01,372 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 10:30:01,556 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:30:01,726 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:30:01,906 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:30:02,080 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:30:02,081 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 10:30:02,081 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 10:30:02,081 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 10:30:02,082 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 10:30:03,319 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 10:30:04,548 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 10:30:04,548 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 10:30:04,728 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 10:30:04,997 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 10:30:04,998 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 10:30:04,998 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 10:30:04,998 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 10:30:04,999 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 10:30:04,999 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 10:30:04,999 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 10:30:04,999 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 10:30:05,504 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 10:30:05,870 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:30:06,044 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 10:30:06,219 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:30:06,420 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:30:06,593 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:30:06,768 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:30:06,769 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 10:30:06,769 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 10:30:06,769 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 10:30:06,770 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 10:30:08,024 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 10:30:09,287 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 10:30:09,287 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 10:30:09,466 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 10:30:09,738 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 10:30:09,738 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 10:30:09,738 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 10:30:15,849 - TrafficGenerator - INFO - 启动iperf3服务器: 192.168.184.131:5201
2025-09-10 10:30:17,929 - TrafficGenerator - ERROR - iperf3服务器启动失败
2025-09-10 10:30:20,851 - TrafficGenerator - INFO - 启动iperf3客户端: -> 192.168.184.131:5201
2025-09-10 10:30:20,851 - TrafficGenerator - INFO - iperf3客户端已启动 (udp, 100M)
2025-09-10 10:30:25,852 - FaultInjector_DUT - INFO - 断开链路: eth0
2025-09-10 10:30:26,072 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth0 (code=1)，将在逻辑上标记为已断开
2025-09-10 10:30:36,073 - test_convergence - INFO - 丢包数: 0
2025-09-10 10:30:36,073 - test_convergence - INFO - 估计中断时间: 0.000秒
2025-09-10 10:30:36,073 - TrafficGenerator - INFO - 停止流量生成
2025-09-10 10:30:38,137 - test_convergence - INFO - 带流量的收敛测试通过
2025-09-10 10:30:38,138 - RSTPTest - INFO - 测试完成: test_convergence_with_traffic (耗时: 40.47秒)
2025-09-10 10:30:38,138 - RSTPTest - INFO - ============================================================

2025-09-10 10:30:38,139 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 10:30:38,139 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 10:30:38,140 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 10:30:38,287 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 10:30:38,287 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 10:30:38,462 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 10:30:38,463 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 10:30:38,603 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 10:30:38,604 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 10:30:38,604 - RSTPTest - INFO - ============================================================
2025-09-10 10:30:38,604 - RSTPTest - INFO - 开始测试: test_backup_port_simulation
2025-09-10 10:30:38,604 - RSTPTest - INFO - ============================================================
2025-09-10 10:30:38,605 - test_enhanced_rstp_coverage - INFO - 开始备份端口模拟测试
2025-09-10 10:30:38,606 - test_enhanced_rstp_coverage - INFO - 创建模拟共享网段拓扑
2025-09-10 10:30:39,062 - test_enhanced_rstp_coverage - INFO - ✓ 创建连接: rstp0:dut_port1 <-> shared_segment:shared_port1
2025-09-10 10:30:39,409 - test_enhanced_rstp_coverage - INFO - ✓ 创建连接: rstp0:dut_port2 <-> shared_segment:shared_port2
2025-09-10 10:30:40,046 - test_enhanced_rstp_coverage - INFO - ✓ 创建远程交换机: remote_switch
2025-09-10 10:30:40,046 - test_enhanced_rstp_coverage - INFO - 等待RSTP收敛...
2025-09-10 10:30:55,304 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:30:55,461 - test_enhanced_rstp_coverage - INFO - DUT桥信息: BridgeInfo(bridge_id='', root_id='', root_port='eth0', root_path_cost=0, protocol_version='unknown', hello_time=0, forward_delay=0, max_age=0, topology_changes=0, ports={'eth0': PortInfo(name='eth0', role=<PortRole.ROOT: 'root'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth2': PortInfo(name='eth2', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth3': PortInfo(name='eth3', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')})
2025-09-10 10:30:55,462 - test_enhanced_rstp_coverage - INFO - 清理测试环境
2025-09-10 10:30:56,159 - test_enhanced_rstp_coverage - INFO - ✓ 备份端口模拟测试完成
2025-09-10 10:30:56,160 - RSTPTest - INFO - 测试完成: test_backup_port_simulation (耗时: 17.56秒)
2025-09-10 10:30:56,160 - RSTPTest - INFO - ============================================================

2025-09-10 10:30:56,161 - RSTPTest - INFO - ============================================================
2025-09-10 10:30:56,162 - RSTPTest - INFO - 开始测试: test_comprehensive_port_state_transitions
2025-09-10 10:30:56,162 - RSTPTest - INFO - ============================================================
2025-09-10 10:30:56,163 - test_enhanced_rstp_coverage - INFO - 开始全面端口状态转换测试
2025-09-10 10:30:56,163 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 10:30:56,163 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 10:30:56,163 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 10:30:56,164 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 10:30:56,164 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 10:30:56,164 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 10:30:56,164 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 10:30:56,205 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 10:30:56,268 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 10:30:56,268 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 10:30:56,268 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 10:30:56,268 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 10:30:56,796 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 10:30:56,796 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 10:30:57,829 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 10:30:57,829 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 10:30:57,830 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 10:30:57,830 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 10:30:58,295 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 10:30:58,780 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 10:30:58,781 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 10:30:58,888 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 10:30:58,988 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 10:30:58,989 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 10:30:58,989 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 10:30:58,989 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 10:30:58,989 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 10:30:58,989 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 10:30:58,990 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 10:30:58,997 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 10:30:58,997 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 10:30:59,142 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 10:30:59,142 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 10:30:59,143 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 10:30:59,143 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 10:30:59,143 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 10:30:59,704 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 10:31:00,063 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:31:00,245 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 10:31:00,418 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:31:00,591 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:31:00,761 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:31:00,936 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:31:00,937 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 10:31:00,937 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 10:31:00,937 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 10:31:00,937 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 10:31:02,195 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 10:31:03,432 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 10:31:03,432 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 10:31:03,618 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 10:31:03,880 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 10:31:03,880 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 10:31:03,880 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 10:31:03,880 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 10:31:03,881 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 10:31:03,881 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 10:31:03,881 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 10:31:03,888 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 10:31:03,889 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 10:31:04,022 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 10:31:04,022 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 10:31:04,022 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 10:31:04,023 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 10:31:04,023 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 10:31:04,569 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 10:31:04,920 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:31:05,094 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 10:31:05,265 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:31:05,436 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:31:05,609 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:31:05,788 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:31:05,789 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 10:31:05,789 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 10:31:05,789 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 10:31:05,789 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 10:31:07,066 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 10:31:08,341 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 10:31:08,341 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 10:31:08,524 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 10:31:08,802 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 10:31:08,802 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 10:31:08,802 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 10:31:09,008 - test_enhanced_rstp_coverage - INFO - 等待初始收敛...
2025-09-10 10:31:09,009 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 10:31:09,291 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:31:09,445 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.44秒
2025-09-10 10:31:09,743 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:31:09,927 - RSTPTest - INFO - 测试完成: test_comprehensive_port_state_transitions (耗时: 13.76秒)
2025-09-10 10:31:09,927 - RSTPTest - INFO - ============================================================

2025-09-10 10:31:09,930 - RSTPTest - INFO - ============================================================
2025-09-10 10:31:09,930 - RSTPTest - INFO - 开始测试: test_detailed_bpdu_analysis
2025-09-10 10:31:09,930 - RSTPTest - INFO - ============================================================
2025-09-10 10:31:09,931 - test_enhanced_rstp_coverage - INFO - 开始详细BPDU分析测试
2025-09-10 10:31:09,931 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 10:31:09,932 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 10:31:09,932 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 10:31:09,932 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 10:31:09,932 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 10:31:09,932 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 10:31:09,933 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 10:31:09,933 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 10:31:10,412 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 10:31:10,413 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 10:31:11,453 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 10:31:11,453 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 10:31:11,453 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 10:31:11,454 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 10:31:11,908 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 10:31:12,384 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 10:31:12,385 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 10:31:12,488 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 10:31:12,584 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 10:31:12,585 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 10:31:12,585 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 10:31:12,585 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 10:31:12,586 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 10:31:12,586 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 10:31:12,586 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 10:31:12,586 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 10:31:13,112 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 10:31:13,477 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:31:13,646 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 10:31:13,821 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:31:13,993 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:31:14,186 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:31:14,366 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:31:14,366 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 10:31:14,366 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 10:31:14,366 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 10:31:14,367 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 10:31:15,582 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 10:31:16,808 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 10:31:16,809 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 10:31:16,991 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 10:31:17,261 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 10:31:17,261 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 10:31:17,261 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 10:31:17,262 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 10:31:17,262 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 10:31:17,262 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 10:31:17,262 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 10:31:17,263 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 10:31:17,789 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 10:31:18,150 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:31:18,328 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 10:31:18,517 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:31:18,692 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:31:18,864 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:31:19,037 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:31:19,037 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 10:31:19,038 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 10:31:19,038 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 10:31:19,038 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 10:31:20,251 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 10:31:21,527 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 10:31:21,527 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 10:31:21,709 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 10:31:21,985 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 10:31:21,985 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 10:31:21,985 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 10:31:22,318 - test_enhanced_rstp_coverage - INFO - 等待RSTP收敛...
2025-09-10 10:31:22,318 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 10:31:22,571 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:31:22,728 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.41秒
2025-09-10 10:31:23,028 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:31:23,193 - test_enhanced_rstp_coverage - INFO - Hello Time: 0秒
2025-09-10 10:31:23,193 - test_enhanced_rstp_coverage - INFO - === 测试1: 验证分布式BPDU生成 ===
2025-09-10 10:31:23,193 - test_enhanced_rstp_coverage - INFO - 总共捕获0个BPDU，来自0个不同源
2025-09-10 10:31:23,212 - RSTPTest - INFO - 测试完成: test_detailed_bpdu_analysis (耗时: 13.28秒)
2025-09-10 10:31:23,213 - RSTPTest - INFO - ============================================================

2025-09-10 10:31:23,215 - RSTPTest - INFO - ============================================================
2025-09-10 10:31:23,215 - RSTPTest - INFO - 开始测试: test_topology_change_comprehensive
2025-09-10 10:31:23,215 - RSTPTest - INFO - ============================================================
2025-09-10 10:31:23,216 - test_enhanced_rstp_coverage - INFO - 开始全面拓扑变更测试
2025-09-10 10:31:23,216 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 10:31:23,216 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 10:31:23,217 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 10:31:23,217 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 10:31:23,217 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 10:31:23,218 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 10:31:23,218 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 10:31:23,218 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 10:31:23,936 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 10:31:23,937 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 10:31:24,986 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 10:31:24,987 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 10:31:24,987 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 10:31:24,987 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 10:31:25,444 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 10:31:25,924 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 10:31:25,925 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 10:31:26,028 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 10:31:26,124 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 10:31:26,124 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 10:31:26,125 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 10:31:26,125 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 10:31:26,125 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 10:31:26,125 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 10:31:26,125 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 10:31:26,126 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 10:31:26,648 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 10:31:26,995 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:31:27,174 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 10:31:27,348 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:31:27,527 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:31:27,712 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:31:27,884 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:31:27,885 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 10:31:27,885 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 10:31:27,885 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 10:31:27,885 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 10:31:29,170 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 10:31:30,433 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 10:31:30,433 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 10:31:30,611 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 10:31:30,885 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 10:31:30,885 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 10:31:30,886 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 10:31:30,886 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 10:31:30,886 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 10:31:30,886 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 10:31:30,887 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 10:31:30,887 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 10:31:31,405 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 10:31:31,761 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:31:31,938 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 10:31:32,114 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:31:32,284 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:31:32,456 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:31:32,623 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:31:32,623 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 10:31:32,623 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 10:31:32,624 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 10:31:32,624 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 10:31:33,840 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 10:31:35,121 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 10:31:35,121 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 10:31:35,295 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 10:31:35,570 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 10:31:35,571 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 10:31:35,571 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 10:31:35,780 - test_enhanced_rstp_coverage - INFO - 等待初始收敛...
2025-09-10 10:31:35,780 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 10:31:36,059 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:31:36,212 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.43秒
2025-09-10 10:31:36,511 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:31:36,968 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 10:31:37,124 - test_enhanced_rstp_coverage - INFO - 初始状态: DUT是根桥=True
2025-09-10 10:31:37,125 - test_enhanced_rstp_coverage - INFO - === 测试场景1: 根桥变更 ===
2025-09-10 10:31:37,125 - test_enhanced_rstp_coverage - INFO - === 测试场景2: 端口故障恢复 ===
2025-09-10 10:31:37,423 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:31:37,580 - test_enhanced_rstp_coverage - INFO - === 测试场景3: 端口优先级变更 ===
2025-09-10 10:31:37,879 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:31:38,036 - test_enhanced_rstp_coverage - WARNING - 未检测到明显的拓扑变更，可能是测试环境限制
2025-09-10 10:31:38,037 - test_enhanced_rstp_coverage - INFO - ✓ 全面拓扑变更测试完成
2025-09-10 10:31:38,038 - RSTPTest - INFO - 测试完成: test_topology_change_comprehensive (耗时: 14.82秒)
2025-09-10 10:31:38,038 - RSTPTest - INFO - ============================================================

2025-09-10 10:31:38,038 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 10:31:38,039 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 10:31:38,039 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 10:31:38,174 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 10:31:38,174 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 10:31:38,292 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 10:31:38,293 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 10:31:38,427 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 10:31:38,427 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 10:31:38,428 - RSTPTest - INFO - ============================================================
2025-09-10 10:31:38,428 - RSTPTest - INFO - 开始测试: test_rstp_reconvergence_no_switchover
2025-09-10 10:31:38,428 - RSTPTest - INFO - ============================================================
2025-09-10 10:31:38,429 - test_high_availability - INFO - 开始RSTP重构误判测试
2025-09-10 10:31:38,430 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 10:31:38,430 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 10:31:38,430 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 10:31:38,430 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 10:31:38,430 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 10:31:38,431 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 10:31:38,431 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 10:31:38,436 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 10:31:38,495 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 10:31:38,495 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 10:31:38,496 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 10:31:38,496 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 10:31:39,023 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 10:31:39,023 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 10:31:40,069 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 10:31:40,070 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 10:31:40,070 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 10:31:40,070 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 10:31:40,541 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 10:31:41,037 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 10:31:41,037 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 10:31:41,141 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 10:31:41,242 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 10:31:41,242 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 10:31:41,242 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 10:31:41,243 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 10:31:41,243 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 10:31:41,243 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 10:31:41,243 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 10:31:41,250 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 10:31:41,251 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 10:31:41,388 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 10:31:41,389 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 10:31:41,389 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 10:31:41,389 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 10:31:41,389 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 10:31:41,976 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 10:31:42,345 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:31:42,521 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 10:31:42,691 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:31:42,862 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:31:43,043 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:31:43,218 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:31:43,218 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 10:31:43,219 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 10:31:43,219 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 10:31:43,219 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 10:31:44,496 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 10:31:45,738 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 10:31:45,738 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 10:31:45,916 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 10:31:46,197 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 10:31:46,198 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 10:31:46,198 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 10:31:46,198 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 10:31:46,198 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 10:31:46,199 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 10:31:46,199 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 10:31:46,207 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 10:31:46,207 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 10:31:46,335 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 10:31:46,336 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 10:31:46,336 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 10:31:46,336 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 10:31:46,336 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 10:31:46,917 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 10:31:47,274 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:31:47,448 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 10:31:47,615 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:31:47,791 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:31:47,970 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:31:48,151 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:31:48,151 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 10:31:48,151 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 10:31:48,152 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 10:31:48,152 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 10:31:49,388 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 10:31:50,668 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 10:31:50,669 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 10:31:50,846 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 10:31:51,115 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 10:31:51,116 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 10:31:51,116 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 10:31:56,121 - test_high_availability - INFO - 初始HA状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-10 10:31:56,121 - test_high_availability - INFO - 在远端触发RSTP重构...
2025-09-10 10:31:56,121 - FaultInjector_TestNode2 - INFO - 断开链路: eth0
2025-09-10 10:31:56,294 - FaultInjector_TestNode2 - INFO - 链路已断开: eth0
2025-09-10 10:32:06,299 - test_high_availability - INFO - RSTP重构后HA状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-10 10:32:06,300 - FaultInjector_TestNode2 - INFO - 恢复链路: eth0
2025-09-10 10:32:06,437 - FaultInjector_TestNode2 - INFO - 链路已恢复: eth0
2025-09-10 10:32:06,438 - test_high_availability - INFO - RSTP重构误判测试完成
2025-09-10 10:32:06,439 - RSTPTest - INFO - 测试完成: test_rstp_reconvergence_no_switchover (耗时: 28.01秒)
2025-09-10 10:32:06,439 - RSTPTest - INFO - ============================================================

2025-09-10 10:32:06,441 - RSTPTest - INFO - ============================================================
2025-09-10 10:32:06,441 - RSTPTest - INFO - 开始测试: test_split_brain_scenario
2025-09-10 10:32:06,441 - RSTPTest - INFO - ============================================================
2025-09-10 10:32:06,442 - test_high_availability - INFO - 开始裂脑场景测试
2025-09-10 10:32:06,448 - test_high_availability - INFO - 初始状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-10 10:32:06,448 - test_high_availability - INFO - 断开同步链路: eth3
2025-09-10 10:32:06,448 - FaultInjector_DUT - INFO - 断开链路: eth3
2025-09-10 10:32:06,711 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth3 (code=1)，将在逻辑上标记为已断开
2025-09-10 10:32:16,712 - test_high_availability - WARNING - 裂脑测试需要访问两个控制器
2025-09-10 10:32:16,712 - FaultInjector_DUT - INFO - 恢复链路: eth3
2025-09-10 10:32:16,931 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth3 (code=1)，将在逻辑上标记为已恢复
2025-09-10 10:32:16,931 - test_high_availability - INFO - 裂脑场景测试完成
2025-09-10 10:32:16,932 - RSTPTest - INFO - 测试完成: test_split_brain_scenario (耗时: 10.49秒)
2025-09-10 10:32:16,932 - RSTPTest - INFO - ============================================================

2025-09-10 10:32:16,936 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 10:32:16,937 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 10:32:16,937 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 10:32:17,073 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 10:32:17,073 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 10:32:17,074 - RSTPTest - INFO - ============================================================
2025-09-10 10:32:17,074 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[12288]
2025-09-10 10:32:17,074 - RSTPTest - INFO - ============================================================
2025-09-10 10:32:17,075 - test_parameters - INFO - 测试网桥优先级: 12288
2025-09-10 10:32:18,611 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-10 10:32:20,718 - test_parameters - INFO - 从OVS配置读取到优先级: 12288
2025-09-10 10:32:20,718 - test_parameters - INFO - 优先级12288设置成功
2025-09-10 10:32:20,719 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[12288] (耗时: 3.64秒)
2025-09-10 10:32:20,719 - RSTPTest - INFO - ============================================================

2025-09-10 10:32:20,721 - RSTPTest - INFO - ============================================================
2025-09-10 10:32:20,721 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[16384]
2025-09-10 10:32:20,721 - RSTPTest - INFO - ============================================================
2025-09-10 10:32:20,722 - test_parameters - INFO - 测试网桥优先级: 16384
2025-09-10 10:32:22,259 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-10 10:32:24,367 - test_parameters - INFO - 从OVS配置读取到优先级: 16384
2025-09-10 10:32:24,367 - test_parameters - INFO - 优先级16384设置成功
2025-09-10 10:32:24,368 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[16384] (耗时: 3.65秒)
2025-09-10 10:32:24,368 - RSTPTest - INFO - ============================================================

2025-09-10 10:32:24,370 - RSTPTest - INFO - ============================================================
2025-09-10 10:32:24,370 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[32768]
2025-09-10 10:32:24,370 - RSTPTest - INFO - ============================================================
2025-09-10 10:32:24,371 - test_parameters - INFO - 测试网桥优先级: 32768
2025-09-10 10:32:25,916 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-10 10:32:28,024 - test_parameters - INFO - 从OVS配置读取到优先级: 32768
2025-09-10 10:32:28,024 - test_parameters - INFO - 优先级32768设置成功
2025-09-10 10:32:28,025 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[32768] (耗时: 3.65秒)
2025-09-10 10:32:28,025 - RSTPTest - INFO - ============================================================

2025-09-10 10:32:28,027 - RSTPTest - INFO - ============================================================
2025-09-10 10:32:28,027 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[61440]
2025-09-10 10:32:28,027 - RSTPTest - INFO - ============================================================
2025-09-10 10:32:28,028 - test_parameters - INFO - 测试网桥优先级: 61440
2025-09-10 10:32:29,570 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-10 10:32:31,678 - test_parameters - INFO - 从OVS配置读取到优先级: 61440
2025-09-10 10:32:31,679 - test_parameters - INFO - 优先级61440设置成功
2025-09-10 10:32:31,680 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[61440] (耗时: 3.65秒)
2025-09-10 10:32:31,680 - RSTPTest - INFO - ============================================================

2025-09-10 10:32:31,681 - RSTPTest - INFO - ============================================================
2025-09-10 10:32:31,682 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[4097]
2025-09-10 10:32:31,682 - RSTPTest - INFO - ============================================================
2025-09-10 10:32:31,682 - test_parameters - INFO - 测试无效优先级: 4097
2025-09-10 10:32:33,506 - test_parameters - INFO - DUT处理无效优先级 4097 -> 4097
2025-09-10 10:32:33,506 - test_parameters - WARNING - DUT接受了非标准优先级值 4097，不符合802.1D标准（应为4096的倍数）
2025-09-10 10:32:33,506 - test_parameters - INFO - 无效优先级4097被正确处理
2025-09-10 10:32:33,507 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[4097] (耗时: 1.82秒)
2025-09-10 10:32:33,507 - RSTPTest - INFO - ============================================================

2025-09-10 10:32:33,508 - RSTPTest - INFO - ============================================================
2025-09-10 10:32:33,509 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[12289]
2025-09-10 10:32:33,509 - RSTPTest - INFO - ============================================================
2025-09-10 10:32:33,509 - test_parameters - INFO - 测试无效优先级: 12289
2025-09-10 10:32:35,335 - test_parameters - INFO - DUT处理无效优先级 12289 -> 12289
2025-09-10 10:32:35,335 - test_parameters - WARNING - DUT接受了非标准优先级值 12289，不符合802.1D标准（应为4096的倍数）
2025-09-10 10:32:35,335 - test_parameters - INFO - 无效优先级12289被正确处理
2025-09-10 10:32:35,336 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[12289] (耗时: 1.83秒)
2025-09-10 10:32:35,336 - RSTPTest - INFO - ============================================================

2025-09-10 10:32:35,338 - RSTPTest - INFO - ============================================================
2025-09-10 10:32:35,338 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[70000]
2025-09-10 10:32:35,338 - RSTPTest - INFO - ============================================================
2025-09-10 10:32:35,339 - test_parameters - INFO - 测试无效优先级: 70000
2025-09-10 10:32:37,178 - test_parameters - INFO - DUT处理无效优先级 70000 -> 70000
2025-09-10 10:32:37,178 - test_parameters - WARNING - DUT接受了非标准优先级值 70000，不符合802.1D标准（应为4096的倍数）
2025-09-10 10:32:37,179 - test_parameters - INFO - 无效优先级70000被正确处理
2025-09-10 10:32:37,180 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[70000] (耗时: 1.84秒)
2025-09-10 10:32:37,180 - RSTPTest - INFO - ============================================================

2025-09-10 10:32:37,181 - RSTPTest - INFO - ============================================================
2025-09-10 10:32:37,181 - RSTPTest - INFO - 开始测试: test_hello_time
2025-09-10 10:32:37,182 - RSTPTest - INFO - ============================================================
2025-09-10 10:32:37,182 - test_parameters - INFO - 测试Hello Time参数
2025-09-10 10:32:38,768 - test_parameters - INFO - 设置Hello Time: 1秒
2025-09-10 10:32:40,946 - test_parameters - INFO - Hello Time 1秒设置成功
2025-09-10 10:32:40,947 - test_parameters - INFO - 设置Hello Time: 2秒
2025-09-10 10:32:43,172 - test_parameters - INFO - Hello Time 2秒设置成功
2025-09-10 10:32:43,172 - test_parameters - INFO - 设置Hello Time: 5秒
2025-09-10 10:32:45,394 - test_parameters - INFO - Hello Time 5秒设置成功
2025-09-10 10:32:45,394 - test_parameters - INFO - Hello Time测试通过
2025-09-10 10:32:45,395 - RSTPTest - INFO - 测试完成: test_hello_time (耗时: 8.21秒)
2025-09-10 10:32:45,395 - RSTPTest - INFO - ============================================================

2025-09-10 10:32:45,397 - RSTPTest - INFO - ============================================================
2025-09-10 10:32:45,397 - RSTPTest - INFO - 开始测试: test_forward_delay
2025-09-10 10:32:45,397 - RSTPTest - INFO - ============================================================
2025-09-10 10:32:45,398 - test_parameters - INFO - 测试Forward Delay参数
2025-09-10 10:32:47,036 - test_parameters - INFO - 设置Forward Delay: 4秒
2025-09-10 10:32:49,214 - test_parameters - INFO - Forward Delay 4秒设置成功
2025-09-10 10:32:49,214 - test_parameters - INFO - 设置Forward Delay: 10秒
2025-09-10 10:32:51,438 - test_parameters - INFO - Forward Delay 10秒设置成功
2025-09-10 10:32:51,439 - test_parameters - INFO - 设置Forward Delay: 15秒
2025-09-10 10:32:53,662 - test_parameters - INFO - Forward Delay 15秒设置成功
2025-09-10 10:32:53,663 - test_parameters - INFO - Forward Delay测试通过
2025-09-10 10:32:53,663 - RSTPTest - INFO - 测试完成: test_forward_delay (耗时: 8.27秒)
2025-09-10 10:32:53,664 - RSTPTest - INFO - ============================================================

2025-09-10 10:32:53,665 - RSTPTest - INFO - ============================================================
2025-09-10 10:32:53,665 - RSTPTest - INFO - 开始测试: test_max_age
2025-09-10 10:32:53,666 - RSTPTest - INFO - ============================================================
2025-09-10 10:32:53,666 - test_parameters - INFO - 测试Max Age参数
2025-09-10 10:32:55,295 - test_parameters - INFO - 设置Max Age: 6秒
2025-09-10 10:32:57,476 - test_parameters - INFO - Max Age 6秒设置成功
2025-09-10 10:32:57,476 - test_parameters - INFO - 设置Max Age: 10秒
2025-09-10 10:32:59,698 - test_parameters - INFO - Max Age 10秒设置成功
2025-09-10 10:32:59,698 - test_parameters - INFO - 设置Max Age: 20秒
2025-09-10 10:33:01,924 - test_parameters - INFO - Max Age 20秒设置成功
2025-09-10 10:33:01,924 - test_parameters - INFO - Max Age测试通过
2025-09-10 10:33:01,925 - RSTPTest - INFO - 测试完成: test_max_age (耗时: 8.26秒)
2025-09-10 10:33:01,925 - RSTPTest - INFO - ============================================================

2025-09-10 10:33:02,046 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 10:33:02,046 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 10:33:02,190 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 10:33:02,190 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 10:33:02,191 - RSTPTest - INFO - ============================================================
2025-09-10 10:33:02,191 - RSTPTest - INFO - 开始测试: test_port_cost
2025-09-10 10:33:02,191 - RSTPTest - INFO - ============================================================
2025-09-10 10:33:02,192 - test_parameters - INFO - 测试端口路径成本
2025-09-10 10:33:02,192 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 10:33:02,193 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 10:33:02,193 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 10:33:02,193 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 10:33:02,194 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 10:33:02,194 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 10:33:02,194 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 10:33:02,201 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 10:33:02,256 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 10:33:02,256 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 10:33:02,257 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 10:33:02,257 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 10:33:02,786 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 10:33:02,786 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 10:33:03,835 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 10:33:03,835 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 10:33:03,835 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 10:33:03,835 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 10:33:04,295 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 10:33:04,779 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 10:33:04,779 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 10:33:04,883 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 10:33:04,979 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 10:33:04,979 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 10:33:04,979 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 10:33:04,979 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 10:33:04,979 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 10:33:04,980 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 10:33:04,980 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 10:33:04,988 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 10:33:04,989 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 10:33:05,121 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 10:33:05,121 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 10:33:05,122 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 10:33:05,122 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 10:33:05,122 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 10:33:05,679 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 10:33:06,037 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:33:06,220 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 10:33:06,386 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:33:06,557 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:33:06,731 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:33:06,906 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:33:06,906 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 10:33:06,907 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 10:33:06,907 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 10:33:06,907 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 10:33:08,165 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 10:33:09,410 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 10:33:09,410 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 10:33:09,588 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 10:33:09,903 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 10:33:09,905 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 10:33:09,905 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 10:33:09,905 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 10:33:09,906 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 10:33:09,906 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 10:33:09,914 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 10:33:09,927 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 10:33:09,928 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 10:33:10,059 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 10:33:10,059 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 10:33:10,060 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 10:33:10,060 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 10:33:10,060 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 10:33:10,624 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 10:33:30,868 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:33:40,989 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 10:33:51,108 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:34:01,227 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:34:11,345 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:34:21,470 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:34:21,471 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 10:34:21,472 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 10:34:21,472 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 10:34:21,472 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 10:35:22,171 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 10:36:18,762 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 10:36:18,763 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 10:36:24,119 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 10:36:34,335 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 10:36:34,335 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 10:36:34,336 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 10:36:39,336 - test_parameters - INFO - 设置端口eth0成本: 10
2025-09-10 10:36:39,397 - test_parameters - INFO - 设置端口eth0成本: 100
2025-09-10 10:36:39,501 - test_parameters - INFO - 设置端口eth0成本: 1000
2025-09-10 10:36:39,608 - test_parameters - INFO - 设置端口eth0成本: 20000
2025-09-10 10:36:39,715 - test_parameters - INFO - 端口成本测试通过
2025-09-10 10:36:39,716 - RSTPTest - INFO - 测试完成: test_port_cost (耗时: 217.52秒)
2025-09-10 10:36:39,716 - RSTPTest - INFO - ============================================================

2025-09-10 10:36:39,717 - RSTPTest - INFO - ============================================================
2025-09-10 10:36:39,718 - RSTPTest - INFO - 开始测试: test_parameter_persistence
2025-09-10 10:36:39,718 - RSTPTest - INFO - ============================================================
2025-09-10 10:36:39,719 - test_parameters - INFO - 测试参数持久性
2025-09-10 10:36:46,942 - test_parameters - INFO - 参数持久性测试通过
2025-09-10 10:36:46,943 - RSTPTest - INFO - 测试完成: test_parameter_persistence (耗时: 7.22秒)
2025-09-10 10:36:46,943 - RSTPTest - INFO - ============================================================

2025-09-10 10:36:46,945 - RSTPTest - INFO - ============================================================
2025-09-10 10:36:46,945 - RSTPTest - INFO - 开始测试: test_parameter_boundaries
2025-09-10 10:36:46,946 - RSTPTest - INFO - ============================================================
2025-09-10 10:36:46,947 - test_parameters - INFO - 测试参数边界值
2025-09-10 10:36:48,605 - test_parameters - INFO - 最小值0: 失败
2025-09-10 10:36:48,705 - test_parameters - INFO - 最大值65535: 失败
2025-09-10 10:36:48,809 - test_parameters - INFO - 正确拒绝了无效值-1
2025-09-10 10:36:48,910 - test_parameters - INFO - 正确拒绝了无效值65536
2025-09-10 10:36:49,017 - test_parameters - INFO - 最小值1: 失败
2025-09-10 10:36:49,118 - test_parameters - INFO - 最大值10: 失败
2025-09-10 10:36:49,227 - test_parameters - INFO - 正确拒绝了无效值0
2025-09-10 10:36:49,330 - test_parameters - INFO - 正确拒绝了无效值11
2025-09-10 10:36:49,434 - test_parameters - INFO - 最小值4: 失败
2025-09-10 10:36:49,537 - test_parameters - INFO - 最大值30: 失败
2025-09-10 10:36:49,638 - test_parameters - INFO - 正确拒绝了无效值3
2025-09-10 10:36:49,743 - test_parameters - INFO - 正确拒绝了无效值31
2025-09-10 10:36:49,846 - test_parameters - INFO - 最小值6: 失败
2025-09-10 10:36:49,949 - test_parameters - INFO - 最大值40: 失败
2025-09-10 10:36:50,050 - test_parameters - INFO - 正确拒绝了无效值5
2025-09-10 10:36:50,156 - test_parameters - INFO - 正确拒绝了无效值41
2025-09-10 10:36:50,156 - test_parameters - INFO - 参数边界测试完成
2025-09-10 10:36:50,157 - RSTPTest - INFO - 测试完成: test_parameter_boundaries (耗时: 3.21秒)
2025-09-10 10:36:50,157 - RSTPTest - INFO - ============================================================

2025-09-10 10:36:50,158 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 10:36:50,158 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 10:36:50,159 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 10:36:50,305 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 10:36:50,305 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 10:36:50,431 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 10:36:50,431 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 10:36:50,579 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 10:36:50,580 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 10:36:50,580 - RSTPTest - INFO - ============================================================
2025-09-10 10:36:50,580 - RSTPTest - INFO - 开始测试: test_port_role_assignment_simplified
2025-09-10 10:36:50,581 - RSTPTest - INFO - ============================================================
2025-09-10 10:36:50,584 - RSTPTest - INFO - 测试完成: test_port_role_assignment_simplified (耗时: 0.00秒)
2025-09-10 10:36:50,584 - RSTPTest - INFO - ============================================================

2025-09-10 10:36:50,585 - RSTPTest - INFO - ============================================================
2025-09-10 10:36:50,586 - RSTPTest - INFO - 开始测试: test_root_bridge_election
2025-09-10 10:36:50,586 - RSTPTest - INFO - ============================================================
2025-09-10 10:36:50,587 - test_protocol_conformance - INFO - 开始根网桥选举测试
2025-09-10 10:36:50,588 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 10:36:50,588 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 10:36:50,588 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 10:36:50,589 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 10:36:50,589 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 10:36:50,589 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 10:36:50,590 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 10:36:50,597 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 10:36:50,654 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 10:36:50,654 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 10:36:50,654 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 10:36:50,655 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 10:36:51,453 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 10:36:51,454 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 10:36:52,539 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 10:36:52,539 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 10:36:52,539 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 10:36:52,539 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 10:36:53,027 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 10:36:53,518 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 10:36:53,519 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 10:36:53,624 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 10:36:53,723 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 10:36:53,724 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 10:36:53,724 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 10:36:53,724 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 10:36:53,724 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 10:36:53,725 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 10:36:53,725 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 10:36:53,732 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 10:36:53,733 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 10:36:53,859 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 10:36:53,860 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 10:36:53,860 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 10:36:53,860 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 10:36:53,860 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 10:36:54,417 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 10:36:54,772 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:36:54,947 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 10:36:55,123 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:36:55,310 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:36:55,486 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:36:55,660 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:36:55,660 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 10:36:55,660 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 10:36:55,660 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 10:36:55,661 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 10:36:56,894 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 10:36:58,128 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 10:36:58,128 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 10:36:58,303 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 10:36:58,570 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 10:36:58,571 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 10:36:58,571 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 10:36:58,571 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 10:36:58,571 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 10:36:58,571 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 10:36:58,572 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 10:36:58,579 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 10:36:58,580 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 10:37:06,758 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 10:37:06,758 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 10:37:06,758 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 10:37:06,758 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 10:37:06,758 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 10:37:22,445 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 10:37:22,809 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:37:22,972 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 10:37:23,154 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:37:23,328 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:37:23,513 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:37:23,684 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:37:23,685 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 10:37:23,685 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 10:37:23,685 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 10:37:23,685 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 10:37:24,960 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 10:37:26,238 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 10:37:26,239 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 10:37:26,405 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 10:37:26,681 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 10:37:26,681 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 10:37:26,681 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 10:37:29,682 - test_protocol_conformance - INFO - === 检查DUT网桥配置 ===
2025-09-10 10:37:29,688 - test_protocol_conformance - INFO - 找到测试网桥: br0
2025-09-10 10:37:29,743 - test_protocol_conformance - INFO - 启用br0的RSTP
2025-09-10 10:37:29,794 - test_protocol_conformance - INFO - br0 STP状态: ('', 'cat: /sys/class/net/br0/bridge/stp_state: No such file or directory\n', 1)
2025-09-10 10:37:29,794 - test_protocol_conformance - INFO - === 初始网桥状态 ===
2025-09-10 10:37:30,111 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:37:30,270 - test_protocol_conformance - INFO - 活动端口数: 0
2025-09-10 10:37:30,271 - test_protocol_conformance - WARNING - 活动端口不足，尝试启用更多端口
2025-09-10 10:37:33,868 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:37:34,022 - test_protocol_conformance - INFO - 初始端口状态:
2025-09-10 10:37:34,023 - test_protocol_conformance - INFO - 初始状态 - DUT有Root Port: False
2025-09-10 10:37:34,023 - test_protocol_conformance - INFO - === 配置网桥优先级 ===
2025-09-10 10:37:34,023 - test_protocol_conformance - INFO - 设置TestNode1优先级为16384
2025-09-10 10:37:34,158 - test_protocol_conformance - INFO - 设置DUT优先级为32768
2025-09-10 10:37:34,169 - test_protocol_conformance - INFO - ip命令设置结果: ('', 'RTNETLINK answers: Operation not supported\n', 2)
2025-09-10 10:37:34,219 - test_protocol_conformance - INFO - sysfs设置结果: ('32768\n', 'tee: /sys/class/net/br0/bridge/priority: No such file or directory\n', 1)
2025-09-10 10:37:34,220 - test_protocol_conformance - INFO - 设置TestNode2优先级为24576
2025-09-10 10:37:34,353 - test_protocol_conformance - INFO - 等待RSTP收敛...
2025-09-10 10:37:44,354 - test_protocol_conformance - INFO - === 第一阶段验证 ===
2025-09-10 10:37:44,616 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:37:44,830 - test_protocol_conformance - INFO - DUT当前优先级: 
2025-09-10 10:37:44,831 - test_protocol_conformance - WARNING - 优先级验证失败: 优先级设置失败，期望32768，实际
assert '' == '32768'
  
  [0m[91m- 32768[39;49;00m[90m[39;49;00m
2025-09-10 10:37:44,831 - test_protocol_conformance - INFO - 
=== 第二阶段：DUT应成为根桥 ===
2025-09-10 10:37:44,832 - test_protocol_conformance - INFO - 设置DUT优先级为12288（最低）
2025-09-10 10:37:44,986 - test_protocol_conformance - INFO - 设置后优先级: 
2025-09-10 10:37:44,986 - test_protocol_conformance - INFO - 等待RSTP重新收敛...
2025-09-10 10:37:54,987 - test_protocol_conformance - INFO - === 最终验证 ===
2025-09-10 10:37:55,248 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:37:55,406 - test_protocol_conformance - ERROR - DUT RSTP实现问题诊断:
2025-09-10 10:37:55,407 - test_protocol_conformance - ERROR - 1. DUT优先级已设置为12288（最低）
2025-09-10 10:37:55,407 - test_protocol_conformance - ERROR - 2. 但DUT仍有Root Port: False
2025-09-10 10:37:55,408 - test_protocol_conformance - ERROR - 3. Designated端口数: 0
2025-09-10 10:37:55,408 - test_protocol_conformance - ERROR - 可能的原因:
2025-09-10 10:37:55,408 - test_protocol_conformance - ERROR - - DUT的RSTP实现不符合标准
2025-09-10 10:37:55,408 - test_protocol_conformance - ERROR - - DUT没有正确处理优先级变化
2025-09-10 10:37:55,409 - test_protocol_conformance - ERROR - - DUT的BPDU发送/接收有问题
2025-09-10 10:37:55,452 - RSTPTest - INFO - 测试完成: test_root_bridge_election (耗时: 64.87秒)
2025-09-10 10:37:55,453 - RSTPTest - INFO - ============================================================

2025-09-10 10:37:55,455 - RSTPTest - INFO - ============================================================
2025-09-10 10:37:55,456 - RSTPTest - INFO - 开始测试: test_port_role_assignment
2025-09-10 10:37:55,456 - RSTPTest - INFO - ============================================================
2025-09-10 10:37:55,457 - test_protocol_conformance - INFO - 开始端口角色分配测试
2025-09-10 10:37:55,457 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 10:37:55,457 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 10:37:55,457 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 10:37:55,457 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 10:37:55,457 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 10:37:55,458 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 10:37:55,458 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 10:37:55,458 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 10:37:55,929 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 10:37:55,929 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 10:37:57,321 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 10:37:57,322 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 10:37:57,322 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 10:37:57,322 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 10:37:57,801 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 10:37:58,305 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 10:37:58,306 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 10:37:58,417 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 10:37:58,521 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 10:37:58,522 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 10:37:58,522 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 10:37:58,522 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 10:37:58,522 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 10:37:58,523 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 10:37:58,523 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 10:37:58,523 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 10:37:59,044 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 10:37:59,408 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:37:59,609 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 10:37:59,783 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:37:59,944 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:38:00,115 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:38:00,286 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:38:00,287 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 10:38:00,287 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 10:38:00,287 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 10:38:00,287 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 10:38:01,518 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 10:38:02,749 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 10:38:02,750 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 10:38:02,932 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 10:38:03,211 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 10:38:03,211 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 10:38:03,211 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 10:38:03,211 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 10:38:03,212 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 10:38:03,212 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 10:38:03,212 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 10:38:03,212 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 10:38:03,744 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 10:38:04,105 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:38:04,283 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 10:38:04,456 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:38:04,633 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:38:04,816 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:38:04,989 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:38:04,989 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 10:38:04,989 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 10:38:04,989 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 10:38:04,990 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 10:38:06,221 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 10:38:07,496 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 10:38:07,496 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 10:38:07,685 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 10:38:07,984 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 10:38:07,984 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 10:38:07,984 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 10:38:11,177 - test_protocol_conformance - INFO - 启用DUT的网桥接口...
2025-09-10 10:38:11,302 - test_protocol_conformance - INFO - 已启用接口 eth0
2025-09-10 10:38:11,470 - test_protocol_conformance - INFO - 已启用接口 eth1
2025-09-10 10:38:11,640 - test_protocol_conformance - INFO - 已启用接口 eth2
2025-09-10 10:38:14,646 - test_protocol_conformance - INFO - br0 网桥接口状态:
('18: veth45650b3@if17: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 master br-b2bd2c7fedc8 state forwarding priority 32 cost 2 \n26: veth6d7f1eb@if25: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 master br-b2bd2c7fedc8 state forwarding priority 32 cost 2 \n', '', 0)
2025-09-10 10:38:14,694 - test_protocol_conformance - INFO - br0 状态:
('5: br0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1508 qdisc mq state UP mode DEFAULT group default qlen 1000\n    link/ether 90:12:10:b5:7d:f7 brd ff:ff:ff:ff:ff:ff\n    altname enp0s30f4\n', '', 0)
2025-09-10 10:38:14,741 - test_protocol_conformance - INFO - br0 STP状态:
('', 'cat: /sys/class/net/br0/bridge/stp_state: No such file or directory\n', 1)
2025-09-10 10:38:14,741 - test_protocol_conformance - INFO - 获取初始网桥状态...
2025-09-10 10:38:15,039 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:38:15,193 - test_protocol_conformance - INFO - Bridge ID: 未获取
2025-09-10 10:38:15,194 - test_protocol_conformance - INFO - Root ID: 未获取
2025-09-10 10:38:15,194 - test_protocol_conformance - INFO - Root Port: eth0
2025-09-10 10:38:15,194 - test_protocol_conformance - INFO - 协议版本: unknown
2025-09-10 10:38:15,194 - test_protocol_conformance - INFO - 端口 eth0: 角色=root, 状态=disabled, 成本=0
2025-09-10 10:38:15,195 - test_protocol_conformance - INFO - 端口 eth2: 角色=unknown, 状态=disabled, 成本=0
2025-09-10 10:38:15,195 - test_protocol_conformance - INFO - 端口 eth3: 角色=unknown, 状态=disabled, 成本=0
2025-09-10 10:38:15,195 - test_protocol_conformance - INFO - 等待网络收敛...
2025-09-10 10:38:15,195 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 10:38:15,493 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:38:15,650 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.46秒
2025-09-10 10:38:15,948 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:38:16,105 - test_protocol_conformance - INFO - 收敛后的端口状态:
2025-09-10 10:38:16,106 - test_protocol_conformance - INFO - 端口 eth0: 角色=root, 状态=disabled, 成本=0
2025-09-10 10:38:16,106 - test_protocol_conformance - INFO - 端口 eth2: 角色=unknown, 状态=disabled, 成本=0
2025-09-10 10:38:16,106 - test_protocol_conformance - INFO - 端口 eth3: 角色=unknown, 状态=disabled, 成本=0
2025-09-10 10:38:16,404 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 10:38:16,557 - test_protocol_conformance - INFO - is_root_bridge() 返回: True
2025-09-10 10:38:16,558 - test_protocol_conformance - INFO - 有Root Port: False
2025-09-10 10:38:16,558 - test_protocol_conformance - INFO - 最终判定 - DUT是根桥: True
2025-09-10 10:38:16,558 - test_protocol_conformance - INFO - 活动端口数: 0
2025-09-10 10:38:16,558 - test_protocol_conformance - INFO - 禁用端口: ['eth0', 'eth2', 'eth3']
2025-09-10 10:38:16,559 - test_protocol_conformance - WARNING - 活动端口不足，尝试启用禁用的端口...
2025-09-10 10:38:16,559 - test_protocol_conformance - INFO - 尝试启用端口 eth0
2025-09-10 10:38:16,726 - test_protocol_conformance - INFO - 尝试启用端口 eth2
2025-09-10 10:38:22,161 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:38:22,325 - test_protocol_conformance - INFO - 重新配置后 - 活动端口数: 0
2025-09-10 10:38:22,326 - test_protocol_conformance - INFO - 重新配置后 - 禁用端口: ['eth0', 'eth2', 'eth3']
2025-09-10 10:38:22,326 - test_protocol_conformance - INFO - 端口角色分布: {}
2025-09-10 10:38:22,367 - RSTPTest - INFO - 测试完成: test_port_role_assignment (耗时: 26.91秒)
2025-09-10 10:38:22,367 - RSTPTest - INFO - ============================================================

2025-09-10 10:38:22,370 - RSTPTest - INFO - ============================================================
2025-09-10 10:38:22,370 - RSTPTest - INFO - 开始测试: test_rstp_protocol_verification
2025-09-10 10:38:22,370 - RSTPTest - INFO - ============================================================
2025-09-10 10:38:22,371 - test_protocol_conformance - INFO - 开始RSTP协议验证
2025-09-10 10:38:22,371 - test_protocol_conformance - INFO - === 检查OVS配置 ===
2025-09-10 10:38:22,380 - test_protocol_conformance - INFO - 当前OVS配置:
8c812ea9-3b0c-46a1-bd3c-ef3904d38c1a
    Bridge SE_ETH4
        Port SE_ETH4
            Interface SE_ETH4
                type: internal
    Bridge SE_ETH6
        Port SE_ETH6
            Interface SE_ETH6
                type: internal
    Bridge rstp0
        Port rstp0
            Interface rstp0
                type: internal
    Bridge br0
        Port eth0
            Interface eth0
                error: "could not open network device eth0 (No such device)"
        Port br0
            
2025-09-10 10:38:22,429 - test_protocol_conformance - INFO - 使用现有网桥 SE_ETH2，端口: ['br3', 'br4']
2025-09-10 10:38:22,429 - test_protocol_conformance - INFO - === 配置RSTP（确保是RSTP而不是STP）===
2025-09-10 10:38:23,550 - test_protocol_conformance - INFO - 启用RSTP...
2025-09-10 10:38:23,569 - test_protocol_conformance - INFO - ✓ RSTP已启用
2025-09-10 10:38:23,569 - test_protocol_conformance - INFO - 设置RSTP参数...
2025-09-10 10:38:23,626 - test_protocol_conformance - INFO - ✓ 设置: rstp-hello-time=2
2025-09-10 10:38:23,677 - test_protocol_conformance - INFO - ✓ 设置: rstp-forward-delay=4
2025-09-10 10:38:23,729 - test_protocol_conformance - INFO - ✓ 设置: rstp-max-age=6
2025-09-10 10:38:23,782 - test_protocol_conformance - INFO - ✓ 设置: rstp-priority=32768
2025-09-10 10:38:23,833 - test_protocol_conformance - INFO - ✓ 设置: rstp-force-protocol-version=2
2025-09-10 10:38:23,986 - test_protocol_conformance - INFO - ✓ 端口 br3 RSTP已启用
2025-09-10 10:38:24,150 - test_protocol_conformance - INFO - ✓ 端口 br4 RSTP已启用
2025-09-10 10:38:24,202 - test_protocol_conformance - INFO - 等待RSTP初始化...
2025-09-10 10:38:29,202 - test_protocol_conformance - INFO - === 验证RSTP配置 ===
2025-09-10 10:38:29,211 - test_protocol_conformance - INFO - RSTP状态:
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     6s
  stp-fwd-delay   4s
  This bridge is the root

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     6s
  stp-fwd-delay   4s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 10:38:29,212 - test_protocol_conformance - INFO - ✓ 使用RSTP时间参数
2025-09-10 10:38:29,212 - test_protocol_conformance - INFO - === 创建测试拓扑 ===
2025-09-10 10:38:29,212 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 10:38:29,212 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 10:38:29,212 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 10:38:29,213 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 10:38:29,213 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 10:38:29,213 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 10:38:29,213 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 10:38:29,213 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 10:38:29,752 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 10:38:29,753 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 10:38:30,796 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 10:38:30,797 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 10:38:30,797 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 10:38:30,797 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 10:38:31,258 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 10:38:31,739 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 10:38:31,739 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 10:38:31,843 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 10:38:31,937 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 10:38:31,937 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 10:38:31,937 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 10:38:31,938 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 10:38:31,938 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 10:38:31,938 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 10:38:31,938 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 10:38:31,938 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 10:38:32,449 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 10:38:32,806 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:38:32,980 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 10:38:33,157 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:38:33,332 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:38:33,505 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:38:33,686 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:38:33,686 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 10:38:33,687 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 10:38:33,687 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 10:38:33,687 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 10:38:34,916 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 10:38:36,140 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 10:38:36,140 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 10:38:36,321 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 10:38:36,590 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 10:38:36,590 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 10:38:36,590 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 10:38:36,591 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 10:38:36,591 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 10:38:36,591 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 10:38:36,591 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 10:38:36,591 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 10:38:37,100 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 10:38:37,457 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:38:37,633 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 10:38:37,808 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:38:37,989 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:38:38,157 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:38:38,330 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:38:38,330 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 10:38:38,331 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 10:38:38,331 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 10:38:38,331 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 10:38:39,587 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 10:38:40,873 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 10:38:40,873 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 10:38:41,058 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 10:38:41,322 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 10:38:41,322 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 10:38:41,322 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 10:38:46,323 - test_protocol_conformance - INFO - === 捕获BPDU ===
2025-09-10 10:38:46,323 - test_protocol_conformance - INFO - 在 SE_ETH2 上捕获BPDU...
2025-09-10 10:38:46,323 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: SE_ETH2, 数量: 10)
2025-09-10 10:38:56,374 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-10 10:38:56,374 - test_protocol_conformance - INFO - 在 br3 上捕获BPDU...
2025-09-10 10:38:56,375 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br3, 数量: 10)
2025-09-10 10:39:06,462 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-10 10:39:06,462 - test_protocol_conformance - INFO - 在 br4 上捕获BPDU...
2025-09-10 10:39:06,463 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br4, 数量: 10)
2025-09-10 10:39:16,550 - RSTPAnalyzer_DUT - INFO - 捕获到 5 个BPDU包
2025-09-10 10:39:16,550 - test_protocol_conformance - INFO - ✓ 捕获到 5 个BPDU
2025-09-10 10:39:16,550 - test_protocol_conformance - INFO - === 分析BPDU ===
2025-09-10 10:39:16,551 - test_protocol_conformance - INFO - 第一个BPDU信息: {'timestamp': '10:39:09.058595', 'raw': '10:39:09.058595 90:12:10:b5:7d:f7 > 01:80:c2:00:00:00, 802.3, length 39: LLC, dsap STP (0x42) Individual, ssap STP (0x42) Command, ctrl 0x03: STP 802.1w, Rapid STP, Flags [Proposal, Learn, Forward], bridge-id 8000.90:12:10:b5:7d:f7.8001, length 36', 'is_rstp': False}
2025-09-10 10:39:16,551 - test_protocol_conformance - INFO - BPDU统计: RSTP=0, STP=5
2025-09-10 10:39:16,551 - test_protocol_conformance - WARNING - 检测到更多STP BPDU
2025-09-10 10:39:16,600 - test_protocol_conformance - INFO - rstp_enable状态: true
2025-09-10 10:39:16,652 - test_protocol_conformance - INFO - stp_enable状态: false
2025-09-10 10:39:16,708 - test_protocol_conformance - WARNING - OVS配置为RSTP但发送STP BPDU，可能是实现限制
2025-09-10 10:39:16,709 - test_protocol_conformance - INFO - 基于配置判断为RSTP
2025-09-10 10:39:16,709 - test_protocol_conformance - INFO - ✓ RSTP协议验证通过（检测到 5 个RSTP BPDU）
2025-09-10 10:39:16,710 - RSTPTest - INFO - 测试完成: test_rstp_protocol_verification (耗时: 54.34秒)
2025-09-10 10:39:16,710 - RSTPTest - INFO - ============================================================

2025-09-10 10:39:16,711 - RSTPTest - INFO - ============================================================
2025-09-10 10:39:16,712 - RSTPTest - INFO - 开始测试: test_alternate_port_verification
2025-09-10 10:39:16,712 - RSTPTest - INFO - ============================================================
2025-09-10 10:39:16,712 - test_protocol_conformance - INFO - 开始Alternate Port验证测试
2025-09-10 10:39:16,713 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 10:39:16,713 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 10:39:16,713 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 10:39:16,713 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 10:39:16,713 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 10:39:16,714 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 10:39:16,714 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 10:39:16,714 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 10:39:17,248 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 10:39:17,248 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 10:39:18,329 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 10:39:18,330 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 10:39:18,330 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 10:39:18,331 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 10:39:18,788 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 10:39:19,264 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 10:39:19,265 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 10:39:19,368 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 10:39:19,464 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 10:39:19,465 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 10:39:19,465 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 10:39:19,465 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 10:39:19,465 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 10:39:19,466 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 10:39:19,466 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 10:39:19,466 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 10:39:19,981 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 10:39:20,335 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:39:20,510 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 10:39:20,680 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:39:20,854 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:39:21,047 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:39:21,230 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:39:21,230 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 10:39:21,230 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 10:39:21,230 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 10:39:21,231 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 10:39:22,451 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 10:39:23,688 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 10:39:23,688 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 10:39:23,861 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 10:39:24,153 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 10:39:24,153 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 10:39:24,153 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 10:39:24,154 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 10:39:24,154 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 10:39:24,154 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 10:39:24,154 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 10:39:24,154 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 10:39:24,666 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 10:39:25,013 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:39:25,180 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 10:39:25,357 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:39:25,530 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:39:25,704 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:39:25,878 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:39:25,878 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 10:39:25,878 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 10:39:25,879 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 10:39:25,879 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 10:39:27,111 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 10:39:28,388 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 10:39:28,389 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 10:39:28,561 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 10:39:28,837 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 10:39:28,837 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 10:39:28,838 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 10:39:28,838 - test_protocol_conformance - INFO - 设置网桥优先级
2025-09-10 10:39:29,187 - test_protocol_conformance - INFO - 等待RSTP收敛...
2025-09-10 10:39:29,187 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 10:39:29,435 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:39:29,592 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.41秒
2025-09-10 10:39:29,891 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:39:30,044 - test_protocol_conformance - INFO - DUT桥信息: BridgeInfo(bridge_id='', root_id='', root_port='eth2', root_path_cost=0, protocol_version='unknown', hello_time=0, forward_delay=0, max_age=0, topology_changes=0, ports={'eth0': PortInfo(name='eth0', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth2': PortInfo(name='eth2', role=<PortRole.ROOT: 'root'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth3': PortInfo(name='eth3', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')})
2025-09-10 10:39:30,343 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 10:39:30,536 - RSTPTest - INFO - 测试完成: test_alternate_port_verification (耗时: 13.82秒)
2025-09-10 10:39:30,536 - RSTPTest - INFO - ============================================================

2025-09-10 10:39:30,538 - RSTPTest - INFO - ============================================================
2025-09-10 10:39:30,539 - RSTPTest - INFO - 开始测试: test_port_state_transitions
2025-09-10 10:39:30,539 - RSTPTest - INFO - ============================================================
2025-09-10 10:39:30,540 - test_protocol_conformance - INFO - 开始端口状态转换测试
2025-09-10 10:39:30,540 - NetworkTopology - INFO - 创建RSTP线性拓扑...
2025-09-10 10:39:30,540 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 10:39:30,540 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 10:39:30,540 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 10:39:30,541 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 10:39:30,541 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 10:39:30,541 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 10:39:30,541 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 10:39:31,016 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 10:39:31,016 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 10:39:32,056 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 10:39:32,056 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 10:39:32,057 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth2']
2025-09-10 10:39:32,057 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 10:39:32,514 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 10:39:32,515 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 10:39:32,616 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 10:39:32,712 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 10:39:32,712 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 10:39:32,713 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 10:39:32,713 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 10:39:32,713 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 10:39:32,714 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 10:39:32,714 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 10:39:32,714 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 10:39:33,280 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 10:39:33,619 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:39:33,790 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 10:39:33,966 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:39:34,139 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:39:34,313 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:39:34,486 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:39:34,486 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 10:39:34,487 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 10:39:34,487 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 10:39:34,487 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 10:39:35,728 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 10:39:36,969 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 10:39:36,970 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 10:39:37,146 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 10:39:37,409 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 10:39:37,409 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 10:39:37,409 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 10:39:37,409 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 10:39:37,410 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 10:39:37,410 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 10:39:37,410 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 10:39:37,410 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 10:39:37,926 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 10:39:38,285 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:39:38,460 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 10:39:38,633 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:39:38,804 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:39:38,978 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:39:39,150 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:39:39,150 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 10:39:39,150 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 10:39:39,151 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0']
2025-09-10 10:39:39,151 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 10:39:40,378 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 10:39:40,379 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 10:39:40,557 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 10:39:40,827 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 10:39:40,827 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 10:39:40,827 - NetworkTopology - INFO - 线性拓扑创建完成
2025-09-10 10:39:41,034 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-10 10:39:41,034 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 10:39:41,313 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:39:41,470 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.44秒
2025-09-10 10:39:41,767 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:39:41,954 - RSTPTest - INFO - 测试完成: test_port_state_transitions (耗时: 11.42秒)
2025-09-10 10:39:41,955 - RSTPTest - INFO - ============================================================

2025-09-10 10:39:41,957 - RSTPTest - INFO - ============================================================
2025-09-10 10:39:41,957 - RSTPTest - INFO - 开始测试: test_bpdu_propagation_and_keepalive
2025-09-10 10:39:41,957 - RSTPTest - INFO - ============================================================
2025-09-10 10:39:41,958 - test_protocol_conformance - INFO - 开始BPDU传播和保活机制测试
2025-09-10 10:39:41,958 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 10:39:41,959 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 10:39:41,959 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 10:39:41,959 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 10:39:41,959 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 10:39:41,959 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 10:39:41,959 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 10:39:41,960 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 10:39:42,460 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 10:39:42,460 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 10:39:43,503 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 10:39:43,503 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 10:39:43,503 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 10:39:43,504 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 10:39:43,959 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 10:39:44,440 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 10:39:44,440 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 10:39:44,543 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 10:39:44,640 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 10:39:44,640 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 10:39:44,640 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 10:39:44,640 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 10:39:44,641 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 10:39:44,641 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 10:39:44,641 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 10:39:44,641 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 10:39:45,161 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 10:39:45,502 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:39:45,677 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 10:39:45,853 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:39:46,029 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:39:46,202 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:39:46,378 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:39:46,379 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 10:39:46,379 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 10:39:46,379 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 10:39:46,379 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 10:39:47,639 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 10:39:48,879 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 10:39:48,879 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 10:39:49,064 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 10:39:49,335 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 10:39:49,336 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 10:39:49,336 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 10:39:49,336 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 10:39:49,336 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 10:39:49,336 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 10:39:49,337 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 10:39:49,337 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 10:39:49,850 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 10:39:50,199 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:39:50,374 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 10:39:50,554 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:39:50,734 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:39:50,910 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:39:51,090 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:39:51,091 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 10:39:51,091 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 10:39:51,091 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 10:39:51,091 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 10:39:52,345 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 10:39:53,644 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 10:39:53,644 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 10:39:53,823 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 10:39:54,098 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 10:39:54,099 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 10:39:54,099 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 10:39:54,447 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-10 10:39:54,447 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 10:39:54,703 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:39:54,864 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.42秒
2025-09-10 10:39:55,180 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:39:55,341 - test_protocol_conformance - INFO - Hello Time: 0秒
2025-09-10 10:39:55,342 - test_protocol_conformance - INFO - 开始捕获BPDU报文
2025-09-10 10:39:55,378 - RSTPTest - INFO - 测试完成: test_bpdu_propagation_and_keepalive (耗时: 13.42秒)
2025-09-10 10:39:55,379 - RSTPTest - INFO - ============================================================

2025-09-10 10:39:55,381 - RSTPTest - INFO - ============================================================
2025-09-10 10:39:55,382 - RSTPTest - INFO - 开始测试: test_disabled_port_exclusion
2025-09-10 10:39:55,382 - RSTPTest - INFO - ============================================================
2025-09-10 10:39:55,383 - test_protocol_conformance - INFO - 开始禁用端口排除测试
2025-09-10 10:39:55,383 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 10:39:55,383 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 10:39:55,383 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 10:39:55,384 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 10:39:55,384 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 10:39:55,384 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 10:39:55,384 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 10:39:55,384 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 10:39:55,891 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 10:39:55,891 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 10:39:56,927 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 10:39:56,928 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 10:39:56,928 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 10:39:56,928 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 10:39:57,392 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 10:39:57,867 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 10:39:57,868 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 10:39:57,971 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 10:39:58,069 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 10:39:58,069 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 10:39:58,069 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 10:39:58,069 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 10:39:58,070 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 10:39:58,070 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 10:39:58,070 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 10:39:58,070 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 10:39:58,582 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 10:39:58,944 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:39:59,123 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 10:39:59,301 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:39:59,477 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:39:59,653 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:39:59,831 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:39:59,832 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 10:39:59,832 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 10:39:59,832 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 10:39:59,832 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 10:40:01,068 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 10:40:02,290 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 10:40:02,290 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 10:40:02,463 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 10:40:02,731 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 10:40:02,731 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 10:40:02,731 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 10:40:02,731 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 10:40:02,732 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 10:40:02,732 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 10:40:02,732 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 10:40:02,732 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 10:40:03,253 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 10:40:03,605 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:40:03,777 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 10:40:03,952 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:40:04,122 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:40:04,298 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:40:04,480 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:40:04,480 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 10:40:04,481 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 10:40:04,481 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 10:40:04,481 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 10:40:05,729 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 10:40:07,034 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 10:40:07,034 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 10:40:07,213 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 10:40:07,493 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 10:40:07,494 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 10:40:07,494 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 10:40:07,839 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-10 10:40:07,840 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 10:40:08,255 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:40:08,412 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.57秒
2025-09-10 10:40:08,710 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:40:08,864 - test_protocol_conformance - INFO - 所有端口信息: {'eth0': PortInfo(name='eth0', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth2': PortInfo(name='eth2', role=<PortRole.ROOT: 'root'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth3': PortInfo(name='eth3', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')}
2025-09-10 10:40:09,019 - test_protocol_conformance - INFO - RSTP show输出 (code=0): 1
1
---- rstp0 ----
Root ID:
  stp-priority    32768
  stp-system-id   72:e5:07:90:87:48
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    32768
  stp-system-id   72:e5:07:90:87:48
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------


2025-09-10 10:40:09,020 - test_protocol_conformance - INFO - 初始活动端口: []
2025-09-10 10:40:09,020 - test_protocol_conformance - INFO - 没有找到活动端口，使用所有端口
2025-09-10 10:40:09,021 - test_protocol_conformance - INFO - 选择端口eth0进行禁用测试
2025-09-10 10:40:09,021 - test_protocol_conformance - INFO - 禁用端口eth0
2025-09-10 10:40:09,021 - FaultInjector_DUT - INFO - 断开链路: eth0
2025-09-10 10:40:09,284 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth0 (code=1)，将在逻辑上标记为已断开
2025-09-10 10:40:09,284 - test_protocol_conformance - INFO - 禁用命令结果: ('', '', 0)
2025-09-10 10:40:09,439 - test_protocol_conformance - INFO - 端口eth0配置: stdout='1
1
{rstp-enable="true", stp-enable="true", stp-path-cost="20000"}
', stderr='', code=0
2025-09-10 10:40:24,705 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:40:24,812 - test_protocol_conformance - INFO - 禁用后所有端口状态: [('eth0', 'disabled'), ('eth2', 'disabled'), ('eth3', 'disabled')]
2025-09-10 10:40:24,812 - test_protocol_conformance - INFO - 端口eth0状态: disabled, 角色: root
2025-09-10 10:40:24,812 - test_protocol_conformance - INFO - 禁用后活动端口: []
2025-09-10 10:40:24,813 - test_protocol_conformance - INFO - 活动端口数量: 0, 初始活动端口数量: 3
2025-09-10 10:40:24,813 - test_protocol_conformance - INFO - 禁用后端口角色分布: {}
2025-09-10 10:40:25,134 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 10:40:25,239 - test_protocol_conformance - INFO - 重新启用端口eth0
2025-09-10 10:40:25,240 - FaultInjector_DUT - INFO - 恢复链路: eth0
2025-09-10 10:40:25,510 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth0 (code=1)，将在逻辑上标记为已恢复
2025-09-10 10:40:40,778 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:40:40,887 - test_protocol_conformance - INFO - ✓ 端口eth0已重新启用，状态: forwarding
2025-09-10 10:40:40,928 - RSTPTest - INFO - 测试完成: test_disabled_port_exclusion (耗时: 45.55秒)
2025-09-10 10:40:40,928 - RSTPTest - INFO - ============================================================

2025-09-10 10:40:40,932 - RSTPTest - INFO - ============================================================
2025-09-10 10:40:40,932 - RSTPTest - INFO - 开始测试: test_topology_change_notification
2025-09-10 10:40:40,932 - RSTPTest - INFO - ============================================================
2025-09-10 10:40:40,933 - test_protocol_conformance - INFO - 开始拓扑变更通知测试
2025-09-10 10:40:40,933 - test_protocol_conformance - INFO - === 步骤1: 创建多网桥环形拓扑 ===
2025-09-10 10:40:41,284 - test_protocol_conformance - INFO - 创建网桥 rstp1 (优先级: 32768)
2025-09-10 10:40:41,520 - test_protocol_conformance - INFO - 创建网桥 rstp2 (优先级: 36864)
2025-09-10 10:40:41,755 - test_protocol_conformance - INFO - 创建网桥 rstp3 (优先级: 40960)
2025-09-10 10:40:42,193 - test_protocol_conformance - INFO - ✓ 连接 rstp1 <-> rstp2
2025-09-10 10:40:42,636 - test_protocol_conformance - INFO - ✓ 连接 rstp2 <-> rstp3
2025-09-10 10:40:43,080 - test_protocol_conformance - INFO - ✓ 连接 rstp3 <-> rstp1
2025-09-10 10:40:43,080 - test_protocol_conformance - INFO - 等待RSTP初始收敛...
2025-09-10 10:40:53,080 - test_protocol_conformance - INFO - === 步骤2: 验证初始RSTP状态 ===
2025-09-10 10:40:53,088 - test_protocol_conformance - INFO - 
rstp1 初始RSTP状态:
2025-09-10 10:40:53,089 - test_protocol_conformance - INFO -   ---- rstp1 ----
2025-09-10 10:40:53,089 - test_protocol_conformance - INFO -   Root ID:
2025-09-10 10:40:53,089 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-10 10:40:53,089 - test_protocol_conformance - INFO -     stp-system-id   d6:65:da:8d:37:45
2025-09-10 10:40:53,090 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 10:40:53,090 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 10:40:53,090 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 10:40:53,090 - test_protocol_conformance - INFO -     This bridge is the root
2025-09-10 10:40:53,090 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-10 10:40:53,091 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-10 10:40:53,091 - test_protocol_conformance - INFO -     stp-system-id   d6:65:da:8d:37:45
2025-09-10 10:40:53,091 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 10:40:53,091 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 10:40:53,091 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 10:40:53,091 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 10:40:53,092 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-10 10:40:53,092 - test_protocol_conformance - INFO -     veth12a    Designated Forwarding 2000     128.1
2025-09-10 10:40:53,092 - test_protocol_conformance - INFO -     veth31b    Designated Forwarding 2000     128.2
2025-09-10 10:40:53,092 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-10 10:40:53,092 - test_protocol_conformance - INFO -   → 有转发端口
2025-09-10 10:40:53,138 - test_protocol_conformance - INFO - 
rstp2 初始RSTP状态:
2025-09-10 10:40:53,138 - test_protocol_conformance - INFO -   ---- rstp2 ----
2025-09-10 10:40:53,138 - test_protocol_conformance - INFO -   Root ID:
2025-09-10 10:40:53,139 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-10 10:40:53,139 - test_protocol_conformance - INFO -     stp-system-id   d6:65:da:8d:37:45
2025-09-10 10:40:53,139 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 10:40:53,139 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 10:40:53,140 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 10:40:53,140 - test_protocol_conformance - INFO -     root-port       veth12b
2025-09-10 10:40:53,140 - test_protocol_conformance - INFO -     root-path-cost  2000
2025-09-10 10:40:53,140 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-10 10:40:53,140 - test_protocol_conformance - INFO -     stp-priority    36864
2025-09-10 10:40:53,140 - test_protocol_conformance - INFO -     stp-system-id   06:8d:50:08:21:4e
2025-09-10 10:40:53,141 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 10:40:53,141 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 10:40:53,141 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 10:40:53,141 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 10:40:53,141 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-10 10:40:53,141 - test_protocol_conformance - INFO -     veth12b    Root       Forwarding 2000     128.1
2025-09-10 10:40:53,141 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-10 10:40:53,142 - test_protocol_conformance - INFO -   → 有转发端口
2025-09-10 10:40:53,185 - test_protocol_conformance - INFO - 
rstp3 初始RSTP状态:
2025-09-10 10:40:53,186 - test_protocol_conformance - INFO -   ---- rstp3 ----
2025-09-10 10:40:53,186 - test_protocol_conformance - INFO -   Root ID:
2025-09-10 10:40:53,186 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-10 10:40:53,186 - test_protocol_conformance - INFO -     stp-system-id   d6:65:da:8d:37:45
2025-09-10 10:40:53,187 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 10:40:53,187 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 10:40:53,187 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 10:40:53,187 - test_protocol_conformance - INFO -     root-port       veth31a
2025-09-10 10:40:53,187 - test_protocol_conformance - INFO -     root-path-cost  2000
2025-09-10 10:40:53,187 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-10 10:40:53,188 - test_protocol_conformance - INFO -     stp-priority    40960
2025-09-10 10:40:53,188 - test_protocol_conformance - INFO -     stp-system-id   4a:a5:cc:3a:af:4d
2025-09-10 10:40:53,188 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 10:40:53,188 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 10:40:53,188 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 10:40:53,189 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 10:40:53,189 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-10 10:40:53,189 - test_protocol_conformance - INFO -     veth23b    Alternate  Discarding 2000     128.1
2025-09-10 10:40:53,189 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-10 10:40:53,189 - test_protocol_conformance - INFO -   → 有转发端口
2025-09-10 10:40:53,190 - test_protocol_conformance - INFO -   → 有阻塞端口（防环路）
2025-09-10 10:40:53,190 - test_protocol_conformance - INFO - === 步骤3: 分析网络拓扑 ===
2025-09-10 10:40:53,190 - test_protocol_conformance - INFO - ✓ rstp1 是根桥
2025-09-10 10:40:53,190 - test_protocol_conformance - INFO - ✓ 找到阻塞端口: veth23b
2025-09-10 10:40:53,190 - test_protocol_conformance - INFO - === 步骤4: 触发拓扑变更 ===
2025-09-10 10:40:53,190 - test_protocol_conformance - INFO - 断开活动端口: veth31a
2025-09-10 10:40:58,267 - test_protocol_conformance - INFO - ✓ rstp1 状态已变化
2025-09-10 10:40:58,365 - test_protocol_conformance - INFO - ✓ rstp3 状态已变化
2025-09-10 10:41:03,412 - test_protocol_conformance - INFO - === 步骤5: 验证拓扑变更 ===
2025-09-10 10:41:03,418 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: veth12a, 数量: 5)
2025-09-10 10:41:08,524 - RSTPAnalyzer_DUT - INFO - 捕获到 2 个BPDU包
2025-09-10 10:41:08,524 - test_protocol_conformance - INFO - 在 veth12a 捕获到 2 个BPDU
2025-09-10 10:41:08,525 - test_protocol_conformance - INFO - === 步骤6: 最终验证 ===
2025-09-10 10:41:08,525 - test_protocol_conformance - INFO - ✓ 测试通过：检测到拓扑变更
2025-09-10 10:41:08,573 - test_protocol_conformance - INFO - 
========== rstp1 最终状态 ==========
2025-09-10 10:41:08,574 - test_protocol_conformance - INFO - ---- rstp1 ----
2025-09-10 10:41:08,574 - test_protocol_conformance - INFO - Root ID:
2025-09-10 10:41:08,574 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-10 10:41:08,574 - test_protocol_conformance - INFO -   stp-system-id   d6:65:da:8d:37:45
2025-09-10 10:41:08,574 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 10:41:08,574 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 10:41:08,575 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 10:41:08,575 - test_protocol_conformance - INFO -   This bridge is the root
2025-09-10 10:41:08,575 - test_protocol_conformance - INFO - Bridge ID:
2025-09-10 10:41:08,575 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-10 10:41:08,575 - test_protocol_conformance - INFO -   stp-system-id   d6:65:da:8d:37:45
2025-09-10 10:41:08,575 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 10:41:08,576 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 10:41:08,576 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 10:41:08,576 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 10:41:08,576 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-10 10:41:08,576 - test_protocol_conformance - INFO -   veth12a    Designated Forwarding 2000     128.1
2025-09-10 10:41:08,577 - test_protocol_conformance - INFO -   veth31b    Designated Forwarding 2000     128.2
2025-09-10 10:41:08,625 - test_protocol_conformance - INFO - 
========== rstp2 最终状态 ==========
2025-09-10 10:41:08,626 - test_protocol_conformance - INFO - ---- rstp2 ----
2025-09-10 10:41:08,626 - test_protocol_conformance - INFO - Root ID:
2025-09-10 10:41:08,626 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-10 10:41:08,626 - test_protocol_conformance - INFO -   stp-system-id   d6:65:da:8d:37:45
2025-09-10 10:41:08,626 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 10:41:08,626 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 10:41:08,626 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 10:41:08,627 - test_protocol_conformance - INFO -   root-port       veth12b
2025-09-10 10:41:08,627 - test_protocol_conformance - INFO -   root-path-cost  2000
2025-09-10 10:41:08,627 - test_protocol_conformance - INFO - Bridge ID:
2025-09-10 10:41:08,627 - test_protocol_conformance - INFO -   stp-priority    36864
2025-09-10 10:41:08,627 - test_protocol_conformance - INFO -   stp-system-id   06:8d:50:08:21:4e
2025-09-10 10:41:08,627 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 10:41:08,627 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 10:41:08,628 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 10:41:08,628 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 10:41:08,628 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-10 10:41:08,628 - test_protocol_conformance - INFO -   veth12b    Root       Forwarding 2000     128.1
2025-09-10 10:41:08,628 - test_protocol_conformance - INFO -   veth23a    Designated Forwarding 2000     128.2
2025-09-10 10:41:08,673 - test_protocol_conformance - INFO - 
========== rstp3 最终状态 ==========
2025-09-10 10:41:08,674 - test_protocol_conformance - INFO - ---- rstp3 ----
2025-09-10 10:41:08,674 - test_protocol_conformance - INFO - Root ID:
2025-09-10 10:41:08,674 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-10 10:41:08,674 - test_protocol_conformance - INFO -   stp-system-id   d6:65:da:8d:37:45
2025-09-10 10:41:08,674 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 10:41:08,674 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 10:41:08,675 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 10:41:08,675 - test_protocol_conformance - INFO -   root-port       veth31a
2025-09-10 10:41:08,675 - test_protocol_conformance - INFO -   root-path-cost  2000
2025-09-10 10:41:08,675 - test_protocol_conformance - INFO - Bridge ID:
2025-09-10 10:41:08,675 - test_protocol_conformance - INFO -   stp-priority    40960
2025-09-10 10:41:08,675 - test_protocol_conformance - INFO -   stp-system-id   4a:a5:cc:3a:af:4d
2025-09-10 10:41:08,675 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 10:41:08,676 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 10:41:08,676 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 10:41:08,676 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 10:41:08,676 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-10 10:41:08,676 - test_protocol_conformance - INFO -   veth23b    Alternate  Discarding 2000     128.1
2025-09-10 10:41:08,676 - test_protocol_conformance - INFO -   veth31a    Root       Forwarding 2000     128.2
2025-09-10 10:41:08,676 - test_protocol_conformance - INFO - 
=== 诊断信息 ===
2025-09-10 10:41:08,730 - test_protocol_conformance - INFO - 系统日志中的STP/RSTP信息:
2025-09-10 10:41:08,730 - test_protocol_conformance - INFO - [515976.768081] rstp0: left promiscuous mode
[515977.355872] rstp0: entered promiscuous mode
[516022.420308] rstp1: entered promiscuous mode
[516022.646692] rstp2: entered promiscuous mode
[516022.882677] rstp3: entered promiscuous mode

2025-09-10 10:41:08,779 - test_protocol_conformance - INFO - OVS日志中的拓扑变更信息:
2025-09-10 10:41:08,779 - test_protocol_conformance - INFO - 2025-09-10T02:41:10.107Z|9928089|rstp_sm|DBG|rstp2, port 1: Port_role_transition_sm 7 -> 6
2025-09-10T02:41:10.107Z|9928090|rstp_sm|DBG|rstp2, port 1: port_transmit_sm 6 -> 3
2025-09-10T02:41:10.107Z|9928091|rstp_sm|DBG|rstp2: move_rstp()
2025-09-10T02:41:10.107Z|9928092|rstp_sm|DBG|rstp2, port 1: Port_role_transition_sm 6 -> 7
2025-09-10T02:41:10.107Z|9928093|rstp_sm|DBG|rstp2, port 1: port_transmit_sm 3 -> 5
2025-09-10T02:41:10.107Z|9928094|rstp_sm|DBG|rstp2: move_rstp()
2025-09-10T02:41:10.107Z|9928095|rstp_sm|DBG|rstp2, port 1: port_transmit_sm 5 -> 6
2025-09-10T02:41:10.107Z|9928096|rstp_sm|DBG|rstp2: move_rstp()
2025-09-10T02:41:10.107Z|9928097|rstp_sm|DBG|br0: move_rstp()
2025-09-10T02:41:10.107Z|9928098|rstp_sm|DBG|rstp1: move_rstp()
2025-09-10T02:41:10.631Z|9928102|bridge|WARN|rstp0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-10T02:41:10.631Z|9928103|bridge|WARN|br0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-10T02:41:10.641Z|9928107|bridge|WARN|rstp0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-10T02:41:10.641Z|9928108|bridge|WARN|br0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP

2025-09-10 10:41:08,780 - test_protocol_conformance - INFO - === 清理测试环境 ===
2025-09-10 10:41:09,347 - test_protocol_conformance - INFO - 拓扑变更通知测试完成
2025-09-10 10:41:09,348 - RSTPTest - INFO - 测试完成: test_topology_change_notification (耗时: 28.42秒)
2025-09-10 10:41:09,348 - RSTPTest - INFO - ============================================================

2025-09-10 10:41:09,349 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 10:41:09,349 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 10:41:09,350 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 10:41:09,484 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 10:41:09,484 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 10:41:09,607 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 10:41:09,608 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 10:41:09,747 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 10:41:09,747 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 10:41:09,748 - RSTPTest - INFO - ============================================================
2025-09-10 10:41:09,748 - RSTPTest - INFO - 开始测试: test_root_bridge_hijack_attack
2025-09-10 10:41:09,748 - RSTPTest - INFO - ============================================================
2025-09-10 10:41:09,749 - test_security - INFO - 开始根网桥劫持攻击测试
2025-09-10 10:41:09,750 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 10:41:09,750 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 10:41:09,750 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 10:41:09,750 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 10:41:09,750 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 10:41:09,750 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 10:41:09,751 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 10:41:09,756 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 10:41:09,812 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 10:41:09,813 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 10:41:09,813 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 10:41:09,813 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 10:41:10,339 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 10:41:10,339 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 10:41:11,424 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 10:41:11,424 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 10:41:11,424 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 10:41:11,425 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 10:41:11,895 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 10:41:12,382 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 10:41:12,382 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 10:41:12,489 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 10:41:12,583 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 10:41:12,583 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 10:41:12,583 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 10:41:12,584 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 10:41:12,584 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 10:41:12,584 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 10:41:12,584 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 10:41:12,592 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 10:41:12,592 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 10:41:12,715 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 10:41:12,715 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 10:41:12,715 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 10:41:12,716 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 10:41:12,716 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 10:41:13,270 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 10:41:13,623 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:41:13,796 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 10:41:13,982 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:41:14,155 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:41:14,338 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:41:14,514 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:41:14,514 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 10:41:14,514 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 10:41:14,514 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 10:41:14,515 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 10:41:15,744 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 10:41:16,965 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 10:41:16,965 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 10:41:17,138 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 10:41:17,416 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 10:41:17,416 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 10:41:17,416 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 10:41:17,417 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 10:41:17,417 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 10:41:17,417 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 10:41:17,418 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 10:41:17,425 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 10:41:17,425 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 10:41:17,551 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 10:41:17,552 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 10:41:17,552 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 10:41:17,553 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 10:41:17,553 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 10:41:18,114 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 10:41:18,457 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:41:18,627 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 10:41:18,804 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:41:18,980 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:41:19,153 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:41:19,328 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:41:19,329 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 10:41:19,329 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 10:41:19,329 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 10:41:19,329 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 10:41:20,571 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 10:41:21,852 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 10:41:21,852 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 10:41:22,028 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 10:41:22,306 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 10:41:22,307 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 10:41:22,307 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 10:41:27,765 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 10:41:28,217 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:41:28,375 - test_security - INFO - 初始根网桥: 
2025-09-10 10:41:28,375 - FaultInjector_TestNode1 - WARNING - 注入恶意BPDU到 eth0
2025-09-10 10:41:28,528 - FaultInjector_TestNode1 - WARNING - 恶意BPDU注入已启动 (优先级: 0)
2025-09-10 10:41:43,785 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:41:43,943 - test_security - INFO - 根网桥未被劫持（可能已启用防护）
2025-09-10 10:41:43,943 - test_security - INFO - 根网桥劫持攻击测试完成
2025-09-10 10:41:43,944 - RSTPTest - INFO - 测试完成: test_root_bridge_hijack_attack (耗时: 34.20秒)
2025-09-10 10:41:43,944 - RSTPTest - INFO - ============================================================

2025-09-10 10:41:43,946 - RSTPTest - INFO - ============================================================
2025-09-10 10:41:43,946 - RSTPTest - INFO - 开始测试: test_bpdu_flood_attack
2025-09-10 10:41:43,946 - RSTPTest - INFO - ============================================================
2025-09-10 10:41:43,947 - test_security - INFO - 开始BPDU洪泛攻击测试
2025-09-10 10:41:43,947 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 10:41:43,947 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 10:41:43,947 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 10:41:43,947 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 10:41:43,947 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 10:41:43,948 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 10:41:43,948 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 10:41:43,948 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 10:41:44,461 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 10:41:44,462 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 10:41:45,503 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 10:41:45,503 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 10:41:45,503 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 10:41:45,504 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 10:41:45,962 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 10:41:46,442 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 10:41:46,443 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 10:41:46,546 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 10:41:46,642 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 10:41:46,642 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 10:41:46,642 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 10:41:46,643 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 10:41:46,643 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 10:41:46,643 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 10:41:46,643 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 10:41:46,643 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 10:41:47,140 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 10:41:47,496 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:41:47,670 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 10:41:47,857 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:41:48,036 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:41:48,222 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:41:48,395 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:41:48,395 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 10:41:48,396 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 10:41:48,396 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 10:41:48,396 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 10:41:49,625 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 10:41:50,857 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 10:41:50,857 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 10:41:51,034 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 10:41:51,301 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 10:41:51,302 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 10:41:51,302 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 10:41:51,302 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 10:41:51,302 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 10:41:51,303 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 10:41:51,303 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 10:41:51,303 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 10:41:51,823 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 10:41:52,170 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:41:52,347 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 10:41:52,523 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:41:52,695 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:41:52,871 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:41:53,047 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:41:53,048 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 10:41:53,048 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 10:41:53,048 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 10:41:53,048 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 10:41:54,279 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 10:41:55,548 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 10:41:55,548 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 10:41:55,727 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 10:41:55,998 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 10:41:55,999 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 10:41:55,999 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 10:42:01,170 - test_security - INFO - 初始CPU使用率: 0.0%
2025-09-10 10:42:11,443 - test_security - INFO - 洪泛时CPU使用率: 0.0%
2025-09-10 10:42:11,741 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 10:42:11,898 - test_security - INFO - 网络在BPDU洪泛下保持稳定
2025-09-10 10:42:11,898 - test_security - INFO - BPDU洪泛攻击测试完成
2025-09-10 10:42:11,899 - RSTPTest - INFO - 测试完成: test_bpdu_flood_attack (耗时: 27.95秒)
2025-09-10 10:42:11,899 - RSTPTest - INFO - ============================================================

2025-09-10 10:42:11,901 - RSTPTest - INFO - ============================================================
2025-09-10 10:42:11,901 - RSTPTest - INFO - 开始测试: test_topology_change_attack
2025-09-10 10:42:11,901 - RSTPTest - INFO - ============================================================
2025-09-10 10:42:11,902 - test_security - INFO - 开始拓扑变更攻击测试
2025-09-10 10:42:11,902 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 10:42:11,902 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 10:42:11,902 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 10:42:11,902 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 10:42:11,902 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 10:42:11,903 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 10:42:11,903 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 10:42:11,903 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 10:42:12,409 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 10:42:12,409 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 10:42:13,526 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 10:42:13,527 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 10:42:13,527 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 10:42:13,527 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 10:42:13,985 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 10:42:14,470 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 10:42:14,470 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 10:42:14,573 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 10:42:14,670 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 10:42:14,670 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 10:42:14,670 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 10:42:14,670 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 10:42:14,670 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 10:42:14,670 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 10:42:14,671 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 10:42:14,671 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 10:42:15,200 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 10:42:15,544 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:42:15,715 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 10:42:15,886 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:42:16,063 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:42:16,244 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:42:16,423 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:42:16,424 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 10:42:16,424 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 10:42:16,424 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 10:42:16,424 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 10:42:17,649 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 10:42:18,901 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 10:42:18,901 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 10:42:19,069 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 10:42:19,348 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 10:42:19,348 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 10:42:19,348 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 10:42:19,349 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 10:42:19,349 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 10:42:19,349 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 10:42:19,349 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 10:42:19,349 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 10:42:19,864 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 10:42:20,218 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:42:20,396 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 10:42:20,571 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:42:20,739 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:42:20,913 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:42:21,087 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:42:21,088 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 10:42:21,088 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 10:42:21,088 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 10:42:21,088 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 10:42:22,323 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 10:42:23,619 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 10:42:23,624 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 10:42:23,779 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 10:42:24,051 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 10:42:24,051 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 10:42:24,051 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 10:42:29,308 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:42:29,466 - test_security - INFO - 触发快速拓扑变更...
2025-09-10 10:42:47,900 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:42:48,057 - test_security - INFO - 检测到0次拓扑变更
2025-09-10 10:42:48,356 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 10:42:48,513 - test_security - INFO - 网络在频繁拓扑变更后保持稳定
2025-09-10 10:42:48,513 - test_security - INFO - 拓扑变更攻击测试完成
2025-09-10 10:42:48,514 - RSTPTest - INFO - 测试完成: test_topology_change_attack (耗时: 36.61秒)
2025-09-10 10:42:48,515 - RSTPTest - INFO - ============================================================

2025-09-10 10:42:48,516 - RSTPTest - INFO - ============================================================
2025-09-10 10:42:48,516 - RSTPTest - INFO - 开始测试: test_mac_spoofing
2025-09-10 10:42:48,517 - RSTPTest - INFO - ============================================================
2025-09-10 10:42:48,517 - test_security - INFO - 开始MAC地址欺骗测试
2025-09-10 10:42:48,517 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 10:42:48,518 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 10:42:48,518 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 10:42:48,518 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 10:42:48,518 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 10:42:48,518 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 10:42:48,518 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 10:42:48,519 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 10:42:49,032 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 10:42:49,033 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 10:42:50,065 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 10:42:50,065 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 10:42:50,065 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 10:42:50,066 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 10:42:50,531 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 10:42:51,018 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 10:42:51,018 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 10:42:51,126 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 10:42:51,222 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 10:42:51,222 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 10:42:51,223 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 10:42:51,223 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 10:42:51,223 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 10:42:51,223 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 10:42:51,223 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 10:42:51,223 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 10:42:51,754 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 10:42:52,119 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:42:52,297 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 10:42:52,473 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:42:52,652 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:42:52,830 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:42:53,007 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:42:53,007 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 10:42:53,007 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 10:42:53,008 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 10:42:53,008 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 10:42:54,287 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 10:42:55,543 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 10:42:55,543 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 10:42:55,713 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 10:42:55,980 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 10:42:55,981 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 10:42:55,981 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 10:42:55,981 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 10:42:55,981 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 10:42:55,981 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 10:42:55,982 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 10:42:55,982 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 10:42:56,497 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 10:42:56,837 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:42:57,014 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 10:42:57,186 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:42:57,359 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:42:57,544 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:42:57,736 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:42:57,736 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 10:42:57,737 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 10:42:57,737 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 10:42:57,737 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 10:42:58,993 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 10:43:00,276 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 10:43:00,277 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 10:43:00,457 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 10:43:00,729 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 10:43:00,729 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 10:43:00,729 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 10:43:05,736 - test_security - INFO - DUT MAC地址: 90:12:10:b5:7d:f7
2025-09-10 10:43:05,736 - test_security - INFO - 尝试MAC地址欺骗...
2025-09-10 10:43:11,523 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 10:43:11,677 - test_security - INFO - 网络对MAC欺骗具有抗性
2025-09-10 10:43:18,263 - test_security - INFO - MAC地址欺骗测试完成
2025-09-10 10:43:18,264 - RSTPTest - INFO - 测试完成: test_mac_spoofing (耗时: 29.75秒)
2025-09-10 10:43:18,265 - RSTPTest - INFO - ============================================================

2025-09-10 10:43:18,267 - RSTPTest - INFO - ============================================================
2025-09-10 10:43:18,267 - RSTPTest - INFO - 开始测试: test_port_security
2025-09-10 10:43:18,267 - RSTPTest - INFO - ============================================================
2025-09-10 10:43:18,268 - test_security - INFO - 开始端口安全测试
2025-09-10 10:43:18,273 - test_security - WARNING - 未检测到任何端口安全功能
2025-09-10 10:43:18,273 - RSTPTest - INFO - 测试完成: test_port_security (耗时: 0.01秒)
2025-09-10 10:43:18,274 - RSTPTest - INFO - ============================================================

2025-09-10 10:43:18,275 - RSTPTest - INFO - ============================================================
2025-09-10 10:43:18,275 - RSTPTest - INFO - 开始测试: test_bpdu_filter_functionality
2025-09-10 10:43:18,276 - RSTPTest - INFO - ============================================================
2025-09-10 10:43:18,276 - test_security - INFO - 开始BPDU过滤器功能测试
2025-09-10 10:43:18,320 - NetworkTopology - INFO - 创建RSTP线性拓扑...
2025-09-10 10:43:18,320 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 10:43:18,320 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 10:43:18,320 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 10:43:18,320 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 10:43:18,321 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 10:43:18,321 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 10:43:18,321 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 10:43:18,884 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 10:43:18,884 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 10:43:19,928 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 10:43:19,929 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 10:43:19,929 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth2']
2025-09-10 10:43:19,929 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 10:43:20,390 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 10:43:20,391 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 10:43:20,492 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 10:43:20,589 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 10:43:20,589 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 10:43:20,590 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 10:43:20,590 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 10:43:20,590 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 10:43:20,591 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 10:43:20,591 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 10:43:20,591 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 10:43:33,296 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 10:43:33,642 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:43:33,814 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 10:43:33,979 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:43:34,153 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:43:34,366 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:43:34,537 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:43:34,537 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 10:43:34,537 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 10:43:34,538 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 10:43:34,538 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 10:43:35,771 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 10:43:36,997 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 10:43:36,997 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 10:43:37,172 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 10:43:37,443 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 10:43:37,444 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 10:43:37,444 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 10:43:37,445 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 10:43:37,445 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 10:43:37,445 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 10:43:37,445 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 10:43:37,445 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 10:43:37,965 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 10:43:38,300 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:43:38,479 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 10:43:38,650 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:43:38,826 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:43:39,001 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:43:39,174 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:43:39,175 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 10:43:39,175 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 10:43:39,175 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0']
2025-09-10 10:43:39,175 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 10:43:40,402 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 10:43:40,402 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 10:43:40,577 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 10:43:40,859 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 10:43:40,859 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 10:43:40,860 - NetworkTopology - INFO - 线性拓扑创建完成
2025-09-10 10:43:45,997 - test_security - WARNING - BPDU包统计命令执行失败: 
2025-09-10 10:43:45,998 - test_security - INFO - 启用过滤器前端口 eth2 BPDU数量: 0
2025-09-10 10:43:46,148 - test_security - WARNING - mstpctl设置BPDU过滤器失败，尝试使用brctl
2025-09-10 10:43:46,245 - test_security - ERROR - 启用BPDU过滤器失败: BPDU过滤器配置失败: 
2025-09-10 10:43:46,246 - test_security - ERROR - 启用BPDU过滤器失败: BPDU过滤器配置失败: 
2025-09-10 10:43:46,392 - test_security - WARNING - 清理命令执行失败: mstpctl setportbpdufilter br0 eth2 no, 错误: 
2025-09-10 10:43:46,537 - test_security - WARNING - 清理命令执行失败: echo 0 > /sys/class/net/br0/bridge/ports/eth2/bpdu_filter, 错误: 
2025-09-10 10:43:46,573 - RSTPTest - INFO - 测试完成: test_bpdu_filter_functionality (耗时: 28.30秒)
2025-09-10 10:43:46,574 - RSTPTest - INFO - ============================================================

2025-09-10 10:43:46,576 - RSTPTest - INFO - ============================================================
2025-09-10 10:43:46,576 - RSTPTest - INFO - 开始测试: test_malformed_bpdu_handling
2025-09-10 10:43:46,576 - RSTPTest - INFO - ============================================================
2025-09-10 10:43:46,577 - test_security - INFO - 开始畸形BPDU处理测试
2025-09-10 10:43:46,583 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 10:43:46,583 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 10:43:46,584 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 10:43:46,584 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 10:43:46,584 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 10:43:46,584 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 10:43:46,584 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 10:43:46,584 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 10:43:47,095 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 10:43:47,096 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 10:43:48,143 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 10:43:48,144 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 10:43:48,144 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 10:43:48,144 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 10:43:48,603 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 10:43:49,084 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 10:43:49,085 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 10:43:49,192 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 10:43:49,288 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 10:43:49,289 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 10:43:49,289 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 10:43:49,289 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 10:43:49,289 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 10:43:49,290 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 10:43:49,290 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 10:43:49,290 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 10:43:49,810 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 10:43:50,160 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:43:50,337 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 10:43:50,508 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:43:50,680 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:43:50,849 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:43:51,019 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:43:51,020 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 10:43:51,020 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 10:43:51,020 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 10:43:51,020 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 10:44:28,592 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 10:45:24,274 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 10:45:24,275 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 10:45:32,481 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 10:45:39,761 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 10:45:39,762 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 10:45:39,762 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 10:45:39,762 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 10:45:39,762 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 10:45:39,763 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 10:45:39,763 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 10:45:39,763 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 10:45:40,267 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 10:45:40,613 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:45:40,794 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 10:45:40,969 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:45:41,140 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:45:41,311 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:45:41,480 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:45:41,481 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 10:45:41,481 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 10:45:41,481 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 10:45:41,481 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 10:45:42,712 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 10:45:43,961 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 10:45:43,962 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 10:45:44,135 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 10:45:44,407 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 10:45:44,407 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 10:45:44,407 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 10:45:49,665 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:45:50,125 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 10:45:50,282 - test_security - INFO - 初始网络状态: 稳定
2025-09-10 10:45:50,282 - test_security - INFO - 执行测试: _test_oversized_bpdu
2025-09-10 10:46:02,669 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 10:46:02,826 - test_security - INFO - _test_oversized_bpdu 网络保持稳定
2025-09-10 10:46:02,826 - test_security - INFO - 执行测试: _test_undersized_bpdu
2025-09-10 10:46:02,831 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

# 创建过小的BPDU（缺少必要字段）
target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 只包含最小字段的BPDU
truncated_bpdu = Raw(load=b"     ")  # 截断的BPDU

packet = eth/llc/truncated_bpdu
sendp(packet, iface=interface, count=5, inter=1, verbose=0)
print("Undersized BPDU sent")
' > /tmp/undersized_bpdu.py
错误: 
2025-09-10 10:46:02,832 - test_security - ERROR - _test_undersized_bpdu 执行失败: 
2025-09-10 10:46:02,832 - test_security - INFO - 执行测试: _test_invalid_protocol_id
2025-09-10 10:46:02,832 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 使用无效的协议ID（正常应该是0x0000）
invalid_bpdu = Raw(load=b"ÿÿ   " + b" " * 30)

packet = eth/llc/invalid_bpdu
sendp(packet, iface=interface, count=5, inter=1, verbose=0)
print("Invalid protocol ID BPDU sent")
' > /tmp/invalid_protocol.py
错误: SSH session not active
2025-09-10 10:46:02,833 - test_security - ERROR - _test_invalid_protocol_id 执行失败: SSH session not active
2025-09-10 10:46:02,833 - test_security - INFO - 执行测试: _test_invalid_version
2025-09-10 10:46:02,833 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 使用无效版本号（正常RSTP应该是2）
invalid_version_bpdu = Raw(load=b"  ÿ  " + b" " * 30)

packet = eth/llc/invalid_version_bpdu
sendp(packet, iface=interface, count=5, inter=1, verbose=0)
print("Invalid version BPDU sent")
' > /tmp/invalid_version.py
错误: SSH session not active
2025-09-10 10:46:02,834 - test_security - ERROR - _test_invalid_version 执行失败: SSH session not active
2025-09-10 10:46:02,834 - test_security - INFO - 执行测试: _test_invalid_message_type
2025-09-10 10:46:02,835 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 使用无效消息类型（正常配置BPDU是0x00，TCN是0x80）
invalid_type_bpdu = Raw(load=b"  ÿ " + b" " * 30)

packet = eth/llc/invalid_type_bpdu
sendp(packet, iface=interface, count=5, inter=1, verbose=0)
print("Invalid message type BPDU sent")
' > /tmp/invalid_type.py
错误: SSH session not active
2025-09-10 10:46:02,835 - test_security - ERROR - _test_invalid_message_type 执行失败: SSH session not active
2025-09-10 10:46:02,835 - test_security - INFO - 执行测试: _test_corrupted_fields
2025-09-10 10:46:02,836 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *
import random

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)

# 创建包含随机损坏数据的BPDU
corrupted_data = bytes([random.randint(0, 255) for _ in range(36)])
corrupted_bpdu = Raw(load=corrupted_data)

packet = eth/llc/corrupted_bpdu
sendp(packet, iface=interface, count=5, inter=1, verbose=0)
print("Corrupted BPDU sent")
' > /tmp/corrupted_bpdu.py
错误: SSH session not active
2025-09-10 10:46:02,836 - test_security - ERROR - _test_corrupted_fields 执行失败: SSH session not active
2025-09-10 10:46:06,013 - RSTPTest - INFO - 测试完成: test_malformed_bpdu_handling (耗时: 139.44秒)
2025-09-10 10:46:06,013 - RSTPTest - INFO - ============================================================

2025-09-10 10:46:06,016 - RSTPTest - INFO - ============================================================
2025-09-10 10:46:06,016 - RSTPTest - INFO - 开始测试: test_non_standard_bpdu_handling
2025-09-10 10:46:06,016 - RSTPTest - INFO - ============================================================
2025-09-10 10:46:06,017 - test_security - INFO - 开始非标准BPDU处理测试
2025-09-10 10:46:06,022 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 10:46:06,022 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 10:46:06,022 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 10:46:06,022 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 10:46:06,023 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 10:46:06,023 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 10:46:06,023 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 10:46:06,023 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 10:46:06,545 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 10:46:06,545 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 10:46:07,583 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 10:46:07,583 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 10:46:07,584 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 10:46:07,584 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 10:46:08,037 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 10:46:08,514 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 10:46:08,515 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 10:46:08,618 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 10:46:08,713 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 10:46:08,714 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 10:46:08,714 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 10:46:08,714 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 10:46:08,714 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 10:46:08,714 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 10:46:08,715 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 10:46:08,715 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 10:46:08,715 - SSH_TestNode1 - WARNING - TestNode1: SSH连接已断开，尝试重连...
2025-09-10 10:46:08,835 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 10:46:08,959 - SSH_TestNode1 - INFO - TestNode1: SSH重连成功
2025-09-10 10:46:24,569 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 10:46:24,923 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:46:25,100 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 10:46:25,272 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:46:25,448 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:46:25,623 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:46:25,810 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:46:25,810 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 10:46:25,810 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 10:46:25,811 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 10:46:25,811 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 10:46:27,035 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 10:46:28,657 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 10:46:28,658 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 10:46:28,826 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 10:46:29,101 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 10:46:29,101 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 10:46:29,102 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 10:46:29,102 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 10:46:29,102 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 10:46:29,102 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 10:46:29,102 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 10:46:29,102 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 10:46:29,597 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 10:46:29,943 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:46:30,120 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 10:46:30,290 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:46:30,479 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:46:30,649 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:46:30,825 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:46:30,825 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 10:46:30,825 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 10:46:30,826 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 10:46:30,826 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 10:46:32,062 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 10:46:33,316 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 10:46:33,316 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 10:46:33,487 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 10:46:33,757 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 10:46:33,757 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 10:46:33,757 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 10:46:38,758 - test_security - INFO - 执行测试: _test_pvst_plus_bpdu
2025-09-10 10:46:38,763 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

# PVST+ 使用不同的目标MAC地址
pvst_mac = "01:00:0c:cc:cc:cd"
interface = "eth0"

eth = Ether(dst=pvst_mac, src="00:11:22:33:44:55")
# PVST+ 使用SNAP封装
snap = SNAP(OUI=0x00000c, code=0x010b)
# 模拟PVST+ BPDU结构
pvst_bpdu = Raw(load=b"    " + b" " * 30 + b" ")  # 包含VLAN ID

packet = eth/snap/pvst_bpdu
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("PVST+ BPDU sent")
' > /tmp/pvst_bpdu.py
错误: 
2025-09-10 10:46:38,764 - test_security - ERROR - _test_pvst_plus_bpdu 执行失败: 
2025-09-10 10:46:38,765 - test_security - INFO - 执行测试: _test_cisco_proprietary_bpdu
2025-09-10 10:46:38,765 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 模拟包含Cisco专有扩展的BPDU
cisco_bpdu = Raw(load=b"    " + b" " * 30 + 
                     b" )   ")  # Cisco OUI + 专有数据

packet = eth/llc/cisco_bpdu
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("Cisco proprietary BPDU sent")
' > /tmp/cisco_bpdu.py
错误: SSH session not active
2025-09-10 10:46:38,766 - test_security - ERROR - _test_cisco_proprietary_bpdu 执行失败: SSH session not active
2025-09-10 10:46:38,766 - test_security - INFO - 执行测试: _test_vlan_tagged_bpdu
2025-09-10 10:46:38,767 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
# 添加VLAN标签
vlan = Dot1Q(vlan=100)
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
bpdu = STP(bpdutype=0x00, rootid=32768, bridgeid=32768)

packet = eth/vlan/llc/bpdu
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("VLAN tagged BPDU sent")
' > /tmp/vlan_bpdu.py
错误: SSH session not active
2025-09-10 10:46:38,768 - test_security - ERROR - _test_vlan_tagged_bpdu 执行失败: SSH session not active
2025-09-10 10:46:38,768 - test_security - INFO - 执行测试: _test_unknown_tlv_bpdu
2025-09-10 10:46:38,768 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 标准BPDU + 未知TLV
standard_bpdu = b"    " + b" " * 30
unknown_tlv = b"ÿÿ "  # 未知类型和长度的TLV
bpdu_with_tlv = Raw(load=standard_bpdu + unknown_tlv)

packet = eth/llc/bpdu_with_tlv
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("BPDU with unknown TLV sent")
' > /tmp/unknown_tlv.py
错误: SSH session not active
2025-09-10 10:46:38,770 - test_security - ERROR - _test_unknown_tlv_bpdu 执行失败: SSH session not active
2025-09-10 10:46:38,962 - test_security - INFO - 非标准BPDU处理测试完成
2025-09-10 10:46:38,963 - RSTPTest - INFO - 测试完成: test_non_standard_bpdu_handling (耗时: 32.95秒)
2025-09-10 10:46:38,964 - RSTPTest - INFO - ============================================================

2025-09-10 10:46:38,965 - RSTPTest - INFO - ============================================================
2025-09-10 10:46:38,965 - RSTPTest - INFO - 开始测试: test_bpdu_guard_functionality
2025-09-10 10:46:38,966 - RSTPTest - INFO - ============================================================
2025-09-10 10:46:38,966 - test_security - INFO - 开始BPDU防护功能测试
2025-09-10 10:46:38,971 - NetworkTopology - INFO - 创建RSTP线性拓扑...
2025-09-10 10:46:38,971 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 10:46:38,971 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 10:46:38,972 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 10:46:38,972 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 10:46:38,972 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 10:46:38,972 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 10:46:38,973 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 10:46:39,509 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 10:46:39,509 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 10:46:40,688 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 10:46:40,688 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 10:46:40,688 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth2']
2025-09-10 10:46:40,689 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 10:46:41,306 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 10:46:41,307 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 10:46:41,410 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 10:46:41,510 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 10:46:41,510 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 10:46:41,510 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 10:46:41,511 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 10:46:41,511 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 10:46:41,511 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 10:46:41,511 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 10:46:41,511 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 10:46:41,512 - SSH_TestNode1 - WARNING - TestNode1: SSH连接已断开，尝试重连...
2025-09-10 10:46:41,640 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 10:46:41,763 - SSH_TestNode1 - INFO - TestNode1: SSH重连成功
2025-09-10 10:46:42,265 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 10:46:42,621 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:46:42,787 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 10:46:42,958 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:46:43,134 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:46:43,303 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:46:43,480 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:46:43,481 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 10:46:43,481 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 10:46:43,481 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 10:46:43,481 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 10:46:44,783 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 10:46:46,005 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 10:46:46,006 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 10:46:46,177 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 10:46:46,443 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 10:46:46,443 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 10:46:46,443 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 10:46:46,443 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 10:46:46,444 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 10:46:46,444 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 10:46:46,444 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 10:46:46,444 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 10:46:46,975 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 10:46:47,336 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:46:47,516 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 10:46:47,689 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:46:47,867 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:46:48,037 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:46:48,213 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:46:48,213 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 10:46:48,213 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 10:46:48,214 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0']
2025-09-10 10:46:48,214 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 10:46:49,444 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 10:46:49,445 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 10:46:49,621 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 10:46:49,891 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 10:46:49,891 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 10:46:49,891 - NetworkTopology - INFO - 线性拓扑创建完成
2025-09-10 10:46:54,949 - test_security - WARNING - 启用BPDU防护失败: 
2025-09-10 10:46:54,997 - test_security - INFO - 边缘端口 eth2 初始状态: unknown
2025-09-10 10:46:54,997 - test_security - INFO - 向边缘端口 eth2 发送BPDU
2025-09-10 10:47:01,858 - test_security - INFO - BPDU防护触发后端口 eth2 状态: unknown
2025-09-10 10:47:01,858 - test_security - ERROR - BPDU防护功能异常：端口未被禁用
2025-09-10 10:47:02,086 - RSTPTest - INFO - 测试完成: test_bpdu_guard_functionality (耗时: 23.12秒)
2025-09-10 10:47:02,087 - RSTPTest - INFO - ============================================================

2025-09-10 10:47:02,089 - RSTPTest - INFO - ============================================================
2025-09-10 10:47:02,089 - RSTPTest - INFO - 开始测试: test_root_guard_functionality
2025-09-10 10:47:02,089 - RSTPTest - INFO - ============================================================
2025-09-10 10:47:02,090 - test_security - INFO - 开始根防护功能测试
2025-09-10 10:47:02,112 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 10:47:02,112 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 10:47:02,113 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 10:47:02,113 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 10:47:02,113 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 10:47:02,113 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 10:47:02,113 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 10:47:02,114 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 10:47:02,664 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 10:47:02,664 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 10:47:03,697 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 10:47:03,697 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 10:47:03,697 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 10:47:03,698 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 10:47:04,157 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 10:47:04,636 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 10:47:04,637 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 10:47:04,744 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 10:47:04,841 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 10:47:04,841 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 10:47:04,841 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 10:47:04,841 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 10:47:04,842 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 10:47:04,842 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 10:47:04,842 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 10:47:04,842 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 10:47:05,359 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 10:47:05,710 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:47:05,879 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 10:47:06,049 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:47:06,226 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:47:06,405 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:47:06,576 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:47:06,576 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 10:47:06,577 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 10:47:06,577 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 10:47:06,577 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 10:47:07,796 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 10:47:09,051 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 10:47:09,051 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 10:47:09,230 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 10:47:09,510 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 10:47:09,511 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 10:47:09,511 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 10:47:09,511 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 10:47:09,511 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 10:47:09,512 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 10:47:09,512 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 10:47:09,512 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 10:47:10,041 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 10:47:10,393 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:47:10,564 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 10:47:10,740 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:47:10,908 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:47:11,084 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:47:11,256 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:47:11,256 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 10:47:11,257 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 10:47:11,257 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 10:47:11,257 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 10:47:12,479 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 10:47:13,720 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 10:47:13,721 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 10:47:13,895 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 10:47:14,170 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 10:47:14,170 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 10:47:14,170 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 10:47:19,428 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:47:19,584 - test_security - INFO - 当前根桥ID: 
2025-09-10 10:47:19,685 - test_security - WARNING - 启用根防护失败: 
2025-09-10 10:47:19,685 - test_security - INFO - 在端口 eth1 启用根防护
2025-09-10 10:47:19,733 - test_security - INFO - 端口 eth1 初始状态: unknown
2025-09-10 10:47:19,733 - test_security - INFO - 发送更优BPDU尝试劫持根桥
2025-09-10 10:47:35,663 - test_security - INFO - 根防护触发后端口 eth1 状态: unknown
2025-09-10 10:47:35,963 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 10:47:36,121 - test_security - INFO - 根防护功能正常：根桥身份未被劫持
2025-09-10 10:47:36,122 - test_security - ERROR - 根防护功能异常：端口未进入阻塞状态
2025-09-10 10:47:36,122 - test_security - INFO - 测试根防护端口 eth1 恢复功能
2025-09-10 10:47:36,122 - test_security - INFO - 停止发送更优BPDU
2025-09-10 10:47:46,159 - test_security - INFO - 端口恢复后状态: unknown
2025-09-10 10:47:46,160 - test_security - WARNING - 根防护端口未能自动恢复
2025-09-10 10:47:46,517 - RSTPTest - INFO - 测试完成: test_root_guard_functionality (耗时: 44.43秒)
2025-09-10 10:47:46,517 - RSTPTest - INFO - ============================================================

2025-09-10 10:47:46,519 - RSTPTest - INFO - ============================================================
2025-09-10 10:47:46,519 - RSTPTest - INFO - 开始测试: test_loop_guard_functionality
2025-09-10 10:47:46,519 - RSTPTest - INFO - ============================================================
2025-09-10 10:47:46,520 - test_security - INFO - 开始环路防护功能测试
2025-09-10 10:47:46,520 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 10:47:46,521 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 10:47:46,521 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 10:47:46,521 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 10:47:46,521 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 10:47:46,521 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 10:47:46,522 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 10:47:46,522 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 10:47:47,031 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 10:47:47,031 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 10:47:48,072 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 10:47:48,072 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 10:47:48,073 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 10:47:48,073 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 10:47:48,532 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 10:47:49,011 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 10:47:49,012 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 10:47:49,115 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 10:47:49,212 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 10:47:49,212 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 10:47:49,213 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 10:47:49,213 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 10:47:49,213 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 10:47:49,213 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 10:47:49,213 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 10:47:49,214 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 10:47:49,713 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 10:47:50,067 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:47:50,241 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 10:47:50,419 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:47:50,592 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:47:50,768 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:47:50,941 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:47:50,941 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 10:47:50,941 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 10:47:50,941 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 10:47:50,941 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 10:47:52,181 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 10:47:53,442 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 10:47:53,442 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-10 10:47:53,625 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 10:47:53,901 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 10:47:53,902 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 10:47:53,902 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 10:47:53,902 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 10:47:53,902 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 10:47:53,903 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 10:47:53,903 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 10:47:53,903 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 10:47:54,416 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 10:47:54,759 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setforcevers br0 rstp

2025-09-10 10:47:54,929 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 10:47:55,103 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 10:47:55,275 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 10:47:55,451 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 10:47:55,614 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl settxholdcount br0 6

2025-09-10 10:47:55,615 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 10:47:55,615 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 10:47:55,615 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 10:47:55,615 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 10:47:56,829 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 10:47:58,095 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 10:47:58,096 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-10 10:47:58,274 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 10:47:58,545 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 10:47:58,545 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 10:47:58,546 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 10:48:03,604 - test_security - WARNING - 启用环路防护失败: 
2025-09-10 10:48:03,605 - test_security - INFO - 在端口 eth1 启用环路防护
2025-09-10 10:48:03,652 - test_security - INFO - 端口 eth1 初始状态: unknown
2025-09-10 10:48:03,653 - test_security - INFO - 模拟单向链路故障
2025-09-10 10:48:03,653 - test_security - INFO - 停止从测试节点发送BPDU
2025-09-10 10:48:23,796 - test_security - INFO - 环路防护触发后端口 eth1 状态: unknown
2025-09-10 10:48:23,797 - test_security - WARNING - 环路防护功能异常：端口未进入阻塞状态
2025-09-10 10:48:23,797 - test_security - INFO - 测试环路防护端口 eth1 恢复功能
2025-09-10 10:48:23,797 - test_security - INFO - 恢复BPDU发送
2025-09-10 10:48:33,929 - test_security - INFO - 端口恢复后状态: unknown
2025-09-10 10:48:33,929 - test_security - WARNING - 环路防护端口未能自动恢复
2025-09-10 10:48:34,134 - test_security - INFO - 环路防护功能测试完成
2025-09-10 10:48:34,135 - RSTPTest - INFO - 测试完成: test_loop_guard_functionality (耗时: 47.62秒)
2025-09-10 10:48:34,136 - RSTPTest - INFO - ============================================================

2025-09-10 10:48:34,136 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 10:48:34,136 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 10:48:34,137 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 10:48:34,704 - __main__ - INFO - ============================================================
2025-09-10 10:48:34,705 - __main__ - INFO - 测试完成，返回码: 1
2025-09-10 10:48:34,705 - __main__ - INFO - ============================================================
