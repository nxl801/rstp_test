2025-09-10 22:35:43,686 - root - INFO - 日志系统初始化完成，日志文件: logs\rstp_test_20250910_223543.log
2025-09-10 22:35:44,100 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 22:35:44,100 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 22:35:44,220 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 22:35:44,220 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 22:35:44,353 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 22:35:44,354 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 22:35:44,354 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 22:35:44,354 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-10 22:35:44,355 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 22:35:44,355 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 22:35:44,413 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 22:35:44,414 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 22:35:54,534 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 22:35:54,534 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 22:35:54,535 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 22:35:54,535 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 22:35:54,535 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 22:35:54,590 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 22:35:54,590 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 22:36:04,711 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 22:36:04,712 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 22:36:04,712 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 22:36:04,712 - RSTPTest - INFO - ============================================================
2025-09-10 22:36:04,712 - RSTPTest - INFO - 开始测试: test_port_state_transitions
2025-09-10 22:36:04,713 - RSTPTest - INFO - ============================================================
2025-09-10 22:36:04,713 - test_additional_rstp - INFO - 开始端口状态转换测试
2025-09-10 22:36:04,713 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 22:36:04,714 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 22:36:04,714 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 22:36:04,714 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 22:36:04,714 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 22:36:04,714 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 22:36:04,714 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 22:36:04,714 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-10 22:36:04,714 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-10 22:36:05,185 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-10 22:36:05,185 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 22:36:05,185 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 22:36:05,341 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-10 22:36:06,396 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-10 22:36:06,397 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 22:36:06,397 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 22:36:06,397 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 22:36:06,397 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-10 22:36:06,869 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-10 22:36:07,346 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 22:36:07,346 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 22:36:07,537 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 22:36:07,538 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 22:36:07,538 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 22:36:07,538 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 22:36:07,538 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 22:36:07,539 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 22:36:07,539 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 22:36:07,539 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 22:36:37,888 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 22:38:11,960 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 22:38:22,041 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 22:38:22,041 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 22:38:22,041 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 22:38:22,042 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 22:38:22,042 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 22:39:18,184 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 22:39:59,538 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 22:39:59,538 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 22:39:59,635 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 22:40:01,834 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 22:40:01,835 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 22:40:01,835 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 22:40:01,835 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 22:40:01,835 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 22:40:01,836 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 22:40:01,836 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 22:40:01,836 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 22:40:32,185 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 22:42:06,241 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 22:42:16,324 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 22:42:16,325 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 22:42:16,325 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 22:42:16,325 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 22:42:16,325 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 22:43:03,778 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 22:43:45,141 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 22:43:45,142 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 22:43:45,238 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 22:43:47,428 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 22:43:47,429 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 22:43:47,429 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-10 22:43:47,429 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-10 22:43:47,429 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令
2025-09-10 22:43:50,564 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ("8N10xiaol\r\n8N10xiaol\r\nUnknown command [setbridgeprio]\r\nUsage: mstpctl [options] [commands]\r\noptions:\r\n  -h | --help              Show this help text\r\n  -V | --version           Show version\r\n  -b | --batch <file>      Process file with mstpctl commands\r\n  -s | --stdin             Process mstpctl commands from stdin\r\n                           Make sure to provide newlines between\r\n                           commands. Won't work if `batch` is used\r\n  -i | --ignore            Ignore failing commands during batch\r\n                           processing\r\n  -f | --format <format>   Select output format (json, plain)\r\ncommands:\r\n-Add bridges to the mstpd's list:\r\n   addbridge        <bridge> [<bridge> ...]\r\n-Remove bridges from the mstpd's list:\r\n   delbridge        <bridge> [<bridge> ...]\r\n-Show bridge state for the CIST:\r\n   showbridge       [<bridge> ... [param]]\r\n-Show list of registered MSTIs:\r\n   showmstilist     <bridge>\r\n-Show MST ConfigId:\r\n   showmstconfid    <bridge>\r\n-Show VID-to-FID allocation table:\r\n   showvid2fid      <bridge>\r\n-Show FID-to-MSTID allocation table:\r\n   showfid2mstid    <bridge>\r\n-Show port state for the CIST:\r\n   showport         <bridge> [<port>...[port] [param]]\r\n-Show port state for the CIST:\r\n   showportparams   <bridge> <port> <param>...[param]\r\n-Show port detailed state for the CIST:\r\n   showportdetail   <bridge> [<port> ... [param]]\r\n-Show bridge state for the given MSTI:\r\n   showtree         <bridge> <mstid>\r\n-Show port detailed state for the given MSTI:\r\n   showtreeport     <bridge> <port> <mstid>\r\n-Set MST ConfigId elements: Revision Level (0-65535) and Name:\r\n   setmstconfid     <bridge> <revision> <name>\r\n-Set VIDs-to-FIDs allocation:\r\n   setvid2fid       <bridge> <FID>:<VIDs List> [<FID>:<VIDs List> ...]\r\n-Set FIDs-to-MSTIDs allocation:\r\n   setfid2mstid     <bridge> <mstid>:<FIDs List> [<mstid>:<FIDs List> ...]\r\n-Set bridge max age (6-40):\r\n   setmaxage        <bridge> <max_age>\r\n-Set bridge forward delay (4-30):\r\n   setfdelay        <bridge> <fwd_delay>\r\n-Set bridge max hops (6-40):\r\n   setmaxhops       <bridge> <max_hops>\r\n-Set bridge hello time (1-10):\r\n   sethello         <bridge> <hello_time>\r\n-Set bridge ageing time (10-1000000):\r\n   setageing        <bridge> <ageing_time>\r\n-Force Spanning Tree protocol version:\r\n   setforcevers     <bridge> {mstp|rstp|stp}\r\n-Set bridge transmit hold count (1-10):\r\n   settxholdcount   <bridge> <tx_hold_count>\r\n-Create new MSTI:\r\n   createtree       <bridge> <mstid>\r\n-Delete existing MSTI:\r\n   deletetree       <bridge> <mstid>\r\n-Set bridge priority (0-15) for the given MSTI:\r\n   settreeprio      <bridge> <mstid> <priority>\r\n-Set port external path cost for the CIST (0 = auto):\r\n   setportpathcost  <bridge> <port> <cost>\r\n-Set initial edge state:\r\n   setportadminedge <bridge> <port> {yes|no}\r\n-Enable auto transition to/from edge state:\r\n   setportautoedge  <bridge> <port> {yes|no}\r\n-Set p2p detection mode:\r\n   setportp2p       <bridge> <port> {yes|no|auto}\r\n-Restrict port ability to take Root role:\r\n   setportrestrrole <bridge> <port> {yes|no}\r\n-Restrict port ability to propagate received TCNs:\r\n   setportrestrtcn  <bridge> <port> {yes|no}\r\n-Try to get back from STP to rapid (RSTP/MSTP) mode:\r\n   portmcheck       <bridge> <port>\r\n-Set bpdu guard state:\r\n   setbpduguard     <bridge> <port> {yes|no}\r\n-Set port priority (0-15) for the given MSTI:\r\n   settreeportprio  <bridge> <port> <mstid> <priority>\r\n-Set port internal path cost for the given MSTI (0 = auto):\r\n   settreeportcost  <bridge> <port> <mstid> <cost>\r\n-Set port network state:\r\n   setportnetwork   <bridge> <port> {yes|no}\r\n-Set BPDU filter state:\r\n   setportbpdufilter <bridge> <port> {yes|no}\r\n-Level of verbosity:\r\n   debuglevel       <level>\r\n", '', 1)
2025-09-10 22:43:50,566 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 32768 (方法: ovs)
2025-09-10 22:43:50,566 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-10 22:43:50,686 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-10 22:43:55,831 - test_additional_rstp - INFO - 使用网桥: SE_ETH2
2025-09-10 22:43:55,831 - test_additional_rstp - INFO - === 步骤1: 禁用端口触发状态转换 ===
2025-09-10 22:43:56,239 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:43:56,392 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:43:56,393 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 22:43:56,394 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 22:43:56,394 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 22:43:56,394 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 22:43:56,854 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:43:56,854 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:43:56,855 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:43:56,856 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:43:56,856 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:43:56,856 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:43:57,153 - RSTPTest - INFO - 测试完成: test_port_state_transitions (耗时: 472.44秒)
2025-09-10 22:43:57,153 - RSTPTest - INFO - ============================================================

2025-09-10 22:43:57,156 - RSTPTest - INFO - ============================================================
2025-09-10 22:43:57,156 - RSTPTest - INFO - 开始测试: test_bpdu_propagation_and_keepalive
2025-09-10 22:43:57,156 - RSTPTest - INFO - ============================================================
2025-09-10 22:43:57,157 - test_additional_rstp - INFO - 开始BPDU传播和保活机制测试
2025-09-10 22:43:57,157 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 22:43:57,157 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 22:43:57,158 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 22:43:57,158 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 22:43:57,158 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 22:43:57,158 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 22:43:57,158 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 22:43:57,159 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-10 22:43:57,159 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-10 22:43:57,666 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-10 22:43:57,666 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 22:43:57,667 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 22:43:57,817 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-10 22:43:58,899 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-10 22:43:58,900 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 22:43:58,900 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 22:43:58,900 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 22:43:58,901 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-10 22:43:59,511 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-10 22:43:59,985 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 22:43:59,986 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 22:44:00,178 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 22:44:00,178 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 22:44:00,178 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 22:44:00,179 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 22:44:00,179 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 22:44:00,179 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 22:44:00,179 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 22:44:00,179 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 22:44:12,707 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 22:44:17,218 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 22:44:17,367 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 22:44:17,368 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 22:44:17,368 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 22:44:17,368 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 22:44:17,368 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 22:44:18,591 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 22:44:19,773 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 22:44:19,773 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 22:44:19,868 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 22:44:20,131 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 22:44:20,132 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 22:44:20,132 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 22:44:20,132 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 22:44:20,132 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 22:44:20,132 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 22:44:20,133 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 22:44:20,133 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 22:44:33,579 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 22:44:38,064 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 22:44:38,202 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 22:44:38,203 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 22:44:38,203 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 22:44:38,203 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 22:44:38,203 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 22:44:39,382 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 22:44:40,624 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 22:44:40,624 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 22:44:40,720 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 22:44:40,982 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 22:44:40,983 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 22:44:40,983 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-10 22:44:40,983 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-10 22:44:40,983 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令
2025-09-10 22:44:41,111 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ("8N10xiaol\r\n8N10xiaol\r\nUnknown command [setbridgeprio]\r\nUsage: mstpctl [options] [commands]\r\noptions:\r\n  -h | --help              Show this help text\r\n  -V | --version           Show version\r\n  -b | --batch <file>      Process file with mstpctl commands\r\n  -s | --stdin             Process mstpctl commands from stdin\r\n                           Make sure to provide newlines between\r\n                           commands. Won't work if `batch` is used\r\n  -i | --ignore            Ignore failing commands during batch\r\n                           processing\r\n  -f | --format <format>   Select output format (json, plain)\r\ncommands:\r\n-Add bridges to the mstpd's list:\r\n   addbridge        <bridge> [<bridge> ...]\r\n-Remove bridges from the mstpd's list:\r\n   delbridge        <bridge> [<bridge> ...]\r\n-Show bridge state for the CIST:\r\n   showbridge       [<bridge> ... [param]]\r\n-Show list of registered MSTIs:\r\n   showmstilist     <bridge>\r\n-Show MST ConfigId:\r\n   showmstconfid    <bridge>\r\n-Show VID-to-FID allocation table:\r\n   showvid2fid      <bridge>\r\n-Show FID-to-MSTID allocation table:\r\n   showfid2mstid    <bridge>\r\n-Show port state for the CIST:\r\n   showport         <bridge> [<port>...[port] [param]]\r\n-Show port state for the CIST:\r\n   showportparams   <bridge> <port> <param>...[param]\r\n-Show port detailed state for the CIST:\r\n   showportdetail   <bridge> [<port> ... [param]]\r\n-Show bridge state for the given MSTI:\r\n   showtree         <bridge> <mstid>\r\n-Show port detailed state for the given MSTI:\r\n   showtreeport     <bridge> <port> <mstid>\r\n-Set MST ConfigId elements: Revision Level (0-65535) and Name:\r\n   setmstconfid     <bridge> <revision> <name>\r\n-Set VIDs-to-FIDs allocation:\r\n   setvid2fid       <bridge> <FID>:<VIDs List> [<FID>:<VIDs List> ...]\r\n-Set FIDs-to-MSTIDs allocation:\r\n   setfid2mstid     <bridge> <mstid>:<FIDs List> [<mstid>:<FIDs List> ...]\r\n-Set bridge max age (6-40):\r\n   setmaxage        <bridge> <max_age>\r\n-Set bridge forward delay (4-30):\r\n   setfdelay        <bridge> <fwd_delay>\r\n-Set bridge max hops (6-40):\r\n   setmaxhops       <bridge> <max_hops>\r\n-Set bridge hello time (1-10):\r\n   sethello         <bridge> <hello_time>\r\n-Set bridge ageing time (10-1000000):\r\n   setageing        <bridge> <ageing_time>\r\n-Force Spanning Tree protocol version:\r\n   setforcevers     <bridge> {mstp|rstp|stp}\r\n-Set bridge transmit hold count (1-10):\r\n   settxholdcount   <bridge> <tx_hold_count>\r\n-Create new MSTI:\r\n   createtree       <bridge> <mstid>\r\n-Delete existing MSTI:\r\n   deletetree       <bridge> <mstid>\r\n-Set bridge priority (0-15) for the given MSTI:\r\n   settreeprio      <bridge> <mstid> <priority>\r\n-Set port external path cost for the CIST (0 = auto):\r\n   setportpathcost  <bridge> <port> <cost>\r\n-Set initial edge state:\r\n   setportadminedge <bridge> <port> {yes|no}\r\n-Enable auto transition to/from edge state:\r\n   setportautoedge  <bridge> <port> {yes|no}\r\n-Set p2p detection mode:\r\n   setportp2p       <bridge> <port> {yes|no|auto}\r\n-Restrict port ability to take Root role:\r\n   setportrestrrole <bridge> <port> {yes|no}\r\n-Restrict port ability to propagate received TCNs:\r\n   setportrestrtcn  <bridge> <port> {yes|no}\r\n-Try to get back from STP to rapid (RSTP/MSTP) mode:\r\n   portmcheck       <bridge> <port>\r\n-Set bpdu guard state:\r\n   setbpduguard     <bridge> <port> {yes|no}\r\n-Set port priority (0-15) for the given MSTI:\r\n   settreeportprio  <bridge> <port> <mstid> <priority>\r\n-Set port internal path cost for the given MSTI (0 = auto):\r\n   settreeportcost  <bridge> <port> <mstid> <cost>\r\n-Set port network state:\r\n   setportnetwork   <bridge> <port> {yes|no}\r\n-Set BPDU filter state:\r\n   setportbpdufilter <bridge> <port> {yes|no}\r\n-Level of verbosity:\r\n   debuglevel       <level>\r\n", '', 1)
2025-09-10 22:44:41,113 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 32768 (方法: ovs)
2025-09-10 22:44:41,113 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-10 22:44:41,233 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-10 22:44:41,377 - NetworkTopology_TestNode2 - INFO - TestNode2: 设置网桥优先级 br0 = 24576 (方法: mstpd)
2025-09-10 22:44:41,378 - NetworkTopology_TestNode2 - INFO - TestNode2: 执行mstpd设置优先级命令
2025-09-10 22:44:41,508 - NetworkTopology_TestNode2 - INFO - TestNode2: mstpd设置优先级结果: ("8N10xiaol\r\n8N10xiaol\r\nUnknown command [setbridgeprio]\r\nUsage: mstpctl [options] [commands]\r\noptions:\r\n  -h | --help              Show this help text\r\n  -V | --version           Show version\r\n  -b | --batch <file>      Process file with mstpctl commands\r\n  -s | --stdin             Process mstpctl commands from stdin\r\n                           Make sure to provide newlines between\r\n                           commands. Won't work if `batch` is used\r\n  -i | --ignore            Ignore failing commands during batch\r\n                           processing\r\n  -f | --format <format>   Select output format (json, plain)\r\ncommands:\r\n-Add bridges to the mstpd's list:\r\n   addbridge        <bridge> [<bridge> ...]\r\n-Remove bridges from the mstpd's list:\r\n   delbridge        <bridge> [<bridge> ...]\r\n-Show bridge state for the CIST:\r\n   showbridge       [<bridge> ... [param]]\r\n-Show list of registered MSTIs:\r\n   showmstilist     <bridge>\r\n-Show MST ConfigId:\r\n   showmstconfid    <bridge>\r\n-Show VID-to-FID allocation table:\r\n   showvid2fid      <bridge>\r\n-Show FID-to-MSTID allocation table:\r\n   showfid2mstid    <bridge>\r\n-Show port state for the CIST:\r\n   showport         <bridge> [<port>...[port] [param]]\r\n-Show port state for the CIST:\r\n   showportparams   <bridge> <port> <param>...[param]\r\n-Show port detailed state for the CIST:\r\n   showportdetail   <bridge> [<port> ... [param]]\r\n-Show bridge state for the given MSTI:\r\n   showtree         <bridge> <mstid>\r\n-Show port detailed state for the given MSTI:\r\n   showtreeport     <bridge> <port> <mstid>\r\n-Set MST ConfigId elements: Revision Level (0-65535) and Name:\r\n   setmstconfid     <bridge> <revision> <name>\r\n-Set VIDs-to-FIDs allocation:\r\n   setvid2fid       <bridge> <FID>:<VIDs List> [<FID>:<VIDs List> ...]\r\n-Set FIDs-to-MSTIDs allocation:\r\n   setfid2mstid     <bridge> <mstid>:<FIDs List> [<mstid>:<FIDs List> ...]\r\n-Set bridge max age (6-40):\r\n   setmaxage        <bridge> <max_age>\r\n-Set bridge forward delay (4-30):\r\n   setfdelay        <bridge> <fwd_delay>\r\n-Set bridge max hops (6-40):\r\n   setmaxhops       <bridge> <max_hops>\r\n-Set bridge hello time (1-10):\r\n   sethello         <bridge> <hello_time>\r\n-Set bridge ageing time (10-1000000):\r\n   setageing        <bridge> <ageing_time>\r\n-Force Spanning Tree protocol version:\r\n   setforcevers     <bridge> {mstp|rstp|stp}\r\n-Set bridge transmit hold count (1-10):\r\n   settxholdcount   <bridge> <tx_hold_count>\r\n-Create new MSTI:\r\n   createtree       <bridge> <mstid>\r\n-Delete existing MSTI:\r\n   deletetree       <bridge> <mstid>\r\n-Set bridge priority (0-15) for the given MSTI:\r\n   settreeprio      <bridge> <mstid> <priority>\r\n-Set port external path cost for the CIST (0 = auto):\r\n   setportpathcost  <bridge> <port> <cost>\r\n-Set initial edge state:\r\n   setportadminedge <bridge> <port> {yes|no}\r\n-Enable auto transition to/from edge state:\r\n   setportautoedge  <bridge> <port> {yes|no}\r\n-Set p2p detection mode:\r\n   setportp2p       <bridge> <port> {yes|no|auto}\r\n-Restrict port ability to take Root role:\r\n   setportrestrrole <bridge> <port> {yes|no}\r\n-Restrict port ability to propagate received TCNs:\r\n   setportrestrtcn  <bridge> <port> {yes|no}\r\n-Try to get back from STP to rapid (RSTP/MSTP) mode:\r\n   portmcheck       <bridge> <port>\r\n-Set bpdu guard state:\r\n   setbpduguard     <bridge> <port> {yes|no}\r\n-Set port priority (0-15) for the given MSTI:\r\n   settreeportprio  <bridge> <port> <mstid> <priority>\r\n-Set port internal path cost for the given MSTI (0 = auto):\r\n   settreeportcost  <bridge> <port> <mstid> <cost>\r\n-Set port network state:\r\n   setportnetwork   <bridge> <port> {yes|no}\r\n-Set BPDU filter state:\r\n   setportbpdufilter <bridge> <port> {yes|no}\r\n-Level of verbosity:\r\n   debuglevel       <level>\r\n", '', 1)
2025-09-10 22:44:49,510 - test_additional_rstp - INFO - === 步骤1: 验证分布式BPDU生成 ===
2025-09-10 22:44:49,557 - test_additional_rstp - INFO - 检测到网桥接口: ['18:', '26:']
2025-09-10 22:44:49,557 - test_additional_rstp - INFO - 在接口 18: 上捕获BPDU...
2025-09-10 22:44:49,557 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: 18:, 数量: 10)
2025-09-10 22:44:49,682 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-10 22:44:49,682 - test_additional_rstp - WARNING - 在 18: 上未捕获到BPDU
2025-09-10 22:44:49,683 - test_additional_rstp - INFO - 在接口 26: 上捕获BPDU...
2025-09-10 22:44:49,683 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: 26:, 数量: 10)
2025-09-10 22:44:49,790 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-10 22:44:49,790 - test_additional_rstp - WARNING - 在 26: 上未捕获到BPDU
2025-09-10 22:44:49,790 - test_additional_rstp - INFO - 总共捕获 0 个BPDU，来自 0 个不同源
2025-09-10 22:44:49,790 - test_additional_rstp - WARNING - 未检测到BPDU传播
2025-09-10 22:44:49,790 - test_additional_rstp - INFO - BPDU传播和保活机制测试完成
2025-09-10 22:44:49,791 - RSTPTest - INFO - 测试完成: test_bpdu_propagation_and_keepalive (耗时: 52.63秒)
2025-09-10 22:44:49,791 - RSTPTest - INFO - ============================================================

2025-09-10 22:44:49,793 - RSTPTest - INFO - ============================================================
2025-09-10 22:44:49,793 - RSTPTest - INFO - 开始测试: test_disabled_port_exclusion_enhanced
2025-09-10 22:44:49,793 - RSTPTest - INFO - ============================================================
2025-09-10 22:44:49,794 - test_additional_rstp - INFO - 开始增强的禁用端口排除测试
2025-09-10 22:44:49,794 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 22:44:49,794 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 22:44:49,794 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 22:44:49,794 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 22:44:49,794 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 22:44:49,795 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 22:44:49,795 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 22:44:49,795 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-10 22:44:49,795 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-10 22:44:50,289 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-10 22:44:50,289 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 22:44:50,289 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 22:44:50,445 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-10 22:44:51,512 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-10 22:44:51,513 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 22:44:51,513 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 22:44:51,513 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 22:44:51,513 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-10 22:44:51,989 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-10 22:44:52,465 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 22:44:52,465 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 22:44:52,653 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 22:44:52,653 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 22:44:52,653 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 22:44:52,653 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 22:44:52,654 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 22:44:52,654 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 22:44:52,654 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 22:44:52,654 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 22:44:53,139 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 22:44:57,619 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 22:44:57,749 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 22:44:57,749 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 22:44:57,749 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 22:44:57,749 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 22:44:57,749 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 22:44:58,935 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 22:45:00,128 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 22:45:00,128 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 22:45:00,223 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 22:45:00,481 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 22:45:00,481 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 22:45:00,482 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 22:45:00,482 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 22:45:00,482 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 22:45:00,482 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 22:45:00,482 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 22:45:00,482 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 22:45:00,980 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 22:45:05,479 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 22:45:05,611 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 22:45:05,612 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 22:45:05,612 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 22:45:05,612 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 22:45:05,612 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 22:45:06,799 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 22:45:08,051 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 22:45:08,051 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 22:45:08,147 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 22:45:08,407 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 22:45:08,408 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 22:45:08,408 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-10 22:45:08,408 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-10 22:45:08,409 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令
2025-09-10 22:45:08,547 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ("8N10xiaol\r\n8N10xiaol\r\nUnknown command [setbridgeprio]\r\nUsage: mstpctl [options] [commands]\r\noptions:\r\n  -h | --help              Show this help text\r\n  -V | --version           Show version\r\n  -b | --batch <file>      Process file with mstpctl commands\r\n  -s | --stdin             Process mstpctl commands from stdin\r\n                           Make sure to provide newlines between\r\n                           commands. Won't work if `batch` is used\r\n  -i | --ignore            Ignore failing commands during batch\r\n                           processing\r\n  -f | --format <format>   Select output format (json, plain)\r\ncommands:\r\n-Add bridges to the mstpd's list:\r\n   addbridge        <bridge> [<bridge> ...]\r\n-Remove bridges from the mstpd's list:\r\n   delbridge        <bridge> [<bridge> ...]\r\n-Show bridge state for the CIST:\r\n   showbridge       [<bridge> ... [param]]\r\n-Show list of registered MSTIs:\r\n   showmstilist     <bridge>\r\n-Show MST ConfigId:\r\n   showmstconfid    <bridge>\r\n-Show VID-to-FID allocation table:\r\n   showvid2fid      <bridge>\r\n-Show FID-to-MSTID allocation table:\r\n   showfid2mstid    <bridge>\r\n-Show port state for the CIST:\r\n   showport         <bridge> [<port>...[port] [param]]\r\n-Show port state for the CIST:\r\n   showportparams   <bridge> <port> <param>...[param]\r\n-Show port detailed state for the CIST:\r\n   showportdetail   <bridge> [<port> ... [param]]\r\n-Show bridge state for the given MSTI:\r\n   showtree         <bridge> <mstid>\r\n-Show port detailed state for the given MSTI:\r\n   showtreeport     <bridge> <port> <mstid>\r\n-Set MST ConfigId elements: Revision Level (0-65535) and Name:\r\n   setmstconfid     <bridge> <revision> <name>\r\n-Set VIDs-to-FIDs allocation:\r\n   setvid2fid       <bridge> <FID>:<VIDs List> [<FID>:<VIDs List> ...]\r\n-Set FIDs-to-MSTIDs allocation:\r\n   setfid2mstid     <bridge> <mstid>:<FIDs List> [<mstid>:<FIDs List> ...]\r\n-Set bridge max age (6-40):\r\n   setmaxage        <bridge> <max_age>\r\n-Set bridge forward delay (4-30):\r\n   setfdelay        <bridge> <fwd_delay>\r\n-Set bridge max hops (6-40):\r\n   setmaxhops       <bridge> <max_hops>\r\n-Set bridge hello time (1-10):\r\n   sethello         <bridge> <hello_time>\r\n-Set bridge ageing time (10-1000000):\r\n   setageing        <bridge> <ageing_time>\r\n-Force Spanning Tree protocol version:\r\n   setforcevers     <bridge> {mstp|rstp|stp}\r\n-Set bridge transmit hold count (1-10):\r\n   settxholdcount   <bridge> <tx_hold_count>\r\n-Create new MSTI:\r\n   createtree       <bridge> <mstid>\r\n-Delete existing MSTI:\r\n   deletetree       <bridge> <mstid>\r\n-Set bridge priority (0-15) for the given MSTI:\r\n   settreeprio      <bridge> <mstid> <priority>\r\n-Set port external path cost for the CIST (0 = auto):\r\n   setportpathcost  <bridge> <port> <cost>\r\n-Set initial edge state:\r\n   setportadminedge <bridge> <port> {yes|no}\r\n-Enable auto transition to/from edge state:\r\n   setportautoedge  <bridge> <port> {yes|no}\r\n-Set p2p detection mode:\r\n   setportp2p       <bridge> <port> {yes|no|auto}\r\n-Restrict port ability to take Root role:\r\n   setportrestrrole <bridge> <port> {yes|no}\r\n-Restrict port ability to propagate received TCNs:\r\n   setportrestrtcn  <bridge> <port> {yes|no}\r\n-Try to get back from STP to rapid (RSTP/MSTP) mode:\r\n   portmcheck       <bridge> <port>\r\n-Set bpdu guard state:\r\n   setbpduguard     <bridge> <port> {yes|no}\r\n-Set port priority (0-15) for the given MSTI:\r\n   settreeportprio  <bridge> <port> <mstid> <priority>\r\n-Set port internal path cost for the given MSTI (0 = auto):\r\n   settreeportcost  <bridge> <port> <mstid> <cost>\r\n-Set port network state:\r\n   setportnetwork   <bridge> <port> {yes|no}\r\n-Set BPDU filter state:\r\n   setportbpdufilter <bridge> <port> {yes|no}\r\n-Level of verbosity:\r\n   debuglevel       <level>\r\n", '', 1)
2025-09-10 22:45:08,549 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 32768 (方法: ovs)
2025-09-10 22:45:08,550 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-10 22:45:08,669 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-10 22:45:14,227 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:45:14,379 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:45:14,380 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 22:45:14,380 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 22:45:14,380 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 22:45:14,380 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 22:45:14,840 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:45:14,841 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:45:14,842 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:45:14,842 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:45:14,842 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:45:14,843 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:45:15,137 - test_additional_rstp - INFO - 初始活动端口数量: 1
2025-09-10 22:45:15,139 - RSTPTest - INFO - 测试完成: test_disabled_port_exclusion_enhanced (耗时: 25.35秒)
2025-09-10 22:45:15,139 - RSTPTest - INFO - ============================================================

2025-09-10 22:45:15,139 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 22:45:15,139 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 22:45:15,140 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 22:45:15,274 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 22:45:15,274 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 22:45:15,406 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 22:45:15,406 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 22:45:15,540 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 22:45:15,540 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 22:45:15,541 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 22:45:15,541 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-10 22:45:15,541 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 22:45:15,542 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 22:45:15,598 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 22:45:15,598 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 22:45:15,771 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 22:45:15,772 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 22:45:15,772 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 22:45:15,772 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 22:45:15,772 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 22:45:15,828 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 22:45:15,829 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 22:45:15,996 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 22:45:15,997 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 22:45:15,997 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 22:45:15,997 - RSTPTest - INFO - ============================================================
2025-09-10 22:45:15,997 - RSTPTest - INFO - 开始测试: test_proposal_agreement_handshake
2025-09-10 22:45:15,997 - RSTPTest - INFO - ============================================================
2025-09-10 22:45:15,998 - test_advanced_rstp_mechanisms - INFO - 开始测试RSTP Proposal/Agreement握手机制
2025-09-10 22:45:15,999 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 22:45:15,999 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 22:45:15,999 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 22:45:15,999 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 22:45:15,999 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 22:45:15,999 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 22:45:15,999 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 22:45:16,000 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-10 22:45:16,000 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-10 22:45:16,477 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-10 22:45:16,477 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 22:45:16,477 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 22:45:16,633 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-10 22:45:17,700 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-10 22:45:17,701 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 22:45:17,701 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 22:45:17,701 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 22:45:17,701 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-10 22:45:18,177 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-10 22:45:18,652 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 22:45:18,653 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 22:45:18,844 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 22:45:18,845 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 22:45:18,845 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 22:45:18,845 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 22:45:18,845 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 22:45:18,846 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 22:45:18,846 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 22:45:18,846 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 22:45:19,349 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 22:45:23,855 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 22:45:23,983 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 22:45:23,984 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 22:45:23,984 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 22:45:23,984 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 22:45:23,984 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 22:45:25,178 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 22:45:26,368 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 22:45:26,369 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 22:45:26,464 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 22:45:26,724 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 22:45:26,725 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 22:45:26,725 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 22:45:26,725 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 22:45:26,725 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 22:45:26,726 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 22:45:26,726 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 22:45:26,726 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 22:45:27,223 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 22:45:31,718 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 22:45:31,850 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 22:45:31,850 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 22:45:31,851 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 22:45:31,851 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 22:45:31,851 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 22:45:33,061 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 22:45:34,301 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 22:45:34,301 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 22:45:34,396 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 22:45:34,659 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 22:45:34,660 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 22:45:34,660 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-10 22:45:39,661 - test_advanced_rstp_mechanisms - INFO - 开始在eth0上捕获BPDU
2025-09-10 22:45:39,661 - test_advanced_rstp_mechanisms - INFO - 触发拓扑变更...
2025-09-10 22:45:39,661 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 28672 (方法: mstpd)
2025-09-10 22:45:39,661 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令
2025-09-10 22:45:39,791 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ("8N10xiaol\r\n8N10xiaol\r\nUnknown command [setbridgeprio]\r\nUsage: mstpctl [options] [commands]\r\noptions:\r\n  -h | --help              Show this help text\r\n  -V | --version           Show version\r\n  -b | --batch <file>      Process file with mstpctl commands\r\n  -s | --stdin             Process mstpctl commands from stdin\r\n                           Make sure to provide newlines between\r\n                           commands. Won't work if `batch` is used\r\n  -i | --ignore            Ignore failing commands during batch\r\n                           processing\r\n  -f | --format <format>   Select output format (json, plain)\r\ncommands:\r\n-Add bridges to the mstpd's list:\r\n   addbridge        <bridge> [<bridge> ...]\r\n-Remove bridges from the mstpd's list:\r\n   delbridge        <bridge> [<bridge> ...]\r\n-Show bridge state for the CIST:\r\n   showbridge       [<bridge> ... [param]]\r\n-Show list of registered MSTIs:\r\n   showmstilist     <bridge>\r\n-Show MST ConfigId:\r\n   showmstconfid    <bridge>\r\n-Show VID-to-FID allocation table:\r\n   showvid2fid      <bridge>\r\n-Show FID-to-MSTID allocation table:\r\n   showfid2mstid    <bridge>\r\n-Show port state for the CIST:\r\n   showport         <bridge> [<port>...[port] [param]]\r\n-Show port state for the CIST:\r\n   showportparams   <bridge> <port> <param>...[param]\r\n-Show port detailed state for the CIST:\r\n   showportdetail   <bridge> [<port> ... [param]]\r\n-Show bridge state for the given MSTI:\r\n   showtree         <bridge> <mstid>\r\n-Show port detailed state for the given MSTI:\r\n   showtreeport     <bridge> <port> <mstid>\r\n-Set MST ConfigId elements: Revision Level (0-65535) and Name:\r\n   setmstconfid     <bridge> <revision> <name>\r\n-Set VIDs-to-FIDs allocation:\r\n   setvid2fid       <bridge> <FID>:<VIDs List> [<FID>:<VIDs List> ...]\r\n-Set FIDs-to-MSTIDs allocation:\r\n   setfid2mstid     <bridge> <mstid>:<FIDs List> [<mstid>:<FIDs List> ...]\r\n-Set bridge max age (6-40):\r\n   setmaxage        <bridge> <max_age>\r\n-Set bridge forward delay (4-30):\r\n   setfdelay        <bridge> <fwd_delay>\r\n-Set bridge max hops (6-40):\r\n   setmaxhops       <bridge> <max_hops>\r\n-Set bridge hello time (1-10):\r\n   sethello         <bridge> <hello_time>\r\n-Set bridge ageing time (10-1000000):\r\n   setageing        <bridge> <ageing_time>\r\n-Force Spanning Tree protocol version:\r\n   setforcevers     <bridge> {mstp|rstp|stp}\r\n-Set bridge transmit hold count (1-10):\r\n   settxholdcount   <bridge> <tx_hold_count>\r\n-Create new MSTI:\r\n   createtree       <bridge> <mstid>\r\n-Delete existing MSTI:\r\n   deletetree       <bridge> <mstid>\r\n-Set bridge priority (0-15) for the given MSTI:\r\n   settreeprio      <bridge> <mstid> <priority>\r\n-Set port external path cost for the CIST (0 = auto):\r\n   setportpathcost  <bridge> <port> <cost>\r\n-Set initial edge state:\r\n   setportadminedge <bridge> <port> {yes|no}\r\n-Enable auto transition to/from edge state:\r\n   setportautoedge  <bridge> <port> {yes|no}\r\n-Set p2p detection mode:\r\n   setportp2p       <bridge> <port> {yes|no|auto}\r\n-Restrict port ability to take Root role:\r\n   setportrestrrole <bridge> <port> {yes|no}\r\n-Restrict port ability to propagate received TCNs:\r\n   setportrestrtcn  <bridge> <port> {yes|no}\r\n-Try to get back from STP to rapid (RSTP/MSTP) mode:\r\n   portmcheck       <bridge> <port>\r\n-Set bpdu guard state:\r\n   setbpduguard     <bridge> <port> {yes|no}\r\n-Set port priority (0-15) for the given MSTI:\r\n   settreeportprio  <bridge> <port> <mstid> <priority>\r\n-Set port internal path cost for the given MSTI (0 = auto):\r\n   settreeportcost  <bridge> <port> <mstid> <cost>\r\n-Set port network state:\r\n   setportnetwork   <bridge> <port> {yes|no}\r\n-Set BPDU filter state:\r\n   setportbpdufilter <bridge> <port> {yes|no}\r\n-Level of verbosity:\r\n   debuglevel       <level>\r\n", '', 1)
2025-09-10 22:45:42,793 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 32768 (方法: mstpd)
2025-09-10 22:45:42,794 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令
2025-09-10 22:45:42,922 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ("8N10xiaol\r\n8N10xiaol\r\nUnknown command [setbridgeprio]\r\nUsage: mstpctl [options] [commands]\r\noptions:\r\n  -h | --help              Show this help text\r\n  -V | --version           Show version\r\n  -b | --batch <file>      Process file with mstpctl commands\r\n  -s | --stdin             Process mstpctl commands from stdin\r\n                           Make sure to provide newlines between\r\n                           commands. Won't work if `batch` is used\r\n  -i | --ignore            Ignore failing commands during batch\r\n                           processing\r\n  -f | --format <format>   Select output format (json, plain)\r\ncommands:\r\n-Add bridges to the mstpd's list:\r\n   addbridge        <bridge> [<bridge> ...]\r\n-Remove bridges from the mstpd's list:\r\n   delbridge        <bridge> [<bridge> ...]\r\n-Show bridge state for the CIST:\r\n   showbridge       [<bridge> ... [param]]\r\n-Show list of registered MSTIs:\r\n   showmstilist     <bridge>\r\n-Show MST ConfigId:\r\n   showmstconfid    <bridge>\r\n-Show VID-to-FID allocation table:\r\n   showvid2fid      <bridge>\r\n-Show FID-to-MSTID allocation table:\r\n   showfid2mstid    <bridge>\r\n-Show port state for the CIST:\r\n   showport         <bridge> [<port>...[port] [param]]\r\n-Show port state for the CIST:\r\n   showportparams   <bridge> <port> <param>...[param]\r\n-Show port detailed state for the CIST:\r\n   showportdetail   <bridge> [<port> ... [param]]\r\n-Show bridge state for the given MSTI:\r\n   showtree         <bridge> <mstid>\r\n-Show port detailed state for the given MSTI:\r\n   showtreeport     <bridge> <port> <mstid>\r\n-Set MST ConfigId elements: Revision Level (0-65535) and Name:\r\n   setmstconfid     <bridge> <revision> <name>\r\n-Set VIDs-to-FIDs allocation:\r\n   setvid2fid       <bridge> <FID>:<VIDs List> [<FID>:<VIDs List> ...]\r\n-Set FIDs-to-MSTIDs allocation:\r\n   setfid2mstid     <bridge> <mstid>:<FIDs List> [<mstid>:<FIDs List> ...]\r\n-Set bridge max age (6-40):\r\n   setmaxage        <bridge> <max_age>\r\n-Set bridge forward delay (4-30):\r\n   setfdelay        <bridge> <fwd_delay>\r\n-Set bridge max hops (6-40):\r\n   setmaxhops       <bridge> <max_hops>\r\n-Set bridge hello time (1-10):\r\n   sethello         <bridge> <hello_time>\r\n-Set bridge ageing time (10-1000000):\r\n   setageing        <bridge> <ageing_time>\r\n-Force Spanning Tree protocol version:\r\n   setforcevers     <bridge> {mstp|rstp|stp}\r\n-Set bridge transmit hold count (1-10):\r\n   settxholdcount   <bridge> <tx_hold_count>\r\n-Create new MSTI:\r\n   createtree       <bridge> <mstid>\r\n-Delete existing MSTI:\r\n   deletetree       <bridge> <mstid>\r\n-Set bridge priority (0-15) for the given MSTI:\r\n   settreeprio      <bridge> <mstid> <priority>\r\n-Set port external path cost for the CIST (0 = auto):\r\n   setportpathcost  <bridge> <port> <cost>\r\n-Set initial edge state:\r\n   setportadminedge <bridge> <port> {yes|no}\r\n-Enable auto transition to/from edge state:\r\n   setportautoedge  <bridge> <port> {yes|no}\r\n-Set p2p detection mode:\r\n   setportp2p       <bridge> <port> {yes|no|auto}\r\n-Restrict port ability to take Root role:\r\n   setportrestrrole <bridge> <port> {yes|no}\r\n-Restrict port ability to propagate received TCNs:\r\n   setportrestrtcn  <bridge> <port> {yes|no}\r\n-Try to get back from STP to rapid (RSTP/MSTP) mode:\r\n   portmcheck       <bridge> <port>\r\n-Set bpdu guard state:\r\n   setbpduguard     <bridge> <port> {yes|no}\r\n-Set port priority (0-15) for the given MSTI:\r\n   settreeportprio  <bridge> <port> <mstid> <priority>\r\n-Set port internal path cost for the given MSTI (0 = auto):\r\n   settreeportcost  <bridge> <port> <mstid> <cost>\r\n-Set port network state:\r\n   setportnetwork   <bridge> <port> {yes|no}\r\n-Set BPDU filter state:\r\n   setportbpdufilter <bridge> <port> {yes|no}\r\n-Level of verbosity:\r\n   debuglevel       <level>\r\n", '', 1)
2025-09-10 22:45:45,925 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: eth0, 数量: 20)
2025-09-10 22:45:46,017 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-10 22:45:46,017 - test_advanced_rstp_mechanisms - INFO - 捕获到0个BPDU数据包
2025-09-10 22:45:46,018 - test_advanced_rstp_mechanisms - WARNING - 未能捕获到完整的BPDU握手序列，可能是环境限制
2025-09-10 22:45:46,018 - test_advanced_rstp_mechanisms - INFO - 改为验证网络收敛状态...
2025-09-10 22:45:46,478 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:45:46,634 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:45:46,636 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 22:45:46,636 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 22:45:46,636 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 22:45:46,637 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 22:45:47,096 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:45:47,096 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:45:47,098 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:45:47,098 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:45:47,098 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:45:47,098 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:45:47,385 - test_advanced_rstp_mechanisms - INFO - ✓ 网络收敛正常，存在根端口
2025-09-10 22:45:49,386 - test_advanced_rstp_mechanisms - INFO - RSTP Proposal/Agreement握手机制测试通过
2025-09-10 22:45:49,387 - RSTPTest - INFO - 测试完成: test_proposal_agreement_handshake (耗时: 33.39秒)
2025-09-10 22:45:49,387 - RSTPTest - INFO - ============================================================

2025-09-10 22:45:49,389 - RSTPTest - INFO - ============================================================
2025-09-10 22:45:49,389 - RSTPTest - INFO - 开始测试: test_tcn_topology_change_notification
2025-09-10 22:45:49,389 - RSTPTest - INFO - ============================================================
2025-09-10 22:45:49,390 - test_advanced_rstp_mechanisms - INFO - 开始测试TCN拓扑变更通知机制
2025-09-10 22:45:49,390 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 22:45:49,390 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 22:45:49,390 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 22:45:49,390 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 22:45:49,390 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 22:45:49,390 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 22:45:49,391 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 22:45:49,391 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-10 22:45:49,391 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-10 22:45:49,876 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-10 22:45:49,876 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 22:45:49,876 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 22:45:50,031 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-10 22:45:51,107 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-10 22:45:51,108 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 22:45:51,108 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 22:45:51,108 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 22:45:51,108 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-10 22:45:51,584 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-10 22:45:52,056 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 22:45:52,056 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 22:45:52,248 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 22:45:52,248 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 22:45:52,249 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 22:45:52,249 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 22:45:52,249 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 22:45:52,249 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 22:45:52,250 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 22:45:52,250 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 22:45:52,752 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 22:45:57,267 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 22:45:57,389 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 22:45:57,389 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 22:45:57,389 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 22:45:57,389 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 22:45:57,389 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 22:45:58,570 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 22:45:59,747 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 22:45:59,748 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 22:45:59,842 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 22:46:00,110 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 22:46:00,110 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 22:46:00,110 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 22:46:00,110 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 22:46:00,111 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 22:46:00,111 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 22:46:00,111 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 22:46:00,111 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 22:46:00,596 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 22:46:05,074 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 22:46:05,203 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 22:46:05,204 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 22:46:05,204 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 22:46:05,204 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 22:46:05,204 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 22:46:06,367 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 22:46:07,600 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 22:46:07,600 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 22:46:07,698 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 22:46:07,959 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 22:46:07,959 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 22:46:07,959 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-10 22:46:18,378 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:46:18,530 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:46:18,531 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 22:46:18,531 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 22:46:18,531 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 22:46:18,531 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 22:46:18,991 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:46:18,991 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:46:18,992 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:46:18,993 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:46:18,993 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:46:18,993 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:46:19,280 - test_advanced_rstp_mechanisms - INFO - 初始网桥端口数量: 3
2025-09-10 22:46:19,281 - test_advanced_rstp_mechanisms - INFO - 触发拓扑变更：临时禁用/启用端口
2025-09-10 22:46:19,431 - test_advanced_rstp_mechanisms - INFO - 初始TC计数: 0
2025-09-10 22:46:27,711 - test_advanced_rstp_mechanisms - INFO - 变更后TC计数: 0
2025-09-10 22:46:27,711 - test_advanced_rstp_mechanisms - INFO - 拓扑变更可能未被检测到，这可能是正常的（取决于实现）
2025-09-10 22:46:28,184 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:46:28,337 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:46:28,338 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 22:46:28,339 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 22:46:28,339 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 22:46:28,339 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 22:46:28,799 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:46:28,799 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:46:28,800 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:46:28,800 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:46:28,800 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:46:28,801 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:46:29,088 - test_advanced_rstp_mechanisms - INFO - 最终网桥端口数量: 3
2025-09-10 22:46:29,243 - test_advanced_rstp_mechanisms - INFO - 当前MAC地址表老化时间: 300秒
2025-09-10 22:46:29,243 - test_advanced_rstp_mechanisms - WARNING - MAC地址表老化时间(300秒)未缩短，可能是实现差异
2025-09-10 22:46:29,243 - test_advanced_rstp_mechanisms - INFO - TCN拓扑变更通知机制测试通过 - 使用安全的端口状态变更方式
2025-09-10 22:46:29,244 - RSTPTest - INFO - 测试完成: test_tcn_topology_change_notification (耗时: 39.85秒)
2025-09-10 22:46:29,244 - RSTPTest - INFO - ============================================================

2025-09-10 22:46:29,245 - RSTPTest - INFO - ============================================================
2025-09-10 22:46:29,245 - RSTPTest - INFO - 开始测试: test_edge_port_behavior
2025-09-10 22:46:29,246 - RSTPTest - INFO - ============================================================
2025-09-10 22:46:29,246 - test_advanced_rstp_mechanisms - INFO - 开始测试边缘端口行为
2025-09-10 22:46:29,246 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 22:46:29,246 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 22:46:29,246 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 22:46:29,247 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 22:46:29,247 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 22:46:29,247 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 22:46:29,247 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 22:46:29,247 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-10 22:46:29,247 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-10 22:46:29,772 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-10 22:46:29,772 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 22:46:29,773 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 22:46:29,927 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-10 22:46:31,003 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-10 22:46:31,003 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 22:46:31,003 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 22:46:31,004 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 22:46:31,004 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-10 22:46:31,483 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-10 22:46:31,963 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 22:46:31,963 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 22:46:32,155 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 22:46:32,156 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 22:46:32,156 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 22:46:32,156 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 22:46:32,157 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 22:46:32,157 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 22:46:32,157 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 22:46:32,157 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 22:46:32,680 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 22:46:37,176 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 22:46:37,308 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 22:46:37,308 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 22:46:37,308 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 22:46:37,308 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 22:46:37,309 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 22:46:38,487 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 22:46:39,661 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 22:46:39,662 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 22:46:39,756 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 22:46:40,023 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 22:46:40,024 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 22:46:40,024 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 22:46:40,024 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 22:46:40,024 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 22:46:40,025 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 22:46:40,025 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 22:46:40,025 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 22:46:40,511 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 22:46:44,999 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 22:46:45,123 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 22:46:45,123 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 22:46:45,123 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 22:46:45,124 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 22:46:45,124 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 22:46:46,345 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 22:46:47,617 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 22:46:47,618 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 22:46:47,716 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 22:46:47,986 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 22:46:47,986 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 22:46:47,986 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-10 22:46:55,111 - test_advanced_rstp_mechanisms - INFO - 可用端口: ['enp1s0']
2025-09-10 22:46:55,111 - test_advanced_rstp_mechanisms - INFO - 选择端口enp1s0作为边缘端口测试
2025-09-10 22:46:55,219 - test_advanced_rstp_mechanisms - INFO - 测试边缘端口立即转发特性
2025-09-10 22:46:58,111 - test_advanced_rstp_mechanisms - INFO - 边缘端口状态转换时间: 2.74秒
2025-09-10 22:46:58,111 - test_advanced_rstp_mechanisms - INFO - ✓ 边缘端口转换时间合理
2025-09-10 22:46:58,214 - test_advanced_rstp_mechanisms - INFO - ✓ 边缘端口状态变化未产生TCN
2025-09-10 22:46:58,214 - test_advanced_rstp_mechanisms - INFO - 测试边缘端口收到BPDU后的行为
2025-09-10 22:46:58,363 - test_advanced_rstp_mechanisms - INFO - 边缘端口状态: 1
1
normal
2025-09-10 22:46:58,363 - test_advanced_rstp_mechanisms - INFO - 边缘端口行为测试通过
2025-09-10 22:46:58,364 - RSTPTest - INFO - 测试完成: test_edge_port_behavior (耗时: 29.12秒)
2025-09-10 22:46:58,364 - RSTPTest - INFO - ============================================================

2025-09-10 22:46:58,365 - RSTPTest - INFO - ============================================================
2025-09-10 22:46:58,365 - RSTPTest - INFO - 开始测试: test_shared_vs_point_to_point_links
2025-09-10 22:46:58,366 - RSTPTest - INFO - ============================================================
2025-09-10 22:46:58,366 - test_advanced_rstp_mechanisms - INFO - 开始测试不同链路类型的行为差异
2025-09-10 22:46:58,366 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 22:46:58,367 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 22:46:58,367 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 22:46:58,367 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 22:46:58,367 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 22:46:58,367 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 22:46:58,367 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 22:46:58,367 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-10 22:46:58,368 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-10 22:46:58,891 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-10 22:46:58,891 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 22:46:58,891 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 22:46:59,050 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-10 22:47:00,138 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-10 22:47:00,139 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 22:47:00,139 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 22:47:00,139 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 22:47:00,139 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-10 22:47:00,615 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-10 22:47:01,090 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 22:47:01,091 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 22:47:01,282 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 22:47:01,283 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 22:47:01,283 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 22:47:01,283 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 22:47:01,283 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 22:47:01,283 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 22:47:01,284 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 22:47:01,284 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 22:47:01,812 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 22:47:06,327 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 22:47:06,465 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 22:47:06,466 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 22:47:06,466 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 22:47:06,466 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 22:47:06,466 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 22:47:07,667 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 22:47:08,862 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 22:47:08,862 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 22:47:08,957 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 22:47:09,235 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 22:47:09,236 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 22:47:09,236 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 22:47:09,236 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 22:47:09,237 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 22:47:09,237 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 22:47:09,237 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 22:47:09,237 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 22:47:09,753 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 22:47:14,267 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 22:47:14,395 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 22:47:14,396 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 22:47:14,396 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 22:47:14,396 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 22:47:14,396 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 22:47:15,577 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 22:47:16,822 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 22:47:16,822 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 22:47:16,920 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 22:47:17,195 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 22:47:17,195 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 22:47:17,195 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-10 22:47:22,300 - test_advanced_rstp_mechanisms - INFO - 检测到的链路类型: {}
2025-09-10 22:47:22,300 - test_advanced_rstp_mechanisms - INFO - 测试点对点链路收敛性能
2025-09-10 22:47:26,887 - test_advanced_rstp_mechanisms - INFO - 收敛时间: 4.59秒
2025-09-10 22:47:26,887 - test_advanced_rstp_mechanisms - INFO - 验证链路类型识别
2025-09-10 22:47:26,887 - test_advanced_rstp_mechanisms - INFO - 不同链路类型行为差异测试通过
2025-09-10 22:47:26,888 - RSTPTest - INFO - 测试完成: test_shared_vs_point_to_point_links (耗时: 28.52秒)
2025-09-10 22:47:26,888 - RSTPTest - INFO - ============================================================

2025-09-10 22:47:26,888 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 22:47:26,889 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 22:47:26,889 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 22:47:27,028 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 22:47:27,028 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 22:47:27,150 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 22:47:27,151 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 22:47:27,282 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 22:47:27,282 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 22:47:27,283 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 22:47:27,283 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-10 22:47:27,283 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 22:47:27,283 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 22:47:27,338 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 22:47:27,338 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 22:47:27,497 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 22:47:27,498 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 22:47:27,498 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 22:47:27,498 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 22:47:27,499 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 22:47:27,553 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 22:47:27,554 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 22:47:27,723 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 22:47:27,724 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 22:47:27,724 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 22:47:27,724 - RSTPTest - INFO - ============================================================
2025-09-10 22:47:27,725 - RSTPTest - INFO - 开始测试: test_backup_port_concept_verification
2025-09-10 22:47:27,725 - RSTPTest - INFO - ============================================================
2025-09-10 22:47:27,725 - test_backup_port_simulation - INFO - 开始备份端口概念验证测试
2025-09-10 22:47:27,726 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 22:47:27,726 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 22:47:27,726 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 22:47:27,726 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 22:47:27,726 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 22:47:27,726 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 22:47:27,727 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 22:47:27,727 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-10 22:47:27,727 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-10 22:47:28,217 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-10 22:47:28,218 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 22:47:28,218 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 22:47:28,382 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-10 22:47:29,466 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-10 22:47:29,466 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 22:47:29,466 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 22:47:29,466 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 22:47:29,466 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-10 22:47:29,943 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-10 22:47:30,434 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 22:47:30,435 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 22:47:30,630 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 22:47:30,630 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 22:47:30,630 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 22:47:30,631 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 22:47:30,631 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 22:47:30,631 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 22:47:30,631 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 22:47:30,631 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 22:47:31,138 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 22:47:35,661 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 22:47:35,803 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 22:47:35,803 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 22:47:35,803 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 22:47:35,803 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 22:47:35,804 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 22:47:37,005 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 22:47:38,195 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 22:47:38,196 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 22:47:38,291 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 22:47:38,557 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 22:47:38,557 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 22:47:38,557 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 22:47:38,558 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 22:47:38,558 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 22:47:38,558 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 22:47:38,558 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 22:47:38,558 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 22:47:39,101 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 22:47:43,585 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 22:47:43,710 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 22:47:43,711 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 22:47:43,711 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 22:47:43,711 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 22:47:43,711 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 22:47:44,901 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 22:47:46,118 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 22:47:46,118 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 22:47:46,212 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 22:47:46,477 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 22:47:46,477 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 22:47:46,478 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-10 22:47:56,895 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:47:57,049 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:47:57,050 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 22:47:57,050 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 22:47:57,050 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 22:47:57,050 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 22:47:57,526 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:47:57,526 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:47:57,527 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:47:57,527 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:47:57,528 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:47:57,528 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:47:57,822 - test_backup_port_simulation - INFO - === 当前端口状态 ===
2025-09-10 22:47:57,822 - test_backup_port_simulation - INFO - 端口 br3: 角色=root, 状态=disabled
2025-09-10 22:47:57,823 - test_backup_port_simulation - INFO - 端口 br4: 角色=alternate, 状态=discarding
2025-09-10 22:47:57,823 - test_backup_port_simulation - INFO - 端口 SE_ETH2: 角色=unknown, 状态=disabled
2025-09-10 22:47:57,823 - test_backup_port_simulation - INFO - ⚠ 在当前点对点拓扑中未检测到备份端口（符合预期）
2025-09-10 22:47:57,823 - test_backup_port_simulation - INFO - 备份端口通常出现在共享介质网段中，当前测试环境为点对点链路
2025-09-10 22:47:57,824 - test_backup_port_simulation - INFO - 端口角色分布: {<PortRole.ALTERNATE: 'alternate'>: ['br4']}
2025-09-10 22:47:57,824 - test_backup_port_simulation - INFO - === RSTP端口角色覆盖分析 ===
2025-09-10 22:47:57,824 - test_backup_port_simulation - INFO - - root端口: 未检测到
2025-09-10 22:47:57,824 - test_backup_port_simulation - INFO - - designated端口: 未检测到
2025-09-10 22:47:57,824 - test_backup_port_simulation - INFO - ✓ alternate端口: ['br4']
2025-09-10 22:47:57,824 - test_backup_port_simulation - INFO - - backup端口: 未检测到（在点对点拓扑中为正常现象）
2025-09-10 22:47:57,825 - test_backup_port_simulation - INFO - 备份端口概念验证测试完成
2025-09-10 22:47:57,825 - RSTPTest - INFO - 测试完成: test_backup_port_concept_verification (耗时: 30.10秒)
2025-09-10 22:47:57,825 - RSTPTest - INFO - ============================================================

2025-09-10 22:47:57,827 - RSTPTest - INFO - ============================================================
2025-09-10 22:47:57,827 - RSTPTest - INFO - 开始测试: test_shared_medium_simulation_attempt
2025-09-10 22:47:57,827 - RSTPTest - INFO - ============================================================
2025-09-10 22:47:57,828 - test_backup_port_simulation - INFO - 开始共享介质模拟尝试
2025-09-10 22:47:57,828 - test_backup_port_simulation - INFO - === 尝试创建共享介质模拟场景 ===
2025-09-10 22:47:57,828 - test_backup_port_simulation - INFO - 创建中心交换机模拟共享介质...
2025-09-10 22:47:57,828 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 22:47:57,828 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 22:47:57,829 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 22:47:57,829 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 22:47:57,829 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 22:47:57,829 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 22:47:57,829 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 22:47:57,829 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-10 22:47:57,830 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-10 22:47:58,370 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-10 22:47:58,370 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 22:47:58,371 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 22:47:58,525 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-10 22:47:59,617 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-10 22:47:59,617 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 22:47:59,617 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 22:47:59,618 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 22:47:59,618 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-10 22:48:00,094 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-10 22:48:00,574 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 22:48:00,574 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 22:48:00,774 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 22:48:00,774 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 22:48:00,774 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 22:48:00,774 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 22:48:00,775 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 22:48:00,775 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 22:48:00,775 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 22:48:00,775 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 22:48:01,281 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 22:48:05,806 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 22:48:05,936 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 22:48:05,936 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 22:48:05,936 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 22:48:05,937 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 22:48:05,937 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 22:48:07,112 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 22:48:08,305 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 22:48:08,305 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 22:48:08,400 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 22:48:08,664 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 22:48:08,664 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 22:48:08,665 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 22:48:08,665 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 22:48:08,665 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 22:48:08,665 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 22:48:08,665 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 22:48:08,665 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 22:48:09,162 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 22:48:13,677 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 22:48:13,806 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 22:48:13,807 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 22:48:13,807 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 22:48:13,807 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 22:48:13,807 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 22:48:15,009 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 22:48:16,252 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 22:48:16,252 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 22:48:16,347 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 22:48:16,617 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 22:48:16,617 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 22:48:16,618 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-10 22:48:27,040 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:48:27,196 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:48:27,197 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 22:48:27,197 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 22:48:27,197 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 22:48:27,198 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 22:48:27,656 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:48:27,657 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:48:27,658 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:48:27,658 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:48:27,658 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:48:27,658 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:48:27,954 - test_backup_port_simulation - INFO - === 分析当前端口配置 ===
2025-09-10 22:48:27,954 - test_backup_port_simulation - INFO - 活动端口 br4: 角色=alternate, 状态=discarding
2025-09-10 22:48:27,954 - test_backup_port_simulation - INFO - ⚠ 未检测到备份端口
2025-09-10 22:48:27,954 - test_backup_port_simulation - INFO - 这在当前测试环境中是正常的，因为缺乏真正的共享介质
2025-09-10 22:48:27,954 - test_backup_port_simulation - INFO - 共享介质模拟尝试完成
2025-09-10 22:48:27,955 - RSTPTest - INFO - 测试完成: test_shared_medium_simulation_attempt (耗时: 30.13秒)
2025-09-10 22:48:27,955 - RSTPTest - INFO - ============================================================

2025-09-10 22:48:27,957 - RSTPTest - INFO - ============================================================
2025-09-10 22:48:27,957 - RSTPTest - INFO - 开始测试: test_backup_port_documentation_verification
2025-09-10 22:48:27,957 - RSTPTest - INFO - ============================================================
2025-09-10 22:48:27,958 - test_backup_port_simulation - INFO - 开始备份端口文档验证
2025-09-10 22:48:27,958 - test_backup_port_simulation - INFO - ✓ PortRole.BACKUP 存在
2025-09-10 22:48:27,958 - test_backup_port_simulation - INFO - === 备份端口理论特性验证 ===
2025-09-10 22:48:27,958 - test_backup_port_simulation - INFO - purpose: 为共享介质网段提供冗余
2025-09-10 22:48:27,958 - test_backup_port_simulation - INFO - difference_from_alternate: 备份端口是同一交换机上指定端口的备份，而备用端口是不同交换机提供的路径
2025-09-10 22:48:27,959 - test_backup_port_simulation - INFO - state: Discarding
2025-09-10 22:48:27,959 - test_backup_port_simulation - INFO - scenario: 出现在连接到集线器或共享介质的场景中
2025-09-10 22:48:27,959 - test_backup_port_simulation - INFO - fast_transition: 当对应的指定端口失效时，可以快速转换为指定端口
2025-09-10 22:48:27,959 - test_backup_port_simulation - INFO - === 端口角色对比 ===
2025-09-10 22:48:27,959 - test_backup_port_simulation - INFO - root: 连接到根桥的最佳路径
2025-09-10 22:48:27,959 - test_backup_port_simulation - INFO - designated: 为网段提供转发服务
2025-09-10 22:48:27,960 - test_backup_port_simulation - INFO - alternate: 提供到根桥的备用路径（来自其他交换机）
2025-09-10 22:48:27,960 - test_backup_port_simulation - INFO - backup: 同一交换机上指定端口的备份（共享介质场景）
2025-09-10 22:48:27,960 - test_backup_port_simulation - INFO - === 测试覆盖率分析 ===
2025-09-10 22:48:27,960 - test_backup_port_simulation - INFO - 已覆盖: Root Port, Designated Port, Alternate Port, Disabled Port
2025-09-10 22:48:27,960 - test_backup_port_simulation - INFO - 部分覆盖: Backup Port (概念验证)
2025-09-10 22:48:27,960 - test_backup_port_simulation - INFO - 覆盖限制: 测试框架无法创建真正的共享介质拓扑
2025-09-10 22:48:27,961 - test_backup_port_simulation - INFO - 建议: 在实际部署环境中使用集线器或配置交换机共享模式进行完整测试
2025-09-10 22:48:27,961 - test_backup_port_simulation - INFO - 备份端口文档验证完成
2025-09-10 22:48:27,961 - RSTPTest - INFO - 测试完成: test_backup_port_documentation_verification (耗时: 0.00秒)
2025-09-10 22:48:27,962 - RSTPTest - INFO - ============================================================

2025-09-10 22:48:27,962 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 22:48:27,962 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 22:48:27,963 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 22:48:28,099 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 22:48:28,099 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 22:48:28,221 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 22:48:28,222 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 22:48:28,357 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 22:48:28,358 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 22:48:28,358 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 22:48:28,358 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-10 22:48:28,358 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 22:48:28,359 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 22:48:28,414 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 22:48:28,415 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 22:48:28,580 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 22:48:28,580 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 22:48:28,580 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 22:48:28,580 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 22:48:28,581 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 22:48:28,634 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 22:48:28,634 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 22:48:28,807 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 22:48:28,808 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 22:48:28,808 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 22:48:28,808 - RSTPTest - INFO - ============================================================
2025-09-10 22:48:28,809 - RSTPTest - INFO - 开始测试: test_direct_link_failure
2025-09-10 22:48:28,809 - RSTPTest - INFO - ============================================================
2025-09-10 22:48:28,809 - test_convergence - INFO - 开始直接链路故障测试
2025-09-10 22:48:28,810 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 22:48:28,810 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 22:48:28,810 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 22:48:28,810 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 22:48:28,810 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 22:48:28,810 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 22:48:28,810 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 22:48:28,811 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-10 22:48:28,811 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-10 22:48:29,313 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-10 22:48:29,313 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 22:48:29,313 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 22:48:29,472 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-10 22:48:30,572 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-10 22:48:30,573 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 22:48:30,573 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 22:48:30,573 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 22:48:30,573 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-10 22:48:31,060 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-10 22:48:31,557 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 22:48:31,557 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 22:48:31,753 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 22:48:31,753 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 22:48:31,753 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 22:48:31,754 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 22:48:31,754 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 22:48:31,754 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 22:48:31,754 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 22:48:31,754 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 22:48:32,269 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 22:48:36,776 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 22:48:36,908 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 22:48:36,909 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 22:48:36,909 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 22:48:36,909 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 22:48:36,909 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 22:48:38,118 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 22:48:39,303 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 22:48:39,303 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 22:48:39,398 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 22:48:39,662 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 22:48:39,662 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 22:48:39,662 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 22:48:39,662 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 22:48:39,663 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 22:48:39,663 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 22:48:39,663 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 22:48:39,663 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 22:48:40,161 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 22:48:44,683 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 22:48:44,805 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 22:48:44,805 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 22:48:44,805 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 22:48:44,805 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 22:48:44,806 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 22:48:45,981 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 22:48:47,244 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 22:48:47,244 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 22:48:47,341 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 22:48:47,604 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 22:48:47,604 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 22:48:47,604 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-10 22:48:47,605 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 16384 (方法: mstpd)
2025-09-10 22:48:47,605 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令
2025-09-10 22:48:47,743 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ("8N10xiaol\r\n8N10xiaol\r\nUnknown command [setbridgeprio]\r\nUsage: mstpctl [options] [commands]\r\noptions:\r\n  -h | --help              Show this help text\r\n  -V | --version           Show version\r\n  -b | --batch <file>      Process file with mstpctl commands\r\n  -s | --stdin             Process mstpctl commands from stdin\r\n                           Make sure to provide newlines between\r\n                           commands. Won't work if `batch` is used\r\n  -i | --ignore            Ignore failing commands during batch\r\n                           processing\r\n  -f | --format <format>   Select output format (json, plain)\r\ncommands:\r\n-Add bridges to the mstpd's list:\r\n   addbridge        <bridge> [<bridge> ...]\r\n-Remove bridges from the mstpd's list:\r\n   delbridge        <bridge> [<bridge> ...]\r\n-Show bridge state for the CIST:\r\n   showbridge       [<bridge> ... [param]]\r\n-Show list of registered MSTIs:\r\n   showmstilist     <bridge>\r\n-Show MST ConfigId:\r\n   showmstconfid    <bridge>\r\n-Show VID-to-FID allocation table:\r\n   showvid2fid      <bridge>\r\n-Show FID-to-MSTID allocation table:\r\n   showfid2mstid    <bridge>\r\n-Show port state for the CIST:\r\n   showport         <bridge> [<port>...[port] [param]]\r\n-Show port state for the CIST:\r\n   showportparams   <bridge> <port> <param>...[param]\r\n-Show port detailed state for the CIST:\r\n   showportdetail   <bridge> [<port> ... [param]]\r\n-Show bridge state for the given MSTI:\r\n   showtree         <bridge> <mstid>\r\n-Show port detailed state for the given MSTI:\r\n   showtreeport     <bridge> <port> <mstid>\r\n-Set MST ConfigId elements: Revision Level (0-65535) and Name:\r\n   setmstconfid     <bridge> <revision> <name>\r\n-Set VIDs-to-FIDs allocation:\r\n   setvid2fid       <bridge> <FID>:<VIDs List> [<FID>:<VIDs List> ...]\r\n-Set FIDs-to-MSTIDs allocation:\r\n   setfid2mstid     <bridge> <mstid>:<FIDs List> [<mstid>:<FIDs List> ...]\r\n-Set bridge max age (6-40):\r\n   setmaxage        <bridge> <max_age>\r\n-Set bridge forward delay (4-30):\r\n   setfdelay        <bridge> <fwd_delay>\r\n-Set bridge max hops (6-40):\r\n   setmaxhops       <bridge> <max_hops>\r\n-Set bridge hello time (1-10):\r\n   sethello         <bridge> <hello_time>\r\n-Set bridge ageing time (10-1000000):\r\n   setageing        <bridge> <ageing_time>\r\n-Force Spanning Tree protocol version:\r\n   setforcevers     <bridge> {mstp|rstp|stp}\r\n-Set bridge transmit hold count (1-10):\r\n   settxholdcount   <bridge> <tx_hold_count>\r\n-Create new MSTI:\r\n   createtree       <bridge> <mstid>\r\n-Delete existing MSTI:\r\n   deletetree       <bridge> <mstid>\r\n-Set bridge priority (0-15) for the given MSTI:\r\n   settreeprio      <bridge> <mstid> <priority>\r\n-Set port external path cost for the CIST (0 = auto):\r\n   setportpathcost  <bridge> <port> <cost>\r\n-Set initial edge state:\r\n   setportadminedge <bridge> <port> {yes|no}\r\n-Enable auto transition to/from edge state:\r\n   setportautoedge  <bridge> <port> {yes|no}\r\n-Set p2p detection mode:\r\n   setportp2p       <bridge> <port> {yes|no|auto}\r\n-Restrict port ability to take Root role:\r\n   setportrestrrole <bridge> <port> {yes|no}\r\n-Restrict port ability to propagate received TCNs:\r\n   setportrestrtcn  <bridge> <port> {yes|no}\r\n-Try to get back from STP to rapid (RSTP/MSTP) mode:\r\n   portmcheck       <bridge> <port>\r\n-Set bpdu guard state:\r\n   setbpduguard     <bridge> <port> {yes|no}\r\n-Set port priority (0-15) for the given MSTI:\r\n   settreeportprio  <bridge> <port> <mstid> <priority>\r\n-Set port internal path cost for the given MSTI (0 = auto):\r\n   settreeportcost  <bridge> <port> <mstid> <cost>\r\n-Set port network state:\r\n   setportnetwork   <bridge> <port> {yes|no}\r\n-Set BPDU filter state:\r\n   setportbpdufilter <bridge> <port> {yes|no}\r\n-Level of verbosity:\r\n   debuglevel       <level>\r\n", '', 1)
2025-09-10 22:48:47,745 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 32768 (方法: ovs)
2025-09-10 22:48:47,745 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-10 22:48:47,869 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-10 22:48:48,009 - NetworkTopology_TestNode2 - INFO - TestNode2: 设置网桥优先级 br0 = 28672 (方法: mstpd)
2025-09-10 22:48:48,009 - NetworkTopology_TestNode2 - INFO - TestNode2: 执行mstpd设置优先级命令
2025-09-10 22:48:48,142 - NetworkTopology_TestNode2 - INFO - TestNode2: mstpd设置优先级结果: ("8N10xiaol\r\n8N10xiaol\r\nUnknown command [setbridgeprio]\r\nUsage: mstpctl [options] [commands]\r\noptions:\r\n  -h | --help              Show this help text\r\n  -V | --version           Show version\r\n  -b | --batch <file>      Process file with mstpctl commands\r\n  -s | --stdin             Process mstpctl commands from stdin\r\n                           Make sure to provide newlines between\r\n                           commands. Won't work if `batch` is used\r\n  -i | --ignore            Ignore failing commands during batch\r\n                           processing\r\n  -f | --format <format>   Select output format (json, plain)\r\ncommands:\r\n-Add bridges to the mstpd's list:\r\n   addbridge        <bridge> [<bridge> ...]\r\n-Remove bridges from the mstpd's list:\r\n   delbridge        <bridge> [<bridge> ...]\r\n-Show bridge state for the CIST:\r\n   showbridge       [<bridge> ... [param]]\r\n-Show list of registered MSTIs:\r\n   showmstilist     <bridge>\r\n-Show MST ConfigId:\r\n   showmstconfid    <bridge>\r\n-Show VID-to-FID allocation table:\r\n   showvid2fid      <bridge>\r\n-Show FID-to-MSTID allocation table:\r\n   showfid2mstid    <bridge>\r\n-Show port state for the CIST:\r\n   showport         <bridge> [<port>...[port] [param]]\r\n-Show port state for the CIST:\r\n   showportparams   <bridge> <port> <param>...[param]\r\n-Show port detailed state for the CIST:\r\n   showportdetail   <bridge> [<port> ... [param]]\r\n-Show bridge state for the given MSTI:\r\n   showtree         <bridge> <mstid>\r\n-Show port detailed state for the given MSTI:\r\n   showtreeport     <bridge> <port> <mstid>\r\n-Set MST ConfigId elements: Revision Level (0-65535) and Name:\r\n   setmstconfid     <bridge> <revision> <name>\r\n-Set VIDs-to-FIDs allocation:\r\n   setvid2fid       <bridge> <FID>:<VIDs List> [<FID>:<VIDs List> ...]\r\n-Set FIDs-to-MSTIDs allocation:\r\n   setfid2mstid     <bridge> <mstid>:<FIDs List> [<mstid>:<FIDs List> ...]\r\n-Set bridge max age (6-40):\r\n   setmaxage        <bridge> <max_age>\r\n-Set bridge forward delay (4-30):\r\n   setfdelay        <bridge> <fwd_delay>\r\n-Set bridge max hops (6-40):\r\n   setmaxhops       <bridge> <max_hops>\r\n-Set bridge hello time (1-10):\r\n   sethello         <bridge> <hello_time>\r\n-Set bridge ageing time (10-1000000):\r\n   setageing        <bridge> <ageing_time>\r\n-Force Spanning Tree protocol version:\r\n   setforcevers     <bridge> {mstp|rstp|stp}\r\n-Set bridge transmit hold count (1-10):\r\n   settxholdcount   <bridge> <tx_hold_count>\r\n-Create new MSTI:\r\n   createtree       <bridge> <mstid>\r\n-Delete existing MSTI:\r\n   deletetree       <bridge> <mstid>\r\n-Set bridge priority (0-15) for the given MSTI:\r\n   settreeprio      <bridge> <mstid> <priority>\r\n-Set port external path cost for the CIST (0 = auto):\r\n   setportpathcost  <bridge> <port> <cost>\r\n-Set initial edge state:\r\n   setportadminedge <bridge> <port> {yes|no}\r\n-Enable auto transition to/from edge state:\r\n   setportautoedge  <bridge> <port> {yes|no}\r\n-Set p2p detection mode:\r\n   setportp2p       <bridge> <port> {yes|no|auto}\r\n-Restrict port ability to take Root role:\r\n   setportrestrrole <bridge> <port> {yes|no}\r\n-Restrict port ability to propagate received TCNs:\r\n   setportrestrtcn  <bridge> <port> {yes|no}\r\n-Try to get back from STP to rapid (RSTP/MSTP) mode:\r\n   portmcheck       <bridge> <port>\r\n-Set bpdu guard state:\r\n   setbpduguard     <bridge> <port> {yes|no}\r\n-Set port priority (0-15) for the given MSTI:\r\n   settreeportprio  <bridge> <port> <mstid> <priority>\r\n-Set port internal path cost for the given MSTI (0 = auto):\r\n   settreeportcost  <bridge> <port> <mstid> <cost>\r\n-Set port network state:\r\n   setportnetwork   <bridge> <port> {yes|no}\r\n-Set BPDU filter state:\r\n   setportbpdufilter <bridge> <port> {yes|no}\r\n-Level of verbosity:\r\n   debuglevel       <level>\r\n", '', 1)
2025-09-10 22:48:48,144 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 22:48:48,554 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:48:48,715 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:48:48,716 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 22:48:48,716 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 22:48:48,716 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 22:48:48,717 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 22:48:49,185 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:48:49,185 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:48:49,186 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:48:49,187 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:48:49,187 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:48:49,187 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:48:50,156 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 2.01秒
2025-09-10 22:48:50,156 - test_convergence - INFO - 初始收敛时间: 2.01秒
2025-09-10 22:48:50,587 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:48:50,746 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:48:50,748 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 22:48:50,748 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 22:48:50,748 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 22:48:50,748 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 22:48:51,212 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:48:51,212 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:48:51,213 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:48:51,214 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:48:51,214 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:48:51,214 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:48:51,513 - test_convergence - INFO - DUT的Root Port: br3
2025-09-10 22:48:51,514 - FaultInjector_DUT - INFO - 断开链路: br3
2025-09-10 22:49:01,627 - FaultInjector_DUT - INFO - 链路已断开: br3
2025-09-10 22:49:01,627 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 22:49:02,078 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:49:02,230 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:49:02,231 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 22:49:02,232 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 22:49:02,232 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 22:49:02,232 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 22:49:02,693 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:49:02,693 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:49:02,694 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:49:02,694 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:49:02,695 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:49:02,695 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:49:03,680 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 2.05秒
2025-09-10 22:49:04,094 - RSTPTest - INFO - 测试完成: test_direct_link_failure (耗时: 35.28秒)
2025-09-10 22:49:04,094 - RSTPTest - INFO - ============================================================

2025-09-10 22:49:04,137 - RSTPTest - INFO - ============================================================
2025-09-10 22:49:04,137 - RSTPTest - INFO - 开始测试: test_multiple_link_failures
2025-09-10 22:49:04,137 - RSTPTest - INFO - ============================================================
2025-09-10 22:49:04,138 - test_convergence - INFO - 开始多重链路故障测试
2025-09-10 22:49:04,138 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 22:49:04,138 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 22:49:04,138 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 22:49:04,138 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 22:49:04,138 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 22:49:04,139 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 22:49:04,139 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 22:49:04,139 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-10 22:49:04,139 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-10 22:49:04,611 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-10 22:49:04,612 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 22:49:04,612 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 22:49:04,768 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-10 22:49:05,835 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-10 22:49:05,835 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 22:49:05,836 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 22:49:05,836 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 22:49:05,836 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-10 22:49:06,310 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-10 22:49:06,796 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 22:49:06,796 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 22:49:06,989 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 22:49:06,989 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 22:49:06,989 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 22:49:06,989 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 22:49:06,990 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 22:49:06,990 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 22:49:06,990 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 22:49:06,990 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 22:49:07,495 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 22:49:11,988 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 22:49:12,118 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 22:49:12,119 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 22:49:12,119 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 22:49:12,119 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 22:49:12,119 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 22:49:13,361 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 22:49:14,550 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 22:49:14,550 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 22:49:14,646 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 22:49:14,909 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 22:49:14,909 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 22:49:14,910 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 22:49:14,910 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 22:49:14,910 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 22:49:14,910 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 22:49:14,910 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 22:49:14,910 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 22:49:15,415 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 22:49:19,936 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 22:49:20,063 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 22:49:20,063 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 22:49:20,064 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 22:49:20,064 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 22:49:20,064 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 22:49:21,223 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 22:49:22,434 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 22:49:22,434 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 22:49:22,528 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 22:49:22,792 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 22:49:22,793 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 22:49:22,793 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-10 22:49:22,793 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 22:49:23,226 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:49:23,387 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:49:23,388 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 22:49:23,388 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 22:49:23,388 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 22:49:23,388 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 22:49:23,868 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:49:23,868 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:49:23,869 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:49:23,870 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:49:23,870 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:49:23,870 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:49:24,859 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 2.07秒
2025-09-10 22:49:24,859 - test_convergence - INFO - 注入故障: eth0
2025-09-10 22:49:24,859 - FaultInjector_DUT - INFO - 断开链路: eth0
2025-09-10 22:49:25,076 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth0 (code=1)，将在逻辑上标记为已断开
2025-09-10 22:49:25,076 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 22:49:25,554 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:49:25,710 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:49:25,711 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 22:49:25,711 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 22:49:25,712 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 22:49:25,712 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 22:49:26,192 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:49:26,192 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:49:26,193 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:49:26,194 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:49:26,194 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:49:26,194 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:49:27,286 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 2.21秒
2025-09-10 22:49:27,287 - test_convergence - INFO - eth0故障收敛时间: 2.21秒
2025-09-10 22:49:29,287 - test_convergence - INFO - 注入故障: eth2
2025-09-10 22:49:29,288 - FaultInjector_DUT - INFO - 断开链路: eth2
2025-09-10 22:49:29,507 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth2 (code=1)，将在逻辑上标记为已断开
2025-09-10 22:49:29,507 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 22:49:29,965 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:49:30,130 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:49:30,131 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 22:49:30,131 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 22:49:30,131 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 22:49:30,131 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 22:49:30,599 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:49:30,599 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:49:30,600 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:49:30,600 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:49:30,601 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:49:30,601 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:49:31,580 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 2.07秒
2025-09-10 22:49:31,580 - test_convergence - INFO - eth2故障收敛时间: 2.07秒
2025-09-10 22:49:33,581 - FaultInjector_DUT - INFO - 恢复链路: eth0
2025-09-10 22:49:33,799 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth0 (code=1)，将在逻辑上标记为已恢复
2025-09-10 22:49:33,799 - FaultInjector_DUT - INFO - 恢复链路: eth2
2025-09-10 22:49:34,059 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth2 (code=1)，将在逻辑上标记为已恢复
2025-09-10 22:49:34,059 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 22:49:34,534 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:49:34,690 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:49:34,692 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 22:49:34,692 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 22:49:34,692 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 22:49:34,692 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 22:49:35,164 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:49:35,164 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:49:35,165 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:49:35,165 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:49:35,166 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:49:35,166 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:49:36,156 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 2.10秒
2025-09-10 22:49:36,157 - test_convergence - INFO - 最终恢复收敛时间: 2.10秒
2025-09-10 22:49:36,157 - test_convergence - INFO - 多重链路故障测试通过
2025-09-10 22:49:36,158 - RSTPTest - INFO - 测试完成: test_multiple_link_failures (耗时: 32.02秒)
2025-09-10 22:49:36,158 - RSTPTest - INFO - ============================================================

2025-09-10 22:49:36,160 - RSTPTest - INFO - ============================================================
2025-09-10 22:49:36,160 - RSTPTest - INFO - 开始测试: test_convergence_with_traffic
2025-09-10 22:49:36,160 - RSTPTest - INFO - ============================================================
2025-09-10 22:49:36,160 - test_convergence - INFO - 开始带流量的收敛测试
2025-09-10 22:49:36,161 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 22:49:36,161 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 22:49:36,161 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 22:49:36,161 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 22:49:36,161 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 22:49:36,162 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 22:49:36,162 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 22:49:36,162 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-10 22:49:36,162 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-10 22:49:36,666 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-10 22:49:36,666 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 22:49:36,666 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 22:49:36,827 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-10 22:49:37,956 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-10 22:49:37,956 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 22:49:37,956 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 22:49:37,956 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 22:49:37,956 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-10 22:49:38,460 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-10 22:49:38,952 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 22:49:38,952 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 22:49:39,144 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 22:49:39,144 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 22:49:39,144 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 22:49:39,145 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 22:49:39,145 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 22:49:39,145 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 22:49:39,145 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 22:49:39,145 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 22:49:39,641 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 22:49:44,186 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 22:49:44,322 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 22:49:44,322 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 22:49:44,322 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 22:49:44,323 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 22:49:44,323 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 22:49:45,526 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 22:49:46,728 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 22:49:46,729 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 22:49:46,829 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 22:49:47,107 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 22:49:47,107 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 22:49:47,107 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 22:49:47,108 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 22:49:47,108 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 22:49:47,108 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 22:49:47,108 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 22:49:47,108 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 22:49:47,611 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 22:49:52,079 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 22:49:52,206 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 22:49:52,207 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 22:49:52,207 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 22:49:52,207 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 22:49:52,207 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 22:49:53,405 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 22:49:54,631 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 22:49:54,632 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 22:49:54,727 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 22:49:54,990 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 22:49:54,991 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 22:49:54,991 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-10 22:50:01,242 - TrafficGenerator - INFO - 启动iperf3服务器: 192.168.184.131:5201
2025-09-10 22:50:03,416 - TrafficGenerator - ERROR - iperf3服务器启动失败
2025-09-10 22:50:06,243 - TrafficGenerator - INFO - 启动iperf3客户端: -> 192.168.184.131:5201
2025-09-10 22:50:06,243 - TrafficGenerator - INFO - iperf3客户端已启动 (udp, 100M)
2025-09-10 22:50:11,244 - FaultInjector_DUT - INFO - 断开链路: eth0
2025-09-10 22:50:11,471 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth0 (code=1)，将在逻辑上标记为已断开
2025-09-10 22:50:21,471 - test_convergence - INFO - 丢包数: 0
2025-09-10 22:50:21,472 - test_convergence - INFO - 估计中断时间: 0.000秒
2025-09-10 22:50:21,472 - TrafficGenerator - INFO - 停止流量生成
2025-09-10 22:50:23,626 - test_convergence - INFO - 带流量的收敛测试通过
2025-09-10 22:50:23,627 - RSTPTest - INFO - 测试完成: test_convergence_with_traffic (耗时: 47.47秒)
2025-09-10 22:50:23,628 - RSTPTest - INFO - ============================================================

2025-09-10 22:50:23,628 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 22:50:23,628 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 22:50:23,629 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 22:50:23,765 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 22:50:23,765 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 22:50:23,884 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 22:50:23,884 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 22:50:24,016 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 22:50:24,016 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 22:50:24,017 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 22:50:24,017 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-10 22:50:24,017 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 22:50:24,017 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 22:50:24,075 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 22:50:24,076 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 22:50:24,244 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 22:50:24,245 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 22:50:24,245 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 22:50:24,245 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 22:50:24,245 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 22:50:24,300 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 22:50:24,301 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 22:50:24,474 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 22:50:24,475 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 22:50:24,475 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 22:50:24,475 - RSTPTest - INFO - ============================================================
2025-09-10 22:50:24,475 - RSTPTest - INFO - 开始测试: test_backup_port_simulation
2025-09-10 22:50:24,476 - RSTPTest - INFO - ============================================================
2025-09-10 22:50:24,477 - test_enhanced_rstp_coverage - INFO - 开始备份端口模拟测试
2025-09-10 22:50:24,477 - test_enhanced_rstp_coverage - INFO - 创建模拟共享网段拓扑
2025-09-10 22:50:25,348 - test_enhanced_rstp_coverage - INFO - ✓ 创建连接: SE_ETH2:dut_port1 <-> shared_segment:shared_port1
2025-09-10 22:50:25,996 - test_enhanced_rstp_coverage - INFO - ✓ 创建连接: SE_ETH2:dut_port2 <-> shared_segment:shared_port2
2025-09-10 22:50:27,275 - test_enhanced_rstp_coverage - INFO - ✓ 创建远程交换机: remote_switch
2025-09-10 22:50:27,276 - test_enhanced_rstp_coverage - INFO - 等待RSTP收敛...
2025-09-10 22:50:42,693 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:50:42,845 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   e6:73:6f:c9:db:4e
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       dut_port1
  root-path-cost  2000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  dut_port2  Alternate  Discarding 2000     128.4
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2
  dut_port1  Root       Forwarding 2000     128.3


2025-09-10 22:50:42,846 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-10 22:50:42,847 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: e6:73:6f:c9:db:4e
2025-09-10 22:50:42,847 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/e6:73:6f:c9:db:4e
2025-09-10 22:50:42,847 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 22:50:43,307 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:50:43,308 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 3(dut_port1): addr:7e:a0:93:6b:f7:82
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 4(dut_port2): addr:e2:48:b5:df:0f:04
     config:     0
     state:      0
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:50:43,309 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:50:43,310 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:50:43,310 - RSTPAnalyzer_DUT - INFO - 找到端口: dut_port1 (从行:  3(dut_port1): addr:7e:a0:93:6b:f7:82)
2025-09-10 22:50:43,310 - RSTPAnalyzer_DUT - INFO - 找到端口: dut_port2 (从行:  4(dut_port2): addr:e2:48:b5:df:0f:04)
2025-09-10 22:50:43,310 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:50:43,311 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'dut_port1', 'dut_port2', 'SE_ETH2']
2025-09-10 22:50:43,788 - test_enhanced_rstp_coverage - INFO - DUT桥信息: BridgeInfo(bridge_id='1000/e6:73:6f:c9:db:4e', root_id='unknown', root_port='br3', root_path_cost=0, protocol_version='rstp', hello_time=2, forward_delay=15, max_age=20, topology_changes=0, ports={'br3': PortInfo(name='br3', role=<PortRole.ROOT: 'root'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'br4': PortInfo(name='br4', role=<PortRole.ALTERNATE: 'alternate'>, state=<PortState.DISCARDING: 'discarding'>, path_cost=0, designated_bridge='', designated_port=''), 'dut_port1': PortInfo(name='dut_port1', role=<PortRole.DESIGNATED: 'designated'>, state=<PortState.FORWARDING: 'forwarding'>, path_cost=0, designated_bridge='', designated_port=''), 'dut_port2': PortInfo(name='dut_port2', role=<PortRole.DESIGNATED: 'designated'>, state=<PortState.FORWARDING: 'forwarding'>, path_cost=0, designated_bridge='', designated_port=''), 'SE_ETH2': PortInfo(name='SE_ETH2', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')})
2025-09-10 22:50:43,788 - test_enhanced_rstp_coverage - INFO - 找到 2 个连接到共享网段的端口
2025-09-10 22:50:43,788 - test_enhanced_rstp_coverage - INFO - Designated端口: ['dut_port1', 'dut_port2']
2025-09-10 22:50:43,789 - test_enhanced_rstp_coverage - INFO - Backup端口: []
2025-09-10 22:50:43,789 - test_enhanced_rstp_coverage - WARNING - 未检测到Backup Port或阻塞端口，可能是OVS实现限制
2025-09-10 22:50:43,789 - test_enhanced_rstp_coverage - INFO - 测试备份端口故障切换
2025-09-10 22:50:43,789 - test_enhanced_rstp_coverage - INFO - 清理测试环境
2025-09-10 22:50:44,771 - test_enhanced_rstp_coverage - INFO - ✓ 备份端口模拟测试完成
2025-09-10 22:50:44,772 - RSTPTest - INFO - 测试完成: test_backup_port_simulation (耗时: 20.30秒)
2025-09-10 22:50:44,772 - RSTPTest - INFO - ============================================================

2025-09-10 22:50:44,773 - RSTPTest - INFO - ============================================================
2025-09-10 22:50:44,774 - RSTPTest - INFO - 开始测试: test_comprehensive_port_state_transitions
2025-09-10 22:50:44,774 - RSTPTest - INFO - ============================================================
2025-09-10 22:50:44,774 - test_enhanced_rstp_coverage - INFO - 开始全面端口状态转换测试
2025-09-10 22:50:44,775 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 22:50:44,775 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 22:50:44,775 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 22:50:44,775 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 22:50:44,775 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 22:50:44,775 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 22:50:44,776 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 22:50:44,776 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-10 22:50:44,776 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-10 22:50:45,303 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-10 22:50:45,303 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 22:50:45,303 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 22:50:45,458 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-10 22:50:46,550 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-10 22:50:46,551 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 22:50:46,551 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 22:50:46,551 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 22:50:46,551 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-10 22:50:47,027 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-10 22:50:47,509 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 22:50:47,509 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 22:50:47,699 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 22:50:47,700 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 22:50:47,700 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 22:50:47,700 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 22:50:47,700 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 22:50:47,700 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 22:50:47,700 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 22:50:47,701 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 22:50:48,197 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 22:50:52,680 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 22:50:52,801 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 22:50:52,801 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 22:50:52,801 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 22:50:52,801 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 22:50:52,802 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 22:50:53,993 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 22:50:55,180 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 22:50:55,181 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 22:50:55,276 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 22:50:55,534 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 22:50:55,535 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 22:50:55,535 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 22:50:55,535 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 22:50:55,535 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 22:50:55,536 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 22:50:55,536 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 22:50:55,536 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 22:50:56,047 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 22:51:00,534 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 22:51:00,671 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 22:51:00,671 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 22:51:00,671 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 22:51:00,671 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 22:51:00,672 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 22:51:01,860 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 22:51:03,135 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 22:51:03,135 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 22:51:03,231 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 22:51:03,493 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 22:51:03,494 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 22:51:03,494 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-10 22:51:03,494 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 4096 (方法: mstpd)
2025-09-10 22:51:03,494 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令
2025-09-10 22:51:03,635 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ("8N10xiaol\r\n8N10xiaol\r\nUnknown command [setbridgeprio]\r\nUsage: mstpctl [options] [commands]\r\noptions:\r\n  -h | --help              Show this help text\r\n  -V | --version           Show version\r\n  -b | --batch <file>      Process file with mstpctl commands\r\n  -s | --stdin             Process mstpctl commands from stdin\r\n                           Make sure to provide newlines between\r\n                           commands. Won't work if `batch` is used\r\n  -i | --ignore            Ignore failing commands during batch\r\n                           processing\r\n  -f | --format <format>   Select output format (json, plain)\r\ncommands:\r\n-Add bridges to the mstpd's list:\r\n   addbridge        <bridge> [<bridge> ...]\r\n-Remove bridges from the mstpd's list:\r\n   delbridge        <bridge> [<bridge> ...]\r\n-Show bridge state for the CIST:\r\n   showbridge       [<bridge> ... [param]]\r\n-Show list of registered MSTIs:\r\n   showmstilist     <bridge>\r\n-Show MST ConfigId:\r\n   showmstconfid    <bridge>\r\n-Show VID-to-FID allocation table:\r\n   showvid2fid      <bridge>\r\n-Show FID-to-MSTID allocation table:\r\n   showfid2mstid    <bridge>\r\n-Show port state for the CIST:\r\n   showport         <bridge> [<port>...[port] [param]]\r\n-Show port state for the CIST:\r\n   showportparams   <bridge> <port> <param>...[param]\r\n-Show port detailed state for the CIST:\r\n   showportdetail   <bridge> [<port> ... [param]]\r\n-Show bridge state for the given MSTI:\r\n   showtree         <bridge> <mstid>\r\n-Show port detailed state for the given MSTI:\r\n   showtreeport     <bridge> <port> <mstid>\r\n-Set MST ConfigId elements: Revision Level (0-65535) and Name:\r\n   setmstconfid     <bridge> <revision> <name>\r\n-Set VIDs-to-FIDs allocation:\r\n   setvid2fid       <bridge> <FID>:<VIDs List> [<FID>:<VIDs List> ...]\r\n-Set FIDs-to-MSTIDs allocation:\r\n   setfid2mstid     <bridge> <mstid>:<FIDs List> [<mstid>:<FIDs List> ...]\r\n-Set bridge max age (6-40):\r\n   setmaxage        <bridge> <max_age>\r\n-Set bridge forward delay (4-30):\r\n   setfdelay        <bridge> <fwd_delay>\r\n-Set bridge max hops (6-40):\r\n   setmaxhops       <bridge> <max_hops>\r\n-Set bridge hello time (1-10):\r\n   sethello         <bridge> <hello_time>\r\n-Set bridge ageing time (10-1000000):\r\n   setageing        <bridge> <ageing_time>\r\n-Force Spanning Tree protocol version:\r\n   setforcevers     <bridge> {mstp|rstp|stp}\r\n-Set bridge transmit hold count (1-10):\r\n   settxholdcount   <bridge> <tx_hold_count>\r\n-Create new MSTI:\r\n   createtree       <bridge> <mstid>\r\n-Delete existing MSTI:\r\n   deletetree       <bridge> <mstid>\r\n-Set bridge priority (0-15) for the given MSTI:\r\n   settreeprio      <bridge> <mstid> <priority>\r\n-Set port external path cost for the CIST (0 = auto):\r\n   setportpathcost  <bridge> <port> <cost>\r\n-Set initial edge state:\r\n   setportadminedge <bridge> <port> {yes|no}\r\n-Enable auto transition to/from edge state:\r\n   setportautoedge  <bridge> <port> {yes|no}\r\n-Set p2p detection mode:\r\n   setportp2p       <bridge> <port> {yes|no|auto}\r\n-Restrict port ability to take Root role:\r\n   setportrestrrole <bridge> <port> {yes|no}\r\n-Restrict port ability to propagate received TCNs:\r\n   setportrestrtcn  <bridge> <port> {yes|no}\r\n-Try to get back from STP to rapid (RSTP/MSTP) mode:\r\n   portmcheck       <bridge> <port>\r\n-Set bpdu guard state:\r\n   setbpduguard     <bridge> <port> {yes|no}\r\n-Set port priority (0-15) for the given MSTI:\r\n   settreeportprio  <bridge> <port> <mstid> <priority>\r\n-Set port internal path cost for the given MSTI (0 = auto):\r\n   settreeportcost  <bridge> <port> <mstid> <cost>\r\n-Set port network state:\r\n   setportnetwork   <bridge> <port> {yes|no}\r\n-Set BPDU filter state:\r\n   setportbpdufilter <bridge> <port> {yes|no}\r\n-Level of verbosity:\r\n   debuglevel       <level>\r\n", '', 1)
2025-09-10 22:51:03,637 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 8192 (方法: ovs)
2025-09-10 22:51:03,637 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-10 22:51:03,751 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-10 22:51:03,921 - test_enhanced_rstp_coverage - INFO - 等待初始收敛...
2025-09-10 22:51:03,922 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 22:51:04,365 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:51:04,517 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:51:04,518 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 22:51:04,518 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 22:51:04,518 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 22:51:04,518 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 22:51:04,979 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:51:04,979 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:51:04,980 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:51:04,981 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:51:04,981 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:51:04,981 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:51:05,267 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.35秒
2025-09-10 22:51:05,725 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:51:05,877 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:51:05,878 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 22:51:05,878 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 22:51:05,878 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 22:51:05,879 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 22:51:06,334 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:51:06,335 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:51:06,336 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:51:06,336 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:51:06,336 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:51:06,336 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:51:06,623 - test_enhanced_rstp_coverage - INFO - === 测试场景1: 端口重启状态转换 ===
2025-09-10 22:51:06,623 - test_enhanced_rstp_coverage - INFO - 使用端口br4进行重启测试
2025-09-10 22:51:07,085 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:51:07,237 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:51:07,238 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 22:51:07,238 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 22:51:07,238 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 22:51:07,239 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 22:51:07,707 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:51:07,708 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:51:07,709 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:51:07,709 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:51:07,709 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:51:07,709 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:51:22,032 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:51:22,184 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Disabled   Discarding 2000     128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:51:22,185 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 22:51:22,185 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 22:51:22,186 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 22:51:22,186 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 22:51:22,642 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:51:22,643 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:51:22,644 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:51:22,644 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:51:22,644 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:51:22,644 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:51:22,935 - test_enhanced_rstp_coverage - INFO - 端口br4状态转换: disabled
2025-09-10 22:51:25,349 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:51:25,504 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Discarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:51:25,505 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 22:51:25,505 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 22:51:25,505 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 22:51:25,506 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 22:51:25,967 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:51:25,967 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:51:25,968 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:51:25,968 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:51:25,968 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:51:25,969 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:51:26,250 - test_enhanced_rstp_coverage - INFO - 端口br4状态转换: forwarding
2025-09-10 22:51:28,668 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:51:28,820 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:51:28,821 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 22:51:28,821 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 22:51:28,822 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 22:51:28,822 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 22:51:29,278 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:51:29,278 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:51:29,279 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:51:29,280 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:51:29,280 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:51:29,280 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:51:31,985 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:51:32,193 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:51:32,194 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 22:51:32,194 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 22:51:32,194 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 22:51:32,194 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 22:51:32,654 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:51:32,654 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:51:32,656 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:51:32,656 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:51:32,656 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:51:32,656 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:51:35,348 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:51:35,500 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:51:35,501 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 22:51:35,501 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 22:51:35,502 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 22:51:35,502 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 22:51:35,960 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:51:35,960 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:51:35,961 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:51:35,961 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:51:35,962 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:51:35,962 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:51:38,243 - test_enhanced_rstp_coverage - INFO - 端口重启状态转换: ['forwarding', 'disabled', 'forwarding']
2025-09-10 22:51:38,244 - test_enhanced_rstp_coverage - INFO - 重启场景状态转换验证
2025-09-10 22:51:38,244 - test_enhanced_rstp_coverage - INFO - ✓ 重启: 状态转换序列正常
2025-09-10 22:51:38,244 - test_enhanced_rstp_coverage - INFO - === 测试场景2: 强制Learning状态 ===
2025-09-10 22:51:38,297 - test_enhanced_rstp_coverage - INFO - 原始Forward Delay: 4
2025-09-10 22:51:38,860 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:51:39,012 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:51:39,013 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 22:51:39,013 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 22:51:39,014 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 22:51:39,014 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 22:51:39,482 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:51:39,482 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:51:39,483 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:51:39,483 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:51:39,483 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:51:39,483 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:51:53,772 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:51:53,924 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Disabled   Discarding 2000     128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:51:53,925 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 22:51:53,925 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 22:51:53,925 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 22:51:53,925 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 22:51:54,382 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:51:54,382 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:51:54,383 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:51:54,383 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:51:54,383 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:51:54,383 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:51:54,678 - test_enhanced_rstp_coverage - INFO - 端口br4状态转换: disabled
2025-09-10 22:51:57,091 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:51:57,244 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Discarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:51:57,245 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 22:51:57,245 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 22:51:57,245 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 22:51:57,246 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 22:51:57,706 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:51:57,706 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:51:57,707 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:51:57,707 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:51:57,708 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:51:57,708 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:51:57,994 - test_enhanced_rstp_coverage - INFO - 端口br4状态转换: forwarding
2025-09-10 22:52:00,409 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:52:00,564 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:52:00,565 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 22:52:00,565 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 22:52:00,565 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 22:52:00,565 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 22:52:01,025 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:52:01,026 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:52:01,027 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:52:01,027 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:52:01,027 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:52:01,027 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:52:03,748 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:52:03,903 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:52:03,904 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 22:52:03,904 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 22:52:03,904 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 22:52:03,904 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 22:52:04,370 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:52:04,370 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:52:04,371 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:52:04,371 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:52:04,371 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:52:04,372 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:52:06,658 - test_enhanced_rstp_coverage - INFO - Learning状态转换: ['forwarding', 'disabled', 'forwarding']
2025-09-10 22:52:06,659 - test_enhanced_rstp_coverage - WARNING - 未观察到Learning状态，可能是快速转换
2025-09-10 22:52:06,729 - test_enhanced_rstp_coverage - INFO - === 测试场景3: 拓扑变更状态转换 ===
2025-09-10 22:52:07,172 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:52:07,324 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:52:07,325 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 22:52:07,326 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 22:52:07,326 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 22:52:07,326 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 22:52:07,786 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:52:07,786 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:52:07,787 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:52:07,787 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:52:07,788 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:52:07,788 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:52:08,074 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-10 22:52:08,074 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令
2025-09-10 22:52:08,218 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ("8N10xiaol\r\n8N10xiaol\r\nUnknown command [setbridgeprio]\r\nUsage: mstpctl [options] [commands]\r\noptions:\r\n  -h | --help              Show this help text\r\n  -V | --version           Show version\r\n  -b | --batch <file>      Process file with mstpctl commands\r\n  -s | --stdin             Process mstpctl commands from stdin\r\n                           Make sure to provide newlines between\r\n                           commands. Won't work if `batch` is used\r\n  -i | --ignore            Ignore failing commands during batch\r\n                           processing\r\n  -f | --format <format>   Select output format (json, plain)\r\ncommands:\r\n-Add bridges to the mstpd's list:\r\n   addbridge        <bridge> [<bridge> ...]\r\n-Remove bridges from the mstpd's list:\r\n   delbridge        <bridge> [<bridge> ...]\r\n-Show bridge state for the CIST:\r\n   showbridge       [<bridge> ... [param]]\r\n-Show list of registered MSTIs:\r\n   showmstilist     <bridge>\r\n-Show MST ConfigId:\r\n   showmstconfid    <bridge>\r\n-Show VID-to-FID allocation table:\r\n   showvid2fid      <bridge>\r\n-Show FID-to-MSTID allocation table:\r\n   showfid2mstid    <bridge>\r\n-Show port state for the CIST:\r\n   showport         <bridge> [<port>...[port] [param]]\r\n-Show port state for the CIST:\r\n   showportparams   <bridge> <port> <param>...[param]\r\n-Show port detailed state for the CIST:\r\n   showportdetail   <bridge> [<port> ... [param]]\r\n-Show bridge state for the given MSTI:\r\n   showtree         <bridge> <mstid>\r\n-Show port detailed state for the given MSTI:\r\n   showtreeport     <bridge> <port> <mstid>\r\n-Set MST ConfigId elements: Revision Level (0-65535) and Name:\r\n   setmstconfid     <bridge> <revision> <name>\r\n-Set VIDs-to-FIDs allocation:\r\n   setvid2fid       <bridge> <FID>:<VIDs List> [<FID>:<VIDs List> ...]\r\n-Set FIDs-to-MSTIDs allocation:\r\n   setfid2mstid     <bridge> <mstid>:<FIDs List> [<mstid>:<FIDs List> ...]\r\n-Set bridge max age (6-40):\r\n   setmaxage        <bridge> <max_age>\r\n-Set bridge forward delay (4-30):\r\n   setfdelay        <bridge> <fwd_delay>\r\n-Set bridge max hops (6-40):\r\n   setmaxhops       <bridge> <max_hops>\r\n-Set bridge hello time (1-10):\r\n   sethello         <bridge> <hello_time>\r\n-Set bridge ageing time (10-1000000):\r\n   setageing        <bridge> <ageing_time>\r\n-Force Spanning Tree protocol version:\r\n   setforcevers     <bridge> {mstp|rstp|stp}\r\n-Set bridge transmit hold count (1-10):\r\n   settxholdcount   <bridge> <tx_hold_count>\r\n-Create new MSTI:\r\n   createtree       <bridge> <mstid>\r\n-Delete existing MSTI:\r\n   deletetree       <bridge> <mstid>\r\n-Set bridge priority (0-15) for the given MSTI:\r\n   settreeprio      <bridge> <mstid> <priority>\r\n-Set port external path cost for the CIST (0 = auto):\r\n   setportpathcost  <bridge> <port> <cost>\r\n-Set initial edge state:\r\n   setportadminedge <bridge> <port> {yes|no}\r\n-Enable auto transition to/from edge state:\r\n   setportautoedge  <bridge> <port> {yes|no}\r\n-Set p2p detection mode:\r\n   setportp2p       <bridge> <port> {yes|no|auto}\r\n-Restrict port ability to take Root role:\r\n   setportrestrrole <bridge> <port> {yes|no}\r\n-Restrict port ability to propagate received TCNs:\r\n   setportrestrtcn  <bridge> <port> {yes|no}\r\n-Try to get back from STP to rapid (RSTP/MSTP) mode:\r\n   portmcheck       <bridge> <port>\r\n-Set bpdu guard state:\r\n   setbpduguard     <bridge> <port> {yes|no}\r\n-Set port priority (0-15) for the given MSTI:\r\n   settreeportprio  <bridge> <port> <mstid> <priority>\r\n-Set port internal path cost for the given MSTI (0 = auto):\r\n   settreeportcost  <bridge> <port> <mstid> <cost>\r\n-Set port network state:\r\n   setportnetwork   <bridge> <port> {yes|no}\r\n-Set BPDU filter state:\r\n   setportbpdufilter <bridge> <port> {yes|no}\r\n-Level of verbosity:\r\n   debuglevel       <level>\r\n", '', 1)
2025-09-10 22:52:08,636 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:52:08,784 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:52:08,785 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 22:52:08,785 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 22:52:08,785 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 22:52:08,785 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 22:52:09,245 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:52:09,245 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:52:09,246 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:52:09,247 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:52:09,247 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:52:09,247 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:52:11,964 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:52:12,116 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:52:12,117 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 22:52:12,117 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 22:52:12,117 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 22:52:12,117 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 22:52:12,589 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:52:12,590 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:52:12,591 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:52:12,591 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:52:12,591 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:52:12,591 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:52:15,291 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:52:15,443 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:52:15,445 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 22:52:15,445 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 22:52:15,445 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 22:52:15,445 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 22:52:15,901 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:52:15,902 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:52:15,903 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:52:15,903 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:52:15,903 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:52:15,903 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:52:18,607 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:52:18,760 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:52:18,761 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 22:52:18,761 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 22:52:18,761 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 22:52:18,761 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 22:52:19,221 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:52:19,221 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:52:19,222 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:52:19,223 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:52:19,223 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:52:19,223 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:52:21,935 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:52:22,088 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:52:22,089 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 22:52:22,089 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 22:52:22,089 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 22:52:22,089 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 22:52:22,557 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:52:22,558 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:52:22,559 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:52:22,559 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:52:22,559 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:52:22,559 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:52:25,259 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:52:25,411 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:52:25,412 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 22:52:25,412 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 22:52:25,412 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 22:52:25,413 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 22:52:25,873 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:52:25,873 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:52:25,874 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:52:25,874 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:52:25,875 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:52:25,875 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:52:28,162 - test_enhanced_rstp_coverage - INFO - 拓扑变更状态转换: ['forwarding']
2025-09-10 22:52:28,576 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:52:28,727 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:52:28,728 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 22:52:28,729 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 22:52:28,729 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 22:52:28,729 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 22:52:29,185 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:52:29,185 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:52:29,187 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:52:29,187 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:52:29,187 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:52:29,187 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:52:29,474 - test_enhanced_rstp_coverage - INFO - ✓ 拓扑变更后端口br4最终状态: forwarding
2025-09-10 22:52:29,474 - test_enhanced_rstp_coverage - INFO - ✓ 全面端口状态转换测试完成
2025-09-10 22:52:29,475 - RSTPTest - INFO - 测试完成: test_comprehensive_port_state_transitions (耗时: 104.70秒)
2025-09-10 22:52:29,476 - RSTPTest - INFO - ============================================================

2025-09-10 22:52:29,478 - RSTPTest - INFO - ============================================================
2025-09-10 22:52:29,478 - RSTPTest - INFO - 开始测试: test_detailed_bpdu_analysis
2025-09-10 22:52:29,478 - RSTPTest - INFO - ============================================================
2025-09-10 22:52:29,479 - test_enhanced_rstp_coverage - INFO - 开始详细BPDU分析测试
2025-09-10 22:52:29,479 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 22:52:29,479 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 22:52:29,480 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 22:52:29,480 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 22:52:29,480 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 22:52:29,480 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 22:52:29,480 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 22:52:29,480 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-10 22:52:29,481 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-10 22:52:30,001 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-10 22:52:30,001 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 22:52:30,002 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 22:52:30,157 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-10 22:52:31,248 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-10 22:52:31,249 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 22:52:31,249 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 22:52:31,250 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 22:52:31,250 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-10 22:52:31,732 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-10 22:52:32,209 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 22:52:32,210 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 22:52:32,397 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 22:52:32,397 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 22:52:32,397 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 22:52:32,398 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 22:52:32,398 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 22:52:32,398 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 22:52:32,398 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 22:52:32,398 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 22:52:32,907 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 22:52:37,400 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 22:52:37,535 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 22:52:37,535 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 22:52:37,535 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 22:52:37,536 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 22:52:37,536 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 22:52:38,723 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 22:52:39,927 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 22:52:39,927 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 22:52:40,022 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 22:52:40,288 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 22:52:40,288 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 22:52:40,289 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 22:52:40,289 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 22:52:40,289 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 22:52:40,289 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 22:52:40,289 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 22:52:40,289 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 22:52:40,776 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 22:52:45,280 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 22:52:45,405 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 22:52:45,406 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 22:52:45,406 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 22:52:45,406 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 22:52:45,406 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 22:52:46,600 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 22:52:47,876 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 22:52:47,877 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 22:52:47,977 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 22:52:48,240 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 22:52:48,241 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 22:52:48,241 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-10 22:52:48,241 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 4096 (方法: mstpd)
2025-09-10 22:52:48,241 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令
2025-09-10 22:52:48,378 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ("8N10xiaol\r\n8N10xiaol\r\nUnknown command [setbridgeprio]\r\nUsage: mstpctl [options] [commands]\r\noptions:\r\n  -h | --help              Show this help text\r\n  -V | --version           Show version\r\n  -b | --batch <file>      Process file with mstpctl commands\r\n  -s | --stdin             Process mstpctl commands from stdin\r\n                           Make sure to provide newlines between\r\n                           commands. Won't work if `batch` is used\r\n  -i | --ignore            Ignore failing commands during batch\r\n                           processing\r\n  -f | --format <format>   Select output format (json, plain)\r\ncommands:\r\n-Add bridges to the mstpd's list:\r\n   addbridge        <bridge> [<bridge> ...]\r\n-Remove bridges from the mstpd's list:\r\n   delbridge        <bridge> [<bridge> ...]\r\n-Show bridge state for the CIST:\r\n   showbridge       [<bridge> ... [param]]\r\n-Show list of registered MSTIs:\r\n   showmstilist     <bridge>\r\n-Show MST ConfigId:\r\n   showmstconfid    <bridge>\r\n-Show VID-to-FID allocation table:\r\n   showvid2fid      <bridge>\r\n-Show FID-to-MSTID allocation table:\r\n   showfid2mstid    <bridge>\r\n-Show port state for the CIST:\r\n   showport         <bridge> [<port>...[port] [param]]\r\n-Show port state for the CIST:\r\n   showportparams   <bridge> <port> <param>...[param]\r\n-Show port detailed state for the CIST:\r\n   showportdetail   <bridge> [<port> ... [param]]\r\n-Show bridge state for the given MSTI:\r\n   showtree         <bridge> <mstid>\r\n-Show port detailed state for the given MSTI:\r\n   showtreeport     <bridge> <port> <mstid>\r\n-Set MST ConfigId elements: Revision Level (0-65535) and Name:\r\n   setmstconfid     <bridge> <revision> <name>\r\n-Set VIDs-to-FIDs allocation:\r\n   setvid2fid       <bridge> <FID>:<VIDs List> [<FID>:<VIDs List> ...]\r\n-Set FIDs-to-MSTIDs allocation:\r\n   setfid2mstid     <bridge> <mstid>:<FIDs List> [<mstid>:<FIDs List> ...]\r\n-Set bridge max age (6-40):\r\n   setmaxage        <bridge> <max_age>\r\n-Set bridge forward delay (4-30):\r\n   setfdelay        <bridge> <fwd_delay>\r\n-Set bridge max hops (6-40):\r\n   setmaxhops       <bridge> <max_hops>\r\n-Set bridge hello time (1-10):\r\n   sethello         <bridge> <hello_time>\r\n-Set bridge ageing time (10-1000000):\r\n   setageing        <bridge> <ageing_time>\r\n-Force Spanning Tree protocol version:\r\n   setforcevers     <bridge> {mstp|rstp|stp}\r\n-Set bridge transmit hold count (1-10):\r\n   settxholdcount   <bridge> <tx_hold_count>\r\n-Create new MSTI:\r\n   createtree       <bridge> <mstid>\r\n-Delete existing MSTI:\r\n   deletetree       <bridge> <mstid>\r\n-Set bridge priority (0-15) for the given MSTI:\r\n   settreeprio      <bridge> <mstid> <priority>\r\n-Set port external path cost for the CIST (0 = auto):\r\n   setportpathcost  <bridge> <port> <cost>\r\n-Set initial edge state:\r\n   setportadminedge <bridge> <port> {yes|no}\r\n-Enable auto transition to/from edge state:\r\n   setportautoedge  <bridge> <port> {yes|no}\r\n-Set p2p detection mode:\r\n   setportp2p       <bridge> <port> {yes|no|auto}\r\n-Restrict port ability to take Root role:\r\n   setportrestrrole <bridge> <port> {yes|no}\r\n-Restrict port ability to propagate received TCNs:\r\n   setportrestrtcn  <bridge> <port> {yes|no}\r\n-Try to get back from STP to rapid (RSTP/MSTP) mode:\r\n   portmcheck       <bridge> <port>\r\n-Set bpdu guard state:\r\n   setbpduguard     <bridge> <port> {yes|no}\r\n-Set port priority (0-15) for the given MSTI:\r\n   settreeportprio  <bridge> <port> <mstid> <priority>\r\n-Set port internal path cost for the given MSTI (0 = auto):\r\n   settreeportcost  <bridge> <port> <mstid> <cost>\r\n-Set port network state:\r\n   setportnetwork   <bridge> <port> {yes|no}\r\n-Set BPDU filter state:\r\n   setportbpdufilter <bridge> <port> {yes|no}\r\n-Level of verbosity:\r\n   debuglevel       <level>\r\n", '', 1)
2025-09-10 22:52:48,380 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 8192 (方法: ovs)
2025-09-10 22:52:48,380 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-10 22:52:48,493 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-10 22:52:48,663 - NetworkTopology_TestNode2 - INFO - TestNode2: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-10 22:52:48,664 - NetworkTopology_TestNode2 - INFO - TestNode2: 执行mstpd设置优先级命令
2025-09-10 22:52:48,796 - NetworkTopology_TestNode2 - INFO - TestNode2: mstpd设置优先级结果: ("8N10xiaol\r\n8N10xiaol\r\nUnknown command [setbridgeprio]\r\nUsage: mstpctl [options] [commands]\r\noptions:\r\n  -h | --help              Show this help text\r\n  -V | --version           Show version\r\n  -b | --batch <file>      Process file with mstpctl commands\r\n  -s | --stdin             Process mstpctl commands from stdin\r\n                           Make sure to provide newlines between\r\n                           commands. Won't work if `batch` is used\r\n  -i | --ignore            Ignore failing commands during batch\r\n                           processing\r\n  -f | --format <format>   Select output format (json, plain)\r\ncommands:\r\n-Add bridges to the mstpd's list:\r\n   addbridge        <bridge> [<bridge> ...]\r\n-Remove bridges from the mstpd's list:\r\n   delbridge        <bridge> [<bridge> ...]\r\n-Show bridge state for the CIST:\r\n   showbridge       [<bridge> ... [param]]\r\n-Show list of registered MSTIs:\r\n   showmstilist     <bridge>\r\n-Show MST ConfigId:\r\n   showmstconfid    <bridge>\r\n-Show VID-to-FID allocation table:\r\n   showvid2fid      <bridge>\r\n-Show FID-to-MSTID allocation table:\r\n   showfid2mstid    <bridge>\r\n-Show port state for the CIST:\r\n   showport         <bridge> [<port>...[port] [param]]\r\n-Show port state for the CIST:\r\n   showportparams   <bridge> <port> <param>...[param]\r\n-Show port detailed state for the CIST:\r\n   showportdetail   <bridge> [<port> ... [param]]\r\n-Show bridge state for the given MSTI:\r\n   showtree         <bridge> <mstid>\r\n-Show port detailed state for the given MSTI:\r\n   showtreeport     <bridge> <port> <mstid>\r\n-Set MST ConfigId elements: Revision Level (0-65535) and Name:\r\n   setmstconfid     <bridge> <revision> <name>\r\n-Set VIDs-to-FIDs allocation:\r\n   setvid2fid       <bridge> <FID>:<VIDs List> [<FID>:<VIDs List> ...]\r\n-Set FIDs-to-MSTIDs allocation:\r\n   setfid2mstid     <bridge> <mstid>:<FIDs List> [<mstid>:<FIDs List> ...]\r\n-Set bridge max age (6-40):\r\n   setmaxage        <bridge> <max_age>\r\n-Set bridge forward delay (4-30):\r\n   setfdelay        <bridge> <fwd_delay>\r\n-Set bridge max hops (6-40):\r\n   setmaxhops       <bridge> <max_hops>\r\n-Set bridge hello time (1-10):\r\n   sethello         <bridge> <hello_time>\r\n-Set bridge ageing time (10-1000000):\r\n   setageing        <bridge> <ageing_time>\r\n-Force Spanning Tree protocol version:\r\n   setforcevers     <bridge> {mstp|rstp|stp}\r\n-Set bridge transmit hold count (1-10):\r\n   settxholdcount   <bridge> <tx_hold_count>\r\n-Create new MSTI:\r\n   createtree       <bridge> <mstid>\r\n-Delete existing MSTI:\r\n   deletetree       <bridge> <mstid>\r\n-Set bridge priority (0-15) for the given MSTI:\r\n   settreeprio      <bridge> <mstid> <priority>\r\n-Set port external path cost for the CIST (0 = auto):\r\n   setportpathcost  <bridge> <port> <cost>\r\n-Set initial edge state:\r\n   setportadminedge <bridge> <port> {yes|no}\r\n-Enable auto transition to/from edge state:\r\n   setportautoedge  <bridge> <port> {yes|no}\r\n-Set p2p detection mode:\r\n   setportp2p       <bridge> <port> {yes|no|auto}\r\n-Restrict port ability to take Root role:\r\n   setportrestrrole <bridge> <port> {yes|no}\r\n-Restrict port ability to propagate received TCNs:\r\n   setportrestrtcn  <bridge> <port> {yes|no}\r\n-Try to get back from STP to rapid (RSTP/MSTP) mode:\r\n   portmcheck       <bridge> <port>\r\n-Set bpdu guard state:\r\n   setbpduguard     <bridge> <port> {yes|no}\r\n-Set port priority (0-15) for the given MSTI:\r\n   settreeportprio  <bridge> <port> <mstid> <priority>\r\n-Set port internal path cost for the given MSTI (0 = auto):\r\n   settreeportcost  <bridge> <port> <mstid> <cost>\r\n-Set port network state:\r\n   setportnetwork   <bridge> <port> {yes|no}\r\n-Set BPDU filter state:\r\n   setportbpdufilter <bridge> <port> {yes|no}\r\n-Level of verbosity:\r\n   debuglevel       <level>\r\n", '', 1)
2025-09-10 22:52:48,798 - test_enhanced_rstp_coverage - INFO - 等待RSTP收敛...
2025-09-10 22:52:48,798 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 22:52:49,203 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:52:49,355 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:52:49,357 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 22:52:49,357 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 22:52:49,357 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 22:52:49,358 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 22:52:49,816 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:52:49,817 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:52:49,818 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:52:49,818 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:52:49,818 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:52:49,818 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:52:50,106 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.31秒
2025-09-10 22:52:50,555 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:52:50,707 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:52:50,708 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 22:52:50,708 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 22:52:50,708 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 22:52:50,709 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 22:52:51,172 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:52:51,172 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:52:51,173 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:52:51,174 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:52:51,174 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:52:51,174 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:52:51,465 - test_enhanced_rstp_coverage - INFO - Hello Time: 2秒
2025-09-10 22:52:51,466 - test_enhanced_rstp_coverage - INFO - === 测试1: 验证分布式BPDU生成 ===
2025-09-10 22:52:51,466 - test_enhanced_rstp_coverage - INFO - 在端口br4上捕获BPDU
2025-09-10 22:52:51,466 - test_enhanced_rstp_coverage - WARNING - 端口br4BPDU捕获失败: RSTPAnalyzer.capture_bpdu() got an unexpected keyword argument 'duration'
2025-09-10 22:52:51,467 - test_enhanced_rstp_coverage - INFO - 总共捕获0个BPDU，来自0个不同源
2025-09-10 22:52:51,485 - RSTPTest - INFO - 测试完成: test_detailed_bpdu_analysis (耗时: 22.01秒)
2025-09-10 22:52:51,485 - RSTPTest - INFO - ============================================================

2025-09-10 22:52:51,487 - RSTPTest - INFO - ============================================================
2025-09-10 22:52:51,487 - RSTPTest - INFO - 开始测试: test_topology_change_comprehensive
2025-09-10 22:52:51,488 - RSTPTest - INFO - ============================================================
2025-09-10 22:52:51,488 - test_enhanced_rstp_coverage - INFO - 开始全面拓扑变更测试
2025-09-10 22:52:51,489 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 22:52:51,489 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 22:52:51,489 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 22:52:51,489 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 22:52:51,489 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 22:52:51,489 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 22:52:51,490 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 22:52:51,490 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-10 22:52:51,490 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-10 22:52:52,003 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-10 22:52:52,003 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 22:52:52,003 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 22:52:52,161 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-10 22:52:53,249 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-10 22:52:53,250 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 22:52:53,250 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 22:52:53,250 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 22:52:53,250 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-10 22:52:53,725 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-10 22:52:54,201 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 22:52:54,201 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 22:52:54,392 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 22:52:54,393 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 22:52:54,393 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 22:52:54,393 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 22:52:54,393 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 22:52:54,393 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 22:52:54,394 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 22:52:54,394 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 22:52:54,901 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 22:52:59,385 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 22:52:59,508 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 22:52:59,508 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 22:52:59,508 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 22:52:59,508 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 22:52:59,509 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 22:53:00,691 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 22:53:01,884 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 22:53:01,885 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 22:53:01,983 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 22:53:02,254 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 22:53:02,254 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 22:53:02,254 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 22:53:02,254 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 22:53:02,255 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 22:53:02,255 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 22:53:02,255 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 22:53:02,255 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 22:53:02,758 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 22:53:07,354 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 22:53:07,487 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 22:53:07,487 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 22:53:07,487 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 22:53:07,487 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 22:53:07,487 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 22:53:08,670 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 22:53:09,895 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 22:53:09,896 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 22:53:09,992 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 22:53:10,258 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 22:53:10,259 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 22:53:10,259 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-10 22:53:10,259 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 4096 (方法: mstpd)
2025-09-10 22:53:10,259 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令
2025-09-10 22:53:10,386 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ("8N10xiaol\r\n8N10xiaol\r\nUnknown command [setbridgeprio]\r\nUsage: mstpctl [options] [commands]\r\noptions:\r\n  -h | --help              Show this help text\r\n  -V | --version           Show version\r\n  -b | --batch <file>      Process file with mstpctl commands\r\n  -s | --stdin             Process mstpctl commands from stdin\r\n                           Make sure to provide newlines between\r\n                           commands. Won't work if `batch` is used\r\n  -i | --ignore            Ignore failing commands during batch\r\n                           processing\r\n  -f | --format <format>   Select output format (json, plain)\r\ncommands:\r\n-Add bridges to the mstpd's list:\r\n   addbridge        <bridge> [<bridge> ...]\r\n-Remove bridges from the mstpd's list:\r\n   delbridge        <bridge> [<bridge> ...]\r\n-Show bridge state for the CIST:\r\n   showbridge       [<bridge> ... [param]]\r\n-Show list of registered MSTIs:\r\n   showmstilist     <bridge>\r\n-Show MST ConfigId:\r\n   showmstconfid    <bridge>\r\n-Show VID-to-FID allocation table:\r\n   showvid2fid      <bridge>\r\n-Show FID-to-MSTID allocation table:\r\n   showfid2mstid    <bridge>\r\n-Show port state for the CIST:\r\n   showport         <bridge> [<port>...[port] [param]]\r\n-Show port state for the CIST:\r\n   showportparams   <bridge> <port> <param>...[param]\r\n-Show port detailed state for the CIST:\r\n   showportdetail   <bridge> [<port> ... [param]]\r\n-Show bridge state for the given MSTI:\r\n   showtree         <bridge> <mstid>\r\n-Show port detailed state for the given MSTI:\r\n   showtreeport     <bridge> <port> <mstid>\r\n-Set MST ConfigId elements: Revision Level (0-65535) and Name:\r\n   setmstconfid     <bridge> <revision> <name>\r\n-Set VIDs-to-FIDs allocation:\r\n   setvid2fid       <bridge> <FID>:<VIDs List> [<FID>:<VIDs List> ...]\r\n-Set FIDs-to-MSTIDs allocation:\r\n   setfid2mstid     <bridge> <mstid>:<FIDs List> [<mstid>:<FIDs List> ...]\r\n-Set bridge max age (6-40):\r\n   setmaxage        <bridge> <max_age>\r\n-Set bridge forward delay (4-30):\r\n   setfdelay        <bridge> <fwd_delay>\r\n-Set bridge max hops (6-40):\r\n   setmaxhops       <bridge> <max_hops>\r\n-Set bridge hello time (1-10):\r\n   sethello         <bridge> <hello_time>\r\n-Set bridge ageing time (10-1000000):\r\n   setageing        <bridge> <ageing_time>\r\n-Force Spanning Tree protocol version:\r\n   setforcevers     <bridge> {mstp|rstp|stp}\r\n-Set bridge transmit hold count (1-10):\r\n   settxholdcount   <bridge> <tx_hold_count>\r\n-Create new MSTI:\r\n   createtree       <bridge> <mstid>\r\n-Delete existing MSTI:\r\n   deletetree       <bridge> <mstid>\r\n-Set bridge priority (0-15) for the given MSTI:\r\n   settreeprio      <bridge> <mstid> <priority>\r\n-Set port external path cost for the CIST (0 = auto):\r\n   setportpathcost  <bridge> <port> <cost>\r\n-Set initial edge state:\r\n   setportadminedge <bridge> <port> {yes|no}\r\n-Enable auto transition to/from edge state:\r\n   setportautoedge  <bridge> <port> {yes|no}\r\n-Set p2p detection mode:\r\n   setportp2p       <bridge> <port> {yes|no|auto}\r\n-Restrict port ability to take Root role:\r\n   setportrestrrole <bridge> <port> {yes|no}\r\n-Restrict port ability to propagate received TCNs:\r\n   setportrestrtcn  <bridge> <port> {yes|no}\r\n-Try to get back from STP to rapid (RSTP/MSTP) mode:\r\n   portmcheck       <bridge> <port>\r\n-Set bpdu guard state:\r\n   setbpduguard     <bridge> <port> {yes|no}\r\n-Set port priority (0-15) for the given MSTI:\r\n   settreeportprio  <bridge> <port> <mstid> <priority>\r\n-Set port internal path cost for the given MSTI (0 = auto):\r\n   settreeportcost  <bridge> <port> <mstid> <cost>\r\n-Set port network state:\r\n   setportnetwork   <bridge> <port> {yes|no}\r\n-Set BPDU filter state:\r\n   setportbpdufilter <bridge> <port> {yes|no}\r\n-Level of verbosity:\r\n   debuglevel       <level>\r\n", '', 1)
2025-09-10 22:53:10,387 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 8192 (方法: ovs)
2025-09-10 22:53:10,388 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-10 22:53:10,496 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-10 22:53:10,667 - test_enhanced_rstp_coverage - INFO - 等待初始收敛...
2025-09-10 22:53:10,667 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 22:53:11,103 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:53:11,254 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:53:11,255 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 22:53:11,255 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 22:53:11,256 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 22:53:11,256 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 22:53:11,717 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:53:11,717 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:53:11,718 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:53:11,718 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:53:11,719 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:53:11,719 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:53:12,005 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.34秒
2025-09-10 22:53:12,467 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:53:12,615 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:53:12,616 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 22:53:12,616 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 22:53:12,616 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 22:53:12,616 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 22:53:13,076 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:53:13,076 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:53:13,077 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:53:13,077 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:53:13,077 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:53:13,077 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:53:13,850 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:53:14,003 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:53:14,004 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 22:53:14,004 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 22:53:14,005 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 22:53:14,005 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 22:53:14,468 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:53:14,468 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:53:14,470 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:53:14,470 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:53:14,470 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:53:14,470 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:53:14,757 - RSTPAnalyzer_DUT - INFO - 根桥检查: bridge_id='2000/90:12:10:b5:7d:f7', root_id='2000/90:12:10:b5:7d:f7', is_root=True
2025-09-10 22:53:14,758 - test_enhanced_rstp_coverage - INFO - 初始状态: DUT是根桥=True
2025-09-10 22:53:14,758 - test_enhanced_rstp_coverage - INFO - === 测试场景1: 根桥变更 ===
2025-09-10 22:53:14,758 - test_enhanced_rstp_coverage - INFO - === 测试场景2: 端口故障恢复 ===
2025-09-10 22:53:15,215 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:53:15,366 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:53:15,367 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 22:53:15,367 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 22:53:15,367 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 22:53:15,367 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 22:53:15,828 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:53:15,828 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:53:15,829 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:53:15,830 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:53:15,830 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:53:15,830 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:53:16,117 - test_enhanced_rstp_coverage - INFO - 测试端口br4故障恢复
2025-09-10 22:53:37,982 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:53:38,135 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Disabled   Discarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:53:38,136 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 22:53:38,136 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 22:53:38,136 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 22:53:38,137 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 22:53:38,597 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:53:38,597 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:53:38,598 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:53:38,598 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:53:38,599 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:53:38,599 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:53:38,888 - test_enhanced_rstp_coverage - INFO - ✓ 端口故障引起拓扑变更
2025-09-10 22:53:49,418 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:53:49,566 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:53:49,567 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 22:53:49,567 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 22:53:49,568 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 22:53:49,568 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 22:53:50,027 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:53:50,028 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:53:50,029 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:53:50,029 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:53:50,029 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:53:50,030 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:53:50,320 - test_enhanced_rstp_coverage - INFO - ✓ 端口br4成功恢复，状态: forwarding
2025-09-10 22:53:50,320 - test_enhanced_rstp_coverage - INFO - === 测试场景3: 端口优先级变更 ===
2025-09-10 22:53:50,778 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:53:50,926 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:53:50,928 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 22:53:50,928 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 22:53:50,928 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 22:53:50,928 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 22:53:51,392 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:53:51,392 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:53:51,393 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:53:51,394 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:53:51,394 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:53:51,394 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:53:51,684 - test_enhanced_rstp_coverage - INFO - 修改端口br4优先级
2025-09-10 22:54:00,210 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 22:54:00,362 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 22:54:00,363 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 22:54:00,363 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 22:54:00,363 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 22:54:00,363 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 22:54:00,823 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 22:54:00,824 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 22:54:00,825 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 22:54:00,825 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 22:54:00,825 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 22:54:00,825 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 22:54:01,109 - test_enhanced_rstp_coverage - INFO - 端口br4优先级变更后状态: forwarding
2025-09-10 22:54:01,109 - test_enhanced_rstp_coverage - INFO - ✓ 拓扑变更测试通过：成功检测到多种拓扑变更
2025-09-10 22:54:01,109 - test_enhanced_rstp_coverage - INFO - ✓ 全面拓扑变更测试完成
2025-09-10 22:54:01,110 - RSTPTest - INFO - 测试完成: test_topology_change_comprehensive (耗时: 69.62秒)
2025-09-10 22:54:01,110 - RSTPTest - INFO - ============================================================

2025-09-10 22:54:01,111 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 22:54:01,111 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 22:54:01,111 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 22:54:01,261 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 22:54:01,262 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 22:54:01,381 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 22:54:01,382 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 22:54:01,517 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 22:54:01,517 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 22:54:01,517 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 22:54:01,518 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-10 22:54:01,518 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 22:54:01,518 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 22:54:01,574 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 22:54:01,574 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 22:54:01,744 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 22:54:01,745 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 22:54:01,745 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 22:54:01,745 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 22:54:01,745 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 22:54:01,801 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 22:54:01,801 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 22:54:01,983 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 22:54:01,984 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 22:54:01,984 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 22:54:01,985 - RSTPTest - INFO - ============================================================
2025-09-10 22:54:01,985 - RSTPTest - INFO - 开始测试: test_rstp_reconvergence_no_switchover
2025-09-10 22:54:01,985 - RSTPTest - INFO - ============================================================
2025-09-10 22:54:01,986 - test_high_availability - INFO - 开始RSTP重构误判测试
2025-09-10 22:54:01,986 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 22:54:01,986 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 22:54:01,986 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 22:54:01,987 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 22:54:01,987 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 22:54:01,987 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 22:54:01,987 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 22:54:01,987 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-10 22:54:01,987 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-10 22:54:02,488 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-10 22:54:02,488 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 22:54:02,488 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 22:54:02,652 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-10 22:54:03,747 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-10 22:54:03,747 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 22:54:03,747 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 22:54:03,747 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 22:54:03,747 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-10 22:54:04,235 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-10 22:54:04,720 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 22:54:04,720 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 22:54:04,920 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 22:54:04,920 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 22:54:04,920 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 22:54:04,920 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 22:54:04,921 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 22:54:04,921 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 22:54:04,921 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 22:54:04,921 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 22:54:05,417 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 22:54:09,926 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 22:54:10,058 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 22:54:10,059 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 22:54:10,059 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 22:54:10,059 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 22:54:10,059 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 22:54:11,240 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 22:54:12,418 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 22:54:12,419 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 22:54:12,515 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 22:54:12,784 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 22:54:12,784 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 22:54:12,784 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 22:54:12,785 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 22:54:12,785 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 22:54:12,785 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 22:54:12,785 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 22:54:12,786 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 22:54:13,278 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 22:54:17,763 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 22:54:17,904 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 22:54:17,904 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 22:54:17,905 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 22:54:17,905 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 22:54:17,905 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 22:54:19,081 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 22:54:20,297 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 22:54:20,297 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 22:54:20,392 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 22:54:20,669 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 22:54:20,669 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 22:54:20,669 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-10 22:54:25,722 - test_high_availability - INFO - 初始HA状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-10 22:54:25,722 - test_high_availability - INFO - 在远端触发RSTP重构...
2025-09-10 22:54:25,723 - FaultInjector_TestNode2 - INFO - 断开链路: eth0
2025-09-10 22:54:25,898 - FaultInjector_TestNode2 - INFO - 链路已断开: eth0
2025-09-10 22:54:35,950 - test_high_availability - INFO - RSTP重构后HA状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-10 22:54:35,950 - FaultInjector_TestNode2 - INFO - 恢复链路: eth0
2025-09-10 22:54:38,257 - FaultInjector_TestNode2 - INFO - 链路已恢复: eth0
2025-09-10 22:54:38,258 - test_high_availability - INFO - RSTP重构误判测试完成
2025-09-10 22:54:38,259 - RSTPTest - INFO - 测试完成: test_rstp_reconvergence_no_switchover (耗时: 36.27秒)
2025-09-10 22:54:38,259 - RSTPTest - INFO - ============================================================

2025-09-10 22:54:38,261 - RSTPTest - INFO - ============================================================
2025-09-10 22:54:38,262 - RSTPTest - INFO - 开始测试: test_split_brain_scenario
2025-09-10 22:54:38,262 - RSTPTest - INFO - ============================================================
2025-09-10 22:54:38,263 - test_high_availability - INFO - 开始裂脑场景测试
2025-09-10 22:54:38,314 - test_high_availability - INFO - 初始状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-10 22:54:38,314 - test_high_availability - INFO - 断开同步链路: eth3
2025-09-10 22:54:38,315 - FaultInjector_DUT - INFO - 断开链路: eth3
2025-09-10 22:54:38,578 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth3 (code=1)，将在逻辑上标记为已断开
2025-09-10 22:54:48,579 - test_high_availability - WARNING - 裂脑测试需要访问两个控制器
2025-09-10 22:54:48,579 - FaultInjector_DUT - INFO - 恢复链路: eth3
2025-09-10 22:54:48,863 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth3 (code=1)，将在逻辑上标记为已恢复
2025-09-10 22:54:48,864 - test_high_availability - INFO - 裂脑场景测试完成
2025-09-10 22:54:48,864 - RSTPTest - INFO - 测试完成: test_split_brain_scenario (耗时: 10.60秒)
2025-09-10 22:54:48,864 - RSTPTest - INFO - ============================================================

2025-09-10 22:54:48,868 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 22:54:48,869 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 22:54:48,869 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 22:54:49,008 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 22:54:49,009 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 22:54:49,009 - RSTPTest - INFO - ============================================================
2025-09-10 22:54:49,009 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[12288]
2025-09-10 22:54:49,009 - RSTPTest - INFO - ============================================================
2025-09-10 22:54:49,010 - test_parameters - INFO - 测试网桥优先级: 12288
2025-09-10 22:54:50,519 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 22:54:50,520 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-10 22:54:50,520 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 12288 (方法: ovs)
2025-09-10 22:54:50,520 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-10 22:54:50,654 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-10 22:54:50,810 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-10 22:54:52,926 - test_parameters - INFO - 从OVS配置读取到优先级: 12288
2025-09-10 22:54:52,927 - test_parameters - INFO - 优先级12288设置成功
2025-09-10 22:54:52,927 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[12288] (耗时: 3.92秒)
2025-09-10 22:54:52,927 - RSTPTest - INFO - ============================================================

2025-09-10 22:54:52,929 - RSTPTest - INFO - ============================================================
2025-09-10 22:54:52,929 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[16384]
2025-09-10 22:54:52,929 - RSTPTest - INFO - ============================================================
2025-09-10 22:54:52,929 - test_parameters - INFO - 测试网桥优先级: 16384
2025-09-10 22:54:54,424 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 22:54:54,424 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-10 22:54:54,424 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 16384 (方法: ovs)
2025-09-10 22:54:54,424 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-10 22:54:54,558 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-10 22:54:54,714 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-10 22:54:56,826 - test_parameters - INFO - 从OVS配置读取到优先级: 16384
2025-09-10 22:54:56,827 - test_parameters - INFO - 优先级16384设置成功
2025-09-10 22:54:56,827 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[16384] (耗时: 3.90秒)
2025-09-10 22:54:56,828 - RSTPTest - INFO - ============================================================

2025-09-10 22:54:56,829 - RSTPTest - INFO - ============================================================
2025-09-10 22:54:56,829 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[32768]
2025-09-10 22:54:56,829 - RSTPTest - INFO - ============================================================
2025-09-10 22:54:56,830 - test_parameters - INFO - 测试网桥优先级: 32768
2025-09-10 22:54:58,319 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 22:54:58,319 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-10 22:54:58,319 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 32768 (方法: ovs)
2025-09-10 22:54:58,320 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-10 22:54:58,450 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-10 22:54:58,601 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-10 22:55:00,715 - test_parameters - INFO - 从OVS配置读取到优先级: 32768
2025-09-10 22:55:00,715 - test_parameters - INFO - 优先级32768设置成功
2025-09-10 22:55:00,716 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[32768] (耗时: 3.89秒)
2025-09-10 22:55:00,716 - RSTPTest - INFO - ============================================================

2025-09-10 22:55:00,717 - RSTPTest - INFO - ============================================================
2025-09-10 22:55:00,718 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[61440]
2025-09-10 22:55:00,718 - RSTPTest - INFO - ============================================================
2025-09-10 22:55:00,718 - test_parameters - INFO - 测试网桥优先级: 61440
2025-09-10 22:55:02,202 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 22:55:02,203 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-10 22:55:02,203 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 61440 (方法: ovs)
2025-09-10 22:55:02,203 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-10 22:55:02,329 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-10 22:55:02,490 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-10 22:55:04,603 - test_parameters - INFO - 从OVS配置读取到优先级: 61440
2025-09-10 22:55:04,603 - test_parameters - INFO - 优先级61440设置成功
2025-09-10 22:55:04,604 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[61440] (耗时: 3.89秒)
2025-09-10 22:55:04,604 - RSTPTest - INFO - ============================================================

2025-09-10 22:55:04,605 - RSTPTest - INFO - ============================================================
2025-09-10 22:55:04,605 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[4097]
2025-09-10 22:55:04,605 - RSTPTest - INFO - ============================================================
2025-09-10 22:55:04,606 - test_parameters - INFO - 测试无效优先级: 4097
2025-09-10 22:55:05,271 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 22:55:05,271 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-10 22:55:05,271 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 4097 (方法: ovs)
2025-09-10 22:55:05,271 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-10 22:55:05,435 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-10 22:55:06,683 - test_parameters - INFO - DUT处理无效优先级 4097 -> 4097
2025-09-10 22:55:06,683 - test_parameters - ERROR - DUT接受了非标准优先级值 4097，不符合802.1D标准（应为4096的倍数）
2025-09-10 22:55:06,701 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[4097] (耗时: 2.10秒)
2025-09-10 22:55:06,701 - RSTPTest - INFO - ============================================================

2025-09-10 22:55:06,703 - RSTPTest - INFO - ============================================================
2025-09-10 22:55:06,704 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[12289]
2025-09-10 22:55:06,704 - RSTPTest - INFO - ============================================================
2025-09-10 22:55:06,705 - test_parameters - INFO - 测试无效优先级: 12289
2025-09-10 22:55:07,294 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 22:55:07,294 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-10 22:55:07,295 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 12289 (方法: ovs)
2025-09-10 22:55:07,295 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-10 22:55:07,458 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-10 22:55:08,726 - test_parameters - INFO - DUT处理无效优先级 12289 -> 12289
2025-09-10 22:55:08,726 - test_parameters - ERROR - DUT接受了非标准优先级值 12289，不符合802.1D标准（应为4096的倍数）
2025-09-10 22:55:08,744 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[12289] (耗时: 2.04秒)
2025-09-10 22:55:08,745 - RSTPTest - INFO - ============================================================

2025-09-10 22:55:08,747 - RSTPTest - INFO - ============================================================
2025-09-10 22:55:08,747 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[70000]
2025-09-10 22:55:08,747 - RSTPTest - INFO - ============================================================
2025-09-10 22:55:08,748 - test_parameters - INFO - 测试无效优先级: 70000
2025-09-10 22:55:09,351 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 22:55:09,352 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-10 22:55:09,352 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 70000 (方法: ovs)
2025-09-10 22:55:09,352 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-10 22:55:09,519 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-10 22:55:10,782 - test_parameters - INFO - DUT处理无效优先级 70000 -> 70000
2025-09-10 22:55:10,782 - test_parameters - ERROR - DUT接受了非标准优先级值 70000，不符合802.1D标准（应为4096的倍数）
2025-09-10 22:55:10,800 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[70000] (耗时: 2.05秒)
2025-09-10 22:55:10,800 - RSTPTest - INFO - ============================================================

2025-09-10 22:55:10,803 - RSTPTest - INFO - ============================================================
2025-09-10 22:55:10,803 - RSTPTest - INFO - 开始测试: test_hello_time
2025-09-10 22:55:10,803 - RSTPTest - INFO - ============================================================
2025-09-10 22:55:10,804 - test_parameters - INFO - 测试Hello Time参数
2025-09-10 22:55:12,416 - test_parameters - INFO - 设置Hello Time: 1秒
2025-09-10 22:55:12,416 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 22:55:12,416 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-10 22:55:14,641 - test_parameters - INFO - 设置Hello Time: 2秒
2025-09-10 22:55:14,642 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 22:55:14,642 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-10 22:55:16,924 - test_parameters - INFO - 设置Hello Time: 5秒
2025-09-10 22:55:16,924 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 22:55:16,925 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-10 22:55:19,202 - test_parameters - INFO - Hello Time测试通过
2025-09-10 22:55:19,203 - RSTPTest - INFO - 测试完成: test_hello_time (耗时: 8.40秒)
2025-09-10 22:55:19,204 - RSTPTest - INFO - ============================================================

2025-09-10 22:55:19,205 - RSTPTest - INFO - ============================================================
2025-09-10 22:55:19,205 - RSTPTest - INFO - 开始测试: test_forward_delay
2025-09-10 22:55:19,205 - RSTPTest - INFO - ============================================================
2025-09-10 22:55:19,206 - test_parameters - INFO - 测试Forward Delay参数
2025-09-10 22:55:20,807 - test_parameters - INFO - 设置Forward Delay: 4秒
2025-09-10 22:55:20,807 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 22:55:20,807 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-10 22:55:23,038 - test_parameters - INFO - 设置Forward Delay: 10秒
2025-09-10 22:55:23,038 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 22:55:23,039 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-10 22:55:25,329 - test_parameters - INFO - 设置Forward Delay: 15秒
2025-09-10 22:55:25,329 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 22:55:25,329 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-10 22:55:27,610 - test_parameters - INFO - Forward Delay测试通过
2025-09-10 22:55:27,612 - RSTPTest - INFO - 测试完成: test_forward_delay (耗时: 8.41秒)
2025-09-10 22:55:27,612 - RSTPTest - INFO - ============================================================

2025-09-10 22:55:27,613 - RSTPTest - INFO - ============================================================
2025-09-10 22:55:27,613 - RSTPTest - INFO - 开始测试: test_max_age
2025-09-10 22:55:27,613 - RSTPTest - INFO - ============================================================
2025-09-10 22:55:27,614 - test_parameters - INFO - 测试Max Age参数
2025-09-10 22:55:29,207 - test_parameters - INFO - 设置Max Age: 6秒
2025-09-10 22:55:29,208 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 22:55:29,208 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-10 22:55:31,443 - test_parameters - INFO - 设置Max Age: 10秒
2025-09-10 22:55:31,443 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 22:55:31,443 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-10 22:55:33,732 - test_parameters - INFO - 设置Max Age: 20秒
2025-09-10 22:55:33,732 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 22:55:33,732 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-10 22:55:36,013 - test_parameters - INFO - Max Age测试通过
2025-09-10 22:55:36,014 - RSTPTest - INFO - 测试完成: test_max_age (耗时: 8.40秒)
2025-09-10 22:55:36,015 - RSTPTest - INFO - ============================================================

2025-09-10 22:55:36,143 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 22:55:36,143 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 22:55:36,276 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 22:55:36,276 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 22:55:36,276 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 22:55:36,277 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-10 22:55:36,277 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 22:55:36,277 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 22:55:36,332 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 22:55:36,332 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 22:55:36,500 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 22:55:36,501 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 22:55:36,501 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 22:55:36,501 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 22:55:36,501 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 22:55:36,705 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 22:55:36,706 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 22:55:36,877 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 22:55:36,877 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 22:55:36,878 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 22:55:36,878 - RSTPTest - INFO - ============================================================
2025-09-10 22:55:36,878 - RSTPTest - INFO - 开始测试: test_port_cost
2025-09-10 22:55:36,878 - RSTPTest - INFO - ============================================================
2025-09-10 22:55:36,879 - test_parameters - INFO - 测试端口路径成本
2025-09-10 22:55:36,879 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 22:55:36,879 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 22:55:36,880 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 22:55:36,880 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 22:55:36,880 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 22:55:36,880 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 22:55:36,880 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 22:55:36,880 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-10 22:55:36,880 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-10 22:55:37,387 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-10 22:55:37,388 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 22:55:37,388 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 22:55:37,526 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-10 22:55:38,582 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-10 22:55:38,583 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 22:55:38,583 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 22:55:38,583 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 22:55:38,583 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-10 22:55:39,064 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-10 22:55:39,525 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 22:55:39,526 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 22:55:39,702 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 22:55:39,702 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 22:55:39,703 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 22:55:39,703 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 22:55:39,703 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 22:55:39,703 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 22:55:39,703 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 22:55:39,703 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 22:55:40,207 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 22:55:44,733 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 22:55:44,860 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 22:55:44,861 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 22:55:44,861 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 22:55:44,861 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 22:55:44,861 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 22:55:46,069 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 22:55:47,256 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 22:55:47,256 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 22:55:47,354 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 22:55:47,623 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 22:55:47,623 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 22:55:47,623 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 22:55:47,623 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 22:55:47,623 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 22:55:47,624 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 22:55:47,624 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 22:55:47,624 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 22:55:48,129 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 22:57:22,167 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 22:57:32,246 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 22:57:32,246 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 22:57:32,246 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 22:57:32,247 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 22:57:32,247 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 22:58:37,054 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 22:59:28,887 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 22:59:28,888 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 22:59:28,982 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 22:59:39,201 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 22:59:39,202 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 22:59:39,202 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-10 22:59:44,203 - test_parameters - INFO - 设置端口eth0成本: 10
2025-09-10 22:59:44,203 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 22:59:44,204 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-10 22:59:44,265 - test_parameters - INFO - 设置端口eth0成本: 100
2025-09-10 22:59:44,265 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 22:59:44,265 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-10 22:59:44,372 - test_parameters - INFO - 设置端口eth0成本: 1000
2025-09-10 22:59:44,372 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 22:59:44,372 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-10 22:59:44,481 - test_parameters - INFO - 设置端口eth0成本: 20000
2025-09-10 22:59:44,481 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 22:59:44,481 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-10 22:59:44,588 - test_parameters - INFO - 端口成本测试通过
2025-09-10 22:59:44,589 - RSTPTest - INFO - 测试完成: test_port_cost (耗时: 247.71秒)
2025-09-10 22:59:44,589 - RSTPTest - INFO - ============================================================

2025-09-10 22:59:44,590 - RSTPTest - INFO - ============================================================
2025-09-10 22:59:44,591 - RSTPTest - INFO - 开始测试: test_parameter_persistence
2025-09-10 22:59:44,591 - RSTPTest - INFO - ============================================================
2025-09-10 22:59:44,591 - test_parameters - INFO - 测试参数持久性
2025-09-10 22:59:46,246 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 22:59:46,246 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-10 22:59:46,247 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 16384 (方法: ovs)
2025-09-10 22:59:46,247 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-10 22:59:46,368 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-10 22:59:52,229 - test_parameters - INFO - 参数持久性测试通过
2025-09-10 22:59:52,230 - RSTPTest - INFO - 测试完成: test_parameter_persistence (耗时: 7.64秒)
2025-09-10 22:59:52,230 - RSTPTest - INFO - ============================================================

2025-09-10 22:59:52,231 - RSTPTest - INFO - ============================================================
2025-09-10 22:59:52,231 - RSTPTest - INFO - 开始测试: test_parameter_boundaries
2025-09-10 22:59:52,231 - RSTPTest - INFO - ============================================================
2025-09-10 22:59:52,232 - test_parameters - INFO - 测试参数边界值
2025-09-10 22:59:53,909 - test_parameters - INFO - 最小值0: 失败
2025-09-10 22:59:54,012 - test_parameters - INFO - 最大值65535: 失败
2025-09-10 22:59:54,117 - test_parameters - INFO - 正确拒绝了无效值-1
2025-09-10 22:59:54,221 - test_parameters - INFO - 正确拒绝了无效值65536
2025-09-10 22:59:54,325 - test_parameters - INFO - 最小值1: 失败
2025-09-10 22:59:54,429 - test_parameters - INFO - 最大值10: 失败
2025-09-10 22:59:54,533 - test_parameters - INFO - 正确拒绝了无效值0
2025-09-10 22:59:54,637 - test_parameters - INFO - 正确拒绝了无效值11
2025-09-10 22:59:54,744 - test_parameters - INFO - 最小值4: 失败
2025-09-10 22:59:54,849 - test_parameters - INFO - 最大值30: 失败
2025-09-10 22:59:54,956 - test_parameters - INFO - 正确拒绝了无效值3
2025-09-10 22:59:55,065 - test_parameters - INFO - 正确拒绝了无效值31
2025-09-10 22:59:55,176 - test_parameters - INFO - 最小值6: 失败
2025-09-10 22:59:55,280 - test_parameters - INFO - 最大值40: 失败
2025-09-10 22:59:55,385 - test_parameters - INFO - 正确拒绝了无效值5
2025-09-10 22:59:55,492 - test_parameters - INFO - 正确拒绝了无效值41
2025-09-10 22:59:55,492 - test_parameters - INFO - 参数边界测试完成
2025-09-10 22:59:55,493 - RSTPTest - INFO - 测试完成: test_parameter_boundaries (耗时: 3.26秒)
2025-09-10 22:59:55,493 - RSTPTest - INFO - ============================================================

2025-09-10 22:59:55,494 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 22:59:55,494 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 22:59:55,494 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 22:59:55,628 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 22:59:55,628 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 22:59:55,746 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 22:59:55,746 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 22:59:55,890 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 22:59:55,890 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 22:59:55,891 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 22:59:55,891 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-10 22:59:55,891 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 22:59:55,891 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 22:59:55,946 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 22:59:55,946 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 22:59:56,111 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 22:59:56,111 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 22:59:56,112 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 22:59:56,112 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 22:59:56,112 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 22:59:56,168 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 22:59:56,168 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 23:00:04,365 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 23:00:04,366 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 23:00:04,366 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 23:00:04,367 - RSTPTest - INFO - ============================================================
2025-09-10 23:00:04,367 - RSTPTest - INFO - 开始测试: test_port_role_assignment_simplified
2025-09-10 23:00:04,367 - RSTPTest - INFO - ============================================================
2025-09-10 23:00:04,368 - test_protocol_conformance - INFO - 开始端口角色分配测试
2025-09-10 23:00:04,368 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 23:00:04,368 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 23:00:04,368 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 23:00:04,369 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 23:00:04,369 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 23:00:04,369 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 23:00:04,369 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 23:00:04,369 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-10 23:00:04,369 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-10 23:00:04,874 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-10 23:00:04,874 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 23:00:04,875 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 23:00:05,030 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-10 23:00:06,065 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-10 23:00:06,065 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 23:00:06,066 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 23:00:06,066 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 23:00:06,066 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-10 23:00:06,530 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-10 23:00:06,999 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 23:00:06,999 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 23:00:07,178 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 23:00:07,178 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 23:00:07,179 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 23:00:07,179 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 23:00:07,179 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 23:00:07,179 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 23:00:07,179 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 23:00:07,179 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 23:00:07,684 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 23:00:12,176 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:00:12,309 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:00:12,309 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 23:00:12,310 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 23:00:12,310 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 23:00:12,310 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 23:00:13,513 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 23:00:14,697 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 23:00:14,697 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 23:00:14,793 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 23:00:15,058 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 23:00:15,058 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 23:00:15,059 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 23:00:15,059 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 23:00:15,059 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 23:00:15,059 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 23:00:15,059 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 23:00:15,059 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 23:00:30,700 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 23:00:35,188 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:00:35,316 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:00:35,316 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 23:00:35,316 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 23:00:35,317 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 23:00:35,317 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 23:00:36,514 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 23:00:37,745 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 23:00:37,746 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 23:00:37,842 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 23:00:38,102 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 23:00:38,102 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 23:00:38,102 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-10 23:00:38,102 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-10 23:00:38,103 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令
2025-09-10 23:00:38,239 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ("8N10xiaol\r\n8N10xiaol\r\nUnknown command [setbridgeprio]\r\nUsage: mstpctl [options] [commands]\r\noptions:\r\n  -h | --help              Show this help text\r\n  -V | --version           Show version\r\n  -b | --batch <file>      Process file with mstpctl commands\r\n  -s | --stdin             Process mstpctl commands from stdin\r\n                           Make sure to provide newlines between\r\n                           commands. Won't work if `batch` is used\r\n  -i | --ignore            Ignore failing commands during batch\r\n                           processing\r\n  -f | --format <format>   Select output format (json, plain)\r\ncommands:\r\n-Add bridges to the mstpd's list:\r\n   addbridge        <bridge> [<bridge> ...]\r\n-Remove bridges from the mstpd's list:\r\n   delbridge        <bridge> [<bridge> ...]\r\n-Show bridge state for the CIST:\r\n   showbridge       [<bridge> ... [param]]\r\n-Show list of registered MSTIs:\r\n   showmstilist     <bridge>\r\n-Show MST ConfigId:\r\n   showmstconfid    <bridge>\r\n-Show VID-to-FID allocation table:\r\n   showvid2fid      <bridge>\r\n-Show FID-to-MSTID allocation table:\r\n   showfid2mstid    <bridge>\r\n-Show port state for the CIST:\r\n   showport         <bridge> [<port>...[port] [param]]\r\n-Show port state for the CIST:\r\n   showportparams   <bridge> <port> <param>...[param]\r\n-Show port detailed state for the CIST:\r\n   showportdetail   <bridge> [<port> ... [param]]\r\n-Show bridge state for the given MSTI:\r\n   showtree         <bridge> <mstid>\r\n-Show port detailed state for the given MSTI:\r\n   showtreeport     <bridge> <port> <mstid>\r\n-Set MST ConfigId elements: Revision Level (0-65535) and Name:\r\n   setmstconfid     <bridge> <revision> <name>\r\n-Set VIDs-to-FIDs allocation:\r\n   setvid2fid       <bridge> <FID>:<VIDs List> [<FID>:<VIDs List> ...]\r\n-Set FIDs-to-MSTIDs allocation:\r\n   setfid2mstid     <bridge> <mstid>:<FIDs List> [<mstid>:<FIDs List> ...]\r\n-Set bridge max age (6-40):\r\n   setmaxage        <bridge> <max_age>\r\n-Set bridge forward delay (4-30):\r\n   setfdelay        <bridge> <fwd_delay>\r\n-Set bridge max hops (6-40):\r\n   setmaxhops       <bridge> <max_hops>\r\n-Set bridge hello time (1-10):\r\n   sethello         <bridge> <hello_time>\r\n-Set bridge ageing time (10-1000000):\r\n   setageing        <bridge> <ageing_time>\r\n-Force Spanning Tree protocol version:\r\n   setforcevers     <bridge> {mstp|rstp|stp}\r\n-Set bridge transmit hold count (1-10):\r\n   settxholdcount   <bridge> <tx_hold_count>\r\n-Create new MSTI:\r\n   createtree       <bridge> <mstid>\r\n-Delete existing MSTI:\r\n   deletetree       <bridge> <mstid>\r\n-Set bridge priority (0-15) for the given MSTI:\r\n   settreeprio      <bridge> <mstid> <priority>\r\n-Set port external path cost for the CIST (0 = auto):\r\n   setportpathcost  <bridge> <port> <cost>\r\n-Set initial edge state:\r\n   setportadminedge <bridge> <port> {yes|no}\r\n-Enable auto transition to/from edge state:\r\n   setportautoedge  <bridge> <port> {yes|no}\r\n-Set p2p detection mode:\r\n   setportp2p       <bridge> <port> {yes|no|auto}\r\n-Restrict port ability to take Root role:\r\n   setportrestrrole <bridge> <port> {yes|no}\r\n-Restrict port ability to propagate received TCNs:\r\n   setportrestrtcn  <bridge> <port> {yes|no}\r\n-Try to get back from STP to rapid (RSTP/MSTP) mode:\r\n   portmcheck       <bridge> <port>\r\n-Set bpdu guard state:\r\n   setbpduguard     <bridge> <port> {yes|no}\r\n-Set port priority (0-15) for the given MSTI:\r\n   settreeportprio  <bridge> <port> <mstid> <priority>\r\n-Set port internal path cost for the given MSTI (0 = auto):\r\n   settreeportcost  <bridge> <port> <mstid> <cost>\r\n-Set port network state:\r\n   setportnetwork   <bridge> <port> {yes|no}\r\n-Set BPDU filter state:\r\n   setportbpdufilter <bridge> <port> {yes|no}\r\n-Level of verbosity:\r\n   debuglevel       <level>\r\n", '', 1)
2025-09-10 23:00:38,241 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 32768 (方法: ovs)
2025-09-10 23:00:38,241 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-10 23:00:38,358 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-10 23:00:38,502 - test_protocol_conformance - INFO - 等待网络收敛...
2025-09-10 23:00:38,502 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 23:00:38,943 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:00:39,099 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Disabled   Discarding 2000     128.1
  br4        Root       Forwarding 20000    128.2


2025-09-10 23:00:39,100 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 23:00:39,100 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 23:00:39,101 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 23:00:39,101 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 23:00:39,557 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:00:39,557 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:00:39,558 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:00:39,559 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:00:39,559 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:00:39,559 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:00:39,846 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.34秒
2025-09-10 23:00:40,303 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:00:40,456 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Disabled   Discarding 2000     128.1
  br4        Root       Forwarding 20000    128.2


2025-09-10 23:00:40,457 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 23:00:40,457 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 23:00:40,457 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 23:00:40,457 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 23:00:40,913 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:00:40,913 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:00:40,915 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:00:40,915 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:00:40,916 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:00:40,916 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:00:41,654 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:00:41,807 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Disabled   Discarding 2000     128.1
  br4        Root       Forwarding 20000    128.2


2025-09-10 23:00:41,808 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 23:00:41,808 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 23:00:41,808 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 23:00:41,809 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 23:00:42,273 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:00:42,273 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:00:42,274 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:00:42,275 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:00:42,275 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:00:42,275 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:00:42,558 - RSTPAnalyzer_DUT - INFO - Root ID为unknown，判定为非根桥
2025-09-10 23:00:42,558 - test_protocol_conformance - INFO - DUT是根桥: False
2025-09-10 23:00:42,559 - test_protocol_conformance - INFO - 活动端口角色: {<PortRole.ALTERNATE: 'alternate'>: ['br4']}
2025-09-10 23:00:42,559 - test_protocol_conformance - INFO - 禁用端口: ['br3', 'SE_ETH2']
2025-09-10 23:00:42,601 - RSTPTest - INFO - 测试完成: test_port_role_assignment_simplified (耗时: 38.23秒)
2025-09-10 23:00:42,602 - RSTPTest - INFO - ============================================================

2025-09-10 23:00:42,604 - RSTPTest - INFO - ============================================================
2025-09-10 23:00:42,604 - RSTPTest - INFO - 开始测试: test_root_bridge_election
2025-09-10 23:00:42,604 - RSTPTest - INFO - ============================================================
2025-09-10 23:00:42,605 - test_protocol_conformance - INFO - 开始根网桥选举测试
2025-09-10 23:00:42,605 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 23:00:42,605 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 23:00:42,605 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 23:00:42,605 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 23:00:42,606 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 23:00:42,606 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 23:00:42,606 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 23:00:42,606 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-10 23:00:42,606 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-10 23:00:43,077 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-10 23:00:43,078 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 23:00:43,078 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 23:00:43,233 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-10 23:00:44,303 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-10 23:00:44,304 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 23:00:44,304 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 23:00:44,304 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 23:00:44,304 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-10 23:00:44,778 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-10 23:00:45,264 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 23:00:45,265 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 23:00:45,453 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 23:00:45,454 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 23:00:45,454 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 23:00:45,454 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 23:00:45,454 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 23:00:45,454 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 23:00:45,455 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 23:00:45,455 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 23:00:45,976 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 23:00:50,505 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:00:50,636 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:00:50,636 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 23:00:50,636 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 23:00:50,637 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 23:00:50,637 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 23:00:51,802 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 23:00:52,976 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 23:00:52,976 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 23:00:53,072 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 23:00:53,328 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 23:00:53,328 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 23:00:53,328 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 23:00:53,328 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 23:00:53,329 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 23:00:53,329 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 23:00:53,329 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 23:00:53,329 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 23:00:53,823 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 23:00:58,315 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:00:58,444 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:00:58,444 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 23:00:58,445 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 23:00:58,445 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 23:00:58,445 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 23:00:59,636 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 23:01:00,861 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 23:01:00,861 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 23:01:00,966 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 23:01:01,222 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 23:01:01,223 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 23:01:01,223 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-10 23:01:04,224 - test_protocol_conformance - INFO - === 检查DUT网桥配置 ===
2025-09-10 23:01:04,224 - test_protocol_conformance - INFO - DUT使用OVS网桥: SE_ETH2
2025-09-10 23:01:04,287 - test_protocol_conformance - INFO - OVS网桥 SE_ETH2 存在
2025-09-10 23:01:04,390 - test_protocol_conformance - INFO - SE_ETH2 RSTP状态: true
2025-09-10 23:01:04,391 - test_protocol_conformance - INFO - === 初始网桥状态 ===
2025-09-10 23:01:04,846 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:01:04,994 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:01:04,995 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 23:01:04,996 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 23:01:04,996 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 23:01:04,996 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 23:01:05,457 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:01:05,457 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:01:05,458 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:01:05,458 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:01:05,458 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:01:05,458 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:01:05,749 - test_protocol_conformance - INFO - 活动端口数: 1
2025-09-10 23:01:05,750 - test_protocol_conformance - WARNING - 活动端口不足，尝试启用更多端口
2025-09-10 23:01:09,571 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:01:09,723 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:01:09,725 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 23:01:09,725 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 23:01:09,725 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 23:01:09,725 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 23:01:10,185 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:01:10,185 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:01:10,186 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:01:10,186 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:01:10,186 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:01:10,187 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:01:10,473 - test_protocol_conformance - INFO - 初始端口状态:
2025-09-10 23:01:10,473 - test_protocol_conformance - INFO -   br4: 角色=alternate, 状态=discarding
2025-09-10 23:01:10,473 - test_protocol_conformance - INFO - 初始状态 - DUT有Root Port: False
2025-09-10 23:01:10,474 - test_protocol_conformance - INFO - === 配置网桥优先级 ===
2025-09-10 23:01:10,474 - test_protocol_conformance - INFO - 设置TestNode1优先级为16384
2025-09-10 23:01:10,474 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 16384 (方法: mstpd)
2025-09-10 23:01:10,474 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令
2025-09-10 23:01:10,598 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ("8N10xiaol\r\n8N10xiaol\r\nUnknown command [setbridgeprio]\r\nUsage: mstpctl [options] [commands]\r\noptions:\r\n  -h | --help              Show this help text\r\n  -V | --version           Show version\r\n  -b | --batch <file>      Process file with mstpctl commands\r\n  -s | --stdin             Process mstpctl commands from stdin\r\n                           Make sure to provide newlines between\r\n                           commands. Won't work if `batch` is used\r\n  -i | --ignore            Ignore failing commands during batch\r\n                           processing\r\n  -f | --format <format>   Select output format (json, plain)\r\ncommands:\r\n-Add bridges to the mstpd's list:\r\n   addbridge        <bridge> [<bridge> ...]\r\n-Remove bridges from the mstpd's list:\r\n   delbridge        <bridge> [<bridge> ...]\r\n-Show bridge state for the CIST:\r\n   showbridge       [<bridge> ... [param]]\r\n-Show list of registered MSTIs:\r\n   showmstilist     <bridge>\r\n-Show MST ConfigId:\r\n   showmstconfid    <bridge>\r\n-Show VID-to-FID allocation table:\r\n   showvid2fid      <bridge>\r\n-Show FID-to-MSTID allocation table:\r\n   showfid2mstid    <bridge>\r\n-Show port state for the CIST:\r\n   showport         <bridge> [<port>...[port] [param]]\r\n-Show port state for the CIST:\r\n   showportparams   <bridge> <port> <param>...[param]\r\n-Show port detailed state for the CIST:\r\n   showportdetail   <bridge> [<port> ... [param]]\r\n-Show bridge state for the given MSTI:\r\n   showtree         <bridge> <mstid>\r\n-Show port detailed state for the given MSTI:\r\n   showtreeport     <bridge> <port> <mstid>\r\n-Set MST ConfigId elements: Revision Level (0-65535) and Name:\r\n   setmstconfid     <bridge> <revision> <name>\r\n-Set VIDs-to-FIDs allocation:\r\n   setvid2fid       <bridge> <FID>:<VIDs List> [<FID>:<VIDs List> ...]\r\n-Set FIDs-to-MSTIDs allocation:\r\n   setfid2mstid     <bridge> <mstid>:<FIDs List> [<mstid>:<FIDs List> ...]\r\n-Set bridge max age (6-40):\r\n   setmaxage        <bridge> <max_age>\r\n-Set bridge forward delay (4-30):\r\n   setfdelay        <bridge> <fwd_delay>\r\n-Set bridge max hops (6-40):\r\n   setmaxhops       <bridge> <max_hops>\r\n-Set bridge hello time (1-10):\r\n   sethello         <bridge> <hello_time>\r\n-Set bridge ageing time (10-1000000):\r\n   setageing        <bridge> <ageing_time>\r\n-Force Spanning Tree protocol version:\r\n   setforcevers     <bridge> {mstp|rstp|stp}\r\n-Set bridge transmit hold count (1-10):\r\n   settxholdcount   <bridge> <tx_hold_count>\r\n-Create new MSTI:\r\n   createtree       <bridge> <mstid>\r\n-Delete existing MSTI:\r\n   deletetree       <bridge> <mstid>\r\n-Set bridge priority (0-15) for the given MSTI:\r\n   settreeprio      <bridge> <mstid> <priority>\r\n-Set port external path cost for the CIST (0 = auto):\r\n   setportpathcost  <bridge> <port> <cost>\r\n-Set initial edge state:\r\n   setportadminedge <bridge> <port> {yes|no}\r\n-Enable auto transition to/from edge state:\r\n   setportautoedge  <bridge> <port> {yes|no}\r\n-Set p2p detection mode:\r\n   setportp2p       <bridge> <port> {yes|no|auto}\r\n-Restrict port ability to take Root role:\r\n   setportrestrrole <bridge> <port> {yes|no}\r\n-Restrict port ability to propagate received TCNs:\r\n   setportrestrtcn  <bridge> <port> {yes|no}\r\n-Try to get back from STP to rapid (RSTP/MSTP) mode:\r\n   portmcheck       <bridge> <port>\r\n-Set bpdu guard state:\r\n   setbpduguard     <bridge> <port> {yes|no}\r\n-Set port priority (0-15) for the given MSTI:\r\n   settreeportprio  <bridge> <port> <mstid> <priority>\r\n-Set port internal path cost for the given MSTI (0 = auto):\r\n   settreeportcost  <bridge> <port> <mstid> <cost>\r\n-Set port network state:\r\n   setportnetwork   <bridge> <port> {yes|no}\r\n-Set BPDU filter state:\r\n   setportbpdufilter <bridge> <port> {yes|no}\r\n-Level of verbosity:\r\n   debuglevel       <level>\r\n", '', 1)
2025-09-10 23:01:10,600 - test_protocol_conformance - INFO - 设置DUT优先级为32768
2025-09-10 23:01:10,672 - test_protocol_conformance - INFO - OVS设置优先级结果: ('', '', 0)
2025-09-10 23:01:10,766 - test_protocol_conformance - INFO - 验证优先级设置: ('"32768"\n', '', 0)
2025-09-10 23:01:10,767 - test_protocol_conformance - INFO - 设置TestNode2优先级为24576
2025-09-10 23:01:10,767 - NetworkTopology_TestNode2 - INFO - TestNode2: 设置网桥优先级 br0 = 24576 (方法: mstpd)
2025-09-10 23:01:10,767 - NetworkTopology_TestNode2 - INFO - TestNode2: 执行mstpd设置优先级命令
2025-09-10 23:01:10,902 - NetworkTopology_TestNode2 - INFO - TestNode2: mstpd设置优先级结果: ("8N10xiaol\r\n8N10xiaol\r\nUnknown command [setbridgeprio]\r\nUsage: mstpctl [options] [commands]\r\noptions:\r\n  -h | --help              Show this help text\r\n  -V | --version           Show version\r\n  -b | --batch <file>      Process file with mstpctl commands\r\n  -s | --stdin             Process mstpctl commands from stdin\r\n                           Make sure to provide newlines between\r\n                           commands. Won't work if `batch` is used\r\n  -i | --ignore            Ignore failing commands during batch\r\n                           processing\r\n  -f | --format <format>   Select output format (json, plain)\r\ncommands:\r\n-Add bridges to the mstpd's list:\r\n   addbridge        <bridge> [<bridge> ...]\r\n-Remove bridges from the mstpd's list:\r\n   delbridge        <bridge> [<bridge> ...]\r\n-Show bridge state for the CIST:\r\n   showbridge       [<bridge> ... [param]]\r\n-Show list of registered MSTIs:\r\n   showmstilist     <bridge>\r\n-Show MST ConfigId:\r\n   showmstconfid    <bridge>\r\n-Show VID-to-FID allocation table:\r\n   showvid2fid      <bridge>\r\n-Show FID-to-MSTID allocation table:\r\n   showfid2mstid    <bridge>\r\n-Show port state for the CIST:\r\n   showport         <bridge> [<port>...[port] [param]]\r\n-Show port state for the CIST:\r\n   showportparams   <bridge> <port> <param>...[param]\r\n-Show port detailed state for the CIST:\r\n   showportdetail   <bridge> [<port> ... [param]]\r\n-Show bridge state for the given MSTI:\r\n   showtree         <bridge> <mstid>\r\n-Show port detailed state for the given MSTI:\r\n   showtreeport     <bridge> <port> <mstid>\r\n-Set MST ConfigId elements: Revision Level (0-65535) and Name:\r\n   setmstconfid     <bridge> <revision> <name>\r\n-Set VIDs-to-FIDs allocation:\r\n   setvid2fid       <bridge> <FID>:<VIDs List> [<FID>:<VIDs List> ...]\r\n-Set FIDs-to-MSTIDs allocation:\r\n   setfid2mstid     <bridge> <mstid>:<FIDs List> [<mstid>:<FIDs List> ...]\r\n-Set bridge max age (6-40):\r\n   setmaxage        <bridge> <max_age>\r\n-Set bridge forward delay (4-30):\r\n   setfdelay        <bridge> <fwd_delay>\r\n-Set bridge max hops (6-40):\r\n   setmaxhops       <bridge> <max_hops>\r\n-Set bridge hello time (1-10):\r\n   sethello         <bridge> <hello_time>\r\n-Set bridge ageing time (10-1000000):\r\n   setageing        <bridge> <ageing_time>\r\n-Force Spanning Tree protocol version:\r\n   setforcevers     <bridge> {mstp|rstp|stp}\r\n-Set bridge transmit hold count (1-10):\r\n   settxholdcount   <bridge> <tx_hold_count>\r\n-Create new MSTI:\r\n   createtree       <bridge> <mstid>\r\n-Delete existing MSTI:\r\n   deletetree       <bridge> <mstid>\r\n-Set bridge priority (0-15) for the given MSTI:\r\n   settreeprio      <bridge> <mstid> <priority>\r\n-Set port external path cost for the CIST (0 = auto):\r\n   setportpathcost  <bridge> <port> <cost>\r\n-Set initial edge state:\r\n   setportadminedge <bridge> <port> {yes|no}\r\n-Enable auto transition to/from edge state:\r\n   setportautoedge  <bridge> <port> {yes|no}\r\n-Set p2p detection mode:\r\n   setportp2p       <bridge> <port> {yes|no|auto}\r\n-Restrict port ability to take Root role:\r\n   setportrestrrole <bridge> <port> {yes|no}\r\n-Restrict port ability to propagate received TCNs:\r\n   setportrestrtcn  <bridge> <port> {yes|no}\r\n-Try to get back from STP to rapid (RSTP/MSTP) mode:\r\n   portmcheck       <bridge> <port>\r\n-Set bpdu guard state:\r\n   setbpduguard     <bridge> <port> {yes|no}\r\n-Set port priority (0-15) for the given MSTI:\r\n   settreeportprio  <bridge> <port> <mstid> <priority>\r\n-Set port internal path cost for the given MSTI (0 = auto):\r\n   settreeportcost  <bridge> <port> <mstid> <cost>\r\n-Set port network state:\r\n   setportnetwork   <bridge> <port> {yes|no}\r\n-Set BPDU filter state:\r\n   setportbpdufilter <bridge> <port> {yes|no}\r\n-Level of verbosity:\r\n   debuglevel       <level>\r\n", '', 1)
2025-09-10 23:01:10,903 - test_protocol_conformance - INFO - 等待RSTP收敛...
2025-09-10 23:01:20,904 - test_protocol_conformance - INFO - === 第一阶段验证 ===
2025-09-10 23:01:21,311 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:01:21,462 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:01:21,463 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 23:01:21,464 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 23:01:21,464 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 23:01:21,464 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 23:01:21,965 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:01:21,966 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:01:21,967 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:01:21,967 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:01:21,967 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:01:21,967 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:01:22,361 - test_protocol_conformance - INFO - DUT当前优先级: 8192
2025-09-10 23:01:22,362 - test_protocol_conformance - WARNING - 优先级验证失败: 期望32768，实际8192
2025-09-10 23:01:22,362 - test_protocol_conformance - INFO -   br4: 角色=alternate
2025-09-10 23:01:22,362 - test_protocol_conformance - INFO - 
=== 第二阶段：DUT应成为根桥 ===
2025-09-10 23:01:22,362 - test_protocol_conformance - INFO - 设置DUT优先级为12288（最低）
2025-09-10 23:01:22,474 - test_protocol_conformance - INFO - OVS设置最低优先级结果: ('', '', 0)
2025-09-10 23:01:22,582 - test_protocol_conformance - INFO - 设置后优先级: 12288
2025-09-10 23:01:22,582 - test_protocol_conformance - INFO - 最低优先级设置验证通过
2025-09-10 23:01:22,582 - test_protocol_conformance - INFO - 等待RSTP重新收敛...
2025-09-10 23:01:32,583 - test_protocol_conformance - INFO - === 最终验证 ===
2025-09-10 23:01:33,002 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:01:33,159 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:01:33,160 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 23:01:33,160 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 23:01:33,160 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 23:01:33,160 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 23:01:33,628 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:01:33,628 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:01:33,629 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:01:33,629 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:01:33,629 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:01:33,629 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:01:33,921 - test_protocol_conformance - INFO -   br4: 角色=alternate, 状态=discarding
2025-09-10 23:01:33,921 - test_protocol_conformance - ERROR - DUT RSTP实现问题诊断:
2025-09-10 23:01:33,921 - test_protocol_conformance - ERROR - 1. DUT优先级已设置为12288（最低）
2025-09-10 23:01:33,922 - test_protocol_conformance - ERROR - 2. 但DUT仍有Root Port: False
2025-09-10 23:01:33,922 - test_protocol_conformance - ERROR - 3. Designated端口数: 0
2025-09-10 23:01:33,922 - test_protocol_conformance - ERROR - 可能的原因:
2025-09-10 23:01:33,922 - test_protocol_conformance - ERROR - - DUT的RSTP实现不符合标准
2025-09-10 23:01:33,922 - test_protocol_conformance - ERROR - - DUT没有正确处理优先级变化
2025-09-10 23:01:33,923 - test_protocol_conformance - ERROR - - DUT的BPDU发送/接收有问题
2025-09-10 23:01:33,969 - RSTPTest - INFO - 测试完成: test_root_bridge_election (耗时: 51.36秒)
2025-09-10 23:01:33,969 - RSTPTest - INFO - ============================================================

2025-09-10 23:01:33,973 - RSTPTest - INFO - ============================================================
2025-09-10 23:01:33,973 - RSTPTest - INFO - 开始测试: test_port_role_assignment
2025-09-10 23:01:33,973 - RSTPTest - INFO - ============================================================
2025-09-10 23:01:33,974 - test_protocol_conformance - INFO - 开始端口角色分配测试
2025-09-10 23:01:33,974 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 23:01:33,974 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 23:01:33,974 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 23:01:33,974 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 23:01:33,974 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 23:01:33,975 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 23:01:33,975 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 23:01:33,975 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-10 23:01:33,975 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-10 23:01:34,448 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-10 23:01:34,449 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 23:01:34,449 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 23:01:34,604 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-10 23:01:35,672 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-10 23:01:35,672 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 23:01:35,672 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 23:01:35,673 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 23:01:35,673 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-10 23:01:36,149 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-10 23:01:36,632 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 23:01:36,633 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 23:01:36,832 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 23:01:36,832 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 23:01:36,833 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 23:01:36,833 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 23:01:36,833 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 23:01:36,833 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 23:01:36,833 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 23:01:36,833 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 23:01:37,341 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 23:01:41,846 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:01:41,973 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:01:41,974 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 23:01:41,974 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 23:01:41,974 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 23:01:41,974 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 23:01:43,166 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 23:01:44,357 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 23:01:44,357 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 23:01:44,454 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 23:01:44,728 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 23:01:44,728 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 23:01:44,728 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 23:01:44,728 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 23:01:44,728 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 23:01:44,728 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 23:01:44,729 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 23:01:44,729 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 23:01:45,218 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 23:01:49,740 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:01:49,863 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:01:49,864 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 23:01:49,864 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 23:01:49,864 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 23:01:49,864 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 23:01:51,047 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 23:01:52,274 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 23:01:52,274 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 23:01:52,371 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 23:01:52,636 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 23:01:52,636 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 23:01:52,636 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-10 23:01:52,636 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-10 23:01:52,636 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令
2025-09-10 23:01:52,760 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ("8N10xiaol\r\n8N10xiaol\r\nUnknown command [setbridgeprio]\r\nUsage: mstpctl [options] [commands]\r\noptions:\r\n  -h | --help              Show this help text\r\n  -V | --version           Show version\r\n  -b | --batch <file>      Process file with mstpctl commands\r\n  -s | --stdin             Process mstpctl commands from stdin\r\n                           Make sure to provide newlines between\r\n                           commands. Won't work if `batch` is used\r\n  -i | --ignore            Ignore failing commands during batch\r\n                           processing\r\n  -f | --format <format>   Select output format (json, plain)\r\ncommands:\r\n-Add bridges to the mstpd's list:\r\n   addbridge        <bridge> [<bridge> ...]\r\n-Remove bridges from the mstpd's list:\r\n   delbridge        <bridge> [<bridge> ...]\r\n-Show bridge state for the CIST:\r\n   showbridge       [<bridge> ... [param]]\r\n-Show list of registered MSTIs:\r\n   showmstilist     <bridge>\r\n-Show MST ConfigId:\r\n   showmstconfid    <bridge>\r\n-Show VID-to-FID allocation table:\r\n   showvid2fid      <bridge>\r\n-Show FID-to-MSTID allocation table:\r\n   showfid2mstid    <bridge>\r\n-Show port state for the CIST:\r\n   showport         <bridge> [<port>...[port] [param]]\r\n-Show port state for the CIST:\r\n   showportparams   <bridge> <port> <param>...[param]\r\n-Show port detailed state for the CIST:\r\n   showportdetail   <bridge> [<port> ... [param]]\r\n-Show bridge state for the given MSTI:\r\n   showtree         <bridge> <mstid>\r\n-Show port detailed state for the given MSTI:\r\n   showtreeport     <bridge> <port> <mstid>\r\n-Set MST ConfigId elements: Revision Level (0-65535) and Name:\r\n   setmstconfid     <bridge> <revision> <name>\r\n-Set VIDs-to-FIDs allocation:\r\n   setvid2fid       <bridge> <FID>:<VIDs List> [<FID>:<VIDs List> ...]\r\n-Set FIDs-to-MSTIDs allocation:\r\n   setfid2mstid     <bridge> <mstid>:<FIDs List> [<mstid>:<FIDs List> ...]\r\n-Set bridge max age (6-40):\r\n   setmaxage        <bridge> <max_age>\r\n-Set bridge forward delay (4-30):\r\n   setfdelay        <bridge> <fwd_delay>\r\n-Set bridge max hops (6-40):\r\n   setmaxhops       <bridge> <max_hops>\r\n-Set bridge hello time (1-10):\r\n   sethello         <bridge> <hello_time>\r\n-Set bridge ageing time (10-1000000):\r\n   setageing        <bridge> <ageing_time>\r\n-Force Spanning Tree protocol version:\r\n   setforcevers     <bridge> {mstp|rstp|stp}\r\n-Set bridge transmit hold count (1-10):\r\n   settxholdcount   <bridge> <tx_hold_count>\r\n-Create new MSTI:\r\n   createtree       <bridge> <mstid>\r\n-Delete existing MSTI:\r\n   deletetree       <bridge> <mstid>\r\n-Set bridge priority (0-15) for the given MSTI:\r\n   settreeprio      <bridge> <mstid> <priority>\r\n-Set port external path cost for the CIST (0 = auto):\r\n   setportpathcost  <bridge> <port> <cost>\r\n-Set initial edge state:\r\n   setportadminedge <bridge> <port> {yes|no}\r\n-Enable auto transition to/from edge state:\r\n   setportautoedge  <bridge> <port> {yes|no}\r\n-Set p2p detection mode:\r\n   setportp2p       <bridge> <port> {yes|no|auto}\r\n-Restrict port ability to take Root role:\r\n   setportrestrrole <bridge> <port> {yes|no}\r\n-Restrict port ability to propagate received TCNs:\r\n   setportrestrtcn  <bridge> <port> {yes|no}\r\n-Try to get back from STP to rapid (RSTP/MSTP) mode:\r\n   portmcheck       <bridge> <port>\r\n-Set bpdu guard state:\r\n   setbpduguard     <bridge> <port> {yes|no}\r\n-Set port priority (0-15) for the given MSTI:\r\n   settreeportprio  <bridge> <port> <mstid> <priority>\r\n-Set port internal path cost for the given MSTI (0 = auto):\r\n   settreeportcost  <bridge> <port> <mstid> <cost>\r\n-Set port network state:\r\n   setportnetwork   <bridge> <port> {yes|no}\r\n-Set BPDU filter state:\r\n   setportbpdufilter <bridge> <port> {yes|no}\r\n-Level of verbosity:\r\n   debuglevel       <level>\r\n", '', 1)
2025-09-10 23:01:52,762 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 32768 (方法: ovs)
2025-09-10 23:01:52,762 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-10 23:01:52,884 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-10 23:01:56,025 - test_protocol_conformance - INFO - 检查DUT的OVS网桥接口...
2025-09-10 23:01:56,081 - test_protocol_conformance - INFO - OVS配置状态:
('8c812ea9-3b0c-46a1-bd3c-ef3904d38c1a\n    Bridge SE_ETH4\n        Port SE_ETH4\n            Interface SE_ETH4\n                type: internal\n    Bridge SE_ETH2\n        Port SE_ETH2\n            Interface SE_ETH2\n                type: internal\n        Port br3\n            Interface br3\n        Port br4\n            Interface br4\n    Bridge SE_ETH6\n        Port SE_ETH6\n            Interface SE_ETH6\n                type: internal\n    Bridge rstp0\n        Port rstp0\n            Interface rstp0\n                type: internal\n    Bridge br0\n        Port eth0\n            Interface eth0\n                error: "could not open network device eth0 (No such device)"\n        Port br0\n            Interface br0\n                type: internal\n                error: "could not add network device br0 to ofproto (File exists)"\n        Port eth2\n            Interface eth2\n                error: "could not open network device eth2 (No such device)"\n    ovs_version: "3.1.0"\n', '', 0)
2025-09-10 23:01:56,185 - test_protocol_conformance - INFO - SE_ETH2 网桥端口:
('br3\nbr4\n', '', 0)
2025-09-10 23:01:56,289 - test_protocol_conformance - INFO - SE_ETH2 STP状态:
('true\n', '', 0)
2025-09-10 23:01:56,392 - test_protocol_conformance - INFO - SE_ETH2 端口信息:
('OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7\nn_tables:254, n_buffers:0\ncapabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP\nactions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst\n 1(br3): addr:90:12:10:b5:7d:f7\n     config:     0\n     state:      LINK_DOWN\n     current:    AUTO_NEG\n     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM\n     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM\n     speed: 0 Mbps now, 1000 Mbps max\n 2(br4): addr:90:12:10:b5:7d:f7\n     config:     0\n     state:      STP_FORWARD\n     current:    1GB-FD AUTO_NEG\n     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM\n     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM\n     speed: 1000 Mbps now, 1000 Mbps max\n LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7\n     config:     0\n     state:      0\n     speed: 0 Mbps now, 0 Mbps max\nOFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0\n', '', 0)
2025-09-10 23:01:56,393 - test_protocol_conformance - INFO - 获取初始网桥状态...
2025-09-10 23:01:56,858 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:01:57,010 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:01:57,011 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 23:01:57,011 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 23:01:57,011 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 23:01:57,012 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 23:01:57,472 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:01:57,472 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:01:57,473 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:01:57,473 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:01:57,473 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:01:57,473 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:01:57,761 - test_protocol_conformance - INFO - Bridge ID: 8000/6e:b3:08:fa:01:34
2025-09-10 23:01:57,761 - test_protocol_conformance - INFO - Root ID: unknown
2025-09-10 23:01:57,761 - test_protocol_conformance - INFO - Root Port: br3
2025-09-10 23:01:57,762 - test_protocol_conformance - INFO - 协议版本: rstp
2025-09-10 23:01:57,762 - test_protocol_conformance - INFO - 端口 br3: 角色=root, 状态=disabled, 成本=0
2025-09-10 23:01:57,762 - test_protocol_conformance - INFO - 端口 br4: 角色=alternate, 状态=discarding, 成本=0
2025-09-10 23:01:57,762 - test_protocol_conformance - INFO - 端口 SE_ETH2: 角色=unknown, 状态=disabled, 成本=0
2025-09-10 23:01:57,762 - test_protocol_conformance - INFO - 等待网络收敛...
2025-09-10 23:01:57,762 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 23:01:58,226 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:01:58,378 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:01:58,379 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 23:01:58,379 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 23:01:58,379 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 23:01:58,379 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 23:01:58,848 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:01:58,848 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:01:58,849 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:01:58,849 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:01:58,849 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:01:58,849 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:01:59,140 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.38秒
2025-09-10 23:01:59,598 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:01:59,746 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:01:59,747 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 23:01:59,747 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 23:01:59,747 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 23:01:59,747 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 23:02:00,211 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:02:00,211 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:02:00,212 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:02:00,212 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:02:00,213 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:02:00,213 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:02:00,500 - test_protocol_conformance - INFO - 收敛后的端口状态:
2025-09-10 23:02:00,501 - test_protocol_conformance - INFO - 端口 br3: 角色=root, 状态=disabled, 成本=0
2025-09-10 23:02:00,501 - test_protocol_conformance - INFO - 端口 br4: 角色=alternate, 状态=discarding, 成本=0
2025-09-10 23:02:00,501 - test_protocol_conformance - INFO - 端口 SE_ETH2: 角色=unknown, 状态=disabled, 成本=0
2025-09-10 23:02:00,958 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:02:01,110 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:02:01,111 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 23:02:01,111 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 23:02:01,111 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 23:02:01,111 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 23:02:01,579 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:02:01,580 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:02:01,581 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:02:01,581 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:02:01,582 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:02:01,582 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:02:01,869 - RSTPAnalyzer_DUT - INFO - Root ID为unknown，判定为非根桥
2025-09-10 23:02:01,870 - test_protocol_conformance - INFO - is_root_bridge() 返回: False
2025-09-10 23:02:01,870 - test_protocol_conformance - INFO - 有Root Port: False
2025-09-10 23:02:01,870 - test_protocol_conformance - INFO - 最终判定 - DUT是根桥: False
2025-09-10 23:02:01,870 - test_protocol_conformance - INFO - 活动端口数: 1
2025-09-10 23:02:01,871 - test_protocol_conformance - INFO - 禁用端口: ['br3', 'SE_ETH2']
2025-09-10 23:02:01,871 - test_protocol_conformance - WARNING - 活动端口不足，尝试启用禁用的端口...
2025-09-10 23:02:01,871 - test_protocol_conformance - INFO - 尝试启用端口 br3
2025-09-10 23:02:02,074 - test_protocol_conformance - INFO - 尝试启用端口 SE_ETH2
2025-09-10 23:02:02,381 - test_protocol_conformance - INFO - 已将端口 SE_ETH2 添加到OVS网桥 SE_ETH2
2025-09-10 23:02:07,809 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:02:07,962 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:02:07,964 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 23:02:07,964 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 23:02:07,964 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 23:02:07,964 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 23:02:08,441 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:02:08,442 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:02:08,443 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:02:08,443 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:02:08,443 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:02:08,444 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:02:08,728 - test_protocol_conformance - INFO - 重新配置后 - 活动端口数: 1
2025-09-10 23:02:08,729 - test_protocol_conformance - INFO - 重新配置后 - 禁用端口: ['br3', 'SE_ETH2']
2025-09-10 23:02:08,729 - test_protocol_conformance - INFO - 端口角色分布: {<PortRole.ALTERNATE: 'alternate'>: ['br4']}
2025-09-10 23:02:08,729 - test_protocol_conformance - WARNING - 只有一个活动端口，进行单端口验证
2025-09-10 23:02:08,729 - test_protocol_conformance - INFO - 单端口 br4: 角色=PortRole.ALTERNATE, 状态=PortState.DISCARDING
2025-09-10 23:02:08,776 - RSTPTest - INFO - 测试完成: test_port_role_assignment (耗时: 34.80秒)
2025-09-10 23:02:08,777 - RSTPTest - INFO - ============================================================

2025-09-10 23:02:08,780 - RSTPTest - INFO - ============================================================
2025-09-10 23:02:08,780 - RSTPTest - INFO - 开始测试: test_rstp_protocol_verification
2025-09-10 23:02:08,780 - RSTPTest - INFO - ============================================================
2025-09-10 23:02:08,781 - test_protocol_conformance - INFO - 开始RSTP协议验证
2025-09-10 23:02:08,781 - test_protocol_conformance - INFO - === 检查OVS配置 ===
2025-09-10 23:02:08,836 - test_protocol_conformance - INFO - 当前OVS配置:
8c812ea9-3b0c-46a1-bd3c-ef3904d38c1a
    Bridge SE_ETH4
        Port SE_ETH4
            Interface SE_ETH4
                type: internal
    Bridge SE_ETH2
        Port SE_ETH2
            Interface SE_ETH2
                type: internal
        Port br3
            Interface br3
        Port br4
            Interface br4
    Bridge SE_ETH6
        Port SE_ETH6
            Interface SE_ETH6
                type: internal
    Bridge rstp0
        Port rstp0
            Interface rstp0
          
2025-09-10 23:02:08,937 - test_protocol_conformance - INFO - 使用现有网桥 SE_ETH2，端口: ['br3', 'br4']
2025-09-10 23:02:08,937 - test_protocol_conformance - INFO - === 配置RSTP（确保是RSTP而不是STP）===
2025-09-10 23:02:10,160 - test_protocol_conformance - INFO - 启用RSTP...
2025-09-10 23:02:10,224 - test_protocol_conformance - INFO - ✓ RSTP已启用
2025-09-10 23:02:10,225 - test_protocol_conformance - INFO - 设置RSTP参数...
2025-09-10 23:02:10,335 - test_protocol_conformance - INFO - ✓ 设置: rstp-hello-time=2
2025-09-10 23:02:10,444 - test_protocol_conformance - INFO - ✓ 设置: rstp-forward-delay=4
2025-09-10 23:02:10,553 - test_protocol_conformance - INFO - ✓ 设置: rstp-max-age=6
2025-09-10 23:02:10,656 - test_protocol_conformance - INFO - ✓ 设置: rstp-priority=32768
2025-09-10 23:02:10,764 - test_protocol_conformance - INFO - ✓ 设置: rstp-force-protocol-version=2
2025-09-10 23:02:11,076 - test_protocol_conformance - INFO - ✓ 端口 br3 RSTP已启用
2025-09-10 23:02:11,408 - test_protocol_conformance - INFO - ✓ 端口 br4 RSTP已启用
2025-09-10 23:02:11,504 - test_protocol_conformance - INFO - 等待RSTP初始化...
2025-09-10 23:02:16,505 - test_protocol_conformance - INFO - === 验证RSTP配置 ===
2025-09-10 23:02:16,558 - test_protocol_conformance - INFO - RSTP状态:
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     6s
  stp-fwd-delay   4s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:02:16,559 - test_protocol_conformance - INFO - ✓ 使用RSTP时间参数
2025-09-10 23:02:16,559 - test_protocol_conformance - INFO - === 创建测试拓扑 ===
2025-09-10 23:02:16,559 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 23:02:16,559 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 23:02:16,559 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 23:02:16,560 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 23:02:16,560 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 23:02:16,560 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 23:02:16,560 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 23:02:16,560 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-10 23:02:16,560 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-10 23:02:17,056 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-10 23:02:17,056 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 23:02:17,056 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 23:02:17,191 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-10 23:02:18,246 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-10 23:02:18,246 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 23:02:18,247 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 23:02:18,247 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 23:02:18,248 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-10 23:02:18,729 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-10 23:02:19,216 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 23:02:19,217 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 23:02:19,408 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 23:02:19,408 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 23:02:19,409 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 23:02:19,409 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 23:02:19,409 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 23:02:19,410 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 23:02:19,410 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 23:02:19,410 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 23:02:19,959 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 23:03:54,019 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:04:04,097 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:04:04,097 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 23:04:04,097 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 23:04:04,098 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 23:04:04,098 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 23:05:05,759 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 23:05:59,501 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 23:05:59,501 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 23:05:59,595 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 23:06:09,808 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 23:06:09,808 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 23:06:09,809 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 23:06:09,809 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 23:06:09,809 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 23:06:09,810 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 23:06:09,810 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 23:06:09,810 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 23:06:10,327 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 23:06:14,834 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:06:14,962 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:06:14,963 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 23:06:14,963 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 23:06:14,963 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 23:06:14,963 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 23:06:16,141 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 23:06:17,358 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 23:06:17,359 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 23:06:17,453 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 23:06:17,719 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 23:06:17,719 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 23:06:17,720 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-10 23:06:22,720 - test_protocol_conformance - INFO - === 捕获BPDU ===
2025-09-10 23:06:22,721 - test_protocol_conformance - INFO - 在 SE_ETH2 上捕获BPDU...
2025-09-10 23:06:22,721 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: SE_ETH2, 数量: 10)
2025-09-10 23:06:32,809 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-10 23:06:32,809 - test_protocol_conformance - INFO - 在 br3 上捕获BPDU...
2025-09-10 23:06:32,809 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br3, 数量: 10)
2025-09-10 23:06:42,944 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-10 23:06:42,945 - test_protocol_conformance - INFO - 在 br4 上捕获BPDU...
2025-09-10 23:06:42,945 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br4, 数量: 10)
2025-09-10 23:06:53,088 - RSTPAnalyzer_DUT - INFO - 捕获到 4 个BPDU包
2025-09-10 23:06:53,088 - test_protocol_conformance - INFO - ✓ 捕获到 4 个BPDU
2025-09-10 23:06:53,089 - test_protocol_conformance - INFO - === 分析BPDU ===
2025-09-10 23:06:53,089 - test_protocol_conformance - INFO - 第一个BPDU信息: {'timestamp': '23:06:47.869284', 'raw': '23:06:47.869284 00:e0:0c:25:0c:01 > 01:80:c2:00:00:00, 802.3, length 39: LLC, dsap STP (0x42) Individual, ssap STP (0x42) Command, ctrl 0x03: STP 802.1w, Rapid STP, Flags [Learn, Forward, Agreement], bridge-id 8000.6e:b3:08:fa:01:34.8002, length 36', 'is_rstp': False}
2025-09-10 23:06:53,089 - test_protocol_conformance - INFO - BPDU统计: RSTP=0, STP=4
2025-09-10 23:06:53,090 - test_protocol_conformance - WARNING - 检测到更多STP BPDU
2025-09-10 23:06:53,186 - test_protocol_conformance - INFO - rstp_enable状态: true
2025-09-10 23:06:53,287 - test_protocol_conformance - INFO - stp_enable状态: true
2025-09-10 23:06:53,386 - test_protocol_conformance - WARNING - OVS配置为RSTP但发送STP BPDU，可能是实现限制
2025-09-10 23:06:53,387 - test_protocol_conformance - INFO - 基于配置判断为RSTP
2025-09-10 23:06:53,387 - test_protocol_conformance - INFO - ✓ RSTP协议验证通过（检测到 4 个RSTP BPDU）
2025-09-10 23:06:53,388 - RSTPTest - INFO - 测试完成: test_rstp_protocol_verification (耗时: 284.61秒)
2025-09-10 23:06:53,388 - RSTPTest - INFO - ============================================================

2025-09-10 23:06:53,389 - RSTPTest - INFO - ============================================================
2025-09-10 23:06:53,390 - RSTPTest - INFO - 开始测试: test_alternate_port_verification
2025-09-10 23:06:53,390 - RSTPTest - INFO - ============================================================
2025-09-10 23:06:53,390 - test_protocol_conformance - INFO - 开始Alternate Port验证测试
2025-09-10 23:06:53,391 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 23:06:53,391 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 23:06:53,391 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 23:06:53,391 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 23:06:53,391 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 23:06:53,391 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 23:06:53,392 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 23:06:53,392 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-10 23:06:53,392 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-10 23:06:53,915 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-10 23:06:53,915 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 23:06:53,915 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 23:06:54,071 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-10 23:06:55,394 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-10 23:06:55,394 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 23:06:55,395 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 23:06:55,395 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 23:06:55,395 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-10 23:06:55,875 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-10 23:06:56,359 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 23:06:56,359 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 23:06:56,551 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 23:06:56,551 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 23:06:56,551 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 23:06:56,552 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 23:06:56,552 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 23:06:56,552 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 23:06:56,552 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 23:06:56,552 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 23:07:12,205 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 23:07:16,712 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:07:16,841 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:07:16,841 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 23:07:16,841 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 23:07:16,842 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 23:07:16,842 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 23:07:18,010 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 23:07:19,195 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 23:07:19,196 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 23:07:19,291 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 23:07:19,554 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 23:07:19,555 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 23:07:19,555 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 23:07:19,555 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 23:07:19,555 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 23:07:19,555 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 23:07:19,555 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 23:07:19,556 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 23:07:20,053 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 23:07:24,551 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:07:24,683 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:07:24,683 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 23:07:24,684 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 23:07:24,684 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 23:07:24,684 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 23:07:25,861 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 23:07:27,071 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 23:07:27,071 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 23:07:27,168 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 23:07:27,428 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 23:07:27,429 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 23:07:27,429 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-10 23:07:27,429 - test_protocol_conformance - INFO - 设置网桥优先级
2025-09-10 23:07:27,429 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 4096 (方法: mstpd)
2025-09-10 23:07:27,430 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令
2025-09-10 23:07:27,557 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ("8N10xiaol\r\n8N10xiaol\r\nUnknown command [setbridgeprio]\r\nUsage: mstpctl [options] [commands]\r\noptions:\r\n  -h | --help              Show this help text\r\n  -V | --version           Show version\r\n  -b | --batch <file>      Process file with mstpctl commands\r\n  -s | --stdin             Process mstpctl commands from stdin\r\n                           Make sure to provide newlines between\r\n                           commands. Won't work if `batch` is used\r\n  -i | --ignore            Ignore failing commands during batch\r\n                           processing\r\n  -f | --format <format>   Select output format (json, plain)\r\ncommands:\r\n-Add bridges to the mstpd's list:\r\n   addbridge        <bridge> [<bridge> ...]\r\n-Remove bridges from the mstpd's list:\r\n   delbridge        <bridge> [<bridge> ...]\r\n-Show bridge state for the CIST:\r\n   showbridge       [<bridge> ... [param]]\r\n-Show list of registered MSTIs:\r\n   showmstilist     <bridge>\r\n-Show MST ConfigId:\r\n   showmstconfid    <bridge>\r\n-Show VID-to-FID allocation table:\r\n   showvid2fid      <bridge>\r\n-Show FID-to-MSTID allocation table:\r\n   showfid2mstid    <bridge>\r\n-Show port state for the CIST:\r\n   showport         <bridge> [<port>...[port] [param]]\r\n-Show port state for the CIST:\r\n   showportparams   <bridge> <port> <param>...[param]\r\n-Show port detailed state for the CIST:\r\n   showportdetail   <bridge> [<port> ... [param]]\r\n-Show bridge state for the given MSTI:\r\n   showtree         <bridge> <mstid>\r\n-Show port detailed state for the given MSTI:\r\n   showtreeport     <bridge> <port> <mstid>\r\n-Set MST ConfigId elements: Revision Level (0-65535) and Name:\r\n   setmstconfid     <bridge> <revision> <name>\r\n-Set VIDs-to-FIDs allocation:\r\n   setvid2fid       <bridge> <FID>:<VIDs List> [<FID>:<VIDs List> ...]\r\n-Set FIDs-to-MSTIDs allocation:\r\n   setfid2mstid     <bridge> <mstid>:<FIDs List> [<mstid>:<FIDs List> ...]\r\n-Set bridge max age (6-40):\r\n   setmaxage        <bridge> <max_age>\r\n-Set bridge forward delay (4-30):\r\n   setfdelay        <bridge> <fwd_delay>\r\n-Set bridge max hops (6-40):\r\n   setmaxhops       <bridge> <max_hops>\r\n-Set bridge hello time (1-10):\r\n   sethello         <bridge> <hello_time>\r\n-Set bridge ageing time (10-1000000):\r\n   setageing        <bridge> <ageing_time>\r\n-Force Spanning Tree protocol version:\r\n   setforcevers     <bridge> {mstp|rstp|stp}\r\n-Set bridge transmit hold count (1-10):\r\n   settxholdcount   <bridge> <tx_hold_count>\r\n-Create new MSTI:\r\n   createtree       <bridge> <mstid>\r\n-Delete existing MSTI:\r\n   deletetree       <bridge> <mstid>\r\n-Set bridge priority (0-15) for the given MSTI:\r\n   settreeprio      <bridge> <mstid> <priority>\r\n-Set port external path cost for the CIST (0 = auto):\r\n   setportpathcost  <bridge> <port> <cost>\r\n-Set initial edge state:\r\n   setportadminedge <bridge> <port> {yes|no}\r\n-Enable auto transition to/from edge state:\r\n   setportautoedge  <bridge> <port> {yes|no}\r\n-Set p2p detection mode:\r\n   setportp2p       <bridge> <port> {yes|no|auto}\r\n-Restrict port ability to take Root role:\r\n   setportrestrrole <bridge> <port> {yes|no}\r\n-Restrict port ability to propagate received TCNs:\r\n   setportrestrtcn  <bridge> <port> {yes|no}\r\n-Try to get back from STP to rapid (RSTP/MSTP) mode:\r\n   portmcheck       <bridge> <port>\r\n-Set bpdu guard state:\r\n   setbpduguard     <bridge> <port> {yes|no}\r\n-Set port priority (0-15) for the given MSTI:\r\n   settreeportprio  <bridge> <port> <mstid> <priority>\r\n-Set port internal path cost for the given MSTI (0 = auto):\r\n   settreeportcost  <bridge> <port> <mstid> <cost>\r\n-Set port network state:\r\n   setportnetwork   <bridge> <port> {yes|no}\r\n-Set BPDU filter state:\r\n   setportbpdufilter <bridge> <port> {yes|no}\r\n-Level of verbosity:\r\n   debuglevel       <level>\r\n", '', 1)
2025-09-10 23:07:27,559 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 8192 (方法: ovs)
2025-09-10 23:07:27,559 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-10 23:07:27,675 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-10 23:07:27,851 - NetworkTopology_TestNode2 - INFO - TestNode2: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-10 23:07:27,851 - NetworkTopology_TestNode2 - INFO - TestNode2: 执行mstpd设置优先级命令
2025-09-10 23:07:27,977 - NetworkTopology_TestNode2 - INFO - TestNode2: mstpd设置优先级结果: ("8N10xiaol\r\n8N10xiaol\r\nUnknown command [setbridgeprio]\r\nUsage: mstpctl [options] [commands]\r\noptions:\r\n  -h | --help              Show this help text\r\n  -V | --version           Show version\r\n  -b | --batch <file>      Process file with mstpctl commands\r\n  -s | --stdin             Process mstpctl commands from stdin\r\n                           Make sure to provide newlines between\r\n                           commands. Won't work if `batch` is used\r\n  -i | --ignore            Ignore failing commands during batch\r\n                           processing\r\n  -f | --format <format>   Select output format (json, plain)\r\ncommands:\r\n-Add bridges to the mstpd's list:\r\n   addbridge        <bridge> [<bridge> ...]\r\n-Remove bridges from the mstpd's list:\r\n   delbridge        <bridge> [<bridge> ...]\r\n-Show bridge state for the CIST:\r\n   showbridge       [<bridge> ... [param]]\r\n-Show list of registered MSTIs:\r\n   showmstilist     <bridge>\r\n-Show MST ConfigId:\r\n   showmstconfid    <bridge>\r\n-Show VID-to-FID allocation table:\r\n   showvid2fid      <bridge>\r\n-Show FID-to-MSTID allocation table:\r\n   showfid2mstid    <bridge>\r\n-Show port state for the CIST:\r\n   showport         <bridge> [<port>...[port] [param]]\r\n-Show port state for the CIST:\r\n   showportparams   <bridge> <port> <param>...[param]\r\n-Show port detailed state for the CIST:\r\n   showportdetail   <bridge> [<port> ... [param]]\r\n-Show bridge state for the given MSTI:\r\n   showtree         <bridge> <mstid>\r\n-Show port detailed state for the given MSTI:\r\n   showtreeport     <bridge> <port> <mstid>\r\n-Set MST ConfigId elements: Revision Level (0-65535) and Name:\r\n   setmstconfid     <bridge> <revision> <name>\r\n-Set VIDs-to-FIDs allocation:\r\n   setvid2fid       <bridge> <FID>:<VIDs List> [<FID>:<VIDs List> ...]\r\n-Set FIDs-to-MSTIDs allocation:\r\n   setfid2mstid     <bridge> <mstid>:<FIDs List> [<mstid>:<FIDs List> ...]\r\n-Set bridge max age (6-40):\r\n   setmaxage        <bridge> <max_age>\r\n-Set bridge forward delay (4-30):\r\n   setfdelay        <bridge> <fwd_delay>\r\n-Set bridge max hops (6-40):\r\n   setmaxhops       <bridge> <max_hops>\r\n-Set bridge hello time (1-10):\r\n   sethello         <bridge> <hello_time>\r\n-Set bridge ageing time (10-1000000):\r\n   setageing        <bridge> <ageing_time>\r\n-Force Spanning Tree protocol version:\r\n   setforcevers     <bridge> {mstp|rstp|stp}\r\n-Set bridge transmit hold count (1-10):\r\n   settxholdcount   <bridge> <tx_hold_count>\r\n-Create new MSTI:\r\n   createtree       <bridge> <mstid>\r\n-Delete existing MSTI:\r\n   deletetree       <bridge> <mstid>\r\n-Set bridge priority (0-15) for the given MSTI:\r\n   settreeprio      <bridge> <mstid> <priority>\r\n-Set port external path cost for the CIST (0 = auto):\r\n   setportpathcost  <bridge> <port> <cost>\r\n-Set initial edge state:\r\n   setportadminedge <bridge> <port> {yes|no}\r\n-Enable auto transition to/from edge state:\r\n   setportautoedge  <bridge> <port> {yes|no}\r\n-Set p2p detection mode:\r\n   setportp2p       <bridge> <port> {yes|no|auto}\r\n-Restrict port ability to take Root role:\r\n   setportrestrrole <bridge> <port> {yes|no}\r\n-Restrict port ability to propagate received TCNs:\r\n   setportrestrtcn  <bridge> <port> {yes|no}\r\n-Try to get back from STP to rapid (RSTP/MSTP) mode:\r\n   portmcheck       <bridge> <port>\r\n-Set bpdu guard state:\r\n   setbpduguard     <bridge> <port> {yes|no}\r\n-Set port priority (0-15) for the given MSTI:\r\n   settreeportprio  <bridge> <port> <mstid> <priority>\r\n-Set port internal path cost for the given MSTI (0 = auto):\r\n   settreeportcost  <bridge> <port> <mstid> <cost>\r\n-Set port network state:\r\n   setportnetwork   <bridge> <port> {yes|no}\r\n-Set BPDU filter state:\r\n   setportbpdufilter <bridge> <port> {yes|no}\r\n-Level of verbosity:\r\n   debuglevel       <level>\r\n", '', 1)
2025-09-10 23:07:27,979 - test_protocol_conformance - INFO - 等待RSTP收敛...
2025-09-10 23:07:27,979 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 23:07:28,393 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:07:28,544 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:07:28,545 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 23:07:28,546 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 23:07:28,546 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 23:07:28,546 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 23:07:29,010 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:07:29,010 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:07:29,011 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:07:29,012 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:07:29,012 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:07:29,012 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:07:29,299 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.32秒
2025-09-10 23:07:29,764 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:07:29,921 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:07:29,922 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 23:07:29,922 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 23:07:29,923 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 23:07:29,923 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 23:07:30,386 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:07:30,387 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:07:30,388 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:07:30,388 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:07:30,388 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:07:30,388 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:07:30,675 - test_protocol_conformance - INFO - DUT桥信息: BridgeInfo(bridge_id='2000/90:12:10:b5:7d:f7', root_id='2000/90:12:10:b5:7d:f7', root_port='', root_path_cost=0, protocol_version='rstp', hello_time=2, forward_delay=15, max_age=20, topology_changes=0, ports={'br3': PortInfo(name='br3', role=<PortRole.DESIGNATED: 'designated'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'br4': PortInfo(name='br4', role=<PortRole.DESIGNATED: 'designated'>, state=<PortState.FORWARDING: 'forwarding'>, path_cost=0, designated_bridge='', designated_port=''), 'SE_ETH2': PortInfo(name='SE_ETH2', role=<PortRole.DESIGNATED: 'designated'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')})
2025-09-10 23:07:31,142 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:07:31,297 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:07:31,298 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 23:07:31,298 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 23:07:31,298 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 23:07:31,299 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 23:07:31,763 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:07:31,764 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:07:31,765 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:07:31,765 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:07:31,765 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:07:31,766 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:07:32,056 - RSTPAnalyzer_DUT - INFO - 根桥检查: bridge_id='2000/90:12:10:b5:7d:f7', root_id='2000/90:12:10:b5:7d:f7', is_root=True
2025-09-10 23:07:32,056 - test_protocol_conformance - INFO - DUT根桥判断结果: True
2025-09-10 23:07:32,056 - test_protocol_conformance - INFO - DUT桥信息 - bridge_id: '2000/90:12:10:b5:7d:f7', root_id: '2000/90:12:10:b5:7d:f7'
2025-09-10 23:07:32,098 - RSTPTest - INFO - 测试完成: test_alternate_port_verification (耗时: 38.71秒)
2025-09-10 23:07:32,098 - RSTPTest - INFO - ============================================================

2025-09-10 23:07:32,101 - RSTPTest - INFO - ============================================================
2025-09-10 23:07:32,101 - RSTPTest - INFO - 开始测试: test_port_state_transitions
2025-09-10 23:07:32,102 - RSTPTest - INFO - ============================================================
2025-09-10 23:07:32,102 - test_protocol_conformance - INFO - 开始端口状态转换测试
2025-09-10 23:07:32,103 - NetworkTopology - INFO - 创建RSTP线性拓扑...
2025-09-10 23:07:32,103 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 23:07:32,103 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 23:07:32,103 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 23:07:32,104 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 23:07:32,104 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 23:07:32,104 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 23:07:32,104 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-10 23:07:32,105 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-10 23:07:32,575 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-10 23:07:32,575 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 23:07:32,575 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 23:07:32,730 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-10 23:07:33,798 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"32768
2025-09-10 23:07:33,798 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 23:07:33,799 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 23:07:33,799 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br4']
2025-09-10 23:07:33,799 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-10 23:07:34,274 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 23:07:34,275 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 23:07:34,466 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 23:07:34,467 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 23:07:34,467 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 23:07:34,467 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 23:07:34,467 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 23:07:34,467 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 23:07:34,467 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 23:07:34,468 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 23:07:34,958 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 23:07:39,440 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:07:39,566 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:07:39,566 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 23:07:39,567 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 23:07:39,567 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 23:07:39,567 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 23:07:40,757 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 23:07:41,941 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 23:07:41,941 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 23:07:42,035 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 23:07:42,293 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 23:07:42,294 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 23:07:42,294 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 23:07:42,294 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 23:07:42,294 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 23:07:42,295 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 23:07:42,295 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 23:07:42,295 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 23:07:42,798 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 23:07:47,288 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:07:47,424 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:07:47,424 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 23:07:47,424 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 23:07:47,424 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0']
2025-09-10 23:07:47,425 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 23:07:48,595 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 23:07:48,596 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 23:07:48,691 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 23:07:48,951 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 23:07:48,951 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 23:07:48,951 - NetworkTopology - INFO - 线性拓扑创建完成
2025-09-10 23:07:48,951 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 4096 (方法: mstpd)
2025-09-10 23:07:48,952 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令
2025-09-10 23:07:49,075 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ("8N10xiaol\r\n8N10xiaol\r\nUnknown command [setbridgeprio]\r\nUsage: mstpctl [options] [commands]\r\noptions:\r\n  -h | --help              Show this help text\r\n  -V | --version           Show version\r\n  -b | --batch <file>      Process file with mstpctl commands\r\n  -s | --stdin             Process mstpctl commands from stdin\r\n                           Make sure to provide newlines between\r\n                           commands. Won't work if `batch` is used\r\n  -i | --ignore            Ignore failing commands during batch\r\n                           processing\r\n  -f | --format <format>   Select output format (json, plain)\r\ncommands:\r\n-Add bridges to the mstpd's list:\r\n   addbridge        <bridge> [<bridge> ...]\r\n-Remove bridges from the mstpd's list:\r\n   delbridge        <bridge> [<bridge> ...]\r\n-Show bridge state for the CIST:\r\n   showbridge       [<bridge> ... [param]]\r\n-Show list of registered MSTIs:\r\n   showmstilist     <bridge>\r\n-Show MST ConfigId:\r\n   showmstconfid    <bridge>\r\n-Show VID-to-FID allocation table:\r\n   showvid2fid      <bridge>\r\n-Show FID-to-MSTID allocation table:\r\n   showfid2mstid    <bridge>\r\n-Show port state for the CIST:\r\n   showport         <bridge> [<port>...[port] [param]]\r\n-Show port state for the CIST:\r\n   showportparams   <bridge> <port> <param>...[param]\r\n-Show port detailed state for the CIST:\r\n   showportdetail   <bridge> [<port> ... [param]]\r\n-Show bridge state for the given MSTI:\r\n   showtree         <bridge> <mstid>\r\n-Show port detailed state for the given MSTI:\r\n   showtreeport     <bridge> <port> <mstid>\r\n-Set MST ConfigId elements: Revision Level (0-65535) and Name:\r\n   setmstconfid     <bridge> <revision> <name>\r\n-Set VIDs-to-FIDs allocation:\r\n   setvid2fid       <bridge> <FID>:<VIDs List> [<FID>:<VIDs List> ...]\r\n-Set FIDs-to-MSTIDs allocation:\r\n   setfid2mstid     <bridge> <mstid>:<FIDs List> [<mstid>:<FIDs List> ...]\r\n-Set bridge max age (6-40):\r\n   setmaxage        <bridge> <max_age>\r\n-Set bridge forward delay (4-30):\r\n   setfdelay        <bridge> <fwd_delay>\r\n-Set bridge max hops (6-40):\r\n   setmaxhops       <bridge> <max_hops>\r\n-Set bridge hello time (1-10):\r\n   sethello         <bridge> <hello_time>\r\n-Set bridge ageing time (10-1000000):\r\n   setageing        <bridge> <ageing_time>\r\n-Force Spanning Tree protocol version:\r\n   setforcevers     <bridge> {mstp|rstp|stp}\r\n-Set bridge transmit hold count (1-10):\r\n   settxholdcount   <bridge> <tx_hold_count>\r\n-Create new MSTI:\r\n   createtree       <bridge> <mstid>\r\n-Delete existing MSTI:\r\n   deletetree       <bridge> <mstid>\r\n-Set bridge priority (0-15) for the given MSTI:\r\n   settreeprio      <bridge> <mstid> <priority>\r\n-Set port external path cost for the CIST (0 = auto):\r\n   setportpathcost  <bridge> <port> <cost>\r\n-Set initial edge state:\r\n   setportadminedge <bridge> <port> {yes|no}\r\n-Enable auto transition to/from edge state:\r\n   setportautoedge  <bridge> <port> {yes|no}\r\n-Set p2p detection mode:\r\n   setportp2p       <bridge> <port> {yes|no|auto}\r\n-Restrict port ability to take Root role:\r\n   setportrestrrole <bridge> <port> {yes|no}\r\n-Restrict port ability to propagate received TCNs:\r\n   setportrestrtcn  <bridge> <port> {yes|no}\r\n-Try to get back from STP to rapid (RSTP/MSTP) mode:\r\n   portmcheck       <bridge> <port>\r\n-Set bpdu guard state:\r\n   setbpduguard     <bridge> <port> {yes|no}\r\n-Set port priority (0-15) for the given MSTI:\r\n   settreeportprio  <bridge> <port> <mstid> <priority>\r\n-Set port internal path cost for the given MSTI (0 = auto):\r\n   settreeportcost  <bridge> <port> <mstid> <cost>\r\n-Set port network state:\r\n   setportnetwork   <bridge> <port> {yes|no}\r\n-Set BPDU filter state:\r\n   setportbpdufilter <bridge> <port> {yes|no}\r\n-Level of verbosity:\r\n   debuglevel       <level>\r\n", '', 1)
2025-09-10 23:07:49,077 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 8192 (方法: ovs)
2025-09-10 23:07:49,077 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-10 23:07:49,199 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-10 23:07:49,343 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-10 23:07:49,344 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 23:07:49,809 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:07:49,960 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:07:49,961 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 23:07:49,962 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 23:07:49,962 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 23:07:49,962 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 23:07:50,417 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:07:50,418 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:07:50,419 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:07:50,419 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:07:50,419 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:07:50,419 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:07:50,706 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.36秒
2025-09-10 23:07:51,168 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:07:51,320 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:07:51,321 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 23:07:51,322 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 23:07:51,322 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 23:07:51,322 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 23:07:51,786 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:07:51,786 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:07:51,787 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:07:51,788 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:07:51,788 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:07:51,788 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:07:52,075 - test_protocol_conformance - INFO - 使用端口br4进行状态转换测试
2025-09-10 23:07:52,075 - test_protocol_conformance - INFO - 禁用端口br4
2025-09-10 23:07:52,075 - FaultInjector_DUT - INFO - 断开链路: br4
2025-09-10 23:08:03,637 - FaultInjector_DUT - INFO - 链路已断开: br4
2025-09-10 23:08:09,064 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:08:09,337 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Disabled   Discarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:08:09,338 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 23:08:09,339 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 23:08:09,339 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 23:08:09,339 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 23:08:09,901 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:08:09,902 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:08:09,903 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:08:09,903 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:08:09,903 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:08:09,903 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:08:10,191 - test_protocol_conformance - INFO - ✓ 端口br4已成功禁用
2025-09-10 23:08:10,191 - test_protocol_conformance - INFO - 重新启用端口br4并监控状态转换
2025-09-10 23:08:10,191 - FaultInjector_DUT - INFO - 恢复链路: br4
2025-09-10 23:08:10,359 - FaultInjector_DUT - INFO - 链路已恢复: br4
2025-09-10 23:08:10,796 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:08:10,952 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Disabled   Discarding 2000     128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:08:10,953 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 23:08:10,954 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 23:08:10,954 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 23:08:10,954 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 23:08:11,421 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:08:11,421 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:08:11,422 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:08:11,422 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:08:11,422 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:08:11,423 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:08:11,714 - test_protocol_conformance - INFO - 端口br4状态转换: disabled
2025-09-10 23:08:14,136 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:08:14,293 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:08:14,294 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 23:08:14,294 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 23:08:14,294 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 23:08:14,294 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 23:08:14,762 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:08:14,762 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:08:14,763 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:08:14,763 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:08:14,764 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:08:14,764 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:08:15,050 - test_protocol_conformance - INFO - 端口br4状态转换: forwarding
2025-09-10 23:08:15,051 - test_protocol_conformance - INFO - 状态转换序列: ['disabled', 'forwarding']
2025-09-10 23:08:15,508 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:08:15,660 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:08:15,661 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 23:08:15,662 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 23:08:15,662 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 23:08:15,662 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 23:08:16,126 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:08:16,126 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:08:16,127 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:08:16,127 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:08:16,127 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:08:16,127 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:08:16,414 - test_protocol_conformance - INFO - ✓ 端口br4最终状态正确: forwarding
2025-09-10 23:08:16,415 - test_protocol_conformance - INFO - 端口状态转换测试完成
2025-09-10 23:08:16,415 - RSTPTest - INFO - 测试完成: test_port_state_transitions (耗时: 44.31秒)
2025-09-10 23:08:16,416 - RSTPTest - INFO - ============================================================

2025-09-10 23:08:16,417 - RSTPTest - INFO - ============================================================
2025-09-10 23:08:16,417 - RSTPTest - INFO - 开始测试: test_bpdu_propagation_and_keepalive
2025-09-10 23:08:16,418 - RSTPTest - INFO - ============================================================
2025-09-10 23:08:16,418 - test_protocol_conformance - INFO - 开始BPDU传播和保活机制测试
2025-09-10 23:08:16,419 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 23:08:16,419 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 23:08:16,419 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 23:08:16,419 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 23:08:16,419 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 23:08:16,419 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 23:08:16,420 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 23:08:16,420 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-10 23:08:16,420 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-10 23:08:16,930 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-10 23:08:16,930 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 23:08:16,930 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 23:08:17,085 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-10 23:08:18,165 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-10 23:08:18,165 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 23:08:18,166 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 23:08:18,166 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 23:08:18,166 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-10 23:08:18,643 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-10 23:08:19,118 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 23:08:19,118 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 23:08:19,309 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 23:08:19,310 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 23:08:19,310 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 23:08:19,310 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 23:08:19,310 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 23:08:19,310 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 23:08:19,310 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 23:08:19,311 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 23:08:19,812 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 23:08:24,326 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:08:24,457 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:08:24,457 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 23:08:24,457 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 23:08:24,458 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 23:08:24,458 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 23:08:25,642 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 23:08:26,822 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 23:08:26,823 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 23:08:26,919 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 23:08:27,181 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 23:08:27,182 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 23:08:27,182 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 23:08:27,182 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 23:08:27,182 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 23:08:27,183 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 23:08:27,183 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 23:08:27,183 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 23:08:27,669 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 23:08:32,148 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:08:32,275 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:08:32,275 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 23:08:32,275 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 23:08:32,275 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 23:08:32,275 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 23:08:33,461 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 23:08:34,672 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 23:08:34,673 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 23:08:34,769 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 23:08:35,034 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 23:08:35,034 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 23:08:35,034 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-10 23:08:35,034 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 4096 (方法: mstpd)
2025-09-10 23:08:35,035 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令
2025-09-10 23:08:35,161 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ("8N10xiaol\r\n8N10xiaol\r\nUnknown command [setbridgeprio]\r\nUsage: mstpctl [options] [commands]\r\noptions:\r\n  -h | --help              Show this help text\r\n  -V | --version           Show version\r\n  -b | --batch <file>      Process file with mstpctl commands\r\n  -s | --stdin             Process mstpctl commands from stdin\r\n                           Make sure to provide newlines between\r\n                           commands. Won't work if `batch` is used\r\n  -i | --ignore            Ignore failing commands during batch\r\n                           processing\r\n  -f | --format <format>   Select output format (json, plain)\r\ncommands:\r\n-Add bridges to the mstpd's list:\r\n   addbridge        <bridge> [<bridge> ...]\r\n-Remove bridges from the mstpd's list:\r\n   delbridge        <bridge> [<bridge> ...]\r\n-Show bridge state for the CIST:\r\n   showbridge       [<bridge> ... [param]]\r\n-Show list of registered MSTIs:\r\n   showmstilist     <bridge>\r\n-Show MST ConfigId:\r\n   showmstconfid    <bridge>\r\n-Show VID-to-FID allocation table:\r\n   showvid2fid      <bridge>\r\n-Show FID-to-MSTID allocation table:\r\n   showfid2mstid    <bridge>\r\n-Show port state for the CIST:\r\n   showport         <bridge> [<port>...[port] [param]]\r\n-Show port state for the CIST:\r\n   showportparams   <bridge> <port> <param>...[param]\r\n-Show port detailed state for the CIST:\r\n   showportdetail   <bridge> [<port> ... [param]]\r\n-Show bridge state for the given MSTI:\r\n   showtree         <bridge> <mstid>\r\n-Show port detailed state for the given MSTI:\r\n   showtreeport     <bridge> <port> <mstid>\r\n-Set MST ConfigId elements: Revision Level (0-65535) and Name:\r\n   setmstconfid     <bridge> <revision> <name>\r\n-Set VIDs-to-FIDs allocation:\r\n   setvid2fid       <bridge> <FID>:<VIDs List> [<FID>:<VIDs List> ...]\r\n-Set FIDs-to-MSTIDs allocation:\r\n   setfid2mstid     <bridge> <mstid>:<FIDs List> [<mstid>:<FIDs List> ...]\r\n-Set bridge max age (6-40):\r\n   setmaxage        <bridge> <max_age>\r\n-Set bridge forward delay (4-30):\r\n   setfdelay        <bridge> <fwd_delay>\r\n-Set bridge max hops (6-40):\r\n   setmaxhops       <bridge> <max_hops>\r\n-Set bridge hello time (1-10):\r\n   sethello         <bridge> <hello_time>\r\n-Set bridge ageing time (10-1000000):\r\n   setageing        <bridge> <ageing_time>\r\n-Force Spanning Tree protocol version:\r\n   setforcevers     <bridge> {mstp|rstp|stp}\r\n-Set bridge transmit hold count (1-10):\r\n   settxholdcount   <bridge> <tx_hold_count>\r\n-Create new MSTI:\r\n   createtree       <bridge> <mstid>\r\n-Delete existing MSTI:\r\n   deletetree       <bridge> <mstid>\r\n-Set bridge priority (0-15) for the given MSTI:\r\n   settreeprio      <bridge> <mstid> <priority>\r\n-Set port external path cost for the CIST (0 = auto):\r\n   setportpathcost  <bridge> <port> <cost>\r\n-Set initial edge state:\r\n   setportadminedge <bridge> <port> {yes|no}\r\n-Enable auto transition to/from edge state:\r\n   setportautoedge  <bridge> <port> {yes|no}\r\n-Set p2p detection mode:\r\n   setportp2p       <bridge> <port> {yes|no|auto}\r\n-Restrict port ability to take Root role:\r\n   setportrestrrole <bridge> <port> {yes|no}\r\n-Restrict port ability to propagate received TCNs:\r\n   setportrestrtcn  <bridge> <port> {yes|no}\r\n-Try to get back from STP to rapid (RSTP/MSTP) mode:\r\n   portmcheck       <bridge> <port>\r\n-Set bpdu guard state:\r\n   setbpduguard     <bridge> <port> {yes|no}\r\n-Set port priority (0-15) for the given MSTI:\r\n   settreeportprio  <bridge> <port> <mstid> <priority>\r\n-Set port internal path cost for the given MSTI (0 = auto):\r\n   settreeportcost  <bridge> <port> <mstid> <cost>\r\n-Set port network state:\r\n   setportnetwork   <bridge> <port> {yes|no}\r\n-Set BPDU filter state:\r\n   setportbpdufilter <bridge> <port> {yes|no}\r\n-Level of verbosity:\r\n   debuglevel       <level>\r\n", '', 1)
2025-09-10 23:08:35,162 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 8192 (方法: ovs)
2025-09-10 23:08:35,163 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-10 23:08:35,272 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-10 23:08:35,437 - NetworkTopology_TestNode2 - INFO - TestNode2: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-10 23:08:35,438 - NetworkTopology_TestNode2 - INFO - TestNode2: 执行mstpd设置优先级命令
2025-09-10 23:08:35,561 - NetworkTopology_TestNode2 - INFO - TestNode2: mstpd设置优先级结果: ("8N10xiaol\r\n8N10xiaol\r\nUnknown command [setbridgeprio]\r\nUsage: mstpctl [options] [commands]\r\noptions:\r\n  -h | --help              Show this help text\r\n  -V | --version           Show version\r\n  -b | --batch <file>      Process file with mstpctl commands\r\n  -s | --stdin             Process mstpctl commands from stdin\r\n                           Make sure to provide newlines between\r\n                           commands. Won't work if `batch` is used\r\n  -i | --ignore            Ignore failing commands during batch\r\n                           processing\r\n  -f | --format <format>   Select output format (json, plain)\r\ncommands:\r\n-Add bridges to the mstpd's list:\r\n   addbridge        <bridge> [<bridge> ...]\r\n-Remove bridges from the mstpd's list:\r\n   delbridge        <bridge> [<bridge> ...]\r\n-Show bridge state for the CIST:\r\n   showbridge       [<bridge> ... [param]]\r\n-Show list of registered MSTIs:\r\n   showmstilist     <bridge>\r\n-Show MST ConfigId:\r\n   showmstconfid    <bridge>\r\n-Show VID-to-FID allocation table:\r\n   showvid2fid      <bridge>\r\n-Show FID-to-MSTID allocation table:\r\n   showfid2mstid    <bridge>\r\n-Show port state for the CIST:\r\n   showport         <bridge> [<port>...[port] [param]]\r\n-Show port state for the CIST:\r\n   showportparams   <bridge> <port> <param>...[param]\r\n-Show port detailed state for the CIST:\r\n   showportdetail   <bridge> [<port> ... [param]]\r\n-Show bridge state for the given MSTI:\r\n   showtree         <bridge> <mstid>\r\n-Show port detailed state for the given MSTI:\r\n   showtreeport     <bridge> <port> <mstid>\r\n-Set MST ConfigId elements: Revision Level (0-65535) and Name:\r\n   setmstconfid     <bridge> <revision> <name>\r\n-Set VIDs-to-FIDs allocation:\r\n   setvid2fid       <bridge> <FID>:<VIDs List> [<FID>:<VIDs List> ...]\r\n-Set FIDs-to-MSTIDs allocation:\r\n   setfid2mstid     <bridge> <mstid>:<FIDs List> [<mstid>:<FIDs List> ...]\r\n-Set bridge max age (6-40):\r\n   setmaxage        <bridge> <max_age>\r\n-Set bridge forward delay (4-30):\r\n   setfdelay        <bridge> <fwd_delay>\r\n-Set bridge max hops (6-40):\r\n   setmaxhops       <bridge> <max_hops>\r\n-Set bridge hello time (1-10):\r\n   sethello         <bridge> <hello_time>\r\n-Set bridge ageing time (10-1000000):\r\n   setageing        <bridge> <ageing_time>\r\n-Force Spanning Tree protocol version:\r\n   setforcevers     <bridge> {mstp|rstp|stp}\r\n-Set bridge transmit hold count (1-10):\r\n   settxholdcount   <bridge> <tx_hold_count>\r\n-Create new MSTI:\r\n   createtree       <bridge> <mstid>\r\n-Delete existing MSTI:\r\n   deletetree       <bridge> <mstid>\r\n-Set bridge priority (0-15) for the given MSTI:\r\n   settreeprio      <bridge> <mstid> <priority>\r\n-Set port external path cost for the CIST (0 = auto):\r\n   setportpathcost  <bridge> <port> <cost>\r\n-Set initial edge state:\r\n   setportadminedge <bridge> <port> {yes|no}\r\n-Enable auto transition to/from edge state:\r\n   setportautoedge  <bridge> <port> {yes|no}\r\n-Set p2p detection mode:\r\n   setportp2p       <bridge> <port> {yes|no|auto}\r\n-Restrict port ability to take Root role:\r\n   setportrestrrole <bridge> <port> {yes|no}\r\n-Restrict port ability to propagate received TCNs:\r\n   setportrestrtcn  <bridge> <port> {yes|no}\r\n-Try to get back from STP to rapid (RSTP/MSTP) mode:\r\n   portmcheck       <bridge> <port>\r\n-Set bpdu guard state:\r\n   setbpduguard     <bridge> <port> {yes|no}\r\n-Set port priority (0-15) for the given MSTI:\r\n   settreeportprio  <bridge> <port> <mstid> <priority>\r\n-Set port internal path cost for the given MSTI (0 = auto):\r\n   settreeportcost  <bridge> <port> <mstid> <cost>\r\n-Set port network state:\r\n   setportnetwork   <bridge> <port> {yes|no}\r\n-Set BPDU filter state:\r\n   setportbpdufilter <bridge> <port> {yes|no}\r\n-Level of verbosity:\r\n   debuglevel       <level>\r\n", '', 1)
2025-09-10 23:08:35,562 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-10 23:08:35,562 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 23:08:35,975 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:08:36,128 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:08:36,130 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 23:08:36,130 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 23:08:36,130 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 23:08:36,130 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 23:08:36,593 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:08:36,594 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:08:36,595 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:08:36,595 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:08:36,595 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:08:36,596 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:08:36,882 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.32秒
2025-09-10 23:08:37,343 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:08:37,497 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:08:37,498 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 23:08:37,498 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 23:08:37,498 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 23:08:37,498 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 23:08:37,961 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:08:37,962 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:08:37,964 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:08:37,964 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:08:37,965 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:08:37,965 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:08:38,250 - test_protocol_conformance - INFO - Hello Time: 2秒
2025-09-10 23:08:38,250 - test_protocol_conformance - INFO - 开始捕获BPDU报文
2025-09-10 23:08:38,250 - test_protocol_conformance - INFO - 在端口br4上开始BPDU捕获
2025-09-10 23:08:38,250 - test_protocol_conformance - WARNING - 端口br4BPDU捕获失败: RSTPAnalyzer.capture_bpdu() got an unexpected keyword argument 'duration'
2025-09-10 23:08:38,251 - test_protocol_conformance - INFO - 总共捕获到0个BPDU
2025-09-10 23:08:38,290 - RSTPTest - INFO - 测试完成: test_bpdu_propagation_and_keepalive (耗时: 21.87秒)
2025-09-10 23:08:38,291 - RSTPTest - INFO - ============================================================

2025-09-10 23:08:38,293 - RSTPTest - INFO - ============================================================
2025-09-10 23:08:38,293 - RSTPTest - INFO - 开始测试: test_disabled_port_exclusion
2025-09-10 23:08:38,294 - RSTPTest - INFO - ============================================================
2025-09-10 23:08:38,294 - test_protocol_conformance - INFO - 开始禁用端口排除测试
2025-09-10 23:08:38,295 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 23:08:38,295 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 23:08:38,295 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 23:08:38,295 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 23:08:38,295 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 23:08:38,296 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 23:08:38,296 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 23:08:38,296 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-10 23:08:38,296 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-10 23:08:38,769 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-10 23:08:38,770 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 23:08:38,770 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 23:08:38,925 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-10 23:08:40,024 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-10 23:08:40,025 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 23:08:40,025 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 23:08:40,025 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 23:08:40,025 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-10 23:08:40,510 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-10 23:08:40,985 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 23:08:40,985 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 23:08:41,181 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 23:08:41,182 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 23:08:41,182 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 23:08:41,182 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 23:08:41,182 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 23:08:41,182 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 23:08:41,182 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 23:08:41,183 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 23:08:41,688 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 23:08:46,201 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:08:46,332 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:08:46,332 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 23:08:46,332 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 23:08:46,332 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 23:08:46,332 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 23:08:47,514 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 23:08:48,704 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 23:08:48,705 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 23:08:48,801 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 23:08:49,065 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 23:08:49,066 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 23:08:49,066 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 23:08:49,066 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 23:08:49,066 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 23:08:49,067 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 23:08:49,067 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 23:08:49,067 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 23:08:49,568 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 23:08:54,051 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:08:54,175 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:08:54,175 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 23:08:54,175 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 23:08:54,175 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 23:08:54,176 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 23:08:55,347 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 23:08:56,573 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 23:08:56,573 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 23:08:56,670 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 23:08:56,932 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 23:08:56,932 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 23:08:56,932 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-10 23:08:56,933 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 4096 (方法: mstpd)
2025-09-10 23:08:56,933 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令
2025-09-10 23:08:57,063 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ("8N10xiaol\r\n8N10xiaol\r\nUnknown command [setbridgeprio]\r\nUsage: mstpctl [options] [commands]\r\noptions:\r\n  -h | --help              Show this help text\r\n  -V | --version           Show version\r\n  -b | --batch <file>      Process file with mstpctl commands\r\n  -s | --stdin             Process mstpctl commands from stdin\r\n                           Make sure to provide newlines between\r\n                           commands. Won't work if `batch` is used\r\n  -i | --ignore            Ignore failing commands during batch\r\n                           processing\r\n  -f | --format <format>   Select output format (json, plain)\r\ncommands:\r\n-Add bridges to the mstpd's list:\r\n   addbridge        <bridge> [<bridge> ...]\r\n-Remove bridges from the mstpd's list:\r\n   delbridge        <bridge> [<bridge> ...]\r\n-Show bridge state for the CIST:\r\n   showbridge       [<bridge> ... [param]]\r\n-Show list of registered MSTIs:\r\n   showmstilist     <bridge>\r\n-Show MST ConfigId:\r\n   showmstconfid    <bridge>\r\n-Show VID-to-FID allocation table:\r\n   showvid2fid      <bridge>\r\n-Show FID-to-MSTID allocation table:\r\n   showfid2mstid    <bridge>\r\n-Show port state for the CIST:\r\n   showport         <bridge> [<port>...[port] [param]]\r\n-Show port state for the CIST:\r\n   showportparams   <bridge> <port> <param>...[param]\r\n-Show port detailed state for the CIST:\r\n   showportdetail   <bridge> [<port> ... [param]]\r\n-Show bridge state for the given MSTI:\r\n   showtree         <bridge> <mstid>\r\n-Show port detailed state for the given MSTI:\r\n   showtreeport     <bridge> <port> <mstid>\r\n-Set MST ConfigId elements: Revision Level (0-65535) and Name:\r\n   setmstconfid     <bridge> <revision> <name>\r\n-Set VIDs-to-FIDs allocation:\r\n   setvid2fid       <bridge> <FID>:<VIDs List> [<FID>:<VIDs List> ...]\r\n-Set FIDs-to-MSTIDs allocation:\r\n   setfid2mstid     <bridge> <mstid>:<FIDs List> [<mstid>:<FIDs List> ...]\r\n-Set bridge max age (6-40):\r\n   setmaxage        <bridge> <max_age>\r\n-Set bridge forward delay (4-30):\r\n   setfdelay        <bridge> <fwd_delay>\r\n-Set bridge max hops (6-40):\r\n   setmaxhops       <bridge> <max_hops>\r\n-Set bridge hello time (1-10):\r\n   sethello         <bridge> <hello_time>\r\n-Set bridge ageing time (10-1000000):\r\n   setageing        <bridge> <ageing_time>\r\n-Force Spanning Tree protocol version:\r\n   setforcevers     <bridge> {mstp|rstp|stp}\r\n-Set bridge transmit hold count (1-10):\r\n   settxholdcount   <bridge> <tx_hold_count>\r\n-Create new MSTI:\r\n   createtree       <bridge> <mstid>\r\n-Delete existing MSTI:\r\n   deletetree       <bridge> <mstid>\r\n-Set bridge priority (0-15) for the given MSTI:\r\n   settreeprio      <bridge> <mstid> <priority>\r\n-Set port external path cost for the CIST (0 = auto):\r\n   setportpathcost  <bridge> <port> <cost>\r\n-Set initial edge state:\r\n   setportadminedge <bridge> <port> {yes|no}\r\n-Enable auto transition to/from edge state:\r\n   setportautoedge  <bridge> <port> {yes|no}\r\n-Set p2p detection mode:\r\n   setportp2p       <bridge> <port> {yes|no|auto}\r\n-Restrict port ability to take Root role:\r\n   setportrestrrole <bridge> <port> {yes|no}\r\n-Restrict port ability to propagate received TCNs:\r\n   setportrestrtcn  <bridge> <port> {yes|no}\r\n-Try to get back from STP to rapid (RSTP/MSTP) mode:\r\n   portmcheck       <bridge> <port>\r\n-Set bpdu guard state:\r\n   setbpduguard     <bridge> <port> {yes|no}\r\n-Set port priority (0-15) for the given MSTI:\r\n   settreeportprio  <bridge> <port> <mstid> <priority>\r\n-Set port internal path cost for the given MSTI (0 = auto):\r\n   settreeportcost  <bridge> <port> <mstid> <cost>\r\n-Set port network state:\r\n   setportnetwork   <bridge> <port> {yes|no}\r\n-Set BPDU filter state:\r\n   setportbpdufilter <bridge> <port> {yes|no}\r\n-Level of verbosity:\r\n   debuglevel       <level>\r\n", '', 1)
2025-09-10 23:08:57,064 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 8192 (方法: ovs)
2025-09-10 23:08:57,065 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-10 23:08:57,181 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-10 23:08:57,345 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-10 23:08:57,346 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 23:08:57,788 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:08:57,944 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:08:57,945 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 23:08:57,945 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 23:08:57,945 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 23:08:57,945 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 23:08:58,417 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:08:58,417 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:08:58,418 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:08:58,418 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:08:58,418 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:08:58,419 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:08:58,705 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.36秒
2025-09-10 23:08:59,170 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:08:59,327 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:08:59,328 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 23:08:59,328 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 23:08:59,329 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 23:08:59,329 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 23:08:59,802 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:08:59,802 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:08:59,803 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:08:59,803 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:08:59,803 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:08:59,804 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:09:00,089 - test_protocol_conformance - INFO - 所有端口信息: {'br3': PortInfo(name='br3', role=<PortRole.DESIGNATED: 'designated'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'br4': PortInfo(name='br4', role=<PortRole.DESIGNATED: 'designated'>, state=<PortState.FORWARDING: 'forwarding'>, path_cost=0, designated_bridge='', designated_port=''), 'SE_ETH2': PortInfo(name='SE_ETH2', role=<PortRole.DESIGNATED: 'designated'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')}
2025-09-10 23:09:00,243 - test_protocol_conformance - INFO - RSTP show输出 (code=0): 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:09:00,244 - test_protocol_conformance - INFO - 初始活动端口: ['br4']
2025-09-10 23:09:00,244 - test_protocol_conformance - INFO - 选择端口br4进行禁用测试
2025-09-10 23:09:00,244 - test_protocol_conformance - INFO - 禁用端口br4
2025-09-10 23:09:00,244 - FaultInjector_DUT - INFO - 断开链路: br4
2025-09-10 23:09:11,746 - FaultInjector_DUT - INFO - 链路已断开: br4
2025-09-10 23:09:11,747 - test_protocol_conformance - INFO - 禁用命令结果: ('', '', 0)
2025-09-10 23:09:11,903 - test_protocol_conformance - INFO - 端口br4配置: stdout='1
1
{rstp-enable="true", rstp-port-admin-edge="true", rstp-port-auto-edge="true", stp-path-cost="20000"}
', stderr='', code=0
2025-09-10 23:09:27,319 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:09:27,470 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Disabled   Discarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:09:27,471 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 23:09:27,472 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 23:09:27,472 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 23:09:27,472 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 23:09:27,936 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:09:27,936 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:09:27,938 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:09:27,938 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:09:27,938 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:09:27,939 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:09:28,241 - test_protocol_conformance - INFO - 禁用后所有端口状态: [('br3', 'disabled'), ('br4', 'disabled'), ('SE_ETH2', 'disabled')]
2025-09-10 23:09:28,241 - test_protocol_conformance - INFO - 端口br4状态: disabled, 角色: designated
2025-09-10 23:09:28,242 - test_protocol_conformance - INFO - 禁用后活动端口: []
2025-09-10 23:09:28,242 - test_protocol_conformance - INFO - 活动端口数量: 0, 初始活动端口数量: 1
2025-09-10 23:09:28,242 - test_protocol_conformance - INFO - 禁用后端口角色分布: {}
2025-09-10 23:09:28,710 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:09:28,866 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Disabled   Discarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:09:28,867 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-10 23:09:28,867 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-10 23:09:28,867 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-10 23:09:28,867 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-10 23:09:29,323 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:09:29,324 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:09:29,325 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:09:29,325 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:09:29,325 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:09:29,325 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:09:29,613 - RSTPAnalyzer_DUT - WARNING - 所有端口都是DISABLED状态，可能是解析失败，判定为非根桥
2025-09-10 23:09:29,653 - RSTPTest - INFO - 测试完成: test_disabled_port_exclusion (耗时: 51.36秒)
2025-09-10 23:09:29,654 - RSTPTest - INFO - ============================================================

2025-09-10 23:09:29,656 - RSTPTest - INFO - ============================================================
2025-09-10 23:09:29,656 - RSTPTest - INFO - 开始测试: test_topology_change_notification
2025-09-10 23:09:29,656 - RSTPTest - INFO - ============================================================
2025-09-10 23:09:29,657 - test_protocol_conformance - INFO - 开始拓扑变更通知测试
2025-09-10 23:09:29,657 - test_protocol_conformance - INFO - === 步骤1: 创建多网桥环形拓扑 ===
2025-09-10 23:09:30,465 - test_protocol_conformance - INFO - 创建网桥 SE_ETH2 (优先级: 32768)
2025-09-10 23:09:30,889 - test_protocol_conformance - INFO - 创建网桥 rstp2 (优先级: 36864)
2025-09-10 23:09:31,312 - test_protocol_conformance - INFO - 创建网桥 rstp3 (优先级: 40960)
2025-09-10 23:09:32,045 - test_protocol_conformance - INFO - ✓ 连接 rstp1 <-> rstp2
2025-09-10 23:09:32,801 - test_protocol_conformance - INFO - ✓ 连接 rstp2 <-> rstp3
2025-09-10 23:09:33,557 - test_protocol_conformance - INFO - ✓ 连接 rstp3 <-> rstp1
2025-09-10 23:09:33,558 - test_protocol_conformance - INFO - 等待RSTP初始收敛...
2025-09-10 23:09:43,559 - test_protocol_conformance - INFO - === 步骤2: 验证初始RSTP状态 ===
2025-09-10 23:09:43,615 - test_protocol_conformance - INFO - 
SE_ETH2 初始RSTP状态:
2025-09-10 23:09:43,615 - test_protocol_conformance - INFO -   ---- SE_ETH2 ----
2025-09-10 23:09:43,615 - test_protocol_conformance - INFO -   Root ID:
2025-09-10 23:09:43,616 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-10 23:09:43,616 - test_protocol_conformance - INFO -     stp-system-id   7e:cb:e2:fc:61:47
2025-09-10 23:09:43,616 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 23:09:43,616 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 23:09:43,616 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 23:09:43,616 - test_protocol_conformance - INFO -     This bridge is the root
2025-09-10 23:09:43,617 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-10 23:09:43,617 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-10 23:09:43,617 - test_protocol_conformance - INFO -     stp-system-id   7e:cb:e2:fc:61:47
2025-09-10 23:09:43,617 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 23:09:43,617 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 23:09:43,617 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 23:09:43,617 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 23:09:43,618 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-10 23:09:43,618 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-10 23:09:43,714 - test_protocol_conformance - INFO - 
rstp2 初始RSTP状态:
2025-09-10 23:09:43,715 - test_protocol_conformance - INFO -   ---- rstp2 ----
2025-09-10 23:09:43,715 - test_protocol_conformance - INFO -   Root ID:
2025-09-10 23:09:43,715 - test_protocol_conformance - INFO -     stp-priority    36864
2025-09-10 23:09:43,715 - test_protocol_conformance - INFO -     stp-system-id   7e:cd:6c:1a:49:4c
2025-09-10 23:09:43,716 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 23:09:43,716 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 23:09:43,716 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 23:09:43,716 - test_protocol_conformance - INFO -     This bridge is the root
2025-09-10 23:09:43,716 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-10 23:09:43,716 - test_protocol_conformance - INFO -     stp-priority    36864
2025-09-10 23:09:43,716 - test_protocol_conformance - INFO -     stp-system-id   7e:cd:6c:1a:49:4c
2025-09-10 23:09:43,717 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 23:09:43,717 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 23:09:43,717 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 23:09:43,717 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 23:09:43,717 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-10 23:09:43,717 - test_protocol_conformance - INFO -     veth12b    Designated Forwarding 2000     128.1
2025-09-10 23:09:43,717 - test_protocol_conformance - INFO -     veth23a    Designated Forwarding 2000     128.2
2025-09-10 23:09:43,718 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-10 23:09:43,718 - test_protocol_conformance - INFO -   → 有转发端口
2025-09-10 23:09:43,810 - test_protocol_conformance - INFO - 
rstp3 初始RSTP状态:
2025-09-10 23:09:43,811 - test_protocol_conformance - INFO -   ---- rstp3 ----
2025-09-10 23:09:43,811 - test_protocol_conformance - INFO -   Root ID:
2025-09-10 23:09:43,811 - test_protocol_conformance - INFO -     stp-priority    36864
2025-09-10 23:09:43,811 - test_protocol_conformance - INFO -     stp-system-id   7e:cd:6c:1a:49:4c
2025-09-10 23:09:43,811 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 23:09:43,812 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 23:09:43,812 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 23:09:43,812 - test_protocol_conformance - INFO -     root-port       veth23b
2025-09-10 23:09:43,812 - test_protocol_conformance - INFO -     root-path-cost  2000
2025-09-10 23:09:43,812 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-10 23:09:43,812 - test_protocol_conformance - INFO -     stp-priority    40960
2025-09-10 23:09:43,812 - test_protocol_conformance - INFO -     stp-system-id   62:89:49:70:95:48
2025-09-10 23:09:43,812 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 23:09:43,813 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 23:09:43,813 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 23:09:43,813 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 23:09:43,813 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-10 23:09:43,813 - test_protocol_conformance - INFO -     veth23b    Root       Forwarding 2000     128.1
2025-09-10 23:09:43,813 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-10 23:09:43,813 - test_protocol_conformance - INFO -   → 有转发端口
2025-09-10 23:09:43,814 - test_protocol_conformance - INFO - === 步骤3: 分析网络拓扑 ===
2025-09-10 23:09:43,814 - test_protocol_conformance - INFO - ✓ SE_ETH2 是根桥
2025-09-10 23:09:43,814 - test_protocol_conformance - INFO - ✓ rstp2 是根桥
2025-09-10 23:09:43,814 - test_protocol_conformance - INFO - === 步骤4: 触发拓扑变更 ===
2025-09-10 23:09:43,814 - test_protocol_conformance - INFO - 断开活动端口: veth31a
2025-09-10 23:09:49,170 - test_protocol_conformance - INFO - ✓ rstp3 状态已变化
2025-09-10 23:09:54,264 - test_protocol_conformance - INFO - === 步骤5: 验证拓扑变更 ===
2025-09-10 23:09:54,316 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: veth12a, 数量: 5)
2025-09-10 23:09:59,457 - RSTPAnalyzer_DUT - INFO - 捕获到 2 个BPDU包
2025-09-10 23:09:59,457 - test_protocol_conformance - INFO - 在 veth12a 捕获到 2 个BPDU
2025-09-10 23:09:59,457 - test_protocol_conformance - INFO - === 步骤6: 最终验证 ===
2025-09-10 23:09:59,458 - test_protocol_conformance - INFO - ✓ 测试通过：检测到拓扑变更
2025-09-10 23:09:59,558 - test_protocol_conformance - INFO - 
========== SE_ETH2 最终状态 ==========
2025-09-10 23:09:59,559 - test_protocol_conformance - INFO - ---- SE_ETH2 ----
2025-09-10 23:09:59,559 - test_protocol_conformance - INFO - Root ID:
2025-09-10 23:09:59,559 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-10 23:09:59,559 - test_protocol_conformance - INFO -   stp-system-id   7e:cb:e2:fc:61:47
2025-09-10 23:09:59,559 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 23:09:59,559 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 23:09:59,559 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 23:09:59,560 - test_protocol_conformance - INFO -   This bridge is the root
2025-09-10 23:09:59,560 - test_protocol_conformance - INFO - Bridge ID:
2025-09-10 23:09:59,560 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-10 23:09:59,560 - test_protocol_conformance - INFO -   stp-system-id   7e:cb:e2:fc:61:47
2025-09-10 23:09:59,560 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 23:09:59,560 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 23:09:59,560 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 23:09:59,561 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 23:09:59,561 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-10 23:09:59,654 - test_protocol_conformance - INFO - 
========== rstp2 最终状态 ==========
2025-09-10 23:09:59,655 - test_protocol_conformance - INFO - ---- rstp2 ----
2025-09-10 23:09:59,655 - test_protocol_conformance - INFO - Root ID:
2025-09-10 23:09:59,655 - test_protocol_conformance - INFO -   stp-priority    36864
2025-09-10 23:09:59,655 - test_protocol_conformance - INFO -   stp-system-id   7e:cd:6c:1a:49:4c
2025-09-10 23:09:59,655 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 23:09:59,656 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 23:09:59,656 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 23:09:59,656 - test_protocol_conformance - INFO -   This bridge is the root
2025-09-10 23:09:59,656 - test_protocol_conformance - INFO - Bridge ID:
2025-09-10 23:09:59,656 - test_protocol_conformance - INFO -   stp-priority    36864
2025-09-10 23:09:59,656 - test_protocol_conformance - INFO -   stp-system-id   7e:cd:6c:1a:49:4c
2025-09-10 23:09:59,657 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 23:09:59,657 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 23:09:59,657 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 23:09:59,657 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 23:09:59,657 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-10 23:09:59,657 - test_protocol_conformance - INFO -   veth12b    Designated Forwarding 2000     128.1
2025-09-10 23:09:59,658 - test_protocol_conformance - INFO -   veth23a    Designated Forwarding 2000     128.2
2025-09-10 23:09:59,750 - test_protocol_conformance - INFO - 
========== rstp3 最终状态 ==========
2025-09-10 23:09:59,750 - test_protocol_conformance - INFO - ---- rstp3 ----
2025-09-10 23:09:59,751 - test_protocol_conformance - INFO - Root ID:
2025-09-10 23:09:59,751 - test_protocol_conformance - INFO -   stp-priority    36864
2025-09-10 23:09:59,751 - test_protocol_conformance - INFO -   stp-system-id   7e:cd:6c:1a:49:4c
2025-09-10 23:09:59,751 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 23:09:59,751 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 23:09:59,751 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 23:09:59,752 - test_protocol_conformance - INFO -   root-port       veth23b
2025-09-10 23:09:59,752 - test_protocol_conformance - INFO -   root-path-cost  2000
2025-09-10 23:09:59,752 - test_protocol_conformance - INFO - Bridge ID:
2025-09-10 23:09:59,752 - test_protocol_conformance - INFO -   stp-priority    40960
2025-09-10 23:09:59,752 - test_protocol_conformance - INFO -   stp-system-id   62:89:49:70:95:48
2025-09-10 23:09:59,752 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 23:09:59,753 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 23:09:59,753 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 23:09:59,753 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 23:09:59,753 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-10 23:09:59,753 - test_protocol_conformance - INFO -   veth23b    Root       Forwarding 2000     128.1
2025-09-10 23:09:59,754 - test_protocol_conformance - INFO -   veth31a    Designated Forwarding 2000     128.2
2025-09-10 23:09:59,754 - test_protocol_conformance - INFO - 
=== 诊断信息 ===
2025-09-10 23:09:59,851 - test_protocol_conformance - INFO - 系统日志中的STP/RSTP信息:
2025-09-10 23:09:59,851 - test_protocol_conformance - INFO - [552147.094435] rstp3: entered promiscuous mode
[552176.244345] rstp2: left promiscuous mode
[552176.470844] rstp3: left promiscuous mode
[560953.038367] rstp2: entered promiscuous mode
[560953.461810] rstp3: entered promiscuous mode

2025-09-10 23:09:59,948 - test_protocol_conformance - INFO - OVS日志中的拓扑变更信息:
2025-09-10 23:09:59,949 - test_protocol_conformance - INFO - 2025-09-10T15:10:02.183Z|10505770|rstp_sm|DBG|rstp3: move_rstp()
2025-09-10T15:10:02.184Z|10505771|rstp_sm|DBG|SE_ETH2: move_rstp()
2025-09-10T15:10:02.184Z|10505772|rstp_sm|DBG|rstp0: move_rstp()
2025-09-10T15:10:02.184Z|10505773|rstp_sm|DBG|rstp2: move_rstp()
2025-09-10T15:10:02.184Z|10505774|rstp_sm|DBG|rstp2, port 1: port_transmit_sm 6 -> 3
2025-09-10T15:10:02.184Z|10505775|rstp_sm|DBG|rstp2: move_rstp()
2025-09-10T15:10:02.184Z|10505776|rstp_sm|DBG|rstp2, port 1: port_transmit_sm 3 -> 5
2025-09-10T15:10:02.184Z|10505777|rstp_sm|DBG|rstp2: move_rstp()
2025-09-10T15:10:02.184Z|10505778|rstp_sm|DBG|rstp2, port 1: port_transmit_sm 5 -> 11
2025-09-10T15:10:02.184Z|10505779|rstp_sm|DBG|rstp2: move_rstp()
2025-09-10T15:10:02.184Z|10505780|rstp_sm|DBG|rstp2, port 1: port_transmit_sm 11 -> 5
2025-09-10T15:10:02.184Z|10505781|rstp_sm|DBG|rstp2: move_rstp()
2025-09-10T15:10:02.184Z|10505782|rstp_sm|DBG|rstp2, port 1: port_transmit_sm 5 -> 6
2025-09-10T15:10:02.184Z|10505783|rstp_sm|DBG|rstp2: move_rstp()
2025-09-10T15:10:02.184Z|10505784|rstp_sm|DBG|br0: move_rstp()
2025-09-10T15:10:02.314Z|10505788|bridge|WARN|rstp0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-10T15:10:02.314Z|10505789|bridge|WARN|br0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP

2025-09-10 23:09:59,950 - test_protocol_conformance - INFO - === 清理测试环境 ===
2025-09-10 23:10:00,564 - test_protocol_conformance - INFO - 拓扑变更通知测试完成
2025-09-10 23:10:00,565 - RSTPTest - INFO - 测试完成: test_topology_change_notification (耗时: 30.91秒)
2025-09-10 23:10:00,565 - RSTPTest - INFO - ============================================================

2025-09-10 23:10:00,565 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 23:10:00,566 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 23:10:00,566 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 23:10:00,702 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 23:10:00,702 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 23:10:00,831 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 23:10:00,832 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 23:10:00,979 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 23:10:00,980 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 23:10:00,980 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 23:10:00,980 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-10 23:10:00,981 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 23:10:00,981 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 23:10:01,037 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 23:10:01,037 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 23:10:01,203 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 23:10:01,203 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 23:10:01,203 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 23:10:01,204 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 23:10:01,204 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 23:10:01,259 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 23:10:01,260 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 23:10:01,427 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 23:10:01,427 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 23:10:01,428 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 23:10:01,428 - RSTPTest - INFO - ============================================================
2025-09-10 23:10:01,428 - RSTPTest - INFO - 开始测试: test_root_bridge_hijack_attack
2025-09-10 23:10:01,428 - RSTPTest - INFO - ============================================================
2025-09-10 23:10:01,429 - test_security - INFO - 开始根网桥劫持攻击测试
2025-09-10 23:10:01,429 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 23:10:01,429 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 23:10:01,430 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 23:10:01,430 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 23:10:01,430 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 23:10:01,430 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 23:10:01,430 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 23:10:01,430 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-10 23:10:01,430 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-10 23:10:01,928 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-10 23:10:01,928 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 23:10:01,928 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 23:10:02,080 - NetworkTopology - INFO - DUT: 创建新网桥SE_ETH2
2025-09-10 23:10:03,277 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-10 23:10:03,278 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 23:10:03,278 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 23:10:03,278 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 23:10:03,278 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-10 23:10:03,749 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-10 23:10:04,202 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 23:10:04,202 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 23:10:04,376 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 23:10:04,376 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 23:10:04,376 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 23:10:04,377 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 23:10:04,377 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 23:10:04,377 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 23:10:04,377 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 23:10:04,377 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 23:10:04,871 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 23:10:09,353 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:10:09,480 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:10:09,481 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 23:10:09,481 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 23:10:09,481 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 23:10:09,481 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 23:10:10,654 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 23:10:11,843 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 23:10:11,843 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 23:10:11,938 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 23:10:12,209 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 23:10:12,210 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 23:10:12,210 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 23:10:12,210 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 23:10:12,211 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 23:10:12,211 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 23:10:12,211 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 23:10:12,211 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 23:10:12,703 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 23:10:17,199 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:10:17,327 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:10:17,327 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 23:10:17,328 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 23:10:17,328 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 23:10:17,328 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 23:10:18,519 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 23:10:20,018 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 23:10:20,019 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 23:10:20,116 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 23:10:20,458 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 23:10:20,458 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 23:10:20,459 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-10 23:10:26,166 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:10:26,317 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Disabled   Discarding 2000     128.1
  br4        Root       Forwarding 20000    128.2


2025-09-10 23:10:26,318 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 23:10:26,319 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 23:10:26,319 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 23:10:26,319 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 23:10:26,784 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:10:26,784 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:10:26,785 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:10:26,786 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:10:26,786 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:10:26,786 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:10:27,076 - RSTPAnalyzer_DUT - INFO - Root ID为unknown，判定为非根桥
2025-09-10 23:10:27,101 - RSTPTest - INFO - 测试完成: test_root_bridge_hijack_attack (耗时: 25.67秒)
2025-09-10 23:10:27,102 - RSTPTest - INFO - ============================================================

2025-09-10 23:10:27,104 - RSTPTest - INFO - ============================================================
2025-09-10 23:10:27,104 - RSTPTest - INFO - 开始测试: test_bpdu_flood_attack
2025-09-10 23:10:27,104 - RSTPTest - INFO - ============================================================
2025-09-10 23:10:27,105 - test_security - INFO - 开始BPDU洪泛攻击测试
2025-09-10 23:10:27,105 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 23:10:27,105 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 23:10:27,105 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 23:10:27,106 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 23:10:27,106 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 23:10:27,106 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 23:10:27,106 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 23:10:27,106 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-10 23:10:27,107 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-10 23:10:27,612 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-10 23:10:27,612 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 23:10:27,612 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 23:10:27,776 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-10 23:10:28,863 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-10 23:10:28,864 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 23:10:28,864 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 23:10:28,864 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 23:10:28,864 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-10 23:10:29,339 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-10 23:10:29,816 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 23:10:29,816 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 23:10:30,007 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 23:10:30,008 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 23:10:30,008 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 23:10:30,008 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 23:10:30,008 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 23:10:30,009 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 23:10:30,009 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 23:10:30,009 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 23:10:30,510 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 23:10:34,989 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:10:35,115 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:10:35,116 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 23:10:35,116 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 23:10:35,116 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 23:10:35,116 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 23:10:36,317 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 23:10:37,502 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 23:10:37,503 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 23:10:37,597 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 23:10:37,861 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 23:10:37,861 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 23:10:37,861 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 23:10:37,862 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 23:10:37,862 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 23:10:37,862 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 23:10:37,862 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 23:10:37,862 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 23:10:38,356 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 23:10:42,836 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:10:42,965 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:10:42,966 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 23:10:42,966 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 23:10:42,966 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 23:10:42,966 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 23:10:44,144 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 23:10:45,349 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 23:10:45,350 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 23:10:45,445 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 23:10:45,709 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 23:10:45,709 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 23:10:45,710 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-10 23:10:50,929 - test_security - INFO - 初始CPU使用率: 25.0%
2025-09-10 23:11:01,295 - test_security - INFO - 洪泛时CPU使用率: 0.0%
2025-09-10 23:11:01,753 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:11:01,906 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:11:01,907 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 23:11:01,907 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 23:11:01,907 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 23:11:01,907 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 23:11:02,370 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:11:02,370 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:11:02,371 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:11:02,371 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:11:02,371 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:11:02,371 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:11:02,660 - test_security - INFO - 网络在BPDU洪泛下保持稳定
2025-09-10 23:11:02,660 - test_security - INFO - BPDU洪泛攻击测试完成
2025-09-10 23:11:02,661 - RSTPTest - INFO - 测试完成: test_bpdu_flood_attack (耗时: 35.56秒)
2025-09-10 23:11:02,661 - RSTPTest - INFO - ============================================================

2025-09-10 23:11:02,662 - RSTPTest - INFO - ============================================================
2025-09-10 23:11:02,662 - RSTPTest - INFO - 开始测试: test_topology_change_attack
2025-09-10 23:11:02,663 - RSTPTest - INFO - ============================================================
2025-09-10 23:11:02,663 - test_security - INFO - 开始拓扑变更攻击测试
2025-09-10 23:11:02,663 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 23:11:02,664 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 23:11:02,664 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 23:11:02,664 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 23:11:02,664 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 23:11:02,664 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 23:11:02,664 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 23:11:02,664 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-10 23:11:02,665 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-10 23:11:03,187 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-10 23:11:03,187 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 23:11:03,188 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 23:11:03,344 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-10 23:11:04,428 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-10 23:11:04,428 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 23:11:04,428 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 23:11:04,428 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 23:11:04,429 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-10 23:11:04,903 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-10 23:11:05,379 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 23:11:05,379 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 23:11:05,571 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 23:11:05,571 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 23:11:05,571 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 23:11:05,572 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 23:11:05,572 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 23:11:05,572 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 23:11:05,572 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 23:11:05,572 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 23:11:06,079 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 23:11:10,578 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:11:10,708 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:11:10,708 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 23:11:10,708 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 23:11:10,708 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 23:11:10,709 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 23:11:11,901 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 23:11:13,082 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 23:11:13,082 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 23:11:13,178 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 23:11:13,442 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 23:11:13,442 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 23:11:13,443 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 23:11:13,443 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 23:11:13,443 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 23:11:13,443 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 23:11:13,443 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 23:11:13,444 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 23:11:13,928 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 23:11:18,416 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:11:18,539 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:11:18,539 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 23:11:18,539 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 23:11:18,540 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 23:11:18,540 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 23:11:19,733 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 23:11:20,969 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 23:11:20,970 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 23:11:21,065 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 23:11:21,331 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 23:11:21,331 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 23:11:21,331 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-10 23:11:26,745 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:11:26,896 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:11:26,897 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 23:11:26,898 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 23:11:26,898 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 23:11:26,898 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 23:11:27,358 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:11:27,359 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:11:27,360 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:11:27,360 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:11:27,360 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:11:27,360 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:11:27,651 - test_security - INFO - 触发快速拓扑变更...
2025-09-10 23:11:46,093 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:11:46,244 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:11:46,245 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 23:11:46,246 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 23:11:46,246 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 23:11:46,246 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 23:11:46,709 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:11:46,710 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:11:46,711 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:11:46,711 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:11:46,711 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:11:46,711 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:11:46,999 - test_security - INFO - 检测到0次拓扑变更
2025-09-10 23:11:47,456 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:11:47,609 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:11:47,610 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 23:11:47,610 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 23:11:47,610 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 23:11:47,610 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 23:11:48,078 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:11:48,079 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:11:48,080 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:11:48,080 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:11:48,080 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:11:48,080 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:11:48,367 - test_security - INFO - 网络在频繁拓扑变更后保持稳定
2025-09-10 23:11:48,367 - test_security - INFO - 拓扑变更攻击测试完成
2025-09-10 23:11:48,368 - RSTPTest - INFO - 测试完成: test_topology_change_attack (耗时: 45.71秒)
2025-09-10 23:11:48,368 - RSTPTest - INFO - ============================================================

2025-09-10 23:11:48,370 - RSTPTest - INFO - ============================================================
2025-09-10 23:11:48,370 - RSTPTest - INFO - 开始测试: test_mac_spoofing
2025-09-10 23:11:48,370 - RSTPTest - INFO - ============================================================
2025-09-10 23:11:48,371 - test_security - INFO - 开始MAC地址欺骗测试
2025-09-10 23:11:48,371 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 23:11:48,371 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 23:11:48,371 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 23:11:48,371 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 23:11:48,371 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 23:11:48,372 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 23:11:48,372 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 23:11:48,372 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-10 23:11:48,372 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-10 23:11:48,894 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-10 23:11:48,895 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 23:11:48,895 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 23:11:49,050 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-10 23:11:50,137 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-10 23:11:50,138 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 23:11:50,138 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 23:11:50,138 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 23:11:50,138 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-10 23:11:50,622 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-10 23:11:51,102 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 23:11:51,102 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 23:11:51,294 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 23:11:51,294 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 23:11:51,294 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 23:11:51,294 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 23:11:51,295 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 23:11:51,295 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 23:11:51,295 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 23:11:51,295 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 23:11:51,791 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 23:11:56,286 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:11:56,444 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:11:56,444 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 23:11:56,444 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 23:11:56,444 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 23:11:56,445 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 23:11:57,619 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 23:11:58,787 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 23:11:58,787 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 23:11:58,883 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 23:11:59,153 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 23:11:59,154 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 23:11:59,154 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 23:11:59,154 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 23:11:59,154 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 23:11:59,154 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 23:11:59,154 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 23:11:59,155 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 23:11:59,646 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 23:12:04,120 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:12:04,248 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:12:04,249 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 23:12:04,249 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 23:12:04,249 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 23:12:04,249 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 23:12:05,443 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 23:12:06,660 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 23:12:06,660 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 23:12:06,755 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 23:12:07,015 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 23:12:07,016 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 23:12:07,016 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-10 23:12:12,071 - test_security - INFO - DUT MAC地址: 90:12:10:b5:7d:f7
2025-09-10 23:12:12,071 - test_security - INFO - 尝试MAC地址欺骗...
2025-09-10 23:12:17,996 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:12:18,152 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:12:18,154 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 23:12:18,154 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 23:12:18,154 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 23:12:18,154 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 23:12:18,626 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:12:18,626 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:12:18,627 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:12:18,627 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:12:18,628 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:12:18,628 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:12:18,918 - test_security - INFO - 网络对MAC欺骗具有抗性
2025-09-10 23:12:25,545 - test_security - INFO - MAC地址欺骗测试完成
2025-09-10 23:12:25,546 - RSTPTest - INFO - 测试完成: test_mac_spoofing (耗时: 37.18秒)
2025-09-10 23:12:25,547 - RSTPTest - INFO - ============================================================

2025-09-10 23:12:25,548 - RSTPTest - INFO - ============================================================
2025-09-10 23:12:25,548 - RSTPTest - INFO - 开始测试: test_port_security
2025-09-10 23:12:25,549 - RSTPTest - INFO - ============================================================
2025-09-10 23:12:25,550 - test_security - INFO - 开始端口安全测试
2025-09-10 23:12:25,601 - test_security - WARNING - 未检测到任何端口安全功能
2025-09-10 23:12:25,602 - RSTPTest - INFO - 测试完成: test_port_security (耗时: 0.05秒)
2025-09-10 23:12:25,602 - RSTPTest - INFO - ============================================================

2025-09-10 23:12:25,604 - RSTPTest - INFO - ============================================================
2025-09-10 23:12:25,604 - RSTPTest - INFO - 开始测试: test_bpdu_filter_functionality
2025-09-10 23:12:25,604 - RSTPTest - INFO - ============================================================
2025-09-10 23:12:25,605 - test_security - INFO - 开始BPDU过滤器功能测试
2025-09-10 23:12:25,648 - NetworkTopology - INFO - 创建RSTP线性拓扑...
2025-09-10 23:12:25,649 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 23:12:25,649 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 23:12:25,649 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 23:12:25,649 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 23:12:25,649 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 23:12:25,649 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 23:12:25,650 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-10 23:12:25,650 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-10 23:12:26,190 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-10 23:12:26,190 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 23:12:26,190 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 23:12:26,345 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-10 23:12:27,413 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"32768
2025-09-10 23:12:27,413 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 23:12:27,414 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 23:12:27,414 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br4']
2025-09-10 23:12:27,414 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-10 23:12:27,890 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 23:12:27,890 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 23:12:28,081 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 23:12:28,082 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 23:12:28,082 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 23:12:28,082 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 23:12:28,083 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 23:12:28,083 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 23:12:28,083 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 23:12:28,084 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 23:12:40,616 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 23:12:45,106 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:12:55,182 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:12:55,182 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 23:12:55,182 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 23:12:55,182 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 23:12:55,182 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 23:14:01,219 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 23:14:55,887 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 23:14:55,887 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 23:14:55,981 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 23:15:03,169 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 23:15:03,169 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 23:15:03,169 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 23:15:03,170 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 23:15:03,170 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 23:15:03,170 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 23:15:03,170 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 23:15:03,170 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 23:15:03,661 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 23:15:08,125 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:15:08,258 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:15:08,258 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 23:15:08,258 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 23:15:08,259 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0']
2025-09-10 23:15:08,259 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 23:15:09,437 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 23:15:09,438 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 23:15:09,533 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 23:15:09,798 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 23:15:09,798 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 23:15:09,798 - NetworkTopology - INFO - 线性拓扑创建完成
2025-09-10 23:15:15,248 - test_security - WARNING - BPDU包统计命令执行失败: 
2025-09-10 23:15:15,248 - test_security - INFO - 启用过滤器前端口 eth2 BPDU数量: 0
2025-09-10 23:15:15,395 - test_security - INFO - 在端口 eth2 启用BPDU过滤器
2025-09-10 23:15:25,536 - test_security - WARNING - BPDU包统计命令执行失败: 
2025-09-10 23:15:25,536 - test_security - INFO - 启用过滤器后端口 eth2 BPDU数量: 0
2025-09-10 23:15:25,536 - test_security - INFO - BPDU过滤器功能正常：BPDU发送已停止或减少
2025-09-10 23:15:25,536 - test_security - INFO - 测试向过滤端口发送外部BPDU
2025-09-10 23:15:44,957 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:15:45,118 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:15:45,119 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 23:15:45,120 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 23:15:45,120 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 23:15:45,120 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 23:15:45,586 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:15:45,586 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:15:45,587 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:15:45,587 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:15:45,588 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:15:45,588 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:15:45,875 - test_security - INFO - BPDU过滤器功能正常：外部BPDU被忽略，网络保持稳定
2025-09-10 23:15:45,875 - test_security - INFO - 测试BPDU过滤器错误配置场景
2025-09-10 23:15:46,030 - test_security - WARNING - OVS设置BPDU过滤器失败，尝试使用系统文件方法
2025-09-10 23:15:46,127 - test_security - ERROR - 启用BPDU过滤器失败: BPDU过滤器配置失败: 
2025-09-10 23:15:46,128 - test_security - ERROR - BPDU过滤器错误配置测试失败: BPDU过滤器配置失败: 
2025-09-10 23:15:46,417 - test_security - WARNING - 清理命令执行失败: echo 0 > /sys/class/net/SE_ETH2/bridge/ports/eth2/bpdu_filter, 错误: 
2025-09-10 23:15:46,417 - test_security - INFO - BPDU过滤器功能测试完成
2025-09-10 23:15:46,418 - RSTPTest - INFO - 测试完成: test_bpdu_filter_functionality (耗时: 200.81秒)
2025-09-10 23:15:46,418 - RSTPTest - INFO - ============================================================

2025-09-10 23:15:46,419 - RSTPTest - INFO - ============================================================
2025-09-10 23:15:46,419 - RSTPTest - INFO - 开始测试: test_malformed_bpdu_handling
2025-09-10 23:15:46,419 - RSTPTest - INFO - ============================================================
2025-09-10 23:15:46,420 - test_security - INFO - 开始畸形BPDU处理测试
2025-09-10 23:15:46,461 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 23:15:46,461 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 23:15:46,462 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 23:15:46,462 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 23:15:46,462 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 23:15:46,462 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 23:15:46,462 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 23:15:46,462 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-10 23:15:46,462 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-10 23:15:46,991 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-10 23:15:46,991 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 23:15:46,991 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 23:15:47,146 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-10 23:15:48,219 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-10 23:15:48,219 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 23:15:48,219 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 23:15:48,219 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 23:15:48,220 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-10 23:15:48,694 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-10 23:15:49,171 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 23:15:49,171 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 23:15:49,362 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 23:15:49,362 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 23:15:49,362 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 23:15:49,362 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 23:15:49,363 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 23:15:49,363 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 23:15:49,363 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 23:15:49,363 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 23:16:04,989 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 23:16:09,461 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:16:09,588 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:16:09,589 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 23:16:09,589 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 23:16:09,589 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 23:16:09,589 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 23:16:10,774 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 23:16:11,956 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 23:16:11,957 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 23:16:12,051 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 23:16:12,305 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 23:16:12,306 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 23:16:12,306 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 23:16:12,306 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 23:16:12,307 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 23:16:12,307 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 23:16:12,307 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 23:16:12,307 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 23:16:12,784 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 23:16:17,284 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:16:17,416 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:16:17,416 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 23:16:17,416 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 23:16:17,416 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 23:16:17,417 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 23:16:18,615 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 23:16:19,844 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 23:16:19,845 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 23:16:19,940 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 23:16:20,199 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 23:16:20,200 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 23:16:20,200 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-10 23:16:25,619 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:16:25,772 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:16:25,773 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 23:16:25,774 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 23:16:25,774 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 23:16:25,774 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 23:16:26,241 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:16:26,242 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:16:26,243 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:16:26,243 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:16:26,243 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:16:26,243 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:16:26,997 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:16:27,152 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:16:27,153 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 23:16:27,154 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 23:16:27,154 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 23:16:27,154 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 23:16:27,616 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:16:27,617 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:16:27,618 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:16:27,618 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:16:27,618 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:16:27,619 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:16:27,906 - test_security - INFO - 初始网络状态: 稳定
2025-09-10 23:16:27,906 - test_security - INFO - 执行测试: _test_oversized_bpdu
2025-09-10 23:16:32,255 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:16:32,407 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:16:32,408 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 23:16:32,409 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 23:16:32,409 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 23:16:32,409 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 23:16:32,874 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:16:32,874 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:16:32,875 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:16:32,875 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:16:32,875 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:16:32,876 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:16:33,162 - test_security - INFO - _test_oversized_bpdu 网络保持稳定
2025-09-10 23:16:33,162 - test_security - INFO - 执行测试: _test_undersized_bpdu
2025-09-10 23:16:33,214 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

# 创建过小的BPDU（缺少必要字段）
target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 只包含最小字段的BPDU
truncated_bpdu = Raw(load=b"     ")  # 截断的BPDU

packet = eth/llc/truncated_bpdu
sendp(packet, iface=interface, count=5, inter=1, verbose=0)
print("Undersized BPDU sent")
' > /tmp/undersized_bpdu.py
错误: 
2025-09-10 23:16:33,216 - test_security - WARNING - _test_undersized_bpdu 执行异常但继续测试: 
2025-09-10 23:16:33,216 - test_security - INFO - 执行测试: _test_invalid_protocol_id
2025-09-10 23:16:33,216 - test_security - WARNING - TestNode1: SSH连接断开，尝试重连...
2025-09-10 23:16:33,216 - SSH_TestNode1 - INFO - TestNode1: 尝试重新建立SSH连接...
2025-09-10 23:16:33,217 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 23:16:33,341 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 23:16:35,013 - test_security - INFO - TestNode1: 无效协议ID BPDU测试完成
2025-09-10 23:16:38,449 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:16:38,604 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:16:38,605 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 23:16:38,605 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 23:16:38,606 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 23:16:38,606 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 23:16:39,077 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:16:39,078 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:16:39,079 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:16:39,079 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:16:39,079 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:16:39,079 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:16:39,365 - test_security - INFO - _test_invalid_protocol_id 网络保持稳定
2025-09-10 23:16:39,366 - test_security - INFO - 执行测试: _test_invalid_version
2025-09-10 23:16:40,947 - test_security - INFO - TestNode1: 无效版本号BPDU测试完成
2025-09-10 23:16:44,371 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:16:44,520 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:16:44,521 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 23:16:44,521 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 23:16:44,522 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 23:16:44,522 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 23:16:44,988 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:16:44,988 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:16:44,989 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:16:44,990 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:16:44,990 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:16:44,990 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:16:45,278 - test_security - INFO - _test_invalid_version 网络保持稳定
2025-09-10 23:16:45,278 - test_security - INFO - 执行测试: _test_invalid_message_type
2025-09-10 23:16:46,875 - test_security - INFO - TestNode1: 无效消息类型BPDU测试完成
2025-09-10 23:16:50,307 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:16:50,508 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:16:50,509 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 23:16:50,509 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 23:16:50,509 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 23:16:50,509 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 23:16:50,985 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:16:50,986 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:16:50,987 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:16:50,987 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:16:50,987 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:16:50,987 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:16:51,274 - test_security - INFO - _test_invalid_message_type 网络保持稳定
2025-09-10 23:16:51,274 - test_security - INFO - 执行测试: _test_corrupted_fields
2025-09-10 23:16:53,150 - test_security - INFO - TestNode1: 损坏字段BPDU测试完成
2025-09-10 23:16:56,572 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:16:56,728 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:16:56,729 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 23:16:56,729 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 23:16:56,729 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 23:16:56,729 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 23:16:57,201 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:16:57,201 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:16:57,202 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:16:57,203 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:16:57,203 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:16:57,203 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:16:57,490 - test_security - INFO - _test_corrupted_fields 网络保持稳定
2025-09-10 23:17:01,255 - test_security - INFO - 畸形BPDU处理测试完成
2025-09-10 23:17:01,256 - RSTPTest - INFO - 测试完成: test_malformed_bpdu_handling (耗时: 74.84秒)
2025-09-10 23:17:01,256 - RSTPTest - INFO - ============================================================

2025-09-10 23:17:01,258 - RSTPTest - INFO - ============================================================
2025-09-10 23:17:01,258 - RSTPTest - INFO - 开始测试: test_non_standard_bpdu_handling
2025-09-10 23:17:01,258 - RSTPTest - INFO - ============================================================
2025-09-10 23:17:01,259 - test_security - INFO - 开始非标准BPDU处理测试
2025-09-10 23:17:01,263 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 23:17:01,264 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 23:17:01,264 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 23:17:01,264 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 23:17:01,264 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 23:17:01,264 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 23:17:01,265 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 23:17:01,265 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-10 23:17:01,265 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-10 23:17:01,789 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-10 23:17:01,789 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 23:17:01,790 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 23:17:01,944 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-10 23:17:03,025 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-10 23:17:03,025 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 23:17:03,025 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 23:17:03,026 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 23:17:03,026 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-10 23:17:03,500 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-10 23:17:03,977 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 23:17:03,977 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 23:17:04,173 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 23:17:04,173 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 23:17:04,173 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 23:17:04,173 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 23:17:04,174 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 23:17:04,174 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 23:17:04,174 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 23:17:04,174 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 23:17:04,666 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 23:17:09,164 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:17:09,287 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:17:09,287 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 23:17:09,288 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 23:17:09,288 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 23:17:09,288 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 23:17:10,477 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 23:17:11,674 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 23:17:11,674 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 23:17:11,770 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 23:17:12,034 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 23:17:12,035 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 23:17:12,035 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 23:17:12,035 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 23:17:12,035 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 23:17:12,035 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 23:17:12,036 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 23:17:12,036 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 23:17:12,529 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 23:17:17,040 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:17:17,166 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:17:17,167 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 23:17:17,167 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 23:17:17,167 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 23:17:17,167 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 23:17:18,386 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 23:17:19,624 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 23:17:19,624 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 23:17:19,722 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 23:17:19,990 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 23:17:19,990 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 23:17:19,990 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-10 23:17:24,992 - test_security - INFO - 执行测试: _test_pvst_plus_bpdu
2025-09-10 23:17:25,043 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

# PVST+ 使用不同的目标MAC地址
pvst_mac = "01:00:0c:cc:cc:cd"
interface = "eth0"

eth = Ether(dst=pvst_mac, src="00:11:22:33:44:55")
# PVST+ 使用SNAP封装
snap = SNAP(OUI=0x00000c, code=0x010b)
# 模拟PVST+ BPDU结构
pvst_bpdu = Raw(load=b"    " + b" " * 30 + b" ")  # 包含VLAN ID

packet = eth/snap/pvst_bpdu
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("PVST+ BPDU sent")
' > /tmp/pvst_bpdu.py
错误: 
2025-09-10 23:17:25,045 - test_security - ERROR - _test_pvst_plus_bpdu 执行失败: 
2025-09-10 23:17:25,045 - test_security - INFO - 执行测试: _test_cisco_proprietary_bpdu
2025-09-10 23:17:25,045 - SSH_TestNode1 - WARNING - TestNode1: SSH连接已断开，尝试重连...
2025-09-10 23:17:25,169 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 23:17:25,295 - SSH_TestNode1 - INFO - TestNode1: SSH重连成功
2025-09-10 23:17:25,340 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 模拟包含Cisco专有扩展的BPDU
cisco_bpdu = Raw(load=b"    " + b" " * 30 + 
                     b" )   ")  # Cisco OUI + 专有数据

packet = eth/llc/cisco_bpdu
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("Cisco proprietary BPDU sent")
' > /tmp/cisco_bpdu.py
错误: 
2025-09-10 23:17:25,341 - test_security - ERROR - _test_cisco_proprietary_bpdu 执行失败: 
2025-09-10 23:17:25,342 - test_security - INFO - 执行测试: _test_vlan_tagged_bpdu
2025-09-10 23:17:25,342 - SSH_TestNode1 - WARNING - TestNode1: SSH连接已断开，尝试重连...
2025-09-10 23:17:25,473 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 23:17:25,614 - SSH_TestNode1 - INFO - TestNode1: SSH重连成功
2025-09-10 23:17:32,943 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:17:33,095 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:17:33,096 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 23:17:33,096 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 23:17:33,097 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 23:17:33,097 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 23:17:33,557 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:17:33,557 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:17:33,558 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:17:33,559 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:17:33,559 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:17:33,559 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:17:33,845 - test_security - INFO - _test_vlan_tagged_bpdu 网络保持稳定
2025-09-10 23:17:33,846 - test_security - INFO - 执行测试: _test_unknown_tlv_bpdu
2025-09-10 23:17:33,898 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 标准BPDU + 未知TLV
standard_bpdu = b"    " + b" " * 30
unknown_tlv = b"ÿÿ "  # 未知类型和长度的TLV
bpdu_with_tlv = Raw(load=standard_bpdu + unknown_tlv)

packet = eth/llc/bpdu_with_tlv
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("BPDU with unknown TLV sent")
' > /tmp/unknown_tlv.py
错误: 
2025-09-10 23:17:33,899 - test_security - ERROR - _test_unknown_tlv_bpdu 执行失败: 
2025-09-10 23:17:34,069 - test_security - INFO - 非标准BPDU处理测试完成
2025-09-10 23:17:34,070 - RSTPTest - INFO - 测试完成: test_non_standard_bpdu_handling (耗时: 32.81秒)
2025-09-10 23:17:34,071 - RSTPTest - INFO - ============================================================

2025-09-10 23:17:34,072 - RSTPTest - INFO - ============================================================
2025-09-10 23:17:34,072 - RSTPTest - INFO - 开始测试: test_bpdu_guard_functionality
2025-09-10 23:17:34,073 - RSTPTest - INFO - ============================================================
2025-09-10 23:17:34,073 - test_security - INFO - 开始BPDU防护功能测试
2025-09-10 23:17:34,077 - NetworkTopology - INFO - 创建RSTP线性拓扑...
2025-09-10 23:17:34,078 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 23:17:34,078 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 23:17:34,078 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 23:17:34,078 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 23:17:34,078 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 23:17:34,078 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 23:17:34,079 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-10 23:17:34,079 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-10 23:17:34,608 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-10 23:17:34,608 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 23:17:34,609 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 23:17:34,764 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-10 23:17:35,836 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"32768
2025-09-10 23:17:35,836 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 23:17:35,836 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 23:17:35,837 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br4']
2025-09-10 23:17:35,837 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-10 23:17:36,317 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 23:17:36,317 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 23:17:36,508 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 23:17:36,508 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 23:17:36,509 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 23:17:36,509 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 23:17:36,509 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 23:17:36,509 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 23:17:36,509 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 23:17:36,509 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 23:17:36,510 - SSH_TestNode1 - WARNING - TestNode1: SSH连接已断开，尝试重连...
2025-09-10 23:17:36,627 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 23:17:36,762 - SSH_TestNode1 - INFO - TestNode1: SSH重连成功
2025-09-10 23:17:37,244 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 23:17:41,724 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:17:41,858 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:17:41,858 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 23:17:41,858 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 23:17:41,858 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 23:17:41,858 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 23:17:43,051 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 23:17:44,238 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 23:17:44,238 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 23:17:44,336 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 23:17:44,596 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 23:17:44,596 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 23:17:44,596 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 23:17:44,597 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 23:17:44,597 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 23:17:44,597 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 23:17:44,597 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 23:17:44,597 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 23:17:45,092 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 23:17:49,573 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:17:49,701 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:17:49,701 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 23:17:49,701 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 23:17:49,702 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0']
2025-09-10 23:17:49,702 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 23:17:50,885 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 23:17:50,885 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 23:17:50,983 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 23:17:51,247 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 23:17:51,247 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 23:17:51,247 - NetworkTopology - INFO - 线性拓扑创建完成
2025-09-10 23:17:56,716 - test_security - INFO - 边缘端口 eth2 初始状态: {}
2025-09-10 23:17:56,716 - test_security - INFO - 向边缘端口 eth2 发送BPDU
2025-09-10 23:18:03,811 - test_security - INFO - BPDU防护触发后端口 eth2 状态: {}
2025-09-10 23:18:03,811 - test_security - ERROR - BPDU防护功能异常：端口未被禁用
2025-09-10 23:18:04,039 - RSTPTest - INFO - 测试完成: test_bpdu_guard_functionality (耗时: 29.97秒)
2025-09-10 23:18:04,039 - RSTPTest - INFO - ============================================================

2025-09-10 23:18:04,041 - RSTPTest - INFO - ============================================================
2025-09-10 23:18:04,041 - RSTPTest - INFO - 开始测试: test_root_guard_functionality
2025-09-10 23:18:04,042 - RSTPTest - INFO - ============================================================
2025-09-10 23:18:04,042 - test_security - INFO - 开始根防护功能测试
2025-09-10 23:18:04,063 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 23:18:04,063 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 23:18:04,064 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 23:18:04,064 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 23:18:04,064 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 23:18:04,064 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 23:18:04,064 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 23:18:04,065 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-10 23:18:04,065 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-10 23:18:04,592 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-10 23:18:04,593 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 23:18:04,593 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 23:18:04,751 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-10 23:18:05,815 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-10 23:18:05,816 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 23:18:05,816 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 23:18:05,816 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 23:18:05,817 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-10 23:18:06,292 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-10 23:18:06,768 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 23:18:06,768 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 23:18:06,960 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 23:18:06,960 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 23:18:06,960 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 23:18:06,961 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 23:18:06,961 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 23:18:06,961 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 23:18:06,961 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 23:18:06,961 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 23:18:07,476 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 23:18:11,969 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:18:12,092 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:18:12,092 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 23:18:12,092 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 23:18:12,092 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 23:18:12,093 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 23:18:13,275 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 23:18:14,470 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 23:18:14,470 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 23:18:14,566 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 23:18:14,830 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 23:18:14,830 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 23:18:14,830 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 23:18:14,831 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 23:18:14,831 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 23:18:14,831 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 23:18:14,831 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 23:18:14,831 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 23:18:15,310 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 23:18:19,810 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:18:19,933 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:18:19,933 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 23:18:19,933 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 23:18:19,933 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 23:18:19,934 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 23:18:21,096 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 23:18:22,313 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 23:18:22,313 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 23:18:22,407 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 23:18:22,668 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 23:18:22,668 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 23:18:22,669 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-10 23:18:28,097 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:18:28,250 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:18:28,251 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 23:18:28,251 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 23:18:28,252 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 23:18:28,252 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 23:18:28,723 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:18:28,723 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:18:28,725 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:18:28,725 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:18:28,725 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:18:28,725 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:18:29,012 - test_security - INFO - 当前根桥ID: unknown
2025-09-10 23:18:29,339 - test_security - WARNING - 启用根防护失败: 
2025-09-10 23:18:29,340 - test_security - INFO - 在端口 eth1 启用根防护
2025-09-10 23:18:29,740 - test_security - INFO - 端口 eth1 初始状态: unknown
2025-09-10 23:18:29,740 - test_security - INFO - 发送更优BPDU尝试劫持根桥
2025-09-10 23:18:46,027 - test_security - INFO - 根防护触发后端口 eth1 状态: unknown
2025-09-10 23:18:46,489 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 23:18:46,641 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 23:18:46,643 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-10 23:18:46,644 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-10 23:18:46,644 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-10 23:18:46,644 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-10 23:18:47,103 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 23:18:47,103 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 23:18:47,104 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-10 23:18:47,105 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-10 23:18:47,105 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-10 23:18:47,105 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-10 23:18:47,391 - test_security - INFO - 根防护功能正常：根桥身份未被劫持
2025-09-10 23:18:47,392 - test_security - ERROR - 根防护功能异常：端口未进入阻塞状态
2025-09-10 23:18:47,392 - test_security - INFO - 测试根防护端口 eth1 恢复功能
2025-09-10 23:18:47,392 - test_security - INFO - 停止发送更优BPDU
2025-09-10 23:18:57,751 - test_security - INFO - 端口恢复后状态: unknown
2025-09-10 23:18:57,751 - test_security - WARNING - 根防护端口未能自动恢复
2025-09-10 23:18:57,991 - RSTPTest - INFO - 测试完成: test_root_guard_functionality (耗时: 53.95秒)
2025-09-10 23:18:57,992 - RSTPTest - INFO - ============================================================

2025-09-10 23:18:57,994 - RSTPTest - INFO - ============================================================
2025-09-10 23:18:57,994 - RSTPTest - INFO - 开始测试: test_loop_guard_functionality
2025-09-10 23:18:57,994 - RSTPTest - INFO - ============================================================
2025-09-10 23:18:57,995 - test_security - INFO - 开始环路防护功能测试
2025-09-10 23:18:57,995 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 23:18:57,995 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 23:18:57,995 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 23:18:57,996 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 23:18:57,996 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 23:18:57,996 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 23:18:57,996 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 23:18:57,996 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-10 23:18:57,996 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-10 23:18:58,503 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-10 23:18:58,503 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 23:18:58,504 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 23:18:58,659 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-10 23:18:59,739 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-10 23:18:59,739 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 23:18:59,739 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 23:18:59,739 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 23:18:59,740 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-10 23:19:00,227 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-10 23:19:00,712 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 23:19:00,712 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 23:19:00,903 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 23:19:00,903 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 23:19:00,903 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 23:19:00,904 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 23:19:00,904 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 23:19:00,904 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 23:19:00,904 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 23:19:00,904 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 23:19:01,404 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 23:19:05,919 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:19:06,044 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:19:06,044 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 23:19:06,044 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 23:19:06,044 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 23:19:06,045 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 23:19:07,247 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 23:19:08,434 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 23:19:08,434 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 23:19:08,530 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 23:19:08,798 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 23:19:08,798 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 23:19:08,798 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 23:19:08,798 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 23:19:08,799 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 23:19:08,799 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 23:19:08,799 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 23:19:08,799 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 23:19:09,291 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 23:19:13,813 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 23:19:13,938 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 23:19:13,938 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 23:19:13,938 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 23:19:13,938 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 23:19:13,939 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 23:19:15,139 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 23:19:16,388 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 23:19:16,389 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 23:19:16,484 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 23:19:16,751 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 23:19:16,751 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 23:19:16,752 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-10 23:19:22,034 - test_security - WARNING - 启用环路防护失败: 
2025-09-10 23:19:22,034 - test_security - INFO - 在端口 eth1 启用环路防护
2025-09-10 23:19:22,434 - test_security - INFO - 端口 eth1 初始状态: unknown
2025-09-10 23:19:22,435 - test_security - INFO - 模拟单向链路故障
2025-09-10 23:19:22,435 - test_security - INFO - 停止从测试节点发送BPDU
2025-09-10 23:19:42,914 - test_security - INFO - 环路防护触发后端口 eth1 状态: unknown
2025-09-10 23:19:42,914 - test_security - WARNING - 环路防护功能异常：端口未进入阻塞状态
2025-09-10 23:19:42,914 - test_security - INFO - 测试环路防护端口 eth1 恢复功能
2025-09-10 23:19:42,914 - test_security - INFO - 恢复BPDU发送
2025-09-10 23:19:53,405 - test_security - INFO - 端口恢复后状态: unknown
2025-09-10 23:19:53,406 - test_security - WARNING - 环路防护端口未能自动恢复
2025-09-10 23:19:53,622 - test_security - INFO - 环路防护功能测试完成
2025-09-10 23:19:53,623 - RSTPTest - INFO - 测试完成: test_loop_guard_functionality (耗时: 55.63秒)
2025-09-10 23:19:53,623 - RSTPTest - INFO - ============================================================

2025-09-10 23:19:53,623 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 23:19:53,623 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 23:19:53,624 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 23:19:54,236 - __main__ - INFO - ============================================================
2025-09-10 23:19:54,236 - __main__ - INFO - 测试完成，返回码: 1
2025-09-10 23:19:54,237 - __main__ - INFO - ============================================================
