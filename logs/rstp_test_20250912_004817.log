2025-09-12 00:48:17,645 - root - INFO - 日志系统初始化完成，日志文件: logs\rstp_test_20250912_004817.log
2025-09-12 00:48:18,011 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-12 00:48:18,011 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-12 00:48:18,133 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-12 00:48:18,134 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-12 00:48:18,271 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-12 00:48:18,271 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-12 00:48:18,273 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-12 00:48:18,274 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-12 00:48:18,276 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-12 00:48:18,277 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-12 00:48:18,359 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-12 00:48:18,360 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-12 00:48:28,488 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-12 00:48:28,488 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-12 00:48:28,488 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-12 00:48:28,488 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-12 00:48:28,489 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-12 00:48:28,545 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-12 00:48:28,545 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-12 00:48:38,665 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-12 00:48:38,665 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-12 00:48:38,666 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-12 00:48:38,667 - RSTPTest - INFO - ============================================================
2025-09-12 00:48:38,667 - RSTPTest - INFO - 开始测试: test_port_state_transitions
2025-09-12 00:48:38,667 - RSTPTest - INFO - ============================================================
2025-09-12 00:48:38,668 - test_additional_rstp - INFO - 开始端口状态转换测试
2025-09-12 00:48:38,668 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-12 00:48:38,668 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-12 00:48:38,668 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-12 00:48:38,668 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-12 00:48:38,669 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-12 00:48:38,669 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-12 00:48:38,669 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-12 00:48:38,669 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-12 00:48:38,669 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-12 00:48:39,140 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-12 00:48:39,141 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-12 00:48:39,141 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-12 00:48:39,296 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-12 00:48:40,364 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-12 00:48:40,364 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-12 00:48:40,364 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-12 00:48:40,364 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-12 00:48:40,365 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-12 00:48:40,836 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-12 00:48:41,312 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-12 00:48:41,313 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-12 00:48:41,505 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-12 00:48:41,506 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-12 00:48:41,506 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-12 00:48:41,507 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-12 00:48:41,507 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-12 00:48:41,507 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-12 00:48:41,507 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-12 00:48:41,508 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-12 00:49:11,858 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-12 00:50:45,924 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 00:50:56,003 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 00:50:56,004 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-12 00:50:56,004 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-12 00:50:56,004 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-12 00:50:56,005 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-12 00:51:55,322 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-12 00:52:35,769 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-12 00:52:35,770 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-12 00:52:35,866 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-12 00:52:39,160 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-12 00:52:39,160 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-12 00:52:39,160 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-12 00:52:39,160 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-12 00:52:39,161 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-12 00:52:39,161 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-12 00:52:39,161 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-12 00:52:39,161 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-12 00:53:09,512 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-12 00:54:43,557 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 00:54:53,635 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 00:54:53,636 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-12 00:54:53,636 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-12 00:54:53,636 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-12 00:54:53,636 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-12 00:55:40,966 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-12 00:56:21,412 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-12 00:56:21,413 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-12 00:56:21,507 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-12 00:56:24,803 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-12 00:56:24,804 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-12 00:56:24,804 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-12 00:56:24,804 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-12 00:56:24,804 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级12288 -> mstpd优先级3)
2025-09-12 00:56:34,883 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-12 00:56:34,883 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 32768 (方法: ovs)
2025-09-12 00:56:34,884 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-12 00:56:35,010 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-12 00:56:40,158 - test_additional_rstp - INFO - 使用网桥: SE_ETH2
2025-09-12 00:56:40,159 - test_additional_rstp - INFO - === 步骤1: 禁用端口触发状态转换 ===
2025-09-12 00:56:40,571 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 00:56:40,726 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 00:56:40,727 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-12 00:56:40,728 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 00:56:40,728 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-12 00:56:40,728 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 00:56:41,191 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 00:56:41,191 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 00:56:41,192 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 00:56:41,192 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 00:56:41,192 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 00:56:41,193 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 00:56:41,481 - test_additional_rstp - INFO - 选择测试端口: br3
2025-09-12 00:56:41,481 - FaultInjector_DUT - INFO - 断开链路: br3
2025-09-12 00:56:51,552 - FaultInjector_DUT - INFO - 链路已断开: br3
2025-09-12 00:56:51,552 - test_additional_rstp - INFO - 已禁用端口 br3
2025-09-12 00:56:54,553 - test_additional_rstp - INFO - === 步骤2: 重新启用端口并监控状态转换 ===
2025-09-12 00:56:54,554 - FaultInjector_DUT - INFO - 恢复链路: br3
2025-09-12 00:56:54,676 - FaultInjector_DUT - INFO - 链路已恢复: br3
2025-09-12 00:56:54,676 - test_additional_rstp - INFO - 已启用端口 br3，开始监控状态转换
2025-09-12 00:56:56,091 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 00:56:56,242 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-12 00:56:56,243 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-12 00:56:56,244 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 00:56:56,244 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-12 00:56:56,244 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 00:56:56,709 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 00:56:56,709 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 00:56:56,710 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 00:56:56,711 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 00:56:56,711 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 00:56:56,711 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 00:56:56,998 - test_additional_rstp - INFO - T+1.1s: br3 -> 状态=disabled, 角色=root
2025-09-12 00:56:58,418 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 00:56:58,570 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 00:56:58,571 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-12 00:56:58,571 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 00:56:58,572 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-12 00:56:58,572 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 00:56:59,040 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 00:56:59,041 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 00:56:59,042 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 00:56:59,042 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 00:56:59,042 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 00:56:59,042 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 00:56:59,329 - test_additional_rstp - INFO - T+3.4s: br3 -> 状态=forwarding, 角色=root
2025-09-12 00:57:00,747 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 00:57:00,907 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 00:57:00,908 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-12 00:57:00,908 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 00:57:00,908 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-12 00:57:00,908 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 00:57:01,365 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 00:57:01,366 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 00:57:01,367 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:01,367 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:01,367 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:01,367 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 00:57:03,070 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 00:57:03,226 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 00:57:03,227 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-12 00:57:03,227 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 00:57:03,227 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-12 00:57:03,227 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 00:57:03,687 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 00:57:03,688 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 00:57:03,689 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:03,689 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:03,689 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:03,689 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 00:57:05,390 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 00:57:05,543 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 00:57:05,544 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-12 00:57:05,544 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 00:57:05,545 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-12 00:57:05,545 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 00:57:05,997 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 00:57:05,998 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 00:57:05,999 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:05,999 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:05,999 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:05,999 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 00:57:07,702 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 00:57:07,854 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 00:57:07,855 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-12 00:57:07,855 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 00:57:07,855 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-12 00:57:07,856 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 00:57:08,316 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 00:57:08,316 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 00:57:08,317 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:08,318 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:08,318 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:08,318 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 00:57:10,019 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 00:57:10,170 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 00:57:10,171 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-12 00:57:10,171 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 00:57:10,171 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-12 00:57:10,171 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 00:57:10,636 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 00:57:10,637 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 00:57:10,638 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:10,638 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:10,638 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:10,639 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 00:57:12,338 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 00:57:12,491 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 00:57:12,492 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-12 00:57:12,492 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 00:57:12,492 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-12 00:57:12,492 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 00:57:12,951 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 00:57:12,952 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 00:57:12,953 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:12,953 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:12,954 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:12,954 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 00:57:14,654 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 00:57:14,806 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 00:57:14,807 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-12 00:57:14,808 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 00:57:14,808 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-12 00:57:14,808 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 00:57:15,268 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 00:57:15,268 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 00:57:15,269 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:15,269 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:15,270 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:15,270 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 00:57:16,983 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 00:57:17,135 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 00:57:17,136 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-12 00:57:17,136 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 00:57:17,136 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-12 00:57:17,137 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 00:57:17,604 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 00:57:17,604 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 00:57:17,605 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:17,605 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:17,606 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:17,606 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 00:57:19,303 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 00:57:19,458 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 00:57:19,459 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-12 00:57:19,460 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 00:57:19,460 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-12 00:57:19,460 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 00:57:19,920 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 00:57:19,920 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 00:57:19,921 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:19,921 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:19,921 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:19,921 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 00:57:21,625 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 00:57:21,784 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 00:57:21,785 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-12 00:57:21,785 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 00:57:21,786 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-12 00:57:21,786 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 00:57:22,252 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 00:57:22,252 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 00:57:22,253 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:22,254 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:22,254 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:22,254 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 00:57:23,954 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 00:57:24,106 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 00:57:24,107 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-12 00:57:24,107 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 00:57:24,108 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-12 00:57:24,108 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 00:57:24,567 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 00:57:24,567 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 00:57:24,569 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:24,569 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:24,569 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:24,569 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 00:57:26,270 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 00:57:26,422 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 00:57:26,423 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-12 00:57:26,424 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 00:57:26,424 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-12 00:57:26,424 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 00:57:26,880 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 00:57:26,880 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 00:57:26,881 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:26,881 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:26,882 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:26,882 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 00:57:28,582 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 00:57:28,734 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 00:57:28,735 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-12 00:57:28,736 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 00:57:28,736 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-12 00:57:28,736 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 00:57:29,195 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 00:57:29,196 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 00:57:29,198 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:29,198 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:29,198 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:29,198 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 00:57:29,485 - test_additional_rstp - INFO - === 步骤3: 验证状态转换序列 ===
2025-09-12 00:57:29,485 - test_additional_rstp - INFO - 观察到的状态转换序列:
2025-09-12 00:57:29,485 - test_additional_rstp - INFO -   1. T+1.1s: disabled (root)
2025-09-12 00:57:29,486 - test_additional_rstp - INFO -   2. T+3.4s: forwarding (root)
2025-09-12 00:57:29,486 - test_additional_rstp - INFO - 未观察到Learning状态 - 可能发生了快速转换
2025-09-12 00:57:29,486 - test_additional_rstp - INFO - ✓ 端口最终达到Forwarding状态
2025-09-12 00:57:29,486 - test_additional_rstp - INFO - 这可能是RSTP快速转换的结果（Proposal/Agreement机制）
2025-09-12 00:57:29,487 - test_additional_rstp - INFO - === 步骤4: 验证最终状态 ===
2025-09-12 00:57:29,940 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 00:57:30,095 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 00:57:30,096 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-12 00:57:30,096 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 00:57:30,097 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-12 00:57:30,097 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 00:57:30,560 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 00:57:30,561 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 00:57:30,562 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:30,563 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:30,563 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 00:57:30,563 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 00:57:30,861 - test_additional_rstp - INFO - 最终状态: br3 -> 状态=forwarding, 角色=root
2025-09-12 00:57:30,861 - test_additional_rstp - INFO - ✓ 端口成功恢复到Forwarding状态
2025-09-12 00:57:30,861 - test_additional_rstp - INFO - 端口状态转换测试完成
2025-09-12 00:57:30,868 - RSTPTest - INFO - 测试完成: test_port_state_transitions (耗时: 532.20秒)
2025-09-12 00:57:30,868 - RSTPTest - INFO - ============================================================

2025-09-12 00:57:30,871 - RSTPTest - INFO - ============================================================
2025-09-12 00:57:30,871 - RSTPTest - INFO - 开始测试: test_bpdu_propagation_and_keepalive
2025-09-12 00:57:30,871 - RSTPTest - INFO - ============================================================
2025-09-12 00:57:30,872 - test_additional_rstp - INFO - 开始BPDU传播和保活机制测试
2025-09-12 00:57:30,872 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-12 00:57:30,872 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-12 00:57:30,873 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-12 00:57:30,873 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-12 00:57:30,873 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-12 00:57:30,873 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-12 00:57:30,873 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-12 00:57:30,874 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-12 00:57:30,874 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-12 00:57:31,376 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-12 00:57:31,376 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-12 00:57:31,377 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-12 00:57:31,531 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-12 00:57:32,612 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-12 00:57:32,613 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-12 00:57:32,613 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-12 00:57:32,613 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-12 00:57:32,613 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-12 00:57:33,087 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-12 00:57:33,564 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-12 00:57:33,564 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-12 00:57:33,795 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-12 00:57:33,796 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-12 00:57:33,796 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-12 00:57:33,796 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-12 00:57:33,797 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-12 00:57:33,797 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-12 00:57:33,797 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-12 00:57:33,797 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-12 00:57:47,265 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-12 00:57:51,758 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 00:57:51,888 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 00:57:51,889 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-12 00:57:51,889 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-12 00:57:51,889 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-12 00:57:51,889 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-12 00:57:53,069 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-12 00:57:54,264 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-12 00:57:54,265 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-12 00:57:54,360 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-12 00:57:54,629 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-12 00:57:54,630 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-12 00:57:54,630 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-12 00:57:54,630 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-12 00:57:54,630 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-12 00:57:54,630 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-12 00:57:54,631 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-12 00:57:54,631 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-12 00:58:07,209 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-12 00:58:11,713 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 00:58:11,839 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 00:58:11,839 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-12 00:58:11,839 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-12 00:58:11,839 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-12 00:58:11,839 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-12 00:58:13,027 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-12 00:58:14,223 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-12 00:58:14,223 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-12 00:58:14,318 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-12 00:58:14,585 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-12 00:58:14,586 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-12 00:58:14,586 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-12 00:58:14,586 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-12 00:58:14,586 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级12288 -> mstpd优先级3)
2025-09-12 00:58:14,718 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-12 00:58:14,718 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 32768 (方法: ovs)
2025-09-12 00:58:14,719 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-12 00:58:14,840 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-12 00:58:14,983 - NetworkTopology_TestNode2 - INFO - TestNode2: 设置网桥优先级 br0 = 24576 (方法: mstpd)
2025-09-12 00:58:14,983 - NetworkTopology_TestNode2 - INFO - TestNode2: 执行mstpd设置优先级命令 (标准优先级24576 -> mstpd优先级6)
2025-09-12 00:58:15,114 - NetworkTopology_TestNode2 - INFO - TestNode2: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-12 00:58:23,115 - test_additional_rstp - INFO - === 步骤1: 验证分布式BPDU生成 ===
2025-09-12 00:58:23,163 - test_additional_rstp - INFO - 检测到网桥接口: ['18:', '26:']
2025-09-12 00:58:23,163 - test_additional_rstp - INFO - 在接口 18: 上捕获BPDU...
2025-09-12 00:58:23,164 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: 18:, 数量: 10)
2025-09-12 00:58:23,288 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-12 00:58:23,288 - test_additional_rstp - WARNING - 在 18: 上未捕获到BPDU
2025-09-12 00:58:23,289 - test_additional_rstp - INFO - 在接口 26: 上捕获BPDU...
2025-09-12 00:58:23,289 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: 26:, 数量: 10)
2025-09-12 00:58:23,396 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-12 00:58:23,396 - test_additional_rstp - WARNING - 在 26: 上未捕获到BPDU
2025-09-12 00:58:23,396 - test_additional_rstp - INFO - 总共捕获 0 个BPDU，来自 0 个不同源
2025-09-12 00:58:23,397 - test_additional_rstp - WARNING - 未检测到BPDU传播
2025-09-12 00:58:23,397 - test_additional_rstp - INFO - BPDU传播和保活机制测试完成
2025-09-12 00:58:23,398 - RSTPTest - INFO - 测试完成: test_bpdu_propagation_and_keepalive (耗时: 52.53秒)
2025-09-12 00:58:23,398 - RSTPTest - INFO - ============================================================

2025-09-12 00:58:23,399 - RSTPTest - INFO - ============================================================
2025-09-12 00:58:23,399 - RSTPTest - INFO - 开始测试: test_disabled_port_exclusion_enhanced
2025-09-12 00:58:23,399 - RSTPTest - INFO - ============================================================
2025-09-12 00:58:23,400 - test_additional_rstp - INFO - 开始增强的禁用端口排除测试
2025-09-12 00:58:23,400 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-12 00:58:23,400 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-12 00:58:23,400 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-12 00:58:23,401 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-12 00:58:23,401 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-12 00:58:23,401 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-12 00:58:23,401 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-12 00:58:23,401 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-12 00:58:23,401 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-12 00:58:23,891 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-12 00:58:23,892 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-12 00:58:23,892 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-12 00:58:24,047 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-12 00:58:25,102 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-12 00:58:25,102 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-12 00:58:25,103 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-12 00:58:25,103 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-12 00:58:25,103 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-12 00:58:25,579 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-12 00:58:26,059 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-12 00:58:26,060 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-12 00:58:26,251 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-12 00:58:26,251 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-12 00:58:26,251 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-12 00:58:26,252 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-12 00:58:26,252 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-12 00:58:26,252 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-12 00:58:26,252 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-12 00:58:26,252 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-12 00:58:26,750 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-12 00:58:31,252 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 00:58:31,374 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 00:58:31,375 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-12 00:58:31,375 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-12 00:58:31,375 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-12 00:58:31,375 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-12 00:58:32,593 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-12 00:58:33,767 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-12 00:58:33,768 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-12 00:58:33,864 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-12 00:58:34,130 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-12 00:58:34,130 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-12 00:58:34,130 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-12 00:58:34,130 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-12 00:58:34,131 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-12 00:58:34,131 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-12 00:58:34,131 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-12 00:58:34,131 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-12 00:58:34,641 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-12 00:58:39,142 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 00:58:39,270 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 00:58:39,271 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-12 00:58:39,271 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-12 00:58:39,271 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-12 00:58:39,271 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-12 00:58:40,479 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-12 00:58:41,652 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-12 00:58:41,652 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-12 00:58:41,749 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-12 00:58:42,018 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-12 00:58:42,018 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-12 00:58:42,018 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-12 00:58:42,019 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-12 00:58:42,019 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级12288 -> mstpd优先级3)
2025-09-12 00:58:42,152 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-12 00:58:42,153 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 32768 (方法: ovs)
2025-09-12 00:58:42,153 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-12 00:58:42,271 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-12 00:58:47,828 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 00:58:47,981 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 00:58:47,982 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-12 00:58:47,982 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 00:58:47,982 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-12 00:58:47,982 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 00:58:48,446 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 00:58:48,446 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 00:58:48,447 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 00:58:48,447 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 00:58:48,448 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 00:58:48,448 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 00:58:48,735 - test_additional_rstp - INFO - 初始活动端口数量: 2
2025-09-12 00:58:48,735 - test_additional_rstp - INFO - === 步骤1: 禁用端口 ===
2025-09-12 00:58:48,736 - test_additional_rstp - INFO - 禁用端口: br3
2025-09-12 00:58:48,736 - FaultInjector_DUT - INFO - 断开链路: br3
2025-09-12 00:58:58,808 - FaultInjector_DUT - INFO - 链路已断开: br3
2025-09-12 00:59:01,808 - test_additional_rstp - INFO - === 步骤2: 验证禁用端口被排除 ===
2025-09-12 00:59:02,220 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 00:59:02,373 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 20000    128.2


2025-09-12 00:59:02,374 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-12 00:59:02,374 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 00:59:02,374 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-12 00:59:02,374 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 00:59:02,837 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 00:59:02,837 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 00:59:02,839 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 00:59:02,839 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 00:59:02,839 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 00:59:02,840 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 00:59:03,127 - test_additional_rstp - INFO - 禁用端口状态: disabled
2025-09-12 00:59:03,127 - test_additional_rstp - INFO - ✓ 端口正确标记为DISABLED
2025-09-12 00:59:03,128 - test_additional_rstp - INFO - 禁用后剩余活动端口: 1
2025-09-12 00:59:03,128 - test_additional_rstp - INFO - ✓ 网络在禁用端口后仍然正常收敛
2025-09-12 00:59:03,128 - test_additional_rstp - INFO - === 步骤3: 重新启用端口 ===
2025-09-12 00:59:03,128 - FaultInjector_DUT - INFO - 恢复链路: br3
2025-09-12 00:59:03,293 - FaultInjector_DUT - INFO - 链路已恢复: br3
2025-09-12 00:59:03,294 - test_additional_rstp - INFO - 重新启用端口: br3
2025-09-12 00:59:08,294 - test_additional_rstp - INFO - === 步骤4: 验证端口重新参与RSTP ===
2025-09-12 00:59:08,704 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 00:59:08,857 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 00:59:08,858 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-12 00:59:08,858 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 00:59:08,858 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-12 00:59:08,859 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 00:59:09,323 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 00:59:09,323 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 00:59:09,324 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 00:59:09,325 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 00:59:09,325 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 00:59:09,325 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 00:59:09,611 - test_additional_rstp - INFO - 重新启用后端口状态: forwarding
2025-09-12 00:59:09,611 - test_additional_rstp - INFO - 重新启用后端口角色: root
2025-09-12 00:59:09,611 - test_additional_rstp - INFO - ✓ 端口成功重新参与RSTP
2025-09-12 00:59:09,611 - test_additional_rstp - INFO - 最终活动端口数量: 2
2025-09-12 00:59:09,612 - test_additional_rstp - INFO - ✓ 所有端口都重新参与RSTP
2025-09-12 00:59:09,612 - test_additional_rstp - INFO - 增强的禁用端口排除测试完成
2025-09-12 00:59:09,613 - RSTPTest - INFO - 测试完成: test_disabled_port_exclusion_enhanced (耗时: 46.21秒)
2025-09-12 00:59:09,613 - RSTPTest - INFO - ============================================================

2025-09-12 00:59:09,613 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-12 00:59:09,613 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-12 00:59:09,614 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-12 00:59:09,752 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-12 00:59:09,752 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-12 00:59:09,871 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-12 00:59:09,871 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-12 00:59:10,020 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-12 00:59:10,021 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-12 00:59:10,021 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-12 00:59:10,022 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-12 00:59:10,022 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-12 00:59:10,022 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-12 00:59:10,080 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-12 00:59:10,081 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-12 00:59:10,256 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-12 00:59:10,256 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-12 00:59:10,256 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-12 00:59:10,257 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-12 00:59:10,257 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-12 00:59:10,314 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-12 00:59:10,314 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-12 00:59:10,483 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-12 00:59:10,484 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-12 00:59:10,484 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-12 00:59:10,484 - RSTPTest - INFO - ============================================================
2025-09-12 00:59:10,485 - RSTPTest - INFO - 开始测试: test_proposal_agreement_handshake
2025-09-12 00:59:10,485 - RSTPTest - INFO - ============================================================
2025-09-12 00:59:10,486 - test_advanced_rstp_mechanisms - INFO - 开始测试RSTP Proposal/Agreement握手机制
2025-09-12 00:59:10,486 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-12 00:59:10,486 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-12 00:59:10,486 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-12 00:59:10,486 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-12 00:59:10,487 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-12 00:59:10,487 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-12 00:59:10,487 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-12 00:59:10,487 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-12 00:59:10,487 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-12 00:59:10,966 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-12 00:59:10,967 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-12 00:59:10,967 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-12 00:59:11,126 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-12 00:59:12,230 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-12 00:59:12,230 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-12 00:59:12,230 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-12 00:59:12,231 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-12 00:59:12,231 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-12 00:59:12,718 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-12 00:59:13,194 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-12 00:59:13,194 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-12 00:59:13,386 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-12 00:59:13,387 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-12 00:59:13,387 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-12 00:59:13,387 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-12 00:59:13,387 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-12 00:59:13,387 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-12 00:59:13,388 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-12 00:59:13,388 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-12 00:59:13,901 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-12 00:59:18,447 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 00:59:18,575 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 00:59:18,576 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-12 00:59:18,576 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-12 00:59:18,576 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-12 00:59:18,576 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-12 00:59:19,780 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-12 00:59:20,960 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-12 00:59:20,961 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-12 00:59:21,056 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-12 00:59:21,321 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-12 00:59:21,321 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-12 00:59:21,321 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-12 00:59:21,321 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-12 00:59:21,321 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-12 00:59:21,322 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-12 00:59:21,322 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-12 00:59:21,322 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-12 00:59:21,804 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-12 00:59:26,300 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 00:59:26,427 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 00:59:26,428 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-12 00:59:26,428 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-12 00:59:26,428 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-12 00:59:26,428 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-12 00:59:27,602 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-12 00:59:28,790 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-12 00:59:28,790 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-12 00:59:28,887 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-12 00:59:29,149 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-12 00:59:29,150 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-12 00:59:29,150 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-12 00:59:34,151 - test_advanced_rstp_mechanisms - INFO - 开始在eth0上捕获BPDU
2025-09-12 00:59:34,151 - test_advanced_rstp_mechanisms - INFO - 触发拓扑变更...
2025-09-12 00:59:34,151 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 28672 (方法: mstpd)
2025-09-12 00:59:34,152 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级28672 -> mstpd优先级7)
2025-09-12 00:59:34,277 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-12 00:59:37,278 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 32768 (方法: mstpd)
2025-09-12 00:59:37,279 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级32768 -> mstpd优先级8)
2025-09-12 00:59:37,410 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-12 00:59:40,411 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: eth0, 数量: 20)
2025-09-12 00:59:40,491 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-12 00:59:40,491 - test_advanced_rstp_mechanisms - INFO - 捕获到0个BPDU数据包
2025-09-12 00:59:40,492 - test_advanced_rstp_mechanisms - WARNING - 未能捕获到完整的BPDU握手序列，可能是环境限制
2025-09-12 00:59:40,492 - test_advanced_rstp_mechanisms - INFO - 改为验证网络收敛状态...
2025-09-12 00:59:40,932 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 00:59:41,084 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    28672
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-12 00:59:41,085 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 28672
2025-09-12 00:59:41,085 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 00:59:41,085 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 7000/6e:b3:08:fa:01:34
2025-09-12 00:59:41,086 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 00:59:41,561 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 00:59:41,562 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 00:59:41,563 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 00:59:41,563 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 00:59:41,563 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 00:59:41,563 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 00:59:41,866 - test_advanced_rstp_mechanisms - INFO - ✓ 网络收敛正常，存在根端口
2025-09-12 00:59:43,867 - test_advanced_rstp_mechanisms - INFO - RSTP Proposal/Agreement握手机制测试通过
2025-09-12 00:59:43,868 - RSTPTest - INFO - 测试完成: test_proposal_agreement_handshake (耗时: 33.38秒)
2025-09-12 00:59:43,868 - RSTPTest - INFO - ============================================================

2025-09-12 00:59:43,869 - RSTPTest - INFO - ============================================================
2025-09-12 00:59:43,870 - RSTPTest - INFO - 开始测试: test_tcn_topology_change_notification
2025-09-12 00:59:43,870 - RSTPTest - INFO - ============================================================
2025-09-12 00:59:43,870 - test_advanced_rstp_mechanisms - INFO - 开始测试TCN拓扑变更通知机制
2025-09-12 00:59:43,870 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-12 00:59:43,871 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-12 00:59:43,871 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-12 00:59:43,871 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-12 00:59:43,871 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-12 00:59:43,871 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-12 00:59:43,871 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-12 00:59:43,871 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-12 00:59:43,872 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-12 00:59:44,378 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-12 00:59:44,379 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-12 00:59:44,379 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-12 00:59:44,546 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-12 00:59:45,701 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-12 00:59:45,701 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-12 00:59:45,702 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-12 00:59:45,702 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-12 00:59:45,702 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-12 00:59:46,190 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-12 00:59:46,665 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-12 00:59:46,666 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-12 00:59:46,870 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-12 00:59:46,870 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-12 00:59:46,871 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-12 00:59:46,871 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-12 00:59:46,871 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-12 00:59:46,871 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-12 00:59:46,872 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-12 00:59:46,872 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-12 00:59:47,379 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-12 00:59:51,885 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 00:59:52,017 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 00:59:52,018 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-12 00:59:52,018 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-12 00:59:52,019 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-12 00:59:52,019 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-12 00:59:53,210 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-12 00:59:54,403 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-12 00:59:54,403 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-12 00:59:54,500 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-12 00:59:54,768 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-12 00:59:54,769 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-12 00:59:54,769 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-12 00:59:54,769 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-12 00:59:54,769 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-12 00:59:54,770 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-12 00:59:54,770 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-12 00:59:54,770 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-12 00:59:55,275 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-12 00:59:59,782 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 00:59:59,909 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 00:59:59,910 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-12 00:59:59,910 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-12 00:59:59,910 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-12 00:59:59,911 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-12 01:00:01,092 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-12 01:00:02,283 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-12 01:00:02,284 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-12 01:00:02,379 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-12 01:00:02,644 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-12 01:00:02,644 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-12 01:00:02,645 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-12 01:00:13,067 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:00:13,228 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:00:13,230 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-12 01:00:13,230 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:00:13,230 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-12 01:00:13,230 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:00:13,698 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:00:13,699 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:00:13,700 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:00:13,700 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:00:13,701 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:00:13,701 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:00:13,998 - test_advanced_rstp_mechanisms - INFO - 初始网桥端口数量: 3
2025-09-12 01:00:13,998 - test_advanced_rstp_mechanisms - INFO - 触发拓扑变更：临时禁用/启用端口
2025-09-12 01:00:14,149 - test_advanced_rstp_mechanisms - INFO - 初始TC计数: 0
2025-09-12 01:00:22,436 - test_advanced_rstp_mechanisms - INFO - 变更后TC计数: 0
2025-09-12 01:00:22,436 - test_advanced_rstp_mechanisms - INFO - 拓扑变更可能未被检测到，这可能是正常的（取决于实现）
2025-09-12 01:00:22,911 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:00:23,063 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:00:23,064 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-12 01:00:23,064 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:00:23,065 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-12 01:00:23,065 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:00:23,524 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:00:23,525 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:00:23,526 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:00:23,526 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:00:23,526 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:00:23,527 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:00:23,826 - test_advanced_rstp_mechanisms - INFO - 最终网桥端口数量: 3
2025-09-12 01:00:23,989 - test_advanced_rstp_mechanisms - INFO - 当前MAC地址表老化时间: 300秒
2025-09-12 01:00:23,989 - test_advanced_rstp_mechanisms - WARNING - MAC地址表老化时间(300秒)未缩短，可能是实现差异
2025-09-12 01:00:23,989 - test_advanced_rstp_mechanisms - INFO - TCN拓扑变更通知机制测试通过 - 使用安全的端口状态变更方式
2025-09-12 01:00:23,990 - RSTPTest - INFO - 测试完成: test_tcn_topology_change_notification (耗时: 40.12秒)
2025-09-12 01:00:23,990 - RSTPTest - INFO - ============================================================

2025-09-12 01:00:23,991 - RSTPTest - INFO - ============================================================
2025-09-12 01:00:23,991 - RSTPTest - INFO - 开始测试: test_edge_port_behavior
2025-09-12 01:00:23,991 - RSTPTest - INFO - ============================================================
2025-09-12 01:00:23,992 - test_advanced_rstp_mechanisms - INFO - 开始测试边缘端口行为
2025-09-12 01:00:23,992 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-12 01:00:23,992 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-12 01:00:23,993 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-12 01:00:23,993 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-12 01:00:23,993 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-12 01:00:23,993 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-12 01:00:23,993 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-12 01:00:23,993 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-12 01:00:23,993 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-12 01:00:24,525 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-12 01:00:24,526 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-12 01:00:24,526 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-12 01:00:24,680 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-12 01:00:25,784 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-12 01:00:25,784 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-12 01:00:25,785 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-12 01:00:25,785 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-12 01:00:25,785 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-12 01:00:26,268 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-12 01:00:26,749 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-12 01:00:26,749 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-12 01:00:26,949 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-12 01:00:26,950 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-12 01:00:26,950 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-12 01:00:26,950 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-12 01:00:26,950 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-12 01:00:26,951 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-12 01:00:26,951 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-12 01:00:26,951 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-12 01:00:27,465 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-12 01:00:31,978 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:00:32,108 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:00:32,109 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-12 01:00:32,109 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-12 01:00:32,109 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:00:32,110 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-12 01:00:33,297 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-12 01:00:34,492 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-12 01:00:34,493 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-12 01:00:34,587 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-12 01:00:34,851 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-12 01:00:34,851 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-12 01:00:34,851 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-12 01:00:34,852 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-12 01:00:34,852 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-12 01:00:34,852 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-12 01:00:34,852 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-12 01:00:34,852 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-12 01:00:35,361 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-12 01:00:39,858 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:00:39,984 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:00:39,985 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-12 01:00:39,985 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-12 01:00:39,985 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:00:39,985 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-12 01:00:41,179 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-12 01:00:42,354 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-12 01:00:42,354 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-12 01:00:42,450 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-12 01:00:42,712 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-12 01:00:42,712 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-12 01:00:42,712 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-12 01:00:49,868 - test_advanced_rstp_mechanisms - INFO - 可用端口: ['enp1s0']
2025-09-12 01:00:49,868 - test_advanced_rstp_mechanisms - INFO - 选择端口enp1s0作为边缘端口测试
2025-09-12 01:00:49,976 - test_advanced_rstp_mechanisms - INFO - 测试边缘端口立即转发特性
2025-09-12 01:00:52,869 - test_advanced_rstp_mechanisms - INFO - 边缘端口状态转换时间: 2.74秒
2025-09-12 01:00:52,870 - test_advanced_rstp_mechanisms - INFO - ✓ 边缘端口转换时间合理
2025-09-12 01:00:52,971 - test_advanced_rstp_mechanisms - INFO - ✓ 边缘端口状态变化未产生TCN
2025-09-12 01:00:52,971 - test_advanced_rstp_mechanisms - INFO - 测试边缘端口收到BPDU后的行为
2025-09-12 01:00:53,128 - test_advanced_rstp_mechanisms - INFO - 边缘端口状态: 1
1
normal
2025-09-12 01:00:53,128 - test_advanced_rstp_mechanisms - INFO - 边缘端口行为测试通过
2025-09-12 01:00:53,129 - RSTPTest - INFO - 测试完成: test_edge_port_behavior (耗时: 29.14秒)
2025-09-12 01:00:53,129 - RSTPTest - INFO - ============================================================

2025-09-12 01:00:53,131 - RSTPTest - INFO - ============================================================
2025-09-12 01:00:53,131 - RSTPTest - INFO - 开始测试: test_shared_vs_point_to_point_links
2025-09-12 01:00:53,131 - RSTPTest - INFO - ============================================================
2025-09-12 01:00:53,132 - test_advanced_rstp_mechanisms - INFO - 开始测试不同链路类型的行为差异
2025-09-12 01:00:53,132 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-12 01:00:53,132 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-12 01:00:53,132 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-12 01:00:53,132 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-12 01:00:53,133 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-12 01:00:53,133 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-12 01:00:53,133 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-12 01:00:53,133 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-12 01:00:53,133 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-12 01:00:53,669 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-12 01:00:53,669 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-12 01:00:53,669 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-12 01:00:53,823 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-12 01:00:54,944 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-12 01:00:54,944 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-12 01:00:54,944 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-12 01:00:54,944 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-12 01:00:54,945 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-12 01:00:55,424 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-12 01:00:56,070 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-12 01:00:56,070 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-12 01:00:56,337 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-12 01:00:56,337 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-12 01:00:56,337 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-12 01:00:56,338 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-12 01:00:56,338 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-12 01:00:56,338 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-12 01:00:56,338 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-12 01:00:56,338 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-12 01:00:56,846 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-12 01:01:01,322 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:01:01,451 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:01:01,451 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-12 01:01:01,451 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-12 01:01:01,452 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:01:01,452 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-12 01:01:02,646 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-12 01:01:03,827 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-12 01:01:03,827 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-12 01:01:03,923 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-12 01:01:04,179 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-12 01:01:04,180 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-12 01:01:04,180 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-12 01:01:04,180 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-12 01:01:04,180 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-12 01:01:04,180 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-12 01:01:04,181 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-12 01:01:04,181 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-12 01:01:04,684 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-12 01:01:09,185 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:01:09,316 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:01:09,317 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-12 01:01:09,317 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-12 01:01:09,317 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:01:09,317 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-12 01:01:10,492 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-12 01:01:11,666 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-12 01:01:11,667 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-12 01:01:11,766 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-12 01:01:12,028 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-12 01:01:12,028 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-12 01:01:12,028 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-12 01:01:17,141 - test_advanced_rstp_mechanisms - INFO - 检测到的链路类型: {}
2025-09-12 01:01:17,141 - test_advanced_rstp_mechanisms - INFO - 测试点对点链路收敛性能
2025-09-12 01:01:17,141 - ConvergenceMonitor - INFO - 开始故障收敛时间测量...
2025-09-12 01:01:17,141 - ConvergenceMonitor - INFO - 开始测量收敛时间...
2025-09-12 01:01:17,611 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:01:17,758 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:01:17,759 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-12 01:01:17,759 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:01:17,760 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-12 01:01:17,760 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:01:18,236 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:01:18,236 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:01:18,237 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:01:18,237 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:01:18,238 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:01:18,238 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:01:18,524 - ConvergenceMonitor - INFO - 执行故障注入: trigger_topology_change
2025-09-12 01:01:21,614 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:01:21,770 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:01:21,771 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-12 01:01:21,771 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:01:21,771 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-12 01:01:21,772 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:01:22,251 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:01:22,252 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:01:22,253 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:01:22,253 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:01:22,254 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:01:22,254 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:01:22,994 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:01:23,150 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:01:23,151 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-12 01:01:23,151 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:01:23,152 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-12 01:01:23,152 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:01:23,612 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:01:23,612 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:01:23,613 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:01:23,613 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:01:23,614 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:01:23,614 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:01:24,378 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:01:24,532 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:01:24,533 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-12 01:01:24,534 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:01:24,534 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-12 01:01:24,534 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:01:25,008 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:01:25,008 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:01:25,010 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:01:25,010 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:01:25,010 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:01:25,011 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:01:25,759 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:01:25,914 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:01:25,915 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-12 01:01:25,915 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:01:25,916 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-12 01:01:25,916 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:01:26,384 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:01:26,384 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:01:26,386 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:01:26,386 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:01:26,386 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:01:26,386 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:01:26,701 - ConvergenceMonitor - WARNING - 未检测到明确的拓扑变化时刻，使用故障注入时间作为基准
2025-09-12 01:01:26,702 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-12 01:01:27,135 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:01:27,286 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:01:27,287 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-12 01:01:27,287 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:01:27,288 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-12 01:01:27,288 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:01:27,756 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:01:27,756 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:01:27,757 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:01:27,758 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:01:27,758 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:01:27,758 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:01:28,044 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 9.520秒
2025-09-12 01:01:28,045 - ConvergenceMonitor - INFO - 故障收敛完整流程: 注入延迟0.0ms, 收敛时间9.520秒
2025-09-12 01:01:28,045 - test_advanced_rstp_mechanisms - INFO - 收敛时间: 9.520秒
2025-09-12 01:01:28,045 - test_advanced_rstp_mechanisms - INFO - 验证链路类型识别
2025-09-12 01:01:28,046 - test_advanced_rstp_mechanisms - INFO - 不同链路类型行为差异测试通过
2025-09-12 01:01:28,047 - RSTPTest - INFO - 测试完成: test_shared_vs_point_to_point_links (耗时: 34.92秒)
2025-09-12 01:01:28,047 - RSTPTest - INFO - ============================================================

2025-09-12 01:01:28,047 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-12 01:01:28,048 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-12 01:01:28,048 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-12 01:01:28,182 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-12 01:01:28,182 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-12 01:01:28,309 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-12 01:01:28,310 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-12 01:01:28,459 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-12 01:01:28,460 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-12 01:01:28,460 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-12 01:01:28,460 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-12 01:01:28,460 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-12 01:01:28,461 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-12 01:01:28,520 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-12 01:01:28,520 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-12 01:01:28,689 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-12 01:01:28,689 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-12 01:01:28,689 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-12 01:01:28,689 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-12 01:01:28,689 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-12 01:01:28,744 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-12 01:01:28,745 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-12 01:01:28,913 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-12 01:01:28,913 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-12 01:01:28,914 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-12 01:01:28,914 - RSTPTest - INFO - ============================================================
2025-09-12 01:01:28,914 - RSTPTest - INFO - 开始测试: test_backup_port_concept_verification
2025-09-12 01:01:28,914 - RSTPTest - INFO - ============================================================
2025-09-12 01:01:28,915 - test_backup_port_simulation - INFO - 开始备份端口概念验证测试
2025-09-12 01:01:28,915 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-12 01:01:28,915 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-12 01:01:28,916 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-12 01:01:28,916 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-12 01:01:28,916 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-12 01:01:28,916 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-12 01:01:28,916 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-12 01:01:28,916 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-12 01:01:28,917 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-12 01:01:29,400 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-12 01:01:29,401 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-12 01:01:29,401 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-12 01:01:29,556 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-12 01:01:30,652 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-12 01:01:30,653 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-12 01:01:30,653 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-12 01:01:30,653 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-12 01:01:30,653 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-12 01:01:31,133 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-12 01:01:31,608 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-12 01:01:31,608 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-12 01:01:31,800 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-12 01:01:31,800 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-12 01:01:31,800 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-12 01:01:31,801 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-12 01:01:31,801 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-12 01:01:31,801 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-12 01:01:31,801 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-12 01:01:31,802 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-12 01:01:32,310 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-12 01:01:36,815 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:01:36,945 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:01:36,945 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-12 01:01:36,946 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-12 01:01:36,946 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:01:36,946 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-12 01:01:38,116 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-12 01:01:39,299 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-12 01:01:39,299 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-12 01:01:39,394 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-12 01:01:39,661 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-12 01:01:39,661 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-12 01:01:39,661 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-12 01:01:39,662 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-12 01:01:39,662 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-12 01:01:39,662 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-12 01:01:39,662 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-12 01:01:39,663 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-12 01:01:40,162 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-12 01:01:44,658 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:01:44,784 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:01:44,784 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-12 01:01:44,785 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-12 01:01:44,785 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:01:44,785 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-12 01:01:45,978 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-12 01:01:47,163 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-12 01:01:47,163 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-12 01:01:47,260 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-12 01:01:47,536 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-12 01:01:47,536 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-12 01:01:47,537 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-12 01:01:57,958 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:01:58,113 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:01:58,115 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-12 01:01:58,115 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:01:58,115 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-12 01:01:58,115 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:01:58,567 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:01:58,567 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:01:58,569 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:01:58,569 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:01:58,569 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:01:58,569 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:01:58,857 - test_backup_port_simulation - INFO - === 当前端口状态 ===
2025-09-12 01:01:58,857 - test_backup_port_simulation - INFO - 端口 br3: 角色=root, 状态=forwarding
2025-09-12 01:01:58,857 - test_backup_port_simulation - INFO - 端口 br4: 角色=alternate, 状态=discarding
2025-09-12 01:01:58,857 - test_backup_port_simulation - INFO - 端口 SE_ETH2: 角色=unknown, 状态=disabled
2025-09-12 01:01:58,858 - test_backup_port_simulation - INFO - ⚠ 在当前点对点拓扑中未检测到备份端口（符合预期）
2025-09-12 01:01:58,858 - test_backup_port_simulation - INFO - 备份端口通常出现在共享介质网段中，当前测试环境为点对点链路
2025-09-12 01:01:58,858 - test_backup_port_simulation - INFO - 端口角色分布: {<PortRole.ROOT: 'root'>: ['br3'], <PortRole.ALTERNATE: 'alternate'>: ['br4']}
2025-09-12 01:01:58,858 - test_backup_port_simulation - INFO - === RSTP端口角色覆盖分析 ===
2025-09-12 01:01:58,858 - test_backup_port_simulation - INFO - ✓ root端口: ['br3']
2025-09-12 01:01:58,859 - test_backup_port_simulation - INFO - - designated端口: 未检测到
2025-09-12 01:01:58,859 - test_backup_port_simulation - INFO - ✓ alternate端口: ['br4']
2025-09-12 01:01:58,859 - test_backup_port_simulation - INFO - - backup端口: 未检测到（在点对点拓扑中为正常现象）
2025-09-12 01:01:58,859 - test_backup_port_simulation - INFO - 备份端口概念验证测试完成
2025-09-12 01:01:58,860 - RSTPTest - INFO - 测试完成: test_backup_port_concept_verification (耗时: 29.95秒)
2025-09-12 01:01:58,860 - RSTPTest - INFO - ============================================================

2025-09-12 01:01:58,861 - RSTPTest - INFO - ============================================================
2025-09-12 01:01:58,861 - RSTPTest - INFO - 开始测试: test_shared_medium_simulation_attempt
2025-09-12 01:01:58,861 - RSTPTest - INFO - ============================================================
2025-09-12 01:01:58,862 - test_backup_port_simulation - INFO - 开始共享介质模拟尝试
2025-09-12 01:01:58,862 - test_backup_port_simulation - INFO - === 尝试创建共享介质模拟场景 ===
2025-09-12 01:01:58,862 - test_backup_port_simulation - INFO - 创建中心交换机模拟共享介质...
2025-09-12 01:01:58,862 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-12 01:01:58,863 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-12 01:01:58,863 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-12 01:01:58,863 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-12 01:01:58,863 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-12 01:01:58,863 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-12 01:01:58,863 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-12 01:01:58,864 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-12 01:01:58,864 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-12 01:01:59,384 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-12 01:01:59,384 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-12 01:01:59,384 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-12 01:01:59,539 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-12 01:02:00,634 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-12 01:02:00,635 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-12 01:02:00,635 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-12 01:02:00,635 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-12 01:02:00,635 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-12 01:02:01,112 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-12 01:02:01,900 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-12 01:02:01,900 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-12 01:02:02,092 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-12 01:02:02,092 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-12 01:02:02,092 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-12 01:02:02,092 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-12 01:02:02,093 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-12 01:02:02,093 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-12 01:02:02,093 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-12 01:02:02,093 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-12 01:02:02,601 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-12 01:02:07,100 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:02:07,229 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:02:07,229 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-12 01:02:07,230 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-12 01:02:07,230 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:02:07,230 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-12 01:02:08,425 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-12 01:02:09,616 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-12 01:02:09,616 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-12 01:02:09,712 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-12 01:02:09,974 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-12 01:02:09,975 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-12 01:02:09,975 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-12 01:02:09,975 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-12 01:02:09,976 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-12 01:02:09,976 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-12 01:02:09,976 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-12 01:02:09,976 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-12 01:02:10,470 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-12 01:02:14,934 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:02:15,061 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:02:15,061 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-12 01:02:15,061 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-12 01:02:15,062 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:02:15,062 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-12 01:02:16,259 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-12 01:02:17,437 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-12 01:02:17,438 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-12 01:02:17,535 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-12 01:02:17,796 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-12 01:02:17,796 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-12 01:02:17,797 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-12 01:02:28,213 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:02:28,366 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:02:28,367 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-12 01:02:28,367 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:02:28,367 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-12 01:02:28,367 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:02:28,830 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:02:28,831 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:02:28,832 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:02:28,832 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:02:28,832 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:02:28,832 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:02:29,120 - test_backup_port_simulation - INFO - === 分析当前端口配置 ===
2025-09-12 01:02:29,121 - test_backup_port_simulation - INFO - 活动端口 br3: 角色=root, 状态=forwarding
2025-09-12 01:02:29,121 - test_backup_port_simulation - INFO - 活动端口 br4: 角色=alternate, 状态=discarding
2025-09-12 01:02:29,121 - test_backup_port_simulation - INFO - ⚠ 未检测到备份端口
2025-09-12 01:02:29,121 - test_backup_port_simulation - INFO - 这在当前测试环境中是正常的，因为缺乏真正的共享介质
2025-09-12 01:02:29,121 - test_backup_port_simulation - INFO - 共享介质模拟尝试完成
2025-09-12 01:02:29,122 - RSTPTest - INFO - 测试完成: test_shared_medium_simulation_attempt (耗时: 30.26秒)
2025-09-12 01:02:29,122 - RSTPTest - INFO - ============================================================

2025-09-12 01:02:29,124 - RSTPTest - INFO - ============================================================
2025-09-12 01:02:29,124 - RSTPTest - INFO - 开始测试: test_backup_port_documentation_verification
2025-09-12 01:02:29,124 - RSTPTest - INFO - ============================================================
2025-09-12 01:02:29,125 - test_backup_port_simulation - INFO - 开始备份端口文档验证
2025-09-12 01:02:29,125 - test_backup_port_simulation - INFO - ✓ PortRole.BACKUP 存在
2025-09-12 01:02:29,125 - test_backup_port_simulation - INFO - === 备份端口理论特性验证 ===
2025-09-12 01:02:29,125 - test_backup_port_simulation - INFO - purpose: 为共享介质网段提供冗余
2025-09-12 01:02:29,125 - test_backup_port_simulation - INFO - difference_from_alternate: 备份端口是同一交换机上指定端口的备份，而备用端口是不同交换机提供的路径
2025-09-12 01:02:29,125 - test_backup_port_simulation - INFO - state: Discarding
2025-09-12 01:02:29,126 - test_backup_port_simulation - INFO - scenario: 出现在连接到集线器或共享介质的场景中
2025-09-12 01:02:29,126 - test_backup_port_simulation - INFO - fast_transition: 当对应的指定端口失效时，可以快速转换为指定端口
2025-09-12 01:02:29,126 - test_backup_port_simulation - INFO - === 端口角色对比 ===
2025-09-12 01:02:29,126 - test_backup_port_simulation - INFO - root: 连接到根桥的最佳路径
2025-09-12 01:02:29,126 - test_backup_port_simulation - INFO - designated: 为网段提供转发服务
2025-09-12 01:02:29,126 - test_backup_port_simulation - INFO - alternate: 提供到根桥的备用路径（来自其他交换机）
2025-09-12 01:02:29,126 - test_backup_port_simulation - INFO - backup: 同一交换机上指定端口的备份（共享介质场景）
2025-09-12 01:02:29,127 - test_backup_port_simulation - INFO - === 测试覆盖率分析 ===
2025-09-12 01:02:29,127 - test_backup_port_simulation - INFO - 已覆盖: Root Port, Designated Port, Alternate Port, Disabled Port
2025-09-12 01:02:29,127 - test_backup_port_simulation - INFO - 部分覆盖: Backup Port (概念验证)
2025-09-12 01:02:29,127 - test_backup_port_simulation - INFO - 覆盖限制: 测试框架无法创建真正的共享介质拓扑
2025-09-12 01:02:29,127 - test_backup_port_simulation - INFO - 建议: 在实际部署环境中使用集线器或配置交换机共享模式进行完整测试
2025-09-12 01:02:29,127 - test_backup_port_simulation - INFO - 备份端口文档验证完成
2025-09-12 01:02:29,128 - RSTPTest - INFO - 测试完成: test_backup_port_documentation_verification (耗时: 0.00秒)
2025-09-12 01:02:29,128 - RSTPTest - INFO - ============================================================

2025-09-12 01:02:29,129 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-12 01:02:29,129 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-12 01:02:29,129 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-12 01:02:29,264 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-12 01:02:29,265 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-12 01:02:29,392 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-12 01:02:29,392 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-12 01:02:29,541 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-12 01:02:29,542 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-12 01:02:29,542 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-12 01:02:29,542 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-12 01:02:29,542 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-12 01:02:29,543 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-12 01:02:29,598 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-12 01:02:29,598 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-12 01:02:29,767 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-12 01:02:29,767 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-12 01:02:29,767 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-12 01:02:29,768 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-12 01:02:29,768 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-12 01:02:29,826 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-12 01:02:29,826 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-12 01:02:29,997 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-12 01:02:29,997 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-12 01:02:29,997 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-12 01:02:29,997 - RSTPTest - INFO - ============================================================
2025-09-12 01:02:29,998 - RSTPTest - INFO - 开始测试: test_direct_link_failure
2025-09-12 01:02:29,998 - RSTPTest - INFO - ============================================================
2025-09-12 01:02:29,998 - test_convergence - INFO - 开始直接链路故障测试
2025-09-12 01:02:29,999 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-12 01:02:29,999 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-12 01:02:29,999 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-12 01:02:29,999 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-12 01:02:29,999 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-12 01:02:29,999 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-12 01:02:30,000 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-12 01:02:30,000 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-12 01:02:30,000 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-12 01:02:30,484 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-12 01:02:30,485 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-12 01:02:30,485 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-12 01:02:30,638 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-12 01:02:31,723 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-12 01:02:31,723 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-12 01:02:31,723 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-12 01:02:31,724 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-12 01:02:31,724 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-12 01:02:32,199 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-12 01:02:32,675 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-12 01:02:32,676 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-12 01:02:32,879 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-12 01:02:32,879 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-12 01:02:32,879 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-12 01:02:32,880 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-12 01:02:32,880 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-12 01:02:32,880 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-12 01:02:32,880 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-12 01:02:32,880 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-12 01:02:33,384 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-12 01:02:37,911 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:02:38,041 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:02:38,041 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-12 01:02:38,042 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-12 01:02:38,042 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:02:38,042 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-12 01:02:39,261 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-12 01:02:40,456 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-12 01:02:40,456 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-12 01:02:40,553 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-12 01:02:40,827 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-12 01:02:40,827 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-12 01:02:40,827 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-12 01:02:40,828 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-12 01:02:40,828 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-12 01:02:40,828 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-12 01:02:40,828 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-12 01:02:40,828 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-12 01:02:41,326 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-12 01:02:45,819 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:02:45,947 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:02:45,947 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-12 01:02:45,948 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-12 01:02:45,948 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:02:45,948 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-12 01:02:47,146 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-12 01:02:48,319 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-12 01:02:48,320 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-12 01:02:48,415 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-12 01:02:48,683 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-12 01:02:48,683 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-12 01:02:48,683 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-12 01:02:48,684 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 16384 (方法: mstpd)
2025-09-12 01:02:48,684 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级16384 -> mstpd优先级4)
2025-09-12 01:02:48,810 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-12 01:02:48,810 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 32768 (方法: ovs)
2025-09-12 01:02:48,811 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-12 01:02:48,932 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-12 01:02:49,075 - NetworkTopology_TestNode2 - INFO - TestNode2: 设置网桥优先级 br0 = 28672 (方法: mstpd)
2025-09-12 01:02:49,076 - NetworkTopology_TestNode2 - INFO - TestNode2: 执行mstpd设置优先级命令 (标准优先级28672 -> mstpd优先级7)
2025-09-12 01:02:49,202 - NetworkTopology_TestNode2 - INFO - TestNode2: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-12 01:02:49,202 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-12 01:02:49,617 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:02:49,769 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    16384
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:02:49,770 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 16384
2025-09-12 01:02:49,770 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:02:49,770 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 4000/6e:b3:08:fa:01:34
2025-09-12 01:02:49,770 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:02:50,230 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:02:50,231 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:02:50,232 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:02:50,233 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:02:50,233 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:02:50,233 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:02:51,212 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 2.010秒
2025-09-12 01:02:51,213 - test_convergence - INFO - 初始收敛时间: 2.01秒
2025-09-12 01:02:51,636 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:02:51,789 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    16384
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:02:51,790 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 16384
2025-09-12 01:02:51,790 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:02:51,790 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 4000/6e:b3:08:fa:01:34
2025-09-12 01:02:51,790 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:02:52,259 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:02:52,259 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:02:52,260 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:02:52,260 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:02:52,260 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:02:52,261 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:02:52,555 - test_convergence - INFO - DUT的Root Port: br3
2025-09-12 01:02:52,555 - ConvergenceMonitor - INFO - 开始故障收敛时间测量...
2025-09-12 01:02:52,556 - ConvergenceMonitor - INFO - 开始测量收敛时间...
2025-09-12 01:02:53,018 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:02:53,173 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    16384
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:02:53,174 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 16384
2025-09-12 01:02:53,174 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:02:53,174 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 4000/6e:b3:08:fa:01:34
2025-09-12 01:02:53,174 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:02:53,634 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:02:53,634 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:02:53,635 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:02:53,636 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:02:53,636 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:02:53,636 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:02:54,615 - ConvergenceMonitor - INFO - 执行故障注入: <lambda>
2025-09-12 01:02:54,616 - FaultInjector_DUT - INFO - 断开链路: br3
2025-09-12 01:03:04,658 - FaultInjector_DUT - INFO - 链路已断开: br3
2025-09-12 01:03:05,169 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:03:05,320 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    16384
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 20000    128.2


2025-09-12 01:03:05,321 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 16384
2025-09-12 01:03:05,321 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:03:05,321 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 4000/6e:b3:08:fa:01:34
2025-09-12 01:03:05,322 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:03:05,790 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:03:05,790 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:03:05,791 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:05,791 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:05,792 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:05,792 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:03:06,079 - ConvergenceMonitor - INFO - 检测到端口br3角色变化: ROOT -> ALTERNATE
2025-09-12 01:03:06,079 - ConvergenceMonitor - INFO - DUT检测到拓扑变化的延迟: 11463.2ms
2025-09-12 01:03:06,079 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-12 01:03:06,540 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:03:06,693 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    16384
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 20000    128.2


2025-09-12 01:03:06,694 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 16384
2025-09-12 01:03:06,694 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:03:06,694 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 4000/6e:b3:08:fa:01:34
2025-09-12 01:03:06,695 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:03:07,173 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:03:07,174 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:03:07,175 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:07,175 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:07,175 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:07,175 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:03:08,160 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 2.081秒
2025-09-12 01:03:08,160 - ConvergenceMonitor - INFO - 故障收敛完整流程: 注入延迟11463.2ms, 收敛时间2.081秒
2025-09-12 01:03:08,577 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:03:08,729 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    16384
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 20000    128.2


2025-09-12 01:03:08,730 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 16384
2025-09-12 01:03:08,730 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:03:08,730 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 4000/6e:b3:08:fa:01:34
2025-09-12 01:03:08,731 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:03:09,201 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:03:09,201 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:03:09,202 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:09,202 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:09,202 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:09,203 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:03:09,494 - test_convergence - INFO - 链路故障收敛时间: 2.08秒
2025-09-12 01:03:09,495 - test_convergence - INFO - 新的Root Port: br4
2025-09-12 01:03:09,495 - test_convergence - INFO - 直接链路故障测试通过
2025-09-12 01:03:09,496 - RSTPTest - INFO - 测试完成: test_direct_link_failure (耗时: 39.50秒)
2025-09-12 01:03:09,496 - RSTPTest - INFO - ============================================================

2025-09-12 01:03:09,534 - RSTPTest - INFO - ============================================================
2025-09-12 01:03:09,534 - RSTPTest - INFO - 开始测试: test_multiple_link_failures
2025-09-12 01:03:09,534 - RSTPTest - INFO - ============================================================
2025-09-12 01:03:09,535 - test_convergence - INFO - 开始多重链路故障测试
2025-09-12 01:03:09,535 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-12 01:03:09,535 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-12 01:03:09,536 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-12 01:03:09,536 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-12 01:03:09,536 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-12 01:03:09,536 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-12 01:03:09,536 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-12 01:03:09,536 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-12 01:03:09,536 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-12 01:03:10,026 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-12 01:03:10,027 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-12 01:03:10,027 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-12 01:03:10,387 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-12 01:03:11,565 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-12 01:03:11,566 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-12 01:03:11,566 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-12 01:03:11,566 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-12 01:03:11,566 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-12 01:03:12,042 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-12 01:03:12,518 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-12 01:03:12,519 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-12 01:03:12,715 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-12 01:03:12,715 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-12 01:03:12,715 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-12 01:03:12,715 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-12 01:03:12,716 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-12 01:03:12,716 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-12 01:03:12,716 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-12 01:03:12,716 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-12 01:03:13,225 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-12 01:03:17,727 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:03:17,863 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:03:17,863 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-12 01:03:17,863 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-12 01:03:17,864 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:03:17,864 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-12 01:03:19,066 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-12 01:03:20,249 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-12 01:03:20,249 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-12 01:03:20,345 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-12 01:03:20,610 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-12 01:03:20,610 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-12 01:03:20,610 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-12 01:03:20,610 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-12 01:03:20,611 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-12 01:03:20,611 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-12 01:03:20,611 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-12 01:03:20,611 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-12 01:03:21,137 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-12 01:03:25,639 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:03:25,769 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:03:25,770 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-12 01:03:25,770 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-12 01:03:25,770 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:03:25,770 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-12 01:03:26,947 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-12 01:03:28,140 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-12 01:03:28,140 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-12 01:03:28,237 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-12 01:03:28,508 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-12 01:03:28,508 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-12 01:03:28,508 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-12 01:03:28,509 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-12 01:03:28,932 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:03:29,092 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:03:29,094 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-12 01:03:29,094 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:03:29,094 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-12 01:03:29,094 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:03:29,581 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:03:29,582 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:03:29,583 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:29,583 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:29,583 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:29,583 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:03:30,577 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 2.068秒
2025-09-12 01:03:30,577 - test_convergence - INFO - 注入故障: eth0
2025-09-12 01:03:30,578 - ConvergenceMonitor - INFO - 开始故障收敛时间测量...
2025-09-12 01:03:30,578 - ConvergenceMonitor - INFO - 开始测量收敛时间...
2025-09-12 01:03:31,001 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:03:31,156 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:03:31,157 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-12 01:03:31,157 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:03:31,157 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-12 01:03:31,157 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:03:31,618 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:03:31,618 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:03:31,619 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:31,620 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:31,620 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:31,620 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:03:32,602 - ConvergenceMonitor - INFO - 执行故障注入: <lambda>
2025-09-12 01:03:32,602 - FaultInjector_DUT - INFO - 断开链路: eth0
2025-09-12 01:03:32,821 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth0 (code=1)，将在逻辑上标记为已断开
2025-09-12 01:03:33,280 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:03:33,432 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:03:33,433 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-12 01:03:33,433 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:03:33,433 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-12 01:03:33,434 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:03:33,897 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:03:33,898 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:03:33,899 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:33,899 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:33,899 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:33,900 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:03:35,316 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:03:35,472 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:03:35,473 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-12 01:03:35,473 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:03:35,474 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-12 01:03:35,474 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:03:35,943 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:03:35,943 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:03:35,945 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:35,945 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:35,945 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:35,946 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:03:37,368 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:03:37,519 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:03:37,520 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-12 01:03:37,520 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:03:37,521 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-12 01:03:37,521 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:03:37,985 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:03:37,985 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:03:37,986 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:37,986 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:37,987 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:37,987 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:03:38,986 - ConvergenceMonitor - WARNING - 未检测到明确的拓扑变化时刻，使用故障注入时间作为基准
2025-09-12 01:03:38,986 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-12 01:03:39,404 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:03:39,556 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:03:39,557 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-12 01:03:39,557 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:03:39,557 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-12 01:03:39,557 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:03:40,022 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:03:40,022 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:03:40,023 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:40,023 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:40,023 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:40,024 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:03:41,011 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 8.409秒
2025-09-12 01:03:41,011 - ConvergenceMonitor - INFO - 故障收敛完整流程: 注入延迟0.0ms, 收敛时间8.409秒
2025-09-12 01:03:41,011 - test_convergence - INFO - eth0故障收敛时间: 8.409秒
2025-09-12 01:03:43,012 - test_convergence - INFO - 注入故障: eth2
2025-09-12 01:03:43,013 - ConvergenceMonitor - INFO - 开始故障收敛时间测量...
2025-09-12 01:03:43,013 - ConvergenceMonitor - INFO - 开始测量收敛时间...
2025-09-12 01:03:43,435 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:03:43,588 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:03:43,590 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-12 01:03:43,590 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:03:43,590 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-12 01:03:43,590 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:03:44,049 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:03:44,050 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:03:44,051 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:44,051 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:44,051 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:44,051 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:03:45,042 - ConvergenceMonitor - INFO - 执行故障注入: <lambda>
2025-09-12 01:03:45,043 - FaultInjector_DUT - INFO - 断开链路: eth2
2025-09-12 01:03:45,261 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth2 (code=1)，将在逻辑上标记为已断开
2025-09-12 01:03:45,732 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:03:45,888 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:03:45,889 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-12 01:03:45,889 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:03:45,890 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-12 01:03:45,890 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:03:46,354 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:03:46,354 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:03:46,356 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:46,356 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:46,356 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:46,357 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:03:47,764 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:03:47,921 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:03:47,922 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-12 01:03:47,922 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:03:47,923 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-12 01:03:47,923 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:03:48,389 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:03:48,389 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:03:48,390 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:48,390 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:48,390 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:48,391 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:03:49,797 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:03:49,952 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:03:49,954 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-12 01:03:49,954 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:03:49,954 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-12 01:03:49,954 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:03:50,417 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:03:50,418 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:03:50,419 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:50,419 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:50,419 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:50,420 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:03:51,417 - ConvergenceMonitor - WARNING - 未检测到明确的拓扑变化时刻，使用故障注入时间作为基准
2025-09-12 01:03:51,417 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-12 01:03:51,832 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:03:51,984 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:03:51,985 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-12 01:03:51,985 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:03:51,986 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-12 01:03:51,986 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:03:52,442 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:03:52,442 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:03:52,443 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:52,443 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:52,443 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:52,443 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:03:53,422 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 8.380秒
2025-09-12 01:03:53,423 - ConvergenceMonitor - INFO - 故障收敛完整流程: 注入延迟0.0ms, 收敛时间8.380秒
2025-09-12 01:03:53,423 - test_convergence - INFO - eth2故障收敛时间: 8.380秒
2025-09-12 01:03:55,424 - FaultInjector_DUT - INFO - 恢复链路: eth0
2025-09-12 01:03:55,644 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth0 (code=1)，将在逻辑上标记为已恢复
2025-09-12 01:03:55,645 - FaultInjector_DUT - INFO - 恢复链路: eth2
2025-09-12 01:03:55,909 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth2 (code=1)，将在逻辑上标记为已恢复
2025-09-12 01:03:55,909 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-12 01:03:56,372 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:03:56,527 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:03:56,528 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-12 01:03:56,528 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:03:56,529 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-12 01:03:56,529 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:03:56,993 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:03:56,994 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:03:56,995 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:56,995 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:56,995 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:03:56,995 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:03:57,975 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 2.065秒
2025-09-12 01:03:58,366 - RSTPTest - INFO - 测试完成: test_multiple_link_failures (耗时: 48.83秒)
2025-09-12 01:03:58,367 - RSTPTest - INFO - ============================================================

2025-09-12 01:03:58,370 - RSTPTest - INFO - ============================================================
2025-09-12 01:03:58,370 - RSTPTest - INFO - 开始测试: test_convergence_with_traffic
2025-09-12 01:03:58,370 - RSTPTest - INFO - ============================================================
2025-09-12 01:03:58,371 - test_convergence - INFO - 开始带流量的收敛测试
2025-09-12 01:03:58,371 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-12 01:03:58,371 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-12 01:03:58,371 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-12 01:03:58,371 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-12 01:03:58,372 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-12 01:03:58,372 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-12 01:03:58,372 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-12 01:03:58,372 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-12 01:03:58,372 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-12 01:03:58,857 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-12 01:03:58,857 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-12 01:03:58,857 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-12 01:03:59,013 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-12 01:04:00,092 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-12 01:04:00,093 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-12 01:04:00,093 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-12 01:04:00,093 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-12 01:04:00,093 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-12 01:04:00,577 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-12 01:04:01,061 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-12 01:04:01,062 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-12 01:04:01,254 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-12 01:04:01,255 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-12 01:04:01,255 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-12 01:04:01,255 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-12 01:04:01,255 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-12 01:04:01,256 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-12 01:04:01,256 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-12 01:04:01,256 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-12 01:04:01,817 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-12 01:04:06,310 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:04:06,435 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:04:06,435 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-12 01:04:06,435 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-12 01:04:06,436 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:04:06,436 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-12 01:04:07,615 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-12 01:04:08,813 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-12 01:04:08,813 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-12 01:04:08,908 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-12 01:04:09,168 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-12 01:04:09,168 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-12 01:04:09,168 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-12 01:04:09,168 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-12 01:04:09,169 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-12 01:04:09,169 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-12 01:04:09,169 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-12 01:04:09,169 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-12 01:04:09,665 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-12 01:04:14,147 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:04:14,279 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:04:14,279 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-12 01:04:14,279 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-12 01:04:14,279 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:04:14,279 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-12 01:04:15,462 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-12 01:04:16,865 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-12 01:04:16,865 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-12 01:04:16,962 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-12 01:04:17,228 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-12 01:04:17,229 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-12 01:04:17,229 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-12 01:04:23,486 - TrafficGenerator - INFO - 启动iperf3服务器: 192.168.184.131:5201
2025-09-12 01:04:25,658 - TrafficGenerator - ERROR - iperf3服务器启动失败
2025-09-12 01:04:28,488 - TrafficGenerator - INFO - 启动iperf3客户端: -> 192.168.184.131:5201
2025-09-12 01:04:28,488 - TrafficGenerator - INFO - iperf3客户端已启动 (udp, 100M)
2025-09-12 01:04:33,489 - FaultInjector_DUT - INFO - 断开链路: eth0
2025-09-12 01:04:33,708 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth0 (code=1)，将在逻辑上标记为已断开
2025-09-12 01:04:43,709 - test_convergence - INFO - 丢包数: 0
2025-09-12 01:04:43,710 - test_convergence - INFO - 估计中断时间: 0.000秒
2025-09-12 01:04:43,710 - TrafficGenerator - INFO - 停止流量生成
2025-09-12 01:04:45,869 - test_convergence - INFO - 带流量的收敛测试通过
2025-09-12 01:04:45,870 - RSTPTest - INFO - 测试完成: test_convergence_with_traffic (耗时: 47.50秒)
2025-09-12 01:04:45,870 - RSTPTest - INFO - ============================================================

2025-09-12 01:04:45,871 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-12 01:04:45,871 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-12 01:04:45,871 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-12 01:04:46,023 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-12 01:04:46,023 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-12 01:04:46,145 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-12 01:04:46,145 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-12 01:04:46,279 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-12 01:04:46,280 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-12 01:04:46,280 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-12 01:04:46,280 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-12 01:04:46,281 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-12 01:04:46,281 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-12 01:04:46,338 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-12 01:04:46,338 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-12 01:04:46,512 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-12 01:04:46,513 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-12 01:04:46,513 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-12 01:04:46,513 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-12 01:04:46,513 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-12 01:04:46,573 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-12 01:04:46,574 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-12 01:04:46,741 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-12 01:04:46,742 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-12 01:04:46,742 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-12 01:04:46,742 - RSTPTest - INFO - ============================================================
2025-09-12 01:04:46,742 - RSTPTest - INFO - 开始测试: test_backup_port_simulation
2025-09-12 01:04:46,743 - RSTPTest - INFO - ============================================================
2025-09-12 01:04:46,743 - test_enhanced_rstp_coverage - INFO - 开始备份端口模拟测试
2025-09-12 01:04:46,743 - test_enhanced_rstp_coverage - INFO - 创建模拟共享网段拓扑
2025-09-12 01:04:47,625 - test_enhanced_rstp_coverage - INFO - ✓ 创建连接: SE_ETH2:dut_port1 <-> shared_segment:shared_port1
2025-09-12 01:04:48,285 - test_enhanced_rstp_coverage - INFO - ✓ 创建连接: SE_ETH2:dut_port2 <-> shared_segment:shared_port2
2025-09-12 01:04:49,469 - test_enhanced_rstp_coverage - INFO - ✓ 创建远程交换机: remote_switch
2025-09-12 01:04:49,469 - test_enhanced_rstp_coverage - INFO - 等待RSTP收敛...
2025-09-12 01:05:04,895 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:05:05,042 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   a6:f5:6a:a3:fb:49
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       dut_port1
  root-path-cost  2000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  dut_port2  Alternate  Discarding 2000     128.4
  br4        Designated Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2
  dut_port1  Root       Forwarding 2000     128.3


2025-09-12 01:05:05,043 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-12 01:05:05,044 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: a6:f5:6a:a3:fb:49
2025-09-12 01:05:05,044 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/a6:f5:6a:a3:fb:49
2025-09-12 01:05:05,044 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:05:05,516 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:05:05,517 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 3(dut_port1): addr:7e:a0:93:6b:f7:82
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 4(dut_port2): addr:e2:48:b5:df:0f:04
     config:     0
     state:      0
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:05:05,518 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:05:05,519 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:05:05,519 - RSTPAnalyzer_DUT - INFO - 找到端口: dut_port1 (从行:  3(dut_port1): addr:7e:a0:93:6b:f7:82)
2025-09-12 01:05:05,519 - RSTPAnalyzer_DUT - INFO - 找到端口: dut_port2 (从行:  4(dut_port2): addr:e2:48:b5:df:0f:04)
2025-09-12 01:05:05,519 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:05:05,519 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'dut_port1', 'dut_port2', 'SE_ETH2']
2025-09-12 01:05:06,005 - test_enhanced_rstp_coverage - INFO - DUT桥信息: BridgeInfo(bridge_id='1000/a6:f5:6a:a3:fb:49', root_id='unknown', root_port='br3', root_path_cost=0, protocol_version='rstp', hello_time=2, forward_delay=15, max_age=20, topology_changes=0, ports={'br3': PortInfo(name='br3', role=<PortRole.ROOT: 'root'>, state=<PortState.FORWARDING: 'forwarding'>, path_cost=0, designated_bridge='', designated_port=''), 'br4': PortInfo(name='br4', role=<PortRole.ALTERNATE: 'alternate'>, state=<PortState.DISCARDING: 'discarding'>, path_cost=0, designated_bridge='', designated_port=''), 'dut_port1': PortInfo(name='dut_port1', role=<PortRole.DESIGNATED: 'designated'>, state=<PortState.FORWARDING: 'forwarding'>, path_cost=0, designated_bridge='', designated_port=''), 'dut_port2': PortInfo(name='dut_port2', role=<PortRole.DESIGNATED: 'designated'>, state=<PortState.FORWARDING: 'forwarding'>, path_cost=0, designated_bridge='', designated_port=''), 'SE_ETH2': PortInfo(name='SE_ETH2', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')})
2025-09-12 01:05:06,006 - test_enhanced_rstp_coverage - INFO - 找到 2 个连接到共享网段的端口
2025-09-12 01:05:06,006 - test_enhanced_rstp_coverage - INFO - Designated端口: ['dut_port1', 'dut_port2']
2025-09-12 01:05:06,006 - test_enhanced_rstp_coverage - INFO - Backup端口: []
2025-09-12 01:05:06,006 - test_enhanced_rstp_coverage - WARNING - 未检测到Backup Port或阻塞端口，可能是OVS实现限制
2025-09-12 01:05:06,007 - test_enhanced_rstp_coverage - INFO - 测试备份端口故障切换
2025-09-12 01:05:06,007 - test_enhanced_rstp_coverage - INFO - 清理测试环境
2025-09-12 01:05:06,990 - test_enhanced_rstp_coverage - INFO - ✓ 备份端口模拟测试完成
2025-09-12 01:05:06,991 - RSTPTest - INFO - 测试完成: test_backup_port_simulation (耗时: 20.25秒)
2025-09-12 01:05:06,991 - RSTPTest - INFO - ============================================================

2025-09-12 01:05:06,992 - RSTPTest - INFO - ============================================================
2025-09-12 01:05:06,992 - RSTPTest - INFO - 开始测试: test_comprehensive_port_state_transitions
2025-09-12 01:05:06,993 - RSTPTest - INFO - ============================================================
2025-09-12 01:05:06,993 - test_enhanced_rstp_coverage - INFO - 开始全面端口状态转换测试
2025-09-12 01:05:06,993 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-12 01:05:06,994 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-12 01:05:06,994 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-12 01:05:06,994 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-12 01:05:06,994 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-12 01:05:06,994 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-12 01:05:06,994 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-12 01:05:06,995 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-12 01:05:06,995 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-12 01:05:07,544 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-12 01:05:07,545 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-12 01:05:07,545 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-12 01:05:07,700 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-12 01:05:08,833 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-12 01:05:08,833 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-12 01:05:08,833 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-12 01:05:08,834 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-12 01:05:08,834 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-12 01:05:09,312 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-12 01:05:09,808 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-12 01:05:09,809 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-12 01:05:10,000 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-12 01:05:10,001 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-12 01:05:10,001 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-12 01:05:10,001 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-12 01:05:10,002 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-12 01:05:10,002 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-12 01:05:10,002 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-12 01:05:10,002 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-12 01:05:10,496 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-12 01:05:14,983 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:05:15,113 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:05:15,114 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-12 01:05:15,114 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-12 01:05:15,114 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:05:15,114 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-12 01:05:16,307 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-12 01:05:17,497 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-12 01:05:17,498 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-12 01:05:17,591 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-12 01:05:17,858 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-12 01:05:17,859 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-12 01:05:17,859 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-12 01:05:17,859 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-12 01:05:17,859 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-12 01:05:17,859 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-12 01:05:17,860 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-12 01:05:17,860 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-12 01:05:18,357 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-12 01:05:22,839 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:05:22,973 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:05:22,973 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-12 01:05:22,974 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-12 01:05:22,974 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:05:22,974 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-12 01:05:24,152 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-12 01:05:25,339 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-12 01:05:25,339 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-12 01:05:25,436 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-12 01:05:25,699 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-12 01:05:25,700 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-12 01:05:25,700 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-12 01:05:25,700 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 4096 (方法: mstpd)
2025-09-12 01:05:25,700 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级4096 -> mstpd优先级1)
2025-09-12 01:05:25,825 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-12 01:05:25,825 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 8192 (方法: ovs)
2025-09-12 01:05:25,825 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-12 01:05:25,935 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-12 01:05:26,106 - test_enhanced_rstp_coverage - INFO - 等待初始收敛...
2025-09-12 01:05:26,106 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-12 01:05:26,562 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:05:26,722 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-12 01:05:26,724 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-12 01:05:26,724 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:05:26,725 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-12 01:05:26,725 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:05:27,183 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:05:27,183 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:05:27,185 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:05:27,185 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:05:27,185 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:05:27,185 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:05:27,472 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.366秒
2025-09-12 01:05:27,946 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:05:28,107 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-12 01:05:28,108 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-12 01:05:28,108 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:05:28,108 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-12 01:05:28,108 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:05:28,572 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:05:28,573 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:05:28,574 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:05:28,574 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:05:28,574 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:05:28,574 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:05:28,873 - test_enhanced_rstp_coverage - INFO - === 测试场景1: 端口重启状态转换 ===
2025-09-12 01:05:28,873 - test_enhanced_rstp_coverage - INFO - 使用端口br3进行重启测试
2025-09-12 01:05:29,355 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:05:29,510 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-12 01:05:29,511 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-12 01:05:29,511 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:05:29,512 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-12 01:05:29,512 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:05:29,995 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:05:29,996 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:05:29,997 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:05:29,997 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:05:29,998 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:05:29,998 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:05:42,866 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:05:43,018 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-12 01:05:43,019 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-12 01:05:43,020 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:05:43,020 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-12 01:05:43,020 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:05:43,501 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:05:43,501 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:05:43,502 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:05:43,502 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:05:43,502 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:05:43,502 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:05:43,792 - test_enhanced_rstp_coverage - INFO - 端口br3状态转换: disabled
2025-09-12 01:05:46,222 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:05:46,378 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Designated Discarding 20000    128.2


2025-09-12 01:05:46,379 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-12 01:05:46,379 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-12 01:05:46,379 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-12 01:05:46,379 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-12 01:05:46,855 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:05:46,855 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:05:46,856 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:05:46,857 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:05:46,857 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:05:46,857 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:05:47,156 - test_enhanced_rstp_coverage - INFO - 端口br3状态转换: forwarding
2025-09-12 01:05:49,573 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:05:49,730 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-12 01:05:49,731 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-12 01:05:49,731 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-12 01:05:49,732 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-12 01:05:49,732 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-12 01:05:50,207 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:05:50,208 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:05:50,209 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:05:50,209 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:05:50,209 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:05:50,209 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:05:52,941 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:05:53,098 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-12 01:05:53,099 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-12 01:05:53,099 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-12 01:05:53,099 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-12 01:05:53,100 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-12 01:05:53,575 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:05:53,576 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:05:53,577 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:05:53,577 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:05:53,577 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:05:53,577 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:05:56,302 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:05:56,462 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-12 01:05:56,463 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-12 01:05:56,463 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-12 01:05:56,463 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-12 01:05:56,464 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-12 01:05:56,939 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:05:56,939 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:05:56,940 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:05:56,940 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:05:56,941 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:05:56,941 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:05:59,240 - test_enhanced_rstp_coverage - INFO - 端口重启状态转换: ['forwarding', 'disabled', 'forwarding']
2025-09-12 01:05:59,240 - test_enhanced_rstp_coverage - INFO - 重启场景状态转换验证
2025-09-12 01:05:59,241 - test_enhanced_rstp_coverage - INFO - ✓ 重启: 状态转换序列正常
2025-09-12 01:05:59,241 - test_enhanced_rstp_coverage - INFO - === 测试场景2: 强制Learning状态 ===
2025-09-12 01:05:59,300 - test_enhanced_rstp_coverage - INFO - 原始Forward Delay: 4
2025-09-12 01:05:59,881 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:06:00,041 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-12 01:06:00,043 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-12 01:06:00,043 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-12 01:06:00,043 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-12 01:06:00,043 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-12 01:06:00,515 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:06:00,516 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:06:00,517 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:06:00,517 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:06:00,517 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:06:00,518 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:06:13,369 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:06:13,525 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-12 01:06:13,526 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-12 01:06:13,526 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-12 01:06:13,526 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-12 01:06:13,527 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-12 01:06:13,994 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:06:13,995 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:06:13,996 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:06:13,996 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:06:13,996 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:06:13,996 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:06:14,284 - test_enhanced_rstp_coverage - INFO - 端口br3状态转换: disabled
2025-09-12 01:06:16,713 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:06:16,873 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Designated Discarding 20000    128.2


2025-09-12 01:06:16,874 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-12 01:06:16,874 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-12 01:06:16,874 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-12 01:06:16,874 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-12 01:06:17,362 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:06:17,363 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:06:17,364 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:06:17,364 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:06:17,364 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:06:17,365 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:06:17,652 - test_enhanced_rstp_coverage - INFO - 端口br3状态转换: forwarding
2025-09-12 01:06:20,081 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:06:20,241 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-12 01:06:20,242 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-12 01:06:20,242 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-12 01:06:20,242 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-12 01:06:20,243 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-12 01:06:20,723 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:06:20,723 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:06:20,724 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:06:20,725 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:06:20,725 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:06:20,725 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:06:23,460 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:06:23,621 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-12 01:06:23,622 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-12 01:06:23,622 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-12 01:06:23,622 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-12 01:06:23,623 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-12 01:06:24,118 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:06:24,119 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:06:24,120 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:06:24,120 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:06:24,120 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:06:24,120 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:06:26,421 - test_enhanced_rstp_coverage - INFO - Learning状态转换: ['forwarding', 'disabled', 'forwarding']
2025-09-12 01:06:26,421 - test_enhanced_rstp_coverage - WARNING - 未观察到Learning状态，可能是快速转换
2025-09-12 01:06:26,493 - test_enhanced_rstp_coverage - INFO - === 测试场景3: 拓扑变更状态转换 ===
2025-09-12 01:06:27,231 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:06:27,389 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-12 01:06:27,390 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-12 01:06:27,390 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-12 01:06:27,390 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-12 01:06:27,390 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-12 01:06:27,862 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:06:27,862 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:06:27,863 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:06:27,863 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:06:27,864 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:06:27,864 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:06:28,171 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-12 01:06:28,172 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级12288 -> mstpd优先级3)
2025-09-12 01:06:28,300 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-12 01:06:28,725 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:06:28,885 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-12 01:06:28,886 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-12 01:06:28,887 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-12 01:06:28,887 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-12 01:06:28,888 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-12 01:06:29,374 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:06:29,375 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:06:29,376 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:06:29,376 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:06:29,376 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:06:29,376 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:06:32,096 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:06:32,253 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-12 01:06:32,254 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-12 01:06:32,254 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-12 01:06:32,255 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-12 01:06:32,255 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-12 01:06:32,750 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:06:32,751 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:06:32,752 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:06:32,752 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:06:32,752 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:06:32,752 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:06:35,480 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:06:35,641 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-12 01:06:35,642 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-12 01:06:35,642 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-12 01:06:35,642 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-12 01:06:35,642 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-12 01:06:36,122 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:06:36,122 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:06:36,124 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:06:36,124 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:06:36,124 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:06:36,124 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:06:38,844 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:06:39,000 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-12 01:06:39,002 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-12 01:06:39,002 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-12 01:06:39,002 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-12 01:06:39,002 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-12 01:06:39,482 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:06:39,483 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:06:39,484 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:06:39,485 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:06:39,485 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:06:39,485 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:06:42,223 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:06:42,381 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-12 01:06:42,382 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-12 01:06:42,382 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-12 01:06:42,382 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-12 01:06:42,383 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-12 01:06:42,854 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:06:42,854 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:06:42,856 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:06:42,856 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:06:42,857 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:06:42,857 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:06:45,596 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:06:45,757 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-12 01:06:45,758 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-12 01:06:45,758 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-12 01:06:45,759 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-12 01:06:45,759 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-12 01:06:46,250 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:06:46,250 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:06:46,252 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:06:46,252 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:06:46,252 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:06:46,252 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:06:48,556 - test_enhanced_rstp_coverage - INFO - 拓扑变更状态转换: ['forwarding']
2025-09-12 01:06:48,992 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:06:49,157 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-12 01:06:49,158 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-12 01:06:49,158 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-12 01:06:49,159 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-12 01:06:49,159 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-12 01:06:49,638 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:06:49,638 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:06:49,639 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:06:49,639 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:06:49,639 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:06:49,640 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:06:49,939 - test_enhanced_rstp_coverage - INFO - ✓ 拓扑变更后端口br3最终状态: forwarding
2025-09-12 01:06:49,939 - test_enhanced_rstp_coverage - INFO - ✓ 全面端口状态转换测试完成
2025-09-12 01:06:49,940 - RSTPTest - INFO - 测试完成: test_comprehensive_port_state_transitions (耗时: 102.95秒)
2025-09-12 01:06:49,941 - RSTPTest - INFO - ============================================================

2025-09-12 01:06:49,943 - RSTPTest - INFO - ============================================================
2025-09-12 01:06:49,943 - RSTPTest - INFO - 开始测试: test_detailed_bpdu_analysis
2025-09-12 01:06:49,943 - RSTPTest - INFO - ============================================================
2025-09-12 01:06:49,944 - test_enhanced_rstp_coverage - INFO - 开始详细BPDU分析测试
2025-09-12 01:06:49,944 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-12 01:06:49,944 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-12 01:06:49,944 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-12 01:06:49,944 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-12 01:06:49,944 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-12 01:06:49,945 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-12 01:06:49,945 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-12 01:06:49,945 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-12 01:06:49,945 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-12 01:06:50,470 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-12 01:06:50,470 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-12 01:06:50,470 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-12 01:06:50,630 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-12 01:06:51,754 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-12 01:06:51,754 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-12 01:06:51,755 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-12 01:06:51,755 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-12 01:06:51,755 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-12 01:06:52,259 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-12 01:06:52,762 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-12 01:06:52,762 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-12 01:06:52,962 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-12 01:06:52,963 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-12 01:06:52,963 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-12 01:06:52,963 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-12 01:06:52,963 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-12 01:06:52,963 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-12 01:06:52,964 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-12 01:06:52,964 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-12 01:06:53,463 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-12 01:06:57,988 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:06:58,119 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:06:58,120 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-12 01:06:58,120 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-12 01:06:58,120 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:06:58,121 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-12 01:06:59,302 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-12 01:07:00,501 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-12 01:07:00,502 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-12 01:07:00,599 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-12 01:07:00,870 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-12 01:07:00,871 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-12 01:07:00,871 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-12 01:07:00,872 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-12 01:07:00,872 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-12 01:07:00,872 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-12 01:07:00,872 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-12 01:07:00,872 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-12 01:07:01,353 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-12 01:08:25,504 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:08:35,584 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:08:35,585 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-12 01:08:35,585 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-12 01:08:35,585 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:08:35,585 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-12 01:09:43,057 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-12 01:10:34,887 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-12 01:10:34,887 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-12 01:10:34,983 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-12 01:10:45,203 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-12 01:10:45,203 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-12 01:10:45,203 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-12 01:10:45,204 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 4096 (方法: mstpd)
2025-09-12 01:10:45,204 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级4096 -> mstpd优先级1)
2025-09-12 01:10:45,333 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-12 01:10:45,333 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 8192 (方法: ovs)
2025-09-12 01:10:45,333 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-12 01:10:45,446 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-12 01:10:45,624 - NetworkTopology_TestNode2 - INFO - TestNode2: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-12 01:10:45,625 - NetworkTopology_TestNode2 - INFO - TestNode2: 执行mstpd设置优先级命令 (标准优先级12288 -> mstpd优先级3)
2025-09-12 01:10:50,566 - NetworkTopology_TestNode2 - INFO - TestNode2: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-12 01:10:50,567 - test_enhanced_rstp_coverage - INFO - 等待RSTP收敛...
2025-09-12 01:10:50,567 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-12 01:10:50,993 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:10:51,153 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-12 01:10:51,154 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-12 01:10:51,154 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:10:51,154 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-12 01:10:51,154 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:10:51,638 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:10:51,638 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:10:51,639 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:10:51,640 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:10:51,640 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:10:51,640 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:10:51,947 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.380秒
2025-09-12 01:10:52,420 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:10:52,581 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-12 01:10:52,582 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-12 01:10:52,583 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:10:52,583 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-12 01:10:52,583 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:10:53,058 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:10:53,059 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:10:53,060 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:10:53,060 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:10:53,060 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:10:53,060 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:10:53,347 - test_enhanced_rstp_coverage - INFO - Hello Time: 2秒
2025-09-12 01:10:53,347 - test_enhanced_rstp_coverage - INFO - === 测试1: 验证分布式BPDU生成 ===
2025-09-12 01:10:53,347 - test_enhanced_rstp_coverage - INFO - 在端口br3上捕获BPDU
2025-09-12 01:10:53,348 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br3, 数量: 10)
2025-09-12 01:11:05,508 - RSTPAnalyzer_DUT - INFO - 捕获到 5 个BPDU包
2025-09-12 01:11:05,508 - test_enhanced_rstp_coverage - INFO - 端口br3捕获到5个BPDU
2025-09-12 01:11:05,508 - test_enhanced_rstp_coverage - INFO - 在端口br4上捕获BPDU
2025-09-12 01:11:05,508 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br4, 数量: 10)
2025-09-12 01:11:17,647 - RSTPAnalyzer_DUT - INFO - 捕获到 6 个BPDU包
2025-09-12 01:11:17,648 - test_enhanced_rstp_coverage - INFO - 端口br4捕获到6个BPDU
2025-09-12 01:11:17,648 - test_enhanced_rstp_coverage - INFO - 总共捕获11个BPDU，来自0个不同源
2025-09-12 01:11:17,648 - test_enhanced_rstp_coverage - WARNING - 只检测到一个BPDU源，可能是拓扑限制
2025-09-12 01:11:17,648 - test_enhanced_rstp_coverage - INFO - === 测试2: 验证BPDU保活机制 ===
2025-09-12 01:11:17,649 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br3, 数量: 10)
2025-09-12 01:11:23,787 - RSTPAnalyzer_DUT - INFO - 捕获到 2 个BPDU包
2025-09-12 01:11:23,788 - test_enhanced_rstp_coverage - INFO - 正常情况下6秒内收到2个BPDU
2025-09-12 01:11:23,788 - test_enhanced_rstp_coverage - INFO - 模拟邻居故障，断开端口br3
2025-09-12 01:11:45,893 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br3, 数量: 10)
2025-09-12 01:11:49,987 - RSTPAnalyzer_DUT - INFO - 捕获到 1 个BPDU包
2025-09-12 01:11:49,987 - test_enhanced_rstp_coverage - INFO - 恢复后4秒内收到1个BPDU
2025-09-12 01:11:49,988 - test_enhanced_rstp_coverage - INFO - ✓ BPDU保活机制验证成功
2025-09-12 01:11:49,988 - test_enhanced_rstp_coverage - INFO - === 测试3: BPDU内容验证 ===
2025-09-12 01:11:49,988 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br3, 数量: 3)
2025-09-12 01:11:55,259 - RSTPAnalyzer_DUT - INFO - 捕获到 3 个BPDU包
2025-09-12 01:11:55,259 - test_enhanced_rstp_coverage - INFO - BPDU 1 分析:
2025-09-12 01:11:55,260 - test_enhanced_rstp_coverage - WARNING -   缺少字段: bridge_id
2025-09-12 01:11:55,260 - test_enhanced_rstp_coverage - WARNING -   缺少字段: root_id
2025-09-12 01:11:55,260 - test_enhanced_rstp_coverage - WARNING -   缺少字段: root_path_cost
2025-09-12 01:11:55,260 - test_enhanced_rstp_coverage - WARNING -   未检测到RSTP特有字段
2025-09-12 01:11:55,260 - test_enhanced_rstp_coverage - INFO - BPDU 2 分析:
2025-09-12 01:11:55,261 - test_enhanced_rstp_coverage - WARNING -   缺少字段: bridge_id
2025-09-12 01:11:55,261 - test_enhanced_rstp_coverage - WARNING -   缺少字段: root_id
2025-09-12 01:11:55,261 - test_enhanced_rstp_coverage - WARNING -   缺少字段: root_path_cost
2025-09-12 01:11:55,261 - test_enhanced_rstp_coverage - WARNING -   未检测到RSTP特有字段
2025-09-12 01:11:55,261 - test_enhanced_rstp_coverage - INFO - BPDU 3 分析:
2025-09-12 01:11:55,261 - test_enhanced_rstp_coverage - WARNING -   缺少字段: bridge_id
2025-09-12 01:11:55,262 - test_enhanced_rstp_coverage - WARNING -   缺少字段: root_id
2025-09-12 01:11:55,262 - test_enhanced_rstp_coverage - WARNING -   缺少字段: root_path_cost
2025-09-12 01:11:55,262 - test_enhanced_rstp_coverage - WARNING -   未检测到RSTP特有字段
2025-09-12 01:11:55,262 - test_enhanced_rstp_coverage - INFO - ✓ 详细BPDU分析测试完成
2025-09-12 01:11:55,263 - RSTPTest - INFO - 测试完成: test_detailed_bpdu_analysis (耗时: 305.32秒)
2025-09-12 01:11:55,263 - RSTPTest - INFO - ============================================================

2025-09-12 01:11:55,264 - RSTPTest - INFO - ============================================================
2025-09-12 01:11:55,265 - RSTPTest - INFO - 开始测试: test_topology_change_comprehensive
2025-09-12 01:11:55,265 - RSTPTest - INFO - ============================================================
2025-09-12 01:11:55,265 - test_enhanced_rstp_coverage - INFO - 开始全面拓扑变更测试
2025-09-12 01:11:55,265 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-12 01:11:55,266 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-12 01:11:55,266 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-12 01:11:55,266 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-12 01:11:55,266 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-12 01:11:55,266 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-12 01:11:55,266 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-12 01:11:55,267 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-12 01:11:55,267 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-12 01:11:55,789 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-12 01:11:55,790 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-12 01:11:55,790 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-12 01:11:55,953 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-12 01:11:57,081 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-12 01:11:57,081 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-12 01:11:57,081 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-12 01:11:57,081 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-12 01:11:57,082 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-12 01:11:57,578 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-12 01:11:58,070 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-12 01:11:58,070 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-12 01:11:58,270 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-12 01:11:58,270 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-12 01:11:58,271 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-12 01:11:58,271 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-12 01:11:58,271 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-12 01:11:58,271 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-12 01:11:58,271 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-12 01:11:58,271 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-12 01:11:58,771 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-12 01:12:03,256 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:12:03,384 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:12:03,385 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-12 01:12:03,385 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-12 01:12:03,385 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:12:03,385 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-12 01:12:04,589 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-12 01:12:05,785 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-12 01:12:05,786 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-12 01:12:05,882 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-12 01:12:06,148 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-12 01:12:06,148 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-12 01:12:06,148 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-12 01:12:06,148 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-12 01:12:06,149 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-12 01:12:06,149 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-12 01:12:06,149 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-12 01:12:06,149 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-12 01:12:06,636 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-12 01:12:11,137 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:12:11,271 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:12:11,271 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-12 01:12:11,272 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-12 01:12:11,272 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:12:11,272 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-12 01:12:12,440 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-12 01:12:13,625 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-12 01:12:13,626 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-12 01:12:13,721 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-12 01:12:13,985 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-12 01:12:13,986 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-12 01:12:13,986 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-12 01:12:13,986 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 4096 (方法: mstpd)
2025-09-12 01:12:13,987 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级4096 -> mstpd优先级1)
2025-09-12 01:12:14,117 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-12 01:12:14,117 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 8192 (方法: ovs)
2025-09-12 01:12:14,118 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-12 01:12:14,236 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-12 01:12:14,412 - test_enhanced_rstp_coverage - INFO - 等待初始收敛...
2025-09-12 01:12:14,413 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-12 01:12:14,864 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:12:15,015 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-12 01:12:15,017 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-12 01:12:15,017 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:12:15,017 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-12 01:12:15,017 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:12:15,473 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:12:15,473 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:12:15,475 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:12:15,475 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:12:15,475 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:12:15,475 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:12:15,774 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.362秒
2025-09-12 01:12:16,247 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:12:16,411 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-12 01:12:16,412 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-12 01:12:16,413 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:12:16,413 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-12 01:12:16,413 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:12:16,884 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:12:16,884 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:12:16,886 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:12:16,886 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:12:16,886 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:12:16,886 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:12:17,659 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:12:17,811 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-12 01:12:17,812 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-12 01:12:17,812 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:12:17,812 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-12 01:12:17,813 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:12:18,296 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:12:18,297 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:12:18,298 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:12:18,298 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:12:18,298 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:12:18,298 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:12:18,606 - RSTPAnalyzer_DUT - INFO - Root ID为unknown，判定为非根桥
2025-09-12 01:12:18,606 - test_enhanced_rstp_coverage - INFO - 初始状态: DUT是根桥=False
2025-09-12 01:12:18,606 - test_enhanced_rstp_coverage - INFO - === 测试场景1: 根桥变更 ===
2025-09-12 01:12:18,607 - test_enhanced_rstp_coverage - INFO - 将DUT设置为根桥
2025-09-12 01:12:18,607 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 1024 (方法: ovs)
2025-09-12 01:12:18,607 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-12 01:12:18,783 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-12 01:12:24,359 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:12:24,515 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-12 01:12:24,516 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 0
2025-09-12 01:12:24,516 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-12 01:12:24,516 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 0000/90:12:10:b5:7d:f7
2025-09-12 01:12:24,516 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 0000/90:12:10:b5:7d:f7
2025-09-12 01:12:25,001 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:12:25,001 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:12:25,002 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:12:25,002 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:12:25,003 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:12:25,003 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:12:25,767 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:12:25,923 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-12 01:12:25,924 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 0
2025-09-12 01:12:25,925 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-12 01:12:25,925 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 0000/90:12:10:b5:7d:f7
2025-09-12 01:12:25,925 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 0000/90:12:10:b5:7d:f7
2025-09-12 01:12:26,404 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:12:26,405 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:12:26,406 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:12:26,406 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:12:26,406 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:12:26,406 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:12:26,718 - RSTPAnalyzer_DUT - INFO - 根桥检查: bridge_id='0000/90:12:10:b5:7d:f7', root_id='0000/90:12:10:b5:7d:f7', is_root=True
2025-09-12 01:12:26,718 - test_enhanced_rstp_coverage - INFO - ✓ 检测到根桥变更
2025-09-12 01:12:26,719 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br3, 数量: 5)
2025-09-12 01:12:36,050 - RSTPAnalyzer_DUT - INFO - 捕获到 5 个BPDU包
2025-09-12 01:12:36,051 - test_enhanced_rstp_coverage - INFO - === 测试场景2: 端口故障恢复 ===
2025-09-12 01:12:36,535 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:12:36,695 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-12 01:12:36,696 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 0
2025-09-12 01:12:36,696 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-12 01:12:36,697 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 0000/90:12:10:b5:7d:f7
2025-09-12 01:12:36,697 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 0000/90:12:10:b5:7d:f7
2025-09-12 01:12:37,184 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:12:37,184 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:12:37,185 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:12:37,186 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:12:37,186 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:12:37,186 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:12:37,489 - test_enhanced_rstp_coverage - INFO - 测试端口br3故障恢复
2025-09-12 01:12:57,966 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:12:58,123 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Disabled   Discarding 20000    128.2


2025-09-12 01:12:58,124 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 0
2025-09-12 01:12:58,124 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-12 01:12:58,124 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 0000/90:12:10:b5:7d:f7
2025-09-12 01:12:58,124 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 0000/90:12:10:b5:7d:f7
2025-09-12 01:12:58,604 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:12:58,604 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:12:58,605 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:12:58,605 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:12:58,605 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:12:58,606 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:12:58,905 - test_enhanced_rstp_coverage - INFO - ✓ 端口故障引起拓扑变更
2025-09-12 01:13:09,455 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:13:09,606 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-12 01:13:09,608 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 0
2025-09-12 01:13:09,608 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-12 01:13:09,608 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 0000/90:12:10:b5:7d:f7
2025-09-12 01:13:09,608 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 0000/90:12:10:b5:7d:f7
2025-09-12 01:13:10,068 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:13:10,068 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:13:10,069 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:13:10,069 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:13:10,069 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:13:10,070 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:13:10,356 - test_enhanced_rstp_coverage - INFO - ✓ 端口br3成功恢复，状态: forwarding
2025-09-12 01:13:10,357 - test_enhanced_rstp_coverage - INFO - === 测试场景3: 端口优先级变更 ===
2025-09-12 01:13:10,835 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:13:10,994 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-12 01:13:10,995 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 0
2025-09-12 01:13:10,995 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-12 01:13:10,995 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 0000/90:12:10:b5:7d:f7
2025-09-12 01:13:10,996 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 0000/90:12:10:b5:7d:f7
2025-09-12 01:13:11,464 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:13:11,464 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:13:11,466 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:13:11,466 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:13:11,466 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:13:11,466 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:13:11,761 - test_enhanced_rstp_coverage - INFO - 修改端口br3优先级
2025-09-12 01:13:20,294 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:13:20,450 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Designated Forwarding 20000    64.2


2025-09-12 01:13:20,451 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 0
2025-09-12 01:13:20,452 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-12 01:13:20,452 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 0000/90:12:10:b5:7d:f7
2025-09-12 01:13:20,452 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 0000/90:12:10:b5:7d:f7
2025-09-12 01:13:20,924 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:13:20,924 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:13:20,925 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:13:20,926 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:13:20,926 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:13:20,926 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:13:21,217 - test_enhanced_rstp_coverage - INFO - 端口br3优先级变更后状态: forwarding
2025-09-12 01:13:21,217 - test_enhanced_rstp_coverage - INFO - ✓ 拓扑变更测试通过：成功检测到多种拓扑变更
2025-09-12 01:13:21,218 - test_enhanced_rstp_coverage - INFO - ✓ 全面拓扑变更测试完成
2025-09-12 01:13:21,218 - RSTPTest - INFO - 测试完成: test_topology_change_comprehensive (耗时: 85.95秒)
2025-09-12 01:13:21,219 - RSTPTest - INFO - ============================================================

2025-09-12 01:13:21,219 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-12 01:13:21,219 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-12 01:13:21,220 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-12 01:13:21,358 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-12 01:13:21,359 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-12 01:13:21,492 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-12 01:13:21,492 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-12 01:13:21,627 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-12 01:13:21,627 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-12 01:13:21,627 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-12 01:13:21,628 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-12 01:13:21,628 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-12 01:13:21,628 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-12 01:13:21,684 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-12 01:13:21,685 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-12 01:13:21,853 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-12 01:13:21,853 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-12 01:13:21,853 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-12 01:13:21,853 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-12 01:13:21,854 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-12 01:13:21,908 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-12 01:13:21,908 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-12 01:13:32,031 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-12 01:13:32,032 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-12 01:13:32,032 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-12 01:13:32,032 - RSTPTest - INFO - ============================================================
2025-09-12 01:13:32,032 - RSTPTest - INFO - 开始测试: test_rstp_reconvergence_no_switchover
2025-09-12 01:13:32,033 - RSTPTest - INFO - ============================================================
2025-09-12 01:13:32,033 - test_high_availability - INFO - 开始RSTP重构误判测试
2025-09-12 01:13:32,033 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-12 01:13:32,034 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-12 01:13:32,034 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-12 01:13:32,034 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-12 01:13:32,034 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-12 01:13:32,034 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-12 01:13:32,034 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-12 01:13:32,035 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-12 01:13:32,035 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-12 01:13:32,544 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-12 01:13:32,544 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-12 01:13:32,544 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-12 01:13:32,704 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-12 01:13:33,816 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-12 01:13:33,816 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-12 01:13:33,816 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-12 01:13:33,816 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-12 01:13:33,817 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-12 01:13:34,312 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-12 01:13:34,805 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-12 01:13:34,806 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-12 01:13:35,000 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-12 01:13:35,001 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-12 01:13:35,001 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-12 01:13:35,001 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-12 01:13:35,001 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-12 01:13:35,002 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-12 01:13:35,002 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-12 01:13:35,002 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-12 01:13:35,522 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-12 01:13:40,040 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:13:40,170 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:13:40,170 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-12 01:13:40,171 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-12 01:13:40,171 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:13:40,171 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-12 01:13:41,349 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-12 01:13:42,533 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-12 01:13:42,533 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-12 01:13:42,629 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-12 01:13:42,895 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-12 01:13:42,896 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-12 01:13:42,896 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-12 01:13:42,896 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-12 01:13:42,896 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-12 01:13:42,897 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-12 01:13:42,897 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-12 01:13:42,897 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-12 01:14:13,252 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-12 01:15:37,834 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:15:41,978 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:15:41,978 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-12 01:15:41,978 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-12 01:15:41,979 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:15:41,979 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-12 01:16:39,202 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-12 01:17:35,792 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-12 01:17:35,792 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-12 01:17:35,887 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-12 01:17:41,161 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-12 01:17:41,162 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-12 01:17:41,162 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-12 01:17:46,215 - test_high_availability - INFO - 初始HA状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-12 01:17:46,216 - test_high_availability - INFO - 在远端触发RSTP重构...
2025-09-12 01:17:46,216 - FaultInjector_TestNode2 - INFO - 断开链路: eth0
2025-09-12 01:17:56,344 - FaultInjector_TestNode2 - INFO - 链路已断开: eth0
2025-09-12 01:18:06,399 - test_high_availability - INFO - RSTP重构后HA状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-12 01:18:06,399 - FaultInjector_TestNode2 - INFO - 恢复链路: eth0
2025-09-12 01:18:14,531 - FaultInjector_TestNode2 - INFO - 链路已恢复: eth0
2025-09-12 01:18:14,531 - test_high_availability - INFO - RSTP重构误判测试完成
2025-09-12 01:18:14,532 - RSTPTest - INFO - 测试完成: test_rstp_reconvergence_no_switchover (耗时: 282.50秒)
2025-09-12 01:18:14,533 - RSTPTest - INFO - ============================================================

2025-09-12 01:18:14,534 - RSTPTest - INFO - ============================================================
2025-09-12 01:18:14,535 - RSTPTest - INFO - 开始测试: test_split_brain_scenario
2025-09-12 01:18:14,535 - RSTPTest - INFO - ============================================================
2025-09-12 01:18:14,536 - test_high_availability - INFO - 开始裂脑场景测试
2025-09-12 01:18:14,586 - test_high_availability - INFO - 初始状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-12 01:18:14,586 - test_high_availability - INFO - 断开同步链路: eth3
2025-09-12 01:18:14,587 - FaultInjector_DUT - INFO - 断开链路: eth3
2025-09-12 01:18:14,842 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth3 (code=1)，将在逻辑上标记为已断开
2025-09-12 01:18:24,843 - test_high_availability - WARNING - 裂脑测试需要访问两个控制器
2025-09-12 01:18:24,843 - FaultInjector_DUT - INFO - 恢复链路: eth3
2025-09-12 01:18:25,071 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth3 (code=1)，将在逻辑上标记为已恢复
2025-09-12 01:18:25,071 - test_high_availability - INFO - 裂脑场景测试完成
2025-09-12 01:18:25,072 - RSTPTest - INFO - 测试完成: test_split_brain_scenario (耗时: 10.54秒)
2025-09-12 01:18:25,072 - RSTPTest - INFO - ============================================================

2025-09-12 01:18:25,076 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-12 01:18:25,076 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-12 01:18:25,077 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-12 01:18:25,217 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-12 01:18:25,217 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-12 01:18:25,218 - RSTPTest - INFO - ============================================================
2025-09-12 01:18:25,218 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[12288]
2025-09-12 01:18:25,218 - RSTPTest - INFO - ============================================================
2025-09-12 01:18:25,219 - test_parameters - INFO - 测试网桥优先级: 12288
2025-09-12 01:18:26,708 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-12 01:18:26,708 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-12 01:18:26,709 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 12288 (方法: ovs)
2025-09-12 01:18:26,709 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-12 01:18:26,833 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-12 01:18:26,982 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-12 01:18:29,093 - test_parameters - INFO - 从OVS配置读取到优先级: 12288
2025-09-12 01:18:29,093 - test_parameters - INFO - 优先级12288设置成功
2025-09-12 01:18:29,094 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[12288] (耗时: 3.88秒)
2025-09-12 01:18:29,094 - RSTPTest - INFO - ============================================================

2025-09-12 01:18:29,095 - RSTPTest - INFO - ============================================================
2025-09-12 01:18:29,096 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[16384]
2025-09-12 01:18:29,096 - RSTPTest - INFO - ============================================================
2025-09-12 01:18:29,096 - test_parameters - INFO - 测试网桥优先级: 16384
2025-09-12 01:18:30,568 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-12 01:18:30,568 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-12 01:18:30,568 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 16384 (方法: ovs)
2025-09-12 01:18:30,568 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-12 01:18:30,694 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-12 01:18:30,850 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-12 01:18:32,959 - test_parameters - INFO - 从OVS配置读取到优先级: 16384
2025-09-12 01:18:32,959 - test_parameters - INFO - 优先级16384设置成功
2025-09-12 01:18:32,960 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[16384] (耗时: 3.86秒)
2025-09-12 01:18:32,960 - RSTPTest - INFO - ============================================================

2025-09-12 01:18:32,961 - RSTPTest - INFO - ============================================================
2025-09-12 01:18:32,962 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[32768]
2025-09-12 01:18:32,962 - RSTPTest - INFO - ============================================================
2025-09-12 01:18:32,962 - test_parameters - INFO - 测试网桥优先级: 32768
2025-09-12 01:18:34,440 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-12 01:18:34,440 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-12 01:18:34,440 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 32768 (方法: ovs)
2025-09-12 01:18:34,441 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-12 01:18:34,569 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-12 01:18:34,717 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-12 01:18:36,828 - test_parameters - INFO - 从OVS配置读取到优先级: 32768
2025-09-12 01:18:36,829 - test_parameters - INFO - 优先级32768设置成功
2025-09-12 01:18:36,830 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[32768] (耗时: 3.87秒)
2025-09-12 01:18:36,830 - RSTPTest - INFO - ============================================================

2025-09-12 01:18:36,831 - RSTPTest - INFO - ============================================================
2025-09-12 01:18:36,831 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[61440]
2025-09-12 01:18:36,831 - RSTPTest - INFO - ============================================================
2025-09-12 01:18:36,832 - test_parameters - INFO - 测试网桥优先级: 61440
2025-09-12 01:18:38,307 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-12 01:18:38,307 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-12 01:18:38,308 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 61440 (方法: ovs)
2025-09-12 01:18:38,308 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-12 01:18:38,434 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-12 01:18:38,586 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-12 01:18:40,694 - test_parameters - INFO - 从OVS配置读取到优先级: 61440
2025-09-12 01:18:40,695 - test_parameters - INFO - 优先级61440设置成功
2025-09-12 01:18:40,696 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[61440] (耗时: 3.86秒)
2025-09-12 01:18:40,696 - RSTPTest - INFO - ============================================================

2025-09-12 01:18:40,697 - RSTPTest - INFO - ============================================================
2025-09-12 01:18:40,697 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[4097]
2025-09-12 01:18:40,698 - RSTPTest - INFO - ============================================================
2025-09-12 01:18:40,698 - test_parameters - INFO - 测试无效优先级: 4097
2025-09-12 01:18:41,339 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-12 01:18:41,339 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-12 01:18:41,339 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 4097 (方法: ovs)
2025-09-12 01:18:41,340 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-12 01:18:41,504 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-12 01:18:42,762 - test_parameters - INFO - DUT处理无效优先级 4097 -> 4097
2025-09-12 01:18:42,762 - test_parameters - ERROR - DUT接受了非标准优先级值 4097，不符合802.1D标准（应为4096的倍数）
2025-09-12 01:18:42,779 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[4097] (耗时: 2.08秒)
2025-09-12 01:18:42,780 - RSTPTest - INFO - ============================================================

2025-09-12 01:18:42,781 - RSTPTest - INFO - ============================================================
2025-09-12 01:18:42,782 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[12289]
2025-09-12 01:18:42,782 - RSTPTest - INFO - ============================================================
2025-09-12 01:18:42,782 - test_parameters - INFO - 测试无效优先级: 12289
2025-09-12 01:18:43,367 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-12 01:18:43,367 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-12 01:18:43,367 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 12289 (方法: ovs)
2025-09-12 01:18:43,368 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-12 01:18:43,537 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-12 01:18:44,803 - test_parameters - INFO - DUT处理无效优先级 12289 -> 12289
2025-09-12 01:18:44,803 - test_parameters - ERROR - DUT接受了非标准优先级值 12289，不符合802.1D标准（应为4096的倍数）
2025-09-12 01:18:44,820 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[12289] (耗时: 2.04秒)
2025-09-12 01:18:44,821 - RSTPTest - INFO - ============================================================

2025-09-12 01:18:44,822 - RSTPTest - INFO - ============================================================
2025-09-12 01:18:44,823 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[70000]
2025-09-12 01:18:44,823 - RSTPTest - INFO - ============================================================
2025-09-12 01:18:44,824 - test_parameters - INFO - 测试无效优先级: 70000
2025-09-12 01:18:45,399 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-12 01:18:45,399 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-12 01:18:45,400 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 70000 (方法: ovs)
2025-09-12 01:18:45,400 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-12 01:18:45,564 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-12 01:18:46,815 - test_parameters - INFO - DUT处理无效优先级 70000 -> 70000
2025-09-12 01:18:46,815 - test_parameters - ERROR - DUT接受了非标准优先级值 70000，不符合802.1D标准（应为4096的倍数）
2025-09-12 01:18:46,833 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[70000] (耗时: 2.01秒)
2025-09-12 01:18:46,833 - RSTPTest - INFO - ============================================================

2025-09-12 01:18:46,835 - RSTPTest - INFO - ============================================================
2025-09-12 01:18:46,835 - RSTPTest - INFO - 开始测试: test_hello_time
2025-09-12 01:18:46,836 - RSTPTest - INFO - ============================================================
2025-09-12 01:18:46,836 - test_parameters - INFO - 测试Hello Time参数
2025-09-12 01:18:48,423 - test_parameters - INFO - 设置Hello Time: 1秒
2025-09-12 01:18:48,424 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-12 01:18:48,424 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-12 01:18:50,651 - test_parameters - INFO - 设置Hello Time: 2秒
2025-09-12 01:18:50,651 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-12 01:18:50,651 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-12 01:18:52,922 - test_parameters - INFO - 设置Hello Time: 5秒
2025-09-12 01:18:52,922 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-12 01:18:52,922 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-12 01:18:55,194 - test_parameters - INFO - Hello Time测试通过
2025-09-12 01:18:55,195 - RSTPTest - INFO - 测试完成: test_hello_time (耗时: 8.36秒)
2025-09-12 01:18:55,196 - RSTPTest - INFO - ============================================================

2025-09-12 01:18:55,197 - RSTPTest - INFO - ============================================================
2025-09-12 01:18:55,197 - RSTPTest - INFO - 开始测试: test_forward_delay
2025-09-12 01:18:55,197 - RSTPTest - INFO - ============================================================
2025-09-12 01:18:55,198 - test_parameters - INFO - 测试Forward Delay参数
2025-09-12 01:18:56,799 - test_parameters - INFO - 设置Forward Delay: 4秒
2025-09-12 01:18:56,799 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-12 01:18:56,799 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-12 01:18:59,033 - test_parameters - INFO - 设置Forward Delay: 10秒
2025-09-12 01:18:59,033 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-12 01:18:59,034 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-12 01:19:01,307 - test_parameters - INFO - 设置Forward Delay: 15秒
2025-09-12 01:19:01,307 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-12 01:19:01,308 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-12 01:19:03,586 - test_parameters - INFO - Forward Delay测试通过
2025-09-12 01:19:03,587 - RSTPTest - INFO - 测试完成: test_forward_delay (耗时: 8.39秒)
2025-09-12 01:19:03,587 - RSTPTest - INFO - ============================================================

2025-09-12 01:19:03,588 - RSTPTest - INFO - ============================================================
2025-09-12 01:19:03,588 - RSTPTest - INFO - 开始测试: test_max_age
2025-09-12 01:19:03,589 - RSTPTest - INFO - ============================================================
2025-09-12 01:19:03,589 - test_parameters - INFO - 测试Max Age参数
2025-09-12 01:19:05,187 - test_parameters - INFO - 设置Max Age: 6秒
2025-09-12 01:19:05,187 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-12 01:19:05,187 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-12 01:19:07,418 - test_parameters - INFO - 设置Max Age: 10秒
2025-09-12 01:19:07,419 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-12 01:19:07,419 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-12 01:19:09,691 - test_parameters - INFO - 设置Max Age: 20秒
2025-09-12 01:19:09,692 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-12 01:19:09,692 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-12 01:19:11,977 - test_parameters - INFO - Max Age测试通过
2025-09-12 01:19:11,978 - RSTPTest - INFO - 测试完成: test_max_age (耗时: 8.39秒)
2025-09-12 01:19:11,979 - RSTPTest - INFO - ============================================================

2025-09-12 01:19:12,115 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-12 01:19:12,116 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-12 01:19:12,249 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-12 01:19:12,250 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-12 01:19:12,250 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-12 01:19:12,250 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-12 01:19:12,250 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-12 01:19:12,250 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-12 01:19:12,305 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-12 01:19:12,306 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-12 01:19:12,476 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-12 01:19:12,476 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-12 01:19:12,477 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-12 01:19:12,477 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-12 01:19:12,477 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-12 01:19:12,532 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-12 01:19:12,532 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-12 01:19:22,656 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-12 01:19:22,657 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-12 01:19:22,657 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-12 01:19:22,658 - RSTPTest - INFO - ============================================================
2025-09-12 01:19:22,658 - RSTPTest - INFO - 开始测试: test_port_cost
2025-09-12 01:19:22,658 - RSTPTest - INFO - ============================================================
2025-09-12 01:19:22,659 - test_parameters - INFO - 测试端口路径成本
2025-09-12 01:19:22,659 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-12 01:19:22,659 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-12 01:19:22,659 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-12 01:19:22,660 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-12 01:19:22,660 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-12 01:19:22,660 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-12 01:19:22,660 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-12 01:19:22,660 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-12 01:19:22,660 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-12 01:19:23,150 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-12 01:19:23,151 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-12 01:19:23,151 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-12 01:19:23,285 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-12 01:19:24,354 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-12 01:19:24,354 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-12 01:19:24,354 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-12 01:19:24,355 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-12 01:19:24,355 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-12 01:19:24,831 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-12 01:19:25,270 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-12 01:19:25,271 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-12 01:19:25,442 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-12 01:19:25,442 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-12 01:19:25,443 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-12 01:19:25,443 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-12 01:19:25,443 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-12 01:19:25,443 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-12 01:19:25,443 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-12 01:19:25,444 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-12 01:19:25,949 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-12 01:20:30,166 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:20:40,247 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:20:40,247 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-12 01:20:40,248 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-12 01:20:40,248 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:20:40,248 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-12 01:21:50,452 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-12 01:22:44,199 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-12 01:22:44,199 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-12 01:22:44,298 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-12 01:22:52,596 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-12 01:22:52,596 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-12 01:22:52,596 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-12 01:22:52,597 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-12 01:22:52,597 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-12 01:22:52,597 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-12 01:22:52,597 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-12 01:22:52,598 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-12 01:23:08,231 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-12 01:24:42,295 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:24:52,374 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:24:52,375 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-12 01:24:52,375 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-12 01:24:52,375 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:24:52,375 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-12 01:25:56,827 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-12 01:26:48,659 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-12 01:26:48,660 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-12 01:26:48,755 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-12 01:26:58,971 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-12 01:26:58,972 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-12 01:26:58,972 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-12 01:27:03,972 - test_parameters - INFO - 设置端口eth0成本: 10
2025-09-12 01:27:03,973 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-12 01:27:03,973 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-12 01:27:04,037 - test_parameters - INFO - 设置端口eth0成本: 100
2025-09-12 01:27:04,038 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-12 01:27:04,038 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-12 01:27:04,145 - test_parameters - INFO - 设置端口eth0成本: 1000
2025-09-12 01:27:04,146 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-12 01:27:04,146 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-12 01:27:04,253 - test_parameters - INFO - 设置端口eth0成本: 20000
2025-09-12 01:27:04,253 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-12 01:27:04,254 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-12 01:27:04,359 - test_parameters - INFO - 端口成本测试通过
2025-09-12 01:27:04,360 - RSTPTest - INFO - 测试完成: test_port_cost (耗时: 461.70秒)
2025-09-12 01:27:04,360 - RSTPTest - INFO - ============================================================

2025-09-12 01:27:04,361 - RSTPTest - INFO - ============================================================
2025-09-12 01:27:04,362 - RSTPTest - INFO - 开始测试: test_parameter_persistence
2025-09-12 01:27:04,362 - RSTPTest - INFO - ============================================================
2025-09-12 01:27:04,363 - test_parameters - INFO - 测试参数持久性
2025-09-12 01:27:06,010 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-12 01:27:06,011 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-12 01:27:06,011 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 16384 (方法: ovs)
2025-09-12 01:27:06,011 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-12 01:27:06,131 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-12 01:27:11,994 - test_parameters - INFO - 参数持久性测试通过
2025-09-12 01:27:11,995 - RSTPTest - INFO - 测试完成: test_parameter_persistence (耗时: 7.63秒)
2025-09-12 01:27:11,995 - RSTPTest - INFO - ============================================================

2025-09-12 01:27:11,997 - RSTPTest - INFO - ============================================================
2025-09-12 01:27:11,997 - RSTPTest - INFO - 开始测试: test_parameter_boundaries
2025-09-12 01:27:11,997 - RSTPTest - INFO - ============================================================
2025-09-12 01:27:11,998 - test_parameters - INFO - 测试参数边界值
2025-09-12 01:27:13,665 - test_parameters - INFO - 最小值0: 失败
2025-09-12 01:27:13,779 - test_parameters - INFO - 最大值65535: 失败
2025-09-12 01:27:13,882 - test_parameters - INFO - 正确拒绝了无效值-1
2025-09-12 01:27:13,989 - test_parameters - INFO - 正确拒绝了无效值65536
2025-09-12 01:27:14,093 - test_parameters - INFO - 最小值1: 失败
2025-09-12 01:27:14,198 - test_parameters - INFO - 最大值10: 失败
2025-09-12 01:27:14,302 - test_parameters - INFO - 正确拒绝了无效值0
2025-09-12 01:27:14,405 - test_parameters - INFO - 正确拒绝了无效值11
2025-09-12 01:27:14,512 - test_parameters - INFO - 最小值4: 失败
2025-09-12 01:27:14,616 - test_parameters - INFO - 最大值30: 失败
2025-09-12 01:27:14,716 - test_parameters - INFO - 正确拒绝了无效值3
2025-09-12 01:27:14,818 - test_parameters - INFO - 正确拒绝了无效值31
2025-09-12 01:27:14,921 - test_parameters - INFO - 最小值6: 失败
2025-09-12 01:27:15,021 - test_parameters - INFO - 最大值40: 失败
2025-09-12 01:27:15,121 - test_parameters - INFO - 正确拒绝了无效值5
2025-09-12 01:27:15,221 - test_parameters - INFO - 正确拒绝了无效值41
2025-09-12 01:27:15,221 - test_parameters - INFO - 参数边界测试完成
2025-09-12 01:27:15,222 - RSTPTest - INFO - 测试完成: test_parameter_boundaries (耗时: 3.22秒)
2025-09-12 01:27:15,222 - RSTPTest - INFO - ============================================================

2025-09-12 01:27:15,222 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-12 01:27:15,223 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-12 01:27:15,223 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-12 01:27:15,356 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-12 01:27:15,357 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-12 01:27:15,476 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-12 01:27:15,476 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-12 01:27:15,609 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-12 01:27:15,609 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-12 01:27:15,609 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-12 01:27:15,609 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-12 01:27:15,610 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-12 01:27:15,610 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-12 01:27:15,665 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-12 01:27:15,665 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-12 01:27:23,830 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-12 01:27:23,831 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-12 01:27:23,831 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-12 01:27:23,831 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-12 01:27:23,831 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-12 01:27:23,886 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-12 01:27:23,886 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-12 01:27:32,070 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-12 01:27:32,070 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-12 01:27:32,070 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-12 01:27:32,071 - RSTPTest - INFO - ============================================================
2025-09-12 01:27:32,071 - RSTPTest - INFO - 开始测试: test_port_role_assignment_simplified
2025-09-12 01:27:32,071 - RSTPTest - INFO - ============================================================
2025-09-12 01:27:32,072 - test_protocol_conformance - INFO - 开始端口角色分配测试
2025-09-12 01:27:32,072 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-12 01:27:32,072 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-12 01:27:32,073 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-12 01:27:32,073 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-12 01:27:32,073 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-12 01:27:32,073 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-12 01:27:32,074 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-12 01:27:32,074 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-12 01:27:32,074 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-12 01:27:32,566 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-12 01:27:32,567 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-12 01:27:32,567 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-12 01:27:32,721 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-12 01:27:33,781 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-12 01:27:33,782 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-12 01:27:33,782 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-12 01:27:33,782 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-12 01:27:33,782 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-12 01:27:34,267 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-12 01:27:34,723 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-12 01:27:34,724 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-12 01:27:34,898 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-12 01:27:34,899 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-12 01:27:34,899 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-12 01:27:34,899 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-12 01:27:34,899 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-12 01:27:34,899 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-12 01:27:34,899 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-12 01:27:34,900 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-12 01:27:50,506 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-12 01:27:55,006 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:27:55,138 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:27:55,139 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-12 01:27:55,139 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-12 01:27:55,139 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:27:55,139 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-12 01:27:56,338 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-12 01:27:57,528 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-12 01:27:57,528 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-12 01:27:57,623 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-12 01:27:57,888 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-12 01:27:57,888 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-12 01:27:57,888 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-12 01:27:57,889 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-12 01:27:57,889 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-12 01:27:57,889 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-12 01:27:57,889 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-12 01:27:57,890 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-12 01:28:13,533 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-12 01:28:18,045 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:28:18,178 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:28:18,178 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-12 01:28:18,178 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-12 01:28:18,179 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:28:18,179 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-12 01:28:19,365 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-12 01:28:20,543 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-12 01:28:20,544 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-12 01:28:20,640 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-12 01:28:20,900 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-12 01:28:20,900 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-12 01:28:20,900 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-12 01:28:20,901 - test_protocol_conformance - INFO - 验证拓扑完整性...
2025-09-12 01:28:20,901 - NetworkTopology - INFO - 开始验证拓扑完整性...
2025-09-12 01:28:22,057 - NetworkTopology - INFO - 拓扑完整性验证通过
2025-09-12 01:28:22,057 - test_protocol_conformance - INFO - 设置网桥优先级...
2025-09-12 01:28:22,057 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-12 01:28:22,057 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级12288 -> mstpd优先级3)
2025-09-12 01:28:22,183 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-12 01:28:22,184 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 32768 (方法: ovs)
2025-09-12 01:28:22,184 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-12 01:28:22,307 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-12 01:28:22,458 - test_protocol_conformance - INFO - 等待网络收敛...
2025-09-12 01:28:22,458 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-12 01:28:22,903 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:28:23,059 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Alternate  Discarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-12 01:28:23,060 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-12 01:28:23,060 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:28:23,061 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-12 01:28:23,061 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:28:23,541 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:28:23,541 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:28:23,542 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:28:23,543 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:28:23,543 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:28:23,543 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:28:23,842 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.384秒
2025-09-12 01:28:24,311 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:28:24,467 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Alternate  Discarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-12 01:28:24,468 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-12 01:28:24,468 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:28:24,469 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-12 01:28:24,469 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:28:24,933 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:28:24,934 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:28:24,935 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:28:24,935 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:28:24,935 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:28:24,935 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:28:25,703 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:28:25,868 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Alternate  Discarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-12 01:28:25,869 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-12 01:28:25,869 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:28:25,870 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-12 01:28:25,870 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:28:26,345 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:28:26,346 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:28:26,348 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:28:26,348 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:28:26,348 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:28:26,348 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:28:26,638 - RSTPAnalyzer_DUT - INFO - Root ID为unknown，判定为非根桥
2025-09-12 01:28:26,638 - test_protocol_conformance - INFO - DUT是根桥: False
2025-09-12 01:28:26,638 - test_protocol_conformance - INFO - 活动端口角色: {<PortRole.ROOT: 'root'>: ['br3'], <PortRole.ALTERNATE: 'alternate'>: ['br4']}
2025-09-12 01:28:26,639 - test_protocol_conformance - INFO - 禁用端口: ['SE_ETH2']
2025-09-12 01:28:26,639 - test_protocol_conformance - INFO - 端口角色分配测试通过
2025-09-12 01:28:26,640 - RSTPTest - INFO - 测试完成: test_port_role_assignment_simplified (耗时: 54.57秒)
2025-09-12 01:28:26,640 - RSTPTest - INFO - ============================================================

2025-09-12 01:28:26,641 - RSTPTest - INFO - ============================================================
2025-09-12 01:28:26,642 - RSTPTest - INFO - 开始测试: test_root_bridge_election
2025-09-12 01:28:26,642 - RSTPTest - INFO - ============================================================
2025-09-12 01:28:26,642 - test_protocol_conformance - INFO - 开始根网桥选举测试
2025-09-12 01:28:26,643 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-12 01:28:26,643 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-12 01:28:26,643 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-12 01:28:26,643 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-12 01:28:26,643 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-12 01:28:26,644 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-12 01:28:26,644 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-12 01:28:26,644 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-12 01:28:26,644 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-12 01:28:27,165 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-12 01:28:27,166 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-12 01:28:27,166 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-12 01:28:27,321 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-12 01:28:28,409 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-12 01:28:28,409 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-12 01:28:28,409 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-12 01:28:28,410 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-12 01:28:28,410 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-12 01:28:28,898 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-12 01:28:29,394 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-12 01:28:29,394 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-12 01:28:29,597 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-12 01:28:29,598 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-12 01:28:29,598 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-12 01:28:29,598 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-12 01:28:29,598 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-12 01:28:29,598 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-12 01:28:29,598 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-12 01:28:29,599 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-12 01:28:30,105 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-12 01:28:34,613 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:28:34,741 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:28:34,741 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-12 01:28:34,741 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-12 01:28:34,742 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:28:34,742 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-12 01:28:35,949 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-12 01:28:37,145 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-12 01:28:37,145 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-12 01:28:37,241 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-12 01:28:37,505 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-12 01:28:37,506 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-12 01:28:37,506 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-12 01:28:37,506 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-12 01:28:37,506 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-12 01:28:37,506 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-12 01:28:37,507 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-12 01:28:37,507 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-12 01:28:38,006 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-12 01:28:42,488 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:28:42,618 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:28:42,619 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-12 01:28:42,619 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-12 01:28:42,619 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:28:42,620 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-12 01:28:43,801 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-12 01:28:44,991 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-12 01:28:44,991 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-12 01:28:45,084 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-12 01:28:45,351 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-12 01:28:45,352 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-12 01:28:45,352 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-12 01:28:48,353 - test_protocol_conformance - INFO - === 检查DUT网桥配置 ===
2025-09-12 01:28:48,353 - test_protocol_conformance - INFO - DUT使用OVS网桥: SE_ETH2
2025-09-12 01:28:48,419 - test_protocol_conformance - INFO - OVS网桥 SE_ETH2 存在
2025-09-12 01:28:48,521 - test_protocol_conformance - INFO - SE_ETH2 RSTP状态: true
2025-09-12 01:28:48,521 - test_protocol_conformance - INFO - === 初始网桥状态 ===
2025-09-12 01:28:48,995 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:28:49,147 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:28:49,148 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-12 01:28:49,148 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:28:49,148 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-12 01:28:49,148 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:28:49,629 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:28:49,629 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:28:49,630 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:28:49,631 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:28:49,631 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:28:49,631 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:28:49,925 - test_protocol_conformance - INFO - 活动端口数: 2
2025-09-12 01:28:49,926 - test_protocol_conformance - INFO - 初始端口状态:
2025-09-12 01:28:49,926 - test_protocol_conformance - INFO -   br3: 角色=root, 状态=forwarding
2025-09-12 01:28:49,926 - test_protocol_conformance - INFO -   br4: 角色=alternate, 状态=discarding
2025-09-12 01:28:49,926 - test_protocol_conformance - INFO - 初始状态 - DUT有Root Port: True
2025-09-12 01:28:49,927 - test_protocol_conformance - INFO - === 配置网桥优先级 ===
2025-09-12 01:28:49,927 - test_protocol_conformance - INFO - 设置TestNode1优先级为16384
2025-09-12 01:28:49,927 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 16384 (方法: mstpd)
2025-09-12 01:28:49,927 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级16384 -> mstpd优先级4)
2025-09-12 01:28:50,060 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-12 01:28:50,060 - test_protocol_conformance - INFO - 设置DUT优先级为32768
2025-09-12 01:28:50,131 - test_protocol_conformance - INFO - OVS设置优先级结果: ('', '', 0)
2025-09-12 01:28:50,234 - test_protocol_conformance - INFO - 验证优先级设置: ('"32768"\n', '', 0)
2025-09-12 01:28:50,234 - test_protocol_conformance - INFO - 设置TestNode2优先级为24576
2025-09-12 01:28:50,234 - NetworkTopology_TestNode2 - INFO - TestNode2: 设置网桥优先级 br0 = 24576 (方法: mstpd)
2025-09-12 01:28:50,234 - NetworkTopology_TestNode2 - INFO - TestNode2: 执行mstpd设置优先级命令 (标准优先级24576 -> mstpd优先级6)
2025-09-12 01:28:50,359 - NetworkTopology_TestNode2 - INFO - TestNode2: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-12 01:28:50,359 - test_protocol_conformance - INFO - 等待RSTP收敛...
2025-09-12 01:29:00,360 - test_protocol_conformance - INFO - === 第一阶段验证 ===
2025-09-12 01:29:00,798 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:29:00,951 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    16384
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:29:00,952 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 16384
2025-09-12 01:29:00,952 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:29:00,953 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 4000/6e:b3:08:fa:01:34
2025-09-12 01:29:00,953 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:29:01,420 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:29:01,421 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:29:01,422 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:29:01,422 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:29:01,422 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:29:01,423 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:29:01,838 - test_protocol_conformance - INFO - DUT当前优先级: 32768
2025-09-12 01:29:01,838 - test_protocol_conformance - INFO - 优先级验证通过
2025-09-12 01:29:01,838 - test_protocol_conformance - INFO -   br3: 角色=root
2025-09-12 01:29:01,839 - test_protocol_conformance - INFO -   br4: 角色=alternate
2025-09-12 01:29:01,839 - test_protocol_conformance - INFO - ✓ 第一阶段通过：DUT有Root Port，不是根桥
2025-09-12 01:29:01,839 - test_protocol_conformance - INFO - 
=== 第二阶段：DUT应成为根桥 ===
2025-09-12 01:29:01,839 - test_protocol_conformance - INFO - 设置DUT优先级为12288（最低）
2025-09-12 01:29:01,954 - test_protocol_conformance - INFO - OVS设置最低优先级结果: ('', '', 0)
2025-09-12 01:29:02,062 - test_protocol_conformance - INFO - 设置后优先级: 12288
2025-09-12 01:29:02,062 - test_protocol_conformance - INFO - 最低优先级设置验证通过
2025-09-12 01:29:02,063 - test_protocol_conformance - INFO - 等待RSTP重新收敛...
2025-09-12 01:29:12,063 - test_protocol_conformance - INFO - === 最终验证 ===
2025-09-12 01:29:12,495 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:29:12,654 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    16384
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:29:12,656 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 16384
2025-09-12 01:29:12,656 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:29:12,656 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 4000/6e:b3:08:fa:01:34
2025-09-12 01:29:12,656 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:29:13,140 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:29:13,140 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:29:13,141 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:29:13,141 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:29:13,141 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:29:13,142 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:29:13,433 - test_protocol_conformance - INFO -   br3: 角色=root, 状态=forwarding
2025-09-12 01:29:13,433 - test_protocol_conformance - INFO -   br4: 角色=alternate, 状态=discarding
2025-09-12 01:29:13,433 - test_protocol_conformance - ERROR - DUT RSTP实现问题诊断:
2025-09-12 01:29:13,433 - test_protocol_conformance - ERROR - 1. DUT优先级已设置为12288（最低）
2025-09-12 01:29:13,434 - test_protocol_conformance - ERROR - 2. 但DUT仍有Root Port: True
2025-09-12 01:29:13,434 - test_protocol_conformance - ERROR - 3. Designated端口数: 0
2025-09-12 01:29:13,434 - test_protocol_conformance - ERROR - 可能的原因:
2025-09-12 01:29:13,434 - test_protocol_conformance - ERROR - - DUT的RSTP实现不符合标准
2025-09-12 01:29:13,435 - test_protocol_conformance - ERROR - - DUT没有正确处理优先级变化
2025-09-12 01:29:13,435 - test_protocol_conformance - ERROR - - DUT的BPDU发送/接收有问题
2025-09-12 01:29:13,479 - RSTPTest - INFO - 测试完成: test_root_bridge_election (耗时: 46.84秒)
2025-09-12 01:29:13,480 - RSTPTest - INFO - ============================================================

2025-09-12 01:29:13,483 - RSTPTest - INFO - ============================================================
2025-09-12 01:29:13,483 - RSTPTest - INFO - 开始测试: test_port_role_assignment
2025-09-12 01:29:13,483 - RSTPTest - INFO - ============================================================
2025-09-12 01:29:13,484 - test_protocol_conformance - INFO - 开始端口角色分配测试
2025-09-12 01:29:13,484 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-12 01:29:13,484 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-12 01:29:13,484 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-12 01:29:13,485 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-12 01:29:13,485 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-12 01:29:13,485 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-12 01:29:13,485 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-12 01:29:13,485 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-12 01:29:13,485 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-12 01:29:13,993 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-12 01:29:13,993 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-12 01:29:13,993 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-12 01:29:14,152 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-12 01:29:15,248 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-12 01:29:15,248 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-12 01:29:15,249 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-12 01:29:15,249 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-12 01:29:15,249 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-12 01:29:15,741 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-12 01:29:16,225 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-12 01:29:16,225 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-12 01:29:16,416 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-12 01:29:16,417 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-12 01:29:16,417 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-12 01:29:16,417 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-12 01:29:16,417 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-12 01:29:16,417 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-12 01:29:16,418 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-12 01:29:16,418 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-12 01:29:16,915 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-12 01:29:21,436 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:29:21,568 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:29:21,569 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-12 01:29:21,569 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-12 01:29:21,569 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:29:21,569 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-12 01:29:22,764 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-12 01:29:23,943 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-12 01:29:23,943 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-12 01:29:24,039 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-12 01:29:24,310 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-12 01:29:24,311 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-12 01:29:24,311 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-12 01:29:24,311 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-12 01:29:24,311 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-12 01:29:24,312 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-12 01:29:24,312 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-12 01:29:24,312 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-12 01:29:24,809 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-12 01:29:29,275 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:29:29,402 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:29:29,402 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-12 01:29:29,403 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-12 01:29:29,403 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:29:29,403 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-12 01:29:30,598 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-12 01:29:31,800 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-12 01:29:31,800 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-12 01:29:31,896 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-12 01:29:32,157 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-12 01:29:32,157 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-12 01:29:32,157 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-12 01:29:32,158 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-12 01:29:32,158 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级12288 -> mstpd优先级3)
2025-09-12 01:29:32,288 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-12 01:29:32,289 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 32768 (方法: ovs)
2025-09-12 01:29:32,289 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-12 01:29:32,414 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-12 01:29:35,568 - test_protocol_conformance - INFO - 检查DUT的OVS网桥接口...
2025-09-12 01:29:35,629 - test_protocol_conformance - INFO - OVS配置状态:
('8c812ea9-3b0c-46a1-bd3c-ef3904d38c1a\n    Bridge SE_ETH2\n        Port br4\n            Interface br4\n        Port SE_ETH2\n            Interface SE_ETH2\n                type: internal\n        Port br3\n            Interface br3\n    Bridge SE_ETH4\n        Port SE_ETH4\n            Interface SE_ETH4\n                type: internal\n    Bridge SE_ETH6\n        Port SE_ETH6\n            Interface SE_ETH6\n                type: internal\n    Bridge rstp0\n        Port rstp0\n            Interface rstp0\n                type: internal\n    Bridge br0\n        Port eth0\n            Interface eth0\n                error: "could not open network device eth0 (No such device)"\n        Port br0\n            Interface br0\n                type: internal\n                error: "could not add network device br0 to ofproto (File exists)"\n        Port eth2\n            Interface eth2\n                error: "could not open network device eth2 (No such device)"\n    ovs_version: "3.1.0"\n', '', 0)
2025-09-12 01:29:35,741 - test_protocol_conformance - INFO - SE_ETH2 网桥端口:
('br3\nbr4\n', '', 0)
2025-09-12 01:29:35,848 - test_protocol_conformance - INFO - SE_ETH2 STP状态:
('true\n', '', 0)
2025-09-12 01:29:35,959 - test_protocol_conformance - INFO - SE_ETH2 端口信息:
('OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7\nn_tables:254, n_buffers:0\ncapabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP\nactions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst\n 1(br3): addr:90:12:10:b5:7d:f7\n     config:     0\n     state:      0\n     current:    1GB-FD AUTO_NEG\n     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM\n     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM\n     speed: 1000 Mbps now, 1000 Mbps max\n 2(br4): addr:90:12:10:b5:7d:f7\n     config:     0\n     state:      STP_FORWARD\n     current:    1GB-FD AUTO_NEG\n     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM\n     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM\n     speed: 1000 Mbps now, 1000 Mbps max\n LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7\n     config:     0\n     state:      0\n     speed: 0 Mbps now, 0 Mbps max\nOFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0\n', '', 0)
2025-09-12 01:29:35,960 - test_protocol_conformance - INFO - 获取初始网桥状态...
2025-09-12 01:29:36,446 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:29:36,603 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:29:36,604 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-12 01:29:36,604 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:29:36,605 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-12 01:29:36,605 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:29:37,080 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:29:37,080 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:29:37,081 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:29:37,081 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:29:37,081 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:29:37,082 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:29:37,368 - test_protocol_conformance - INFO - Bridge ID: 3000/6e:b3:08:fa:01:34
2025-09-12 01:29:37,369 - test_protocol_conformance - INFO - Root ID: unknown
2025-09-12 01:29:37,369 - test_protocol_conformance - INFO - Root Port: br3
2025-09-12 01:29:37,369 - test_protocol_conformance - INFO - 协议版本: rstp
2025-09-12 01:29:37,369 - test_protocol_conformance - INFO - 端口 br3: 角色=root, 状态=forwarding, 成本=0
2025-09-12 01:29:37,370 - test_protocol_conformance - INFO - 端口 br4: 角色=alternate, 状态=discarding, 成本=0
2025-09-12 01:29:37,370 - test_protocol_conformance - INFO - 端口 SE_ETH2: 角色=unknown, 状态=disabled, 成本=0
2025-09-12 01:29:37,370 - test_protocol_conformance - INFO - 等待网络收敛...
2025-09-12 01:29:37,370 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-12 01:29:37,842 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:29:37,998 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:29:38,000 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-12 01:29:38,000 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:29:38,000 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-12 01:29:38,000 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:29:38,472 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:29:38,472 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:29:38,473 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:29:38,473 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:29:38,473 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:29:38,474 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:29:38,765 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.395秒
2025-09-12 01:29:39,226 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:29:39,378 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:29:39,379 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-12 01:29:39,380 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:29:39,380 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-12 01:29:39,380 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:29:39,861 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:29:39,861 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:29:39,862 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:29:39,862 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:29:39,862 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:29:39,863 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:29:40,148 - test_protocol_conformance - INFO - 收敛后的端口状态:
2025-09-12 01:29:40,149 - test_protocol_conformance - INFO - 端口 br3: 角色=root, 状态=forwarding, 成本=0
2025-09-12 01:29:40,149 - test_protocol_conformance - INFO - 端口 br4: 角色=alternate, 状态=discarding, 成本=0
2025-09-12 01:29:40,149 - test_protocol_conformance - INFO - 端口 SE_ETH2: 角色=unknown, 状态=disabled, 成本=0
2025-09-12 01:29:40,615 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:29:40,770 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:29:40,771 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-12 01:29:40,771 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:29:40,771 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-12 01:29:40,772 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:29:41,236 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:29:41,236 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:29:41,237 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:29:41,238 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:29:41,238 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:29:41,238 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:29:41,537 - RSTPAnalyzer_DUT - INFO - Root ID为unknown，判定为非根桥
2025-09-12 01:29:41,537 - test_protocol_conformance - INFO - is_root_bridge() 返回: False
2025-09-12 01:29:41,538 - test_protocol_conformance - INFO - 有Root Port: True
2025-09-12 01:29:41,538 - test_protocol_conformance - INFO - 最终判定 - DUT是根桥: False
2025-09-12 01:29:41,538 - test_protocol_conformance - INFO - 活动端口数: 2
2025-09-12 01:29:41,538 - test_protocol_conformance - INFO - 禁用端口: ['SE_ETH2']
2025-09-12 01:29:41,539 - test_protocol_conformance - INFO - 端口角色分布: {<PortRole.ROOT: 'root'>: ['br3'], <PortRole.ALTERNATE: 'alternate'>: ['br4']}
2025-09-12 01:29:41,539 - test_protocol_conformance - INFO - 两端口验证：检查Root Port和Designated Port
2025-09-12 01:29:41,583 - RSTPTest - INFO - 测试完成: test_port_role_assignment (耗时: 28.10秒)
2025-09-12 01:29:41,583 - RSTPTest - INFO - ============================================================

2025-09-12 01:29:41,586 - RSTPTest - INFO - ============================================================
2025-09-12 01:29:41,586 - RSTPTest - INFO - 开始测试: test_rstp_protocol_verification
2025-09-12 01:29:41,586 - RSTPTest - INFO - ============================================================
2025-09-12 01:29:41,587 - test_protocol_conformance - INFO - 开始RSTP协议验证
2025-09-12 01:29:41,587 - test_protocol_conformance - INFO - === 检查OVS配置 ===
2025-09-12 01:29:41,648 - test_protocol_conformance - INFO - 当前OVS配置:
8c812ea9-3b0c-46a1-bd3c-ef3904d38c1a
    Bridge SE_ETH2
        Port br4
            Interface br4
        Port SE_ETH2
            Interface SE_ETH2
                type: internal
        Port br3
            Interface br3
    Bridge SE_ETH4
        Port SE_ETH4
            Interface SE_ETH4
                type: internal
    Bridge SE_ETH6
        Port SE_ETH6
            Interface SE_ETH6
                type: internal
    Bridge rstp0
        Port rstp0
            Interface rstp0
          
2025-09-12 01:29:41,752 - test_protocol_conformance - INFO - 使用现有网桥 SE_ETH2，端口: ['br3', 'br4']
2025-09-12 01:29:41,752 - test_protocol_conformance - INFO - === 配置RSTP（确保是RSTP而不是STP）===
2025-09-12 01:29:42,972 - test_protocol_conformance - INFO - 启用RSTP...
2025-09-12 01:29:43,040 - test_protocol_conformance - INFO - ✓ RSTP已启用
2025-09-12 01:29:43,041 - test_protocol_conformance - INFO - 设置RSTP参数...
2025-09-12 01:29:43,148 - test_protocol_conformance - INFO - ✓ 设置: rstp-hello-time=2
2025-09-12 01:29:43,264 - test_protocol_conformance - INFO - ✓ 设置: rstp-forward-delay=4
2025-09-12 01:29:43,373 - test_protocol_conformance - INFO - ✓ 设置: rstp-max-age=6
2025-09-12 01:29:43,472 - test_protocol_conformance - INFO - ✓ 设置: rstp-priority=32768
2025-09-12 01:29:43,581 - test_protocol_conformance - INFO - ✓ 设置: rstp-force-protocol-version=2
2025-09-12 01:29:43,905 - test_protocol_conformance - INFO - ✓ 端口 br3 RSTP已启用
2025-09-12 01:29:44,220 - test_protocol_conformance - INFO - ✓ 端口 br4 RSTP已启用
2025-09-12 01:29:44,316 - test_protocol_conformance - INFO - 等待RSTP初始化...
2025-09-12 01:29:49,317 - test_protocol_conformance - INFO - === 验证RSTP配置 ===
2025-09-12 01:29:49,370 - test_protocol_conformance - INFO - RSTP状态:
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     6s
  stp-fwd-delay   4s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:29:49,372 - test_protocol_conformance - INFO - ✓ 使用RSTP时间参数
2025-09-12 01:29:49,372 - test_protocol_conformance - INFO - === 创建测试拓扑 ===
2025-09-12 01:29:49,372 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-12 01:29:49,372 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-12 01:29:49,373 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-12 01:29:49,373 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-12 01:29:49,373 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-12 01:29:49,373 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-12 01:29:49,373 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-12 01:29:49,374 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-12 01:29:49,374 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-12 01:29:49,896 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-12 01:29:49,896 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-12 01:29:49,896 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-12 01:29:50,040 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-12 01:29:51,107 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-12 01:29:51,107 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-12 01:29:51,108 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-12 01:29:51,108 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-12 01:29:51,108 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-12 01:29:51,588 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-12 01:29:52,080 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-12 01:29:52,080 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-12 01:29:52,272 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-12 01:29:52,272 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-12 01:29:52,272 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-12 01:29:52,273 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-12 01:29:52,273 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-12 01:29:52,273 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-12 01:29:52,273 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-12 01:29:52,273 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-12 01:29:52,773 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-12 01:29:57,285 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:29:57,406 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:29:57,407 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-12 01:29:57,407 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-12 01:29:57,407 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:29:57,408 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-12 01:29:58,591 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-12 01:29:59,771 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-12 01:29:59,772 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-12 01:29:59,869 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-12 01:30:00,134 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-12 01:30:00,134 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-12 01:30:00,134 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-12 01:30:00,135 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-12 01:30:00,135 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-12 01:30:00,135 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-12 01:30:00,135 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-12 01:30:00,135 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-12 01:30:00,625 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-12 01:30:05,132 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:30:05,260 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:30:05,261 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-12 01:30:05,261 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-12 01:30:05,261 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:30:05,261 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-12 01:30:06,428 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-12 01:30:07,610 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-12 01:30:07,610 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-12 01:30:07,707 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-12 01:30:07,970 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-12 01:30:07,970 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-12 01:30:07,971 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-12 01:30:12,972 - test_protocol_conformance - INFO - === 捕获BPDU ===
2025-09-12 01:30:12,972 - test_protocol_conformance - INFO - 在 SE_ETH2 上捕获BPDU...
2025-09-12 01:30:12,973 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: SE_ETH2, 数量: 10)
2025-09-12 01:30:23,064 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-12 01:30:23,065 - test_protocol_conformance - INFO - 在 br3 上捕获BPDU...
2025-09-12 01:30:23,065 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br3, 数量: 10)
2025-09-12 01:30:33,216 - RSTPAnalyzer_DUT - INFO - 捕获到 4 个BPDU包
2025-09-12 01:30:33,217 - test_protocol_conformance - INFO - ✓ 捕获到 4 个BPDU
2025-09-12 01:30:33,217 - test_protocol_conformance - INFO - === 分析BPDU ===
2025-09-12 01:30:33,217 - test_protocol_conformance - INFO - 第一个BPDU信息: {'timestamp': '01:30:28.881269', 'raw': '01:30:28.881269 00:e0:0c:25:0c:5c > 01:80:c2:00:00:00, 802.3, length 39: LLC, dsap STP (0x42) Individual, ssap STP (0x42) Command, ctrl 0x03: STP 802.1w, Rapid STP, Flags [Proposal, Learn, Forward, Agreement], bridge-id 8000.6e:b3:08:fa:01:34.8002, length 36', 'is_rstp': False}
2025-09-12 01:30:33,218 - test_protocol_conformance - INFO - BPDU统计: RSTP=0, STP=4
2025-09-12 01:30:33,218 - test_protocol_conformance - WARNING - 检测到更多STP BPDU
2025-09-12 01:30:33,315 - test_protocol_conformance - INFO - rstp_enable状态: true
2025-09-12 01:30:33,423 - test_protocol_conformance - INFO - stp_enable状态: true
2025-09-12 01:30:33,531 - test_protocol_conformance - WARNING - OVS配置为RSTP但发送STP BPDU，可能是实现限制
2025-09-12 01:30:33,532 - test_protocol_conformance - INFO - 基于配置判断为RSTP
2025-09-12 01:30:33,532 - test_protocol_conformance - INFO - ✓ RSTP协议验证通过（检测到 4 个RSTP BPDU）
2025-09-12 01:30:33,533 - RSTPTest - INFO - 测试完成: test_rstp_protocol_verification (耗时: 51.95秒)
2025-09-12 01:30:33,533 - RSTPTest - INFO - ============================================================

2025-09-12 01:30:33,535 - RSTPTest - INFO - ============================================================
2025-09-12 01:30:33,535 - RSTPTest - INFO - 开始测试: test_alternate_port_verification
2025-09-12 01:30:33,535 - RSTPTest - INFO - ============================================================
2025-09-12 01:30:33,536 - test_protocol_conformance - INFO - 开始Alternate Port验证测试
2025-09-12 01:30:33,536 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-12 01:30:33,536 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-12 01:30:33,536 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-12 01:30:33,536 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-12 01:30:33,537 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-12 01:30:33,537 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-12 01:30:33,537 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-12 01:30:33,537 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-12 01:30:33,537 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-12 01:30:34,072 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-12 01:30:34,073 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-12 01:30:34,073 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-12 01:30:34,230 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-12 01:30:35,318 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-12 01:30:35,319 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-12 01:30:35,319 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-12 01:30:35,319 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-12 01:30:35,320 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-12 01:30:35,795 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-12 01:30:36,271 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-12 01:30:36,271 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-12 01:30:36,463 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-12 01:30:36,463 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-12 01:30:36,463 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-12 01:30:36,464 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-12 01:30:36,464 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-12 01:30:36,464 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-12 01:30:36,464 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-12 01:30:36,464 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-12 01:30:36,960 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-12 01:30:41,492 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:30:41,618 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:30:41,619 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-12 01:30:41,619 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-12 01:30:41,619 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:30:41,620 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-12 01:30:42,784 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-12 01:30:43,974 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-12 01:30:43,975 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-12 01:30:44,070 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-12 01:30:44,339 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-12 01:30:44,339 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-12 01:30:44,339 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-12 01:30:44,340 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-12 01:30:44,340 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-12 01:30:44,340 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-12 01:30:44,340 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-12 01:30:44,340 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-12 01:30:44,846 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-12 01:30:49,329 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:30:49,458 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:30:49,458 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-12 01:30:49,458 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-12 01:30:49,459 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:30:49,459 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-12 01:30:50,649 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-12 01:30:51,844 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-12 01:30:51,845 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-12 01:30:51,939 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-12 01:30:52,200 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-12 01:30:52,200 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-12 01:30:52,200 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-12 01:30:52,201 - test_protocol_conformance - INFO - 设置网桥优先级
2025-09-12 01:30:52,201 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 4096 (方法: mstpd)
2025-09-12 01:30:52,201 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级4096 -> mstpd优先级1)
2025-09-12 01:30:52,324 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-12 01:30:52,324 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 8192 (方法: ovs)
2025-09-12 01:30:52,324 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-12 01:30:52,434 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-12 01:30:52,604 - NetworkTopology_TestNode2 - INFO - TestNode2: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-12 01:30:52,605 - NetworkTopology_TestNode2 - INFO - TestNode2: 执行mstpd设置优先级命令 (标准优先级12288 -> mstpd优先级3)
2025-09-12 01:30:52,729 - NetworkTopology_TestNode2 - INFO - TestNode2: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-12 01:30:52,729 - test_protocol_conformance - INFO - 等待RSTP收敛...
2025-09-12 01:30:52,730 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-12 01:30:53,144 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:30:53,301 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:30:53,302 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-12 01:30:53,302 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:30:53,302 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-12 01:30:53,303 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:30:53,779 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:30:53,779 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:30:53,780 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:30:53,780 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:30:53,780 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:30:53,781 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:30:54,075 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.346秒
2025-09-12 01:30:54,540 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:30:54,703 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-12 01:30:54,705 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-12 01:30:54,705 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:30:54,705 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-12 01:30:54,705 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:30:55,179 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:30:55,179 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:30:55,180 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:30:55,181 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:30:55,181 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:30:55,181 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:30:55,479 - test_protocol_conformance - INFO - DUT桥信息: BridgeInfo(bridge_id='1000/6e:b3:08:fa:01:34', root_id='unknown', root_port='br3', root_path_cost=0, protocol_version='rstp', hello_time=2, forward_delay=15, max_age=20, topology_changes=0, ports={'br3': PortInfo(name='br3', role=<PortRole.ROOT: 'root'>, state=<PortState.FORWARDING: 'forwarding'>, path_cost=0, designated_bridge='', designated_port=''), 'br4': PortInfo(name='br4', role=<PortRole.ALTERNATE: 'alternate'>, state=<PortState.DISCARDING: 'discarding'>, path_cost=0, designated_bridge='', designated_port=''), 'SE_ETH2': PortInfo(name='SE_ETH2', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')})
2025-09-12 01:30:55,944 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:30:56,101 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-12 01:30:56,103 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-12 01:30:56,103 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:30:56,103 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-12 01:30:56,103 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:30:56,578 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:30:56,579 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:30:56,581 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:30:56,581 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:30:56,581 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:30:56,581 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:30:56,872 - RSTPAnalyzer_DUT - INFO - Root ID为unknown，判定为非根桥
2025-09-12 01:30:56,872 - test_protocol_conformance - INFO - DUT根桥判断结果: False
2025-09-12 01:30:56,872 - test_protocol_conformance - INFO - DUT桥信息 - bridge_id: '1000/6e:b3:08:fa:01:34', root_id: 'unknown'
2025-09-12 01:30:56,872 - test_protocol_conformance - INFO - 活动端口数量: 2
2025-09-12 01:30:56,872 - test_protocol_conformance - INFO - 端口角色分布: {<PortRole.ROOT: 'root'>: ['br3'], <PortRole.ALTERNATE: 'alternate'>: ['br4']}
2025-09-12 01:30:56,873 - test_protocol_conformance - INFO - ✓ Alternate端口br4状态正确: discarding
2025-09-12 01:30:56,873 - test_protocol_conformance - INFO - ✓ 成功验证Alternate Port: ['br4']
2025-09-12 01:30:56,873 - test_protocol_conformance - INFO - Alternate Port验证测试完成
2025-09-12 01:30:56,874 - RSTPTest - INFO - 测试完成: test_alternate_port_verification (耗时: 23.34秒)
2025-09-12 01:30:56,874 - RSTPTest - INFO - ============================================================

2025-09-12 01:30:56,875 - RSTPTest - INFO - ============================================================
2025-09-12 01:30:56,876 - RSTPTest - INFO - 开始测试: test_port_state_transitions
2025-09-12 01:30:56,876 - RSTPTest - INFO - ============================================================
2025-09-12 01:30:56,877 - test_protocol_conformance - INFO - 开始端口状态转换测试
2025-09-12 01:30:56,877 - NetworkTopology - INFO - 创建RSTP线性拓扑...
2025-09-12 01:30:56,877 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-12 01:30:56,877 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-12 01:30:56,877 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-12 01:30:56,878 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-12 01:30:56,878 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-12 01:30:56,878 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-12 01:30:56,878 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-12 01:30:56,878 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-12 01:30:57,403 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-12 01:30:57,403 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-12 01:30:57,403 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-12 01:30:57,562 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-12 01:30:58,674 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"32768
2025-09-12 01:30:58,675 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-12 01:30:58,675 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-12 01:30:58,675 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br4']
2025-09-12 01:30:58,675 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-12 01:30:59,171 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-12 01:30:59,171 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-12 01:30:59,367 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-12 01:30:59,367 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-12 01:30:59,368 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-12 01:30:59,368 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-12 01:30:59,368 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-12 01:30:59,368 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-12 01:30:59,368 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-12 01:30:59,369 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-12 01:30:59,878 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-12 01:31:04,387 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:31:04,520 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:31:04,520 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-12 01:31:04,520 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-12 01:31:04,521 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:31:04,521 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-12 01:31:05,707 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-12 01:31:06,902 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-12 01:31:06,903 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-12 01:31:06,998 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-12 01:31:07,264 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-12 01:31:07,264 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-12 01:31:07,264 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-12 01:31:07,265 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-12 01:31:07,265 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-12 01:31:07,265 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-12 01:31:07,265 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-12 01:31:07,266 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-12 01:31:07,763 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-12 01:31:12,263 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:31:12,395 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:31:12,395 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-12 01:31:12,396 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-12 01:31:12,396 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0']
2025-09-12 01:31:12,396 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-12 01:31:13,590 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-12 01:31:13,591 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-12 01:31:13,686 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-12 01:31:13,953 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-12 01:31:13,953 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-12 01:31:13,953 - NetworkTopology - INFO - 线性拓扑创建完成
2025-09-12 01:31:13,954 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 4096 (方法: mstpd)
2025-09-12 01:31:13,954 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级4096 -> mstpd优先级1)
2025-09-12 01:31:14,086 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-12 01:31:14,086 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 8192 (方法: ovs)
2025-09-12 01:31:14,086 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-12 01:31:14,207 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-12 01:31:14,354 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-12 01:31:14,354 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-12 01:31:14,809 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:31:14,969 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Discarding 20000    128.2


2025-09-12 01:31:14,971 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-12 01:31:14,971 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:31:14,971 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-12 01:31:14,971 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:31:15,443 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:31:15,443 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:31:15,444 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:31:15,445 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:31:15,445 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:31:15,445 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:31:15,735 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.380秒
2025-09-12 01:31:16,188 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:31:16,348 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Discarding 20000    128.2


2025-09-12 01:31:16,350 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-12 01:31:16,350 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:31:16,350 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-12 01:31:16,350 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:31:16,822 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:31:16,822 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:31:16,823 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:31:16,823 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:31:16,824 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:31:16,824 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:31:17,123 - test_protocol_conformance - INFO - 使用端口br3进行状态转换测试
2025-09-12 01:31:17,123 - test_protocol_conformance - INFO - 禁用端口br3
2025-09-12 01:31:17,123 - FaultInjector_DUT - INFO - 断开链路: br3
2025-09-12 01:31:27,228 - FaultInjector_DUT - INFO - 链路已断开: br3
2025-09-12 01:31:32,663 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:31:32,820 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 20000    128.2


2025-09-12 01:31:32,821 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-12 01:31:32,821 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:31:32,822 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-12 01:31:32,822 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:31:33,411 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:31:33,412 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:31:33,413 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:31:33,413 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:31:33,413 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:31:33,413 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:31:33,747 - test_protocol_conformance - INFO - ✓ 端口br3已成功禁用
2025-09-12 01:31:33,747 - test_protocol_conformance - INFO - 重新启用端口br3并监控状态转换
2025-09-12 01:31:33,748 - FaultInjector_DUT - INFO - 恢复链路: br3
2025-09-12 01:31:33,914 - FaultInjector_DUT - INFO - 链路已恢复: br3
2025-09-12 01:31:34,372 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:31:34,533 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-12 01:31:34,536 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-12 01:31:34,537 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:31:34,537 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-12 01:31:34,537 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:31:35,014 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:31:35,014 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:31:35,016 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:31:35,017 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:31:35,017 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:31:35,017 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:31:35,310 - test_protocol_conformance - INFO - 端口br3状态转换: disabled
2025-09-12 01:31:37,728 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:31:37,884 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-12 01:31:37,886 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-12 01:31:37,886 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:31:37,886 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-12 01:31:37,886 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:31:38,353 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:31:38,354 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:31:38,355 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:31:38,355 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:31:38,355 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:31:38,356 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:31:38,651 - test_protocol_conformance - INFO - 端口br3状态转换: forwarding
2025-09-12 01:31:38,651 - test_protocol_conformance - INFO - 状态转换序列: ['disabled', 'forwarding']
2025-09-12 01:31:39,112 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:31:39,269 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-12 01:31:39,270 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-12 01:31:39,270 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:31:39,270 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-12 01:31:39,270 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:31:39,734 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:31:39,734 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:31:39,735 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:31:39,735 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:31:39,735 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:31:39,735 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:31:40,030 - test_protocol_conformance - INFO - ✓ 端口br3最终状态正确: forwarding
2025-09-12 01:31:40,030 - test_protocol_conformance - INFO - 端口状态转换测试完成
2025-09-12 01:31:40,031 - RSTPTest - INFO - 测试完成: test_port_state_transitions (耗时: 43.16秒)
2025-09-12 01:31:40,031 - RSTPTest - INFO - ============================================================

2025-09-12 01:31:40,033 - RSTPTest - INFO - ============================================================
2025-09-12 01:31:40,033 - RSTPTest - INFO - 开始测试: test_bpdu_propagation_and_keepalive
2025-09-12 01:31:40,033 - RSTPTest - INFO - ============================================================
2025-09-12 01:31:40,034 - test_protocol_conformance - INFO - 开始BPDU传播和保活机制测试
2025-09-12 01:31:40,034 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-12 01:31:40,034 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-12 01:31:40,035 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-12 01:31:40,035 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-12 01:31:40,035 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-12 01:31:40,035 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-12 01:31:40,035 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-12 01:31:40,036 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-12 01:31:40,036 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-12 01:31:40,558 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-12 01:31:40,558 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-12 01:31:40,558 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-12 01:31:40,713 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-12 01:31:41,809 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-12 01:31:41,810 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-12 01:31:41,810 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-12 01:31:41,810 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-12 01:31:41,810 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-12 01:31:42,298 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-12 01:31:42,783 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-12 01:31:42,783 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-12 01:31:42,974 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-12 01:31:42,975 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-12 01:31:42,975 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-12 01:31:42,975 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-12 01:31:42,975 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-12 01:31:42,976 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-12 01:31:42,976 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-12 01:31:42,976 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-12 01:31:43,477 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-12 01:31:47,965 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:31:48,093 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:31:48,094 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-12 01:31:48,094 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-12 01:31:48,094 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:31:48,094 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-12 01:31:49,299 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-12 01:31:50,497 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-12 01:31:50,497 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-12 01:31:50,594 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-12 01:31:50,862 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-12 01:31:50,863 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-12 01:31:50,863 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-12 01:31:50,863 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-12 01:31:50,863 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-12 01:31:50,864 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-12 01:31:50,864 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-12 01:31:50,864 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-12 01:32:21,210 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-12 01:33:55,274 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:34:05,353 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:34:05,354 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-12 01:34:05,354 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-12 01:34:05,354 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:34:05,355 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-12 01:35:11,203 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-12 01:36:07,788 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-12 01:36:07,788 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-12 01:36:07,883 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-12 01:36:13,156 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-12 01:36:13,157 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-12 01:36:13,157 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-12 01:36:13,157 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 4096 (方法: mstpd)
2025-09-12 01:36:13,157 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级4096 -> mstpd优先级1)
2025-09-12 01:36:13,286 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-12 01:36:13,287 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 8192 (方法: ovs)
2025-09-12 01:36:13,287 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-12 01:36:13,405 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-12 01:36:13,566 - NetworkTopology_TestNode2 - INFO - TestNode2: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-12 01:36:13,566 - NetworkTopology_TestNode2 - INFO - TestNode2: 执行mstpd设置优先级命令 (标准优先级12288 -> mstpd优先级3)
2025-09-12 01:36:23,648 - NetworkTopology_TestNode2 - INFO - TestNode2: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-12 01:36:23,648 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-12 01:36:23,649 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-12 01:36:24,067 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:36:24,219 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-12 01:36:24,220 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-12 01:36:24,220 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:36:24,221 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-12 01:36:24,221 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:36:24,693 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:36:24,693 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:36:24,694 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:36:24,694 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:36:24,694 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:36:24,695 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:36:24,986 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.337秒
2025-09-12 01:36:25,455 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:36:25,611 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-12 01:36:25,612 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-12 01:36:25,613 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:36:25,613 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-12 01:36:25,613 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:36:26,097 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:36:26,097 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:36:26,099 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:36:26,099 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:36:26,099 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:36:26,099 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:36:26,394 - test_protocol_conformance - INFO - Hello Time: 2秒
2025-09-12 01:36:26,395 - test_protocol_conformance - INFO - 开始捕获BPDU报文
2025-09-12 01:36:26,395 - test_protocol_conformance - INFO - 在端口br3上开始BPDU捕获
2025-09-12 01:36:26,395 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br3, 数量: 10)
2025-09-12 01:36:36,538 - RSTPAnalyzer_DUT - INFO - 捕获到 4 个BPDU包
2025-09-12 01:36:36,539 - test_protocol_conformance - INFO - 端口br3捕获到4个BPDU
2025-09-12 01:36:36,539 - test_protocol_conformance - INFO - 在端口br4上开始BPDU捕获
2025-09-12 01:36:36,539 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br4, 数量: 10)
2025-09-12 01:36:46,670 - RSTPAnalyzer_DUT - INFO - 捕获到 4 个BPDU包
2025-09-12 01:36:46,671 - test_protocol_conformance - INFO - 端口br4捕获到4个BPDU
2025-09-12 01:36:46,671 - test_protocol_conformance - INFO - 总共捕获到8个BPDU
2025-09-12 01:36:46,671 - test_protocol_conformance - INFO - 端口br3平均BPDU间隔: 2.16秒
2025-09-12 01:36:46,671 - test_protocol_conformance - INFO - ✓ 端口br3BPDU周期性验证通过
2025-09-12 01:36:46,672 - test_protocol_conformance - INFO - 端口br4平均BPDU间隔: 2.00秒
2025-09-12 01:36:46,672 - test_protocol_conformance - INFO - ✓ 端口br4BPDU周期性验证通过
2025-09-12 01:36:46,672 - test_protocol_conformance - INFO - 端口br3BPDU: 时间戳=01:36:32.959179, RSTP=False
2025-09-12 01:36:46,672 - test_protocol_conformance - INFO - 端口br3BPDU: 时间戳=01:36:34.962519, RSTP=False
2025-09-12 01:36:46,672 - test_protocol_conformance - INFO - 端口br3BPDU: 时间戳=01:36:36.962276, RSTP=False
2025-09-12 01:36:46,673 - test_protocol_conformance - INFO - 端口br4BPDU: 时间戳=01:36:42.927893, RSTP=False
2025-09-12 01:36:46,673 - test_protocol_conformance - INFO - 端口br4BPDU: 时间戳=01:36:44.927188, RSTP=False
2025-09-12 01:36:46,673 - test_protocol_conformance - INFO - 端口br4BPDU: 时间戳=01:36:46.928172, RSTP=False
2025-09-12 01:36:46,673 - test_protocol_conformance - INFO - ✓ BPDU传播和保活机制验证完成
2025-09-12 01:36:46,674 - RSTPTest - INFO - 测试完成: test_bpdu_propagation_and_keepalive (耗时: 306.64秒)
2025-09-12 01:36:46,674 - RSTPTest - INFO - ============================================================

2025-09-12 01:36:46,675 - RSTPTest - INFO - ============================================================
2025-09-12 01:36:46,676 - RSTPTest - INFO - 开始测试: test_disabled_port_exclusion
2025-09-12 01:36:46,676 - RSTPTest - INFO - ============================================================
2025-09-12 01:36:46,677 - test_protocol_conformance - INFO - 开始禁用端口排除测试
2025-09-12 01:36:46,677 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-12 01:36:46,677 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-12 01:36:46,677 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-12 01:36:46,677 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-12 01:36:46,677 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-12 01:36:46,677 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-12 01:36:46,678 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-12 01:36:46,678 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-12 01:36:46,678 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-12 01:36:47,193 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-12 01:36:47,193 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-12 01:36:47,194 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-12 01:36:47,353 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-12 01:36:48,464 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-12 01:36:48,465 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-12 01:36:48,465 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-12 01:36:48,465 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-12 01:36:48,465 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-12 01:36:48,944 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-12 01:36:49,429 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-12 01:36:49,429 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-12 01:36:49,629 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-12 01:36:49,629 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-12 01:36:49,630 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-12 01:36:49,630 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-12 01:36:49,630 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-12 01:36:49,630 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-12 01:36:49,630 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-12 01:36:49,631 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-12 01:36:50,132 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-12 01:36:54,640 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:36:54,768 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:36:54,768 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-12 01:36:54,768 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-12 01:36:54,769 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:36:54,769 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-12 01:36:55,958 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-12 01:36:57,159 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-12 01:36:57,160 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-12 01:36:57,255 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-12 01:36:57,519 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-12 01:36:57,520 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-12 01:36:57,520 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-12 01:36:57,520 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-12 01:36:57,520 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-12 01:36:57,520 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-12 01:36:57,521 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-12 01:36:57,521 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-12 01:37:13,141 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-12 01:37:17,623 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:37:17,753 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:37:17,754 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-12 01:37:17,754 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-12 01:37:17,754 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:37:17,754 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-12 01:37:18,947 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-12 01:37:20,131 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-12 01:37:20,132 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-12 01:37:20,228 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-12 01:37:20,491 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-12 01:37:20,492 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-12 01:37:20,492 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-12 01:37:20,492 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 4096 (方法: mstpd)
2025-09-12 01:37:20,492 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级4096 -> mstpd优先级1)
2025-09-12 01:37:20,622 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-12 01:37:20,622 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 8192 (方法: ovs)
2025-09-12 01:37:20,622 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-12 01:37:20,734 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-12 01:37:20,900 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-12 01:37:20,900 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-12 01:37:21,354 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:37:21,508 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-12 01:37:21,509 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-12 01:37:21,509 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:37:21,509 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-12 01:37:21,510 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:37:21,976 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:37:21,977 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:37:21,978 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:37:21,978 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:37:21,978 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:37:21,979 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:37:22,269 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.369秒
2025-09-12 01:37:22,734 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:37:22,890 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-12 01:37:22,891 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-12 01:37:22,892 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:37:22,892 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-12 01:37:22,892 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:37:23,360 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:37:23,361 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:37:23,362 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:37:23,362 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:37:23,362 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:37:23,362 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:37:23,649 - test_protocol_conformance - INFO - 所有端口信息: {'br3': PortInfo(name='br3', role=<PortRole.ROOT: 'root'>, state=<PortState.FORWARDING: 'forwarding'>, path_cost=0, designated_bridge='', designated_port=''), 'br4': PortInfo(name='br4', role=<PortRole.ALTERNATE: 'alternate'>, state=<PortState.DISCARDING: 'discarding'>, path_cost=0, designated_bridge='', designated_port=''), 'SE_ETH2': PortInfo(name='SE_ETH2', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')}
2025-09-12 01:37:23,806 - test_protocol_conformance - INFO - RSTP show输出 (code=0): 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-12 01:37:23,807 - test_protocol_conformance - INFO - 初始活动端口: ['br3', 'br4']
2025-09-12 01:37:23,807 - test_protocol_conformance - INFO - 选择端口br4进行禁用测试
2025-09-12 01:37:23,807 - test_protocol_conformance - INFO - 禁用端口br4
2025-09-12 01:37:23,808 - FaultInjector_DUT - INFO - 断开链路: br4
2025-09-12 01:37:33,914 - FaultInjector_DUT - INFO - 链路已断开: br4
2025-09-12 01:37:33,914 - test_protocol_conformance - INFO - 禁用命令结果: ('', '', 0)
2025-09-12 01:37:34,075 - test_protocol_conformance - INFO - 端口br4配置: stdout='1
1
{rstp-enable="true", rstp-port-admin-edge="true", rstp-port-auto-edge="true", stp-path-cost="20000"}
', stderr='', code=0
2025-09-12 01:37:49,490 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:37:49,642 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  40000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Disabled   Discarding 20000    128.1
  br3        Root       Forwarding 20000    128.2


2025-09-12 01:37:49,643 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-12 01:37:49,643 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:37:49,643 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-12 01:37:49,643 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:37:50,107 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:37:50,108 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:37:50,109 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:37:50,110 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:37:50,110 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:37:50,110 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:37:50,396 - test_protocol_conformance - INFO - 禁用后所有端口状态: [('br3', 'forwarding'), ('br4', 'disabled'), ('SE_ETH2', 'disabled')]
2025-09-12 01:37:50,397 - test_protocol_conformance - INFO - 端口br4状态: disabled, 角色: alternate
2025-09-12 01:37:50,397 - test_protocol_conformance - INFO - 禁用后活动端口: ['br3']
2025-09-12 01:37:50,397 - test_protocol_conformance - INFO - 活动端口数量: 1, 初始活动端口数量: 2
2025-09-12 01:37:50,397 - test_protocol_conformance - INFO - 禁用后端口角色分布: {<PortRole.ROOT: 'root'>: ['br3']}
2025-09-12 01:37:50,854 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:37:51,012 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  40000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Disabled   Discarding 20000    128.1
  br3        Root       Forwarding 20000    128.2


2025-09-12 01:37:51,014 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-12 01:37:51,014 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:37:51,014 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-12 01:37:51,014 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:37:51,475 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:37:51,475 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:37:51,476 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:37:51,476 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:37:51,477 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:37:51,477 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:37:51,773 - RSTPAnalyzer_DUT - INFO - Root ID为unknown，判定为非根桥
2025-09-12 01:37:51,773 - test_protocol_conformance - INFO - 重新启用端口br4
2025-09-12 01:37:51,774 - FaultInjector_DUT - INFO - 恢复链路: br4
2025-09-12 01:37:51,941 - FaultInjector_DUT - INFO - 链路已恢复: br4
2025-09-12 01:38:07,353 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:38:07,507 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-12 01:38:07,508 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-12 01:38:07,508 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:38:07,508 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-12 01:38:07,508 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:38:07,984 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:38:07,984 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:38:07,985 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:38:07,985 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:38:07,985 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:38:07,985 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:38:08,272 - test_protocol_conformance - INFO - ✓ 端口br4已重新启用，状态: discarding
2025-09-12 01:38:08,272 - test_protocol_conformance - INFO - ✓ 禁用端口排除测试完成
2025-09-12 01:38:08,273 - RSTPTest - INFO - 测试完成: test_disabled_port_exclusion (耗时: 81.60秒)
2025-09-12 01:38:08,274 - RSTPTest - INFO - ============================================================

2025-09-12 01:38:08,275 - RSTPTest - INFO - ============================================================
2025-09-12 01:38:08,275 - RSTPTest - INFO - 开始测试: test_topology_change_notification
2025-09-12 01:38:08,276 - RSTPTest - INFO - ============================================================
2025-09-12 01:38:08,276 - test_protocol_conformance - INFO - 开始拓扑变更通知测试
2025-09-12 01:38:08,277 - test_protocol_conformance - INFO - === 步骤1: 创建多网桥环形拓扑 ===
2025-09-12 01:38:09,172 - test_protocol_conformance - INFO - 创建网桥 SE_ETH2 (优先级: 32768)
2025-09-12 01:38:09,596 - test_protocol_conformance - INFO - 创建网桥 rstp2 (优先级: 36864)
2025-09-12 01:38:10,032 - test_protocol_conformance - INFO - 创建网桥 rstp3 (优先级: 40960)
2025-09-12 01:38:10,760 - test_protocol_conformance - INFO - ✓ 连接 rstp1 <-> rstp2
2025-09-12 01:38:11,504 - test_protocol_conformance - INFO - ✓ 连接 rstp2 <-> rstp3
2025-09-12 01:38:12,208 - test_protocol_conformance - INFO - ✓ 连接 rstp3 <-> rstp1
2025-09-12 01:38:12,208 - test_protocol_conformance - INFO - 等待RSTP初始收敛...
2025-09-12 01:38:22,209 - test_protocol_conformance - INFO - === 步骤2: 验证初始RSTP状态 ===
2025-09-12 01:38:22,263 - test_protocol_conformance - INFO - 
SE_ETH2 初始RSTP状态:
2025-09-12 01:38:22,263 - test_protocol_conformance - INFO -   ---- SE_ETH2 ----
2025-09-12 01:38:22,263 - test_protocol_conformance - INFO -   Root ID:
2025-09-12 01:38:22,263 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-12 01:38:22,263 - test_protocol_conformance - INFO -     stp-system-id   8a:59:ea:f3:10:4d
2025-09-12 01:38:22,264 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-12 01:38:22,264 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-12 01:38:22,264 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-12 01:38:22,264 - test_protocol_conformance - INFO -     This bridge is the root
2025-09-12 01:38:22,264 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-12 01:38:22,264 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-12 01:38:22,264 - test_protocol_conformance - INFO -     stp-system-id   8a:59:ea:f3:10:4d
2025-09-12 01:38:22,265 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-12 01:38:22,265 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-12 01:38:22,265 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-12 01:38:22,265 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-12 01:38:22,265 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-12 01:38:22,265 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-12 01:38:22,362 - test_protocol_conformance - INFO - 
rstp2 初始RSTP状态:
2025-09-12 01:38:22,363 - test_protocol_conformance - INFO -   ---- rstp2 ----
2025-09-12 01:38:22,363 - test_protocol_conformance - INFO -   Root ID:
2025-09-12 01:38:22,363 - test_protocol_conformance - INFO -     stp-priority    36864
2025-09-12 01:38:22,363 - test_protocol_conformance - INFO -     stp-system-id   6e:42:21:43:b4:44
2025-09-12 01:38:22,364 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-12 01:38:22,364 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-12 01:38:22,364 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-12 01:38:22,364 - test_protocol_conformance - INFO -     This bridge is the root
2025-09-12 01:38:22,364 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-12 01:38:22,364 - test_protocol_conformance - INFO -     stp-priority    36864
2025-09-12 01:38:22,364 - test_protocol_conformance - INFO -     stp-system-id   6e:42:21:43:b4:44
2025-09-12 01:38:22,365 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-12 01:38:22,365 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-12 01:38:22,365 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-12 01:38:22,365 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-12 01:38:22,365 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-12 01:38:22,365 - test_protocol_conformance - INFO -     veth12b    Designated Forwarding 2000     128.1
2025-09-12 01:38:22,366 - test_protocol_conformance - INFO -     veth23a    Designated Forwarding 2000     128.2
2025-09-12 01:38:22,366 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-12 01:38:22,366 - test_protocol_conformance - INFO -   → 有转发端口
2025-09-12 01:38:22,462 - test_protocol_conformance - INFO - 
rstp3 初始RSTP状态:
2025-09-12 01:38:22,462 - test_protocol_conformance - INFO -   ---- rstp3 ----
2025-09-12 01:38:22,462 - test_protocol_conformance - INFO -   Root ID:
2025-09-12 01:38:22,462 - test_protocol_conformance - INFO -     stp-priority    36864
2025-09-12 01:38:22,463 - test_protocol_conformance - INFO -     stp-system-id   6e:42:21:43:b4:44
2025-09-12 01:38:22,463 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-12 01:38:22,463 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-12 01:38:22,463 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-12 01:38:22,463 - test_protocol_conformance - INFO -     root-port       veth23b
2025-09-12 01:38:22,464 - test_protocol_conformance - INFO -     root-path-cost  2000
2025-09-12 01:38:22,464 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-12 01:38:22,464 - test_protocol_conformance - INFO -     stp-priority    40960
2025-09-12 01:38:22,464 - test_protocol_conformance - INFO -     stp-system-id   3a:e7:ba:3b:bc:47
2025-09-12 01:38:22,464 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-12 01:38:22,464 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-12 01:38:22,465 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-12 01:38:22,465 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-12 01:38:22,465 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-12 01:38:22,465 - test_protocol_conformance - INFO -     veth23b    Root       Forwarding 2000     128.1
2025-09-12 01:38:22,465 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-12 01:38:22,465 - test_protocol_conformance - INFO -   → 有转发端口
2025-09-12 01:38:22,466 - test_protocol_conformance - INFO - === 步骤3: 分析网络拓扑 ===
2025-09-12 01:38:22,466 - test_protocol_conformance - INFO - ✓ SE_ETH2 是根桥
2025-09-12 01:38:22,466 - test_protocol_conformance - INFO - ✓ rstp2 是根桥
2025-09-12 01:38:22,466 - test_protocol_conformance - INFO - === 步骤4: 触发拓扑变更 ===
2025-09-12 01:38:22,466 - test_protocol_conformance - INFO - 断开活动端口: veth31a
2025-09-12 01:38:27,826 - test_protocol_conformance - INFO - ✓ rstp3 状态已变化
2025-09-12 01:38:32,924 - test_protocol_conformance - INFO - === 步骤5: 验证拓扑变更 ===
2025-09-12 01:38:32,977 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: veth12a, 数量: 5)
2025-09-12 01:38:38,120 - RSTPAnalyzer_DUT - INFO - 捕获到 2 个BPDU包
2025-09-12 01:38:38,121 - test_protocol_conformance - INFO - 在 veth12a 捕获到 2 个BPDU
2025-09-12 01:38:38,121 - test_protocol_conformance - INFO - === 步骤6: 最终验证 ===
2025-09-12 01:38:38,121 - test_protocol_conformance - INFO - ✓ 测试通过：检测到拓扑变更
2025-09-12 01:38:38,218 - test_protocol_conformance - INFO - 
========== SE_ETH2 最终状态 ==========
2025-09-12 01:38:38,218 - test_protocol_conformance - INFO - ---- SE_ETH2 ----
2025-09-12 01:38:38,219 - test_protocol_conformance - INFO - Root ID:
2025-09-12 01:38:38,219 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-12 01:38:38,219 - test_protocol_conformance - INFO -   stp-system-id   8a:59:ea:f3:10:4d
2025-09-12 01:38:38,219 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-12 01:38:38,219 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-12 01:38:38,219 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-12 01:38:38,220 - test_protocol_conformance - INFO -   This bridge is the root
2025-09-12 01:38:38,220 - test_protocol_conformance - INFO - Bridge ID:
2025-09-12 01:38:38,220 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-12 01:38:38,220 - test_protocol_conformance - INFO -   stp-system-id   8a:59:ea:f3:10:4d
2025-09-12 01:38:38,220 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-12 01:38:38,220 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-12 01:38:38,221 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-12 01:38:38,221 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-12 01:38:38,221 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-12 01:38:38,317 - test_protocol_conformance - INFO - 
========== rstp2 最终状态 ==========
2025-09-12 01:38:38,318 - test_protocol_conformance - INFO - ---- rstp2 ----
2025-09-12 01:38:38,318 - test_protocol_conformance - INFO - Root ID:
2025-09-12 01:38:38,318 - test_protocol_conformance - INFO -   stp-priority    36864
2025-09-12 01:38:38,318 - test_protocol_conformance - INFO -   stp-system-id   6e:42:21:43:b4:44
2025-09-12 01:38:38,318 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-12 01:38:38,319 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-12 01:38:38,319 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-12 01:38:38,319 - test_protocol_conformance - INFO -   This bridge is the root
2025-09-12 01:38:38,319 - test_protocol_conformance - INFO - Bridge ID:
2025-09-12 01:38:38,319 - test_protocol_conformance - INFO -   stp-priority    36864
2025-09-12 01:38:38,319 - test_protocol_conformance - INFO -   stp-system-id   6e:42:21:43:b4:44
2025-09-12 01:38:38,319 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-12 01:38:38,319 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-12 01:38:38,320 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-12 01:38:38,320 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-12 01:38:38,320 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-12 01:38:38,320 - test_protocol_conformance - INFO -   veth12b    Designated Forwarding 2000     128.1
2025-09-12 01:38:38,320 - test_protocol_conformance - INFO -   veth23a    Designated Forwarding 2000     128.2
2025-09-12 01:38:38,414 - test_protocol_conformance - INFO - 
========== rstp3 最终状态 ==========
2025-09-12 01:38:38,415 - test_protocol_conformance - INFO - ---- rstp3 ----
2025-09-12 01:38:38,415 - test_protocol_conformance - INFO - Root ID:
2025-09-12 01:38:38,415 - test_protocol_conformance - INFO -   stp-priority    36864
2025-09-12 01:38:38,415 - test_protocol_conformance - INFO -   stp-system-id   6e:42:21:43:b4:44
2025-09-12 01:38:38,415 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-12 01:38:38,416 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-12 01:38:38,416 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-12 01:38:38,416 - test_protocol_conformance - INFO -   root-port       veth23b
2025-09-12 01:38:38,416 - test_protocol_conformance - INFO -   root-path-cost  2000
2025-09-12 01:38:38,416 - test_protocol_conformance - INFO - Bridge ID:
2025-09-12 01:38:38,417 - test_protocol_conformance - INFO -   stp-priority    40960
2025-09-12 01:38:38,417 - test_protocol_conformance - INFO -   stp-system-id   3a:e7:ba:3b:bc:47
2025-09-12 01:38:38,417 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-12 01:38:38,417 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-12 01:38:38,417 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-12 01:38:38,417 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-12 01:38:38,418 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-12 01:38:38,418 - test_protocol_conformance - INFO -   veth23b    Root       Forwarding 2000     128.1
2025-09-12 01:38:38,418 - test_protocol_conformance - INFO -   veth31a    Designated Forwarding 2000     128.2
2025-09-12 01:38:38,418 - test_protocol_conformance - INFO - 
=== 诊断信息 ===
2025-09-12 01:38:38,518 - test_protocol_conformance - INFO - 系统日志中的STP/RSTP信息:
2025-09-12 01:38:38,518 - test_protocol_conformance - INFO - [656274.213167] rstp2: entered promiscuous mode
[656274.638188] rstp3: entered promiscuous mode

2025-09-12 01:38:38,619 - test_protocol_conformance - INFO - OVS日志中的拓扑变更信息:
2025-09-12 01:38:38,620 - test_protocol_conformance - INFO - 2025-09-11T17:38:32.391Z|13393|bridge|WARN|br0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-11T17:38:32.391Z|13394|bridge|WARN|rstp0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-11T17:38:32.405Z|13398|bridge|WARN|br0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-11T17:38:32.405Z|13399|bridge|WARN|rstp0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-11T17:38:37.550Z|13405|bridge|WARN|br0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-11T17:38:37.550Z|13406|bridge|WARN|rstp0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-11T17:38:42.548Z|13410|bridge|WARN|br0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-11T17:38:42.548Z|13411|bridge|WARN|rstp0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP

2025-09-12 01:38:38,620 - test_protocol_conformance - INFO - === 清理测试环境 ===
2025-09-12 01:38:39,303 - test_protocol_conformance - INFO - 拓扑变更通知测试完成
2025-09-12 01:38:39,304 - RSTPTest - INFO - 测试完成: test_topology_change_notification (耗时: 31.03秒)
2025-09-12 01:38:39,304 - RSTPTest - INFO - ============================================================

2025-09-12 01:38:39,305 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-12 01:38:39,305 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-12 01:38:39,306 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-12 01:38:39,441 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-12 01:38:39,441 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-12 01:38:39,570 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-12 01:38:39,571 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-12 01:38:39,705 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-12 01:38:39,705 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-12 01:38:39,706 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-12 01:38:39,706 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-12 01:38:39,706 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-12 01:38:39,706 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-12 01:38:39,763 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-12 01:38:39,764 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-12 01:38:39,929 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-12 01:38:39,929 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-12 01:38:39,929 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-12 01:38:39,929 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-12 01:38:39,930 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-12 01:38:39,985 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-12 01:38:39,985 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-12 01:38:40,155 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-12 01:38:40,156 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-12 01:38:40,156 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-12 01:38:40,156 - RSTPTest - INFO - ============================================================
2025-09-12 01:38:40,156 - RSTPTest - INFO - 开始测试: test_root_bridge_hijack_attack
2025-09-12 01:38:40,157 - RSTPTest - INFO - ============================================================
2025-09-12 01:38:40,157 - test_security - INFO - ============================================================
2025-09-12 01:38:40,158 - test_security - INFO - 根桥劫持攻击防护测试
2025-09-12 01:38:40,158 - test_security - INFO - 测试目标：验证DUT是否能防御恶意BPDU攻击
2025-09-12 01:38:40,158 - test_security - INFO - ============================================================
2025-09-12 01:38:40,158 - test_security - INFO - 
步骤1：配置网络拓扑
2025-09-12 01:38:40,158 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-12 01:38:40,159 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-12 01:38:40,159 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-12 01:38:40,159 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-12 01:38:40,159 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-12 01:38:40,159 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-12 01:38:40,159 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-12 01:38:40,160 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-12 01:38:40,160 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-12 01:38:40,658 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-12 01:38:40,659 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-12 01:38:40,659 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-12 01:38:40,814 - NetworkTopology - INFO - DUT: 创建新网桥SE_ETH2
2025-09-12 01:38:42,011 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-12 01:38:42,011 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-12 01:38:42,011 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-12 01:38:42,012 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-12 01:38:42,012 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-12 01:38:42,481 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-12 01:38:42,928 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-12 01:38:42,929 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-12 01:38:43,100 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-12 01:38:43,100 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-12 01:38:43,100 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-12 01:38:43,101 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-12 01:38:43,101 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-12 01:38:43,101 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-12 01:38:43,101 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-12 01:38:43,101 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-12 01:38:43,601 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-12 01:38:48,119 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:38:48,242 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:38:48,243 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-12 01:38:48,243 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-12 01:38:48,243 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:38:48,243 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-12 01:38:49,439 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-12 01:38:50,636 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-12 01:38:50,637 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-12 01:38:50,733 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-12 01:38:50,990 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-12 01:38:50,991 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-12 01:38:50,991 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-12 01:38:50,991 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-12 01:38:50,991 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-12 01:38:50,992 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-12 01:38:50,992 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-12 01:38:50,992 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-12 01:38:51,489 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-12 01:38:55,969 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:38:56,102 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:38:56,102 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-12 01:38:56,102 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-12 01:38:56,103 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:38:56,103 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-12 01:38:57,281 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-12 01:38:58,467 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-12 01:38:58,467 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-12 01:38:58,563 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-12 01:38:58,825 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-12 01:38:58,825 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-12 01:38:58,826 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-12 01:38:58,826 - test_security - INFO - 设置DUT为根桥（优先级=4096）
2025-09-12 01:39:03,763 - test_security - INFO - 设置TestNode为普通桥（优先级=32768）
2025-09-12 01:39:03,764 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 32768 (方法: mstpd)
2025-09-12 01:39:03,764 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级32768 -> mstpd优先级8)
2025-09-12 01:39:03,891 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-12 01:39:03,891 - test_security - INFO - 
等待RSTP收敛...
2025-09-12 01:39:13,892 - test_security - INFO - 
步骤2：验证初始RSTP状态
2025-09-12 01:39:14,001 - test_security - INFO - ✓ DUT是根桥: 4096.90:12:10:b5:7d:f7
2025-09-12 01:39:14,310 - test_security - INFO - 初始BPDU接收计数: 4
2025-09-12 01:39:14,310 - test_security - INFO - 
步骤3：发起根桥劫持攻击
2025-09-12 01:39:14,310 - test_security - INFO - 攻击方式：从TestNode发送优先级=0的恶意BPDU
2025-09-12 01:39:14,310 - FaultInjector_TestNode1 - WARNING - 注入恶意BPDU到 eth2，优先级: 0
2025-09-12 01:39:14,367 - FaultInjector_TestNode1 - INFO - 网桥状态检查: ('bridge name\tbridge id\t\tSTP enabled\tinterfaces\nbr0\t\t8000.6eb308fa0134\tyes\t\teth0\n\t\t\t\t\t\t\teth2\ntest_br\t\t8000.322c30a3a0e1\tyes\t\t\n', '', 0)
2025-09-12 01:39:14,367 - FaultInjector_TestNode1 - INFO - 尝试通过接口 eth2 发送BPDU
2025-09-12 01:39:14,463 - FaultInjector_TestNode1 - INFO - 接口 eth2 在网桥中，临时移除
2025-09-12 01:39:43,940 - FaultInjector_TestNode1 - INFO - 接口 eth2 BPDU注入脚本执行结果 (code=0):
2025-09-12 01:39:43,940 - FaultInjector_TestNode1 - INFO - STDOUT: 8N10xiaol
8N10xiaol
=== 恶意BPDU注入器 (增强版) ===
接口: eth2
优先级: 0
源MAC: 00:11:22:33:44:55
数量: 10, 间隔: 2.0s

开始BPDU注入...

=== 方法1: RAW Socket发送 ===
RAW Socket发送BPDU #1
RAW Socket发送BPDU #2
RAW Socket发送BPDU #3
RAW Socket发送BPDU #4
RAW Socket发送BPDU #5
RAW Socket发送BPDU #6
RAW Socket发送BPDU #7
RAW Socket发送BPDU #8
RAW Socket发送BPDU #9
RAW Socket发送BPDU #10
RAW Socket方法完成: 10/10

✓ RAW Socket方法成功

=== 注入结果 ===
总共发送: 10/10 个BPDU
目标: 劫持根桥 (优先级 0)

✓ BPDU注入成功完成

2025-09-12 01:39:43,941 - FaultInjector_TestNode1 - WARNING - 接口 eth2 恶意BPDU注入成功 (优先级: 0)
2025-09-12 01:39:43,942 - FaultInjector_TestNode1 - INFO - 恢复接口 eth2 到网桥
2025-09-12 01:39:54,563 - FaultInjector_TestNode1 - INFO - 尝试通过接口 eth0 发送BPDU
2025-09-12 01:39:54,619 - FaultInjector_TestNode1 - INFO - 接口 eth0 不在任何网桥中
2025-09-12 01:40:22,974 - FaultInjector_TestNode1 - INFO - 接口 eth0 BPDU注入脚本执行结果 (code=0):
2025-09-12 01:40:22,974 - FaultInjector_TestNode1 - INFO - STDOUT: 8N10xiaol
8N10xiaol
=== 恶意BPDU注入器 (增强版) ===
接口: eth0
优先级: 0
源MAC: 00:11:22:33:44:55
数量: 10, 间隔: 2.0s

开始BPDU注入...

=== 方法1: RAW Socket发送 ===
RAW Socket发送BPDU #1
RAW Socket发送BPDU #2
RAW Socket发送BPDU #3
RAW Socket发送BPDU #4
RAW Socket发送BPDU #5
RAW Socket发送BPDU #6
RAW Socket发送BPDU #7
RAW Socket发送BPDU #8
RAW Socket发送BPDU #9
RAW Socket发送BPDU #10
RAW Socket方法完成: 10/10

✓ RAW Socket方法成功

=== 注入结果 ===
总共发送: 10/10 个BPDU
目标: 劫持根桥 (优先级 0)

✓ BPDU注入成功完成

2025-09-12 01:40:22,975 - FaultInjector_TestNode1 - WARNING - 接口 eth0 恶意BPDU注入成功 (优先级: 0)
2025-09-12 01:40:22,975 - FaultInjector_TestNode1 - INFO - 尝试通过接口 eth1 发送BPDU
2025-09-12 01:40:23,071 - FaultInjector_TestNode1 - INFO - 接口 eth1 不在任何网桥中
2025-09-12 01:40:51,419 - FaultInjector_TestNode1 - INFO - 接口 eth1 BPDU注入脚本执行结果 (code=0):
2025-09-12 01:40:51,420 - FaultInjector_TestNode1 - INFO - STDOUT: 8N10xiaol
8N10xiaol
=== 恶意BPDU注入器 (增强版) ===
接口: eth1
优先级: 0
源MAC: 00:11:22:33:44:55
数量: 10, 间隔: 2.0s

开始BPDU注入...

=== 方法1: RAW Socket发送 ===
RAW Socket发送BPDU #1
RAW Socket发送BPDU #2
RAW Socket发送BPDU #3
RAW Socket发送BPDU #4
RAW Socket发送BPDU #5
RAW Socket发送BPDU #6
RAW Socket发送BPDU #7
RAW Socket发送BPDU #8
RAW Socket发送BPDU #9
RAW Socket发送BPDU #10
RAW Socket方法完成: 10/10

✓ RAW Socket方法成功

=== 注入结果 ===
总共发送: 10/10 个BPDU
目标: 劫持根桥 (优先级 0)

✓ BPDU注入成功完成

2025-09-12 01:40:51,421 - FaultInjector_TestNode1 - WARNING - 接口 eth1 恶意BPDU注入成功 (优先级: 0)
2025-09-12 01:40:51,421 - FaultInjector_TestNode1 - INFO - BPDU注入总结: 3/3 个接口成功
2025-09-12 01:40:51,421 - FaultInjector_TestNode1 - WARNING - 恶意BPDU注入完成 - 成功接口数: 3
2025-09-12 01:40:51,422 - test_security - INFO - 
步骤4：评估攻击效果
2025-09-12 01:40:51,422 - test_security - INFO - 等待RSTP重新收敛...
2025-09-12 01:41:11,841 - test_security - INFO - 最终BPDU接收计数: 7
2025-09-12 01:41:11,841 - test_security - INFO - BPDU接收增量: 3
2025-09-12 01:41:11,841 - test_security - INFO - 
步骤5：分析测试结果
2025-09-12 01:41:11,841 - test_security - INFO - ==================================================
2025-09-12 01:41:11,842 - test_security - INFO - 测试结果分析
2025-09-12 01:41:11,842 - test_security - INFO - ==================================================
2025-09-12 01:41:11,842 - test_security - INFO - 初始状态: DUT是根桥=True
2025-09-12 01:41:11,842 - test_security - INFO - 最终状态: DUT是根桥=True
2025-09-12 01:41:11,842 - test_security - INFO - 恶意BPDU送达: True
2025-09-12 01:41:11,843 - test_security - INFO - ✅ 测试通过：DUT成功防御了根桥劫持攻击！
2025-09-12 01:41:11,843 - test_security - INFO - DUT接收到恶意BPDU但保持了根桥地位
2025-09-12 01:41:11,843 - test_security - INFO - 这表明DUT具有有效的防护机制
2025-09-12 01:41:11,843 - test_security - INFO - 
分析DUT的防护机制：
2025-09-12 01:41:11,994 - test_security - INFO - 可能的防护机制：
2025-09-12 01:41:11,994 - test_security - INFO -   ✓ 优先级锁定或Root Guard
2025-09-12 01:41:11,995 - test_security - INFO -   ✓ BPDU来源验证
2025-09-12 01:41:11,995 - test_security - INFO -   ✓ 静态根桥配置
2025-09-12 01:41:11,996 - RSTPTest - INFO - 测试完成: test_root_bridge_hijack_attack (耗时: 151.84秒)
2025-09-12 01:41:11,996 - RSTPTest - INFO - ============================================================

2025-09-12 01:41:11,997 - RSTPTest - INFO - ============================================================
2025-09-12 01:41:11,997 - RSTPTest - INFO - 开始测试: test_bpdu_flood_attack
2025-09-12 01:41:11,998 - RSTPTest - INFO - ============================================================
2025-09-12 01:41:11,998 - test_security - INFO - 开始BPDU洪泛攻击测试
2025-09-12 01:41:11,998 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-12 01:41:11,999 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-12 01:41:11,999 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-12 01:41:11,999 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-12 01:41:11,999 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-12 01:41:11,999 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-12 01:41:12,000 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-12 01:41:12,000 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-12 01:41:12,000 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-12 01:41:12,517 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-12 01:41:12,517 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-12 01:41:12,517 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-12 01:41:12,672 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-12 01:41:13,744 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-12 01:41:13,745 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-12 01:41:13,745 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-12 01:41:13,745 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-12 01:41:13,745 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-12 01:41:14,225 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-12 01:41:14,717 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-12 01:41:14,717 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-12 01:41:14,908 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-12 01:41:14,909 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-12 01:41:14,909 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-12 01:41:14,910 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-12 01:41:14,910 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-12 01:41:14,910 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-12 01:41:14,910 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-12 01:41:14,911 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-12 01:41:30,526 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-12 01:41:35,038 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:41:35,172 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:41:35,172 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-12 01:41:35,172 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-12 01:41:35,172 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:41:35,173 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-12 01:41:36,367 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-12 01:41:37,546 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-12 01:41:37,547 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-12 01:41:37,643 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-12 01:41:37,909 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-12 01:41:37,909 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-12 01:41:37,909 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-12 01:41:37,909 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-12 01:41:37,910 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-12 01:41:37,910 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-12 01:41:37,910 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-12 01:41:37,911 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-12 01:41:38,408 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-12 01:41:42,907 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:41:43,035 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:41:43,036 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-12 01:41:43,036 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-12 01:41:43,036 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:41:43,036 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-12 01:41:44,226 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-12 01:41:45,417 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-12 01:41:45,418 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-12 01:41:45,514 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-12 01:41:45,779 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-12 01:41:45,780 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-12 01:41:45,780 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-12 01:41:50,996 - test_security - INFO - 初始CPU使用率: 33.3%
2025-09-12 01:41:50,997 - test_security - INFO - 使用接口进行BPDU洪泛: eth2
2025-09-12 01:42:01,364 - test_security - INFO - 洪泛时CPU使用率: 0.0%
2025-09-12 01:42:01,826 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:42:01,987 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:42:01,988 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-12 01:42:01,988 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:42:01,988 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-12 01:42:01,989 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:42:02,472 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:42:02,472 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:42:02,473 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:42:02,473 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:42:02,474 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:42:02,474 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:42:02,769 - test_security - INFO - 网络在BPDU洪泛下保持稳定
2025-09-12 01:42:02,769 - test_security - INFO - BPDU洪泛攻击测试完成
2025-09-12 01:42:02,770 - RSTPTest - INFO - 测试完成: test_bpdu_flood_attack (耗时: 50.77秒)
2025-09-12 01:42:02,770 - RSTPTest - INFO - ============================================================

2025-09-12 01:42:02,771 - RSTPTest - INFO - ============================================================
2025-09-12 01:42:02,771 - RSTPTest - INFO - 开始测试: test_topology_change_attack
2025-09-12 01:42:02,771 - RSTPTest - INFO - ============================================================
2025-09-12 01:42:02,772 - test_security - INFO - 开始拓扑变更攻击测试
2025-09-12 01:42:02,772 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-12 01:42:02,772 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-12 01:42:02,772 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-12 01:42:02,772 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-12 01:42:02,773 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-12 01:42:02,773 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-12 01:42:02,773 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-12 01:42:02,773 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-12 01:42:02,773 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-12 01:42:03,297 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-12 01:42:03,297 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-12 01:42:03,297 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-12 01:42:03,452 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-12 01:42:04,551 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-12 01:42:04,551 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-12 01:42:04,552 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-12 01:42:04,552 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-12 01:42:04,552 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-12 01:42:05,032 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-12 01:42:05,513 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-12 01:42:05,513 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-12 01:42:05,704 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-12 01:42:05,704 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-12 01:42:05,704 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-12 01:42:05,704 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-12 01:42:05,705 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-12 01:42:05,705 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-12 01:42:05,705 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-12 01:42:05,705 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-12 01:42:06,214 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-12 01:42:10,728 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:42:10,857 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:42:10,857 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-12 01:42:10,858 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-12 01:42:10,858 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:42:10,858 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-12 01:42:12,053 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-12 01:42:13,232 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-12 01:42:13,232 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-12 01:42:13,329 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-12 01:42:13,594 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-12 01:42:13,594 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-12 01:42:13,595 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-12 01:42:13,595 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-12 01:42:13,595 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-12 01:42:13,595 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-12 01:42:13,595 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-12 01:42:13,595 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-12 01:42:14,095 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-12 01:42:18,607 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:42:18,737 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:42:18,737 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-12 01:42:18,737 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-12 01:42:18,738 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:42:18,738 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-12 01:42:19,928 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-12 01:42:21,124 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-12 01:42:21,124 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-12 01:42:21,220 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-12 01:42:21,481 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-12 01:42:21,482 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-12 01:42:21,482 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-12 01:42:26,898 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:42:27,054 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:42:27,055 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-12 01:42:27,055 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:42:27,056 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-12 01:42:27,056 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:42:27,515 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:42:27,515 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:42:27,516 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:42:27,517 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:42:27,517 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:42:27,517 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:42:27,804 - test_security - INFO - 触发快速拓扑变更...
2025-09-12 01:42:46,245 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:42:46,397 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:42:46,398 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-12 01:42:46,398 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:42:46,399 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-12 01:42:46,399 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:42:46,859 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:42:46,859 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:42:46,860 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:42:46,861 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:42:46,861 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:42:46,861 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:42:47,148 - test_security - INFO - 检测到0次拓扑变更
2025-09-12 01:42:47,610 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:42:47,765 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:42:47,767 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-12 01:42:47,767 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:42:47,767 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-12 01:42:47,768 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:42:48,223 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:42:48,223 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:42:48,225 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:42:48,225 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:42:48,225 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:42:48,225 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:42:48,516 - test_security - INFO - 网络在频繁拓扑变更后保持稳定
2025-09-12 01:42:48,516 - test_security - INFO - 拓扑变更攻击测试完成
2025-09-12 01:42:48,517 - RSTPTest - INFO - 测试完成: test_topology_change_attack (耗时: 45.75秒)
2025-09-12 01:42:48,517 - RSTPTest - INFO - ============================================================

2025-09-12 01:42:48,519 - RSTPTest - INFO - ============================================================
2025-09-12 01:42:48,519 - RSTPTest - INFO - 开始测试: test_mac_spoofing
2025-09-12 01:42:48,519 - RSTPTest - INFO - ============================================================
2025-09-12 01:42:48,520 - test_security - INFO - 开始MAC地址欺骗测试
2025-09-12 01:42:48,520 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-12 01:42:48,520 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-12 01:42:48,520 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-12 01:42:48,520 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-12 01:42:48,521 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-12 01:42:48,521 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-12 01:42:48,521 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-12 01:42:48,521 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-12 01:42:48,521 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-12 01:42:49,047 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-12 01:42:49,047 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-12 01:42:49,047 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-12 01:42:49,203 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-12 01:42:50,279 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-12 01:42:50,279 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-12 01:42:50,279 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-12 01:42:50,279 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-12 01:42:50,279 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-12 01:42:50,755 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-12 01:42:51,230 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-12 01:42:51,231 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-12 01:42:51,423 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-12 01:42:51,423 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-12 01:42:51,423 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-12 01:42:51,424 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-12 01:42:51,424 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-12 01:42:51,424 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-12 01:42:51,424 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-12 01:42:51,425 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-12 01:42:51,931 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-12 01:42:56,432 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:42:56,560 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:42:56,560 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-12 01:42:56,560 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-12 01:42:56,561 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:42:56,561 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-12 01:42:57,752 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-12 01:42:58,941 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-12 01:42:58,942 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-12 01:42:59,035 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-12 01:42:59,302 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-12 01:42:59,303 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-12 01:42:59,303 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-12 01:42:59,303 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-12 01:42:59,303 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-12 01:42:59,304 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-12 01:42:59,304 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-12 01:42:59,304 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-12 01:42:59,803 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-12 01:43:04,335 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:43:04,459 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:43:04,459 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-12 01:43:04,460 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-12 01:43:04,460 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:43:04,460 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-12 01:43:05,636 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-12 01:43:06,826 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-12 01:43:06,826 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-12 01:43:06,922 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-12 01:43:07,183 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-12 01:43:07,184 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-12 01:43:07,184 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-12 01:43:12,235 - test_security - INFO - DUT MAC地址: 90:12:10:b5:7d:f7
2025-09-12 01:43:12,236 - test_security - INFO - 尝试MAC地址欺骗...
2025-09-12 01:43:18,186 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:43:18,349 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:43:18,350 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-12 01:43:18,350 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:43:18,351 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-12 01:43:18,351 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:43:18,809 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:43:18,810 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:43:18,811 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:43:18,811 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:43:18,811 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:43:18,811 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:43:19,099 - test_security - INFO - 网络对MAC欺骗具有抗性
2025-09-12 01:43:25,726 - test_security - INFO - MAC地址欺骗测试完成
2025-09-12 01:43:25,727 - RSTPTest - INFO - 测试完成: test_mac_spoofing (耗时: 37.21秒)
2025-09-12 01:43:25,727 - RSTPTest - INFO - ============================================================

2025-09-12 01:43:25,729 - RSTPTest - INFO - ============================================================
2025-09-12 01:43:25,729 - RSTPTest - INFO - 开始测试: test_port_security
2025-09-12 01:43:25,729 - RSTPTest - INFO - ============================================================
2025-09-12 01:43:25,730 - test_security - INFO - 开始端口安全测试
2025-09-12 01:43:25,782 - test_security - WARNING - 未检测到任何端口安全功能
2025-09-12 01:43:25,783 - RSTPTest - INFO - 测试完成: test_port_security (耗时: 0.05秒)
2025-09-12 01:43:25,783 - RSTPTest - INFO - ============================================================

2025-09-12 01:43:25,784 - RSTPTest - INFO - ============================================================
2025-09-12 01:43:25,784 - RSTPTest - INFO - 开始测试: test_bpdu_filter_functionality
2025-09-12 01:43:25,784 - RSTPTest - INFO - ============================================================
2025-09-12 01:43:25,785 - test_security - INFO - 开始BPDU过滤器功能测试
2025-09-12 01:43:25,829 - NetworkTopology - INFO - 创建RSTP线性拓扑...
2025-09-12 01:43:25,829 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-12 01:43:25,830 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-12 01:43:25,830 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-12 01:43:25,830 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-12 01:43:25,830 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-12 01:43:25,830 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-12 01:43:25,830 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-12 01:43:25,831 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-12 01:43:26,363 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-12 01:43:26,363 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-12 01:43:26,363 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-12 01:43:26,522 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-12 01:43:27,610 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"32768
2025-09-12 01:43:27,611 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-12 01:43:27,611 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-12 01:43:27,611 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br4']
2025-09-12 01:43:27,611 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-12 01:43:28,095 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-12 01:43:28,095 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-12 01:43:28,327 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-12 01:43:28,327 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-12 01:43:28,327 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-12 01:43:28,328 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-12 01:43:28,328 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-12 01:43:28,328 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-12 01:43:28,328 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-12 01:43:28,328 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-12 01:43:41,026 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-12 01:44:15,383 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:44:25,467 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:44:25,467 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-12 01:44:25,468 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-12 01:44:25,468 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:44:25,468 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-12 01:45:28,804 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-12 01:46:23,471 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-12 01:46:23,471 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-12 01:46:23,568 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-12 01:46:30,750 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-12 01:46:30,750 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-12 01:46:30,750 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-12 01:46:30,750 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-12 01:46:30,750 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-12 01:46:30,751 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-12 01:46:30,751 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-12 01:46:30,751 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-12 01:46:31,243 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-12 01:46:35,758 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:46:35,892 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:46:35,892 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-12 01:46:35,892 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-12 01:46:35,892 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0']
2025-09-12 01:46:35,893 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-12 01:46:37,081 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-12 01:46:37,082 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-12 01:46:37,176 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-12 01:46:37,446 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-12 01:46:37,446 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-12 01:46:37,447 - NetworkTopology - INFO - 线性拓扑创建完成
2025-09-12 01:46:42,580 - test_security - WARNING - BPDU包统计命令执行失败: 
2025-09-12 01:46:42,581 - test_security - INFO - 启用过滤器前端口 eth2 BPDU数量: 0
2025-09-12 01:46:42,724 - test_security - INFO - 在端口 eth2 启用BPDU过滤器
2025-09-12 01:46:52,852 - test_security - WARNING - BPDU包统计命令执行失败: 
2025-09-12 01:46:52,853 - test_security - INFO - 启用过滤器后端口 eth2 BPDU数量: 0
2025-09-12 01:46:52,853 - test_security - INFO - BPDU过滤器功能正常：BPDU发送已停止或减少
2025-09-12 01:46:52,853 - test_security - INFO - 测试向过滤端口发送外部BPDU
2025-09-12 01:47:12,264 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:47:12,421 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-12 01:47:12,422 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-12 01:47:12,422 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:47:12,422 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-12 01:47:12,423 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:47:12,895 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:47:12,895 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:47:12,896 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:47:12,896 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:47:12,897 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:47:12,897 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:47:13,183 - test_security - INFO - BPDU过滤器功能正常：外部BPDU被忽略，网络保持稳定
2025-09-12 01:47:13,184 - test_security - INFO - 测试BPDU过滤器错误配置场景
2025-09-12 01:47:13,338 - test_security - WARNING - OVS设置BPDU过滤器失败，尝试使用系统文件方法
2025-09-12 01:47:13,436 - test_security - ERROR - 启用BPDU过滤器失败: BPDU过滤器配置失败: 
2025-09-12 01:47:13,436 - test_security - ERROR - BPDU过滤器错误配置测试失败: BPDU过滤器配置失败: 
2025-09-12 01:47:13,723 - test_security - WARNING - 清理命令执行失败: echo 0 > /sys/class/net/SE_ETH2/bridge/ports/eth2/bpdu_filter, 错误: 
2025-09-12 01:47:13,724 - test_security - INFO - BPDU过滤器功能测试完成
2025-09-12 01:47:13,724 - RSTPTest - INFO - 测试完成: test_bpdu_filter_functionality (耗时: 227.94秒)
2025-09-12 01:47:13,725 - RSTPTest - INFO - ============================================================

2025-09-12 01:47:13,726 - RSTPTest - INFO - ============================================================
2025-09-12 01:47:13,726 - RSTPTest - INFO - 开始测试: test_malformed_bpdu_handling
2025-09-12 01:47:13,727 - RSTPTest - INFO - ============================================================
2025-09-12 01:47:13,727 - test_security - INFO - 开始畸形BPDU处理测试
2025-09-12 01:47:13,769 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-12 01:47:13,770 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-12 01:47:13,770 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-12 01:47:13,770 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-12 01:47:13,770 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-12 01:47:13,770 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-12 01:47:13,770 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-12 01:47:13,770 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-12 01:47:13,771 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-12 01:47:14,299 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-12 01:47:14,300 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-12 01:47:14,300 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-12 01:47:14,454 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-12 01:47:15,522 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-12 01:47:15,523 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-12 01:47:15,523 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-12 01:47:15,523 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-12 01:47:15,523 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-12 01:47:15,999 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-12 01:47:16,475 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-12 01:47:16,476 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-12 01:47:16,667 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-12 01:47:16,667 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-12 01:47:16,667 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-12 01:47:16,668 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-12 01:47:16,668 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-12 01:47:16,668 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-12 01:47:16,668 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-12 01:47:16,668 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-12 01:47:32,319 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-12 01:47:36,813 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:47:36,939 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:47:36,940 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-12 01:47:36,940 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-12 01:47:36,940 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:47:36,940 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-12 01:47:38,132 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-12 01:47:39,306 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-12 01:47:39,306 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-12 01:47:39,400 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-12 01:47:39,667 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-12 01:47:39,668 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-12 01:47:39,668 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-12 01:47:39,668 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-12 01:47:39,668 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-12 01:47:39,668 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-12 01:47:39,669 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-12 01:47:39,669 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-12 01:47:40,154 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-12 01:47:44,657 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:47:44,782 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:47:44,783 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-12 01:47:44,783 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-12 01:47:44,783 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:47:44,783 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-12 01:47:45,968 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-12 01:47:47,148 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-12 01:47:47,148 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-12 01:47:47,243 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-12 01:47:47,505 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-12 01:47:47,505 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-12 01:47:47,505 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-12 01:47:52,936 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:47:53,092 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:47:53,094 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-12 01:47:53,094 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:47:53,094 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-12 01:47:53,094 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:47:53,558 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:47:53,558 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:47:53,560 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:47:53,560 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:47:53,560 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:47:53,560 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:47:54,308 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:47:54,460 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:47:54,461 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-12 01:47:54,462 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:47:54,462 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-12 01:47:54,462 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:47:54,934 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:47:54,934 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:47:54,935 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:47:54,936 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:47:54,936 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:47:54,936 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:47:55,222 - test_security - INFO - 初始网络状态: 稳定
2025-09-12 01:47:55,223 - test_security - INFO - 执行测试: _test_oversized_bpdu
2025-09-12 01:47:59,676 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:47:59,827 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:47:59,828 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-12 01:47:59,829 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:47:59,829 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-12 01:47:59,829 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:48:00,295 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:48:00,295 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:48:00,296 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:48:00,296 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:48:00,297 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:48:00,297 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:48:00,590 - test_security - INFO - _test_oversized_bpdu 网络保持稳定
2025-09-12 01:48:00,591 - test_security - INFO - 执行测试: _test_undersized_bpdu
2025-09-12 01:48:00,642 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

# 创建过小的BPDU（缺少必要字段）
target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 只包含最小字段的BPDU
truncated_bpdu = Raw(load=b"     ")  # 截断的BPDU

packet = eth/llc/truncated_bpdu
sendp(packet, iface=interface, count=5, inter=1, verbose=0)
print("Undersized BPDU sent")
' > /tmp/undersized_bpdu.py
错误: 
2025-09-12 01:48:00,643 - test_security - WARNING - _test_undersized_bpdu 执行异常但继续测试: 
2025-09-12 01:48:00,644 - test_security - INFO - 执行测试: _test_invalid_protocol_id
2025-09-12 01:48:00,644 - test_security - WARNING - TestNode1: SSH连接断开，尝试重连...
2025-09-12 01:48:00,644 - SSH_TestNode1 - INFO - TestNode1: 尝试重新建立SSH连接...
2025-09-12 01:48:00,644 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-12 01:48:00,770 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-12 01:48:02,461 - test_security - INFO - TestNode1: 无效协议ID BPDU测试完成
2025-09-12 01:48:05,880 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:48:06,032 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:48:06,033 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-12 01:48:06,033 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:48:06,033 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-12 01:48:06,033 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:48:06,498 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:48:06,499 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:48:06,500 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:48:06,500 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:48:06,501 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:48:06,501 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:48:06,782 - test_security - INFO - _test_invalid_protocol_id 网络保持稳定
2025-09-12 01:48:06,782 - test_security - INFO - 执行测试: _test_invalid_version
2025-09-12 01:48:08,388 - test_security - INFO - TestNode1: 无效版本号BPDU测试完成
2025-09-12 01:48:11,803 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:48:11,960 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:48:11,961 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-12 01:48:11,961 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:48:11,961 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-12 01:48:11,962 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:48:12,421 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:48:12,422 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:48:12,423 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:48:12,423 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:48:12,423 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:48:12,423 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:48:12,710 - test_security - INFO - _test_invalid_version 网络保持稳定
2025-09-12 01:48:12,711 - test_security - INFO - 执行测试: _test_invalid_message_type
2025-09-12 01:48:14,330 - test_security - INFO - TestNode1: 无效消息类型BPDU测试完成
2025-09-12 01:48:17,755 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:48:17,912 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:48:17,913 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-12 01:48:17,913 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:48:17,913 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-12 01:48:17,914 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:48:18,369 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:48:18,369 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:48:18,371 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:48:18,371 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:48:18,371 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:48:18,371 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:48:18,658 - test_security - INFO - _test_invalid_message_type 网络保持稳定
2025-09-12 01:48:18,658 - test_security - INFO - 执行测试: _test_corrupted_fields
2025-09-12 01:48:20,546 - test_security - INFO - TestNode1: 损坏字段BPDU测试完成
2025-09-12 01:48:23,960 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:48:24,111 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-12 01:48:24,112 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-12 01:48:24,112 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:48:24,112 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-12 01:48:24,113 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:48:24,569 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:48:24,570 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:48:24,571 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:48:24,571 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:48:24,572 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:48:24,572 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:48:24,858 - test_security - INFO - _test_corrupted_fields 网络保持稳定
2025-09-12 01:48:28,668 - test_security - INFO - 畸形BPDU处理测试完成
2025-09-12 01:48:28,669 - RSTPTest - INFO - 测试完成: test_malformed_bpdu_handling (耗时: 74.94秒)
2025-09-12 01:48:28,669 - RSTPTest - INFO - ============================================================

2025-09-12 01:48:28,671 - RSTPTest - INFO - ============================================================
2025-09-12 01:48:28,671 - RSTPTest - INFO - 开始测试: test_non_standard_bpdu_handling
2025-09-12 01:48:28,671 - RSTPTest - INFO - ============================================================
2025-09-12 01:48:28,672 - test_security - INFO - 开始非标准BPDU处理测试
2025-09-12 01:48:28,676 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-12 01:48:28,676 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-12 01:48:28,676 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-12 01:48:28,677 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-12 01:48:28,677 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-12 01:48:28,677 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-12 01:48:28,677 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-12 01:48:28,678 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-12 01:48:28,678 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-12 01:48:29,211 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-12 01:48:29,212 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-12 01:48:29,212 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-12 01:48:29,369 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-12 01:48:30,461 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-12 01:48:30,461 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-12 01:48:30,462 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-12 01:48:30,462 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-12 01:48:30,462 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-12 01:48:30,941 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-12 01:48:31,416 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-12 01:48:31,417 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-12 01:48:31,609 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-12 01:48:31,609 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-12 01:48:31,610 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-12 01:48:31,610 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-12 01:48:31,610 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-12 01:48:31,610 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-12 01:48:31,611 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-12 01:48:31,611 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-12 01:48:32,128 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-12 01:48:36,630 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:48:36,758 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:48:36,759 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-12 01:48:36,759 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-12 01:48:36,759 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:48:36,759 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-12 01:48:37,947 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-12 01:48:39,146 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-12 01:48:39,146 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-12 01:48:39,249 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-12 01:48:39,511 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-12 01:48:39,511 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-12 01:48:39,512 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-12 01:48:39,512 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-12 01:48:39,512 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-12 01:48:39,512 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-12 01:48:39,512 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-12 01:48:39,512 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-12 01:48:40,014 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-12 01:48:44,512 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:48:44,641 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:48:44,641 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-12 01:48:44,642 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-12 01:48:44,642 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:48:44,642 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-12 01:48:45,831 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-12 01:48:47,002 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-12 01:48:47,002 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-12 01:48:47,098 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-12 01:48:47,360 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-12 01:48:47,360 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-12 01:48:47,360 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-12 01:48:52,361 - test_security - INFO - 执行测试: _test_pvst_plus_bpdu
2025-09-12 01:48:52,415 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

# PVST+ 使用不同的目标MAC地址
pvst_mac = "01:00:0c:cc:cc:cd"
interface = "eth0"

eth = Ether(dst=pvst_mac, src="00:11:22:33:44:55")
# PVST+ 使用SNAP封装
snap = SNAP(OUI=0x00000c, code=0x010b)
# 模拟PVST+ BPDU结构
pvst_bpdu = Raw(load=b"    " + b" " * 30 + b" ")  # 包含VLAN ID

packet = eth/snap/pvst_bpdu
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("PVST+ BPDU sent")
' > /tmp/pvst_bpdu.py
错误: 
2025-09-12 01:48:52,416 - test_security - ERROR - _test_pvst_plus_bpdu 执行失败: 
2025-09-12 01:48:52,417 - test_security - INFO - 执行测试: _test_cisco_proprietary_bpdu
2025-09-12 01:48:52,417 - SSH_TestNode1 - WARNING - TestNode1: SSH连接已断开，尝试重连...
2025-09-12 01:48:52,539 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-12 01:48:52,683 - SSH_TestNode1 - INFO - TestNode1: SSH重连成功
2025-09-12 01:48:52,728 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 模拟包含Cisco专有扩展的BPDU
cisco_bpdu = Raw(load=b"    " + b" " * 30 + 
                     b" )   ")  # Cisco OUI + 专有数据

packet = eth/llc/cisco_bpdu
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("Cisco proprietary BPDU sent")
' > /tmp/cisco_bpdu.py
错误: 
2025-09-12 01:48:52,729 - test_security - ERROR - _test_cisco_proprietary_bpdu 执行失败: 
2025-09-12 01:48:52,729 - test_security - INFO - 执行测试: _test_vlan_tagged_bpdu
2025-09-12 01:48:52,730 - SSH_TestNode1 - WARNING - TestNode1: SSH连接已断开，尝试重连...
2025-09-12 01:48:52,861 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-12 01:48:52,986 - SSH_TestNode1 - INFO - TestNode1: SSH重连成功
2025-09-12 01:49:00,359 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:49:00,511 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Root       Forwarding 20000    128.1
  br4        Alternate  Discarding 20000    128.2


2025-09-12 01:49:00,513 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-12 01:49:00,513 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:49:00,513 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-12 01:49:00,513 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:49:00,973 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:49:00,974 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:49:00,975 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:49:00,975 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:49:00,975 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:49:00,975 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:49:01,426 - test_security - INFO - _test_vlan_tagged_bpdu 网络保持稳定
2025-09-12 01:49:01,426 - test_security - INFO - 执行测试: _test_unknown_tlv_bpdu
2025-09-12 01:49:01,479 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 标准BPDU + 未知TLV
standard_bpdu = b"    " + b" " * 30
unknown_tlv = b"ÿÿ "  # 未知类型和长度的TLV
bpdu_with_tlv = Raw(load=standard_bpdu + unknown_tlv)

packet = eth/llc/bpdu_with_tlv
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("BPDU with unknown TLV sent")
' > /tmp/unknown_tlv.py
错误: 
2025-09-12 01:49:01,480 - test_security - ERROR - _test_unknown_tlv_bpdu 执行失败: 
2025-09-12 01:49:01,659 - test_security - INFO - 非标准BPDU处理测试完成
2025-09-12 01:49:01,660 - RSTPTest - INFO - 测试完成: test_non_standard_bpdu_handling (耗时: 32.99秒)
2025-09-12 01:49:01,660 - RSTPTest - INFO - ============================================================

2025-09-12 01:49:01,662 - RSTPTest - INFO - ============================================================
2025-09-12 01:49:01,662 - RSTPTest - INFO - 开始测试: test_bpdu_guard_functionality
2025-09-12 01:49:01,662 - RSTPTest - INFO - ============================================================
2025-09-12 01:49:01,663 - test_security - INFO - 开始BPDU防护功能测试
2025-09-12 01:49:01,668 - NetworkTopology - INFO - 创建RSTP线性拓扑...
2025-09-12 01:49:01,668 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-12 01:49:01,668 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-12 01:49:01,668 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-12 01:49:01,669 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-12 01:49:01,669 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-12 01:49:01,669 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-12 01:49:01,669 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-12 01:49:01,669 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-12 01:49:02,197 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-12 01:49:02,197 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-12 01:49:02,198 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-12 01:49:02,353 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-12 01:49:03,424 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"32768
2025-09-12 01:49:03,425 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-12 01:49:03,425 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-12 01:49:03,425 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br4']
2025-09-12 01:49:03,425 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-12 01:49:03,905 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-12 01:49:03,905 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-12 01:49:04,101 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-12 01:49:04,101 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-12 01:49:04,101 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-12 01:49:04,101 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-12 01:49:04,102 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-12 01:49:04,102 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-12 01:49:04,102 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-12 01:49:04,102 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-12 01:49:04,102 - SSH_TestNode1 - WARNING - TestNode1: SSH连接已断开，尝试重连...
2025-09-12 01:49:04,232 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-12 01:49:04,370 - SSH_TestNode1 - INFO - TestNode1: SSH重连成功
2025-09-12 01:49:04,858 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-12 01:49:09,403 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:49:09,535 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:49:09,535 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-12 01:49:09,535 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-12 01:49:09,536 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:49:09,536 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-12 01:49:10,730 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-12 01:49:11,920 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-12 01:49:11,920 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-12 01:49:12,015 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-12 01:49:12,280 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-12 01:49:12,280 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-12 01:49:12,280 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-12 01:49:12,281 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-12 01:49:12,281 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-12 01:49:12,281 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-12 01:49:12,281 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-12 01:49:12,282 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-12 01:49:12,782 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-12 01:49:17,272 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:49:17,398 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:49:17,398 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-12 01:49:17,399 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-12 01:49:17,399 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0']
2025-09-12 01:49:17,399 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-12 01:49:18,575 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-12 01:49:18,575 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-12 01:49:18,670 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-12 01:49:18,931 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-12 01:49:18,931 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-12 01:49:18,931 - NetworkTopology - INFO - 线性拓扑创建完成
2025-09-12 01:49:24,401 - test_security - INFO - 边缘端口 eth2 初始状态: {}
2025-09-12 01:49:24,401 - test_security - INFO - 向边缘端口 eth2 发送BPDU
2025-09-12 01:49:31,496 - test_security - INFO - BPDU防护触发后端口 eth2 状态: {}
2025-09-12 01:49:31,496 - test_security - ERROR - BPDU防护功能异常：端口未被禁用
2025-09-12 01:49:31,752 - RSTPTest - INFO - 测试完成: test_bpdu_guard_functionality (耗时: 30.09秒)
2025-09-12 01:49:31,753 - RSTPTest - INFO - ============================================================

2025-09-12 01:49:31,756 - RSTPTest - INFO - ============================================================
2025-09-12 01:49:31,756 - RSTPTest - INFO - 开始测试: test_root_guard_functionality
2025-09-12 01:49:31,756 - RSTPTest - INFO - ============================================================
2025-09-12 01:49:31,757 - test_security - INFO - 开始根防护功能测试
2025-09-12 01:49:31,761 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-12 01:49:31,761 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-12 01:49:31,761 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-12 01:49:31,762 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-12 01:49:31,762 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-12 01:49:31,762 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-12 01:49:31,762 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-12 01:49:31,762 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-12 01:49:31,762 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-12 01:49:32,301 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-12 01:49:32,301 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-12 01:49:32,301 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-12 01:49:32,461 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-12 01:49:33,529 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-12 01:49:33,529 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-12 01:49:33,530 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-12 01:49:33,530 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-12 01:49:33,530 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-12 01:49:34,013 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-12 01:49:34,488 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-12 01:49:34,489 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-12 01:49:34,680 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-12 01:49:34,681 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-12 01:49:34,681 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-12 01:49:34,681 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-12 01:49:34,681 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-12 01:49:34,682 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-12 01:49:34,682 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-12 01:49:34,682 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-12 01:49:35,196 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-12 01:49:39,709 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:49:39,835 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:49:39,835 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-12 01:49:39,836 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-12 01:49:39,836 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:49:39,836 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-12 01:49:41,059 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-12 01:49:42,257 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-12 01:49:42,257 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-12 01:49:42,355 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-12 01:49:42,617 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-12 01:49:42,618 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-12 01:49:42,618 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-12 01:49:42,618 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-12 01:49:42,618 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-12 01:49:42,618 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-12 01:49:42,618 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-12 01:49:42,619 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-12 01:49:43,113 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-12 01:49:47,621 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:49:47,744 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:49:47,744 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-12 01:49:47,744 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-12 01:49:47,744 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:49:47,745 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-12 01:49:48,932 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-12 01:49:50,121 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-12 01:49:50,121 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-12 01:49:50,216 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-12 01:49:50,481 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-12 01:49:50,481 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-12 01:49:50,481 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-12 01:49:55,914 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:49:56,075 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Root       Forwarding 20000    128.1
  br4        Alternate  Discarding 20000    128.2


2025-09-12 01:49:56,076 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-12 01:49:56,076 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:49:56,076 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-12 01:49:56,076 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:49:56,540 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:49:56,540 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:49:56,541 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:49:56,541 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:49:56,542 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:49:56,542 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:49:56,829 - test_security - INFO - 当前根桥ID: unknown
2025-09-12 01:49:57,155 - test_security - WARNING - 启用根防护失败: 
2025-09-12 01:49:57,155 - test_security - INFO - 在端口 eth1 启用根防护
2025-09-12 01:49:57,560 - test_security - INFO - 端口 eth1 初始状态: unknown
2025-09-12 01:49:57,560 - test_security - INFO - 发送更优BPDU尝试劫持根桥
2025-09-12 01:50:13,875 - test_security - INFO - 根防护触发后端口 eth1 状态: unknown
2025-09-12 01:50:14,337 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-12 01:50:14,493 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Root       Forwarding 20000    128.1
  br4        Alternate  Discarding 20000    128.2


2025-09-12 01:50:14,495 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-12 01:50:14,495 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-12 01:50:14,495 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-12 01:50:14,495 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-12 01:50:14,976 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-12 01:50:14,976 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-12 01:50:14,977 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-12 01:50:14,978 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-12 01:50:14,978 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-12 01:50:14,978 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-12 01:50:15,264 - test_security - INFO - 根防护功能正常：根桥身份未被劫持
2025-09-12 01:50:15,264 - test_security - ERROR - 根防护功能异常：端口未进入阻塞状态
2025-09-12 01:50:15,265 - test_security - INFO - 测试根防护端口 eth1 恢复功能
2025-09-12 01:50:15,265 - test_security - INFO - 停止发送更优BPDU
2025-09-12 01:50:25,623 - test_security - INFO - 端口恢复后状态: unknown
2025-09-12 01:50:25,623 - test_security - WARNING - 根防护端口未能自动恢复
2025-09-12 01:50:25,875 - RSTPTest - INFO - 测试完成: test_root_guard_functionality (耗时: 54.12秒)
2025-09-12 01:50:25,875 - RSTPTest - INFO - ============================================================

2025-09-12 01:50:25,877 - RSTPTest - INFO - ============================================================
2025-09-12 01:50:25,878 - RSTPTest - INFO - 开始测试: test_loop_guard_functionality
2025-09-12 01:50:25,878 - RSTPTest - INFO - ============================================================
2025-09-12 01:50:25,878 - test_security - INFO - 开始环路防护功能测试
2025-09-12 01:50:25,879 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-12 01:50:25,879 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-12 01:50:25,879 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-12 01:50:25,879 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-12 01:50:25,879 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-12 01:50:25,879 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-12 01:50:25,880 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-12 01:50:25,880 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-12 01:50:25,880 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-12 01:50:26,367 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-12 01:50:26,368 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-12 01:50:26,368 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-12 01:50:26,523 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-12 01:50:27,594 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-12 01:50:27,595 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-12 01:50:27,595 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-12 01:50:27,595 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-12 01:50:27,595 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-12 01:50:28,072 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-12 01:50:28,547 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-12 01:50:28,548 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-12 01:50:28,744 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-12 01:50:28,744 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-12 01:50:28,745 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-12 01:50:28,745 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-12 01:50:28,745 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-12 01:50:28,745 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-12 01:50:28,745 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-12 01:50:28,745 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-12 01:50:29,244 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-12 01:50:33,757 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:50:33,886 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:50:33,886 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-12 01:50:33,886 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-12 01:50:33,887 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:50:33,887 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-12 01:50:35,070 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-12 01:50:36,280 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-12 01:50:36,280 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-12 01:50:36,375 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-12 01:50:36,645 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-12 01:50:36,645 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-12 01:50:36,645 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-12 01:50:36,645 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-12 01:50:36,646 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-12 01:50:36,646 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-12 01:50:36,646 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-12 01:50:36,646 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-12 01:50:37,139 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-12 01:50:41,652 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-12 01:50:41,779 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-12 01:50:41,779 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-12 01:50:41,780 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-12 01:50:41,780 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-12 01:50:41,780 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-12 01:50:42,957 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-12 01:50:44,148 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-12 01:50:44,148 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-12 01:50:44,245 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-12 01:50:44,521 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-12 01:50:44,522 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-12 01:50:44,522 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-12 01:50:49,803 - test_security - WARNING - 启用环路防护失败: 
2025-09-12 01:50:49,803 - test_security - INFO - 在端口 eth1 启用环路防护
2025-09-12 01:50:50,203 - test_security - INFO - 端口 eth1 初始状态: unknown
2025-09-12 01:50:50,203 - test_security - INFO - 模拟单向链路故障
2025-09-12 01:50:50,203 - test_security - INFO - 停止从测试节点发送BPDU
2025-09-12 01:51:10,707 - test_security - INFO - 环路防护触发后端口 eth1 状态: unknown
2025-09-12 01:51:10,707 - test_security - WARNING - 环路防护功能异常：端口未进入阻塞状态
2025-09-12 01:51:10,707 - test_security - INFO - 测试环路防护端口 eth1 恢复功能
2025-09-12 01:51:10,708 - test_security - INFO - 恢复BPDU发送
2025-09-12 01:51:21,203 - test_security - INFO - 端口恢复后状态: unknown
2025-09-12 01:51:21,204 - test_security - WARNING - 环路防护端口未能自动恢复
2025-09-12 01:51:21,422 - test_security - INFO - 环路防护功能测试完成
2025-09-12 01:51:21,423 - RSTPTest - INFO - 测试完成: test_loop_guard_functionality (耗时: 55.54秒)
2025-09-12 01:51:21,423 - RSTPTest - INFO - ============================================================

2025-09-12 01:51:21,423 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-12 01:51:21,423 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-12 01:51:21,424 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-12 01:51:21,860 - __main__ - INFO - ============================================================
2025-09-12 01:51:21,860 - __main__ - INFO - 测试完成，返回码: 1
2025-09-12 01:51:21,860 - __main__ - INFO - ============================================================
