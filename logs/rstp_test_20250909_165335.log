2025-09-09 16:53:35,495 - root - INFO - 日志系统初始化完成，日志文件: logs\rstp_test_20250909_165335.log
2025-09-09 16:53:35,729 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 16:53:35,730 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 16:53:35,933 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 16:53:35,933 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 16:53:36,066 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 16:53:36,066 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 16:53:36,067 - RSTPTest - INFO - ============================================================
2025-09-09 16:53:36,067 - RSTPTest - INFO - 开始测试: test_port_state_transitions
2025-09-09 16:53:36,067 - RSTPTest - INFO - ============================================================
2025-09-09 16:53:36,068 - test_additional_rstp - INFO - 开始端口状态转换测试
2025-09-09 16:53:36,068 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 16:53:36,068 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 16:53:36,069 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 16:53:36,069 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 16:53:36,069 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 16:53:36,069 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 16:53:36,069 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-09 16:53:36,075 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-09 16:53:36,133 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-09 16:53:36,133 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-09 16:53:36,134 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 16:53:36,134 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 16:53:36,635 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 16:53:36,635 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 16:53:37,670 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 16:53:37,671 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 16:53:37,671 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 16:53:37,671 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 16:53:38,123 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 16:53:38,604 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 16:53:38,604 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 16:53:38,707 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 16:53:38,804 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 16:53:38,804 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 16:53:38,805 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 16:53:38,805 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 16:53:38,805 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 16:53:38,805 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 16:53:38,806 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 16:53:38,814 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 16:53:38,814 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 16:53:38,921 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=1, output=
2025-09-09 16:53:38,922 - NetworkTopology - INFO - TestNode1: 尝试启动mstpd服务...
2025-09-09 16:53:41,229 - NetworkTopology - INFO - TestNode1: mstpd启动后状态: code=1
2025-09-09 16:53:41,230 - NetworkTopology - INFO - TestNode1: mstpd启动失败，可能服务不存在或权限不足
2025-09-09 16:53:41,230 - NetworkTopology - INFO - TestNode1: 检查iproute2支持...
2025-09-09 16:53:41,278 - NetworkTopology - INFO - TestNode1: ip命令检查: code=0
2025-09-09 16:53:41,279 - NetworkTopology - INFO - TestNode1: 使用iproute2配置RSTP
2025-09-09 16:53:41,279 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: iproute2
2025-09-09 16:53:41,279 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 16:53:41,280 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 16:53:41,958 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 16:53:43,374 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 16:53:43,374 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 16:53:43,374 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 16:53:43,375 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 16:53:43,813 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 16:53:44,279 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 16:53:44,280 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 16:53:44,508 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 16:53:44,556 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 16:53:44,604 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 16:53:44,604 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 16:53:44,605 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 16:53:44,605 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 16:53:44,605 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 16:53:44,606 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 16:53:44,606 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 16:53:44,614 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 16:53:44,614 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 16:53:54,680 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=1, output=
2025-09-09 16:53:54,681 - NetworkTopology - INFO - TestNode2: 尝试启动mstpd服务...
2025-09-09 16:54:04,782 - SSH_TestNode2 - ERROR - TestNode2: 执行sudo命令失败: 
2025-09-09 16:54:16,809 - NetworkTopology - INFO - TestNode2: mstpd启动后状态: code=1
2025-09-09 16:54:16,809 - NetworkTopology - INFO - TestNode2: mstpd启动失败，可能服务不存在或权限不足
2025-09-09 16:54:16,809 - NetworkTopology - INFO - TestNode2: 检查iproute2支持...
2025-09-09 16:54:16,857 - NetworkTopology - INFO - TestNode2: ip命令检查: code=0
2025-09-09 16:54:16,857 - NetworkTopology - INFO - TestNode2: 使用iproute2配置RSTP
2025-09-09 16:54:16,857 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: iproute2
2025-09-09 16:54:16,857 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 16:54:16,857 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 16:54:47,350 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 16:55:48,401 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 16:55:48,401 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 16:55:48,402 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 16:55:48,402 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 16:56:08,708 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 16:56:27,054 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 16:56:27,054 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 16:56:35,320 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 16:56:35,368 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 16:56:35,416 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 16:56:35,417 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 16:56:35,417 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 16:56:40,964 - test_additional_rstp - INFO - 使用网桥: rstp0
2025-09-09 16:56:40,964 - test_additional_rstp - INFO - === 步骤1: 禁用端口触发状态转换 ===
2025-09-09 16:56:41,219 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 16:56:41,384 - RSTPTest - INFO - 测试完成: test_port_state_transitions (耗时: 185.32秒)
2025-09-09 16:56:41,384 - RSTPTest - INFO - ============================================================

2025-09-09 16:56:41,386 - RSTPTest - INFO - ============================================================
2025-09-09 16:56:41,387 - RSTPTest - INFO - 开始测试: test_bpdu_propagation_and_keepalive
2025-09-09 16:56:41,387 - RSTPTest - INFO - ============================================================
2025-09-09 16:56:41,388 - test_additional_rstp - INFO - 开始BPDU传播和保活机制测试
2025-09-09 16:56:41,388 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 16:56:41,388 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 16:56:41,388 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 16:56:41,389 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 16:56:41,389 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 16:56:41,389 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 16:56:41,389 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 16:56:41,390 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 16:56:41,888 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 16:56:41,889 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 16:56:42,937 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 16:56:42,937 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 16:56:42,937 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 16:56:42,937 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 16:56:43,424 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 16:56:44,042 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 16:56:44,042 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 16:56:44,277 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 16:56:44,361 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 16:56:44,361 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 16:56:44,362 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 16:56:44,362 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 16:56:44,362 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 16:56:44,362 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 16:56:44,363 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 16:56:44,363 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 16:56:45,017 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 16:56:46,511 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 16:56:46,512 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 16:56:46,512 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 16:56:46,512 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 16:56:46,967 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 16:56:47,430 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 16:56:47,431 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 16:56:47,652 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 16:56:47,700 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 16:56:47,749 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 16:56:47,749 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 16:56:47,749 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 16:56:47,750 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 16:56:47,750 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 16:56:47,750 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 16:56:47,750 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 16:56:47,751 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 16:57:01,719 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 16:57:03,152 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 16:57:03,153 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 16:57:03,153 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 16:57:03,153 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 16:57:03,583 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 16:57:04,029 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 16:57:04,029 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 16:57:04,249 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 16:57:04,297 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 16:57:04,345 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 16:57:04,345 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 16:57:04,345 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 16:57:12,771 - test_additional_rstp - INFO - === 步骤1: 验证分布式BPDU生成 ===
2025-09-09 16:57:12,778 - test_additional_rstp - INFO - 检测到网桥接口: ['18:', '26:']
2025-09-09 16:57:12,778 - test_additional_rstp - INFO - 在接口 18: 上捕获BPDU...
2025-09-09 16:57:12,778 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: 18:, 数量: 10)
2025-09-09 16:57:12,857 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-09 16:57:12,858 - test_additional_rstp - WARNING - 在 18: 上未捕获到BPDU
2025-09-09 16:57:12,858 - test_additional_rstp - INFO - 在接口 26: 上捕获BPDU...
2025-09-09 16:57:12,858 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: 26:, 数量: 10)
2025-09-09 16:57:12,921 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-09 16:57:12,921 - test_additional_rstp - WARNING - 在 26: 上未捕获到BPDU
2025-09-09 16:57:12,921 - test_additional_rstp - INFO - 总共捕获 0 个BPDU，来自 0 个不同源
2025-09-09 16:57:12,922 - test_additional_rstp - WARNING - 未检测到BPDU传播
2025-09-09 16:57:12,922 - test_additional_rstp - INFO - BPDU传播和保活机制测试完成
2025-09-09 16:57:12,923 - RSTPTest - INFO - 测试完成: test_bpdu_propagation_and_keepalive (耗时: 31.54秒)
2025-09-09 16:57:12,923 - RSTPTest - INFO - ============================================================

2025-09-09 16:57:12,924 - RSTPTest - INFO - ============================================================
2025-09-09 16:57:12,924 - RSTPTest - INFO - 开始测试: test_disabled_port_exclusion_enhanced
2025-09-09 16:57:12,924 - RSTPTest - INFO - ============================================================
2025-09-09 16:57:12,925 - test_additional_rstp - INFO - 开始增强的禁用端口排除测试
2025-09-09 16:57:12,925 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 16:57:12,925 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 16:57:12,925 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 16:57:12,925 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 16:57:12,925 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 16:57:12,926 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 16:57:12,926 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 16:57:12,926 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 16:57:13,427 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 16:57:13,427 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 16:57:14,464 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 16:57:14,465 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 16:57:14,465 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 16:57:14,465 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 16:57:14,920 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 16:57:15,399 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 16:57:15,400 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 16:57:15,503 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 16:57:15,604 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 16:57:15,605 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 16:57:15,605 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 16:57:15,605 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 16:57:15,605 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 16:57:15,605 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 16:57:15,605 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 16:57:15,606 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 16:57:16,245 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 16:57:17,727 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 16:57:17,727 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 16:57:17,727 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 16:57:17,727 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 16:57:18,172 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 16:57:18,621 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 16:57:18,622 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 16:57:18,839 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 16:57:18,886 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 16:57:18,935 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 16:57:18,936 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 16:57:18,936 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 16:57:18,936 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 16:57:18,936 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 16:57:18,936 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 16:57:18,936 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 16:57:18,937 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 16:57:19,566 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 16:57:20,979 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 16:57:20,980 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 16:57:20,980 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 16:57:20,980 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 16:57:21,424 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 16:57:21,865 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 16:57:21,865 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 16:57:22,079 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 16:57:22,127 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 16:57:22,176 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 16:57:22,176 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 16:57:22,176 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 16:57:27,675 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 16:57:27,832 - test_additional_rstp - INFO - 初始活动端口数量: 0
2025-09-09 16:57:27,833 - RSTPTest - INFO - 测试完成: test_disabled_port_exclusion_enhanced (耗时: 14.91秒)
2025-09-09 16:57:27,833 - RSTPTest - INFO - ============================================================

2025-09-09 16:57:27,834 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 16:57:27,834 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 16:57:27,834 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 16:57:27,974 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 16:57:27,974 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 16:57:28,102 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 16:57:28,102 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 16:57:28,233 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 16:57:28,233 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 16:57:28,233 - RSTPTest - INFO - ============================================================
2025-09-09 16:57:28,233 - RSTPTest - INFO - 开始测试: test_proposal_agreement_handshake
2025-09-09 16:57:28,234 - RSTPTest - INFO - ============================================================
2025-09-09 16:57:28,235 - test_advanced_rstp_mechanisms - INFO - 开始测试RSTP Proposal/Agreement握手机制
2025-09-09 16:57:28,235 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 16:57:28,235 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 16:57:28,235 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 16:57:28,235 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 16:57:28,235 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 16:57:28,236 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 16:57:28,236 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-09 16:57:28,241 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-09 16:57:28,297 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-09 16:57:28,297 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-09 16:57:28,297 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 16:57:28,298 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 16:57:28,843 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 16:57:28,843 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 16:57:29,872 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 16:57:29,873 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 16:57:29,873 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 16:57:29,873 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 16:57:30,331 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 16:57:30,812 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 16:57:30,812 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 16:57:30,916 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 16:57:31,012 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 16:57:31,012 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 16:57:31,012 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 16:57:31,013 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 16:57:31,013 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 16:57:31,013 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 16:57:31,013 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 16:57:31,020 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 16:57:31,020 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 16:57:31,138 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=1, output=
2025-09-09 16:57:31,139 - NetworkTopology - INFO - TestNode1: 尝试启动mstpd服务...
2025-09-09 16:57:33,438 - NetworkTopology - INFO - TestNode1: mstpd启动后状态: code=1
2025-09-09 16:57:33,439 - NetworkTopology - INFO - TestNode1: mstpd启动失败，可能服务不存在或权限不足
2025-09-09 16:57:33,439 - NetworkTopology - INFO - TestNode1: 检查iproute2支持...
2025-09-09 16:57:33,488 - NetworkTopology - INFO - TestNode1: ip命令检查: code=0
2025-09-09 16:57:33,488 - NetworkTopology - INFO - TestNode1: 使用iproute2配置RSTP
2025-09-09 16:57:33,488 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: iproute2
2025-09-09 16:57:33,488 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 16:57:33,489 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 16:57:34,138 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 16:57:35,581 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 16:57:35,582 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 16:57:35,582 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 16:57:35,583 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 16:57:36,016 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 16:57:36,447 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 16:57:36,447 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 16:57:36,655 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 16:57:36,704 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 16:57:36,751 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 16:57:36,752 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 16:57:36,752 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 16:57:36,752 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 16:57:36,752 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 16:57:36,753 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 16:57:36,753 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 16:57:36,760 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 16:57:36,760 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 16:57:36,879 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=1, output=
2025-09-09 16:57:36,879 - NetworkTopology - INFO - TestNode2: 尝试启动mstpd服务...
2025-09-09 16:57:39,197 - NetworkTopology - INFO - TestNode2: mstpd启动后状态: code=1
2025-09-09 16:57:39,197 - NetworkTopology - INFO - TestNode2: mstpd启动失败，可能服务不存在或权限不足
2025-09-09 16:57:39,198 - NetworkTopology - INFO - TestNode2: 检查iproute2支持...
2025-09-09 16:57:39,244 - NetworkTopology - INFO - TestNode2: ip命令检查: code=0
2025-09-09 16:57:39,245 - NetworkTopology - INFO - TestNode2: 使用iproute2配置RSTP
2025-09-09 16:57:39,245 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: iproute2
2025-09-09 16:57:39,245 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 16:57:39,245 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 16:57:39,919 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 16:57:41,367 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 16:57:41,367 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 16:57:41,367 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 16:57:41,367 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 16:57:41,799 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 16:57:42,249 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 16:57:42,249 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 16:57:42,467 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 16:57:42,515 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 16:57:42,562 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 16:57:42,562 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 16:57:42,563 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 16:57:47,563 - test_advanced_rstp_mechanisms - INFO - 开始在eth0上捕获BPDU
2025-09-09 16:57:47,564 - test_advanced_rstp_mechanisms - INFO - 触发拓扑变更...
2025-09-09 16:57:53,929 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: eth0, 数量: 20)
2025-09-09 16:57:53,969 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-09 16:57:53,969 - test_advanced_rstp_mechanisms - INFO - 捕获到0个BPDU数据包
2025-09-09 16:57:53,970 - test_advanced_rstp_mechanisms - WARNING - 未能捕获到完整的BPDU握手序列，可能是环境限制
2025-09-09 16:57:53,970 - test_advanced_rstp_mechanisms - INFO - 改为验证网络收敛状态...
2025-09-09 16:57:54,246 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 16:57:54,404 - test_advanced_rstp_mechanisms - INFO - ✓ 网络收敛正常，存在根端口
2025-09-09 16:57:56,405 - test_advanced_rstp_mechanisms - INFO - RSTP Proposal/Agreement握手机制测试通过
2025-09-09 16:57:56,406 - RSTPTest - INFO - 测试完成: test_proposal_agreement_handshake (耗时: 28.17秒)
2025-09-09 16:57:56,406 - RSTPTest - INFO - ============================================================

2025-09-09 16:57:56,407 - RSTPTest - INFO - ============================================================
2025-09-09 16:57:56,407 - RSTPTest - INFO - 开始测试: test_tcn_topology_change_notification
2025-09-09 16:57:56,408 - RSTPTest - INFO - ============================================================
2025-09-09 16:57:56,408 - test_advanced_rstp_mechanisms - INFO - 开始测试TCN拓扑变更通知机制
2025-09-09 16:57:56,408 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 16:57:56,409 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 16:57:56,409 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 16:57:56,409 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 16:57:56,410 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 16:57:56,410 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 16:57:56,410 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 16:57:56,411 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 16:57:56,882 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 16:57:56,882 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 16:57:57,906 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 16:57:57,906 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 16:57:57,906 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 16:57:57,907 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 16:57:58,363 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 16:57:58,842 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 16:57:58,843 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 16:57:58,947 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 16:57:59,043 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 16:57:59,044 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 16:57:59,044 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 16:57:59,044 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 16:57:59,045 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 16:57:59,045 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 16:57:59,045 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 16:57:59,045 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 16:57:59,721 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 16:58:01,179 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 16:58:01,179 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 16:58:01,179 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 16:58:01,179 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 16:58:01,624 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 16:58:02,089 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 16:58:02,089 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 16:58:02,320 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 16:58:02,369 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 16:58:02,418 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 16:58:02,419 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 16:58:02,419 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 16:58:02,419 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 16:58:02,419 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 16:58:02,419 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 16:58:02,420 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 16:58:02,420 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 16:58:03,072 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 16:58:04,461 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 16:58:04,461 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 16:58:04,462 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 16:58:04,462 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 16:58:04,900 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 16:58:05,349 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 16:58:05,349 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 16:58:05,562 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 16:58:05,610 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 16:58:05,657 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 16:58:05,657 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 16:58:05,658 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 16:58:15,913 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-09 16:58:16,067 - test_advanced_rstp_mechanisms - INFO - 初始网桥端口数量: 3
2025-09-09 16:58:16,067 - test_advanced_rstp_mechanisms - INFO - 触发拓扑变更：临时禁用/启用端口
2025-09-09 16:58:16,218 - test_advanced_rstp_mechanisms - INFO - 初始TC计数: 0
2025-09-09 16:58:24,498 - test_advanced_rstp_mechanisms - INFO - 变更后TC计数: 0
2025-09-09 16:58:24,498 - test_advanced_rstp_mechanisms - INFO - 拓扑变更可能未被检测到，这可能是正常的（取决于实现）
2025-09-09 16:58:24,797 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-09 16:58:24,951 - test_advanced_rstp_mechanisms - INFO - 最终网桥端口数量: 3
2025-09-09 16:58:25,106 - test_advanced_rstp_mechanisms - INFO - 当前MAC地址表老化时间: 300秒
2025-09-09 16:58:25,106 - test_advanced_rstp_mechanisms - WARNING - MAC地址表老化时间(300秒)未缩短，可能是实现差异
2025-09-09 16:58:25,107 - test_advanced_rstp_mechanisms - INFO - TCN拓扑变更通知机制测试通过 - 使用安全的端口状态变更方式
2025-09-09 16:58:25,108 - RSTPTest - INFO - 测试完成: test_tcn_topology_change_notification (耗时: 28.70秒)
2025-09-09 16:58:25,108 - RSTPTest - INFO - ============================================================

2025-09-09 16:58:25,110 - RSTPTest - INFO - ============================================================
2025-09-09 16:58:25,110 - RSTPTest - INFO - 开始测试: test_edge_port_behavior
2025-09-09 16:58:25,110 - RSTPTest - INFO - ============================================================
2025-09-09 16:58:25,110 - test_advanced_rstp_mechanisms - INFO - 开始测试边缘端口行为
2025-09-09 16:58:25,111 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 16:58:25,111 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 16:58:25,111 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 16:58:25,111 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 16:58:25,111 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 16:58:25,112 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 16:58:25,112 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 16:58:25,112 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 16:58:25,616 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 16:58:25,616 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 16:58:26,666 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 16:58:26,666 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 16:58:26,666 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 16:58:26,666 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 16:58:27,123 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 16:58:27,603 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 16:58:27,603 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 16:58:27,706 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 16:58:27,803 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 16:58:27,803 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 16:58:27,804 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 16:58:27,804 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 16:58:27,804 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 16:58:27,804 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 16:58:27,805 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 16:58:27,805 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 16:58:28,457 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 16:58:29,916 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 16:58:29,916 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 16:58:29,916 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 16:58:29,917 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 16:58:30,362 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 16:58:30,800 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 16:58:30,800 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 16:58:31,027 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 16:58:31,074 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 16:58:31,122 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 16:58:31,122 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 16:58:31,123 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 16:58:31,123 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 16:58:31,123 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 16:58:31,123 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 16:58:31,124 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 16:58:31,124 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 16:58:31,763 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 16:58:33,177 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 16:58:33,178 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 16:58:33,178 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 16:58:33,178 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 16:58:33,648 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 16:58:34,094 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 16:58:34,095 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 16:58:34,302 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 16:58:34,350 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 16:58:34,398 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 16:58:34,399 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 16:58:34,399 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 16:58:40,913 - test_advanced_rstp_mechanisms - INFO - 可用端口: ['enp1s0']
2025-09-09 16:58:40,914 - test_advanced_rstp_mechanisms - INFO - 选择端口enp1s0作为边缘端口测试
2025-09-09 16:58:41,022 - test_advanced_rstp_mechanisms - INFO - 测试边缘端口立即转发特性
2025-09-09 16:58:43,910 - test_advanced_rstp_mechanisms - INFO - 边缘端口状态转换时间: 2.74秒
2025-09-09 16:58:43,911 - test_advanced_rstp_mechanisms - INFO - ✓ 边缘端口转换时间合理
2025-09-09 16:58:44,022 - test_advanced_rstp_mechanisms - INFO - ✓ 边缘端口状态变化未产生TCN
2025-09-09 16:58:44,023 - test_advanced_rstp_mechanisms - INFO - 测试边缘端口收到BPDU后的行为
2025-09-09 16:58:44,178 - test_advanced_rstp_mechanisms - INFO - 边缘端口状态: 1
1
normal
2025-09-09 16:58:44,179 - test_advanced_rstp_mechanisms - INFO - 边缘端口行为测试通过
2025-09-09 16:58:44,180 - RSTPTest - INFO - 测试完成: test_edge_port_behavior (耗时: 19.07秒)
2025-09-09 16:58:44,180 - RSTPTest - INFO - ============================================================

2025-09-09 16:58:44,181 - RSTPTest - INFO - ============================================================
2025-09-09 16:58:44,182 - RSTPTest - INFO - 开始测试: test_shared_vs_point_to_point_links
2025-09-09 16:58:44,182 - RSTPTest - INFO - ============================================================
2025-09-09 16:58:44,182 - test_advanced_rstp_mechanisms - INFO - 开始测试不同链路类型的行为差异
2025-09-09 16:58:44,183 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 16:58:44,183 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 16:58:44,183 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 16:58:44,183 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 16:58:44,183 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 16:58:44,183 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 16:58:44,184 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 16:58:44,184 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 16:58:44,705 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 16:58:44,706 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 16:58:45,767 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 16:58:45,767 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 16:58:45,767 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 16:58:45,767 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 16:58:46,227 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 16:58:46,702 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 16:58:46,702 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 16:58:46,807 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 16:58:46,906 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 16:58:46,907 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 16:58:46,907 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 16:58:46,907 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 16:58:46,908 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 16:58:46,908 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 16:58:46,908 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 16:58:46,908 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 16:58:47,533 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 16:58:49,168 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 16:58:49,169 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 16:58:49,169 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 16:58:49,169 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 16:58:49,622 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 16:58:50,059 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 16:58:50,060 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 16:58:50,254 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 16:58:50,301 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 16:58:50,349 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 16:58:50,349 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 16:58:50,349 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 16:58:50,349 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 16:58:50,350 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 16:58:50,350 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 16:58:50,350 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 16:58:50,350 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 16:58:50,983 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 16:58:52,397 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 16:58:52,398 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 16:58:52,398 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 16:58:52,398 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 16:58:52,836 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 16:58:53,280 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 16:58:53,280 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 16:58:53,507 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 16:58:53,555 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 16:58:53,603 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 16:58:53,603 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 16:58:53,604 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 16:58:58,720 - test_advanced_rstp_mechanisms - INFO - 检测到的链路类型: {}
2025-09-09 16:58:58,720 - test_advanced_rstp_mechanisms - INFO - 测试点对点链路收敛性能
2025-09-09 16:59:02,693 - test_advanced_rstp_mechanisms - INFO - 收敛时间: 3.97秒
2025-09-09 16:59:02,693 - test_advanced_rstp_mechanisms - INFO - 验证链路类型识别
2025-09-09 16:59:02,694 - test_advanced_rstp_mechanisms - INFO - 不同链路类型行为差异测试通过
2025-09-09 16:59:02,695 - RSTPTest - INFO - 测试完成: test_shared_vs_point_to_point_links (耗时: 18.51秒)
2025-09-09 16:59:02,695 - RSTPTest - INFO - ============================================================

2025-09-09 16:59:02,696 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 16:59:02,696 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 16:59:02,696 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 16:59:02,832 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 16:59:02,832 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 16:59:02,962 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 16:59:02,963 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 16:59:03,079 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 16:59:03,079 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 16:59:03,079 - RSTPTest - INFO - ============================================================
2025-09-09 16:59:03,080 - RSTPTest - INFO - 开始测试: test_backup_port_concept_verification
2025-09-09 16:59:03,080 - RSTPTest - INFO - ============================================================
2025-09-09 16:59:03,081 - test_backup_port_simulation - INFO - 开始备份端口概念验证测试
2025-09-09 16:59:03,081 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 16:59:03,081 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 16:59:03,081 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 16:59:03,082 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 16:59:03,082 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 16:59:03,082 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 16:59:03,082 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-09 16:59:03,087 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-09 16:59:03,143 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-09 16:59:03,144 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-09 16:59:03,144 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 16:59:03,144 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 16:59:03,672 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 16:59:03,673 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 16:59:04,714 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 16:59:04,714 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 16:59:04,714 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 16:59:04,715 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 16:59:05,173 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 16:59:05,656 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 16:59:05,657 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 16:59:05,758 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 16:59:05,854 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 16:59:05,854 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 16:59:05,855 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 16:59:05,855 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 16:59:05,855 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 16:59:05,855 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 16:59:05,856 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 16:59:05,863 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 16:59:05,863 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 16:59:06,003 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=1, output=
2025-09-09 16:59:06,003 - NetworkTopology - INFO - TestNode1: 尝试启动mstpd服务...
2025-09-09 16:59:08,351 - NetworkTopology - INFO - TestNode1: mstpd启动后状态: code=1
2025-09-09 16:59:08,351 - NetworkTopology - INFO - TestNode1: mstpd启动失败，可能服务不存在或权限不足
2025-09-09 16:59:08,351 - NetworkTopology - INFO - TestNode1: 检查iproute2支持...
2025-09-09 16:59:08,398 - NetworkTopology - INFO - TestNode1: ip命令检查: code=0
2025-09-09 16:59:08,399 - NetworkTopology - INFO - TestNode1: 使用iproute2配置RSTP
2025-09-09 16:59:08,399 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: iproute2
2025-09-09 16:59:08,399 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 16:59:08,399 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 16:59:09,071 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 16:59:10,498 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 16:59:10,499 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 16:59:10,499 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 16:59:10,499 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 16:59:10,945 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 16:59:11,389 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 16:59:11,389 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 16:59:11,599 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 16:59:11,647 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 16:59:11,695 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 16:59:11,696 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 16:59:11,696 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 16:59:11,696 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 16:59:11,696 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 16:59:11,696 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 16:59:11,696 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 16:59:11,703 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 16:59:11,703 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 16:59:11,846 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=1, output=
2025-09-09 16:59:11,846 - NetworkTopology - INFO - TestNode2: 尝试启动mstpd服务...
2025-09-09 16:59:14,146 - NetworkTopology - INFO - TestNode2: mstpd启动后状态: code=1
2025-09-09 16:59:14,146 - NetworkTopology - INFO - TestNode2: mstpd启动失败，可能服务不存在或权限不足
2025-09-09 16:59:14,146 - NetworkTopology - INFO - TestNode2: 检查iproute2支持...
2025-09-09 16:59:14,195 - NetworkTopology - INFO - TestNode2: ip命令检查: code=0
2025-09-09 16:59:14,195 - NetworkTopology - INFO - TestNode2: 使用iproute2配置RSTP
2025-09-09 16:59:14,196 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: iproute2
2025-09-09 16:59:14,196 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 16:59:14,196 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 16:59:14,865 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 16:59:16,294 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 16:59:16,295 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 16:59:16,295 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 16:59:16,295 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 16:59:16,738 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 16:59:17,199 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 16:59:17,200 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 16:59:17,420 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 16:59:17,467 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 16:59:17,515 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 16:59:17,516 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 16:59:17,516 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 16:59:27,776 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 16:59:27,930 - test_backup_port_simulation - INFO - === 当前端口状态 ===
2025-09-09 16:59:27,930 - test_backup_port_simulation - INFO - 端口 eth0: 角色=root, 状态=disabled
2025-09-09 16:59:27,930 - test_backup_port_simulation - INFO - 端口 eth2: 角色=unknown, 状态=disabled
2025-09-09 16:59:27,930 - test_backup_port_simulation - INFO - 端口 eth3: 角色=unknown, 状态=disabled
2025-09-09 16:59:27,931 - test_backup_port_simulation - INFO - ⚠ 在当前点对点拓扑中未检测到备份端口（符合预期）
2025-09-09 16:59:27,931 - test_backup_port_simulation - INFO - 备份端口通常出现在共享介质网段中，当前测试环境为点对点链路
2025-09-09 16:59:27,931 - test_backup_port_simulation - INFO - 端口角色分布: {}
2025-09-09 16:59:27,931 - test_backup_port_simulation - INFO - === RSTP端口角色覆盖分析 ===
2025-09-09 16:59:27,931 - test_backup_port_simulation - INFO - - root端口: 未检测到
2025-09-09 16:59:27,931 - test_backup_port_simulation - INFO - - designated端口: 未检测到
2025-09-09 16:59:27,932 - test_backup_port_simulation - INFO - - alternate端口: 未检测到
2025-09-09 16:59:27,932 - test_backup_port_simulation - INFO - - backup端口: 未检测到（在点对点拓扑中为正常现象）
2025-09-09 16:59:27,932 - test_backup_port_simulation - INFO - 备份端口概念验证测试完成
2025-09-09 16:59:27,933 - RSTPTest - INFO - 测试完成: test_backup_port_concept_verification (耗时: 24.85秒)
2025-09-09 16:59:27,933 - RSTPTest - INFO - ============================================================

2025-09-09 16:59:27,934 - RSTPTest - INFO - ============================================================
2025-09-09 16:59:27,934 - RSTPTest - INFO - 开始测试: test_shared_medium_simulation_attempt
2025-09-09 16:59:27,935 - RSTPTest - INFO - ============================================================
2025-09-09 16:59:27,935 - test_backup_port_simulation - INFO - 开始共享介质模拟尝试
2025-09-09 16:59:27,935 - test_backup_port_simulation - INFO - === 尝试创建共享介质模拟场景 ===
2025-09-09 16:59:27,935 - test_backup_port_simulation - INFO - 创建中心交换机模拟共享介质...
2025-09-09 16:59:27,935 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 16:59:27,936 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 16:59:27,936 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 16:59:27,936 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 16:59:27,936 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 16:59:27,936 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 16:59:27,937 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 16:59:27,937 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 16:59:28,464 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 16:59:28,465 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 16:59:29,498 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 16:59:29,498 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 16:59:29,499 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 16:59:29,499 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 16:59:29,950 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 16:59:30,434 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 16:59:30,434 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 16:59:30,538 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 16:59:30,633 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 16:59:30,634 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 16:59:30,634 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 16:59:30,634 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 16:59:30,634 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 16:59:30,635 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 16:59:30,635 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 16:59:30,635 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 16:59:31,279 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 16:59:32,693 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 16:59:32,693 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 16:59:32,693 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 16:59:32,694 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 16:59:33,145 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 16:59:33,598 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 16:59:33,598 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 16:59:33,823 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 16:59:33,871 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 16:59:33,919 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 16:59:33,919 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 16:59:33,919 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 16:59:33,920 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 16:59:33,920 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 16:59:33,920 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 16:59:33,920 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 16:59:33,920 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 16:59:34,555 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 16:59:35,994 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 16:59:35,994 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 16:59:35,994 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 16:59:35,995 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 16:59:36,436 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 16:59:36,884 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 16:59:36,884 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 16:59:37,126 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 16:59:37,174 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 16:59:37,223 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 16:59:37,223 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 16:59:37,224 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 16:59:47,480 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 16:59:47,637 - test_backup_port_simulation - INFO - === 分析当前端口配置 ===
2025-09-09 16:59:47,638 - test_backup_port_simulation - INFO - ⚠ 未检测到备份端口
2025-09-09 16:59:47,638 - test_backup_port_simulation - INFO - 这在当前测试环境中是正常的，因为缺乏真正的共享介质
2025-09-09 16:59:47,638 - test_backup_port_simulation - INFO - 共享介质模拟尝试完成
2025-09-09 16:59:47,639 - RSTPTest - INFO - 测试完成: test_shared_medium_simulation_attempt (耗时: 19.70秒)
2025-09-09 16:59:47,639 - RSTPTest - INFO - ============================================================

2025-09-09 16:59:47,641 - RSTPTest - INFO - ============================================================
2025-09-09 16:59:47,641 - RSTPTest - INFO - 开始测试: test_backup_port_documentation_verification
2025-09-09 16:59:47,641 - RSTPTest - INFO - ============================================================
2025-09-09 16:59:47,642 - test_backup_port_simulation - INFO - 开始备份端口文档验证
2025-09-09 16:59:47,642 - test_backup_port_simulation - INFO - ✓ PortRole.BACKUP 存在
2025-09-09 16:59:47,643 - test_backup_port_simulation - INFO - === 备份端口理论特性验证 ===
2025-09-09 16:59:47,643 - test_backup_port_simulation - INFO - purpose: 为共享介质网段提供冗余
2025-09-09 16:59:47,643 - test_backup_port_simulation - INFO - difference_from_alternate: 备份端口是同一交换机上指定端口的备份，而备用端口是不同交换机提供的路径
2025-09-09 16:59:47,643 - test_backup_port_simulation - INFO - state: Discarding
2025-09-09 16:59:47,643 - test_backup_port_simulation - INFO - scenario: 出现在连接到集线器或共享介质的场景中
2025-09-09 16:59:47,644 - test_backup_port_simulation - INFO - fast_transition: 当对应的指定端口失效时，可以快速转换为指定端口
2025-09-09 16:59:47,644 - test_backup_port_simulation - INFO - === 端口角色对比 ===
2025-09-09 16:59:47,644 - test_backup_port_simulation - INFO - root: 连接到根桥的最佳路径
2025-09-09 16:59:47,645 - test_backup_port_simulation - INFO - designated: 为网段提供转发服务
2025-09-09 16:59:47,645 - test_backup_port_simulation - INFO - alternate: 提供到根桥的备用路径（来自其他交换机）
2025-09-09 16:59:47,645 - test_backup_port_simulation - INFO - backup: 同一交换机上指定端口的备份（共享介质场景）
2025-09-09 16:59:47,645 - test_backup_port_simulation - INFO - === 测试覆盖率分析 ===
2025-09-09 16:59:47,645 - test_backup_port_simulation - INFO - 已覆盖: Root Port, Designated Port, Alternate Port, Disabled Port
2025-09-09 16:59:47,646 - test_backup_port_simulation - INFO - 部分覆盖: Backup Port (概念验证)
2025-09-09 16:59:47,646 - test_backup_port_simulation - INFO - 覆盖限制: 测试框架无法创建真正的共享介质拓扑
2025-09-09 16:59:47,646 - test_backup_port_simulation - INFO - 建议: 在实际部署环境中使用集线器或配置交换机共享模式进行完整测试
2025-09-09 16:59:47,646 - test_backup_port_simulation - INFO - 备份端口文档验证完成
2025-09-09 16:59:47,647 - RSTPTest - INFO - 测试完成: test_backup_port_documentation_verification (耗时: 0.01秒)
2025-09-09 16:59:47,648 - RSTPTest - INFO - ============================================================

2025-09-09 16:59:47,648 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 16:59:47,649 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 16:59:47,649 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 16:59:47,787 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 16:59:47,787 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 16:59:47,924 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 16:59:47,924 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 16:59:48,045 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 16:59:48,045 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 16:59:48,046 - RSTPTest - INFO - ============================================================
2025-09-09 16:59:48,046 - RSTPTest - INFO - 开始测试: test_direct_link_failure
2025-09-09 16:59:48,046 - RSTPTest - INFO - ============================================================
2025-09-09 16:59:48,047 - test_convergence - INFO - 开始直接链路故障测试
2025-09-09 16:59:48,048 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 16:59:48,048 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 16:59:48,048 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 16:59:48,048 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 16:59:48,049 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 16:59:48,049 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 16:59:48,049 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-09 16:59:48,055 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-09 16:59:48,110 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-09 16:59:48,111 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-09 16:59:48,111 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 16:59:48,111 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 16:59:48,632 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 16:59:48,633 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 16:59:49,685 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 16:59:49,685 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 16:59:49,685 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 16:59:49,686 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 16:59:50,145 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 16:59:50,626 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 16:59:50,626 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 16:59:50,729 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 16:59:50,825 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 16:59:50,825 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 16:59:50,826 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 16:59:50,826 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 16:59:50,826 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 16:59:50,826 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 16:59:50,826 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 16:59:50,833 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 16:59:50,833 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 16:59:50,964 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=1, output=
2025-09-09 16:59:50,964 - NetworkTopology - INFO - TestNode1: 尝试启动mstpd服务...
2025-09-09 16:59:53,264 - NetworkTopology - INFO - TestNode1: mstpd启动后状态: code=1
2025-09-09 16:59:53,265 - NetworkTopology - INFO - TestNode1: mstpd启动失败，可能服务不存在或权限不足
2025-09-09 16:59:53,265 - NetworkTopology - INFO - TestNode1: 检查iproute2支持...
2025-09-09 16:59:53,314 - NetworkTopology - INFO - TestNode1: ip命令检查: code=0
2025-09-09 16:59:53,314 - NetworkTopology - INFO - TestNode1: 使用iproute2配置RSTP
2025-09-09 16:59:53,314 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: iproute2
2025-09-09 16:59:53,314 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 16:59:53,315 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 16:59:53,988 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 16:59:55,394 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 16:59:55,394 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 16:59:55,394 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 16:59:55,395 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 16:59:55,849 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 16:59:56,284 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 16:59:56,285 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 16:59:56,495 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 16:59:56,543 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 16:59:56,592 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 16:59:56,593 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 16:59:56,593 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 16:59:56,593 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 16:59:56,593 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 16:59:56,594 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 16:59:56,594 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 16:59:56,601 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 16:59:56,601 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 16:59:56,734 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=1, output=
2025-09-09 16:59:56,734 - NetworkTopology - INFO - TestNode2: 尝试启动mstpd服务...
2025-09-09 16:59:59,054 - NetworkTopology - INFO - TestNode2: mstpd启动后状态: code=1
2025-09-09 16:59:59,055 - NetworkTopology - INFO - TestNode2: mstpd启动失败，可能服务不存在或权限不足
2025-09-09 16:59:59,055 - NetworkTopology - INFO - TestNode2: 检查iproute2支持...
2025-09-09 16:59:59,105 - NetworkTopology - INFO - TestNode2: ip命令检查: code=0
2025-09-09 16:59:59,105 - NetworkTopology - INFO - TestNode2: 使用iproute2配置RSTP
2025-09-09 16:59:59,106 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: iproute2
2025-09-09 16:59:59,106 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 16:59:59,106 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 16:59:59,797 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 17:00:01,211 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 17:00:01,212 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 17:00:01,212 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 17:00:01,212 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 17:00:01,648 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 17:00:02,108 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 17:00:02,108 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 17:00:02,315 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 17:00:02,363 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 17:00:02,411 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 17:00:02,411 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 17:00:02,411 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 17:00:02,836 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 17:00:03,091 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:00:04,140 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.30秒
2025-09-09 17:00:04,141 - test_convergence - INFO - 初始收敛时间: 1.30秒
2025-09-09 17:00:04,400 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:00:04,557 - test_convergence - INFO - DUT的Root Port: eth2
2025-09-09 17:00:04,558 - FaultInjector_DUT - INFO - 断开链路: eth2
2025-09-09 17:00:04,820 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth2 (code=1)，将在逻辑上标记为已断开
2025-09-09 17:00:04,820 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 17:00:05,111 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:00:06,104 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.28秒
2025-09-09 17:00:06,359 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:00:06,826 - RSTPTest - INFO - 测试完成: test_direct_link_failure (耗时: 18.78秒)
2025-09-09 17:00:06,826 - RSTPTest - INFO - ============================================================

2025-09-09 17:00:06,863 - RSTPTest - INFO - ============================================================
2025-09-09 17:00:06,864 - RSTPTest - INFO - 开始测试: test_multiple_link_failures
2025-09-09 17:00:06,864 - RSTPTest - INFO - ============================================================
2025-09-09 17:00:06,864 - test_convergence - INFO - 开始多重链路故障测试
2025-09-09 17:00:06,865 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 17:00:06,865 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 17:00:06,865 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 17:00:06,865 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 17:00:06,865 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 17:00:06,865 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 17:00:06,865 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 17:00:06,866 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 17:00:07,360 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 17:00:07,360 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 17:00:08,401 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 17:00:08,401 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 17:00:08,402 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 17:00:08,402 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 17:00:08,861 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 17:00:09,341 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 17:00:09,342 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 17:00:09,445 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 17:00:09,541 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 17:00:09,542 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 17:00:09,542 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 17:00:09,542 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 17:00:09,542 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 17:00:09,542 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 17:00:09,543 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 17:00:09,543 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 17:00:10,176 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 17:00:11,990 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 17:00:11,990 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 17:00:11,991 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 17:00:11,991 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 17:00:12,452 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 17:00:12,923 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 17:00:12,924 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 17:00:13,156 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 17:00:13,210 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 17:00:13,266 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 17:00:13,266 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 17:00:13,266 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 17:00:13,267 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 17:00:13,267 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 17:00:13,267 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 17:00:13,267 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 17:00:13,267 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 17:00:13,921 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 17:00:15,396 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 17:00:15,396 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 17:00:15,396 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 17:00:15,396 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 17:00:15,836 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 17:00:16,281 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 17:00:16,281 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 17:00:16,499 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 17:00:16,548 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 17:00:16,595 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 17:00:16,596 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 17:00:16,596 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 17:00:16,596 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 17:00:16,848 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:00:17,824 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.23秒
2025-09-09 17:00:17,824 - test_convergence - INFO - 注入故障: eth0
2025-09-09 17:00:17,824 - FaultInjector_DUT - INFO - 断开链路: eth0
2025-09-09 17:00:18,044 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth0 (code=1)，将在逻辑上标记为已断开
2025-09-09 17:00:18,044 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 17:00:18,344 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:00:19,261 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.22秒
2025-09-09 17:00:19,262 - test_convergence - INFO - eth0故障收敛时间: 1.22秒
2025-09-09 17:00:21,262 - test_convergence - INFO - 注入故障: eth2
2025-09-09 17:00:21,263 - FaultInjector_DUT - INFO - 断开链路: eth2
2025-09-09 17:00:21,479 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth2 (code=1)，将在逻辑上标记为已断开
2025-09-09 17:00:21,480 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 17:00:21,771 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:00:22,703 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.22秒
2025-09-09 17:00:22,703 - test_convergence - INFO - eth2故障收敛时间: 1.22秒
2025-09-09 17:00:24,704 - FaultInjector_DUT - INFO - 恢复链路: eth0
2025-09-09 17:00:24,924 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth0 (code=1)，将在逻辑上标记为已恢复
2025-09-09 17:00:24,925 - FaultInjector_DUT - INFO - 恢复链路: eth2
2025-09-09 17:00:25,187 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth2 (code=1)，将在逻辑上标记为已恢复
2025-09-09 17:00:25,188 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 17:00:25,489 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:00:26,395 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.21秒
2025-09-09 17:00:26,395 - test_convergence - INFO - 最终恢复收敛时间: 1.21秒
2025-09-09 17:00:26,395 - test_convergence - INFO - 多重链路故障测试通过
2025-09-09 17:00:26,396 - RSTPTest - INFO - 测试完成: test_multiple_link_failures (耗时: 19.53秒)
2025-09-09 17:00:26,396 - RSTPTest - INFO - ============================================================

2025-09-09 17:00:26,397 - RSTPTest - INFO - ============================================================
2025-09-09 17:00:26,398 - RSTPTest - INFO - 开始测试: test_convergence_with_traffic
2025-09-09 17:00:26,398 - RSTPTest - INFO - ============================================================
2025-09-09 17:00:26,398 - test_convergence - INFO - 开始带流量的收敛测试
2025-09-09 17:00:26,398 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 17:00:26,399 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 17:00:26,399 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 17:00:26,399 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 17:00:26,399 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 17:00:26,399 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 17:00:26,400 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 17:00:26,400 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 17:00:26,864 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 17:00:26,864 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 17:00:27,912 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 17:00:27,913 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 17:00:27,913 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 17:00:27,913 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 17:00:28,373 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 17:00:28,853 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 17:00:28,853 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 17:00:28,957 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 17:00:29,053 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 17:00:29,053 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 17:00:29,053 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 17:00:29,053 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 17:00:29,053 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 17:00:29,054 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 17:00:29,054 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 17:00:29,054 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 17:00:29,753 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 17:00:31,192 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 17:00:31,193 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 17:00:31,193 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 17:00:31,193 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 17:00:31,638 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 17:00:32,065 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 17:00:32,065 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 17:00:32,279 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 17:00:32,326 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 17:00:32,375 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 17:00:32,376 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 17:00:32,376 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 17:00:32,376 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 17:00:32,377 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 17:00:32,377 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 17:00:32,377 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 17:00:32,377 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 17:00:33,025 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 17:00:34,456 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 17:00:34,456 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 17:00:34,457 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 17:00:34,457 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 17:00:34,884 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 17:00:35,325 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 17:00:35,326 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 17:00:35,547 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 17:00:35,598 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 17:00:35,646 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 17:00:35,646 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 17:00:35,646 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 17:00:41,754 - TrafficGenerator - INFO - 启动iperf3服务器: 192.168.184.131:5201
2025-09-09 17:00:43,828 - TrafficGenerator - ERROR - iperf3服务器启动失败
2025-09-09 17:00:46,756 - TrafficGenerator - INFO - 启动iperf3客户端: -> 192.168.184.131:5201
2025-09-09 17:00:46,756 - TrafficGenerator - INFO - iperf3客户端已启动 (udp, 100M)
2025-09-09 17:00:51,758 - FaultInjector_DUT - INFO - 断开链路: eth0
2025-09-09 17:00:51,979 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth0 (code=1)，将在逻辑上标记为已断开
2025-09-09 17:01:01,980 - test_convergence - INFO - 丢包数: 0
2025-09-09 17:01:01,980 - test_convergence - INFO - 估计中断时间: 0.000秒
2025-09-09 17:01:01,980 - TrafficGenerator - INFO - 停止流量生成
2025-09-09 17:01:04,037 - test_convergence - INFO - 带流量的收敛测试通过
2025-09-09 17:01:04,038 - RSTPTest - INFO - 测试完成: test_convergence_with_traffic (耗时: 37.64秒)
2025-09-09 17:01:04,039 - RSTPTest - INFO - ============================================================

2025-09-09 17:01:04,039 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 17:01:04,040 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 17:01:04,040 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 17:01:04,178 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 17:01:04,178 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 17:01:04,309 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 17:01:04,309 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 17:01:04,435 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 17:01:04,435 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 17:01:04,436 - RSTPTest - INFO - ============================================================
2025-09-09 17:01:04,436 - RSTPTest - INFO - 开始测试: test_backup_port_simulation
2025-09-09 17:01:04,436 - RSTPTest - INFO - ============================================================
2025-09-09 17:01:04,437 - test_enhanced_rstp_coverage - INFO - 开始备份端口模拟测试
2025-09-09 17:01:04,437 - test_enhanced_rstp_coverage - INFO - 创建模拟共享网段拓扑
2025-09-09 17:01:04,917 - test_enhanced_rstp_coverage - INFO - ✓ 创建连接: rstp0:dut_port1 <-> shared_segment:shared_port1
2025-09-09 17:01:05,277 - test_enhanced_rstp_coverage - INFO - ✓ 创建连接: rstp0:dut_port2 <-> shared_segment:shared_port2
2025-09-09 17:01:06,029 - test_enhanced_rstp_coverage - INFO - ✓ 创建远程交换机: remote_switch
2025-09-09 17:01:06,029 - test_enhanced_rstp_coverage - INFO - 等待RSTP收敛...
2025-09-09 17:01:21,287 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:01:21,444 - test_enhanced_rstp_coverage - INFO - DUT桥信息: BridgeInfo(bridge_id='', root_id='', root_port='eth0', root_path_cost=0, protocol_version='unknown', hello_time=0, forward_delay=0, max_age=0, topology_changes=0, ports={'eth0': PortInfo(name='eth0', role=<PortRole.ROOT: 'root'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth2': PortInfo(name='eth2', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth3': PortInfo(name='eth3', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')})
2025-09-09 17:01:21,444 - test_enhanced_rstp_coverage - INFO - 清理测试环境
2025-09-09 17:01:22,160 - test_enhanced_rstp_coverage - INFO - ✓ 备份端口模拟测试完成
2025-09-09 17:01:22,161 - RSTPTest - INFO - 测试完成: test_backup_port_simulation (耗时: 17.72秒)
2025-09-09 17:01:22,161 - RSTPTest - INFO - ============================================================

2025-09-09 17:01:22,163 - RSTPTest - INFO - ============================================================
2025-09-09 17:01:22,163 - RSTPTest - INFO - 开始测试: test_comprehensive_port_state_transitions
2025-09-09 17:01:22,163 - RSTPTest - INFO - ============================================================
2025-09-09 17:01:22,164 - test_enhanced_rstp_coverage - INFO - 开始全面端口状态转换测试
2025-09-09 17:01:22,164 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 17:01:22,165 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 17:01:22,165 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 17:01:22,165 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 17:01:22,165 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 17:01:22,165 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 17:01:22,166 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-09 17:01:22,208 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-09 17:01:22,267 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-09 17:01:22,267 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-09 17:01:22,267 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 17:01:22,267 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 17:01:22,803 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 17:01:22,804 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 17:01:23,860 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 17:01:23,860 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 17:01:23,861 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 17:01:23,861 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 17:01:24,329 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 17:01:24,816 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 17:01:24,816 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 17:01:24,920 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 17:01:25,016 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 17:01:25,016 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 17:01:25,016 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 17:01:25,017 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 17:01:25,017 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 17:01:25,017 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 17:01:25,018 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 17:01:25,028 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 17:01:25,029 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 17:01:25,154 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=1, output=
2025-09-09 17:01:25,154 - NetworkTopology - INFO - TestNode1: 尝试启动mstpd服务...
2025-09-09 17:01:27,478 - NetworkTopology - INFO - TestNode1: mstpd启动后状态: code=1
2025-09-09 17:01:27,479 - NetworkTopology - INFO - TestNode1: mstpd启动失败，可能服务不存在或权限不足
2025-09-09 17:01:27,479 - NetworkTopology - INFO - TestNode1: 检查iproute2支持...
2025-09-09 17:01:27,526 - NetworkTopology - INFO - TestNode1: ip命令检查: code=0
2025-09-09 17:01:27,526 - NetworkTopology - INFO - TestNode1: 使用iproute2配置RSTP
2025-09-09 17:01:27,526 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: iproute2
2025-09-09 17:01:27,527 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 17:01:27,527 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 17:01:28,276 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 17:01:29,748 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 17:01:29,748 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 17:01:29,748 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 17:01:29,749 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 17:01:30,239 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 17:01:30,697 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 17:01:30,697 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 17:01:30,916 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 17:01:30,964 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 17:01:31,012 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 17:01:31,013 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 17:01:31,013 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 17:01:31,013 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 17:01:31,013 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 17:01:31,014 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 17:01:31,014 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 17:01:31,021 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 17:01:31,021 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 17:01:31,154 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=1, output=
2025-09-09 17:01:31,154 - NetworkTopology - INFO - TestNode2: 尝试启动mstpd服务...
2025-09-09 17:01:33,472 - NetworkTopology - INFO - TestNode2: mstpd启动后状态: code=1
2025-09-09 17:01:33,472 - NetworkTopology - INFO - TestNode2: mstpd启动失败，可能服务不存在或权限不足
2025-09-09 17:01:33,473 - NetworkTopology - INFO - TestNode2: 检查iproute2支持...
2025-09-09 17:01:33,520 - NetworkTopology - INFO - TestNode2: ip命令检查: code=0
2025-09-09 17:01:33,520 - NetworkTopology - INFO - TestNode2: 使用iproute2配置RSTP
2025-09-09 17:01:33,521 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: iproute2
2025-09-09 17:01:33,521 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 17:01:33,521 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 17:01:34,178 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 17:01:35,670 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 17:01:35,670 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 17:01:35,671 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 17:01:35,671 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 17:01:36,119 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 17:01:36,562 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 17:01:36,563 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 17:01:36,785 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 17:01:36,834 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 17:01:36,882 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 17:01:36,883 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 17:01:36,883 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 17:01:37,149 - test_enhanced_rstp_coverage - INFO - 等待初始收敛...
2025-09-09 17:01:37,149 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 17:01:37,430 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:01:37,584 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.43秒
2025-09-09 17:01:37,882 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:01:38,058 - RSTPTest - INFO - 测试完成: test_comprehensive_port_state_transitions (耗时: 15.89秒)
2025-09-09 17:01:38,059 - RSTPTest - INFO - ============================================================

2025-09-09 17:01:38,061 - RSTPTest - INFO - ============================================================
2025-09-09 17:01:38,061 - RSTPTest - INFO - 开始测试: test_detailed_bpdu_analysis
2025-09-09 17:01:38,061 - RSTPTest - INFO - ============================================================
2025-09-09 17:01:38,062 - test_enhanced_rstp_coverage - INFO - 开始详细BPDU分析测试
2025-09-09 17:01:38,062 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 17:01:38,062 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 17:01:38,062 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 17:01:38,063 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 17:01:38,063 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 17:01:38,063 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 17:01:38,063 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 17:01:38,063 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 17:01:38,554 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 17:01:38,555 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 17:01:39,591 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 17:01:39,592 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 17:01:39,592 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 17:01:39,592 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 17:01:40,061 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 17:01:40,549 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 17:01:40,550 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 17:01:40,652 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 17:01:40,748 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 17:01:40,748 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 17:01:40,748 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 17:01:40,749 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 17:01:40,749 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 17:01:40,749 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 17:01:40,749 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 17:01:40,749 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 17:01:41,431 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 17:01:42,924 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 17:01:42,924 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 17:01:42,924 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 17:01:42,924 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 17:01:43,370 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 17:01:43,843 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 17:01:43,843 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 17:01:44,059 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 17:01:44,109 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 17:01:44,159 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 17:01:44,160 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 17:01:44,160 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 17:01:44,160 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 17:01:44,160 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 17:01:44,160 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 17:01:44,161 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 17:01:44,161 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 17:01:45,202 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 17:01:46,629 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 17:01:46,630 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 17:01:46,630 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 17:01:46,630 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 17:01:47,078 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 17:01:47,518 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 17:01:47,518 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 17:01:47,749 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 17:01:47,796 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 17:01:47,846 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 17:01:47,846 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 17:01:47,847 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 17:01:48,274 - test_enhanced_rstp_coverage - INFO - 等待RSTP收敛...
2025-09-09 17:01:48,275 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 17:01:48,530 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:01:48,684 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.41秒
2025-09-09 17:01:48,982 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:01:49,140 - test_enhanced_rstp_coverage - INFO - Hello Time: 0秒
2025-09-09 17:01:49,140 - test_enhanced_rstp_coverage - INFO - === 测试1: 验证分布式BPDU生成 ===
2025-09-09 17:01:49,140 - test_enhanced_rstp_coverage - INFO - 总共捕获0个BPDU，来自0个不同源
2025-09-09 17:01:49,156 - RSTPTest - INFO - 测试完成: test_detailed_bpdu_analysis (耗时: 11.09秒)
2025-09-09 17:01:49,156 - RSTPTest - INFO - ============================================================

2025-09-09 17:01:49,158 - RSTPTest - INFO - ============================================================
2025-09-09 17:01:49,159 - RSTPTest - INFO - 开始测试: test_topology_change_comprehensive
2025-09-09 17:01:49,159 - RSTPTest - INFO - ============================================================
2025-09-09 17:01:49,160 - test_enhanced_rstp_coverage - INFO - 开始全面拓扑变更测试
2025-09-09 17:01:49,160 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 17:01:49,160 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 17:01:49,161 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 17:01:49,161 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 17:01:49,161 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 17:01:49,161 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 17:01:49,161 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 17:01:49,161 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 17:01:49,650 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 17:01:49,650 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 17:01:50,704 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 17:01:50,705 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 17:01:50,705 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 17:01:50,705 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 17:01:51,171 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 17:01:51,648 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 17:01:51,648 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 17:01:51,751 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 17:01:51,847 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 17:01:51,847 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 17:01:51,848 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 17:01:51,848 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 17:01:51,848 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 17:01:51,849 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 17:01:51,849 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 17:01:51,849 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 17:01:52,520 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 17:01:53,985 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 17:01:53,985 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 17:01:53,985 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 17:01:53,986 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 17:01:54,439 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 17:01:54,883 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 17:01:54,884 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 17:01:55,104 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 17:01:55,153 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 17:01:55,203 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 17:01:55,204 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 17:01:55,204 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 17:01:55,204 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 17:01:55,204 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 17:01:55,204 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 17:01:55,205 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 17:01:55,205 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 17:01:55,864 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 17:01:57,326 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 17:01:57,326 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 17:01:57,326 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 17:01:57,326 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 17:01:57,781 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 17:01:58,273 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 17:01:58,274 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 17:01:58,505 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 17:01:58,554 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 17:01:58,603 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 17:01:58,603 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 17:01:58,603 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 17:01:58,875 - test_enhanced_rstp_coverage - INFO - 等待初始收敛...
2025-09-09 17:01:58,876 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 17:01:59,154 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:01:59,308 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.43秒
2025-09-09 17:01:59,606 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:02:00,062 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-09 17:02:00,216 - test_enhanced_rstp_coverage - INFO - 初始状态: DUT是根桥=True
2025-09-09 17:02:00,216 - test_enhanced_rstp_coverage - INFO - === 测试场景1: 根桥变更 ===
2025-09-09 17:02:00,216 - test_enhanced_rstp_coverage - INFO - === 测试场景2: 端口故障恢复 ===
2025-09-09 17:02:00,515 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:02:00,676 - test_enhanced_rstp_coverage - INFO - === 测试场景3: 端口优先级变更 ===
2025-09-09 17:02:00,974 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:02:01,132 - test_enhanced_rstp_coverage - WARNING - 未检测到明显的拓扑变更，可能是测试环境限制
2025-09-09 17:02:01,132 - test_enhanced_rstp_coverage - INFO - ✓ 全面拓扑变更测试完成
2025-09-09 17:02:01,133 - RSTPTest - INFO - 测试完成: test_topology_change_comprehensive (耗时: 11.97秒)
2025-09-09 17:02:01,134 - RSTPTest - INFO - ============================================================

2025-09-09 17:02:01,134 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 17:02:01,135 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 17:02:01,135 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 17:02:01,285 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 17:02:01,286 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 17:02:01,414 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 17:02:01,414 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 17:02:01,542 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 17:02:01,543 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 17:02:01,543 - RSTPTest - INFO - ============================================================
2025-09-09 17:02:01,543 - RSTPTest - INFO - 开始测试: test_rstp_reconvergence_no_switchover
2025-09-09 17:02:01,543 - RSTPTest - INFO - ============================================================
2025-09-09 17:02:01,544 - test_high_availability - INFO - 开始RSTP重构误判测试
2025-09-09 17:02:01,544 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 17:02:01,545 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 17:02:01,545 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 17:02:01,545 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 17:02:01,545 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 17:02:01,545 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 17:02:01,546 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-09 17:02:01,551 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-09 17:02:01,608 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-09 17:02:01,609 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-09 17:02:01,609 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 17:02:01,609 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 17:02:02,155 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 17:02:02,156 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 17:02:03,211 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 17:02:03,212 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 17:02:03,212 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 17:02:03,212 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 17:02:03,675 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 17:02:04,157 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 17:02:04,157 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 17:02:04,261 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 17:02:04,360 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 17:02:04,361 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 17:02:04,361 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 17:02:04,361 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 17:02:04,361 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 17:02:04,362 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 17:02:04,362 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 17:02:04,369 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 17:02:04,370 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 17:02:04,500 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=1, output=
2025-09-09 17:02:04,500 - NetworkTopology - INFO - TestNode1: 尝试启动mstpd服务...
2025-09-09 17:02:06,814 - NetworkTopology - INFO - TestNode1: mstpd启动后状态: code=1
2025-09-09 17:02:06,814 - NetworkTopology - INFO - TestNode1: mstpd启动失败，可能服务不存在或权限不足
2025-09-09 17:02:06,815 - NetworkTopology - INFO - TestNode1: 检查iproute2支持...
2025-09-09 17:02:06,862 - NetworkTopology - INFO - TestNode1: ip命令检查: code=0
2025-09-09 17:02:06,862 - NetworkTopology - INFO - TestNode1: 使用iproute2配置RSTP
2025-09-09 17:02:06,862 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: iproute2
2025-09-09 17:02:06,862 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 17:02:06,863 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 17:02:07,554 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 17:02:08,996 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 17:02:08,996 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 17:02:08,997 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 17:02:08,997 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 17:02:09,442 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 17:02:09,879 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 17:02:09,879 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 17:02:10,097 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 17:02:10,145 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 17:02:10,193 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 17:02:10,193 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 17:02:10,193 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 17:02:10,193 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 17:02:10,193 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 17:02:10,194 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 17:02:10,194 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 17:02:10,201 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 17:02:10,202 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 17:02:10,341 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=1, output=
2025-09-09 17:02:10,342 - NetworkTopology - INFO - TestNode2: 尝试启动mstpd服务...
2025-09-09 17:02:12,659 - NetworkTopology - INFO - TestNode2: mstpd启动后状态: code=1
2025-09-09 17:02:12,659 - NetworkTopology - INFO - TestNode2: mstpd启动失败，可能服务不存在或权限不足
2025-09-09 17:02:12,659 - NetworkTopology - INFO - TestNode2: 检查iproute2支持...
2025-09-09 17:02:12,707 - NetworkTopology - INFO - TestNode2: ip命令检查: code=0
2025-09-09 17:02:12,707 - NetworkTopology - INFO - TestNode2: 使用iproute2配置RSTP
2025-09-09 17:02:12,707 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: iproute2
2025-09-09 17:02:12,707 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 17:02:12,708 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 17:02:13,374 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 17:02:14,811 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 17:02:14,811 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 17:02:14,811 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 17:02:14,812 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 17:02:15,277 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 17:02:15,714 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 17:02:15,714 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 17:02:15,958 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 17:02:16,006 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 17:02:16,055 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 17:02:16,055 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 17:02:16,056 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 17:02:21,061 - test_high_availability - INFO - 初始HA状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-09 17:02:21,061 - test_high_availability - INFO - 在远端触发RSTP重构...
2025-09-09 17:02:21,061 - FaultInjector_TestNode2 - INFO - 断开链路: eth0
2025-09-09 17:02:21,278 - FaultInjector_TestNode2 - INFO - 链路已断开: eth0
2025-09-09 17:02:31,284 - test_high_availability - INFO - RSTP重构后HA状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-09 17:02:31,284 - FaultInjector_TestNode2 - INFO - 恢复链路: eth0
2025-09-09 17:02:31,463 - FaultInjector_TestNode2 - INFO - 链路已恢复: eth0
2025-09-09 17:02:31,464 - test_high_availability - INFO - RSTP重构误判测试完成
2025-09-09 17:02:31,465 - RSTPTest - INFO - 测试完成: test_rstp_reconvergence_no_switchover (耗时: 29.92秒)
2025-09-09 17:02:31,465 - RSTPTest - INFO - ============================================================

2025-09-09 17:02:31,467 - RSTPTest - INFO - ============================================================
2025-09-09 17:02:31,468 - RSTPTest - INFO - 开始测试: test_split_brain_scenario
2025-09-09 17:02:31,468 - RSTPTest - INFO - ============================================================
2025-09-09 17:02:31,469 - test_high_availability - INFO - 开始裂脑场景测试
2025-09-09 17:02:31,473 - test_high_availability - INFO - 初始状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-09 17:02:31,474 - test_high_availability - INFO - 断开同步链路: eth3
2025-09-09 17:02:31,474 - FaultInjector_DUT - INFO - 断开链路: eth3
2025-09-09 17:02:31,734 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth3 (code=1)，将在逻辑上标记为已断开
2025-09-09 17:02:41,735 - test_high_availability - WARNING - 裂脑测试需要访问两个控制器
2025-09-09 17:02:41,736 - FaultInjector_DUT - INFO - 恢复链路: eth3
2025-09-09 17:02:41,953 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth3 (code=1)，将在逻辑上标记为已恢复
2025-09-09 17:02:41,954 - test_high_availability - INFO - 裂脑场景测试完成
2025-09-09 17:02:41,954 - RSTPTest - INFO - 测试完成: test_split_brain_scenario (耗时: 10.49秒)
2025-09-09 17:02:41,955 - RSTPTest - INFO - ============================================================

2025-09-09 17:02:41,958 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 17:02:41,959 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 17:02:41,959 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 17:02:42,093 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 17:02:42,093 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 17:02:42,093 - RSTPTest - INFO - ============================================================
2025-09-09 17:02:42,094 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[12288]
2025-09-09 17:02:42,094 - RSTPTest - INFO - ============================================================
2025-09-09 17:02:42,095 - test_parameters - INFO - 测试网桥优先级: 12288
2025-09-09 17:02:43,650 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-09 17:02:45,758 - test_parameters - INFO - 从OVS配置读取到优先级: 12288
2025-09-09 17:02:45,758 - test_parameters - INFO - 优先级12288设置成功
2025-09-09 17:02:45,759 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[12288] (耗时: 3.67秒)
2025-09-09 17:02:45,760 - RSTPTest - INFO - ============================================================

2025-09-09 17:02:45,761 - RSTPTest - INFO - ============================================================
2025-09-09 17:02:45,761 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[16384]
2025-09-09 17:02:45,761 - RSTPTest - INFO - ============================================================
2025-09-09 17:02:45,762 - test_parameters - INFO - 测试网桥优先级: 16384
2025-09-09 17:02:47,306 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-09 17:02:49,414 - test_parameters - INFO - 从OVS配置读取到优先级: 16384
2025-09-09 17:02:49,414 - test_parameters - INFO - 优先级16384设置成功
2025-09-09 17:02:49,415 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[16384] (耗时: 3.65秒)
2025-09-09 17:02:49,415 - RSTPTest - INFO - ============================================================

2025-09-09 17:02:49,417 - RSTPTest - INFO - ============================================================
2025-09-09 17:02:49,417 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[32768]
2025-09-09 17:02:49,417 - RSTPTest - INFO - ============================================================
2025-09-09 17:02:49,418 - test_parameters - INFO - 测试网桥优先级: 32768
2025-09-09 17:02:50,959 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-09 17:02:53,066 - test_parameters - INFO - 从OVS配置读取到优先级: 32768
2025-09-09 17:02:53,067 - test_parameters - INFO - 优先级32768设置成功
2025-09-09 17:02:53,068 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[32768] (耗时: 3.65秒)
2025-09-09 17:02:53,068 - RSTPTest - INFO - ============================================================

2025-09-09 17:02:53,069 - RSTPTest - INFO - ============================================================
2025-09-09 17:02:53,069 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[61440]
2025-09-09 17:02:53,069 - RSTPTest - INFO - ============================================================
2025-09-09 17:02:53,070 - test_parameters - INFO - 测试网桥优先级: 61440
2025-09-09 17:02:54,614 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-09 17:02:56,722 - test_parameters - INFO - 从OVS配置读取到优先级: 61440
2025-09-09 17:02:56,722 - test_parameters - INFO - 优先级61440设置成功
2025-09-09 17:02:56,723 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[61440] (耗时: 3.65秒)
2025-09-09 17:02:56,723 - RSTPTest - INFO - ============================================================

2025-09-09 17:02:56,725 - RSTPTest - INFO - ============================================================
2025-09-09 17:02:56,725 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[4097]
2025-09-09 17:02:56,725 - RSTPTest - INFO - ============================================================
2025-09-09 17:02:56,726 - test_parameters - INFO - 测试无效优先级: 4097
2025-09-09 17:02:58,546 - test_parameters - INFO - DUT处理无效优先级 4097 -> 4097
2025-09-09 17:02:58,546 - test_parameters - WARNING - DUT接受了非标准优先级值 4097，不符合802.1D标准（应为4096的倍数）
2025-09-09 17:02:58,546 - test_parameters - INFO - 无效优先级4097被正确处理
2025-09-09 17:02:58,547 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[4097] (耗时: 1.82秒)
2025-09-09 17:02:58,547 - RSTPTest - INFO - ============================================================

2025-09-09 17:02:58,548 - RSTPTest - INFO - ============================================================
2025-09-09 17:02:58,549 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[12289]
2025-09-09 17:02:58,549 - RSTPTest - INFO - ============================================================
2025-09-09 17:02:58,549 - test_parameters - INFO - 测试无效优先级: 12289
2025-09-09 17:03:00,383 - test_parameters - INFO - DUT处理无效优先级 12289 -> 12289
2025-09-09 17:03:00,383 - test_parameters - WARNING - DUT接受了非标准优先级值 12289，不符合802.1D标准（应为4096的倍数）
2025-09-09 17:03:00,383 - test_parameters - INFO - 无效优先级12289被正确处理
2025-09-09 17:03:00,384 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[12289] (耗时: 1.84秒)
2025-09-09 17:03:00,384 - RSTPTest - INFO - ============================================================

2025-09-09 17:03:00,386 - RSTPTest - INFO - ============================================================
2025-09-09 17:03:00,386 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[70000]
2025-09-09 17:03:00,386 - RSTPTest - INFO - ============================================================
2025-09-09 17:03:00,386 - test_parameters - INFO - 测试无效优先级: 70000
2025-09-09 17:03:02,177 - test_parameters - INFO - DUT处理无效优先级 70000 -> 70000
2025-09-09 17:03:02,177 - test_parameters - WARNING - DUT接受了非标准优先级值 70000，不符合802.1D标准（应为4096的倍数）
2025-09-09 17:03:02,177 - test_parameters - INFO - 无效优先级70000被正确处理
2025-09-09 17:03:02,178 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[70000] (耗时: 1.79秒)
2025-09-09 17:03:02,178 - RSTPTest - INFO - ============================================================

2025-09-09 17:03:02,179 - RSTPTest - INFO - ============================================================
2025-09-09 17:03:02,180 - RSTPTest - INFO - 开始测试: test_hello_time
2025-09-09 17:03:02,180 - RSTPTest - INFO - ============================================================
2025-09-09 17:03:02,180 - test_parameters - INFO - 测试Hello Time参数
2025-09-09 17:03:03,797 - test_parameters - INFO - 设置Hello Time: 1秒
2025-09-09 17:03:05,978 - test_parameters - INFO - Hello Time 1秒设置成功
2025-09-09 17:03:05,978 - test_parameters - INFO - 设置Hello Time: 2秒
2025-09-09 17:03:08,201 - test_parameters - INFO - Hello Time 2秒设置成功
2025-09-09 17:03:08,202 - test_parameters - INFO - 设置Hello Time: 5秒
2025-09-09 17:03:10,429 - test_parameters - INFO - Hello Time 5秒设置成功
2025-09-09 17:03:10,429 - test_parameters - INFO - Hello Time测试通过
2025-09-09 17:03:10,430 - RSTPTest - INFO - 测试完成: test_hello_time (耗时: 8.25秒)
2025-09-09 17:03:10,430 - RSTPTest - INFO - ============================================================

2025-09-09 17:03:10,431 - RSTPTest - INFO - ============================================================
2025-09-09 17:03:10,431 - RSTPTest - INFO - 开始测试: test_forward_delay
2025-09-09 17:03:10,432 - RSTPTest - INFO - ============================================================
2025-09-09 17:03:10,432 - test_parameters - INFO - 测试Forward Delay参数
2025-09-09 17:03:12,028 - test_parameters - INFO - 设置Forward Delay: 4秒
2025-09-09 17:03:14,215 - test_parameters - INFO - Forward Delay 4秒设置成功
2025-09-09 17:03:14,216 - test_parameters - INFO - 设置Forward Delay: 10秒
2025-09-09 17:03:16,441 - test_parameters - INFO - Forward Delay 10秒设置成功
2025-09-09 17:03:16,442 - test_parameters - INFO - 设置Forward Delay: 15秒
2025-09-09 17:03:18,665 - test_parameters - INFO - Forward Delay 15秒设置成功
2025-09-09 17:03:18,665 - test_parameters - INFO - Forward Delay测试通过
2025-09-09 17:03:18,666 - RSTPTest - INFO - 测试完成: test_forward_delay (耗时: 8.23秒)
2025-09-09 17:03:18,667 - RSTPTest - INFO - ============================================================

2025-09-09 17:03:18,668 - RSTPTest - INFO - ============================================================
2025-09-09 17:03:18,669 - RSTPTest - INFO - 开始测试: test_max_age
2025-09-09 17:03:18,669 - RSTPTest - INFO - ============================================================
2025-09-09 17:03:18,669 - test_parameters - INFO - 测试Max Age参数
2025-09-09 17:03:20,258 - test_parameters - INFO - 设置Max Age: 6秒
2025-09-09 17:03:22,437 - test_parameters - INFO - Max Age 6秒设置成功
2025-09-09 17:03:22,437 - test_parameters - INFO - 设置Max Age: 10秒
2025-09-09 17:03:24,669 - test_parameters - INFO - Max Age 10秒设置成功
2025-09-09 17:03:24,669 - test_parameters - INFO - 设置Max Age: 20秒
2025-09-09 17:03:26,893 - test_parameters - INFO - Max Age 20秒设置成功
2025-09-09 17:03:26,893 - test_parameters - INFO - Max Age测试通过
2025-09-09 17:03:26,894 - RSTPTest - INFO - 测试完成: test_max_age (耗时: 8.22秒)
2025-09-09 17:03:26,894 - RSTPTest - INFO - ============================================================

2025-09-09 17:03:27,032 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 17:03:27,032 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 17:03:27,158 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 17:03:27,159 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 17:03:27,159 - RSTPTest - INFO - ============================================================
2025-09-09 17:03:27,160 - RSTPTest - INFO - 开始测试: test_port_cost
2025-09-09 17:03:27,160 - RSTPTest - INFO - ============================================================
2025-09-09 17:03:27,161 - test_parameters - INFO - 测试端口路径成本
2025-09-09 17:03:27,161 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 17:03:27,161 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 17:03:27,161 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 17:03:27,162 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 17:03:27,162 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 17:03:27,162 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 17:03:27,162 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-09 17:03:27,168 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-09 17:03:27,224 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-09 17:03:27,224 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-09 17:03:27,224 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 17:03:27,225 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 17:03:27,733 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 17:03:27,733 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 17:03:28,765 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 17:03:28,766 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 17:03:28,766 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 17:03:28,766 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 17:03:29,221 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 17:03:29,697 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 17:03:29,698 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 17:03:29,801 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 17:03:29,898 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 17:03:29,898 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 17:03:29,898 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 17:03:29,899 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 17:03:29,899 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 17:03:29,899 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 17:03:29,899 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 17:03:29,906 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 17:03:29,906 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 17:03:30,033 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=1, output=
2025-09-09 17:03:30,033 - NetworkTopology - INFO - TestNode1: 尝试启动mstpd服务...
2025-09-09 17:03:32,354 - NetworkTopology - INFO - TestNode1: mstpd启动后状态: code=1
2025-09-09 17:03:32,354 - NetworkTopology - INFO - TestNode1: mstpd启动失败，可能服务不存在或权限不足
2025-09-09 17:03:32,355 - NetworkTopology - INFO - TestNode1: 检查iproute2支持...
2025-09-09 17:03:32,402 - NetworkTopology - INFO - TestNode1: ip命令检查: code=0
2025-09-09 17:03:32,402 - NetworkTopology - INFO - TestNode1: 使用iproute2配置RSTP
2025-09-09 17:03:32,402 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: iproute2
2025-09-09 17:03:32,403 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 17:03:32,403 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 17:03:33,031 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 17:03:34,474 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 17:03:34,474 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 17:03:34,475 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 17:03:34,475 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 17:03:34,919 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 17:03:35,357 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 17:03:35,358 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 17:03:35,582 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 17:03:35,628 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 17:03:35,676 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 17:03:35,676 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 17:03:35,676 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 17:03:35,676 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 17:03:35,676 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 17:03:35,677 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 17:03:35,677 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 17:03:35,684 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 17:03:35,684 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 17:03:35,802 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=1, output=
2025-09-09 17:03:35,802 - NetworkTopology - INFO - TestNode2: 尝试启动mstpd服务...
2025-09-09 17:03:38,120 - NetworkTopology - INFO - TestNode2: mstpd启动后状态: code=1
2025-09-09 17:03:38,120 - NetworkTopology - INFO - TestNode2: mstpd启动失败，可能服务不存在或权限不足
2025-09-09 17:03:38,121 - NetworkTopology - INFO - TestNode2: 检查iproute2支持...
2025-09-09 17:03:38,171 - NetworkTopology - INFO - TestNode2: ip命令检查: code=0
2025-09-09 17:03:38,171 - NetworkTopology - INFO - TestNode2: 使用iproute2配置RSTP
2025-09-09 17:03:38,172 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: iproute2
2025-09-09 17:03:38,172 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 17:03:38,172 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 17:03:38,859 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 17:04:39,942 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 17:04:39,942 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 17:04:39,943 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 17:04:39,943 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 17:05:00,273 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 17:05:20,591 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 17:05:20,592 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 17:05:30,745 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 17:05:30,794 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 17:05:30,842 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 17:05:30,843 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 17:05:30,843 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 17:05:35,844 - test_parameters - INFO - 设置端口eth0成本: 10
2025-09-09 17:05:35,905 - test_parameters - INFO - 设置端口eth0成本: 100
2025-09-09 17:05:36,009 - test_parameters - INFO - 设置端口eth0成本: 1000
2025-09-09 17:05:36,114 - test_parameters - INFO - 设置端口eth0成本: 20000
2025-09-09 17:05:36,218 - test_parameters - INFO - 端口成本测试通过
2025-09-09 17:05:36,219 - RSTPTest - INFO - 测试完成: test_port_cost (耗时: 129.06秒)
2025-09-09 17:05:36,220 - RSTPTest - INFO - ============================================================

2025-09-09 17:05:36,221 - RSTPTest - INFO - ============================================================
2025-09-09 17:05:36,221 - RSTPTest - INFO - 开始测试: test_parameter_persistence
2025-09-09 17:05:36,221 - RSTPTest - INFO - ============================================================
2025-09-09 17:05:36,222 - test_parameters - INFO - 测试参数持久性
2025-09-09 17:05:43,464 - test_parameters - INFO - 参数持久性测试通过
2025-09-09 17:05:43,465 - RSTPTest - INFO - 测试完成: test_parameter_persistence (耗时: 7.24秒)
2025-09-09 17:05:43,466 - RSTPTest - INFO - ============================================================

2025-09-09 17:05:43,467 - RSTPTest - INFO - ============================================================
2025-09-09 17:05:43,467 - RSTPTest - INFO - 开始测试: test_parameter_boundaries
2025-09-09 17:05:43,467 - RSTPTest - INFO - ============================================================
2025-09-09 17:05:43,468 - test_parameters - INFO - 测试参数边界值
2025-09-09 17:05:45,142 - test_parameters - INFO - 最小值0: 失败
2025-09-09 17:05:45,242 - test_parameters - INFO - 最大值65535: 失败
2025-09-09 17:05:45,343 - test_parameters - INFO - 正确拒绝了无效值-1
2025-09-09 17:05:45,452 - test_parameters - INFO - 正确拒绝了无效值65536
2025-09-09 17:05:45,556 - test_parameters - INFO - 最小值1: 失败
2025-09-09 17:05:45,659 - test_parameters - INFO - 最大值10: 失败
2025-09-09 17:05:45,762 - test_parameters - INFO - 正确拒绝了无效值0
2025-09-09 17:05:45,862 - test_parameters - INFO - 正确拒绝了无效值11
2025-09-09 17:05:45,966 - test_parameters - INFO - 最小值4: 失败
2025-09-09 17:05:46,067 - test_parameters - INFO - 最大值30: 失败
2025-09-09 17:05:46,170 - test_parameters - INFO - 正确拒绝了无效值3
2025-09-09 17:05:46,270 - test_parameters - INFO - 正确拒绝了无效值31
2025-09-09 17:05:46,370 - test_parameters - INFO - 最小值6: 失败
2025-09-09 17:05:46,470 - test_parameters - INFO - 最大值40: 失败
2025-09-09 17:05:46,570 - test_parameters - INFO - 正确拒绝了无效值5
2025-09-09 17:05:46,670 - test_parameters - INFO - 正确拒绝了无效值41
2025-09-09 17:05:46,671 - test_parameters - INFO - 参数边界测试完成
2025-09-09 17:05:46,671 - RSTPTest - INFO - 测试完成: test_parameter_boundaries (耗时: 3.20秒)
2025-09-09 17:05:46,672 - RSTPTest - INFO - ============================================================

2025-09-09 17:05:46,672 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 17:05:46,672 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 17:05:46,673 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 17:05:46,809 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 17:05:46,810 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 17:05:46,936 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 17:05:46,936 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 17:05:47,067 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 17:05:47,067 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 17:05:47,068 - RSTPTest - INFO - ============================================================
2025-09-09 17:05:47,068 - RSTPTest - INFO - 开始测试: test_port_role_assignment_simplified
2025-09-09 17:05:47,069 - RSTPTest - INFO - ============================================================
2025-09-09 17:05:47,071 - RSTPTest - INFO - 测试完成: test_port_role_assignment_simplified (耗时: 0.00秒)
2025-09-09 17:05:47,071 - RSTPTest - INFO - ============================================================

2025-09-09 17:05:47,073 - RSTPTest - INFO - ============================================================
2025-09-09 17:05:47,073 - RSTPTest - INFO - 开始测试: test_root_bridge_election
2025-09-09 17:05:47,073 - RSTPTest - INFO - ============================================================
2025-09-09 17:05:47,074 - test_protocol_conformance - INFO - 开始根网桥选举测试
2025-09-09 17:05:47,074 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 17:05:47,074 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 17:05:47,074 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 17:05:47,075 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 17:05:47,075 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 17:05:47,075 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 17:05:47,075 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-09 17:05:47,081 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-09 17:05:47,136 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-09 17:05:47,137 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-09 17:05:47,137 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 17:05:47,137 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 17:05:47,671 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 17:05:47,672 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 17:05:48,707 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 17:05:48,708 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 17:05:48,708 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 17:05:48,708 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 17:05:49,169 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 17:05:49,652 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 17:05:49,652 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 17:05:49,756 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 17:05:49,852 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 17:05:49,852 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 17:05:49,852 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 17:05:49,853 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 17:05:49,853 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 17:05:49,853 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 17:05:49,853 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 17:05:49,861 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 17:05:49,862 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 17:05:49,998 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=1, output=
2025-09-09 17:05:49,998 - NetworkTopology - INFO - TestNode1: 尝试启动mstpd服务...
2025-09-09 17:05:52,322 - NetworkTopology - INFO - TestNode1: mstpd启动后状态: code=1
2025-09-09 17:05:52,322 - NetworkTopology - INFO - TestNode1: mstpd启动失败，可能服务不存在或权限不足
2025-09-09 17:05:52,323 - NetworkTopology - INFO - TestNode1: 检查iproute2支持...
2025-09-09 17:05:52,371 - NetworkTopology - INFO - TestNode1: ip命令检查: code=0
2025-09-09 17:05:52,371 - NetworkTopology - INFO - TestNode1: 使用iproute2配置RSTP
2025-09-09 17:05:52,371 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: iproute2
2025-09-09 17:05:52,371 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 17:05:52,372 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 17:05:53,050 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 17:05:54,473 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 17:05:54,473 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 17:05:54,474 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 17:05:54,474 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 17:05:54,916 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 17:05:55,355 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 17:05:55,355 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 17:05:55,577 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 17:05:55,626 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 17:05:55,675 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 17:05:55,676 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 17:05:55,676 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 17:05:55,676 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 17:05:55,676 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 17:05:55,676 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 17:05:55,677 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 17:05:55,684 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 17:05:55,684 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 17:06:03,846 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=1, output=
2025-09-09 17:06:03,846 - NetworkTopology - INFO - TestNode2: 尝试启动mstpd服务...
2025-09-09 17:06:21,254 - NetworkTopology - INFO - TestNode2: mstpd启动后状态: code=1
2025-09-09 17:06:21,255 - NetworkTopology - INFO - TestNode2: mstpd启动失败，可能服务不存在或权限不足
2025-09-09 17:06:21,255 - NetworkTopology - INFO - TestNode2: 检查iproute2支持...
2025-09-09 17:06:21,302 - NetworkTopology - INFO - TestNode2: ip命令检查: code=0
2025-09-09 17:06:21,303 - NetworkTopology - INFO - TestNode2: 使用iproute2配置RSTP
2025-09-09 17:06:21,303 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: iproute2
2025-09-09 17:06:21,303 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 17:06:21,303 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 17:06:37,025 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 17:06:38,441 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 17:06:38,442 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 17:06:38,442 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 17:06:38,442 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 17:06:38,910 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 17:06:39,340 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 17:06:39,341 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 17:06:39,550 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 17:06:39,599 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 17:06:39,648 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 17:06:39,648 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 17:06:39,648 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 17:06:42,650 - test_protocol_conformance - INFO - === 检查DUT网桥配置 ===
2025-09-09 17:06:42,656 - test_protocol_conformance - INFO - 找到测试网桥: br0
2025-09-09 17:06:42,708 - test_protocol_conformance - INFO - 启用br0的RSTP
2025-09-09 17:06:42,754 - test_protocol_conformance - INFO - br0 STP状态: ('', 'cat: /sys/class/net/br0/bridge/stp_state: No such file or directory\n', 1)
2025-09-09 17:06:42,754 - test_protocol_conformance - INFO - === 初始网桥状态 ===
2025-09-09 17:06:43,049 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:06:43,211 - test_protocol_conformance - INFO - 活动端口数: 0
2025-09-09 17:06:43,212 - test_protocol_conformance - WARNING - 活动端口不足，尝试启用更多端口
2025-09-09 17:06:46,802 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:06:46,963 - test_protocol_conformance - INFO - 初始端口状态:
2025-09-09 17:06:46,964 - test_protocol_conformance - INFO - 初始状态 - DUT有Root Port: False
2025-09-09 17:06:46,964 - test_protocol_conformance - INFO - === 配置网桥优先级 ===
2025-09-09 17:06:46,964 - test_protocol_conformance - INFO - 设置TestNode1优先级为16384
2025-09-09 17:06:47,150 - test_protocol_conformance - INFO - 设置DUT优先级为32768
2025-09-09 17:06:47,160 - test_protocol_conformance - INFO - ip命令设置结果: ('', 'RTNETLINK answers: Operation not supported\n', 2)
2025-09-09 17:06:47,212 - test_protocol_conformance - INFO - sysfs设置结果: ('32768\n', 'tee: /sys/class/net/br0/bridge/priority: No such file or directory\n', 1)
2025-09-09 17:06:47,213 - test_protocol_conformance - INFO - 设置TestNode2优先级为24576
2025-09-09 17:06:47,389 - test_protocol_conformance - INFO - 等待RSTP收敛...
2025-09-09 17:06:57,390 - test_protocol_conformance - INFO - === 第一阶段验证 ===
2025-09-09 17:06:57,646 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:06:57,855 - test_protocol_conformance - INFO - DUT当前优先级: 
2025-09-09 17:06:57,856 - test_protocol_conformance - WARNING - 优先级验证失败: 优先级设置失败，期望32768，实际
assert '' == '32768'
  
  [0m[91m- 32768[39;49;00m[90m[39;49;00m
2025-09-09 17:06:57,856 - test_protocol_conformance - INFO - 
=== 第二阶段：DUT应成为根桥 ===
2025-09-09 17:06:57,857 - test_protocol_conformance - INFO - 设置DUT优先级为12288（最低）
2025-09-09 17:06:58,006 - test_protocol_conformance - INFO - 设置后优先级: 
2025-09-09 17:06:58,007 - test_protocol_conformance - INFO - 等待RSTP重新收敛...
2025-09-09 17:07:08,007 - test_protocol_conformance - INFO - === 最终验证 ===
2025-09-09 17:07:08,261 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:07:08,419 - test_protocol_conformance - ERROR - DUT RSTP实现问题诊断:
2025-09-09 17:07:08,419 - test_protocol_conformance - ERROR - 1. DUT优先级已设置为12288（最低）
2025-09-09 17:07:08,420 - test_protocol_conformance - ERROR - 2. 但DUT仍有Root Port: False
2025-09-09 17:07:08,420 - test_protocol_conformance - ERROR - 3. Designated端口数: 0
2025-09-09 17:07:08,420 - test_protocol_conformance - ERROR - 可能的原因:
2025-09-09 17:07:08,421 - test_protocol_conformance - ERROR - - DUT的RSTP实现不符合标准
2025-09-09 17:07:08,421 - test_protocol_conformance - ERROR - - DUT没有正确处理优先级变化
2025-09-09 17:07:08,421 - test_protocol_conformance - ERROR - - DUT的BPDU发送/接收有问题
2025-09-09 17:07:08,466 - RSTPTest - INFO - 测试完成: test_root_bridge_election (耗时: 81.39秒)
2025-09-09 17:07:08,466 - RSTPTest - INFO - ============================================================

2025-09-09 17:07:08,469 - RSTPTest - INFO - ============================================================
2025-09-09 17:07:08,469 - RSTPTest - INFO - 开始测试: test_port_role_assignment
2025-09-09 17:07:08,469 - RSTPTest - INFO - ============================================================
2025-09-09 17:07:08,470 - test_protocol_conformance - INFO - 开始端口角色分配测试
2025-09-09 17:07:08,470 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 17:07:08,470 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 17:07:08,470 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 17:07:08,471 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 17:07:08,471 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 17:07:08,471 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 17:07:08,471 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 17:07:08,471 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 17:07:08,953 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 17:07:08,953 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 17:07:09,981 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 17:07:09,982 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 17:07:09,982 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 17:07:09,982 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 17:07:10,446 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 17:07:10,926 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 17:07:10,927 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 17:07:11,030 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 17:07:11,126 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 17:07:11,127 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 17:07:11,127 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 17:07:11,127 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 17:07:11,127 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 17:07:11,127 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 17:07:11,127 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 17:07:11,127 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 17:07:11,788 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 17:07:13,202 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 17:07:13,203 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 17:07:13,203 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 17:07:13,203 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 17:07:13,651 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 17:07:14,101 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 17:07:14,101 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 17:07:14,314 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 17:07:14,363 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 17:07:14,411 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 17:07:14,411 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 17:07:14,412 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 17:07:14,412 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 17:07:14,412 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 17:07:14,412 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 17:07:14,412 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 17:07:14,413 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 17:07:15,078 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 17:07:16,529 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 17:07:16,530 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 17:07:16,530 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 17:07:16,530 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 17:07:16,969 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 17:07:17,408 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 17:07:17,408 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 17:07:17,631 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 17:07:17,678 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 17:07:17,726 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 17:07:17,726 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 17:07:17,726 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 17:07:20,969 - test_protocol_conformance - INFO - 启用DUT的网桥接口...
2025-09-09 17:07:21,096 - test_protocol_conformance - INFO - 已启用接口 eth0
2025-09-09 17:07:21,262 - test_protocol_conformance - INFO - 已启用接口 eth1
2025-09-09 17:07:21,431 - test_protocol_conformance - INFO - 已启用接口 eth2
2025-09-09 17:07:24,437 - test_protocol_conformance - INFO - br0 网桥接口状态:
('18: veth45650b3@if17: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 master br-b2bd2c7fedc8 state forwarding priority 32 cost 2 \n26: veth6d7f1eb@if25: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 master br-b2bd2c7fedc8 state forwarding priority 32 cost 2 \n', '', 0)
2025-09-09 17:07:24,486 - test_protocol_conformance - INFO - br0 状态:
('5: br0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1508 qdisc mq state UP mode DEFAULT group default qlen 1000\n    link/ether 90:12:10:b5:7d:f7 brd ff:ff:ff:ff:ff:ff\n    altname enp0s30f4\n', '', 0)
2025-09-09 17:07:24,535 - test_protocol_conformance - INFO - br0 STP状态:
('', 'cat: /sys/class/net/br0/bridge/stp_state: No such file or directory\n', 1)
2025-09-09 17:07:24,535 - test_protocol_conformance - INFO - 获取初始网桥状态...
2025-09-09 17:07:24,829 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:07:24,986 - test_protocol_conformance - INFO - Bridge ID: 未获取
2025-09-09 17:07:24,986 - test_protocol_conformance - INFO - Root ID: 未获取
2025-09-09 17:07:24,987 - test_protocol_conformance - INFO - Root Port: eth0
2025-09-09 17:07:24,987 - test_protocol_conformance - INFO - 协议版本: unknown
2025-09-09 17:07:24,987 - test_protocol_conformance - INFO - 端口 eth0: 角色=root, 状态=disabled, 成本=0
2025-09-09 17:07:24,987 - test_protocol_conformance - INFO - 端口 eth2: 角色=unknown, 状态=disabled, 成本=0
2025-09-09 17:07:24,987 - test_protocol_conformance - INFO - 端口 eth3: 角色=unknown, 状态=disabled, 成本=0
2025-09-09 17:07:24,988 - test_protocol_conformance - INFO - 等待网络收敛...
2025-09-09 17:07:24,988 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 17:07:25,286 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:07:25,443 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.45秒
2025-09-09 17:07:25,741 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:07:25,898 - test_protocol_conformance - INFO - 收敛后的端口状态:
2025-09-09 17:07:25,898 - test_protocol_conformance - INFO - 端口 eth0: 角色=root, 状态=disabled, 成本=0
2025-09-09 17:07:25,899 - test_protocol_conformance - INFO - 端口 eth2: 角色=unknown, 状态=disabled, 成本=0
2025-09-09 17:07:25,899 - test_protocol_conformance - INFO - 端口 eth3: 角色=unknown, 状态=disabled, 成本=0
2025-09-09 17:07:26,197 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-09 17:07:26,354 - test_protocol_conformance - INFO - is_root_bridge() 返回: True
2025-09-09 17:07:26,355 - test_protocol_conformance - INFO - 有Root Port: False
2025-09-09 17:07:26,355 - test_protocol_conformance - INFO - 最终判定 - DUT是根桥: True
2025-09-09 17:07:26,355 - test_protocol_conformance - INFO - 活动端口数: 0
2025-09-09 17:07:26,355 - test_protocol_conformance - INFO - 禁用端口: ['eth0', 'eth2', 'eth3']
2025-09-09 17:07:26,355 - test_protocol_conformance - WARNING - 活动端口不足，尝试启用禁用的端口...
2025-09-09 17:07:26,356 - test_protocol_conformance - INFO - 尝试启用端口 eth0
2025-09-09 17:07:26,523 - test_protocol_conformance - INFO - 尝试启用端口 eth2
2025-09-09 17:07:31,944 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:07:32,098 - test_protocol_conformance - INFO - 重新配置后 - 活动端口数: 0
2025-09-09 17:07:32,098 - test_protocol_conformance - INFO - 重新配置后 - 禁用端口: ['eth0', 'eth2', 'eth3']
2025-09-09 17:07:32,099 - test_protocol_conformance - INFO - 端口角色分布: {}
2025-09-09 17:07:32,136 - RSTPTest - INFO - 测试完成: test_port_role_assignment (耗时: 23.67秒)
2025-09-09 17:07:32,136 - RSTPTest - INFO - ============================================================

2025-09-09 17:07:32,139 - RSTPTest - INFO - ============================================================
2025-09-09 17:07:32,139 - RSTPTest - INFO - 开始测试: test_rstp_protocol_verification
2025-09-09 17:07:32,139 - RSTPTest - INFO - ============================================================
2025-09-09 17:07:32,140 - test_protocol_conformance - INFO - 开始RSTP协议验证
2025-09-09 17:07:32,140 - test_protocol_conformance - INFO - === 检查OVS配置 ===
2025-09-09 17:07:32,150 - test_protocol_conformance - INFO - 当前OVS配置:
8c812ea9-3b0c-46a1-bd3c-ef3904d38c1a
    Bridge SE_ETH4
        Port SE_ETH4
            Interface SE_ETH4
                type: internal
    Bridge SE_ETH6
        Port SE_ETH6
            Interface SE_ETH6
                type: internal
    Bridge br0
        Port eth0
            Interface eth0
                error: "could not open network device eth0 (No such device)"
        Port br0
            Interface br0
                type: internal
                error: "could not add network devi
2025-09-09 17:07:32,202 - test_protocol_conformance - INFO - 使用现有网桥 SE_ETH2，端口: ['br3', 'br4']
2025-09-09 17:07:32,203 - test_protocol_conformance - INFO - === 配置RSTP（确保是RSTP而不是STP）===
2025-09-09 17:07:33,315 - test_protocol_conformance - INFO - 启用RSTP...
2025-09-09 17:07:33,365 - test_protocol_conformance - INFO - ✓ RSTP已启用
2025-09-09 17:07:33,365 - test_protocol_conformance - INFO - 设置RSTP参数...
2025-09-09 17:07:33,419 - test_protocol_conformance - INFO - ✓ 设置: rstp-hello-time=2
2025-09-09 17:07:33,473 - test_protocol_conformance - INFO - ✓ 设置: rstp-forward-delay=4
2025-09-09 17:07:33,565 - test_protocol_conformance - INFO - ✓ 设置: rstp-max-age=6
2025-09-09 17:07:33,615 - test_protocol_conformance - INFO - ✓ 设置: rstp-priority=32768
2025-09-09 17:07:33,667 - test_protocol_conformance - INFO - ✓ 设置: rstp-force-protocol-version=2
2025-09-09 17:07:33,823 - test_protocol_conformance - INFO - ✓ 端口 br3 RSTP已启用
2025-09-09 17:07:33,982 - test_protocol_conformance - INFO - ✓ 端口 br4 RSTP已启用
2025-09-09 17:07:34,030 - test_protocol_conformance - INFO - 等待RSTP初始化...
2025-09-09 17:07:39,031 - test_protocol_conformance - INFO - === 验证RSTP配置 ===
2025-09-09 17:07:39,075 - test_protocol_conformance - INFO - RSTP状态:
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     6s
  stp-fwd-delay   4s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-09 17:07:39,076 - test_protocol_conformance - INFO - ✓ 使用RSTP时间参数
2025-09-09 17:07:39,076 - test_protocol_conformance - INFO - === 创建测试拓扑 ===
2025-09-09 17:07:39,077 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 17:07:39,077 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 17:07:39,077 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 17:07:39,077 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 17:07:39,077 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 17:07:39,077 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 17:07:39,077 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 17:07:39,078 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 17:07:39,712 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 17:07:39,713 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 17:07:40,760 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 17:07:40,761 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 17:07:40,761 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 17:07:40,761 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 17:07:41,221 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 17:07:41,702 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 17:07:41,702 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 17:07:41,805 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 17:07:41,902 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 17:07:41,902 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 17:07:41,903 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 17:07:41,903 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 17:07:41,903 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 17:07:41,903 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 17:07:41,903 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 17:07:41,904 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 17:07:42,746 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 17:07:44,243 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 17:07:44,244 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 17:07:44,244 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 17:07:44,244 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 17:07:44,838 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 17:07:45,323 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 17:07:45,323 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 17:07:45,604 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 17:07:45,652 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 17:07:45,699 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 17:07:45,700 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 17:07:45,700 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 17:07:45,700 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 17:07:45,700 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 17:07:45,700 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 17:07:45,701 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 17:07:45,701 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 17:07:46,326 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 17:07:47,717 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 17:07:47,717 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 17:07:47,718 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 17:07:47,718 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 17:07:48,148 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 17:07:48,598 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 17:07:48,599 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 17:07:48,805 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 17:07:48,854 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 17:07:48,902 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 17:07:48,902 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 17:07:48,903 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 17:07:53,903 - test_protocol_conformance - INFO - === 捕获BPDU ===
2025-09-09 17:07:53,904 - test_protocol_conformance - INFO - 在 SE_ETH2 上捕获BPDU...
2025-09-09 17:07:53,904 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: SE_ETH2, 数量: 10)
2025-09-09 17:08:03,959 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-09 17:08:03,959 - test_protocol_conformance - INFO - 在 br3 上捕获BPDU...
2025-09-09 17:08:03,959 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br3, 数量: 10)
2025-09-09 17:08:14,054 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-09 17:08:14,055 - test_protocol_conformance - INFO - 在 br4 上捕获BPDU...
2025-09-09 17:08:14,055 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br4, 数量: 10)
2025-09-09 17:08:24,142 - RSTPAnalyzer_DUT - INFO - 捕获到 5 个BPDU包
2025-09-09 17:08:24,143 - test_protocol_conformance - INFO - ✓ 捕获到 5 个BPDU
2025-09-09 17:08:24,143 - test_protocol_conformance - INFO - === 分析BPDU ===
2025-09-09 17:08:24,143 - test_protocol_conformance - INFO - 第一个BPDU信息: {'timestamp': '17:08:16.295950', 'raw': '17:08:16.295950 00:e0:0c:25:0c:01 > 01:80:c2:00:00:00, 802.3, length 39: LLC, dsap STP (0x42) Individual, ssap STP (0x42) Command, ctrl 0x03: STP 802.1w, Rapid STP, Flags [Learn, Forward, Agreement], bridge-id 8000.6e:b3:08:fa:01:34.8002, length 36', 'is_rstp': False}
2025-09-09 17:08:24,144 - test_protocol_conformance - INFO - BPDU统计: RSTP=0, STP=5
2025-09-09 17:08:24,144 - test_protocol_conformance - WARNING - 检测到更多STP BPDU
2025-09-09 17:08:24,193 - test_protocol_conformance - INFO - rstp_enable状态: true
2025-09-09 17:08:24,245 - test_protocol_conformance - INFO - stp_enable状态: false
2025-09-09 17:08:24,297 - test_protocol_conformance - WARNING - OVS配置为RSTP但发送STP BPDU，可能是实现限制
2025-09-09 17:08:24,297 - test_protocol_conformance - INFO - 基于配置判断为RSTP
2025-09-09 17:08:24,297 - test_protocol_conformance - INFO - ✓ RSTP协议验证通过（检测到 5 个RSTP BPDU）
2025-09-09 17:08:24,298 - RSTPTest - INFO - 测试完成: test_rstp_protocol_verification (耗时: 52.16秒)
2025-09-09 17:08:24,298 - RSTPTest - INFO - ============================================================

2025-09-09 17:08:24,300 - RSTPTest - INFO - ============================================================
2025-09-09 17:08:24,300 - RSTPTest - INFO - 开始测试: test_alternate_port_verification
2025-09-09 17:08:24,300 - RSTPTest - INFO - ============================================================
2025-09-09 17:08:24,301 - test_protocol_conformance - INFO - 开始Alternate Port验证测试
2025-09-09 17:08:24,301 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 17:08:24,301 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 17:08:24,301 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 17:08:24,301 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 17:08:24,302 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 17:08:24,302 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 17:08:24,302 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 17:08:24,302 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 17:08:24,828 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 17:08:24,829 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 17:08:25,866 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 17:08:25,866 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 17:08:25,866 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 17:08:25,866 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 17:08:26,325 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 17:08:26,805 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 17:08:26,806 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 17:08:26,910 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 17:08:27,005 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 17:08:27,005 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 17:08:27,006 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 17:08:27,006 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 17:08:27,006 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 17:08:27,007 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 17:08:27,007 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 17:08:27,007 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 17:08:27,674 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 17:08:29,155 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 17:08:29,156 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 17:08:29,156 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 17:08:29,156 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 17:08:29,620 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 17:08:30,057 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 17:08:30,058 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 17:08:30,276 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 17:08:30,326 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 17:08:30,374 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 17:08:30,374 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 17:08:30,374 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 17:08:30,375 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 17:08:30,375 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 17:08:30,375 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 17:08:30,375 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 17:08:30,375 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 17:08:30,988 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 17:08:32,423 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 17:08:32,423 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 17:08:32,424 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 17:08:32,424 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 17:08:32,870 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 17:08:33,314 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 17:08:33,314 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 17:08:33,538 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 17:08:33,586 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 17:08:33,637 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 17:08:33,638 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 17:08:33,638 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 17:08:33,638 - test_protocol_conformance - INFO - 设置网桥优先级
2025-09-09 17:08:34,092 - test_protocol_conformance - INFO - 等待RSTP收敛...
2025-09-09 17:08:34,092 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 17:08:34,348 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:08:34,509 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.42秒
2025-09-09 17:08:34,808 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:08:34,966 - test_protocol_conformance - INFO - DUT桥信息: BridgeInfo(bridge_id='', root_id='', root_port='eth2', root_path_cost=0, protocol_version='unknown', hello_time=0, forward_delay=0, max_age=0, topology_changes=0, ports={'eth0': PortInfo(name='eth0', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth2': PortInfo(name='eth2', role=<PortRole.ROOT: 'root'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth3': PortInfo(name='eth3', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')})
2025-09-09 17:08:35,268 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-09 17:08:35,470 - RSTPTest - INFO - 测试完成: test_alternate_port_verification (耗时: 11.17秒)
2025-09-09 17:08:35,470 - RSTPTest - INFO - ============================================================

2025-09-09 17:08:35,472 - RSTPTest - INFO - ============================================================
2025-09-09 17:08:35,472 - RSTPTest - INFO - 开始测试: test_port_state_transitions
2025-09-09 17:08:35,473 - RSTPTest - INFO - ============================================================
2025-09-09 17:08:35,473 - test_protocol_conformance - INFO - 开始端口状态转换测试
2025-09-09 17:08:35,473 - NetworkTopology - INFO - 创建RSTP线性拓扑...
2025-09-09 17:08:35,474 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 17:08:35,474 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 17:08:35,474 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 17:08:35,474 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 17:08:35,474 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 17:08:35,474 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 17:08:35,475 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 17:08:35,956 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 17:08:35,956 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 17:08:36,992 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 17:08:36,992 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 17:08:36,993 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth2']
2025-09-09 17:08:36,993 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 17:08:37,462 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 17:08:37,462 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 17:08:37,566 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 17:08:37,661 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 17:08:37,662 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 17:08:37,662 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 17:08:37,662 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 17:08:37,662 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 17:08:37,662 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 17:08:37,662 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 17:08:37,663 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 17:08:38,350 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 17:08:39,779 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 17:08:39,779 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 17:08:39,780 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 17:08:39,780 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 17:08:40,217 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 17:08:41,146 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 17:08:41,147 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 17:08:41,367 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 17:08:41,415 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 17:08:41,463 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 17:08:41,463 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 17:08:41,464 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 17:08:41,464 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 17:08:41,464 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 17:08:41,464 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 17:08:41,465 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 17:08:41,465 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 17:08:42,135 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 17:08:43,569 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 17:08:43,570 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 17:08:43,570 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0']
2025-09-09 17:08:43,570 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 17:08:43,999 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 17:08:43,999 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 17:08:44,223 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 17:08:44,271 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 17:08:44,318 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 17:08:44,319 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 17:08:44,319 - NetworkTopology - INFO - 线性拓扑创建完成
2025-09-09 17:08:44,649 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-09 17:08:44,649 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 17:08:45,059 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:08:45,213 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.56秒
2025-09-09 17:08:45,512 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:08:45,705 - RSTPTest - INFO - 测试完成: test_port_state_transitions (耗时: 10.23秒)
2025-09-09 17:08:45,705 - RSTPTest - INFO - ============================================================

2025-09-09 17:08:45,708 - RSTPTest - INFO - ============================================================
2025-09-09 17:08:45,708 - RSTPTest - INFO - 开始测试: test_bpdu_propagation_and_keepalive
2025-09-09 17:08:45,708 - RSTPTest - INFO - ============================================================
2025-09-09 17:08:45,709 - test_protocol_conformance - INFO - 开始BPDU传播和保活机制测试
2025-09-09 17:08:45,709 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 17:08:45,709 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 17:08:45,709 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 17:08:45,710 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 17:08:45,710 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 17:08:45,710 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 17:08:45,710 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 17:08:45,711 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 17:08:46,200 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 17:08:46,200 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 17:08:47,232 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 17:08:47,233 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 17:08:47,233 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 17:08:47,233 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 17:08:47,695 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 17:08:48,172 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 17:08:48,173 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 17:08:48,276 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 17:08:48,373 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 17:08:48,373 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 17:08:48,374 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 17:08:48,374 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 17:08:48,374 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 17:08:48,375 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 17:08:48,375 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 17:08:48,375 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 17:08:49,012 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 17:08:50,441 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 17:08:50,441 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 17:08:50,442 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 17:08:50,442 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 17:08:50,856 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 17:08:51,286 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 17:08:51,286 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 17:08:51,487 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 17:08:51,535 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 17:08:51,585 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 17:08:51,585 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 17:08:51,585 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 17:08:51,586 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 17:08:51,586 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 17:08:51,586 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 17:08:51,586 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 17:08:51,586 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 17:08:52,207 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 17:08:53,695 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 17:08:53,696 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 17:08:53,696 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 17:08:53,696 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 17:08:54,115 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 17:08:54,585 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 17:08:54,586 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 17:08:54,800 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 17:08:54,849 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 17:08:54,898 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 17:08:54,899 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 17:08:54,899 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 17:08:55,332 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-09 17:08:55,332 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 17:08:55,593 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:08:55,753 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.42秒
2025-09-09 17:08:56,051 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:08:56,204 - test_protocol_conformance - INFO - Hello Time: 0秒
2025-09-09 17:08:56,205 - test_protocol_conformance - INFO - 开始捕获BPDU报文
2025-09-09 17:08:56,241 - RSTPTest - INFO - 测试完成: test_bpdu_propagation_and_keepalive (耗时: 10.53秒)
2025-09-09 17:08:56,241 - RSTPTest - INFO - ============================================================

2025-09-09 17:08:56,243 - RSTPTest - INFO - ============================================================
2025-09-09 17:08:56,243 - RSTPTest - INFO - 开始测试: test_disabled_port_exclusion
2025-09-09 17:08:56,243 - RSTPTest - INFO - ============================================================
2025-09-09 17:08:56,244 - test_protocol_conformance - INFO - 开始禁用端口排除测试
2025-09-09 17:08:56,244 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 17:08:56,244 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 17:08:56,244 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 17:08:56,245 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 17:08:56,245 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 17:08:56,245 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 17:08:56,245 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 17:08:56,245 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 17:08:56,723 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 17:08:56,724 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 17:08:57,745 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 17:08:57,745 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 17:08:57,745 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 17:08:57,746 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 17:08:58,204 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 17:08:58,684 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 17:08:58,685 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 17:08:58,788 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 17:08:58,884 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 17:08:58,885 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 17:08:58,885 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 17:08:58,885 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 17:08:58,885 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 17:08:58,885 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 17:08:58,886 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 17:08:58,886 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 17:08:59,589 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 17:09:01,069 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 17:09:01,069 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 17:09:01,069 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 17:09:01,070 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 17:09:01,504 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 17:09:01,956 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 17:09:01,957 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 17:09:02,172 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 17:09:02,220 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 17:09:02,268 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 17:09:02,269 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 17:09:02,269 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 17:09:02,269 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 17:09:02,269 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 17:09:02,269 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 17:09:02,269 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 17:09:02,270 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 17:09:02,894 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 17:09:04,318 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 17:09:04,319 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 17:09:04,319 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 17:09:04,319 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 17:09:04,750 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 17:09:05,195 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 17:09:05,196 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 17:09:05,406 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 17:09:05,454 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 17:09:05,501 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 17:09:05,501 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 17:09:05,502 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 17:09:05,754 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-09 17:09:05,754 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 17:09:06,027 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:09:06,180 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.43秒
2025-09-09 17:09:06,479 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:09:06,636 - test_protocol_conformance - INFO - 所有端口信息: {'eth0': PortInfo(name='eth0', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth2': PortInfo(name='eth2', role=<PortRole.ROOT: 'root'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth3': PortInfo(name='eth3', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')}
2025-09-09 17:09:06,790 - test_protocol_conformance - INFO - RSTP show输出 (code=0): 1
1
---- rstp0 ----
Root ID:
  stp-priority    32768
  stp-system-id   52:12:d8:7a:17:40
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    32768
  stp-system-id   52:12:d8:7a:17:40
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------


2025-09-09 17:09:06,791 - test_protocol_conformance - INFO - 初始活动端口: []
2025-09-09 17:09:06,791 - test_protocol_conformance - INFO - 没有找到活动端口，使用所有端口
2025-09-09 17:09:06,791 - test_protocol_conformance - INFO - 选择端口eth0进行禁用测试
2025-09-09 17:09:06,791 - test_protocol_conformance - INFO - 禁用端口eth0
2025-09-09 17:09:06,792 - FaultInjector_DUT - INFO - 断开链路: eth0
2025-09-09 17:09:07,052 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth0 (code=1)，将在逻辑上标记为已断开
2025-09-09 17:09:07,053 - test_protocol_conformance - INFO - 禁用命令结果: ('', '', 0)
2025-09-09 17:09:07,207 - test_protocol_conformance - INFO - 端口eth0配置: stdout='1
1
{rstp-enable="true", stp-enable="true", stp-path-cost="20000"}
', stderr='', code=0
2025-09-09 17:09:22,462 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:09:22,569 - test_protocol_conformance - INFO - 禁用后所有端口状态: [('eth0', 'disabled'), ('eth2', 'disabled'), ('eth3', 'disabled')]
2025-09-09 17:09:22,569 - test_protocol_conformance - INFO - 端口eth0状态: disabled, 角色: root
2025-09-09 17:09:22,569 - test_protocol_conformance - INFO - 禁用后活动端口: []
2025-09-09 17:09:22,570 - test_protocol_conformance - INFO - 活动端口数量: 0, 初始活动端口数量: 3
2025-09-09 17:09:22,570 - test_protocol_conformance - INFO - 禁用后端口角色分布: {}
2025-09-09 17:09:22,880 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-09 17:09:22,992 - test_protocol_conformance - INFO - 重新启用端口eth0
2025-09-09 17:09:22,993 - FaultInjector_DUT - INFO - 恢复链路: eth0
2025-09-09 17:09:23,267 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth0 (code=1)，将在逻辑上标记为已恢复
2025-09-09 17:09:38,523 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:09:38,628 - test_protocol_conformance - INFO - ✓ 端口eth0已重新启用，状态: forwarding
2025-09-09 17:09:38,666 - RSTPTest - INFO - 测试完成: test_disabled_port_exclusion (耗时: 42.42秒)
2025-09-09 17:09:38,666 - RSTPTest - INFO - ============================================================

2025-09-09 17:09:38,668 - RSTPTest - INFO - ============================================================
2025-09-09 17:09:38,668 - RSTPTest - INFO - 开始测试: test_topology_change_notification
2025-09-09 17:09:38,668 - RSTPTest - INFO - ============================================================
2025-09-09 17:09:38,669 - test_protocol_conformance - INFO - 开始拓扑变更通知测试
2025-09-09 17:09:38,670 - test_protocol_conformance - INFO - === 步骤1: 创建多网桥环形拓扑 ===
2025-09-09 17:09:39,017 - test_protocol_conformance - INFO - 创建网桥 rstp1 (优先级: 32768)
2025-09-09 17:09:39,253 - test_protocol_conformance - INFO - 创建网桥 rstp2 (优先级: 36864)
2025-09-09 17:09:39,488 - test_protocol_conformance - INFO - 创建网桥 rstp3 (优先级: 40960)
2025-09-09 17:09:39,928 - test_protocol_conformance - INFO - ✓ 连接 rstp1 <-> rstp2
2025-09-09 17:09:40,368 - test_protocol_conformance - INFO - ✓ 连接 rstp2 <-> rstp3
2025-09-09 17:09:40,829 - test_protocol_conformance - INFO - ✓ 连接 rstp3 <-> rstp1
2025-09-09 17:09:40,829 - test_protocol_conformance - INFO - 等待RSTP初始收敛...
2025-09-09 17:09:50,830 - test_protocol_conformance - INFO - === 步骤2: 验证初始RSTP状态 ===
2025-09-09 17:09:50,838 - test_protocol_conformance - INFO - 
rstp1 初始RSTP状态:
2025-09-09 17:09:50,838 - test_protocol_conformance - INFO -   ---- rstp1 ----
2025-09-09 17:09:50,838 - test_protocol_conformance - INFO -   Root ID:
2025-09-09 17:09:50,839 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-09 17:09:50,839 - test_protocol_conformance - INFO -     stp-system-id   c6:2f:e6:59:cb:45
2025-09-09 17:09:50,840 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-09 17:09:50,840 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-09 17:09:50,840 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-09 17:09:50,840 - test_protocol_conformance - INFO -     This bridge is the root
2025-09-09 17:09:50,840 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-09 17:09:50,841 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-09 17:09:50,841 - test_protocol_conformance - INFO -     stp-system-id   c6:2f:e6:59:cb:45
2025-09-09 17:09:50,841 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-09 17:09:50,841 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-09 17:09:50,841 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-09 17:09:50,841 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-09 17:09:50,842 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-09 17:09:50,842 - test_protocol_conformance - INFO -     veth12a    Designated Forwarding 2000     128.1
2025-09-09 17:09:50,842 - test_protocol_conformance - INFO -     veth31b    Designated Forwarding 2000     128.2
2025-09-09 17:09:50,842 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-09 17:09:50,842 - test_protocol_conformance - INFO -   → 有转发端口
2025-09-09 17:09:50,886 - test_protocol_conformance - INFO - 
rstp2 初始RSTP状态:
2025-09-09 17:09:50,887 - test_protocol_conformance - INFO -   ---- rstp2 ----
2025-09-09 17:09:50,887 - test_protocol_conformance - INFO -   Root ID:
2025-09-09 17:09:50,887 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-09 17:09:50,887 - test_protocol_conformance - INFO -     stp-system-id   c6:2f:e6:59:cb:45
2025-09-09 17:09:50,887 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-09 17:09:50,888 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-09 17:09:50,888 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-09 17:09:50,888 - test_protocol_conformance - INFO -     root-port       veth12b
2025-09-09 17:09:50,888 - test_protocol_conformance - INFO -     root-path-cost  2000
2025-09-09 17:09:50,888 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-09 17:09:50,888 - test_protocol_conformance - INFO -     stp-priority    36864
2025-09-09 17:09:50,889 - test_protocol_conformance - INFO -     stp-system-id   ca:f1:76:c1:e3:45
2025-09-09 17:09:50,889 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-09 17:09:50,889 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-09 17:09:50,889 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-09 17:09:50,889 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-09 17:09:50,889 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-09 17:09:50,889 - test_protocol_conformance - INFO -     veth12b    Root       Forwarding 2000     128.1
2025-09-09 17:09:50,890 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-09 17:09:50,890 - test_protocol_conformance - INFO -   → 有转发端口
2025-09-09 17:09:50,934 - test_protocol_conformance - INFO - 
rstp3 初始RSTP状态:
2025-09-09 17:09:50,934 - test_protocol_conformance - INFO -   ---- rstp3 ----
2025-09-09 17:09:50,935 - test_protocol_conformance - INFO -   Root ID:
2025-09-09 17:09:50,935 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-09 17:09:50,935 - test_protocol_conformance - INFO -     stp-system-id   c6:2f:e6:59:cb:45
2025-09-09 17:09:50,935 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-09 17:09:50,935 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-09 17:09:50,936 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-09 17:09:50,936 - test_protocol_conformance - INFO -     root-port       veth31a
2025-09-09 17:09:50,936 - test_protocol_conformance - INFO -     root-path-cost  2000
2025-09-09 17:09:50,936 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-09 17:09:50,936 - test_protocol_conformance - INFO -     stp-priority    40960
2025-09-09 17:09:50,936 - test_protocol_conformance - INFO -     stp-system-id   be:b7:a8:fc:ae:4f
2025-09-09 17:09:50,936 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-09 17:09:50,936 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-09 17:09:50,937 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-09 17:09:50,937 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-09 17:09:50,937 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-09 17:09:50,937 - test_protocol_conformance - INFO -     veth23b    Alternate  Discarding 2000     128.1
2025-09-09 17:09:50,937 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-09 17:09:50,937 - test_protocol_conformance - INFO -   → 有转发端口
2025-09-09 17:09:50,938 - test_protocol_conformance - INFO -   → 有阻塞端口（防环路）
2025-09-09 17:09:50,938 - test_protocol_conformance - INFO - === 步骤3: 分析网络拓扑 ===
2025-09-09 17:09:50,938 - test_protocol_conformance - INFO - ✓ rstp1 是根桥
2025-09-09 17:09:50,938 - test_protocol_conformance - INFO - ✓ 找到阻塞端口: veth23b
2025-09-09 17:09:50,938 - test_protocol_conformance - INFO - === 步骤4: 触发拓扑变更 ===
2025-09-09 17:09:50,938 - test_protocol_conformance - INFO - 断开活动端口: veth31a
2025-09-09 17:09:56,008 - test_protocol_conformance - INFO - ✓ rstp1 状态已变化
2025-09-09 17:09:56,110 - test_protocol_conformance - INFO - ✓ rstp3 状态已变化
2025-09-09 17:10:01,161 - test_protocol_conformance - INFO - === 步骤5: 验证拓扑变更 ===
2025-09-09 17:10:01,167 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: veth12a, 数量: 5)
2025-09-09 17:10:06,257 - RSTPAnalyzer_DUT - INFO - 捕获到 2 个BPDU包
2025-09-09 17:10:06,257 - test_protocol_conformance - INFO - 在 veth12a 捕获到 2 个BPDU
2025-09-09 17:10:06,258 - test_protocol_conformance - INFO - === 步骤6: 最终验证 ===
2025-09-09 17:10:06,258 - test_protocol_conformance - INFO - ✓ 测试通过：检测到拓扑变更
2025-09-09 17:10:06,307 - test_protocol_conformance - INFO - 
========== rstp1 最终状态 ==========
2025-09-09 17:10:06,308 - test_protocol_conformance - INFO - ---- rstp1 ----
2025-09-09 17:10:06,308 - test_protocol_conformance - INFO - Root ID:
2025-09-09 17:10:06,308 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-09 17:10:06,309 - test_protocol_conformance - INFO -   stp-system-id   c6:2f:e6:59:cb:45
2025-09-09 17:10:06,309 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-09 17:10:06,309 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-09 17:10:06,309 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-09 17:10:06,309 - test_protocol_conformance - INFO -   This bridge is the root
2025-09-09 17:10:06,309 - test_protocol_conformance - INFO - Bridge ID:
2025-09-09 17:10:06,309 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-09 17:10:06,310 - test_protocol_conformance - INFO -   stp-system-id   c6:2f:e6:59:cb:45
2025-09-09 17:10:06,310 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-09 17:10:06,310 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-09 17:10:06,310 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-09 17:10:06,310 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-09 17:10:06,311 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-09 17:10:06,311 - test_protocol_conformance - INFO -   veth12a    Designated Forwarding 2000     128.1
2025-09-09 17:10:06,311 - test_protocol_conformance - INFO -   veth31b    Designated Forwarding 2000     128.2
2025-09-09 17:10:06,358 - test_protocol_conformance - INFO - 
========== rstp2 最终状态 ==========
2025-09-09 17:10:06,359 - test_protocol_conformance - INFO - ---- rstp2 ----
2025-09-09 17:10:06,359 - test_protocol_conformance - INFO - Root ID:
2025-09-09 17:10:06,359 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-09 17:10:06,359 - test_protocol_conformance - INFO -   stp-system-id   c6:2f:e6:59:cb:45
2025-09-09 17:10:06,360 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-09 17:10:06,360 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-09 17:10:06,360 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-09 17:10:06,360 - test_protocol_conformance - INFO -   root-port       veth12b
2025-09-09 17:10:06,360 - test_protocol_conformance - INFO -   root-path-cost  2000
2025-09-09 17:10:06,361 - test_protocol_conformance - INFO - Bridge ID:
2025-09-09 17:10:06,361 - test_protocol_conformance - INFO -   stp-priority    36864
2025-09-09 17:10:06,361 - test_protocol_conformance - INFO -   stp-system-id   ca:f1:76:c1:e3:45
2025-09-09 17:10:06,361 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-09 17:10:06,362 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-09 17:10:06,362 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-09 17:10:06,362 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-09 17:10:06,362 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-09 17:10:06,363 - test_protocol_conformance - INFO -   veth12b    Root       Forwarding 2000     128.1
2025-09-09 17:10:06,363 - test_protocol_conformance - INFO -   veth23a    Designated Forwarding 2000     128.2
2025-09-09 17:10:06,406 - test_protocol_conformance - INFO - 
========== rstp3 最终状态 ==========
2025-09-09 17:10:06,406 - test_protocol_conformance - INFO - ---- rstp3 ----
2025-09-09 17:10:06,406 - test_protocol_conformance - INFO - Root ID:
2025-09-09 17:10:06,406 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-09 17:10:06,407 - test_protocol_conformance - INFO -   stp-system-id   c6:2f:e6:59:cb:45
2025-09-09 17:10:06,407 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-09 17:10:06,407 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-09 17:10:06,407 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-09 17:10:06,407 - test_protocol_conformance - INFO -   root-port       veth31a
2025-09-09 17:10:06,407 - test_protocol_conformance - INFO -   root-path-cost  2000
2025-09-09 17:10:06,407 - test_protocol_conformance - INFO - Bridge ID:
2025-09-09 17:10:06,408 - test_protocol_conformance - INFO -   stp-priority    40960
2025-09-09 17:10:06,408 - test_protocol_conformance - INFO -   stp-system-id   be:b7:a8:fc:ae:4f
2025-09-09 17:10:06,408 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-09 17:10:06,408 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-09 17:10:06,408 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-09 17:10:06,408 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-09 17:10:06,409 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-09 17:10:06,409 - test_protocol_conformance - INFO -   veth23b    Alternate  Discarding 2000     128.1
2025-09-09 17:10:06,409 - test_protocol_conformance - INFO -   veth31a    Root       Forwarding 2000     128.2
2025-09-09 17:10:06,409 - test_protocol_conformance - INFO - 
=== 诊断信息 ===
2025-09-09 17:10:06,458 - test_protocol_conformance - INFO - 系统日志中的STP/RSTP信息:
2025-09-09 17:10:06,459 - test_protocol_conformance - INFO - [452915.989159] rstp0: left promiscuous mode
[452916.544885] rstp0: entered promiscuous mode
[452958.518582] rstp1: entered promiscuous mode
[452958.744791] rstp2: entered promiscuous mode
[452958.981097] rstp3: entered promiscuous mode

2025-09-09 17:10:06,508 - test_protocol_conformance - INFO - OVS日志中的拓扑变更信息:
2025-09-09 17:10:06,508 - test_protocol_conformance - INFO - 2025-09-09T09:10:07.320Z|00370|rstp_sm(handler1486)|DBG|rstp3: move_rstp()
2025-09-09T09:10:07.320Z|00371|rstp_sm(handler1486)|DBG|v1: 8.000.c62fe659cb45, 2000, 9.000.caf176c1e345, 32770, 0
2025-09-09T09:10:07.320Z|00372|rstp_sm(handler1486)|DBG|v2: 8.000.c62fe659cb45, 2000, 9.000.caf176c1e345, 32770, 0
2025-09-09T09:10:07.320Z|00373|rstp_sm(handler1486)|DBG|superior_same
2025-09-09T09:10:07.320Z|00374|rstp_sm(handler1486)|DBG|rstp3, port 1: Port_information_sm 9 -> 17
2025-09-09T09:10:07.320Z|00375|rstp_sm(handler1486)|DBG|rstp3: move_rstp()
2025-09-09T09:10:07.320Z|00376|rstp_sm(handler1486)|DBG|rstp3, port 1: Port_information_sm 17 -> 7
2025-09-09T09:10:07.320Z|00377|rstp_sm(handler1486)|DBG|rstp3: move_rstp()
2025-09-09T09:10:07.320Z|00378|rstp_sm(handler1486)|DBG|rstp3, port 1: Port_information_sm 7 -> 8
2025-09-09T09:10:07.320Z|00379|rstp_sm(handler1486)|DBG|rstp3: move_rstp()
2025-09-09T09:10:07.339Z|8677110|bridge|WARN|rstp0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-09T09:10:07.340Z|8677111|bridge|WARN|br0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-09T09:10:07.350Z|8677115|bridge|WARN|rstp0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-09T09:10:07.350Z|8677116|bridge|WARN|br0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP

2025-09-09 17:10:06,510 - test_protocol_conformance - INFO - === 清理测试环境 ===
2025-09-09 17:10:07,080 - test_protocol_conformance - INFO - 拓扑变更通知测试完成
2025-09-09 17:10:07,081 - RSTPTest - INFO - 测试完成: test_topology_change_notification (耗时: 28.41秒)
2025-09-09 17:10:07,081 - RSTPTest - INFO - ============================================================

2025-09-09 17:10:07,081 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 17:10:07,082 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 17:10:07,082 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 17:10:07,221 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 17:10:07,222 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 17:10:07,347 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 17:10:07,348 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 17:10:07,468 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 17:10:07,469 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 17:10:07,469 - RSTPTest - INFO - ============================================================
2025-09-09 17:10:07,470 - RSTPTest - INFO - 开始测试: test_root_bridge_hijack_attack
2025-09-09 17:10:07,470 - RSTPTest - INFO - ============================================================
2025-09-09 17:10:07,471 - test_security - INFO - 开始根网桥劫持攻击测试
2025-09-09 17:10:07,471 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 17:10:07,471 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 17:10:07,471 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 17:10:07,471 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 17:10:07,471 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 17:10:07,472 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 17:10:07,472 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-09 17:10:07,478 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-09 17:10:07,533 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-09 17:10:07,533 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-09 17:10:07,533 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 17:10:07,533 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 17:10:08,043 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 17:10:08,043 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 17:10:09,079 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 17:10:09,080 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 17:10:09,080 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 17:10:09,080 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 17:10:09,545 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 17:10:10,023 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 17:10:10,024 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 17:10:10,127 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 17:10:10,223 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 17:10:10,224 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 17:10:10,224 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 17:10:10,224 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 17:10:10,224 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 17:10:10,224 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 17:10:10,225 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 17:10:10,233 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 17:10:10,233 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 17:10:10,350 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=1, output=
2025-09-09 17:10:10,350 - NetworkTopology - INFO - TestNode1: 尝试启动mstpd服务...
2025-09-09 17:10:12,632 - NetworkTopology - INFO - TestNode1: mstpd启动后状态: code=1
2025-09-09 17:10:12,632 - NetworkTopology - INFO - TestNode1: mstpd启动失败，可能服务不存在或权限不足
2025-09-09 17:10:12,632 - NetworkTopology - INFO - TestNode1: 检查iproute2支持...
2025-09-09 17:10:12,681 - NetworkTopology - INFO - TestNode1: ip命令检查: code=0
2025-09-09 17:10:12,681 - NetworkTopology - INFO - TestNode1: 使用iproute2配置RSTP
2025-09-09 17:10:12,681 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: iproute2
2025-09-09 17:10:12,682 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 17:10:12,682 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 17:10:13,358 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 17:10:14,722 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 17:10:14,723 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 17:10:14,723 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 17:10:14,723 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 17:10:15,174 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 17:10:15,589 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 17:10:15,589 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 17:10:15,796 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 17:10:15,844 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 17:10:15,891 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 17:10:15,891 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 17:10:15,891 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 17:10:15,892 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 17:10:15,892 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 17:10:15,892 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 17:10:15,892 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 17:10:15,900 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 17:10:15,900 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 17:10:16,020 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=1, output=
2025-09-09 17:10:16,020 - NetworkTopology - INFO - TestNode2: 尝试启动mstpd服务...
2025-09-09 17:10:18,298 - NetworkTopology - INFO - TestNode2: mstpd启动后状态: code=1
2025-09-09 17:10:18,299 - NetworkTopology - INFO - TestNode2: mstpd启动失败，可能服务不存在或权限不足
2025-09-09 17:10:18,299 - NetworkTopology - INFO - TestNode2: 检查iproute2支持...
2025-09-09 17:10:18,346 - NetworkTopology - INFO - TestNode2: ip命令检查: code=0
2025-09-09 17:10:18,347 - NetworkTopology - INFO - TestNode2: 使用iproute2配置RSTP
2025-09-09 17:10:18,347 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: iproute2
2025-09-09 17:10:18,347 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 17:10:18,347 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 17:10:18,984 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 17:10:20,338 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 17:10:20,339 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 17:10:20,339 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 17:10:20,339 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 17:10:20,741 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 17:10:21,161 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 17:10:21,161 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 17:10:21,368 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 17:10:21,418 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 17:10:21,465 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 17:10:21,465 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 17:10:21,465 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 17:10:26,938 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-09 17:10:27,390 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:10:27,548 - test_security - INFO - 初始根网桥: 
2025-09-09 17:10:27,548 - FaultInjector_TestNode1 - WARNING - 注入恶意BPDU到 eth0
2025-09-09 17:10:27,697 - FaultInjector_TestNode1 - WARNING - 恶意BPDU注入已启动 (优先级: 0)
2025-09-09 17:10:42,953 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:10:43,107 - test_security - INFO - 根网桥未被劫持（可能已启用防护）
2025-09-09 17:10:43,107 - test_security - INFO - 根网桥劫持攻击测试完成
2025-09-09 17:10:43,108 - RSTPTest - INFO - 测试完成: test_root_bridge_hijack_attack (耗时: 35.64秒)
2025-09-09 17:10:43,108 - RSTPTest - INFO - ============================================================

2025-09-09 17:10:43,110 - RSTPTest - INFO - ============================================================
2025-09-09 17:10:43,110 - RSTPTest - INFO - 开始测试: test_bpdu_flood_attack
2025-09-09 17:10:43,110 - RSTPTest - INFO - ============================================================
2025-09-09 17:10:43,111 - test_security - INFO - 开始BPDU洪泛攻击测试
2025-09-09 17:10:43,112 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 17:10:43,112 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 17:10:43,112 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 17:10:43,112 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 17:10:43,112 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 17:10:43,113 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 17:10:43,113 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 17:10:43,113 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 17:10:43,617 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 17:10:43,618 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 17:10:44,650 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 17:10:44,651 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 17:10:44,651 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 17:10:44,651 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 17:10:45,107 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 17:10:45,588 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 17:10:45,588 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 17:10:45,691 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 17:10:45,787 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 17:10:45,787 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 17:10:45,787 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 17:10:45,787 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 17:10:45,788 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 17:10:45,788 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 17:10:45,788 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 17:10:45,788 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 17:10:46,403 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 17:10:47,770 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 17:10:47,770 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 17:10:47,770 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 17:10:47,770 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 17:10:48,214 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 17:10:48,629 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 17:10:48,629 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 17:10:48,835 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 17:10:48,883 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 17:10:48,932 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 17:10:48,933 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 17:10:48,933 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 17:10:48,933 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 17:10:48,933 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 17:10:48,933 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 17:10:48,933 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 17:10:48,934 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 17:10:49,540 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 17:10:50,922 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 17:10:50,923 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 17:10:50,923 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 17:10:50,923 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 17:10:51,367 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 17:10:51,814 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 17:10:51,814 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 17:10:52,029 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 17:10:52,077 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 17:10:52,125 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 17:10:52,126 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 17:10:52,126 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 17:10:57,297 - test_security - INFO - 初始CPU使用率: 0.0%
2025-09-09 17:11:07,569 - test_security - INFO - 洪泛时CPU使用率: 0.0%
2025-09-09 17:11:07,867 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-09 17:11:08,023 - test_security - INFO - 网络在BPDU洪泛下保持稳定
2025-09-09 17:11:08,024 - test_security - INFO - BPDU洪泛攻击测试完成
2025-09-09 17:11:08,024 - RSTPTest - INFO - 测试完成: test_bpdu_flood_attack (耗时: 24.91秒)
2025-09-09 17:11:08,025 - RSTPTest - INFO - ============================================================

2025-09-09 17:11:08,026 - RSTPTest - INFO - ============================================================
2025-09-09 17:11:08,026 - RSTPTest - INFO - 开始测试: test_topology_change_attack
2025-09-09 17:11:08,026 - RSTPTest - INFO - ============================================================
2025-09-09 17:11:08,027 - test_security - INFO - 开始拓扑变更攻击测试
2025-09-09 17:11:08,027 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 17:11:08,027 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 17:11:08,027 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 17:11:08,027 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 17:11:08,027 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 17:11:08,028 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 17:11:08,028 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 17:11:08,028 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 17:11:08,546 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 17:11:08,546 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 17:11:09,567 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 17:11:09,567 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 17:11:09,567 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 17:11:09,568 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 17:11:10,026 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 17:11:10,503 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 17:11:10,503 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 17:11:10,606 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 17:11:10,702 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 17:11:10,703 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 17:11:10,703 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 17:11:10,703 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 17:11:10,703 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 17:11:10,703 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 17:11:10,703 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 17:11:10,704 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 17:11:11,385 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 17:11:12,854 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 17:11:12,855 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 17:11:12,855 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 17:11:12,855 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 17:11:13,303 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 17:11:13,767 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 17:11:13,767 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 17:11:13,999 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 17:11:14,050 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 17:11:14,104 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 17:11:14,105 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 17:11:14,105 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 17:11:14,105 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 17:11:14,106 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 17:11:14,106 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 17:11:14,106 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 17:11:14,107 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 17:11:14,777 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 17:11:16,245 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 17:11:16,245 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 17:11:16,246 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 17:11:16,246 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 17:11:16,685 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 17:11:17,111 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 17:11:17,112 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 17:11:17,339 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 17:11:17,386 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 17:11:17,435 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 17:11:17,435 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 17:11:17,435 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 17:11:22,693 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:11:22,850 - test_security - INFO - 触发快速拓扑变更...
2025-09-09 17:11:45,977 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:11:46,134 - test_security - INFO - 检测到0次拓扑变更
2025-09-09 17:11:46,433 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-09 17:11:46,590 - test_security - INFO - 网络在频繁拓扑变更后保持稳定
2025-09-09 17:11:46,591 - test_security - INFO - 拓扑变更攻击测试完成
2025-09-09 17:11:46,591 - RSTPTest - INFO - 测试完成: test_topology_change_attack (耗时: 38.57秒)
2025-09-09 17:11:46,592 - RSTPTest - INFO - ============================================================

2025-09-09 17:11:46,593 - RSTPTest - INFO - ============================================================
2025-09-09 17:11:46,594 - RSTPTest - INFO - 开始测试: test_mac_spoofing
2025-09-09 17:11:46,594 - RSTPTest - INFO - ============================================================
2025-09-09 17:11:46,594 - test_security - INFO - 开始MAC地址欺骗测试
2025-09-09 17:11:46,594 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 17:11:46,594 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 17:11:46,595 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 17:11:46,595 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 17:11:46,595 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 17:11:46,595 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 17:11:46,595 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 17:11:46,595 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 17:11:47,097 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 17:11:47,097 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 17:11:48,141 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 17:11:48,142 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 17:11:48,142 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 17:11:48,142 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 17:11:48,602 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 17:11:49,085 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 17:11:49,085 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 17:11:49,189 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 17:11:49,286 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 17:11:49,286 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 17:11:49,287 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 17:11:49,287 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 17:11:49,287 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 17:11:49,287 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 17:11:49,288 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 17:11:49,288 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 17:11:49,868 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 17:11:51,177 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 17:11:51,178 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 17:11:51,178 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 17:11:51,178 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 17:11:51,583 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 17:11:51,970 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 17:11:51,970 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 17:11:52,169 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 17:11:52,216 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 17:11:52,265 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 17:11:52,265 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 17:11:52,265 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 17:11:52,266 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 17:11:52,266 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 17:11:52,266 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 17:11:52,266 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 17:11:52,267 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 17:11:52,869 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 17:11:54,209 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 17:11:54,209 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 17:11:54,210 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 17:11:54,210 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 17:11:54,749 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 17:11:55,166 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 17:11:55,166 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 17:11:55,372 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 17:11:55,420 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 17:11:55,468 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 17:11:55,468 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 17:11:55,469 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 17:12:00,476 - test_security - INFO - DUT MAC地址: 90:12:10:b5:7d:f7
2025-09-09 17:12:00,476 - test_security - INFO - 尝试MAC地址欺骗...
2025-09-09 17:12:06,368 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-09 17:12:06,522 - test_security - INFO - 网络对MAC欺骗具有抗性
2025-09-09 17:12:08,848 - test_security - INFO - MAC地址欺骗测试完成
2025-09-09 17:12:08,849 - RSTPTest - INFO - 测试完成: test_mac_spoofing (耗时: 22.26秒)
2025-09-09 17:12:08,849 - RSTPTest - INFO - ============================================================

2025-09-09 17:12:08,851 - RSTPTest - INFO - ============================================================
2025-09-09 17:12:08,851 - RSTPTest - INFO - 开始测试: test_port_security
2025-09-09 17:12:08,851 - RSTPTest - INFO - ============================================================
2025-09-09 17:12:08,852 - test_security - INFO - 开始端口安全测试
2025-09-09 17:12:08,857 - test_security - WARNING - 未检测到任何端口安全功能
2025-09-09 17:12:08,858 - RSTPTest - INFO - 测试完成: test_port_security (耗时: 0.01秒)
2025-09-09 17:12:08,858 - RSTPTest - INFO - ============================================================

2025-09-09 17:12:08,859 - RSTPTest - INFO - ============================================================
2025-09-09 17:12:08,860 - RSTPTest - INFO - 开始测试: test_bpdu_filter_functionality
2025-09-09 17:12:08,860 - RSTPTest - INFO - ============================================================
2025-09-09 17:12:08,861 - test_security - INFO - 开始BPDU过滤器功能测试
2025-09-09 17:12:08,904 - NetworkTopology - INFO - 创建RSTP线性拓扑...
2025-09-09 17:12:08,905 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 17:12:08,905 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 17:12:08,905 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 17:12:08,905 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 17:12:08,905 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 17:12:08,906 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 17:12:08,906 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 17:12:09,421 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 17:12:09,421 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 17:12:10,466 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 17:12:10,466 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 17:12:10,466 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth2']
2025-09-09 17:12:10,467 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 17:12:10,921 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 17:12:10,922 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 17:12:11,026 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 17:12:11,122 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 17:12:11,122 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 17:12:11,123 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 17:12:11,123 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 17:12:11,123 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 17:12:11,123 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 17:12:11,123 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 17:12:11,124 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 17:12:17,840 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 17:12:19,278 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 17:12:19,279 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 17:12:19,279 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 17:12:19,279 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 17:12:19,721 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 17:12:20,171 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 17:12:20,171 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 17:12:20,384 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 17:12:20,431 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 17:12:20,479 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 17:12:20,479 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 17:12:20,480 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 17:12:20,480 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 17:12:20,480 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 17:12:20,480 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 17:12:20,480 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 17:12:20,481 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 17:12:21,125 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 17:12:22,559 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 17:12:22,560 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 17:12:22,560 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0']
2025-09-09 17:12:22,560 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 17:12:22,993 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 17:12:22,993 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 17:12:23,214 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 17:12:23,261 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 17:12:23,310 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 17:12:23,310 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 17:12:23,310 - NetworkTopology - INFO - 线性拓扑创建完成
2025-09-09 17:12:28,438 - test_security - WARNING - BPDU包统计命令执行失败: 
2025-09-09 17:12:28,439 - test_security - INFO - 启用过滤器前端口 eth2 BPDU数量: 0
2025-09-09 17:12:28,566 - test_security - WARNING - mstpctl设置BPDU过滤器失败，尝试使用brctl
2025-09-09 17:12:28,662 - test_security - ERROR - 启用BPDU过滤器失败: BPDU过滤器配置失败: 
2025-09-09 17:12:28,662 - test_security - ERROR - 启用BPDU过滤器失败: BPDU过滤器配置失败: 
2025-09-09 17:12:28,805 - test_security - WARNING - 清理命令执行失败: mstpctl setportbpdufilter br0 eth2 no, 错误: 
2025-09-09 17:12:28,946 - test_security - WARNING - 清理命令执行失败: echo 0 > /sys/class/net/br0/bridge/ports/eth2/bpdu_filter, 错误: 
2025-09-09 17:12:28,980 - RSTPTest - INFO - 测试完成: test_bpdu_filter_functionality (耗时: 20.12秒)
2025-09-09 17:12:28,980 - RSTPTest - INFO - ============================================================

2025-09-09 17:12:28,983 - RSTPTest - INFO - ============================================================
2025-09-09 17:12:28,983 - RSTPTest - INFO - 开始测试: test_malformed_bpdu_handling
2025-09-09 17:12:28,983 - RSTPTest - INFO - ============================================================
2025-09-09 17:12:28,984 - test_security - INFO - 开始畸形BPDU处理测试
2025-09-09 17:12:28,992 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 17:12:28,992 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 17:12:28,992 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 17:12:28,992 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 17:12:28,993 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 17:12:28,993 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 17:12:28,993 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 17:12:28,993 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 17:12:29,500 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 17:12:29,500 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 17:12:30,525 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 17:12:30,526 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 17:12:30,526 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 17:12:30,526 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 17:12:30,985 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 17:12:31,465 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 17:12:31,466 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 17:12:31,569 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 17:12:31,665 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 17:12:31,666 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 17:12:31,666 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 17:12:31,666 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 17:12:31,666 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 17:12:31,667 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 17:12:31,667 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 17:12:31,667 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 17:12:32,303 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 17:12:33,717 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 17:12:33,718 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 17:12:33,718 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 17:12:33,718 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 17:12:34,166 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 17:12:34,598 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 17:12:34,598 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 17:12:34,801 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 17:12:34,850 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 17:12:34,898 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 17:12:34,898 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 17:12:34,898 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 17:12:34,899 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 17:12:34,899 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 17:12:34,899 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 17:12:34,900 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 17:12:34,900 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 17:12:35,553 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 17:12:36,992 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 17:12:36,992 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 17:12:36,992 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 17:12:36,993 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 17:12:37,434 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 17:12:37,874 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 17:12:37,874 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 17:12:38,113 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 17:12:38,165 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 17:12:38,214 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 17:12:38,215 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 17:12:38,215 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 17:12:43,471 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:12:43,919 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-09 17:12:44,073 - test_security - INFO - 初始网络状态: 稳定
2025-09-09 17:12:44,074 - test_security - INFO - 执行测试: _test_oversized_bpdu
2025-09-09 17:12:48,655 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-09 17:12:48,809 - test_security - INFO - _test_oversized_bpdu 网络保持稳定
2025-09-09 17:12:48,810 - test_security - INFO - 执行测试: _test_undersized_bpdu
2025-09-09 17:12:48,816 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

# 创建过小的BPDU（缺少必要字段）
target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 只包含最小字段的BPDU
truncated_bpdu = Raw(load=b"     ")  # 截断的BPDU

packet = eth/llc/truncated_bpdu
sendp(packet, iface=interface, count=5, inter=1, verbose=0)
print("Undersized BPDU sent")
' > /tmp/undersized_bpdu.py
错误: 
2025-09-09 17:12:48,817 - test_security - ERROR - _test_undersized_bpdu 执行失败: 
2025-09-09 17:12:48,817 - test_security - INFO - 执行测试: _test_invalid_protocol_id
2025-09-09 17:12:48,817 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 使用无效的协议ID（正常应该是0x0000）
invalid_bpdu = Raw(load=b"ÿÿ   " + b" " * 30)

packet = eth/llc/invalid_bpdu
sendp(packet, iface=interface, count=5, inter=1, verbose=0)
print("Invalid protocol ID BPDU sent")
' > /tmp/invalid_protocol.py
错误: SSH session not active
2025-09-09 17:12:48,818 - test_security - ERROR - _test_invalid_protocol_id 执行失败: SSH session not active
2025-09-09 17:12:48,818 - test_security - INFO - 执行测试: _test_invalid_version
2025-09-09 17:12:48,819 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 使用无效版本号（正常RSTP应该是2）
invalid_version_bpdu = Raw(load=b"  ÿ  " + b" " * 30)

packet = eth/llc/invalid_version_bpdu
sendp(packet, iface=interface, count=5, inter=1, verbose=0)
print("Invalid version BPDU sent")
' > /tmp/invalid_version.py
错误: SSH session not active
2025-09-09 17:12:48,819 - test_security - ERROR - _test_invalid_version 执行失败: SSH session not active
2025-09-09 17:12:48,820 - test_security - INFO - 执行测试: _test_invalid_message_type
2025-09-09 17:12:48,820 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 使用无效消息类型（正常配置BPDU是0x00，TCN是0x80）
invalid_type_bpdu = Raw(load=b"  ÿ " + b" " * 30)

packet = eth/llc/invalid_type_bpdu
sendp(packet, iface=interface, count=5, inter=1, verbose=0)
print("Invalid message type BPDU sent")
' > /tmp/invalid_type.py
错误: SSH session not active
2025-09-09 17:12:48,820 - test_security - ERROR - _test_invalid_message_type 执行失败: SSH session not active
2025-09-09 17:12:48,821 - test_security - INFO - 执行测试: _test_corrupted_fields
2025-09-09 17:12:48,821 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *
import random

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)

# 创建包含随机损坏数据的BPDU
corrupted_data = bytes([random.randint(0, 255) for _ in range(36)])
corrupted_bpdu = Raw(load=corrupted_data)

packet = eth/llc/corrupted_bpdu
sendp(packet, iface=interface, count=5, inter=1, verbose=0)
print("Corrupted BPDU sent")
' > /tmp/corrupted_bpdu.py
错误: SSH session not active
2025-09-09 17:12:48,822 - test_security - ERROR - _test_corrupted_fields 执行失败: SSH session not active
2025-09-09 17:12:51,989 - RSTPTest - INFO - 测试完成: test_malformed_bpdu_handling (耗时: 23.01秒)
2025-09-09 17:12:51,989 - RSTPTest - INFO - ============================================================

2025-09-09 17:12:51,991 - RSTPTest - INFO - ============================================================
2025-09-09 17:12:51,991 - RSTPTest - INFO - 开始测试: test_non_standard_bpdu_handling
2025-09-09 17:12:51,992 - RSTPTest - INFO - ============================================================
2025-09-09 17:12:51,992 - test_security - INFO - 开始非标准BPDU处理测试
2025-09-09 17:12:51,997 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 17:12:51,997 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 17:12:51,997 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 17:12:51,998 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 17:12:51,998 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 17:12:51,998 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 17:12:51,998 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 17:12:51,998 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 17:12:52,504 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 17:12:52,505 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 17:12:53,552 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 17:12:53,552 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 17:12:53,552 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 17:12:53,552 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 17:12:54,016 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 17:12:54,505 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 17:12:54,505 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 17:12:54,609 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 17:12:54,705 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 17:12:54,705 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 17:12:54,706 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 17:12:54,706 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 17:12:54,706 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 17:12:54,707 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 17:12:54,707 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 17:12:54,707 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 17:12:54,708 - SSH_TestNode1 - WARNING - TestNode1: SSH连接已断开，尝试重连...
2025-09-09 17:12:54,835 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 17:12:54,969 - SSH_TestNode1 - INFO - TestNode1: SSH重连成功
2025-09-09 17:12:55,604 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 17:12:56,956 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 17:12:56,957 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 17:12:56,957 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 17:12:56,957 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 17:12:57,381 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 17:12:57,811 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 17:12:57,812 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 17:12:58,032 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 17:12:58,080 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 17:12:58,128 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 17:12:58,128 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 17:12:58,129 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 17:12:58,129 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 17:12:58,129 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 17:12:58,129 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 17:12:58,129 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 17:12:58,129 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 17:12:58,823 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 17:13:00,225 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 17:13:00,225 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 17:13:00,225 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 17:13:00,226 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 17:13:00,636 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 17:13:01,049 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 17:13:01,050 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 17:13:01,254 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 17:13:01,302 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 17:13:01,350 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 17:13:01,350 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 17:13:01,351 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 17:13:06,351 - test_security - INFO - 执行测试: _test_pvst_plus_bpdu
2025-09-09 17:13:06,358 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

# PVST+ 使用不同的目标MAC地址
pvst_mac = "01:00:0c:cc:cc:cd"
interface = "eth0"

eth = Ether(dst=pvst_mac, src="00:11:22:33:44:55")
# PVST+ 使用SNAP封装
snap = SNAP(OUI=0x00000c, code=0x010b)
# 模拟PVST+ BPDU结构
pvst_bpdu = Raw(load=b"    " + b" " * 30 + b" ")  # 包含VLAN ID

packet = eth/snap/pvst_bpdu
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("PVST+ BPDU sent")
' > /tmp/pvst_bpdu.py
错误: 
2025-09-09 17:13:06,359 - test_security - ERROR - _test_pvst_plus_bpdu 执行失败: 
2025-09-09 17:13:06,359 - test_security - INFO - 执行测试: _test_cisco_proprietary_bpdu
2025-09-09 17:13:06,359 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 模拟包含Cisco专有扩展的BPDU
cisco_bpdu = Raw(load=b"    " + b" " * 30 + 
                     b" )   ")  # Cisco OUI + 专有数据

packet = eth/llc/cisco_bpdu
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("Cisco proprietary BPDU sent")
' > /tmp/cisco_bpdu.py
错误: SSH session not active
2025-09-09 17:13:06,360 - test_security - ERROR - _test_cisco_proprietary_bpdu 执行失败: SSH session not active
2025-09-09 17:13:06,360 - test_security - INFO - 执行测试: _test_vlan_tagged_bpdu
2025-09-09 17:13:06,361 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
# 添加VLAN标签
vlan = Dot1Q(vlan=100)
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
bpdu = STP(bpdutype=0x00, rootid=32768, bridgeid=32768)

packet = eth/vlan/llc/bpdu
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("VLAN tagged BPDU sent")
' > /tmp/vlan_bpdu.py
错误: SSH session not active
2025-09-09 17:13:06,362 - test_security - ERROR - _test_vlan_tagged_bpdu 执行失败: SSH session not active
2025-09-09 17:13:06,362 - test_security - INFO - 执行测试: _test_unknown_tlv_bpdu
2025-09-09 17:13:06,362 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 标准BPDU + 未知TLV
standard_bpdu = b"    " + b" " * 30
unknown_tlv = b"ÿÿ "  # 未知类型和长度的TLV
bpdu_with_tlv = Raw(load=standard_bpdu + unknown_tlv)

packet = eth/llc/bpdu_with_tlv
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("BPDU with unknown TLV sent")
' > /tmp/unknown_tlv.py
错误: SSH session not active
2025-09-09 17:13:06,363 - test_security - ERROR - _test_unknown_tlv_bpdu 执行失败: SSH session not active
2025-09-09 17:13:06,578 - test_security - INFO - 非标准BPDU处理测试完成
2025-09-09 17:13:06,579 - RSTPTest - INFO - 测试完成: test_non_standard_bpdu_handling (耗时: 14.59秒)
2025-09-09 17:13:06,580 - RSTPTest - INFO - ============================================================

2025-09-09 17:13:06,581 - RSTPTest - INFO - ============================================================
2025-09-09 17:13:06,581 - RSTPTest - INFO - 开始测试: test_bpdu_guard_functionality
2025-09-09 17:13:06,581 - RSTPTest - INFO - ============================================================
2025-09-09 17:13:06,582 - test_security - INFO - 开始BPDU防护功能测试
2025-09-09 17:13:06,619 - NetworkTopology - INFO - 创建RSTP线性拓扑...
2025-09-09 17:13:06,619 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 17:13:06,619 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 17:13:06,620 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 17:13:06,620 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 17:13:06,620 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 17:13:06,620 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 17:13:06,621 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 17:13:07,267 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 17:13:07,268 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 17:13:08,312 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 17:13:08,312 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 17:13:08,312 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth2']
2025-09-09 17:13:08,312 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 17:13:08,773 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 17:13:08,773 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 17:13:08,876 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 17:13:08,972 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 17:13:08,973 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 17:13:08,973 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 17:13:08,973 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 17:13:08,973 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 17:13:08,974 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 17:13:08,974 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 17:13:08,974 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 17:13:08,974 - SSH_TestNode1 - WARNING - TestNode1: SSH连接已断开，尝试重连...
2025-09-09 17:13:09,110 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 17:13:09,254 - SSH_TestNode1 - INFO - TestNode1: SSH重连成功
2025-09-09 17:13:09,850 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 17:13:11,221 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 17:13:11,222 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 17:13:11,222 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 17:13:11,222 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 17:13:11,664 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 17:13:12,105 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 17:13:12,106 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 17:13:12,306 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 17:13:12,354 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 17:13:12,402 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 17:13:12,403 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 17:13:12,403 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 17:13:12,403 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 17:13:12,404 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 17:13:12,404 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 17:13:12,404 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 17:13:12,404 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 17:13:13,051 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 17:13:14,523 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 17:13:14,523 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 17:13:14,523 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0']
2025-09-09 17:13:14,524 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 17:13:14,971 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 17:13:14,972 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 17:13:15,198 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 17:13:15,246 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 17:13:15,296 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 17:13:15,296 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 17:13:15,296 - NetworkTopology - INFO - 线性拓扑创建完成
2025-09-09 17:13:20,352 - test_security - WARNING - 启用BPDU防护失败: 
2025-09-09 17:13:20,401 - test_security - INFO - 边缘端口 eth2 初始状态: unknown
2025-09-09 17:13:20,401 - test_security - INFO - 向边缘端口 eth2 发送BPDU
2025-09-09 17:13:27,381 - test_security - INFO - BPDU防护触发后端口 eth2 状态: unknown
2025-09-09 17:13:27,381 - test_security - ERROR - BPDU防护功能异常：端口未被禁用
2025-09-09 17:13:27,607 - RSTPTest - INFO - 测试完成: test_bpdu_guard_functionality (耗时: 21.03秒)
2025-09-09 17:13:27,607 - RSTPTest - INFO - ============================================================

2025-09-09 17:13:27,609 - RSTPTest - INFO - ============================================================
2025-09-09 17:13:27,610 - RSTPTest - INFO - 开始测试: test_root_guard_functionality
2025-09-09 17:13:27,610 - RSTPTest - INFO - ============================================================
2025-09-09 17:13:27,611 - test_security - INFO - 开始根防护功能测试
2025-09-09 17:13:27,635 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 17:13:27,635 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 17:13:27,636 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 17:13:27,636 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 17:13:27,636 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 17:13:27,636 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 17:13:27,637 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 17:13:27,637 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 17:13:28,148 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 17:13:28,148 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 17:13:29,181 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 17:13:29,181 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 17:13:29,181 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 17:13:29,182 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 17:13:29,645 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 17:13:30,125 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 17:13:30,125 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 17:13:30,228 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 17:13:30,324 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 17:13:30,324 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 17:13:30,325 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 17:13:30,325 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 17:13:30,325 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 17:13:30,326 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 17:13:30,326 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 17:13:30,326 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 17:13:30,955 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 17:13:32,400 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 17:13:32,400 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 17:13:32,401 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 17:13:32,401 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 17:13:32,857 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 17:13:33,292 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 17:13:33,293 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 17:13:33,494 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 17:13:33,543 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 17:13:33,590 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 17:13:33,591 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 17:13:33,591 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 17:13:33,591 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 17:13:33,592 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 17:13:33,592 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 17:13:33,592 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 17:13:33,592 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 17:13:34,212 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 17:13:35,639 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 17:13:35,640 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 17:13:35,640 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 17:13:35,640 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 17:13:36,131 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 17:13:36,605 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 17:13:36,605 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 17:13:36,807 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 17:13:36,856 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 17:13:36,904 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 17:13:36,904 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 17:13:36,905 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 17:13:42,159 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:13:42,316 - test_security - INFO - 当前根桥ID: 
2025-09-09 17:13:42,417 - test_security - WARNING - 启用根防护失败: 
2025-09-09 17:13:42,418 - test_security - INFO - 在端口 eth1 启用根防护
2025-09-09 17:13:42,464 - test_security - INFO - 端口 eth1 初始状态: unknown
2025-09-09 17:13:42,464 - test_security - INFO - 发送更优BPDU尝试劫持根桥
2025-09-09 17:13:58,380 - test_security - INFO - 根防护触发后端口 eth1 状态: unknown
2025-09-09 17:13:58,678 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 17:13:58,832 - test_security - INFO - 根防护功能正常：根桥身份未被劫持
2025-09-09 17:13:58,832 - test_security - ERROR - 根防护功能异常：端口未进入阻塞状态
2025-09-09 17:13:58,833 - test_security - INFO - 测试根防护端口 eth1 恢复功能
2025-09-09 17:13:58,833 - test_security - INFO - 停止发送更优BPDU
2025-09-09 17:14:08,839 - test_security - INFO - 端口恢复后状态: unknown
2025-09-09 17:14:08,839 - test_security - WARNING - 根防护端口未能自动恢复
2025-09-09 17:14:09,067 - RSTPTest - INFO - 测试完成: test_root_guard_functionality (耗时: 41.46秒)
2025-09-09 17:14:09,067 - RSTPTest - INFO - ============================================================

2025-09-09 17:14:09,069 - RSTPTest - INFO - ============================================================
2025-09-09 17:14:09,069 - RSTPTest - INFO - 开始测试: test_loop_guard_functionality
2025-09-09 17:14:09,069 - RSTPTest - INFO - ============================================================
2025-09-09 17:14:09,070 - test_security - INFO - 开始环路防护功能测试
2025-09-09 17:14:09,070 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 17:14:09,070 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 17:14:09,070 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 17:14:09,071 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 17:14:09,071 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 17:14:09,071 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-09 17:14:09,071 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-09 17:14:09,071 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 17:14:09,575 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-09 17:14:09,576 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-09 17:14:10,608 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-09 17:14:10,608 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 17:14:10,608 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 17:14:10,608 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 17:14:11,067 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 17:14:11,546 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 17:14:11,546 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 17:14:11,651 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 17:14:11,747 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 17:14:11,748 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 17:14:11,748 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 17:14:11,748 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 17:14:11,748 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 17:14:11,749 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 17:14:11,749 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 17:14:11,749 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 17:14:12,325 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 17:14:13,654 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 17:14:13,654 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 17:14:13,654 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 17:14:13,655 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 17:14:14,096 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 17:14:14,513 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 17:14:14,513 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 17:14:14,727 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 17:14:14,776 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 17:14:14,824 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 17:14:14,824 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 17:14:14,825 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 17:14:14,825 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 17:14:14,825 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 17:14:14,825 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 17:14:14,825 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 17:14:14,825 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 17:14:15,451 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 17:14:16,840 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 17:14:16,840 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 17:14:16,840 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 17:14:16,841 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 17:14:17,253 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 17:14:17,674 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 17:14:17,674 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 17:14:17,886 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 17:14:17,934 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 17:14:17,983 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 17:14:17,983 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 17:14:17,983 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 17:14:23,040 - test_security - WARNING - 启用环路防护失败: 
2025-09-09 17:14:23,040 - test_security - INFO - 在端口 eth1 启用环路防护
2025-09-09 17:14:23,087 - test_security - INFO - 端口 eth1 初始状态: unknown
2025-09-09 17:14:23,088 - test_security - INFO - 模拟单向链路故障
2025-09-09 17:14:23,088 - test_security - INFO - 停止从测试节点发送BPDU
2025-09-09 17:14:43,250 - test_security - INFO - 环路防护触发后端口 eth1 状态: unknown
2025-09-09 17:14:43,251 - test_security - WARNING - 环路防护功能异常：端口未进入阻塞状态
2025-09-09 17:14:43,251 - test_security - INFO - 测试环路防护端口 eth1 恢复功能
2025-09-09 17:14:43,251 - test_security - INFO - 恢复BPDU发送
2025-09-09 17:14:53,423 - test_security - INFO - 端口恢复后状态: unknown
2025-09-09 17:14:53,424 - test_security - WARNING - 环路防护端口未能自动恢复
2025-09-09 17:14:53,630 - test_security - INFO - 环路防护功能测试完成
2025-09-09 17:14:53,631 - RSTPTest - INFO - 测试完成: test_loop_guard_functionality (耗时: 44.56秒)
2025-09-09 17:14:53,632 - RSTPTest - INFO - ============================================================

2025-09-09 17:14:53,632 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 17:14:53,632 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 17:14:53,633 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 17:14:54,179 - __main__ - INFO - ============================================================
2025-09-09 17:14:54,179 - __main__ - INFO - 测试完成，返回码: 1
2025-09-09 17:14:54,179 - __main__ - INFO - ============================================================
