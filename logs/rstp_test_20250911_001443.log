2025-09-11 00:14:43,255 - root - INFO - 日志系统初始化完成，日志文件: logs\rstp_test_20250911_001443.log
2025-09-11 00:14:43,497 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-11 00:14:43,497 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-11 00:14:43,616 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-11 00:14:43,616 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-11 00:14:43,750 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-11 00:14:43,751 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-11 00:14:43,751 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 00:14:43,752 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 00:14:43,752 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-11 00:14:43,752 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-11 00:14:43,814 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-11 00:14:43,814 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-11 00:14:44,062 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-11 00:14:44,062 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-11 00:14:44,063 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-11 00:14:44,063 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-11 00:14:44,063 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-11 00:14:44,354 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-11 00:14:44,355 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-11 00:14:44,525 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-11 00:14:44,525 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-11 00:14:44,526 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-11 00:14:44,526 - RSTPTest - INFO - ============================================================
2025-09-11 00:14:44,526 - RSTPTest - INFO - 开始测试: test_port_state_transitions
2025-09-11 00:14:44,526 - RSTPTest - INFO - ============================================================
2025-09-11 00:14:44,527 - test_additional_rstp - INFO - 开始端口状态转换测试
2025-09-11 00:14:44,527 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 00:14:44,528 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 00:14:44,528 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 00:14:44,528 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 00:14:44,528 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 00:14:44,528 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 00:14:44,528 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 00:14:44,529 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 00:14:44,529 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 00:14:45,028 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 00:14:45,028 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 00:14:45,028 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 00:14:45,183 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 00:14:46,274 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 00:14:46,275 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 00:14:46,275 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 00:14:46,275 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 00:14:46,275 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 00:14:46,747 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 00:14:47,227 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 00:14:47,228 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 00:14:47,420 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 00:14:47,420 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 00:14:47,420 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 00:14:47,420 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 00:14:47,420 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 00:14:47,421 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 00:14:47,421 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 00:14:47,421 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 00:14:48,192 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 00:14:52,861 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:14:52,987 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:14:52,988 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 00:14:52,988 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 00:14:52,988 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:14:52,988 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 00:14:54,166 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 00:14:55,347 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 00:14:55,347 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 00:14:55,443 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 00:14:55,709 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 00:14:55,710 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 00:14:55,710 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 00:14:55,710 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 00:14:55,710 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 00:14:55,711 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 00:14:55,711 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 00:14:55,711 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 00:14:56,220 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 00:15:00,729 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:15:00,859 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:15:00,859 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 00:15:00,859 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 00:15:00,860 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:15:00,860 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 00:15:02,044 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 00:15:03,269 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 00:15:03,270 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 00:15:03,365 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 00:15:03,629 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 00:15:03,629 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 00:15:03,630 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 00:15:03,630 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-11 00:15:03,630 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级12288 -> mstpd优先级3)
2025-09-11 00:15:03,759 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 00:15:03,759 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 32768 (方法: ovs)
2025-09-11 00:15:03,760 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 00:15:03,887 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 00:15:09,040 - test_additional_rstp - INFO - 使用网桥: SE_ETH2
2025-09-11 00:15:09,040 - test_additional_rstp - INFO - === 步骤1: 禁用端口触发状态转换 ===
2025-09-11 00:15:09,450 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:15:09,602 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:15:09,603 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 00:15:09,603 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:15:09,604 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 00:15:09,604 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:15:10,067 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:15:10,067 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:15:10,068 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:15:10,068 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:15:10,069 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:15:10,069 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:15:10,362 - RSTPTest - INFO - 测试完成: test_port_state_transitions (耗时: 25.84秒)
2025-09-11 00:15:10,362 - RSTPTest - INFO - ============================================================

2025-09-11 00:15:10,364 - RSTPTest - INFO - ============================================================
2025-09-11 00:15:10,365 - RSTPTest - INFO - 开始测试: test_bpdu_propagation_and_keepalive
2025-09-11 00:15:10,365 - RSTPTest - INFO - ============================================================
2025-09-11 00:15:10,366 - test_additional_rstp - INFO - 开始BPDU传播和保活机制测试
2025-09-11 00:15:10,367 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 00:15:10,367 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 00:15:10,367 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 00:15:10,367 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 00:15:10,368 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 00:15:10,368 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 00:15:10,368 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 00:15:10,368 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 00:15:10,369 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 00:15:10,890 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 00:15:10,891 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 00:15:10,891 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 00:15:11,051 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 00:15:12,131 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 00:15:12,131 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 00:15:12,131 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 00:15:12,132 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 00:15:12,132 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 00:15:12,611 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 00:15:13,086 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 00:15:13,087 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 00:15:13,279 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 00:15:13,280 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 00:15:13,280 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 00:15:13,280 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 00:15:13,280 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 00:15:13,281 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 00:15:13,281 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 00:15:13,281 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 00:15:13,780 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 00:15:18,319 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:15:18,449 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:15:18,449 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 00:15:18,449 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 00:15:18,450 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:15:18,450 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 00:15:19,658 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 00:15:20,849 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 00:15:20,849 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 00:15:20,943 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 00:15:21,207 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 00:15:21,208 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 00:15:21,208 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 00:15:21,208 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 00:15:21,208 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 00:15:21,208 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 00:15:21,209 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 00:15:21,209 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 00:15:21,688 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 00:16:55,739 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:17:05,816 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:17:05,817 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 00:17:05,817 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 00:17:05,817 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:17:05,817 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 00:18:05,546 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 00:19:00,220 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 00:19:00,221 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 00:19:00,317 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 00:19:07,498 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 00:19:07,499 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 00:19:07,499 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 00:19:07,499 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-11 00:19:07,499 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级12288 -> mstpd优先级3)
2025-09-11 00:19:07,626 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 00:19:07,626 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 32768 (方法: ovs)
2025-09-11 00:19:07,626 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 00:19:07,755 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 00:19:07,907 - NetworkTopology_TestNode2 - INFO - TestNode2: 设置网桥优先级 br0 = 24576 (方法: mstpd)
2025-09-11 00:19:07,907 - NetworkTopology_TestNode2 - INFO - TestNode2: 执行mstpd设置优先级命令 (标准优先级24576 -> mstpd优先级6)
2025-09-11 00:19:16,088 - NetworkTopology_TestNode2 - INFO - TestNode2: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 00:19:24,089 - test_additional_rstp - INFO - === 步骤1: 验证分布式BPDU生成 ===
2025-09-11 00:19:24,139 - test_additional_rstp - INFO - 检测到网桥接口: ['18:', '26:']
2025-09-11 00:19:24,139 - test_additional_rstp - INFO - 在接口 18: 上捕获BPDU...
2025-09-11 00:19:24,139 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: 18:, 数量: 10)
2025-09-11 00:19:24,264 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-11 00:19:24,264 - test_additional_rstp - WARNING - 在 18: 上未捕获到BPDU
2025-09-11 00:19:24,265 - test_additional_rstp - INFO - 在接口 26: 上捕获BPDU...
2025-09-11 00:19:24,265 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: 26:, 数量: 10)
2025-09-11 00:19:24,368 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-11 00:19:24,369 - test_additional_rstp - WARNING - 在 26: 上未捕获到BPDU
2025-09-11 00:19:24,369 - test_additional_rstp - INFO - 总共捕获 0 个BPDU，来自 0 个不同源
2025-09-11 00:19:24,369 - test_additional_rstp - WARNING - 未检测到BPDU传播
2025-09-11 00:19:24,369 - test_additional_rstp - INFO - BPDU传播和保活机制测试完成
2025-09-11 00:19:24,370 - RSTPTest - INFO - 测试完成: test_bpdu_propagation_and_keepalive (耗时: 254.00秒)
2025-09-11 00:19:24,370 - RSTPTest - INFO - ============================================================

2025-09-11 00:19:24,372 - RSTPTest - INFO - ============================================================
2025-09-11 00:19:24,372 - RSTPTest - INFO - 开始测试: test_disabled_port_exclusion_enhanced
2025-09-11 00:19:24,372 - RSTPTest - INFO - ============================================================
2025-09-11 00:19:24,373 - test_additional_rstp - INFO - 开始增强的禁用端口排除测试
2025-09-11 00:19:24,373 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 00:19:24,373 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 00:19:24,374 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 00:19:24,374 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 00:19:24,374 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 00:19:24,374 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 00:19:24,374 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 00:19:24,374 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 00:19:24,375 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 00:19:24,883 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 00:19:24,883 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 00:19:24,883 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 00:19:25,039 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 00:19:26,119 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 00:19:26,119 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 00:19:26,119 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 00:19:26,120 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 00:19:26,120 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 00:19:26,603 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 00:19:27,083 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 00:19:27,083 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 00:19:27,275 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 00:19:27,275 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 00:19:27,275 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 00:19:27,275 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 00:19:27,276 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 00:19:27,276 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 00:19:27,276 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 00:19:27,276 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 00:19:27,762 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 00:19:32,251 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:19:32,373 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:19:32,374 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 00:19:32,374 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 00:19:32,374 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:19:32,375 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 00:19:33,562 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 00:19:34,757 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 00:19:34,757 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 00:19:34,853 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 00:19:35,113 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 00:19:35,113 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 00:19:35,114 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 00:19:35,114 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 00:19:35,114 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 00:19:35,114 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 00:19:35,114 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 00:19:35,115 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 00:19:50,765 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 00:19:55,240 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:19:55,366 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:19:55,366 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 00:19:55,366 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 00:19:55,366 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:19:55,367 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 00:19:56,553 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 00:19:57,778 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 00:19:57,778 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 00:19:57,875 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 00:19:58,140 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 00:19:58,140 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 00:19:58,141 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 00:19:58,141 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-11 00:19:58,141 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级12288 -> mstpd优先级3)
2025-09-11 00:19:58,267 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 00:19:58,267 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 32768 (方法: ovs)
2025-09-11 00:19:58,267 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 00:19:58,393 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 00:20:03,952 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:20:04,105 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:20:04,106 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 00:20:04,106 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:20:04,106 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 00:20:04,106 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:20:04,566 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:20:04,566 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:20:04,567 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:20:04,567 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:20:04,568 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:20:04,568 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:20:04,855 - test_additional_rstp - INFO - 初始活动端口数量: 1
2025-09-11 00:20:04,856 - RSTPTest - INFO - 测试完成: test_disabled_port_exclusion_enhanced (耗时: 40.48秒)
2025-09-11 00:20:04,856 - RSTPTest - INFO - ============================================================

2025-09-11 00:20:04,857 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-11 00:20:04,857 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-11 00:20:04,857 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-11 00:20:04,996 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-11 00:20:04,996 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-11 00:20:05,115 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-11 00:20:05,115 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-11 00:20:05,256 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-11 00:20:05,256 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-11 00:20:05,256 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 00:20:05,257 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 00:20:05,257 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-11 00:20:05,257 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-11 00:20:05,312 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-11 00:20:05,312 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-11 00:20:05,479 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-11 00:20:05,479 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-11 00:20:05,480 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-11 00:20:05,480 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-11 00:20:05,480 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-11 00:20:05,535 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-11 00:20:05,536 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-11 00:20:05,706 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-11 00:20:05,707 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-11 00:20:05,707 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-11 00:20:05,707 - RSTPTest - INFO - ============================================================
2025-09-11 00:20:05,707 - RSTPTest - INFO - 开始测试: test_proposal_agreement_handshake
2025-09-11 00:20:05,708 - RSTPTest - INFO - ============================================================
2025-09-11 00:20:05,708 - test_advanced_rstp_mechanisms - INFO - 开始测试RSTP Proposal/Agreement握手机制
2025-09-11 00:20:05,709 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 00:20:05,709 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 00:20:05,709 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 00:20:05,709 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 00:20:05,709 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 00:20:05,709 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 00:20:05,710 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 00:20:05,710 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 00:20:05,710 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 00:20:06,202 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 00:20:06,203 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 00:20:06,203 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 00:20:06,362 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 00:20:07,450 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 00:20:07,450 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 00:20:07,450 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 00:20:07,451 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 00:20:07,451 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 00:20:07,931 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 00:20:08,410 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 00:20:08,410 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 00:20:08,602 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 00:20:08,603 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 00:20:08,603 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 00:20:08,603 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 00:20:08,603 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 00:20:08,603 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 00:20:08,604 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 00:20:08,604 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 00:20:09,103 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 00:20:13,609 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:20:13,737 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:20:13,737 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 00:20:13,737 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 00:20:13,737 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:20:13,738 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 00:20:14,929 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 00:20:16,124 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 00:20:16,125 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 00:20:16,220 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 00:20:16,485 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 00:20:16,486 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 00:20:16,486 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 00:20:16,486 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 00:20:16,486 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 00:20:16,486 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 00:20:16,487 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 00:20:16,487 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 00:20:16,983 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 00:20:21,513 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:20:21,650 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:20:21,650 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 00:20:21,651 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 00:20:21,651 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:20:21,651 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 00:20:22,897 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 00:20:24,138 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 00:20:24,139 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 00:20:24,234 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 00:20:24,502 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 00:20:24,503 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 00:20:24,503 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 00:20:29,504 - test_advanced_rstp_mechanisms - INFO - 开始在eth0上捕获BPDU
2025-09-11 00:20:29,505 - test_advanced_rstp_mechanisms - INFO - 触发拓扑变更...
2025-09-11 00:20:29,505 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 28672 (方法: mstpd)
2025-09-11 00:20:29,505 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级28672 -> mstpd优先级7)
2025-09-11 00:20:29,627 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 00:20:32,628 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 32768 (方法: mstpd)
2025-09-11 00:20:32,628 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级32768 -> mstpd优先级8)
2025-09-11 00:20:32,749 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 00:20:35,750 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: eth0, 数量: 20)
2025-09-11 00:20:35,839 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-11 00:20:35,839 - test_advanced_rstp_mechanisms - INFO - 捕获到0个BPDU数据包
2025-09-11 00:20:35,839 - test_advanced_rstp_mechanisms - WARNING - 未能捕获到完整的BPDU握手序列，可能是环境限制
2025-09-11 00:20:35,839 - test_advanced_rstp_mechanisms - INFO - 改为验证网络收敛状态...
2025-09-11 00:20:36,296 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:20:36,451 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    28672
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:20:36,452 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 28672
2025-09-11 00:20:36,452 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:20:36,453 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 7000/6e:b3:08:fa:01:34
2025-09-11 00:20:36,453 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:20:36,918 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:20:36,918 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:20:36,920 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:20:36,920 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:20:36,920 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:20:36,920 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:20:37,206 - test_advanced_rstp_mechanisms - INFO - ✓ 网络收敛正常，存在根端口
2025-09-11 00:20:39,207 - test_advanced_rstp_mechanisms - INFO - RSTP Proposal/Agreement握手机制测试通过
2025-09-11 00:20:39,208 - RSTPTest - INFO - 测试完成: test_proposal_agreement_handshake (耗时: 33.50秒)
2025-09-11 00:20:39,208 - RSTPTest - INFO - ============================================================

2025-09-11 00:20:39,209 - RSTPTest - INFO - ============================================================
2025-09-11 00:20:39,210 - RSTPTest - INFO - 开始测试: test_tcn_topology_change_notification
2025-09-11 00:20:39,210 - RSTPTest - INFO - ============================================================
2025-09-11 00:20:39,210 - test_advanced_rstp_mechanisms - INFO - 开始测试TCN拓扑变更通知机制
2025-09-11 00:20:39,211 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 00:20:39,211 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 00:20:39,211 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 00:20:39,211 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 00:20:39,212 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 00:20:39,212 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 00:20:39,212 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 00:20:39,212 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 00:20:39,212 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 00:20:39,702 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 00:20:39,703 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 00:20:39,703 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 00:20:39,857 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 00:20:40,958 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 00:20:40,958 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 00:20:40,959 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 00:20:40,959 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 00:20:40,959 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 00:20:41,433 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 00:20:41,910 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 00:20:41,910 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 00:20:42,102 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 00:20:42,102 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 00:20:42,102 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 00:20:42,102 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 00:20:42,103 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 00:20:42,103 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 00:20:42,103 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 00:20:42,103 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 00:20:42,582 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 00:20:47,081 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:20:47,206 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:20:47,206 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 00:20:47,206 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 00:20:47,207 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:20:47,207 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 00:20:48,375 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 00:20:49,573 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 00:20:49,574 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 00:20:49,669 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 00:20:49,935 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 00:20:49,935 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 00:20:49,936 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 00:20:49,936 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 00:20:49,936 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 00:20:49,937 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 00:20:49,937 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 00:20:49,937 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 00:20:50,443 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 00:20:54,946 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:20:55,072 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:20:55,072 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 00:20:55,073 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 00:20:55,073 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:20:55,073 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 00:20:56,253 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 00:20:57,476 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 00:20:57,476 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 00:20:57,573 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 00:20:57,834 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 00:20:57,834 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 00:20:57,835 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 00:21:08,264 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:21:08,421 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:21:08,422 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 00:21:08,422 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:21:08,422 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 00:21:08,422 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:21:08,885 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:21:08,885 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:21:08,886 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:21:08,887 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:21:08,887 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:21:08,887 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:21:09,174 - test_advanced_rstp_mechanisms - INFO - 初始网桥端口数量: 3
2025-09-11 00:21:09,174 - test_advanced_rstp_mechanisms - INFO - 触发拓扑变更：临时禁用/启用端口
2025-09-11 00:21:09,326 - test_advanced_rstp_mechanisms - INFO - 初始TC计数: 0
2025-09-11 00:21:17,604 - test_advanced_rstp_mechanisms - INFO - 变更后TC计数: 0
2025-09-11 00:21:17,604 - test_advanced_rstp_mechanisms - INFO - 拓扑变更可能未被检测到，这可能是正常的（取决于实现）
2025-09-11 00:21:18,064 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:21:18,220 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:21:18,221 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 00:21:18,221 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:21:18,221 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 00:21:18,221 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:21:18,692 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:21:18,692 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:21:18,693 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:21:18,693 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:21:18,694 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:21:18,694 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:21:18,982 - test_advanced_rstp_mechanisms - INFO - 最终网桥端口数量: 3
2025-09-11 00:21:19,137 - test_advanced_rstp_mechanisms - INFO - 当前MAC地址表老化时间: 300秒
2025-09-11 00:21:19,137 - test_advanced_rstp_mechanisms - WARNING - MAC地址表老化时间(300秒)未缩短，可能是实现差异
2025-09-11 00:21:19,137 - test_advanced_rstp_mechanisms - INFO - TCN拓扑变更通知机制测试通过 - 使用安全的端口状态变更方式
2025-09-11 00:21:19,138 - RSTPTest - INFO - 测试完成: test_tcn_topology_change_notification (耗时: 39.93秒)
2025-09-11 00:21:19,139 - RSTPTest - INFO - ============================================================

2025-09-11 00:21:19,140 - RSTPTest - INFO - ============================================================
2025-09-11 00:21:19,140 - RSTPTest - INFO - 开始测试: test_edge_port_behavior
2025-09-11 00:21:19,140 - RSTPTest - INFO - ============================================================
2025-09-11 00:21:19,141 - test_advanced_rstp_mechanisms - INFO - 开始测试边缘端口行为
2025-09-11 00:21:19,141 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 00:21:19,141 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 00:21:19,142 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 00:21:19,142 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 00:21:19,142 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 00:21:19,142 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 00:21:19,142 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 00:21:19,143 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 00:21:19,143 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 00:21:19,672 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 00:21:19,673 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 00:21:19,673 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 00:21:19,829 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 00:21:21,124 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 00:21:21,124 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 00:21:21,125 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 00:21:21,125 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 00:21:21,125 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 00:21:21,605 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 00:21:22,086 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 00:21:22,086 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 00:21:22,277 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 00:21:22,277 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 00:21:22,278 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 00:21:22,278 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 00:21:22,278 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 00:21:22,278 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 00:21:22,278 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 00:21:22,278 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 00:21:22,761 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 00:21:27,275 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:21:27,406 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:21:27,406 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 00:21:27,406 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 00:21:27,407 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:21:27,407 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 00:21:28,588 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 00:21:29,760 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 00:21:29,761 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 00:21:29,857 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 00:21:30,119 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 00:21:30,120 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 00:21:30,120 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 00:21:30,120 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 00:21:30,120 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 00:21:30,120 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 00:21:30,120 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 00:21:30,121 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 00:21:30,618 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 00:21:35,107 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:21:35,231 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:21:35,231 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 00:21:35,231 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 00:21:35,232 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:21:35,232 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 00:21:36,398 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 00:21:37,635 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 00:21:37,636 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 00:21:37,731 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 00:21:37,997 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 00:21:37,997 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 00:21:37,997 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 00:21:45,132 - test_advanced_rstp_mechanisms - INFO - 可用端口: ['enp1s0']
2025-09-11 00:21:45,132 - test_advanced_rstp_mechanisms - INFO - 选择端口enp1s0作为边缘端口测试
2025-09-11 00:21:45,240 - test_advanced_rstp_mechanisms - INFO - 测试边缘端口立即转发特性
2025-09-11 00:21:48,125 - test_advanced_rstp_mechanisms - INFO - 边缘端口状态转换时间: 2.73秒
2025-09-11 00:21:48,125 - test_advanced_rstp_mechanisms - INFO - ✓ 边缘端口转换时间合理
2025-09-11 00:21:48,228 - test_advanced_rstp_mechanisms - INFO - ✓ 边缘端口状态变化未产生TCN
2025-09-11 00:21:48,228 - test_advanced_rstp_mechanisms - INFO - 测试边缘端口收到BPDU后的行为
2025-09-11 00:21:48,387 - test_advanced_rstp_mechanisms - INFO - 边缘端口状态: 1
1
normal
2025-09-11 00:21:48,388 - test_advanced_rstp_mechanisms - INFO - 边缘端口行为测试通过
2025-09-11 00:21:48,389 - RSTPTest - INFO - 测试完成: test_edge_port_behavior (耗时: 29.25秒)
2025-09-11 00:21:48,389 - RSTPTest - INFO - ============================================================

2025-09-11 00:21:48,390 - RSTPTest - INFO - ============================================================
2025-09-11 00:21:48,390 - RSTPTest - INFO - 开始测试: test_shared_vs_point_to_point_links
2025-09-11 00:21:48,390 - RSTPTest - INFO - ============================================================
2025-09-11 00:21:48,391 - test_advanced_rstp_mechanisms - INFO - 开始测试不同链路类型的行为差异
2025-09-11 00:21:48,391 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 00:21:48,391 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 00:21:48,391 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 00:21:48,391 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 00:21:48,392 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 00:21:48,392 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 00:21:48,392 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 00:21:48,392 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 00:21:48,392 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 00:21:48,948 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 00:21:48,948 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 00:21:48,949 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 00:21:49,103 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 00:21:50,192 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 00:21:50,192 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 00:21:50,192 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 00:21:50,193 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 00:21:50,193 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 00:21:50,672 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 00:21:51,145 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 00:21:51,146 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 00:21:51,337 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 00:21:51,337 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 00:21:51,337 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 00:21:51,338 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 00:21:51,338 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 00:21:51,338 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 00:21:51,338 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 00:21:51,338 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 00:21:51,834 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 00:21:56,315 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:21:56,443 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:21:56,444 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 00:21:56,444 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 00:21:56,444 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:21:56,444 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 00:21:57,621 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 00:21:58,830 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 00:21:58,831 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 00:21:58,927 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 00:21:59,190 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 00:21:59,190 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 00:21:59,190 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 00:21:59,190 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 00:21:59,191 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 00:21:59,191 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 00:21:59,191 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 00:21:59,191 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 00:21:59,697 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 00:22:04,191 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:22:04,325 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:22:04,325 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 00:22:04,325 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 00:22:04,326 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:22:04,326 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 00:22:05,557 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 00:22:06,779 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 00:22:06,780 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 00:22:06,876 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 00:22:07,138 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 00:22:07,139 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 00:22:07,139 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 00:22:12,249 - test_advanced_rstp_mechanisms - INFO - 检测到的链路类型: {}
2025-09-11 00:22:12,250 - test_advanced_rstp_mechanisms - INFO - 测试点对点链路收敛性能
2025-09-11 00:22:16,838 - test_advanced_rstp_mechanisms - INFO - 收敛时间: 4.59秒
2025-09-11 00:22:16,838 - test_advanced_rstp_mechanisms - INFO - 验证链路类型识别
2025-09-11 00:22:16,839 - test_advanced_rstp_mechanisms - INFO - 不同链路类型行为差异测试通过
2025-09-11 00:22:16,839 - RSTPTest - INFO - 测试完成: test_shared_vs_point_to_point_links (耗时: 28.45秒)
2025-09-11 00:22:16,839 - RSTPTest - INFO - ============================================================

2025-09-11 00:22:16,840 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-11 00:22:16,840 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-11 00:22:16,840 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-11 00:22:16,974 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-11 00:22:16,974 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-11 00:22:17,092 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-11 00:22:17,092 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-11 00:22:17,225 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-11 00:22:17,226 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-11 00:22:17,226 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 00:22:17,227 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 00:22:17,227 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-11 00:22:17,227 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-11 00:22:17,283 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-11 00:22:17,283 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-11 00:22:17,453 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-11 00:22:17,454 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-11 00:22:17,454 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-11 00:22:17,454 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-11 00:22:17,454 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-11 00:22:17,510 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-11 00:22:17,511 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-11 00:22:17,678 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-11 00:22:17,678 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-11 00:22:17,678 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-11 00:22:17,679 - RSTPTest - INFO - ============================================================
2025-09-11 00:22:17,679 - RSTPTest - INFO - 开始测试: test_backup_port_concept_verification
2025-09-11 00:22:17,679 - RSTPTest - INFO - ============================================================
2025-09-11 00:22:17,680 - test_backup_port_simulation - INFO - 开始备份端口概念验证测试
2025-09-11 00:22:17,680 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 00:22:17,680 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 00:22:17,680 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 00:22:17,681 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 00:22:17,681 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 00:22:17,681 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 00:22:17,681 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 00:22:17,681 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 00:22:17,681 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 00:22:18,200 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 00:22:18,200 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 00:22:18,200 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 00:22:18,356 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 00:22:19,495 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 00:22:19,495 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 00:22:19,495 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 00:22:19,496 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 00:22:19,496 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 00:22:19,972 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 00:22:20,459 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 00:22:20,460 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 00:22:20,700 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 00:22:20,701 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 00:22:20,701 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 00:22:20,701 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 00:22:20,701 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 00:22:20,701 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 00:22:20,701 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 00:22:20,702 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 00:22:21,209 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 00:22:25,706 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:22:25,833 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:22:25,834 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 00:22:25,834 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 00:22:25,834 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:22:25,834 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 00:22:27,012 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 00:22:28,204 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 00:22:28,204 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 00:22:28,301 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 00:22:28,567 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 00:22:28,568 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 00:22:28,568 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 00:22:28,568 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 00:22:28,568 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 00:22:28,569 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 00:22:28,569 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 00:22:28,569 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 00:22:29,070 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 00:22:33,577 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:22:33,707 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:22:33,707 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 00:22:33,707 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 00:22:33,708 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:22:33,708 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 00:22:34,885 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 00:22:36,109 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 00:22:36,109 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 00:22:36,204 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 00:22:36,466 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 00:22:36,466 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 00:22:36,466 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 00:22:46,890 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:22:47,046 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:22:47,047 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 00:22:47,047 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:22:47,047 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 00:22:47,047 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:22:47,531 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:22:47,531 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:22:47,532 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:22:47,532 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:22:47,532 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:22:47,533 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:22:47,824 - test_backup_port_simulation - INFO - === 当前端口状态 ===
2025-09-11 00:22:47,824 - test_backup_port_simulation - INFO - 端口 br3: 角色=root, 状态=disabled
2025-09-11 00:22:47,824 - test_backup_port_simulation - INFO - 端口 br4: 角色=alternate, 状态=discarding
2025-09-11 00:22:47,825 - test_backup_port_simulation - INFO - 端口 SE_ETH2: 角色=unknown, 状态=disabled
2025-09-11 00:22:47,825 - test_backup_port_simulation - INFO - ⚠ 在当前点对点拓扑中未检测到备份端口（符合预期）
2025-09-11 00:22:47,825 - test_backup_port_simulation - INFO - 备份端口通常出现在共享介质网段中，当前测试环境为点对点链路
2025-09-11 00:22:47,825 - test_backup_port_simulation - INFO - 端口角色分布: {<PortRole.ALTERNATE: 'alternate'>: ['br4']}
2025-09-11 00:22:47,825 - test_backup_port_simulation - INFO - === RSTP端口角色覆盖分析 ===
2025-09-11 00:22:47,826 - test_backup_port_simulation - INFO - - root端口: 未检测到
2025-09-11 00:22:47,826 - test_backup_port_simulation - INFO - - designated端口: 未检测到
2025-09-11 00:22:47,826 - test_backup_port_simulation - INFO - ✓ alternate端口: ['br4']
2025-09-11 00:22:47,826 - test_backup_port_simulation - INFO - - backup端口: 未检测到（在点对点拓扑中为正常现象）
2025-09-11 00:22:47,826 - test_backup_port_simulation - INFO - 备份端口概念验证测试完成
2025-09-11 00:22:47,827 - RSTPTest - INFO - 测试完成: test_backup_port_concept_verification (耗时: 30.15秒)
2025-09-11 00:22:47,827 - RSTPTest - INFO - ============================================================

2025-09-11 00:22:47,829 - RSTPTest - INFO - ============================================================
2025-09-11 00:22:47,829 - RSTPTest - INFO - 开始测试: test_shared_medium_simulation_attempt
2025-09-11 00:22:47,829 - RSTPTest - INFO - ============================================================
2025-09-11 00:22:47,830 - test_backup_port_simulation - INFO - 开始共享介质模拟尝试
2025-09-11 00:22:47,830 - test_backup_port_simulation - INFO - === 尝试创建共享介质模拟场景 ===
2025-09-11 00:22:47,830 - test_backup_port_simulation - INFO - 创建中心交换机模拟共享介质...
2025-09-11 00:22:47,830 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 00:22:47,830 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 00:22:47,831 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 00:22:47,831 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 00:22:47,831 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 00:22:47,831 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 00:22:47,831 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 00:22:47,832 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 00:22:47,832 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 00:22:48,364 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 00:22:48,364 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 00:22:48,364 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 00:22:48,523 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 00:22:49,616 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 00:22:49,616 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 00:22:49,616 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 00:22:49,616 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 00:22:49,617 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 00:22:50,100 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 00:22:50,577 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 00:22:50,577 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 00:22:50,767 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 00:22:50,768 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 00:22:50,768 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 00:22:50,768 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 00:22:50,768 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 00:22:50,769 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 00:22:50,769 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 00:22:50,769 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 00:22:51,269 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 00:22:55,739 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:22:55,866 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:22:55,866 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 00:22:55,867 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 00:22:55,867 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:22:55,867 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 00:22:57,040 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 00:22:58,233 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 00:22:58,233 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 00:22:58,330 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 00:22:58,596 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 00:22:58,597 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 00:22:58,597 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 00:22:58,597 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 00:22:58,597 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 00:22:58,598 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 00:22:58,598 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 00:22:58,598 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 00:22:59,086 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 00:23:03,602 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:23:03,729 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:23:03,730 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 00:23:03,730 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 00:23:03,730 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:23:03,730 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 00:23:04,922 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 00:23:06,139 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 00:23:06,140 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 00:23:06,235 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 00:23:06,498 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 00:23:06,498 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 00:23:06,498 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 00:23:16,923 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:23:17,076 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:23:17,077 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 00:23:17,078 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:23:17,078 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 00:23:17,078 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:23:17,551 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:23:17,551 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:23:17,552 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:23:17,553 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:23:17,553 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:23:17,553 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:23:17,840 - test_backup_port_simulation - INFO - === 分析当前端口配置 ===
2025-09-11 00:23:17,840 - test_backup_port_simulation - INFO - 活动端口 br4: 角色=alternate, 状态=discarding
2025-09-11 00:23:17,840 - test_backup_port_simulation - INFO - ⚠ 未检测到备份端口
2025-09-11 00:23:17,841 - test_backup_port_simulation - INFO - 这在当前测试环境中是正常的，因为缺乏真正的共享介质
2025-09-11 00:23:17,841 - test_backup_port_simulation - INFO - 共享介质模拟尝试完成
2025-09-11 00:23:17,842 - RSTPTest - INFO - 测试完成: test_shared_medium_simulation_attempt (耗时: 30.01秒)
2025-09-11 00:23:17,842 - RSTPTest - INFO - ============================================================

2025-09-11 00:23:17,843 - RSTPTest - INFO - ============================================================
2025-09-11 00:23:17,843 - RSTPTest - INFO - 开始测试: test_backup_port_documentation_verification
2025-09-11 00:23:17,843 - RSTPTest - INFO - ============================================================
2025-09-11 00:23:17,844 - test_backup_port_simulation - INFO - 开始备份端口文档验证
2025-09-11 00:23:17,844 - test_backup_port_simulation - INFO - ✓ PortRole.BACKUP 存在
2025-09-11 00:23:17,844 - test_backup_port_simulation - INFO - === 备份端口理论特性验证 ===
2025-09-11 00:23:17,844 - test_backup_port_simulation - INFO - purpose: 为共享介质网段提供冗余
2025-09-11 00:23:17,844 - test_backup_port_simulation - INFO - difference_from_alternate: 备份端口是同一交换机上指定端口的备份，而备用端口是不同交换机提供的路径
2025-09-11 00:23:17,845 - test_backup_port_simulation - INFO - state: Discarding
2025-09-11 00:23:17,845 - test_backup_port_simulation - INFO - scenario: 出现在连接到集线器或共享介质的场景中
2025-09-11 00:23:17,845 - test_backup_port_simulation - INFO - fast_transition: 当对应的指定端口失效时，可以快速转换为指定端口
2025-09-11 00:23:17,845 - test_backup_port_simulation - INFO - === 端口角色对比 ===
2025-09-11 00:23:17,845 - test_backup_port_simulation - INFO - root: 连接到根桥的最佳路径
2025-09-11 00:23:17,845 - test_backup_port_simulation - INFO - designated: 为网段提供转发服务
2025-09-11 00:23:17,846 - test_backup_port_simulation - INFO - alternate: 提供到根桥的备用路径（来自其他交换机）
2025-09-11 00:23:17,846 - test_backup_port_simulation - INFO - backup: 同一交换机上指定端口的备份（共享介质场景）
2025-09-11 00:23:17,846 - test_backup_port_simulation - INFO - === 测试覆盖率分析 ===
2025-09-11 00:23:17,846 - test_backup_port_simulation - INFO - 已覆盖: Root Port, Designated Port, Alternate Port, Disabled Port
2025-09-11 00:23:17,846 - test_backup_port_simulation - INFO - 部分覆盖: Backup Port (概念验证)
2025-09-11 00:23:17,846 - test_backup_port_simulation - INFO - 覆盖限制: 测试框架无法创建真正的共享介质拓扑
2025-09-11 00:23:17,847 - test_backup_port_simulation - INFO - 建议: 在实际部署环境中使用集线器或配置交换机共享模式进行完整测试
2025-09-11 00:23:17,847 - test_backup_port_simulation - INFO - 备份端口文档验证完成
2025-09-11 00:23:17,847 - RSTPTest - INFO - 测试完成: test_backup_port_documentation_verification (耗时: 0.00秒)
2025-09-11 00:23:17,848 - RSTPTest - INFO - ============================================================

2025-09-11 00:23:17,848 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-11 00:23:17,848 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-11 00:23:17,849 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-11 00:23:17,988 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-11 00:23:17,989 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-11 00:23:18,117 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-11 00:23:18,117 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-11 00:23:18,266 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-11 00:23:18,266 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-11 00:23:18,267 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 00:23:18,267 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 00:23:18,267 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-11 00:23:18,267 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-11 00:23:18,322 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-11 00:23:18,322 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-11 00:23:18,492 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-11 00:23:18,492 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-11 00:23:18,492 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-11 00:23:18,492 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-11 00:23:18,492 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-11 00:23:18,547 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-11 00:23:18,547 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-11 00:23:18,720 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-11 00:23:18,720 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-11 00:23:18,720 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-11 00:23:18,720 - RSTPTest - INFO - ============================================================
2025-09-11 00:23:18,721 - RSTPTest - INFO - 开始测试: test_direct_link_failure
2025-09-11 00:23:18,721 - RSTPTest - INFO - ============================================================
2025-09-11 00:23:18,722 - test_convergence - INFO - 开始直接链路故障测试
2025-09-11 00:23:18,722 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 00:23:18,722 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 00:23:18,722 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 00:23:18,722 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 00:23:18,722 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 00:23:18,723 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 00:23:18,723 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 00:23:18,723 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 00:23:18,723 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 00:23:19,243 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 00:23:19,244 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 00:23:19,244 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 00:23:19,402 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 00:23:20,519 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 00:23:20,519 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 00:23:20,520 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 00:23:20,520 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 00:23:20,520 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 00:23:21,011 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 00:23:21,490 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 00:23:21,491 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 00:23:21,683 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 00:23:21,684 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 00:23:21,684 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 00:23:21,684 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 00:23:21,684 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 00:23:21,684 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 00:23:21,684 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 00:23:21,685 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 00:23:22,171 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 00:23:26,660 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:23:26,790 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:23:26,791 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 00:23:26,791 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 00:23:26,791 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:23:26,791 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 00:23:27,970 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 00:23:29,255 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 00:23:29,255 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 00:23:29,351 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 00:23:29,612 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 00:23:29,612 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 00:23:29,612 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 00:23:29,613 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 00:23:29,613 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 00:23:29,613 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 00:23:29,613 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 00:23:29,614 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 00:23:30,118 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 00:23:34,609 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:23:34,735 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:23:34,735 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 00:23:34,736 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 00:23:34,736 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:23:34,736 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 00:23:35,921 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 00:23:37,137 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 00:23:37,137 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 00:23:37,233 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 00:23:37,499 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 00:23:37,500 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 00:23:37,500 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 00:23:37,500 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 16384 (方法: mstpd)
2025-09-11 00:23:37,501 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级16384 -> mstpd优先级4)
2025-09-11 00:23:37,627 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 00:23:37,627 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 32768 (方法: ovs)
2025-09-11 00:23:37,627 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 00:23:37,754 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 00:23:37,906 - NetworkTopology_TestNode2 - INFO - TestNode2: 设置网桥优先级 br0 = 28672 (方法: mstpd)
2025-09-11 00:23:37,907 - NetworkTopology_TestNode2 - INFO - TestNode2: 执行mstpd设置优先级命令 (标准优先级28672 -> mstpd优先级7)
2025-09-11 00:23:38,031 - NetworkTopology_TestNode2 - INFO - TestNode2: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 00:23:38,032 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 00:23:38,456 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:23:38,621 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    16384
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:23:38,623 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 16384
2025-09-11 00:23:38,623 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:23:38,623 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 4000/6e:b3:08:fa:01:34
2025-09-11 00:23:38,623 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:23:39,107 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:23:39,108 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:23:39,109 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:23:39,109 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:23:39,109 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:23:39,109 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:23:40,101 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 2.07秒
2025-09-11 00:23:40,102 - test_convergence - INFO - 初始收敛时间: 2.07秒
2025-09-11 00:23:40,529 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:23:40,685 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    16384
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:23:40,686 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 16384
2025-09-11 00:23:40,686 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:23:40,687 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 4000/6e:b3:08:fa:01:34
2025-09-11 00:23:40,687 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:23:41,175 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:23:41,175 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:23:41,176 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:23:41,176 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:23:41,176 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:23:41,177 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:23:41,475 - test_convergence - INFO - DUT的Root Port: br3
2025-09-11 00:23:41,475 - FaultInjector_DUT - INFO - 断开链路: br3
2025-09-11 00:23:51,602 - FaultInjector_DUT - INFO - 链路已断开: br3
2025-09-11 00:23:51,603 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 00:23:52,073 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:23:52,236 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    16384
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:23:52,237 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 16384
2025-09-11 00:23:52,238 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:23:52,238 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 4000/6e:b3:08:fa:01:34
2025-09-11 00:23:52,238 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:23:52,711 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:23:52,711 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:23:52,713 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:23:52,713 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:23:52,713 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:23:52,713 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:23:53,688 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 2.09秒
2025-09-11 00:23:54,105 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:23:54,264 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    16384
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:23:54,265 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 16384
2025-09-11 00:23:54,265 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:23:54,265 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 4000/6e:b3:08:fa:01:34
2025-09-11 00:23:54,265 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:23:54,746 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:23:54,746 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:23:54,748 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:23:54,748 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:23:54,748 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:23:54,748 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:23:55,051 - test_convergence - INFO - 链路故障收敛时间: 2.09秒
2025-09-11 00:23:55,051 - test_convergence - INFO - 新的Root Port: br4
2025-09-11 00:23:55,051 - test_convergence - INFO - 直接链路故障测试通过
2025-09-11 00:23:55,052 - RSTPTest - INFO - 测试完成: test_direct_link_failure (耗时: 36.33秒)
2025-09-11 00:23:55,053 - RSTPTest - INFO - ============================================================

2025-09-11 00:23:55,098 - RSTPTest - INFO - ============================================================
2025-09-11 00:23:55,098 - RSTPTest - INFO - 开始测试: test_multiple_link_failures
2025-09-11 00:23:55,098 - RSTPTest - INFO - ============================================================
2025-09-11 00:23:55,099 - test_convergence - INFO - 开始多重链路故障测试
2025-09-11 00:23:55,099 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 00:23:55,100 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 00:23:55,100 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 00:23:55,100 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 00:23:55,100 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 00:23:55,100 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 00:23:55,101 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 00:23:55,101 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 00:23:55,101 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 00:23:55,616 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 00:23:55,616 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 00:23:55,616 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 00:23:55,770 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 00:23:56,897 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 00:23:56,898 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 00:23:56,898 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 00:23:56,898 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 00:23:56,898 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 00:23:57,376 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 00:23:57,867 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 00:23:57,867 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 00:23:58,074 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 00:23:58,075 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 00:23:58,075 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 00:23:58,075 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 00:23:58,075 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 00:23:58,075 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 00:23:58,075 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 00:23:58,076 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 00:23:58,576 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 00:24:03,084 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:24:03,391 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:24:03,391 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 00:24:03,391 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 00:24:03,391 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:24:03,392 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 00:24:06,052 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 00:24:08,330 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 00:24:08,331 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 00:24:08,427 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 00:24:08,921 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 00:24:08,921 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 00:24:08,922 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 00:24:08,922 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 00:24:08,922 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 00:24:08,922 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 00:24:08,922 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 00:24:08,922 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 00:24:09,585 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 00:24:14,084 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:24:14,213 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:24:14,214 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 00:24:14,214 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 00:24:14,214 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:24:14,214 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 00:24:15,388 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 00:24:16,612 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 00:24:16,612 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 00:24:16,707 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 00:24:16,969 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 00:24:16,969 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 00:24:16,969 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 00:24:16,970 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 00:24:17,393 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:24:17,554 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:24:17,555 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 00:24:17,555 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:24:17,556 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 00:24:17,556 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:24:18,030 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:24:18,030 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:24:18,031 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:24:18,031 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:24:18,032 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:24:18,032 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:24:19,012 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 2.04秒
2025-09-11 00:24:19,012 - test_convergence - INFO - 注入故障: eth0
2025-09-11 00:24:19,012 - FaultInjector_DUT - INFO - 断开链路: eth0
2025-09-11 00:24:19,246 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth0 (code=1)，将在逻辑上标记为已断开
2025-09-11 00:24:19,246 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 00:24:19,712 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:24:19,877 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:24:19,878 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 00:24:19,879 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:24:19,879 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 00:24:19,879 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:24:20,366 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:24:20,366 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:24:20,368 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:24:20,368 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:24:20,369 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:24:20,369 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:24:21,358 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 2.11秒
2025-09-11 00:24:21,359 - test_convergence - INFO - eth0故障收敛时间: 2.11秒
2025-09-11 00:24:23,360 - test_convergence - INFO - 注入故障: eth2
2025-09-11 00:24:23,360 - FaultInjector_DUT - INFO - 断开链路: eth2
2025-09-11 00:24:23,589 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth2 (code=1)，将在逻辑上标记为已断开
2025-09-11 00:24:23,590 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 00:24:24,073 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:24:24,232 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:24:24,233 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 00:24:24,233 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:24:24,233 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 00:24:24,233 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:24:24,702 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:24:24,702 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:24:24,703 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:24:24,704 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:24:24,704 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:24:24,704 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:24:25,676 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 2.09秒
2025-09-11 00:24:25,676 - test_convergence - INFO - eth2故障收敛时间: 2.09秒
2025-09-11 00:24:27,677 - FaultInjector_DUT - INFO - 恢复链路: eth0
2025-09-11 00:24:27,897 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth0 (code=1)，将在逻辑上标记为已恢复
2025-09-11 00:24:27,898 - FaultInjector_DUT - INFO - 恢复链路: eth2
2025-09-11 00:24:28,165 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth2 (code=1)，将在逻辑上标记为已恢复
2025-09-11 00:24:28,166 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 00:24:28,632 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:24:28,793 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:24:28,798 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 00:24:28,799 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:24:28,799 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 00:24:28,799 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:24:29,261 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:24:29,261 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:24:29,262 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:24:29,263 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:24:29,263 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:24:29,263 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:24:30,245 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 2.08秒
2025-09-11 00:24:30,245 - test_convergence - INFO - 最终恢复收敛时间: 2.08秒
2025-09-11 00:24:30,245 - test_convergence - INFO - 多重链路故障测试通过
2025-09-11 00:24:30,246 - RSTPTest - INFO - 测试完成: test_multiple_link_failures (耗时: 35.15秒)
2025-09-11 00:24:30,246 - RSTPTest - INFO - ============================================================

2025-09-11 00:24:30,248 - RSTPTest - INFO - ============================================================
2025-09-11 00:24:30,248 - RSTPTest - INFO - 开始测试: test_convergence_with_traffic
2025-09-11 00:24:30,248 - RSTPTest - INFO - ============================================================
2025-09-11 00:24:30,249 - test_convergence - INFO - 开始带流量的收敛测试
2025-09-11 00:24:30,249 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 00:24:30,250 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 00:24:30,250 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 00:24:30,250 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 00:24:30,250 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 00:24:30,250 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 00:24:30,250 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 00:24:30,251 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 00:24:30,251 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 00:24:30,763 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 00:24:30,763 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 00:24:30,764 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 00:24:30,925 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 00:24:32,105 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 00:24:32,106 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 00:24:32,106 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 00:24:32,106 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 00:24:32,106 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 00:24:32,594 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 00:24:33,074 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 00:24:33,075 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 00:24:33,266 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 00:24:33,266 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 00:24:33,266 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 00:24:33,266 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 00:24:33,266 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 00:24:33,267 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 00:24:33,267 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 00:24:33,267 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 00:24:33,757 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 00:24:38,259 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:24:38,386 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:24:38,386 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 00:24:38,386 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 00:24:38,386 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:24:38,387 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 00:24:39,564 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 00:24:40,745 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 00:24:40,745 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 00:24:40,843 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 00:24:41,111 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 00:24:41,111 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 00:24:41,111 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 00:24:41,112 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 00:24:41,112 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 00:24:41,112 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 00:24:41,112 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 00:24:41,112 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 00:24:41,612 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 00:24:46,101 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:24:46,227 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:24:46,228 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 00:24:46,228 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 00:24:46,228 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:24:46,228 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 00:24:47,414 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 00:24:48,615 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 00:24:48,616 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 00:24:48,711 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 00:24:48,978 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 00:24:48,978 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 00:24:48,978 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 00:24:55,232 - TrafficGenerator - INFO - 启动iperf3服务器: 192.168.184.131:5201
2025-09-11 00:24:57,408 - TrafficGenerator - ERROR - iperf3服务器启动失败
2025-09-11 00:25:00,233 - TrafficGenerator - INFO - 启动iperf3客户端: -> 192.168.184.131:5201
2025-09-11 00:25:00,233 - TrafficGenerator - INFO - iperf3客户端已启动 (udp, 100M)
2025-09-11 00:25:05,234 - FaultInjector_DUT - INFO - 断开链路: eth0
2025-09-11 00:25:05,461 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth0 (code=1)，将在逻辑上标记为已断开
2025-09-11 00:25:15,462 - test_convergence - INFO - 丢包数: 0
2025-09-11 00:25:15,462 - test_convergence - INFO - 估计中断时间: 0.000秒
2025-09-11 00:25:15,462 - TrafficGenerator - INFO - 停止流量生成
2025-09-11 00:25:17,618 - test_convergence - INFO - 带流量的收敛测试通过
2025-09-11 00:25:17,619 - RSTPTest - INFO - 测试完成: test_convergence_with_traffic (耗时: 47.37秒)
2025-09-11 00:25:17,619 - RSTPTest - INFO - ============================================================

2025-09-11 00:25:17,620 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-11 00:25:17,620 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-11 00:25:17,620 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-11 00:25:17,767 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-11 00:25:17,767 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-11 00:25:17,887 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-11 00:25:17,888 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-11 00:25:18,028 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-11 00:25:18,028 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-11 00:25:18,028 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 00:25:18,028 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 00:25:18,029 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-11 00:25:18,029 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-11 00:25:18,084 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-11 00:25:18,085 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-11 00:25:18,250 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-11 00:25:18,251 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-11 00:25:18,251 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-11 00:25:18,251 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-11 00:25:18,251 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-11 00:25:18,305 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-11 00:25:18,306 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-11 00:25:18,477 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-11 00:25:18,477 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-11 00:25:18,477 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-11 00:25:18,478 - RSTPTest - INFO - ============================================================
2025-09-11 00:25:18,478 - RSTPTest - INFO - 开始测试: test_backup_port_simulation
2025-09-11 00:25:18,478 - RSTPTest - INFO - ============================================================
2025-09-11 00:25:18,479 - test_enhanced_rstp_coverage - INFO - 开始备份端口模拟测试
2025-09-11 00:25:18,479 - test_enhanced_rstp_coverage - INFO - 创建模拟共享网段拓扑
2025-09-11 00:25:19,345 - test_enhanced_rstp_coverage - INFO - ✓ 创建连接: SE_ETH2:dut_port1 <-> shared_segment:shared_port1
2025-09-11 00:25:19,966 - test_enhanced_rstp_coverage - INFO - ✓ 创建连接: SE_ETH2:dut_port2 <-> shared_segment:shared_port2
2025-09-11 00:25:21,138 - test_enhanced_rstp_coverage - INFO - ✓ 创建远程交换机: remote_switch
2025-09-11 00:25:21,138 - test_enhanced_rstp_coverage - INFO - 等待RSTP收敛...
2025-09-11 00:25:36,555 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:25:36,716 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   fe:02:b8:7a:5d:49
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       dut_port1
  root-path-cost  2000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  dut_port2  Alternate  Discarding 2000     128.4
  br4        Designated Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2
  dut_port1  Root       Forwarding 2000     128.3


2025-09-11 00:25:36,717 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 00:25:36,717 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: fe:02:b8:7a:5d:49
2025-09-11 00:25:36,717 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/fe:02:b8:7a:5d:49
2025-09-11 00:25:36,717 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:25:37,206 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:25:37,206 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 7(dut_port1): addr:7e:a0:93:6b:f7:82
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 8(dut_port2): addr:e2:48:b5:df:0f:04
     config:     0
     state:      0
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:25:37,208 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:25:37,208 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:25:37,208 - RSTPAnalyzer_DUT - INFO - 找到端口: dut_port1 (从行:  7(dut_port1): addr:7e:a0:93:6b:f7:82)
2025-09-11 00:25:37,208 - RSTPAnalyzer_DUT - INFO - 找到端口: dut_port2 (从行:  8(dut_port2): addr:e2:48:b5:df:0f:04)
2025-09-11 00:25:37,208 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:25:37,209 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'dut_port1', 'dut_port2', 'SE_ETH2']
2025-09-11 00:25:37,758 - test_enhanced_rstp_coverage - INFO - DUT桥信息: BridgeInfo(bridge_id='1000/fe:02:b8:7a:5d:49', root_id='unknown', root_port='br3', root_path_cost=0, protocol_version='rstp', hello_time=2, forward_delay=15, max_age=20, topology_changes=0, ports={'br3': PortInfo(name='br3', role=<PortRole.ROOT: 'root'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'br4': PortInfo(name='br4', role=<PortRole.ALTERNATE: 'alternate'>, state=<PortState.DISCARDING: 'discarding'>, path_cost=0, designated_bridge='', designated_port=''), 'dut_port1': PortInfo(name='dut_port1', role=<PortRole.DESIGNATED: 'designated'>, state=<PortState.FORWARDING: 'forwarding'>, path_cost=0, designated_bridge='', designated_port=''), 'dut_port2': PortInfo(name='dut_port2', role=<PortRole.DESIGNATED: 'designated'>, state=<PortState.FORWARDING: 'forwarding'>, path_cost=0, designated_bridge='', designated_port=''), 'SE_ETH2': PortInfo(name='SE_ETH2', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')})
2025-09-11 00:25:37,759 - test_enhanced_rstp_coverage - INFO - 找到 2 个连接到共享网段的端口
2025-09-11 00:25:37,759 - test_enhanced_rstp_coverage - INFO - Designated端口: ['dut_port1', 'dut_port2']
2025-09-11 00:25:37,760 - test_enhanced_rstp_coverage - INFO - Backup端口: []
2025-09-11 00:25:37,760 - test_enhanced_rstp_coverage - WARNING - 未检测到Backup Port或阻塞端口，可能是OVS实现限制
2025-09-11 00:25:37,760 - test_enhanced_rstp_coverage - INFO - 测试备份端口故障切换
2025-09-11 00:25:37,760 - test_enhanced_rstp_coverage - INFO - 清理测试环境
2025-09-11 00:25:38,692 - test_enhanced_rstp_coverage - INFO - ✓ 备份端口模拟测试完成
2025-09-11 00:25:38,693 - RSTPTest - INFO - 测试完成: test_backup_port_simulation (耗时: 20.21秒)
2025-09-11 00:25:38,693 - RSTPTest - INFO - ============================================================

2025-09-11 00:25:38,694 - RSTPTest - INFO - ============================================================
2025-09-11 00:25:38,695 - RSTPTest - INFO - 开始测试: test_comprehensive_port_state_transitions
2025-09-11 00:25:38,695 - RSTPTest - INFO - ============================================================
2025-09-11 00:25:38,696 - test_enhanced_rstp_coverage - INFO - 开始全面端口状态转换测试
2025-09-11 00:25:38,696 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 00:25:38,696 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 00:25:38,696 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 00:25:38,697 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 00:25:38,697 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 00:25:38,697 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 00:25:38,697 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 00:25:38,698 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 00:25:38,698 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 00:25:39,239 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 00:25:39,239 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 00:25:39,240 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 00:25:39,397 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 00:25:40,488 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 00:25:40,489 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 00:25:40,489 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 00:25:40,489 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 00:25:40,489 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 00:25:40,964 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 00:25:41,445 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 00:25:41,446 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 00:25:41,637 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 00:25:41,638 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 00:25:41,638 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 00:25:41,638 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 00:25:41,638 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 00:25:41,639 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 00:25:41,639 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 00:25:41,639 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 00:25:42,129 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 00:25:46,636 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:25:46,761 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:25:46,761 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 00:25:46,761 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 00:25:46,761 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:25:46,761 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 00:25:47,944 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 00:25:49,110 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 00:25:49,110 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 00:25:49,206 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 00:25:49,468 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 00:25:49,468 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 00:25:49,468 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 00:25:49,468 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 00:25:49,468 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 00:25:49,468 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 00:25:49,469 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 00:25:49,469 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 00:25:49,962 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 00:25:54,441 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:25:54,569 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:25:54,569 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 00:25:54,569 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 00:25:54,570 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:25:54,570 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 00:25:55,753 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 00:25:57,002 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 00:25:57,003 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 00:25:57,100 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 00:25:57,363 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 00:25:57,363 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 00:25:57,364 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 00:25:57,364 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 4096 (方法: mstpd)
2025-09-11 00:25:57,364 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级4096 -> mstpd优先级1)
2025-09-11 00:25:57,487 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 00:25:57,487 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 8192 (方法: ovs)
2025-09-11 00:25:57,487 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 00:25:57,605 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 00:25:57,780 - test_enhanced_rstp_coverage - INFO - 等待初始收敛...
2025-09-11 00:25:57,781 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 00:25:58,227 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:25:58,379 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:25:58,381 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 00:25:58,381 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:25:58,381 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 00:25:58,382 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:25:58,848 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:25:58,848 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:25:58,850 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:25:58,850 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:25:58,850 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:25:58,850 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:25:59,137 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.36秒
2025-09-11 00:25:59,606 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:25:59,763 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:25:59,764 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 00:25:59,764 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:25:59,764 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 00:25:59,765 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:26:00,233 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:26:00,233 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:26:00,235 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:26:00,235 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:26:00,235 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:26:00,235 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:26:00,521 - test_enhanced_rstp_coverage - INFO - === 测试场景1: 端口重启状态转换 ===
2025-09-11 00:26:00,521 - test_enhanced_rstp_coverage - INFO - 使用端口br4进行重启测试
2025-09-11 00:26:00,986 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:26:01,139 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:26:01,140 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 00:26:01,140 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:26:01,140 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 00:26:01,140 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:26:01,608 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:26:01,608 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:26:01,610 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:26:01,610 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:26:01,610 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:26:01,610 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:26:16,114 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:26:16,271 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Disabled   Discarding 2000     64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:26:16,272 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-11 00:26:16,272 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 00:26:16,272 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-11 00:26:16,273 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-11 00:26:16,751 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:26:16,752 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:26:16,753 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:26:16,753 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:26:16,753 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:26:16,753 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:26:17,048 - test_enhanced_rstp_coverage - INFO - 端口br4状态转换: disabled
2025-09-11 00:26:19,478 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:26:19,634 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Discarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:26:19,635 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-11 00:26:19,635 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 00:26:19,636 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-11 00:26:19,636 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-11 00:26:20,104 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:26:20,104 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:26:20,105 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:26:20,105 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:26:20,106 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:26:20,106 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:26:20,397 - test_enhanced_rstp_coverage - INFO - 端口br4状态转换: forwarding
2025-09-11 00:26:22,809 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:26:22,961 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:26:22,962 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-11 00:26:22,962 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 00:26:22,963 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-11 00:26:22,963 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-11 00:26:23,431 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:26:23,431 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:26:23,432 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:26:23,432 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:26:23,432 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:26:23,433 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:26:26,150 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:26:26,307 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:26:26,308 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-11 00:26:26,308 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 00:26:26,308 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-11 00:26:26,309 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-11 00:26:26,783 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:26:26,784 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:26:26,785 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:26:26,785 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:26:26,785 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:26:26,786 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:26:29,502 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:26:29,660 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:26:29,661 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-11 00:26:29,661 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 00:26:29,661 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-11 00:26:29,661 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-11 00:26:30,148 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:26:30,148 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:26:30,149 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:26:30,149 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:26:30,149 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:26:30,150 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:26:32,436 - test_enhanced_rstp_coverage - INFO - 端口重启状态转换: ['discarding', 'disabled', 'forwarding']
2025-09-11 00:26:32,437 - test_enhanced_rstp_coverage - INFO - 重启场景状态转换验证
2025-09-11 00:26:32,437 - test_enhanced_rstp_coverage - WARNING - 重启: 检测到可能的异常转换: [(<PortState.DISCARDING: 'discarding'>, <PortState.DISABLED: 'disabled'>)]
2025-09-11 00:26:32,437 - test_enhanced_rstp_coverage - INFO - === 测试场景2: 强制Learning状态 ===
2025-09-11 00:26:32,496 - test_enhanced_rstp_coverage - INFO - 原始Forward Delay: 4
2025-09-11 00:26:33,078 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:26:33,238 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:26:33,239 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-11 00:26:33,239 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 00:26:33,239 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-11 00:26:33,239 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-11 00:26:33,707 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:26:33,708 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:26:33,709 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:26:33,709 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:26:33,709 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:26:33,710 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:26:48,286 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:26:48,442 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Disabled   Discarding 2000     64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:26:48,443 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-11 00:26:48,443 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 00:26:48,443 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-11 00:26:48,443 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-11 00:26:48,920 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:26:48,920 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:26:48,922 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:26:48,922 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:26:48,922 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:26:48,922 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:26:49,209 - test_enhanced_rstp_coverage - INFO - 端口br4状态转换: disabled
2025-09-11 00:26:51,977 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:26:52,137 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Discarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:26:52,138 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-11 00:26:52,139 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 00:26:52,139 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-11 00:26:52,139 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-11 00:26:52,602 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:26:52,603 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:26:52,604 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:26:52,604 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:26:52,604 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:26:52,604 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:26:52,895 - test_enhanced_rstp_coverage - INFO - 端口br4状态转换: forwarding
2025-09-11 00:26:55,310 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:26:55,462 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:26:55,463 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-11 00:26:55,463 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 00:26:55,463 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-11 00:26:55,464 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-11 00:26:55,933 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:26:55,934 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:26:55,935 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:26:55,935 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:26:55,935 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:26:55,935 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:26:58,232 - test_enhanced_rstp_coverage - INFO - Learning状态转换: ['forwarding', 'disabled', 'forwarding']
2025-09-11 00:26:58,233 - test_enhanced_rstp_coverage - WARNING - 未观察到Learning状态，可能是快速转换
2025-09-11 00:26:58,302 - test_enhanced_rstp_coverage - INFO - === 测试场景3: 拓扑变更状态转换 ===
2025-09-11 00:26:58,766 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:26:58,926 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:26:58,927 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-11 00:26:58,927 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 00:26:58,927 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-11 00:26:58,927 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-11 00:26:59,403 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:26:59,403 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:26:59,404 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:26:59,404 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:26:59,404 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:26:59,404 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:26:59,696 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-11 00:26:59,696 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级12288 -> mstpd优先级3)
2025-09-11 00:26:59,824 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 00:27:00,250 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:27:00,405 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:27:00,406 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-11 00:27:00,407 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 00:27:00,407 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-11 00:27:00,407 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-11 00:27:00,879 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:27:00,879 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:27:00,880 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:27:00,880 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:27:00,880 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:27:00,881 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:27:03,585 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:27:03,733 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:27:03,734 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-11 00:27:03,735 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 00:27:03,735 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-11 00:27:03,735 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-11 00:27:04,195 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:27:04,195 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:27:04,197 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:27:04,197 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:27:04,197 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:27:04,197 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:27:06,901 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:27:07,054 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:27:07,055 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-11 00:27:07,055 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 00:27:07,055 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-11 00:27:07,056 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-11 00:27:07,518 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:27:07,518 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:27:07,520 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:27:07,520 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:27:07,520 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:27:07,520 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:27:10,221 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:27:10,381 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:27:10,382 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-11 00:27:10,382 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 00:27:10,383 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-11 00:27:10,383 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-11 00:27:10,859 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:27:10,859 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:27:10,861 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:27:10,861 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:27:10,861 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:27:10,861 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:27:13,572 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:27:13,733 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:27:13,734 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-11 00:27:13,735 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 00:27:13,735 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-11 00:27:13,735 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-11 00:27:14,208 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:27:14,209 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:27:14,210 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:27:14,210 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:27:14,211 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:27:14,211 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:27:16,930 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:27:17,080 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:27:17,081 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-11 00:27:17,082 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 00:27:17,082 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-11 00:27:17,082 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-11 00:27:17,539 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:27:17,540 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:27:17,541 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:27:17,541 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:27:17,541 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:27:17,541 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:27:19,832 - test_enhanced_rstp_coverage - INFO - 拓扑变更状态转换: ['forwarding']
2025-09-11 00:27:20,251 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:27:20,413 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:27:20,414 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-11 00:27:20,414 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 00:27:20,414 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-11 00:27:20,415 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-11 00:27:20,891 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:27:20,891 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:27:20,893 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:27:20,893 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:27:20,893 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:27:20,893 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:27:21,184 - test_enhanced_rstp_coverage - INFO - ✓ 拓扑变更后端口br4最终状态: forwarding
2025-09-11 00:27:21,185 - test_enhanced_rstp_coverage - INFO - ✓ 全面端口状态转换测试完成
2025-09-11 00:27:21,185 - RSTPTest - INFO - 测试完成: test_comprehensive_port_state_transitions (耗时: 102.49秒)
2025-09-11 00:27:21,186 - RSTPTest - INFO - ============================================================

2025-09-11 00:27:21,188 - RSTPTest - INFO - ============================================================
2025-09-11 00:27:21,188 - RSTPTest - INFO - 开始测试: test_detailed_bpdu_analysis
2025-09-11 00:27:21,188 - RSTPTest - INFO - ============================================================
2025-09-11 00:27:21,189 - test_enhanced_rstp_coverage - INFO - 开始详细BPDU分析测试
2025-09-11 00:27:21,189 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 00:27:21,189 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 00:27:21,189 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 00:27:21,190 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 00:27:21,190 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 00:27:21,190 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 00:27:21,190 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 00:27:21,190 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 00:27:21,191 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 00:27:21,723 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 00:27:21,723 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 00:27:21,723 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 00:27:21,879 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 00:27:22,979 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 00:27:22,979 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 00:27:22,979 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 00:27:22,980 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 00:27:22,980 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 00:27:23,483 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 00:27:23,967 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 00:27:23,967 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 00:27:24,167 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 00:27:24,167 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 00:27:24,167 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 00:27:24,167 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 00:27:24,167 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 00:27:24,168 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 00:27:24,168 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 00:27:24,168 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 00:27:24,655 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 00:27:29,134 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:27:29,261 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:27:29,261 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 00:27:29,261 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 00:27:29,261 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:27:29,262 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 00:27:30,457 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 00:27:31,650 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 00:27:31,650 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 00:27:31,746 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 00:27:32,011 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 00:27:32,011 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 00:27:32,012 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 00:27:32,012 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 00:27:32,012 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 00:27:32,012 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 00:27:32,012 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 00:27:32,013 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 00:27:32,500 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 00:27:36,985 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:27:37,113 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:27:37,113 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 00:27:37,113 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 00:27:37,113 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:27:37,114 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 00:27:38,294 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 00:27:39,511 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 00:27:39,511 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 00:27:39,605 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 00:27:39,873 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 00:27:39,873 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 00:27:39,874 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 00:27:39,874 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 4096 (方法: mstpd)
2025-09-11 00:27:39,874 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级4096 -> mstpd优先级1)
2025-09-11 00:27:40,005 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 00:27:40,006 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 8192 (方法: ovs)
2025-09-11 00:27:40,006 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 00:27:40,118 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 00:27:40,289 - NetworkTopology_TestNode2 - INFO - TestNode2: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-11 00:27:40,290 - NetworkTopology_TestNode2 - INFO - TestNode2: 执行mstpd设置优先级命令 (标准优先级12288 -> mstpd优先级3)
2025-09-11 00:27:40,418 - NetworkTopology_TestNode2 - INFO - TestNode2: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 00:27:40,418 - test_enhanced_rstp_coverage - INFO - 等待RSTP收敛...
2025-09-11 00:27:40,419 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 00:27:40,834 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:27:40,989 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:27:40,990 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-11 00:27:40,990 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 00:27:40,990 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-11 00:27:40,990 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-11 00:27:41,447 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:27:41,447 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:27:41,448 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:27:41,448 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:27:41,448 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:27:41,448 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:27:41,739 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.32秒
2025-09-11 00:27:42,197 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:27:42,357 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:27:42,358 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-11 00:27:42,358 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 00:27:42,359 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-11 00:27:42,359 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-11 00:27:42,823 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:27:42,823 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:27:42,825 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:27:42,825 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:27:42,825 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:27:42,825 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:27:43,115 - test_enhanced_rstp_coverage - INFO - Hello Time: 2秒
2025-09-11 00:27:43,115 - test_enhanced_rstp_coverage - INFO - === 测试1: 验证分布式BPDU生成 ===
2025-09-11 00:27:43,116 - test_enhanced_rstp_coverage - INFO - 在端口br4上捕获BPDU
2025-09-11 00:27:43,116 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br4, 数量: 10)
2025-09-11 00:27:55,251 - RSTPAnalyzer_DUT - INFO - 捕获到 5 个BPDU包
2025-09-11 00:27:55,252 - test_enhanced_rstp_coverage - INFO - 端口br4捕获到5个BPDU
2025-09-11 00:27:55,252 - test_enhanced_rstp_coverage - INFO - 总共捕获5个BPDU，来自0个不同源
2025-09-11 00:27:55,252 - test_enhanced_rstp_coverage - WARNING - 只检测到一个BPDU源，可能是拓扑限制
2025-09-11 00:27:55,252 - test_enhanced_rstp_coverage - INFO - === 测试2: 验证BPDU保活机制 ===
2025-09-11 00:27:55,253 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br4, 数量: 10)
2025-09-11 00:28:01,391 - RSTPAnalyzer_DUT - INFO - 捕获到 2 个BPDU包
2025-09-11 00:28:01,392 - test_enhanced_rstp_coverage - INFO - 正常情况下6秒内收到2个BPDU
2025-09-11 00:28:01,392 - test_enhanced_rstp_coverage - INFO - 模拟邻居故障，断开端口br4
2025-09-11 00:28:25,035 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br4, 数量: 10)
2025-09-11 00:28:29,135 - RSTPAnalyzer_DUT - INFO - 捕获到 2 个BPDU包
2025-09-11 00:28:29,135 - test_enhanced_rstp_coverage - INFO - 恢复后4秒内收到2个BPDU
2025-09-11 00:28:29,136 - test_enhanced_rstp_coverage - INFO - ✓ BPDU保活机制验证成功
2025-09-11 00:28:29,136 - test_enhanced_rstp_coverage - INFO - === 测试3: BPDU内容验证 ===
2025-09-11 00:28:29,136 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br4, 数量: 3)
2025-09-11 00:28:34,375 - RSTPAnalyzer_DUT - INFO - 捕获到 3 个BPDU包
2025-09-11 00:28:34,375 - test_enhanced_rstp_coverage - INFO - BPDU 1 分析:
2025-09-11 00:28:34,375 - test_enhanced_rstp_coverage - WARNING -   缺少字段: bridge_id
2025-09-11 00:28:34,376 - test_enhanced_rstp_coverage - WARNING -   缺少字段: root_id
2025-09-11 00:28:34,376 - test_enhanced_rstp_coverage - WARNING -   缺少字段: root_path_cost
2025-09-11 00:28:34,376 - test_enhanced_rstp_coverage - WARNING -   未检测到RSTP特有字段
2025-09-11 00:28:34,376 - test_enhanced_rstp_coverage - INFO - BPDU 2 分析:
2025-09-11 00:28:34,376 - test_enhanced_rstp_coverage - WARNING -   缺少字段: bridge_id
2025-09-11 00:28:34,376 - test_enhanced_rstp_coverage - WARNING -   缺少字段: root_id
2025-09-11 00:28:34,377 - test_enhanced_rstp_coverage - WARNING -   缺少字段: root_path_cost
2025-09-11 00:28:34,377 - test_enhanced_rstp_coverage - WARNING -   未检测到RSTP特有字段
2025-09-11 00:28:34,377 - test_enhanced_rstp_coverage - INFO - BPDU 3 分析:
2025-09-11 00:28:34,377 - test_enhanced_rstp_coverage - WARNING -   缺少字段: bridge_id
2025-09-11 00:28:34,377 - test_enhanced_rstp_coverage - WARNING -   缺少字段: root_id
2025-09-11 00:28:34,378 - test_enhanced_rstp_coverage - WARNING -   缺少字段: root_path_cost
2025-09-11 00:28:34,378 - test_enhanced_rstp_coverage - WARNING -   未检测到RSTP特有字段
2025-09-11 00:28:34,378 - test_enhanced_rstp_coverage - INFO - ✓ 详细BPDU分析测试完成
2025-09-11 00:28:34,378 - RSTPTest - INFO - 测试完成: test_detailed_bpdu_analysis (耗时: 73.19秒)
2025-09-11 00:28:34,379 - RSTPTest - INFO - ============================================================

2025-09-11 00:28:34,380 - RSTPTest - INFO - ============================================================
2025-09-11 00:28:34,380 - RSTPTest - INFO - 开始测试: test_topology_change_comprehensive
2025-09-11 00:28:34,380 - RSTPTest - INFO - ============================================================
2025-09-11 00:28:34,381 - test_enhanced_rstp_coverage - INFO - 开始全面拓扑变更测试
2025-09-11 00:28:34,381 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 00:28:34,381 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 00:28:34,382 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 00:28:34,382 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 00:28:34,382 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 00:28:34,382 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 00:28:34,382 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 00:28:34,382 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 00:28:34,383 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 00:28:34,914 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 00:28:34,915 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 00:28:34,915 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 00:28:35,073 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 00:28:36,169 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 00:28:36,169 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 00:28:36,169 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 00:28:36,170 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 00:28:36,170 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 00:28:36,654 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 00:28:37,143 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 00:28:37,143 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 00:28:37,337 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 00:28:37,338 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 00:28:37,338 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 00:28:37,338 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 00:28:37,339 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 00:28:37,339 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 00:28:37,339 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 00:28:37,339 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 00:28:37,838 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 00:28:42,346 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:28:42,471 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:28:42,471 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 00:28:42,471 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 00:28:42,471 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:28:42,471 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 00:28:43,660 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 00:28:44,821 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 00:28:44,822 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 00:28:44,916 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 00:28:45,185 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 00:28:45,185 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 00:28:45,185 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 00:28:45,186 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 00:28:45,186 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 00:28:45,186 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 00:28:45,186 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 00:28:45,186 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 00:28:45,684 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 00:28:50,201 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:28:50,332 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:28:50,332 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 00:28:50,332 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 00:28:50,332 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:28:50,333 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 00:28:51,528 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 00:28:52,766 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 00:28:52,766 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 00:28:52,864 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 00:28:53,142 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 00:28:53,142 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 00:28:53,143 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 00:28:53,143 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 4096 (方法: mstpd)
2025-09-11 00:28:53,143 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级4096 -> mstpd优先级1)
2025-09-11 00:28:53,267 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 00:28:53,268 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 8192 (方法: ovs)
2025-09-11 00:28:53,268 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 00:28:53,381 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 00:28:53,553 - test_enhanced_rstp_coverage - INFO - 等待初始收敛...
2025-09-11 00:28:53,554 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 00:28:54,003 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:28:54,159 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:28:54,160 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 00:28:54,160 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:28:54,161 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 00:28:54,161 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:28:54,632 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:28:54,633 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:28:54,634 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:28:54,634 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:28:54,634 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:28:54,634 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:28:54,922 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.37秒
2025-09-11 00:28:55,383 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:28:55,535 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:28:55,536 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 00:28:55,536 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:28:55,537 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 00:28:55,537 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:28:56,005 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:28:56,005 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:28:56,007 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:28:56,007 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:28:56,007 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:28:56,007 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:28:56,755 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:28:56,916 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:28:56,917 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 00:28:56,917 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:28:56,917 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 00:28:56,917 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:28:57,438 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:28:57,438 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:28:57,439 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:28:57,439 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:28:57,440 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:28:57,440 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:28:57,726 - RSTPAnalyzer_DUT - INFO - Root ID为unknown，判定为非根桥
2025-09-11 00:28:57,726 - test_enhanced_rstp_coverage - INFO - 初始状态: DUT是根桥=False
2025-09-11 00:28:57,726 - test_enhanced_rstp_coverage - INFO - === 测试场景1: 根桥变更 ===
2025-09-11 00:28:57,727 - test_enhanced_rstp_coverage - INFO - 将DUT设置为根桥
2025-09-11 00:28:57,727 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 1024 (方法: ovs)
2025-09-11 00:28:57,727 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 00:28:57,896 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 00:29:03,471 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:29:03,624 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:29:03,626 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 0
2025-09-11 00:29:03,626 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 00:29:03,626 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 0000/90:12:10:b5:7d:f7
2025-09-11 00:29:03,626 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 0000/90:12:10:b5:7d:f7
2025-09-11 00:29:04,097 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:29:04,097 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:29:04,098 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:29:04,098 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:29:04,098 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:29:04,099 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:29:04,852 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:29:05,004 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:29:05,005 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 0
2025-09-11 00:29:05,005 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 00:29:05,005 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 0000/90:12:10:b5:7d:f7
2025-09-11 00:29:05,006 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 0000/90:12:10:b5:7d:f7
2025-09-11 00:29:05,468 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:29:05,469 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:29:05,470 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:29:05,470 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:29:05,470 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:29:05,471 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:29:05,758 - RSTPAnalyzer_DUT - INFO - 根桥检查: bridge_id='0000/90:12:10:b5:7d:f7', root_id='0000/90:12:10:b5:7d:f7', is_root=True
2025-09-11 00:29:05,758 - test_enhanced_rstp_coverage - INFO - ✓ 检测到根桥变更
2025-09-11 00:29:05,758 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br4, 数量: 5)
2025-09-11 00:29:15,918 - RSTPAnalyzer_DUT - INFO - 捕获到 4 个BPDU包
2025-09-11 00:29:15,919 - test_enhanced_rstp_coverage - INFO - === 测试场景2: 端口故障恢复 ===
2025-09-11 00:29:16,379 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:29:16,528 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:29:16,529 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 0
2025-09-11 00:29:16,529 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 00:29:16,529 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 0000/90:12:10:b5:7d:f7
2025-09-11 00:29:16,529 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 0000/90:12:10:b5:7d:f7
2025-09-11 00:29:16,989 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:29:16,990 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:29:16,991 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:29:16,991 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:29:16,991 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:29:16,991 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:29:17,278 - test_enhanced_rstp_coverage - INFO - 测试端口br4故障恢复
2025-09-11 00:29:39,315 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:29:39,467 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Disabled   Discarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:29:39,468 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 0
2025-09-11 00:29:39,468 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 00:29:39,469 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 0000/90:12:10:b5:7d:f7
2025-09-11 00:29:39,469 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 0000/90:12:10:b5:7d:f7
2025-09-11 00:29:39,926 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:29:39,927 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:29:39,928 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:29:39,928 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:29:39,928 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:29:39,928 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:29:40,213 - test_enhanced_rstp_coverage - INFO - ✓ 端口故障引起拓扑变更
2025-09-11 00:29:50,743 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:29:50,894 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:29:50,895 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 0
2025-09-11 00:29:50,895 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 00:29:50,896 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 0000/90:12:10:b5:7d:f7
2025-09-11 00:29:50,896 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 0000/90:12:10:b5:7d:f7
2025-09-11 00:29:51,356 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:29:51,356 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:29:51,357 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:29:51,357 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:29:51,358 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:29:51,358 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:29:51,645 - test_enhanced_rstp_coverage - INFO - ✓ 端口br4成功恢复，状态: forwarding
2025-09-11 00:29:51,645 - test_enhanced_rstp_coverage - INFO - === 测试场景3: 端口优先级变更 ===
2025-09-11 00:29:52,102 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:29:52,254 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:29:52,255 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 0
2025-09-11 00:29:52,255 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 00:29:52,255 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 0000/90:12:10:b5:7d:f7
2025-09-11 00:29:52,256 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 0000/90:12:10:b5:7d:f7
2025-09-11 00:29:52,720 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:29:52,721 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:29:52,722 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:29:52,722 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:29:52,722 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:29:52,723 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:29:53,009 - test_enhanced_rstp_coverage - INFO - 修改端口br4优先级
2025-09-11 00:30:01,522 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:30:01,674 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    64.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:30:01,675 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 0
2025-09-11 00:30:01,676 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 00:30:01,676 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 0000/90:12:10:b5:7d:f7
2025-09-11 00:30:01,676 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 0000/90:12:10:b5:7d:f7
2025-09-11 00:30:02,136 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:30:02,136 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:30:02,137 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:30:02,137 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:30:02,137 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:30:02,138 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:30:02,446 - test_enhanced_rstp_coverage - INFO - 端口br4优先级变更后状态: forwarding
2025-09-11 00:30:02,446 - test_enhanced_rstp_coverage - INFO - ✓ 拓扑变更测试通过：成功检测到多种拓扑变更
2025-09-11 00:30:02,446 - test_enhanced_rstp_coverage - INFO - ✓ 全面拓扑变更测试完成
2025-09-11 00:30:02,447 - RSTPTest - INFO - 测试完成: test_topology_change_comprehensive (耗时: 88.07秒)
2025-09-11 00:30:02,447 - RSTPTest - INFO - ============================================================

2025-09-11 00:30:02,448 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-11 00:30:02,448 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-11 00:30:02,449 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-11 00:30:02,590 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-11 00:30:02,590 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-11 00:30:02,724 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-11 00:30:02,724 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-11 00:30:02,858 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-11 00:30:02,858 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-11 00:30:02,859 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 00:30:02,859 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 00:30:02,859 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-11 00:30:02,860 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-11 00:30:02,915 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-11 00:30:02,916 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-11 00:30:03,088 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-11 00:30:03,089 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-11 00:30:03,089 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-11 00:30:03,089 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-11 00:30:03,090 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-11 00:30:03,145 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-11 00:30:03,145 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-11 00:30:03,313 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-11 00:30:03,314 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-11 00:30:03,314 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-11 00:30:03,314 - RSTPTest - INFO - ============================================================
2025-09-11 00:30:03,314 - RSTPTest - INFO - 开始测试: test_rstp_reconvergence_no_switchover
2025-09-11 00:30:03,314 - RSTPTest - INFO - ============================================================
2025-09-11 00:30:03,315 - test_high_availability - INFO - 开始RSTP重构误判测试
2025-09-11 00:30:03,315 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 00:30:03,315 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 00:30:03,316 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 00:30:03,316 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 00:30:03,316 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 00:30:03,316 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 00:30:03,316 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 00:30:03,316 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 00:30:03,316 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 00:30:03,805 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 00:30:03,805 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 00:30:03,805 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 00:30:03,960 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 00:30:05,043 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 00:30:05,043 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 00:30:05,044 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 00:30:05,044 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 00:30:05,044 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 00:30:05,524 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 00:30:06,000 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 00:30:06,000 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 00:30:06,188 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 00:30:06,188 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 00:30:06,189 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 00:30:06,189 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 00:30:06,189 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 00:30:06,189 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 00:30:06,189 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 00:30:06,189 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 00:30:06,679 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 00:30:11,165 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:30:11,295 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:30:11,296 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 00:30:11,296 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 00:30:11,296 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:30:11,296 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 00:30:12,481 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 00:30:13,660 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 00:30:13,661 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 00:30:13,756 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 00:30:14,022 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 00:30:14,023 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 00:30:14,023 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 00:30:14,023 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 00:30:14,023 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 00:30:14,023 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 00:30:14,023 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 00:30:14,023 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 00:30:14,523 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 00:30:18,997 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:30:19,134 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:30:19,134 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 00:30:19,134 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 00:30:19,134 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:30:19,135 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 00:30:20,354 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 00:30:21,624 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 00:30:21,624 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 00:30:21,720 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 00:30:21,981 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 00:30:21,981 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 00:30:21,981 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 00:30:27,031 - test_high_availability - INFO - 初始HA状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-11 00:30:27,031 - test_high_availability - INFO - 在远端触发RSTP重构...
2025-09-11 00:30:27,031 - FaultInjector_TestNode2 - INFO - 断开链路: eth0
2025-09-11 00:30:27,208 - FaultInjector_TestNode2 - INFO - 链路已断开: eth0
2025-09-11 00:30:37,259 - test_high_availability - INFO - RSTP重构后HA状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-11 00:30:37,259 - FaultInjector_TestNode2 - INFO - 恢复链路: eth0
2025-09-11 00:30:37,390 - FaultInjector_TestNode2 - INFO - 链路已恢复: eth0
2025-09-11 00:30:37,390 - test_high_availability - INFO - RSTP重构误判测试完成
2025-09-11 00:30:37,391 - RSTPTest - INFO - 测试完成: test_rstp_reconvergence_no_switchover (耗时: 34.08秒)
2025-09-11 00:30:37,391 - RSTPTest - INFO - ============================================================

2025-09-11 00:30:37,393 - RSTPTest - INFO - ============================================================
2025-09-11 00:30:37,393 - RSTPTest - INFO - 开始测试: test_split_brain_scenario
2025-09-11 00:30:37,394 - RSTPTest - INFO - ============================================================
2025-09-11 00:30:37,394 - test_high_availability - INFO - 开始裂脑场景测试
2025-09-11 00:30:37,446 - test_high_availability - INFO - 初始状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-11 00:30:37,447 - test_high_availability - INFO - 断开同步链路: eth3
2025-09-11 00:30:37,447 - FaultInjector_DUT - INFO - 断开链路: eth3
2025-09-11 00:30:37,714 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth3 (code=1)，将在逻辑上标记为已断开
2025-09-11 00:30:47,715 - test_high_availability - WARNING - 裂脑测试需要访问两个控制器
2025-09-11 00:30:47,715 - FaultInjector_DUT - INFO - 恢复链路: eth3
2025-09-11 00:30:47,935 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth3 (code=1)，将在逻辑上标记为已恢复
2025-09-11 00:30:47,935 - test_high_availability - INFO - 裂脑场景测试完成
2025-09-11 00:30:47,936 - RSTPTest - INFO - 测试完成: test_split_brain_scenario (耗时: 10.54秒)
2025-09-11 00:30:47,936 - RSTPTest - INFO - ============================================================

2025-09-11 00:30:47,940 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-11 00:30:47,941 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-11 00:30:47,941 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-11 00:30:48,077 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-11 00:30:48,078 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-11 00:30:48,078 - RSTPTest - INFO - ============================================================
2025-09-11 00:30:48,078 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[12288]
2025-09-11 00:30:48,078 - RSTPTest - INFO - ============================================================
2025-09-11 00:30:48,079 - test_parameters - INFO - 测试网桥优先级: 12288
2025-09-11 00:30:49,587 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 00:30:49,588 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 00:30:49,588 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 12288 (方法: ovs)
2025-09-11 00:30:49,588 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 00:30:49,716 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 00:30:49,871 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-11 00:30:51,980 - test_parameters - INFO - 从OVS配置读取到优先级: 12288
2025-09-11 00:30:51,980 - test_parameters - INFO - 优先级12288设置成功
2025-09-11 00:30:51,981 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[12288] (耗时: 3.90秒)
2025-09-11 00:30:51,981 - RSTPTest - INFO - ============================================================

2025-09-11 00:30:51,982 - RSTPTest - INFO - ============================================================
2025-09-11 00:30:51,983 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[16384]
2025-09-11 00:30:51,983 - RSTPTest - INFO - ============================================================
2025-09-11 00:30:51,983 - test_parameters - INFO - 测试网桥优先级: 16384
2025-09-11 00:30:53,456 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 00:30:53,456 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 00:30:53,456 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 16384 (方法: ovs)
2025-09-11 00:30:53,457 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 00:30:53,580 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 00:30:53,731 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-11 00:30:55,839 - test_parameters - INFO - 从OVS配置读取到优先级: 16384
2025-09-11 00:30:55,839 - test_parameters - INFO - 优先级16384设置成功
2025-09-11 00:30:55,840 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[16384] (耗时: 3.86秒)
2025-09-11 00:30:55,840 - RSTPTest - INFO - ============================================================

2025-09-11 00:30:55,841 - RSTPTest - INFO - ============================================================
2025-09-11 00:30:55,841 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[32768]
2025-09-11 00:30:55,842 - RSTPTest - INFO - ============================================================
2025-09-11 00:30:55,842 - test_parameters - INFO - 测试网桥优先级: 32768
2025-09-11 00:30:57,316 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 00:30:57,316 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 00:30:57,316 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 32768 (方法: ovs)
2025-09-11 00:30:57,317 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 00:30:57,441 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 00:30:57,589 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-11 00:30:59,700 - test_parameters - INFO - 从OVS配置读取到优先级: 32768
2025-09-11 00:30:59,700 - test_parameters - INFO - 优先级32768设置成功
2025-09-11 00:30:59,701 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[32768] (耗时: 3.86秒)
2025-09-11 00:30:59,701 - RSTPTest - INFO - ============================================================

2025-09-11 00:30:59,703 - RSTPTest - INFO - ============================================================
2025-09-11 00:30:59,703 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[61440]
2025-09-11 00:30:59,703 - RSTPTest - INFO - ============================================================
2025-09-11 00:30:59,704 - test_parameters - INFO - 测试网桥优先级: 61440
2025-09-11 00:31:01,175 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 00:31:01,176 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 00:31:01,176 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 61440 (方法: ovs)
2025-09-11 00:31:01,176 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 00:31:01,303 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 00:31:01,457 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-11 00:31:03,567 - test_parameters - INFO - 从OVS配置读取到优先级: 61440
2025-09-11 00:31:03,567 - test_parameters - INFO - 优先级61440设置成功
2025-09-11 00:31:03,568 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[61440] (耗时: 3.86秒)
2025-09-11 00:31:03,568 - RSTPTest - INFO - ============================================================

2025-09-11 00:31:03,569 - RSTPTest - INFO - ============================================================
2025-09-11 00:31:03,570 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[4097]
2025-09-11 00:31:03,570 - RSTPTest - INFO - ============================================================
2025-09-11 00:31:03,570 - test_parameters - INFO - 测试无效优先级: 4097
2025-09-11 00:31:04,179 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 00:31:04,179 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 00:31:04,179 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 4097 (方法: ovs)
2025-09-11 00:31:04,180 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 00:31:04,342 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 00:31:05,595 - test_parameters - INFO - DUT处理无效优先级 4097 -> 4097
2025-09-11 00:31:05,595 - test_parameters - ERROR - DUT接受了非标准优先级值 4097，不符合802.1D标准（应为4096的倍数）
2025-09-11 00:31:06,014 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[4097] (耗时: 2.44秒)
2025-09-11 00:31:06,014 - RSTPTest - INFO - ============================================================

2025-09-11 00:31:06,016 - RSTPTest - INFO - ============================================================
2025-09-11 00:31:06,017 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[12289]
2025-09-11 00:31:06,017 - RSTPTest - INFO - ============================================================
2025-09-11 00:31:06,017 - test_parameters - INFO - 测试无效优先级: 12289
2025-09-11 00:31:06,559 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 00:31:06,560 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 00:31:06,560 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 12289 (方法: ovs)
2025-09-11 00:31:06,560 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 00:31:06,723 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 00:31:07,977 - test_parameters - INFO - DUT处理无效优先级 12289 -> 12289
2025-09-11 00:31:07,978 - test_parameters - ERROR - DUT接受了非标准优先级值 12289，不符合802.1D标准（应为4096的倍数）
2025-09-11 00:31:07,998 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[12289] (耗时: 1.98秒)
2025-09-11 00:31:07,998 - RSTPTest - INFO - ============================================================

2025-09-11 00:31:08,001 - RSTPTest - INFO - ============================================================
2025-09-11 00:31:08,001 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[70000]
2025-09-11 00:31:08,001 - RSTPTest - INFO - ============================================================
2025-09-11 00:31:08,002 - test_parameters - INFO - 测试无效优先级: 70000
2025-09-11 00:31:08,606 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 00:31:08,606 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 00:31:08,607 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 70000 (方法: ovs)
2025-09-11 00:31:08,607 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 00:31:08,771 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 00:31:10,036 - test_parameters - INFO - DUT处理无效优先级 70000 -> 70000
2025-09-11 00:31:10,036 - test_parameters - ERROR - DUT接受了非标准优先级值 70000，不符合802.1D标准（应为4096的倍数）
2025-09-11 00:31:10,058 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[70000] (耗时: 2.06秒)
2025-09-11 00:31:10,058 - RSTPTest - INFO - ============================================================

2025-09-11 00:31:10,060 - RSTPTest - INFO - ============================================================
2025-09-11 00:31:10,061 - RSTPTest - INFO - 开始测试: test_hello_time
2025-09-11 00:31:10,061 - RSTPTest - INFO - ============================================================
2025-09-11 00:31:10,062 - test_parameters - INFO - 测试Hello Time参数
2025-09-11 00:31:11,672 - test_parameters - INFO - 设置Hello Time: 1秒
2025-09-11 00:31:11,672 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 00:31:11,672 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 00:31:13,906 - test_parameters - INFO - 设置Hello Time: 2秒
2025-09-11 00:31:13,906 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 00:31:13,907 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 00:31:16,178 - test_parameters - INFO - 设置Hello Time: 5秒
2025-09-11 00:31:16,178 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 00:31:16,179 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 00:31:18,450 - test_parameters - INFO - Hello Time测试通过
2025-09-11 00:31:18,451 - RSTPTest - INFO - 测试完成: test_hello_time (耗时: 8.39秒)
2025-09-11 00:31:18,451 - RSTPTest - INFO - ============================================================

2025-09-11 00:31:18,452 - RSTPTest - INFO - ============================================================
2025-09-11 00:31:18,452 - RSTPTest - INFO - 开始测试: test_forward_delay
2025-09-11 00:31:18,453 - RSTPTest - INFO - ============================================================
2025-09-11 00:31:18,453 - test_parameters - INFO - 测试Forward Delay参数
2025-09-11 00:31:20,061 - test_parameters - INFO - 设置Forward Delay: 4秒
2025-09-11 00:31:20,061 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 00:31:20,061 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 00:31:22,294 - test_parameters - INFO - 设置Forward Delay: 10秒
2025-09-11 00:31:22,294 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 00:31:22,295 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 00:31:24,576 - test_parameters - INFO - 设置Forward Delay: 15秒
2025-09-11 00:31:24,576 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 00:31:24,576 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 00:31:26,855 - test_parameters - INFO - Forward Delay测试通过
2025-09-11 00:31:26,856 - RSTPTest - INFO - 测试完成: test_forward_delay (耗时: 8.40秒)
2025-09-11 00:31:26,856 - RSTPTest - INFO - ============================================================

2025-09-11 00:31:26,857 - RSTPTest - INFO - ============================================================
2025-09-11 00:31:26,858 - RSTPTest - INFO - 开始测试: test_max_age
2025-09-11 00:31:26,858 - RSTPTest - INFO - ============================================================
2025-09-11 00:31:26,858 - test_parameters - INFO - 测试Max Age参数
2025-09-11 00:31:28,467 - test_parameters - INFO - 设置Max Age: 6秒
2025-09-11 00:31:28,468 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 00:31:28,468 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 00:31:30,700 - test_parameters - INFO - 设置Max Age: 10秒
2025-09-11 00:31:30,700 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 00:31:30,700 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 00:31:32,974 - test_parameters - INFO - 设置Max Age: 20秒
2025-09-11 00:31:32,974 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 00:31:32,975 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 00:31:35,246 - test_parameters - INFO - Max Age测试通过
2025-09-11 00:31:35,247 - RSTPTest - INFO - 测试完成: test_max_age (耗时: 8.39秒)
2025-09-11 00:31:35,247 - RSTPTest - INFO - ============================================================

2025-09-11 00:31:35,377 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-11 00:31:35,377 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-11 00:31:35,514 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-11 00:31:35,514 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-11 00:31:35,515 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 00:31:35,515 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 00:31:35,515 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-11 00:31:35,515 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-11 00:31:35,571 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-11 00:31:35,571 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-11 00:31:35,739 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-11 00:31:35,740 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-11 00:31:35,740 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-11 00:31:35,740 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-11 00:31:35,741 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-11 00:31:35,944 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-11 00:31:35,945 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-11 00:31:36,118 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-11 00:31:36,118 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-11 00:31:36,119 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-11 00:31:36,119 - RSTPTest - INFO - ============================================================
2025-09-11 00:31:36,119 - RSTPTest - INFO - 开始测试: test_port_cost
2025-09-11 00:31:36,119 - RSTPTest - INFO - ============================================================
2025-09-11 00:31:36,120 - test_parameters - INFO - 测试端口路径成本
2025-09-11 00:31:36,120 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 00:31:36,120 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 00:31:36,120 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 00:31:36,121 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 00:31:36,121 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 00:31:36,121 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 00:31:36,121 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 00:31:36,121 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 00:31:36,121 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 00:31:36,619 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 00:31:36,620 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 00:31:36,620 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 00:31:36,753 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 00:31:37,790 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 00:31:37,790 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 00:31:37,790 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 00:31:37,791 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 00:31:37,791 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 00:31:38,264 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 00:31:38,706 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 00:31:38,707 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 00:31:38,878 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 00:31:38,879 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 00:31:38,879 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 00:31:38,879 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 00:31:38,879 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 00:31:38,879 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 00:31:38,880 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 00:31:38,880 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 00:31:39,379 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 00:31:43,871 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:31:43,995 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:31:43,996 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 00:31:43,996 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 00:31:43,996 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:31:43,996 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 00:31:45,172 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 00:31:46,344 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 00:31:46,344 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 00:31:46,440 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 00:31:46,705 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 00:31:46,706 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 00:31:46,706 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 00:31:46,706 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 00:31:46,707 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 00:31:46,707 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 00:31:46,707 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 00:31:46,707 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 00:31:47,236 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 00:33:21,263 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:33:31,342 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:33:31,342 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 00:33:31,342 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 00:33:31,343 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:33:31,343 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 00:34:39,865 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 00:35:31,696 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 00:35:31,697 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 00:35:31,789 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 00:35:42,000 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 00:35:42,001 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 00:35:42,001 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 00:35:47,002 - test_parameters - INFO - 设置端口eth0成本: 10
2025-09-11 00:35:47,002 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 00:35:47,003 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 00:35:47,066 - test_parameters - INFO - 设置端口eth0成本: 100
2025-09-11 00:35:47,066 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 00:35:47,066 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 00:35:47,173 - test_parameters - INFO - 设置端口eth0成本: 1000
2025-09-11 00:35:47,174 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 00:35:47,174 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 00:35:47,281 - test_parameters - INFO - 设置端口eth0成本: 20000
2025-09-11 00:35:47,281 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 00:35:47,282 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 00:35:47,389 - test_parameters - INFO - 端口成本测试通过
2025-09-11 00:35:47,390 - RSTPTest - INFO - 测试完成: test_port_cost (耗时: 251.27秒)
2025-09-11 00:35:47,390 - RSTPTest - INFO - ============================================================

2025-09-11 00:35:47,391 - RSTPTest - INFO - ============================================================
2025-09-11 00:35:47,391 - RSTPTest - INFO - 开始测试: test_parameter_persistence
2025-09-11 00:35:47,391 - RSTPTest - INFO - ============================================================
2025-09-11 00:35:47,392 - test_parameters - INFO - 测试参数持久性
2025-09-11 00:35:49,020 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 00:35:49,020 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 00:35:49,020 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 16384 (方法: ovs)
2025-09-11 00:35:49,020 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 00:35:49,139 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 00:35:54,984 - test_parameters - INFO - 参数持久性测试通过
2025-09-11 00:35:54,985 - RSTPTest - INFO - 测试完成: test_parameter_persistence (耗时: 7.59秒)
2025-09-11 00:35:54,986 - RSTPTest - INFO - ============================================================

2025-09-11 00:35:54,987 - RSTPTest - INFO - ============================================================
2025-09-11 00:35:54,987 - RSTPTest - INFO - 开始测试: test_parameter_boundaries
2025-09-11 00:35:54,987 - RSTPTest - INFO - ============================================================
2025-09-11 00:35:54,988 - test_parameters - INFO - 测试参数边界值
2025-09-11 00:35:56,646 - test_parameters - INFO - 最小值0: 失败
2025-09-11 00:35:56,750 - test_parameters - INFO - 最大值65535: 失败
2025-09-11 00:35:56,853 - test_parameters - INFO - 正确拒绝了无效值-1
2025-09-11 00:35:56,957 - test_parameters - INFO - 正确拒绝了无效值65536
2025-09-11 00:35:57,061 - test_parameters - INFO - 最小值1: 失败
2025-09-11 00:35:57,162 - test_parameters - INFO - 最大值10: 失败
2025-09-11 00:35:57,265 - test_parameters - INFO - 正确拒绝了无效值0
2025-09-11 00:35:57,369 - test_parameters - INFO - 正确拒绝了无效值11
2025-09-11 00:35:57,469 - test_parameters - INFO - 最小值4: 失败
2025-09-11 00:35:57,573 - test_parameters - INFO - 最大值30: 失败
2025-09-11 00:35:57,673 - test_parameters - INFO - 正确拒绝了无效值3
2025-09-11 00:35:57,773 - test_parameters - INFO - 正确拒绝了无效值31
2025-09-11 00:35:57,873 - test_parameters - INFO - 最小值6: 失败
2025-09-11 00:35:57,977 - test_parameters - INFO - 最大值40: 失败
2025-09-11 00:35:58,077 - test_parameters - INFO - 正确拒绝了无效值5
2025-09-11 00:35:58,181 - test_parameters - INFO - 正确拒绝了无效值41
2025-09-11 00:35:58,182 - test_parameters - INFO - 参数边界测试完成
2025-09-11 00:35:58,182 - RSTPTest - INFO - 测试完成: test_parameter_boundaries (耗时: 3.20秒)
2025-09-11 00:35:58,183 - RSTPTest - INFO - ============================================================

2025-09-11 00:35:58,183 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-11 00:35:58,183 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-11 00:35:58,184 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-11 00:35:58,320 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-11 00:35:58,320 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-11 00:35:58,438 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-11 00:35:58,439 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-11 00:35:58,571 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-11 00:35:58,572 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-11 00:35:58,572 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 00:35:58,572 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 00:35:58,572 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-11 00:35:58,573 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-11 00:35:58,629 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-11 00:35:58,630 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-11 00:35:58,798 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-11 00:35:58,799 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-11 00:35:58,799 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-11 00:35:58,799 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-11 00:35:58,799 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-11 00:35:58,854 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-11 00:35:58,854 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-11 00:36:07,032 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-11 00:36:07,032 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-11 00:36:07,033 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-11 00:36:07,033 - RSTPTest - INFO - ============================================================
2025-09-11 00:36:07,033 - RSTPTest - INFO - 开始测试: test_port_role_assignment_simplified
2025-09-11 00:36:07,033 - RSTPTest - INFO - ============================================================
2025-09-11 00:36:07,034 - test_protocol_conformance - INFO - 开始端口角色分配测试
2025-09-11 00:36:07,034 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 00:36:07,034 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 00:36:07,034 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 00:36:07,035 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 00:36:07,035 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 00:36:07,035 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 00:36:07,035 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 00:36:07,035 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 00:36:07,035 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 00:36:07,522 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 00:36:07,523 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 00:36:07,523 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 00:36:07,677 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 00:36:08,718 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 00:36:08,718 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 00:36:08,718 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 00:36:08,719 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 00:36:08,719 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 00:36:09,194 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 00:36:09,654 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 00:36:09,654 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 00:36:09,834 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 00:36:09,834 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 00:36:09,835 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 00:36:09,835 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 00:36:09,835 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 00:36:09,835 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 00:36:09,835 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 00:36:09,835 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 00:36:10,333 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 00:36:14,808 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:36:14,938 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:36:14,938 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 00:36:14,938 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 00:36:14,939 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:36:14,939 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 00:36:16,118 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 00:36:17,294 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 00:36:17,294 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 00:36:17,390 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 00:36:17,656 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 00:36:17,656 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 00:36:17,657 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 00:36:17,657 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 00:36:17,657 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 00:36:17,657 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 00:36:17,657 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 00:36:17,658 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 00:36:33,312 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 00:36:37,798 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:36:37,921 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:36:37,922 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 00:36:37,922 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 00:36:37,922 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:36:37,922 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 00:36:39,106 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 00:36:40,322 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 00:36:40,322 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 00:36:40,417 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 00:36:40,678 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 00:36:40,679 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 00:36:40,679 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 00:36:40,679 - test_protocol_conformance - INFO - 验证拓扑完整性...
2025-09-11 00:36:40,679 - NetworkTopology - INFO - 开始验证拓扑完整性...
2025-09-11 00:36:41,996 - NetworkTopology - WARNING - 拓扑完整性验证失败: 2个问题
2025-09-11 00:36:41,996 - NetworkTopology - WARNING -   - DUT接口br3链路DOWN
2025-09-11 00:36:41,997 - NetworkTopology - WARNING -   - TestNode2接口eth2不存在
2025-09-11 00:36:41,997 - test_protocol_conformance - ERROR - 拓扑完整性验证失败:
2025-09-11 00:36:41,997 - test_protocol_conformance - ERROR -   - DUT接口br3链路DOWN
2025-09-11 00:36:41,998 - test_protocol_conformance - ERROR -   - TestNode2接口eth2不存在
2025-09-11 00:36:41,998 - test_protocol_conformance - INFO - 详细接口状态:
2025-09-11 00:36:41,998 - test_protocol_conformance - INFO -   DUT_br3: 存在=true, 链路=DOWN, 在网桥=true
2025-09-11 00:36:41,998 - test_protocol_conformance - INFO -   DUT_br4: 存在=true, 链路=UP, 在网桥=true
2025-09-11 00:36:41,998 - test_protocol_conformance - INFO -   TestNode1_eth0: 存在=true, 链路=UP, 在网桥=true
2025-09-11 00:36:41,999 - test_protocol_conformance - INFO -   TestNode1_eth2: 存在=true, 链路=UP, 在网桥=true
2025-09-11 00:36:41,999 - test_protocol_conformance - INFO -   TestNode2_eth0: 存在=true, 链路=UP, 在网桥=true
2025-09-11 00:36:41,999 - test_protocol_conformance - INFO -   TestNode2_eth2: 存在=false, 链路=UNKNOWN, 在网桥=unknown
2025-09-11 00:36:41,999 - test_protocol_conformance - INFO - 修复建议:
2025-09-11 00:36:41,999 - test_protocol_conformance - INFO -   - 检查br3的物理连接和对端接口状态
2025-09-11 00:36:42,000 - RSTPTest - INFO - 测试完成: test_port_role_assignment_simplified (耗时: 34.97秒)
2025-09-11 00:36:42,000 - RSTPTest - INFO - ============================================================

2025-09-11 00:36:42,002 - RSTPTest - INFO - ============================================================
2025-09-11 00:36:42,002 - RSTPTest - INFO - 开始测试: test_root_bridge_election
2025-09-11 00:36:42,003 - RSTPTest - INFO - ============================================================
2025-09-11 00:36:42,004 - test_protocol_conformance - INFO - 开始根网桥选举测试
2025-09-11 00:36:42,004 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 00:36:42,005 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 00:36:42,005 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 00:36:42,005 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 00:36:42,005 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 00:36:42,005 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 00:36:42,006 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 00:36:42,006 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 00:36:42,006 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 00:36:42,513 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 00:36:42,513 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 00:36:42,514 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 00:36:42,673 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 00:36:43,756 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 00:36:43,757 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 00:36:43,757 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 00:36:43,757 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 00:36:43,757 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 00:36:44,233 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 00:36:44,709 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 00:36:44,710 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 00:36:44,901 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 00:36:44,902 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 00:36:44,902 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 00:36:44,902 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 00:36:44,902 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 00:36:44,902 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 00:36:44,902 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 00:36:44,903 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 00:36:45,410 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 00:36:49,895 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:36:50,022 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:36:50,023 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 00:36:50,023 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 00:36:50,023 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:36:50,023 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 00:36:51,205 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 00:36:52,398 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 00:36:52,398 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 00:36:52,493 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 00:36:52,762 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 00:36:52,763 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 00:36:52,763 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 00:36:52,763 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 00:36:52,764 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 00:36:52,764 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 00:36:52,764 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 00:36:52,764 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 00:36:53,250 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 00:36:57,737 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:36:57,866 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:36:57,867 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 00:36:57,867 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 00:36:57,867 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:36:57,867 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 00:36:59,040 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 00:37:00,258 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 00:37:00,258 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 00:37:00,353 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 00:37:00,608 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 00:37:00,608 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 00:37:00,609 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 00:37:03,610 - test_protocol_conformance - INFO - === 检查DUT网桥配置 ===
2025-09-11 00:37:03,610 - test_protocol_conformance - INFO - DUT使用OVS网桥: SE_ETH2
2025-09-11 00:37:03,674 - test_protocol_conformance - INFO - OVS网桥 SE_ETH2 存在
2025-09-11 00:37:03,778 - test_protocol_conformance - INFO - SE_ETH2 RSTP状态: true
2025-09-11 00:37:03,778 - test_protocol_conformance - INFO - === 初始网桥状态 ===
2025-09-11 00:37:04,243 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:37:04,396 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:37:04,397 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 00:37:04,397 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:37:04,397 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 00:37:04,397 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:37:04,882 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:37:04,882 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:37:04,883 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:37:04,883 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:37:04,883 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:37:04,883 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:37:05,190 - test_protocol_conformance - INFO - 活动端口数: 1
2025-09-11 00:37:05,190 - test_protocol_conformance - WARNING - 活动端口不足，尝试启用更多端口
2025-09-11 00:37:09,039 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:37:09,190 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:37:09,191 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 00:37:09,192 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:37:09,192 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 00:37:09,192 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:37:09,653 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:37:09,653 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:37:09,655 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:37:09,655 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:37:09,655 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:37:09,655 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:37:09,942 - test_protocol_conformance - INFO - 初始端口状态:
2025-09-11 00:37:09,942 - test_protocol_conformance - INFO -   br4: 角色=alternate, 状态=discarding
2025-09-11 00:37:09,943 - test_protocol_conformance - INFO - 初始状态 - DUT有Root Port: False
2025-09-11 00:37:09,943 - test_protocol_conformance - INFO - === 配置网桥优先级 ===
2025-09-11 00:37:09,943 - test_protocol_conformance - INFO - 设置TestNode1优先级为16384
2025-09-11 00:37:09,943 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 16384 (方法: mstpd)
2025-09-11 00:37:09,943 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级16384 -> mstpd优先级4)
2025-09-11 00:37:10,067 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 00:37:10,067 - test_protocol_conformance - INFO - 设置DUT优先级为32768
2025-09-11 00:37:10,134 - test_protocol_conformance - INFO - OVS设置优先级结果: ('', '', 0)
2025-09-11 00:37:10,238 - test_protocol_conformance - INFO - 验证优先级设置: ('"32768"\n', '', 0)
2025-09-11 00:37:10,238 - test_protocol_conformance - INFO - 设置TestNode2优先级为24576
2025-09-11 00:37:10,238 - NetworkTopology_TestNode2 - INFO - TestNode2: 设置网桥优先级 br0 = 24576 (方法: mstpd)
2025-09-11 00:37:10,239 - NetworkTopology_TestNode2 - INFO - TestNode2: 执行mstpd设置优先级命令 (标准优先级24576 -> mstpd优先级6)
2025-09-11 00:37:10,362 - NetworkTopology_TestNode2 - INFO - TestNode2: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 00:37:10,362 - test_protocol_conformance - INFO - 等待RSTP收敛...
2025-09-11 00:37:20,363 - test_protocol_conformance - INFO - === 第一阶段验证 ===
2025-09-11 00:37:20,803 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:37:20,967 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    16384
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:37:20,968 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 16384
2025-09-11 00:37:20,968 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:37:20,969 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 4000/6e:b3:08:fa:01:34
2025-09-11 00:37:20,969 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:37:21,437 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:37:21,437 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:37:21,438 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:37:21,438 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:37:21,438 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:37:21,439 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:37:21,842 - test_protocol_conformance - INFO - DUT当前优先级: 8192
2025-09-11 00:37:21,842 - test_protocol_conformance - WARNING - 优先级验证失败: 期望32768，实际8192
2025-09-11 00:37:21,842 - test_protocol_conformance - INFO -   br4: 角色=alternate
2025-09-11 00:37:21,842 - test_protocol_conformance - INFO - 
=== 第二阶段：DUT应成为根桥 ===
2025-09-11 00:37:21,843 - test_protocol_conformance - INFO - 设置DUT优先级为12288（最低）
2025-09-11 00:37:21,962 - test_protocol_conformance - INFO - OVS设置最低优先级结果: ('', '', 0)
2025-09-11 00:37:22,074 - test_protocol_conformance - INFO - 设置后优先级: 12288
2025-09-11 00:37:22,075 - test_protocol_conformance - INFO - 最低优先级设置验证通过
2025-09-11 00:37:22,075 - test_protocol_conformance - INFO - 等待RSTP重新收敛...
2025-09-11 00:37:32,076 - test_protocol_conformance - INFO - === 最终验证 ===
2025-09-11 00:37:32,494 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:37:32,647 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    16384
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:37:32,648 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 16384
2025-09-11 00:37:32,648 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:37:32,648 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 4000/6e:b3:08:fa:01:34
2025-09-11 00:37:32,648 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:37:33,108 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:37:33,108 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:37:33,110 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:37:33,110 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:37:33,110 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:37:33,110 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:37:33,398 - test_protocol_conformance - INFO -   br4: 角色=alternate, 状态=discarding
2025-09-11 00:37:33,399 - test_protocol_conformance - ERROR - DUT RSTP实现问题诊断:
2025-09-11 00:37:33,399 - test_protocol_conformance - ERROR - 1. DUT优先级已设置为12288（最低）
2025-09-11 00:37:33,399 - test_protocol_conformance - ERROR - 2. 但DUT仍有Root Port: False
2025-09-11 00:37:33,399 - test_protocol_conformance - ERROR - 3. Designated端口数: 0
2025-09-11 00:37:33,399 - test_protocol_conformance - ERROR - 可能的原因:
2025-09-11 00:37:33,399 - test_protocol_conformance - ERROR - - DUT的RSTP实现不符合标准
2025-09-11 00:37:33,400 - test_protocol_conformance - ERROR - - DUT没有正确处理优先级变化
2025-09-11 00:37:33,400 - test_protocol_conformance - ERROR - - DUT的BPDU发送/接收有问题
2025-09-11 00:37:33,458 - RSTPTest - INFO - 测试完成: test_root_bridge_election (耗时: 51.45秒)
2025-09-11 00:37:33,458 - RSTPTest - INFO - ============================================================

2025-09-11 00:37:33,461 - RSTPTest - INFO - ============================================================
2025-09-11 00:37:33,461 - RSTPTest - INFO - 开始测试: test_port_role_assignment
2025-09-11 00:37:33,462 - RSTPTest - INFO - ============================================================
2025-09-11 00:37:33,463 - test_protocol_conformance - INFO - 开始端口角色分配测试
2025-09-11 00:37:33,463 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 00:37:33,463 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 00:37:33,463 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 00:37:33,464 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 00:37:33,464 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 00:37:33,464 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 00:37:33,464 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 00:37:33,464 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 00:37:33,465 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 00:37:33,936 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 00:37:33,936 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 00:37:33,937 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 00:37:34,096 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 00:37:35,215 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 00:37:35,216 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 00:37:35,216 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 00:37:35,216 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 00:37:35,217 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 00:37:35,695 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 00:37:36,164 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 00:37:36,165 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 00:37:36,356 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 00:37:36,357 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 00:37:36,357 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 00:37:36,357 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 00:37:36,357 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 00:37:36,357 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 00:37:36,358 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 00:37:36,358 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 00:37:36,860 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 00:37:41,374 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:37:41,505 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:37:41,505 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 00:37:41,506 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 00:37:41,506 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:37:41,506 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 00:37:42,688 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 00:37:43,866 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 00:37:43,866 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 00:37:43,962 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 00:37:44,248 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 00:37:44,249 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 00:37:44,249 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 00:37:44,249 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 00:37:44,250 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 00:37:44,250 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 00:37:44,250 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 00:37:44,250 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 00:37:44,772 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 00:37:49,253 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:37:49,380 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:37:49,381 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 00:37:49,381 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 00:37:49,381 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:37:49,381 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 00:37:50,540 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 00:37:51,749 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 00:37:51,750 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 00:37:51,845 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 00:37:52,113 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 00:37:52,113 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 00:37:52,114 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 00:37:52,114 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-11 00:37:52,114 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级12288 -> mstpd优先级3)
2025-09-11 00:37:52,235 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 00:37:52,236 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 32768 (方法: ovs)
2025-09-11 00:37:52,236 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 00:37:52,360 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 00:37:55,516 - test_protocol_conformance - INFO - 检查DUT的OVS网桥接口...
2025-09-11 00:37:55,573 - test_protocol_conformance - INFO - OVS配置状态:
('8c812ea9-3b0c-46a1-bd3c-ef3904d38c1a\n    Bridge SE_ETH2\n        Port SE_ETH2\n            Interface SE_ETH2\n                type: internal\n        Port br3\n            Interface br3\n        Port br4\n            Interface br4\n    Bridge SE_ETH4\n        Port SE_ETH4\n            Interface SE_ETH4\n                type: internal\n    Bridge SE_ETH6\n        Port SE_ETH6\n            Interface SE_ETH6\n                type: internal\n    Bridge rstp0\n        Port rstp0\n            Interface rstp0\n                type: internal\n    Bridge br0\n        Port eth0\n            Interface eth0\n                error: "could not open network device eth0 (No such device)"\n        Port br0\n            Interface br0\n                type: internal\n                error: "could not add network device br0 to ofproto (File exists)"\n        Port eth2\n            Interface eth2\n                error: "could not open network device eth2 (No such device)"\n    ovs_version: "3.1.0"\n', '', 0)
2025-09-11 00:37:55,677 - test_protocol_conformance - INFO - SE_ETH2 网桥端口:
('br3\nbr4\n', '', 0)
2025-09-11 00:37:55,781 - test_protocol_conformance - INFO - SE_ETH2 STP状态:
('true\n', '', 0)
2025-09-11 00:37:55,887 - test_protocol_conformance - INFO - SE_ETH2 端口信息:
('OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7\nn_tables:254, n_buffers:0\ncapabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP\nactions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst\n 1(br3): addr:90:12:10:b5:7d:f7\n     config:     0\n     state:      LINK_DOWN\n     current:    AUTO_NEG\n     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM\n     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM\n     speed: 0 Mbps now, 1000 Mbps max\n 2(br4): addr:90:12:10:b5:7d:f7\n     config:     0\n     state:      STP_FORWARD\n     current:    1GB-FD AUTO_NEG\n     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM\n     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM\n     speed: 1000 Mbps now, 1000 Mbps max\n LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7\n     config:     0\n     state:      0\n     speed: 0 Mbps now, 0 Mbps max\nOFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0\n', '', 0)
2025-09-11 00:37:55,887 - test_protocol_conformance - INFO - 获取初始网桥状态...
2025-09-11 00:37:56,338 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:37:56,490 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:37:56,491 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 00:37:56,491 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:37:56,492 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 00:37:56,492 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:37:56,947 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:37:56,947 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:37:56,948 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:37:56,949 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:37:56,949 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:37:56,949 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:37:57,233 - test_protocol_conformance - INFO - Bridge ID: 3000/6e:b3:08:fa:01:34
2025-09-11 00:37:57,233 - test_protocol_conformance - INFO - Root ID: unknown
2025-09-11 00:37:57,233 - test_protocol_conformance - INFO - Root Port: br3
2025-09-11 00:37:57,233 - test_protocol_conformance - INFO - 协议版本: rstp
2025-09-11 00:37:57,233 - test_protocol_conformance - INFO - 端口 br3: 角色=root, 状态=disabled, 成本=0
2025-09-11 00:37:57,233 - test_protocol_conformance - INFO - 端口 br4: 角色=alternate, 状态=discarding, 成本=0
2025-09-11 00:37:57,234 - test_protocol_conformance - INFO - 端口 SE_ETH2: 角色=unknown, 状态=disabled, 成本=0
2025-09-11 00:37:57,234 - test_protocol_conformance - INFO - 等待网络收敛...
2025-09-11 00:37:57,234 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 00:37:57,690 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:37:57,842 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:37:57,843 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 00:37:57,843 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:37:57,843 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 00:37:57,844 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:37:58,300 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:37:58,300 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:37:58,301 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:37:58,301 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:37:58,301 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:37:58,302 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:37:58,589 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.35秒
2025-09-11 00:37:59,066 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:37:59,226 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:37:59,227 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 00:37:59,227 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:37:59,227 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 00:37:59,227 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:37:59,708 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:37:59,708 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:37:59,709 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:37:59,709 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:37:59,709 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:37:59,710 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:38:00,009 - test_protocol_conformance - INFO - 收敛后的端口状态:
2025-09-11 00:38:00,009 - test_protocol_conformance - INFO - 端口 br3: 角色=root, 状态=disabled, 成本=0
2025-09-11 00:38:00,010 - test_protocol_conformance - INFO - 端口 br4: 角色=alternate, 状态=discarding, 成本=0
2025-09-11 00:38:00,010 - test_protocol_conformance - INFO - 端口 SE_ETH2: 角色=unknown, 状态=disabled, 成本=0
2025-09-11 00:38:00,466 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:38:00,622 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:38:00,623 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 00:38:00,623 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:38:00,623 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 00:38:00,623 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:38:01,111 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:38:01,111 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:38:01,112 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:38:01,112 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:38:01,113 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:38:01,113 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:38:01,401 - RSTPAnalyzer_DUT - INFO - Root ID为unknown，判定为非根桥
2025-09-11 00:38:01,401 - test_protocol_conformance - INFO - is_root_bridge() 返回: False
2025-09-11 00:38:01,401 - test_protocol_conformance - INFO - 有Root Port: False
2025-09-11 00:38:01,401 - test_protocol_conformance - INFO - 最终判定 - DUT是根桥: False
2025-09-11 00:38:01,401 - test_protocol_conformance - INFO - 活动端口数: 1
2025-09-11 00:38:01,402 - test_protocol_conformance - INFO - 禁用端口: ['br3', 'SE_ETH2']
2025-09-11 00:38:01,402 - test_protocol_conformance - WARNING - 活动端口不足，尝试启用禁用的端口...
2025-09-11 00:38:01,402 - test_protocol_conformance - INFO - 尝试启用端口 br3
2025-09-11 00:38:01,605 - test_protocol_conformance - INFO - 尝试启用端口 SE_ETH2
2025-09-11 00:38:01,913 - test_protocol_conformance - INFO - 已将端口 SE_ETH2 添加到OVS网桥 SE_ETH2
2025-09-11 00:38:07,334 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:38:07,485 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:38:07,486 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 00:38:07,487 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:38:07,487 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 00:38:07,487 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:38:07,963 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:38:07,964 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:38:07,965 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:38:07,965 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:38:07,965 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:38:07,965 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:38:08,268 - test_protocol_conformance - INFO - 重新配置后 - 活动端口数: 1
2025-09-11 00:38:08,269 - test_protocol_conformance - INFO - 重新配置后 - 禁用端口: ['br3', 'SE_ETH2']
2025-09-11 00:38:08,269 - test_protocol_conformance - INFO - 端口角色分布: {<PortRole.ALTERNATE: 'alternate'>: ['br4']}
2025-09-11 00:38:08,269 - test_protocol_conformance - WARNING - 只有一个活动端口，进行单端口验证
2025-09-11 00:38:08,269 - test_protocol_conformance - INFO - 单端口 br4: 角色=PortRole.ALTERNATE, 状态=PortState.DISCARDING
2025-09-11 00:38:08,313 - RSTPTest - INFO - 测试完成: test_port_role_assignment (耗时: 34.85秒)
2025-09-11 00:38:08,313 - RSTPTest - INFO - ============================================================

2025-09-11 00:38:08,316 - RSTPTest - INFO - ============================================================
2025-09-11 00:38:08,316 - RSTPTest - INFO - 开始测试: test_rstp_protocol_verification
2025-09-11 00:38:08,316 - RSTPTest - INFO - ============================================================
2025-09-11 00:38:08,317 - test_protocol_conformance - INFO - 开始RSTP协议验证
2025-09-11 00:38:08,317 - test_protocol_conformance - INFO - === 检查OVS配置 ===
2025-09-11 00:38:08,373 - test_protocol_conformance - INFO - 当前OVS配置:
8c812ea9-3b0c-46a1-bd3c-ef3904d38c1a
    Bridge SE_ETH2
        Port SE_ETH2
            Interface SE_ETH2
                type: internal
        Port br3
            Interface br3
        Port br4
            Interface br4
    Bridge SE_ETH4
        Port SE_ETH4
            Interface SE_ETH4
                type: internal
    Bridge SE_ETH6
        Port SE_ETH6
            Interface SE_ETH6
                type: internal
    Bridge rstp0
        Port rstp0
            Interface rstp0
          
2025-09-11 00:38:08,472 - test_protocol_conformance - INFO - 使用现有网桥 SE_ETH2，端口: ['br3', 'br4']
2025-09-11 00:38:08,472 - test_protocol_conformance - INFO - === 配置RSTP（确保是RSTP而不是STP）===
2025-09-11 00:38:09,688 - test_protocol_conformance - INFO - 启用RSTP...
2025-09-11 00:38:09,753 - test_protocol_conformance - INFO - ✓ RSTP已启用
2025-09-11 00:38:09,753 - test_protocol_conformance - INFO - 设置RSTP参数...
2025-09-11 00:38:09,865 - test_protocol_conformance - INFO - ✓ 设置: rstp-hello-time=2
2025-09-11 00:38:09,980 - test_protocol_conformance - INFO - ✓ 设置: rstp-forward-delay=4
2025-09-11 00:38:10,088 - test_protocol_conformance - INFO - ✓ 设置: rstp-max-age=6
2025-09-11 00:38:10,188 - test_protocol_conformance - INFO - ✓ 设置: rstp-priority=32768
2025-09-11 00:38:10,296 - test_protocol_conformance - INFO - ✓ 设置: rstp-force-protocol-version=2
2025-09-11 00:38:10,608 - test_protocol_conformance - INFO - ✓ 端口 br3 RSTP已启用
2025-09-11 00:38:10,924 - test_protocol_conformance - INFO - ✓ 端口 br4 RSTP已启用
2025-09-11 00:38:11,024 - test_protocol_conformance - INFO - 等待RSTP初始化...
2025-09-11 00:38:16,026 - test_protocol_conformance - INFO - === 验证RSTP配置 ===
2025-09-11 00:38:16,084 - test_protocol_conformance - INFO - RSTP状态:
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     6s
  stp-fwd-delay   4s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:38:16,085 - test_protocol_conformance - INFO - ✓ 使用RSTP时间参数
2025-09-11 00:38:16,085 - test_protocol_conformance - INFO - === 创建测试拓扑 ===
2025-09-11 00:38:16,085 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 00:38:16,086 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 00:38:16,086 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 00:38:16,086 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 00:38:16,086 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 00:38:16,086 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 00:38:16,087 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 00:38:16,087 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 00:38:16,087 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 00:38:16,609 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 00:38:16,609 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 00:38:16,609 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 00:38:16,752 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 00:38:17,827 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 00:38:17,828 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 00:38:17,828 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 00:38:17,828 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 00:38:17,828 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 00:38:18,304 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 00:38:18,796 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 00:38:18,796 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 00:38:19,000 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 00:38:19,000 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 00:38:19,001 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 00:38:19,001 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 00:38:19,001 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 00:38:19,001 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 00:38:19,002 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 00:38:19,002 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 00:38:19,488 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 00:38:23,977 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:38:24,105 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:38:24,106 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 00:38:24,106 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 00:38:24,106 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:38:24,106 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 00:38:25,280 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 00:38:26,475 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 00:38:26,476 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 00:38:26,571 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 00:38:26,833 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 00:38:26,833 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 00:38:26,833 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 00:38:26,834 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 00:38:26,834 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 00:38:26,834 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 00:38:26,834 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 00:38:26,835 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 00:38:27,332 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 00:38:31,816 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:38:31,944 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:38:31,945 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 00:38:31,945 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 00:38:31,945 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:38:31,945 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 00:38:33,114 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 00:38:34,333 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 00:38:34,333 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 00:38:34,430 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 00:38:34,698 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 00:38:34,698 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 00:38:34,698 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 00:38:39,699 - test_protocol_conformance - INFO - === 捕获BPDU ===
2025-09-11 00:38:39,699 - test_protocol_conformance - INFO - 在 SE_ETH2 上捕获BPDU...
2025-09-11 00:38:39,699 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: SE_ETH2, 数量: 10)
2025-09-11 00:38:49,801 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-11 00:38:49,801 - test_protocol_conformance - INFO - 在 br3 上捕获BPDU...
2025-09-11 00:38:49,802 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br3, 数量: 10)
2025-09-11 00:38:59,937 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-11 00:38:59,937 - test_protocol_conformance - INFO - 在 br4 上捕获BPDU...
2025-09-11 00:38:59,937 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br4, 数量: 10)
2025-09-11 00:39:10,085 - RSTPAnalyzer_DUT - INFO - 捕获到 3 个BPDU包
2025-09-11 00:39:10,085 - test_protocol_conformance - INFO - ✓ 捕获到 3 个BPDU
2025-09-11 00:39:10,085 - test_protocol_conformance - INFO - === 分析BPDU ===
2025-09-11 00:39:10,086 - test_protocol_conformance - INFO - 第一个BPDU信息: {'timestamp': '00:39:03.878245', 'raw': '00:39:03.878245 00:e0:0c:25:0c:01 > 01:80:c2:00:00:00, 802.3, length 39: LLC, dsap STP (0x42) Individual, ssap STP (0x42) Command, ctrl 0x03: STP 802.1w, Rapid STP, Flags [Learn, Forward, Agreement], bridge-id 8000.6e:b3:08:fa:01:34.8002, length 36', 'is_rstp': False}
2025-09-11 00:39:10,086 - test_protocol_conformance - INFO - BPDU统计: RSTP=0, STP=3
2025-09-11 00:39:10,086 - test_protocol_conformance - WARNING - 检测到更多STP BPDU
2025-09-11 00:39:10,182 - test_protocol_conformance - INFO - rstp_enable状态: true
2025-09-11 00:39:10,283 - test_protocol_conformance - INFO - stp_enable状态: true
2025-09-11 00:39:10,388 - test_protocol_conformance - WARNING - OVS配置为RSTP但发送STP BPDU，可能是实现限制
2025-09-11 00:39:10,388 - test_protocol_conformance - INFO - 基于配置判断为RSTP
2025-09-11 00:39:10,388 - test_protocol_conformance - INFO - ✓ RSTP协议验证通过（检测到 3 个RSTP BPDU）
2025-09-11 00:39:10,389 - RSTPTest - INFO - 测试完成: test_rstp_protocol_verification (耗时: 62.07秒)
2025-09-11 00:39:10,390 - RSTPTest - INFO - ============================================================

2025-09-11 00:39:10,391 - RSTPTest - INFO - ============================================================
2025-09-11 00:39:10,391 - RSTPTest - INFO - 开始测试: test_alternate_port_verification
2025-09-11 00:39:10,392 - RSTPTest - INFO - ============================================================
2025-09-11 00:39:10,392 - test_protocol_conformance - INFO - 开始Alternate Port验证测试
2025-09-11 00:39:10,393 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 00:39:10,393 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 00:39:10,393 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 00:39:10,393 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 00:39:10,394 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 00:39:10,394 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 00:39:10,394 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 00:39:10,394 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 00:39:10,394 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 00:39:10,938 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 00:39:10,938 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 00:39:10,938 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 00:39:11,098 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 00:39:12,210 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 00:39:12,210 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 00:39:12,211 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 00:39:12,211 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 00:39:12,211 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 00:39:12,715 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 00:39:13,195 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 00:39:13,196 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 00:39:13,387 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 00:39:13,387 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 00:39:13,387 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 00:39:13,388 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 00:39:13,388 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 00:39:13,388 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 00:39:13,388 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 00:39:13,388 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 00:39:13,877 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 00:39:18,353 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:39:18,481 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:39:18,481 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 00:39:18,481 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 00:39:18,482 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:39:18,482 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 00:39:19,650 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 00:39:20,834 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 00:39:20,835 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 00:39:20,929 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 00:39:21,193 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 00:39:21,193 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 00:39:21,194 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 00:39:21,194 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 00:39:21,194 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 00:39:21,195 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 00:39:21,195 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 00:39:21,195 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 00:39:21,667 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 00:39:26,158 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:39:26,288 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:39:26,288 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 00:39:26,288 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 00:39:26,288 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:39:26,288 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 00:39:27,451 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 00:39:28,660 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 00:39:28,660 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 00:39:28,756 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 00:39:29,031 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 00:39:29,032 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 00:39:29,032 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 00:39:29,032 - test_protocol_conformance - INFO - 设置网桥优先级
2025-09-11 00:39:29,032 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 4096 (方法: mstpd)
2025-09-11 00:39:29,032 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级4096 -> mstpd优先级1)
2025-09-11 00:39:29,156 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 00:39:29,157 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 8192 (方法: ovs)
2025-09-11 00:39:29,157 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 00:39:29,278 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 00:39:29,447 - NetworkTopology_TestNode2 - INFO - TestNode2: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-11 00:39:29,447 - NetworkTopology_TestNode2 - INFO - TestNode2: 执行mstpd设置优先级命令 (标准优先级12288 -> mstpd优先级3)
2025-09-11 00:39:29,574 - NetworkTopology_TestNode2 - INFO - TestNode2: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 00:39:29,574 - test_protocol_conformance - INFO - 等待RSTP收敛...
2025-09-11 00:39:29,575 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 00:39:30,001 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:39:30,160 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:39:30,161 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 00:39:30,162 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:39:30,162 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 00:39:30,162 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:39:30,646 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:39:30,646 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:39:30,648 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:39:30,648 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:39:30,648 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:39:30,648 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:39:30,944 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.37秒
2025-09-11 00:39:31,412 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:39:31,565 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:39:31,566 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 00:39:31,566 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:39:31,566 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 00:39:31,566 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:39:32,047 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:39:32,047 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:39:32,048 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:39:32,048 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:39:32,048 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:39:32,048 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:39:32,343 - test_protocol_conformance - INFO - DUT桥信息: BridgeInfo(bridge_id='1000/6e:b3:08:fa:01:34', root_id='unknown', root_port='br3', root_path_cost=0, protocol_version='rstp', hello_time=2, forward_delay=15, max_age=20, topology_changes=0, ports={'br3': PortInfo(name='br3', role=<PortRole.ROOT: 'root'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'br4': PortInfo(name='br4', role=<PortRole.ALTERNATE: 'alternate'>, state=<PortState.DISCARDING: 'discarding'>, path_cost=0, designated_bridge='', designated_port=''), 'SE_ETH2': PortInfo(name='SE_ETH2', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')})
2025-09-11 00:39:32,825 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:39:32,981 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:39:32,982 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 00:39:32,982 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:39:32,982 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 00:39:32,982 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:39:33,443 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:39:33,444 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:39:33,445 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:39:33,445 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:39:33,445 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:39:33,445 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:39:33,732 - RSTPAnalyzer_DUT - INFO - Root ID为unknown，判定为非根桥
2025-09-11 00:39:33,732 - test_protocol_conformance - INFO - DUT根桥判断结果: False
2025-09-11 00:39:33,732 - test_protocol_conformance - INFO - DUT桥信息 - bridge_id: '1000/6e:b3:08:fa:01:34', root_id: 'unknown'
2025-09-11 00:39:33,732 - test_protocol_conformance - INFO - 活动端口数量: 1
2025-09-11 00:39:33,733 - test_protocol_conformance - INFO - 端口角色分布: {<PortRole.ALTERNATE: 'alternate'>: ['br4']}
2025-09-11 00:39:33,774 - RSTPTest - INFO - 测试完成: test_alternate_port_verification (耗时: 23.38秒)
2025-09-11 00:39:33,774 - RSTPTest - INFO - ============================================================

2025-09-11 00:39:33,776 - RSTPTest - INFO - ============================================================
2025-09-11 00:39:33,776 - RSTPTest - INFO - 开始测试: test_port_state_transitions
2025-09-11 00:39:33,776 - RSTPTest - INFO - ============================================================
2025-09-11 00:39:33,777 - test_protocol_conformance - INFO - 开始端口状态转换测试
2025-09-11 00:39:33,777 - NetworkTopology - INFO - 创建RSTP线性拓扑...
2025-09-11 00:39:33,777 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 00:39:33,778 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 00:39:33,778 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 00:39:33,778 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 00:39:33,778 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 00:39:33,778 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 00:39:33,778 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 00:39:33,779 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 00:39:34,251 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 00:39:34,252 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 00:39:34,252 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 00:39:34,406 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 00:39:35,497 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"32768
2025-09-11 00:39:35,498 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 00:39:35,498 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 00:39:35,498 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br4']
2025-09-11 00:39:35,498 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 00:39:35,978 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 00:39:35,979 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 00:39:36,182 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 00:39:36,183 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 00:39:36,183 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 00:39:36,183 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 00:39:36,183 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 00:39:36,183 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 00:39:36,183 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 00:39:36,184 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 00:39:36,686 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 00:39:41,181 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:39:41,308 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:39:41,308 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 00:39:41,308 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 00:39:41,308 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:39:41,308 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 00:39:42,491 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 00:39:43,660 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 00:39:43,661 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 00:39:43,757 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 00:39:44,017 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 00:39:44,017 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 00:39:44,018 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 00:39:44,018 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 00:39:44,018 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 00:39:44,019 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 00:39:44,019 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 00:39:44,019 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 00:39:44,515 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 00:39:49,014 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:39:49,135 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:39:49,135 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 00:39:49,135 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 00:39:49,136 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0']
2025-09-11 00:39:49,136 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 00:39:50,305 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 00:39:50,305 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 00:39:50,404 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 00:39:50,669 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 00:39:50,669 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 00:39:50,670 - NetworkTopology - INFO - 线性拓扑创建完成
2025-09-11 00:39:50,670 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 4096 (方法: mstpd)
2025-09-11 00:39:50,670 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级4096 -> mstpd优先级1)
2025-09-11 00:39:50,800 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 00:39:50,800 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 8192 (方法: ovs)
2025-09-11 00:39:50,800 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 00:39:50,923 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 00:39:51,074 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-11 00:39:51,074 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 00:39:51,520 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:39:51,681 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:39:51,682 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 00:39:51,683 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:39:51,683 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 00:39:51,683 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:39:52,299 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:39:52,299 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:39:52,300 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:39:52,301 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:39:52,301 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:39:52,301 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:39:52,595 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.52秒
2025-09-11 00:39:53,048 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:39:53,196 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:39:53,197 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 00:39:53,198 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:39:53,198 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 00:39:53,198 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:39:53,654 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:39:53,654 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:39:53,655 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:39:53,656 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:39:53,656 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:39:53,656 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:39:53,939 - test_protocol_conformance - INFO - 使用端口br4进行状态转换测试
2025-09-11 00:39:53,940 - test_protocol_conformance - INFO - 禁用端口br4
2025-09-11 00:39:53,940 - FaultInjector_DUT - INFO - 断开链路: br4
2025-09-11 00:40:05,598 - FaultInjector_DUT - INFO - 链路已断开: br4
2025-09-11 00:40:11,011 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:40:11,164 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Disabled   Discarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:40:11,165 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-11 00:40:11,165 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 00:40:11,165 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-11 00:40:11,165 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-11 00:40:11,638 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:40:11,638 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:40:11,639 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:40:11,639 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:40:11,640 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:40:11,640 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:40:11,942 - test_protocol_conformance - INFO - ✓ 端口br4已成功禁用
2025-09-11 00:40:11,943 - test_protocol_conformance - INFO - 重新启用端口br4并监控状态转换
2025-09-11 00:40:11,943 - FaultInjector_DUT - INFO - 恢复链路: br4
2025-09-11 00:40:12,123 - FaultInjector_DUT - INFO - 链路已恢复: br4
2025-09-11 00:40:12,568 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:40:12,728 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Disabled   Discarding 2000     128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:40:12,729 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-11 00:40:12,729 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 00:40:12,730 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-11 00:40:12,730 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-11 00:40:13,210 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:40:13,211 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:40:13,212 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:40:13,212 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:40:13,212 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:40:13,212 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:40:13,507 - test_protocol_conformance - INFO - 端口br4状态转换: disabled
2025-09-11 00:40:15,920 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:40:16,073 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Disabled   Discarding 2000     128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:40:16,074 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-11 00:40:16,074 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 00:40:16,074 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-11 00:40:16,074 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-11 00:40:16,529 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:40:16,530 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:40:16,531 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:40:16,531 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:40:16,531 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:40:16,531 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:40:19,248 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:40:19,404 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Disabled   Discarding 2000     128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:40:19,405 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-11 00:40:19,405 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 00:40:19,405 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-11 00:40:19,406 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-11 00:40:19,897 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:40:19,898 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:40:19,899 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:40:19,899 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:40:19,899 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:40:19,899 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:40:22,635 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:40:22,792 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:40:22,793 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 00:40:22,793 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:40:22,793 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 00:40:22,794 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:40:23,269 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:40:23,270 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:40:23,271 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:40:23,271 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:40:23,271 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:40:23,271 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:40:23,563 - test_protocol_conformance - INFO - 端口br4状态转换: discarding
2025-09-11 00:40:25,988 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:40:26,147 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:40:26,149 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 00:40:26,149 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:40:26,149 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 00:40:26,149 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:40:26,633 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:40:26,633 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:40:26,635 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:40:26,635 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:40:26,635 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:40:26,635 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:40:29,372 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:40:29,532 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:40:29,533 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 00:40:29,533 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:40:29,533 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 00:40:29,533 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:40:30,009 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:40:30,009 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:40:30,010 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:40:30,011 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:40:30,011 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:40:30,011 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:40:32,748 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:40:32,903 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:40:32,904 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 00:40:32,904 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:40:32,904 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 00:40:32,905 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:40:33,381 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:40:33,381 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:40:33,383 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:40:33,383 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:40:33,383 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:40:33,384 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:40:36,107 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:40:36,264 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:40:36,265 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 00:40:36,265 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:40:36,265 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 00:40:36,266 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:40:36,750 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:40:36,750 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:40:36,752 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:40:36,752 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:40:36,752 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:40:36,752 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:40:39,487 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:40:39,648 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:40:39,649 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 00:40:39,649 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:40:39,650 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 00:40:39,650 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:40:40,113 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:40:40,113 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:40:40,114 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:40:40,115 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:40:40,115 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:40:40,115 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:40:42,419 - test_protocol_conformance - INFO - 状态转换序列: ['disabled', 'discarding']
2025-09-11 00:40:42,823 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:40:42,975 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:40:42,977 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 00:40:42,977 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:40:42,977 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 00:40:42,977 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:40:43,449 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:40:43,449 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:40:43,450 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:40:43,451 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:40:43,451 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:40:43,451 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:40:43,738 - test_protocol_conformance - INFO - ✓ 端口br4最终状态正确: discarding
2025-09-11 00:40:43,738 - test_protocol_conformance - INFO - 端口状态转换测试完成
2025-09-11 00:40:43,739 - RSTPTest - INFO - 测试完成: test_port_state_transitions (耗时: 69.96秒)
2025-09-11 00:40:43,739 - RSTPTest - INFO - ============================================================

2025-09-11 00:40:43,741 - RSTPTest - INFO - ============================================================
2025-09-11 00:40:43,741 - RSTPTest - INFO - 开始测试: test_bpdu_propagation_and_keepalive
2025-09-11 00:40:43,741 - RSTPTest - INFO - ============================================================
2025-09-11 00:40:43,742 - test_protocol_conformance - INFO - 开始BPDU传播和保活机制测试
2025-09-11 00:40:43,742 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 00:40:43,742 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 00:40:43,742 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 00:40:43,743 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 00:40:43,743 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 00:40:43,743 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 00:40:43,743 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 00:40:43,743 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 00:40:43,743 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 00:40:44,257 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 00:40:44,258 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 00:40:44,258 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 00:40:44,413 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 00:40:45,532 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 00:40:45,533 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 00:40:45,533 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 00:40:45,533 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 00:40:45,533 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 00:40:46,005 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 00:40:46,481 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 00:40:46,482 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 00:40:46,674 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 00:40:46,675 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 00:40:46,675 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 00:40:46,675 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 00:40:46,676 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 00:40:46,676 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 00:40:46,676 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 00:40:46,676 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 00:40:47,181 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 00:40:51,688 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:40:51,815 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:40:51,816 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 00:40:51,816 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 00:40:51,816 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:40:51,816 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 00:40:52,993 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 00:40:54,167 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 00:40:54,167 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 00:40:54,263 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 00:40:54,526 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 00:40:54,526 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 00:40:54,527 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 00:40:54,527 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 00:40:54,527 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 00:40:54,527 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 00:40:54,528 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 00:40:54,528 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 00:40:55,010 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 00:40:59,499 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:40:59,628 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:40:59,628 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 00:40:59,628 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 00:40:59,628 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:40:59,629 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 00:41:00,802 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 00:41:02,032 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 00:41:02,033 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 00:41:02,129 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 00:41:02,390 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 00:41:02,391 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 00:41:02,391 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 00:41:02,391 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 4096 (方法: mstpd)
2025-09-11 00:41:02,391 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级4096 -> mstpd优先级1)
2025-09-11 00:41:02,514 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 00:41:02,515 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 8192 (方法: ovs)
2025-09-11 00:41:02,515 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 00:41:02,625 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 00:41:02,793 - NetworkTopology_TestNode2 - INFO - TestNode2: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-11 00:41:02,793 - NetworkTopology_TestNode2 - INFO - TestNode2: 执行mstpd设置优先级命令 (标准优先级12288 -> mstpd优先级3)
2025-09-11 00:41:02,920 - NetworkTopology_TestNode2 - INFO - TestNode2: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 00:41:02,920 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-11 00:41:02,921 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 00:41:03,567 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:41:03,723 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:41:03,724 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 00:41:03,724 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:41:03,725 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 00:41:03,725 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:41:04,185 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:41:04,185 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:41:04,186 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:41:04,186 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:41:04,187 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:41:04,187 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:41:04,474 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.55秒
2025-09-11 00:41:04,935 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:41:05,088 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:41:05,089 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 00:41:05,089 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:41:05,089 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 00:41:05,089 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:41:05,577 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:41:05,577 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:41:05,578 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:41:05,578 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:41:05,579 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:41:05,579 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:41:05,886 - test_protocol_conformance - INFO - Hello Time: 2秒
2025-09-11 00:41:05,887 - test_protocol_conformance - INFO - 开始捕获BPDU报文
2025-09-11 00:41:05,887 - test_protocol_conformance - INFO - 在端口br4上开始BPDU捕获
2025-09-11 00:41:05,887 - test_protocol_conformance - WARNING - 端口br4BPDU捕获失败: RSTPAnalyzer.capture_bpdu() got an unexpected keyword argument 'duration'
2025-09-11 00:41:05,887 - test_protocol_conformance - INFO - 总共捕获到0个BPDU
2025-09-11 00:41:05,928 - RSTPTest - INFO - 测试完成: test_bpdu_propagation_and_keepalive (耗时: 22.19秒)
2025-09-11 00:41:05,928 - RSTPTest - INFO - ============================================================

2025-09-11 00:41:05,930 - RSTPTest - INFO - ============================================================
2025-09-11 00:41:05,931 - RSTPTest - INFO - 开始测试: test_disabled_port_exclusion
2025-09-11 00:41:05,931 - RSTPTest - INFO - ============================================================
2025-09-11 00:41:05,932 - test_protocol_conformance - INFO - 开始禁用端口排除测试
2025-09-11 00:41:05,932 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 00:41:05,932 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 00:41:05,932 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 00:41:05,932 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 00:41:05,932 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 00:41:05,933 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 00:41:05,933 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 00:41:05,933 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 00:41:05,933 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 00:41:06,417 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 00:41:06,418 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 00:41:06,418 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 00:41:06,573 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 00:41:07,644 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 00:41:07,645 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 00:41:07,645 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 00:41:07,645 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 00:41:07,645 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 00:41:08,122 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 00:41:08,596 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 00:41:08,597 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 00:41:08,789 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 00:41:08,789 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 00:41:08,789 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 00:41:08,789 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 00:41:08,790 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 00:41:08,790 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 00:41:08,790 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 00:41:08,790 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 00:41:09,285 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 00:41:13,783 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:41:13,909 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:41:13,910 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 00:41:13,910 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 00:41:13,910 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:41:13,910 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 00:41:15,085 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 00:41:16,257 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 00:41:16,258 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 00:41:16,353 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 00:41:16,621 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 00:41:16,622 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 00:41:16,622 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 00:41:16,622 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 00:41:16,623 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 00:41:16,623 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 00:41:16,623 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 00:41:16,623 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 00:41:17,116 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 00:41:21,607 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:41:21,727 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:41:21,728 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 00:41:21,728 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 00:41:21,728 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:41:21,728 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 00:41:22,905 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 00:41:24,125 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 00:41:24,125 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 00:41:24,221 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 00:41:24,487 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 00:41:24,488 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 00:41:24,488 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 00:41:24,488 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 4096 (方法: mstpd)
2025-09-11 00:41:24,488 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级4096 -> mstpd优先级1)
2025-09-11 00:41:24,615 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 00:41:24,615 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 8192 (方法: ovs)
2025-09-11 00:41:24,616 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 00:41:24,728 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 00:41:24,901 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-11 00:41:24,902 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 00:41:25,343 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:41:25,495 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:41:25,496 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 00:41:25,497 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:41:25,497 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 00:41:25,497 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:41:25,957 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:41:25,957 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:41:25,958 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:41:25,959 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:41:25,959 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:41:25,959 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:41:26,245 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.34秒
2025-09-11 00:41:26,699 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:41:26,846 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:41:26,847 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 00:41:26,848 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:41:26,848 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 00:41:26,848 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:41:27,304 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:41:27,304 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:41:27,305 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:41:27,305 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:41:27,306 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:41:27,306 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:41:27,593 - test_protocol_conformance - INFO - 所有端口信息: {'br3': PortInfo(name='br3', role=<PortRole.ROOT: 'root'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'br4': PortInfo(name='br4', role=<PortRole.ALTERNATE: 'alternate'>, state=<PortState.DISCARDING: 'discarding'>, path_cost=0, designated_bridge='', designated_port=''), 'SE_ETH2': PortInfo(name='SE_ETH2', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')}
2025-09-11 00:41:27,747 - test_protocol_conformance - INFO - RSTP show输出 (code=0): 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:41:27,748 - test_protocol_conformance - INFO - 初始活动端口: ['br4']
2025-09-11 00:41:27,748 - test_protocol_conformance - INFO - 选择端口br4进行禁用测试
2025-09-11 00:41:27,748 - test_protocol_conformance - INFO - 禁用端口br4
2025-09-11 00:41:27,749 - FaultInjector_DUT - INFO - 断开链路: br4
2025-09-11 00:41:39,475 - FaultInjector_DUT - INFO - 链路已断开: br4
2025-09-11 00:41:39,475 - test_protocol_conformance - INFO - 禁用命令结果: ('', '', 0)
2025-09-11 00:41:39,639 - test_protocol_conformance - INFO - 端口br4配置: stdout='1
1
{rstp-enable="true", rstp-port-admin-edge="true", rstp-port-auto-edge="true", stp-path-cost="20000"}
', stderr='', code=0
2025-09-11 00:41:55,071 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:41:55,230 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Disabled   Discarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:41:55,231 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-11 00:41:55,231 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 00:41:55,231 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-11 00:41:55,232 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-11 00:41:55,691 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:41:55,692 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:41:55,693 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:41:55,693 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:41:55,694 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:41:55,694 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:41:55,981 - test_protocol_conformance - INFO - 禁用后所有端口状态: [('br3', 'disabled'), ('br4', 'disabled'), ('SE_ETH2', 'disabled')]
2025-09-11 00:41:55,981 - test_protocol_conformance - INFO - 端口br4状态: disabled, 角色: designated
2025-09-11 00:41:55,981 - test_protocol_conformance - INFO - 禁用后活动端口: []
2025-09-11 00:41:55,981 - test_protocol_conformance - INFO - 活动端口数量: 0, 初始活动端口数量: 1
2025-09-11 00:41:55,982 - test_protocol_conformance - INFO - 禁用后端口角色分布: {}
2025-09-11 00:41:56,449 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:41:56,611 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Disabled   Discarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:41:56,612 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-11 00:41:56,612 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 00:41:56,612 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-11 00:41:56,612 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-11 00:41:57,097 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:41:57,097 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:41:57,098 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:41:57,098 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:41:57,099 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:41:57,099 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:41:57,405 - RSTPAnalyzer_DUT - WARNING - 所有端口都是DISABLED状态，可能是解析失败，判定为非根桥
2025-09-11 00:41:57,446 - RSTPTest - INFO - 测试完成: test_disabled_port_exclusion (耗时: 51.52秒)
2025-09-11 00:41:57,447 - RSTPTest - INFO - ============================================================

2025-09-11 00:41:57,449 - RSTPTest - INFO - ============================================================
2025-09-11 00:41:57,449 - RSTPTest - INFO - 开始测试: test_topology_change_notification
2025-09-11 00:41:57,449 - RSTPTest - INFO - ============================================================
2025-09-11 00:41:57,450 - test_protocol_conformance - INFO - 开始拓扑变更通知测试
2025-09-11 00:41:57,450 - test_protocol_conformance - INFO - === 步骤1: 创建多网桥环形拓扑 ===
2025-09-11 00:41:58,289 - test_protocol_conformance - INFO - 创建网桥 SE_ETH2 (优先级: 32768)
2025-09-11 00:41:58,729 - test_protocol_conformance - INFO - 创建网桥 rstp2 (优先级: 36864)
2025-09-11 00:41:59,176 - test_protocol_conformance - INFO - 创建网桥 rstp3 (优先级: 40960)
2025-09-11 00:41:59,908 - test_protocol_conformance - INFO - ✓ 连接 rstp1 <-> rstp2
2025-09-11 00:42:00,614 - test_protocol_conformance - INFO - ✓ 连接 rstp2 <-> rstp3
2025-09-11 00:42:01,342 - test_protocol_conformance - INFO - ✓ 连接 rstp3 <-> rstp1
2025-09-11 00:42:01,342 - test_protocol_conformance - INFO - 等待RSTP初始收敛...
2025-09-11 00:42:11,343 - test_protocol_conformance - INFO - === 步骤2: 验证初始RSTP状态 ===
2025-09-11 00:42:11,398 - test_protocol_conformance - INFO - 
SE_ETH2 初始RSTP状态:
2025-09-11 00:42:11,399 - test_protocol_conformance - INFO -   ---- SE_ETH2 ----
2025-09-11 00:42:11,399 - test_protocol_conformance - INFO -   Root ID:
2025-09-11 00:42:11,399 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-11 00:42:11,399 - test_protocol_conformance - INFO -     stp-system-id   3a:9d:4e:6f:ec:4f
2025-09-11 00:42:11,399 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-11 00:42:11,399 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-11 00:42:11,400 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-11 00:42:11,400 - test_protocol_conformance - INFO -     This bridge is the root
2025-09-11 00:42:11,400 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-11 00:42:11,400 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-11 00:42:11,400 - test_protocol_conformance - INFO -     stp-system-id   3a:9d:4e:6f:ec:4f
2025-09-11 00:42:11,400 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-11 00:42:11,400 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-11 00:42:11,401 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-11 00:42:11,401 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-11 00:42:11,401 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-11 00:42:11,401 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-11 00:42:11,494 - test_protocol_conformance - INFO - 
rstp2 初始RSTP状态:
2025-09-11 00:42:11,495 - test_protocol_conformance - INFO -   ---- rstp2 ----
2025-09-11 00:42:11,495 - test_protocol_conformance - INFO -   Root ID:
2025-09-11 00:42:11,495 - test_protocol_conformance - INFO -     stp-priority    36864
2025-09-11 00:42:11,495 - test_protocol_conformance - INFO -     stp-system-id   6a:02:1e:90:29:4d
2025-09-11 00:42:11,496 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-11 00:42:11,496 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-11 00:42:11,496 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-11 00:42:11,496 - test_protocol_conformance - INFO -     This bridge is the root
2025-09-11 00:42:11,496 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-11 00:42:11,496 - test_protocol_conformance - INFO -     stp-priority    36864
2025-09-11 00:42:11,497 - test_protocol_conformance - INFO -     stp-system-id   6a:02:1e:90:29:4d
2025-09-11 00:42:11,497 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-11 00:42:11,497 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-11 00:42:11,497 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-11 00:42:11,497 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-11 00:42:11,497 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-11 00:42:11,497 - test_protocol_conformance - INFO -     veth12b    Designated Forwarding 2000     128.1
2025-09-11 00:42:11,498 - test_protocol_conformance - INFO -     veth23a    Designated Forwarding 2000     128.2
2025-09-11 00:42:11,498 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-11 00:42:11,498 - test_protocol_conformance - INFO -   → 有转发端口
2025-09-11 00:42:11,595 - test_protocol_conformance - INFO - 
rstp3 初始RSTP状态:
2025-09-11 00:42:11,595 - test_protocol_conformance - INFO -   ---- rstp3 ----
2025-09-11 00:42:11,595 - test_protocol_conformance - INFO -   Root ID:
2025-09-11 00:42:11,595 - test_protocol_conformance - INFO -     stp-priority    36864
2025-09-11 00:42:11,596 - test_protocol_conformance - INFO -     stp-system-id   6a:02:1e:90:29:4d
2025-09-11 00:42:11,596 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-11 00:42:11,596 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-11 00:42:11,596 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-11 00:42:11,596 - test_protocol_conformance - INFO -     root-port       veth23b
2025-09-11 00:42:11,596 - test_protocol_conformance - INFO -     root-path-cost  2000
2025-09-11 00:42:11,597 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-11 00:42:11,597 - test_protocol_conformance - INFO -     stp-priority    40960
2025-09-11 00:42:11,597 - test_protocol_conformance - INFO -     stp-system-id   66:eb:7b:a4:91:43
2025-09-11 00:42:11,597 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-11 00:42:11,597 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-11 00:42:11,597 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-11 00:42:11,597 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-11 00:42:11,597 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-11 00:42:11,598 - test_protocol_conformance - INFO -     veth23b    Root       Forwarding 2000     128.1
2025-09-11 00:42:11,598 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-11 00:42:11,598 - test_protocol_conformance - INFO -   → 有转发端口
2025-09-11 00:42:11,598 - test_protocol_conformance - INFO - === 步骤3: 分析网络拓扑 ===
2025-09-11 00:42:11,598 - test_protocol_conformance - INFO - ✓ SE_ETH2 是根桥
2025-09-11 00:42:11,598 - test_protocol_conformance - INFO - ✓ rstp2 是根桥
2025-09-11 00:42:11,599 - test_protocol_conformance - INFO - === 步骤4: 触发拓扑变更 ===
2025-09-11 00:42:11,599 - test_protocol_conformance - INFO - 断开活动端口: veth31a
2025-09-11 00:42:16,966 - test_protocol_conformance - INFO - ✓ rstp3 状态已变化
2025-09-11 00:42:22,060 - test_protocol_conformance - INFO - === 步骤5: 验证拓扑变更 ===
2025-09-11 00:42:22,117 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: veth12a, 数量: 5)
2025-09-11 00:42:27,273 - RSTPAnalyzer_DUT - INFO - 捕获到 2 个BPDU包
2025-09-11 00:42:27,274 - test_protocol_conformance - INFO - 在 veth12a 捕获到 2 个BPDU
2025-09-11 00:42:27,274 - test_protocol_conformance - INFO - === 步骤6: 最终验证 ===
2025-09-11 00:42:27,274 - test_protocol_conformance - INFO - ✓ 测试通过：检测到拓扑变更
2025-09-11 00:42:27,374 - test_protocol_conformance - INFO - 
========== SE_ETH2 最终状态 ==========
2025-09-11 00:42:27,375 - test_protocol_conformance - INFO - ---- SE_ETH2 ----
2025-09-11 00:42:27,375 - test_protocol_conformance - INFO - Root ID:
2025-09-11 00:42:27,375 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-11 00:42:27,375 - test_protocol_conformance - INFO -   stp-system-id   3a:9d:4e:6f:ec:4f
2025-09-11 00:42:27,375 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-11 00:42:27,376 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-11 00:42:27,376 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-11 00:42:27,376 - test_protocol_conformance - INFO -   This bridge is the root
2025-09-11 00:42:27,376 - test_protocol_conformance - INFO - Bridge ID:
2025-09-11 00:42:27,376 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-11 00:42:27,377 - test_protocol_conformance - INFO -   stp-system-id   3a:9d:4e:6f:ec:4f
2025-09-11 00:42:27,377 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-11 00:42:27,377 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-11 00:42:27,377 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-11 00:42:27,377 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-11 00:42:27,378 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-11 00:42:27,470 - test_protocol_conformance - INFO - 
========== rstp2 最终状态 ==========
2025-09-11 00:42:27,471 - test_protocol_conformance - INFO - ---- rstp2 ----
2025-09-11 00:42:27,471 - test_protocol_conformance - INFO - Root ID:
2025-09-11 00:42:27,471 - test_protocol_conformance - INFO -   stp-priority    36864
2025-09-11 00:42:27,471 - test_protocol_conformance - INFO -   stp-system-id   6a:02:1e:90:29:4d
2025-09-11 00:42:27,472 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-11 00:42:27,472 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-11 00:42:27,472 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-11 00:42:27,472 - test_protocol_conformance - INFO -   This bridge is the root
2025-09-11 00:42:27,472 - test_protocol_conformance - INFO - Bridge ID:
2025-09-11 00:42:27,472 - test_protocol_conformance - INFO -   stp-priority    36864
2025-09-11 00:42:27,472 - test_protocol_conformance - INFO -   stp-system-id   6a:02:1e:90:29:4d
2025-09-11 00:42:27,473 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-11 00:42:27,473 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-11 00:42:27,473 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-11 00:42:27,473 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-11 00:42:27,473 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-11 00:42:27,473 - test_protocol_conformance - INFO -   veth12b    Designated Forwarding 2000     128.1
2025-09-11 00:42:27,474 - test_protocol_conformance - INFO -   veth23a    Designated Forwarding 2000     128.2
2025-09-11 00:42:27,570 - test_protocol_conformance - INFO - 
========== rstp3 最终状态 ==========
2025-09-11 00:42:27,571 - test_protocol_conformance - INFO - ---- rstp3 ----
2025-09-11 00:42:27,571 - test_protocol_conformance - INFO - Root ID:
2025-09-11 00:42:27,571 - test_protocol_conformance - INFO -   stp-priority    36864
2025-09-11 00:42:27,571 - test_protocol_conformance - INFO -   stp-system-id   6a:02:1e:90:29:4d
2025-09-11 00:42:27,571 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-11 00:42:27,571 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-11 00:42:27,571 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-11 00:42:27,572 - test_protocol_conformance - INFO -   root-port       veth23b
2025-09-11 00:42:27,572 - test_protocol_conformance - INFO -   root-path-cost  2000
2025-09-11 00:42:27,572 - test_protocol_conformance - INFO - Bridge ID:
2025-09-11 00:42:27,572 - test_protocol_conformance - INFO -   stp-priority    40960
2025-09-11 00:42:27,572 - test_protocol_conformance - INFO -   stp-system-id   66:eb:7b:a4:91:43
2025-09-11 00:42:27,572 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-11 00:42:27,572 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-11 00:42:27,573 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-11 00:42:27,573 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-11 00:42:27,573 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-11 00:42:27,573 - test_protocol_conformance - INFO -   veth23b    Root       Forwarding 2000     128.1
2025-09-11 00:42:27,573 - test_protocol_conformance - INFO -   veth31a    Designated Forwarding 2000     128.2
2025-09-11 00:42:27,573 - test_protocol_conformance - INFO - 
=== 诊断信息 ===
2025-09-11 00:42:27,675 - test_protocol_conformance - INFO - 系统日志中的STP/RSTP信息:
2025-09-11 00:42:27,675 - test_protocol_conformance - INFO - [560953.461810] rstp3: entered promiscuous mode
[560982.718164] rstp2: left promiscuous mode
[560982.926307] rstp3: left promiscuous mode
[566501.007324] rstp2: entered promiscuous mode
[566501.454112] rstp3: entered promiscuous mode

2025-09-11 00:42:27,776 - test_protocol_conformance - INFO - OVS日志中的拓扑变更信息:
2025-09-11 00:42:27,776 - test_protocol_conformance - INFO - 2025-09-10T16:42:20.050Z|09022|bridge|WARN|br0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-10T16:42:20.050Z|09023|bridge|WARN|rstp0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-10T16:42:20.064Z|09027|bridge|WARN|br0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-10T16:42:20.064Z|09028|bridge|WARN|rstp0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-10T16:42:25.217Z|09032|bridge|WARN|br0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-10T16:42:25.217Z|09033|bridge|WARN|rstp0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-10T16:42:30.216Z|09037|bridge|WARN|br0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-10T16:42:30.216Z|09038|bridge|WARN|rstp0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP

2025-09-11 00:42:27,777 - test_protocol_conformance - INFO - === 清理测试环境 ===
2025-09-11 00:42:28,462 - test_protocol_conformance - INFO - 拓扑变更通知测试完成
2025-09-11 00:42:28,463 - RSTPTest - INFO - 测试完成: test_topology_change_notification (耗时: 31.01秒)
2025-09-11 00:42:28,463 - RSTPTest - INFO - ============================================================

2025-09-11 00:42:28,463 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-11 00:42:28,464 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-11 00:42:28,464 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-11 00:42:28,602 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-11 00:42:28,602 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-11 00:42:28,721 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-11 00:42:28,721 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-11 00:42:28,869 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-11 00:42:28,870 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-11 00:42:28,870 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 00:42:28,870 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 00:42:28,870 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-11 00:42:28,870 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-11 00:42:28,926 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-11 00:42:28,927 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-11 00:42:29,094 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-11 00:42:29,094 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-11 00:42:29,095 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-11 00:42:29,095 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-11 00:42:29,095 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-11 00:42:29,149 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-11 00:42:29,149 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-11 00:42:29,315 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-11 00:42:29,316 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-11 00:42:29,316 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-11 00:42:29,316 - RSTPTest - INFO - ============================================================
2025-09-11 00:42:29,317 - RSTPTest - INFO - 开始测试: test_root_bridge_hijack_attack
2025-09-11 00:42:29,317 - RSTPTest - INFO - ============================================================
2025-09-11 00:42:29,317 - test_security - INFO - 开始根网桥劫持攻击测试
2025-09-11 00:42:29,318 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 00:42:29,318 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 00:42:29,318 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 00:42:29,318 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 00:42:29,318 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 00:42:29,318 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 00:42:29,318 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 00:42:29,319 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 00:42:29,319 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 00:42:29,815 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 00:42:29,815 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 00:42:29,815 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 00:42:29,971 - NetworkTopology - INFO - DUT: 创建新网桥SE_ETH2
2025-09-11 00:42:31,157 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 00:42:31,158 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 00:42:31,158 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 00:42:31,158 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 00:42:31,158 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 00:42:31,627 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 00:42:32,074 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 00:42:32,075 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 00:42:32,248 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 00:42:32,248 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 00:42:32,249 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 00:42:32,249 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 00:42:32,249 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 00:42:32,249 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 00:42:32,249 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 00:42:32,249 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 00:42:32,748 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 00:42:37,251 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:42:37,382 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:42:37,382 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 00:42:37,382 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 00:42:37,383 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:42:37,383 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 00:42:38,557 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 00:42:39,741 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 00:42:39,741 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 00:42:39,836 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 00:42:40,097 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 00:42:40,098 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 00:42:40,098 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 00:42:40,098 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 00:42:40,099 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 00:42:40,099 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 00:42:40,099 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 00:42:40,099 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 00:42:40,588 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 00:42:45,071 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:42:45,197 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:42:45,197 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 00:42:45,197 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 00:42:45,198 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:42:45,198 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 00:42:46,376 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 00:42:47,585 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 00:42:47,585 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 00:42:47,680 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 00:42:47,943 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 00:42:47,944 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 00:42:47,944 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 00:42:53,542 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:42:53,698 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Disabled   Discarding 2000     128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 00:42:53,699 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 00:42:53,699 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:42:53,699 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 00:42:53,699 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:42:54,160 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:42:54,160 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:42:54,161 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:42:54,161 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:42:54,161 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:42:54,161 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:42:54,448 - RSTPAnalyzer_DUT - INFO - Root ID为unknown，判定为非根桥
2025-09-11 00:42:54,474 - RSTPTest - INFO - 测试完成: test_root_bridge_hijack_attack (耗时: 25.16秒)
2025-09-11 00:42:54,475 - RSTPTest - INFO - ============================================================

2025-09-11 00:42:54,477 - RSTPTest - INFO - ============================================================
2025-09-11 00:42:54,477 - RSTPTest - INFO - 开始测试: test_bpdu_flood_attack
2025-09-11 00:42:54,477 - RSTPTest - INFO - ============================================================
2025-09-11 00:42:54,478 - test_security - INFO - 开始BPDU洪泛攻击测试
2025-09-11 00:42:54,478 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 00:42:54,478 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 00:42:54,478 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 00:42:54,479 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 00:42:54,479 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 00:42:54,479 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 00:42:54,479 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 00:42:54,479 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 00:42:54,479 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 00:42:54,976 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 00:42:54,976 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 00:42:54,976 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 00:42:55,132 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 00:42:56,226 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 00:42:56,227 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 00:42:56,227 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 00:42:56,227 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 00:42:56,227 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 00:42:56,703 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 00:42:57,181 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 00:42:57,181 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 00:42:57,372 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 00:42:57,372 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 00:42:57,372 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 00:42:57,372 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 00:42:57,372 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 00:42:57,373 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 00:42:57,373 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 00:42:57,373 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 00:42:57,858 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 00:43:02,355 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:43:02,481 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:43:02,481 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 00:43:02,481 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 00:43:02,482 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:43:02,482 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 00:43:03,651 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 00:43:04,821 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 00:43:04,821 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 00:43:04,916 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 00:43:05,181 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 00:43:05,182 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 00:43:05,182 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 00:43:05,182 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 00:43:05,182 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 00:43:05,183 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 00:43:05,183 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 00:43:05,183 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 00:43:05,680 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 00:43:10,178 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:43:10,304 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:43:10,304 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 00:43:10,304 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 00:43:10,304 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:43:10,304 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 00:43:11,479 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 00:43:12,687 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 00:43:12,688 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 00:43:12,783 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 00:43:13,054 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 00:43:13,055 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 00:43:13,055 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 00:43:18,273 - test_security - INFO - 初始CPU使用率: 0.0%
2025-09-11 00:43:28,646 - test_security - INFO - 洪泛时CPU使用率: 0.0%
2025-09-11 00:43:29,109 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:43:29,263 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:43:29,264 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 00:43:29,264 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:43:29,264 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 00:43:29,264 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:43:29,731 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:43:29,732 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:43:29,733 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:43:29,733 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:43:29,733 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:43:29,733 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:43:30,024 - test_security - INFO - 网络在BPDU洪泛下保持稳定
2025-09-11 00:43:30,024 - test_security - INFO - BPDU洪泛攻击测试完成
2025-09-11 00:43:30,025 - RSTPTest - INFO - 测试完成: test_bpdu_flood_attack (耗时: 35.55秒)
2025-09-11 00:43:30,025 - RSTPTest - INFO - ============================================================

2025-09-11 00:43:30,027 - RSTPTest - INFO - ============================================================
2025-09-11 00:43:30,027 - RSTPTest - INFO - 开始测试: test_topology_change_attack
2025-09-11 00:43:30,027 - RSTPTest - INFO - ============================================================
2025-09-11 00:43:30,028 - test_security - INFO - 开始拓扑变更攻击测试
2025-09-11 00:43:30,028 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 00:43:30,028 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 00:43:30,028 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 00:43:30,029 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 00:43:30,029 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 00:43:30,029 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 00:43:30,029 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 00:43:30,029 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 00:43:30,030 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 00:43:30,561 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 00:43:30,561 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 00:43:30,562 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 00:43:30,715 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 00:43:31,803 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 00:43:31,803 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 00:43:31,803 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 00:43:31,803 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 00:43:31,804 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 00:43:32,286 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 00:43:32,771 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 00:43:32,772 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 00:43:32,963 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 00:43:32,963 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 00:43:32,963 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 00:43:32,963 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 00:43:32,964 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 00:43:32,964 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 00:43:32,964 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 00:43:32,964 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 00:43:33,457 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 00:43:37,928 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:43:38,061 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:43:38,061 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 00:43:38,061 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 00:43:38,062 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:43:38,062 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 00:43:39,265 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 00:43:40,458 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 00:43:40,458 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 00:43:40,553 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 00:43:40,818 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 00:43:40,819 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 00:43:40,819 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 00:43:40,819 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 00:43:40,819 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 00:43:40,820 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 00:43:40,820 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 00:43:40,820 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 00:43:41,314 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 00:43:45,811 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:43:45,937 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:43:45,938 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 00:43:45,938 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 00:43:45,938 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:43:45,938 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 00:43:47,112 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 00:43:48,328 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 00:43:48,329 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 00:43:48,426 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 00:43:48,692 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 00:43:48,693 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 00:43:48,693 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 00:43:54,113 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:43:54,269 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:43:54,270 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 00:43:54,270 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:43:54,271 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 00:43:54,271 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:43:54,742 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:43:54,742 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:43:54,743 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:43:54,743 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:43:54,744 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:43:54,744 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:43:55,039 - test_security - INFO - 触发快速拓扑变更...
2025-09-11 00:44:13,476 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:44:13,629 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:44:13,630 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 00:44:13,630 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:44:13,630 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 00:44:13,631 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:44:14,115 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:44:14,116 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:44:14,117 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:44:14,117 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:44:14,117 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:44:14,117 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:44:14,440 - test_security - INFO - 检测到0次拓扑变更
2025-09-11 00:44:14,900 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:44:15,053 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:44:15,054 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 00:44:15,054 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:44:15,054 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 00:44:15,054 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:44:15,518 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:44:15,519 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:44:15,520 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:44:15,520 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:44:15,520 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:44:15,520 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:44:15,807 - test_security - INFO - 网络在频繁拓扑变更后保持稳定
2025-09-11 00:44:15,807 - test_security - INFO - 拓扑变更攻击测试完成
2025-09-11 00:44:15,808 - RSTPTest - INFO - 测试完成: test_topology_change_attack (耗时: 45.78秒)
2025-09-11 00:44:15,808 - RSTPTest - INFO - ============================================================

2025-09-11 00:44:15,809 - RSTPTest - INFO - ============================================================
2025-09-11 00:44:15,809 - RSTPTest - INFO - 开始测试: test_mac_spoofing
2025-09-11 00:44:15,810 - RSTPTest - INFO - ============================================================
2025-09-11 00:44:15,810 - test_security - INFO - 开始MAC地址欺骗测试
2025-09-11 00:44:15,810 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 00:44:15,810 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 00:44:15,811 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 00:44:15,811 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 00:44:15,811 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 00:44:15,811 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 00:44:15,811 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 00:44:15,811 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 00:44:15,811 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 00:44:16,335 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 00:44:16,335 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 00:44:16,335 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 00:44:16,490 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 00:44:17,578 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 00:44:17,578 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 00:44:17,578 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 00:44:17,578 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 00:44:17,579 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 00:44:18,060 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 00:44:18,538 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 00:44:18,539 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 00:44:18,730 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 00:44:18,730 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 00:44:18,731 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 00:44:18,731 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 00:44:18,731 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 00:44:18,731 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 00:44:18,731 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 00:44:18,731 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 00:44:19,256 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 00:44:23,742 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:44:23,865 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:44:23,865 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 00:44:23,866 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 00:44:23,866 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:44:23,866 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 00:44:25,066 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 00:44:26,247 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 00:44:26,247 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 00:44:26,344 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 00:44:26,608 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 00:44:26,608 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 00:44:26,608 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 00:44:26,609 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 00:44:26,609 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 00:44:26,609 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 00:44:26,609 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 00:44:26,609 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 00:44:27,097 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 00:44:31,597 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:44:31,724 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:44:31,725 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 00:44:31,725 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 00:44:31,725 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:44:31,725 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 00:44:32,913 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 00:44:34,113 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 00:44:34,114 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 00:44:34,209 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 00:44:34,463 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 00:44:34,463 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 00:44:34,463 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 00:44:39,519 - test_security - INFO - DUT MAC地址: 90:12:10:b5:7d:f7
2025-09-11 00:44:39,519 - test_security - INFO - 尝试MAC地址欺骗...
2025-09-11 00:44:45,440 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:44:45,593 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:44:45,594 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 00:44:45,594 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:44:45,595 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 00:44:45,595 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:44:46,054 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:44:46,054 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:44:46,055 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:44:46,055 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:44:46,055 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:44:46,056 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:44:46,342 - test_security - INFO - 网络对MAC欺骗具有抗性
2025-09-11 00:44:52,962 - test_security - INFO - MAC地址欺骗测试完成
2025-09-11 00:44:52,963 - RSTPTest - INFO - 测试完成: test_mac_spoofing (耗时: 37.15秒)
2025-09-11 00:44:52,964 - RSTPTest - INFO - ============================================================

2025-09-11 00:44:52,965 - RSTPTest - INFO - ============================================================
2025-09-11 00:44:52,965 - RSTPTest - INFO - 开始测试: test_port_security
2025-09-11 00:44:52,966 - RSTPTest - INFO - ============================================================
2025-09-11 00:44:52,966 - test_security - INFO - 开始端口安全测试
2025-09-11 00:44:53,017 - test_security - WARNING - 未检测到任何端口安全功能
2025-09-11 00:44:53,018 - RSTPTest - INFO - 测试完成: test_port_security (耗时: 0.05秒)
2025-09-11 00:44:53,018 - RSTPTest - INFO - ============================================================

2025-09-11 00:44:53,019 - RSTPTest - INFO - ============================================================
2025-09-11 00:44:53,019 - RSTPTest - INFO - 开始测试: test_bpdu_filter_functionality
2025-09-11 00:44:53,020 - RSTPTest - INFO - ============================================================
2025-09-11 00:44:53,020 - test_security - INFO - 开始BPDU过滤器功能测试
2025-09-11 00:44:53,065 - NetworkTopology - INFO - 创建RSTP线性拓扑...
2025-09-11 00:44:53,065 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 00:44:53,065 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 00:44:53,065 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 00:44:53,065 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 00:44:53,066 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 00:44:53,066 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 00:44:53,066 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 00:44:53,066 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 00:44:53,594 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 00:44:53,594 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 00:44:53,594 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 00:44:53,750 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 00:44:54,825 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"32768
2025-09-11 00:44:54,825 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 00:44:54,826 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 00:44:54,826 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br4']
2025-09-11 00:44:54,826 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 00:44:55,302 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 00:44:55,302 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 00:44:55,493 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 00:44:55,494 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 00:44:55,494 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 00:44:55,494 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 00:44:55,494 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 00:44:55,494 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 00:44:55,495 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 00:44:55,495 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 00:44:55,985 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 00:45:00,459 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:45:00,583 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:45:00,584 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 00:45:00,584 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 00:45:00,584 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:45:00,584 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 00:45:01,759 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 00:45:02,954 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 00:45:02,954 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 00:45:03,050 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 00:45:03,312 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 00:45:03,313 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 00:45:03,313 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 00:45:03,313 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 00:45:03,313 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 00:45:03,313 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 00:45:03,314 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 00:45:03,314 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 00:45:03,815 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 00:45:08,301 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:45:08,429 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:45:08,429 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 00:45:08,429 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 00:45:08,430 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0']
2025-09-11 00:45:08,430 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 00:45:09,620 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 00:45:09,621 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 00:45:09,716 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 00:45:09,983 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 00:45:09,983 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 00:45:09,983 - NetworkTopology - INFO - 线性拓扑创建完成
2025-09-11 00:45:15,118 - test_security - WARNING - BPDU包统计命令执行失败: 
2025-09-11 00:45:15,119 - test_security - INFO - 启用过滤器前端口 eth2 BPDU数量: 0
2025-09-11 00:45:15,262 - test_security - INFO - 在端口 eth2 启用BPDU过滤器
2025-09-11 00:45:25,514 - test_security - WARNING - BPDU包统计命令执行失败: 
2025-09-11 00:45:25,515 - test_security - INFO - 启用过滤器后端口 eth2 BPDU数量: 0
2025-09-11 00:45:25,515 - test_security - INFO - BPDU过滤器功能正常：BPDU发送已停止或减少
2025-09-11 00:45:25,515 - test_security - INFO - 测试向过滤端口发送外部BPDU
2025-09-11 00:45:36,831 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:45:36,984 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:45:36,985 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 00:45:36,985 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:45:36,985 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 00:45:36,985 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:45:37,449 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:45:37,449 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:45:37,450 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:45:37,451 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:45:37,451 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:45:37,451 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:45:37,738 - test_security - INFO - BPDU过滤器功能正常：外部BPDU被忽略，网络保持稳定
2025-09-11 00:45:37,738 - test_security - INFO - 测试BPDU过滤器错误配置场景
2025-09-11 00:45:37,893 - test_security - WARNING - OVS设置BPDU过滤器失败，尝试使用系统文件方法
2025-09-11 00:45:37,994 - test_security - ERROR - 启用BPDU过滤器失败: BPDU过滤器配置失败: 
2025-09-11 00:45:37,994 - test_security - ERROR - BPDU过滤器错误配置测试失败: BPDU过滤器配置失败: 
2025-09-11 00:45:38,282 - test_security - WARNING - 清理命令执行失败: echo 0 > /sys/class/net/SE_ETH2/bridge/ports/eth2/bpdu_filter, 错误: 
2025-09-11 00:45:38,282 - test_security - INFO - BPDU过滤器功能测试完成
2025-09-11 00:45:38,283 - RSTPTest - INFO - 测试完成: test_bpdu_filter_functionality (耗时: 45.26秒)
2025-09-11 00:45:38,283 - RSTPTest - INFO - ============================================================

2025-09-11 00:45:38,284 - RSTPTest - INFO - ============================================================
2025-09-11 00:45:38,284 - RSTPTest - INFO - 开始测试: test_malformed_bpdu_handling
2025-09-11 00:45:38,285 - RSTPTest - INFO - ============================================================
2025-09-11 00:45:38,285 - test_security - INFO - 开始畸形BPDU处理测试
2025-09-11 00:45:38,328 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 00:45:38,328 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 00:45:38,329 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 00:45:38,329 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 00:45:38,329 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 00:45:38,329 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 00:45:38,329 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 00:45:38,330 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 00:45:38,330 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 00:45:38,858 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 00:45:38,858 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 00:45:38,858 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 00:45:39,014 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 00:45:40,085 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 00:45:40,085 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 00:45:40,085 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 00:45:40,086 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 00:45:40,086 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 00:45:40,566 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 00:45:41,041 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 00:45:41,041 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 00:45:41,232 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 00:45:41,233 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 00:45:41,233 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 00:45:41,233 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 00:45:41,233 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 00:45:41,233 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 00:45:41,234 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 00:45:41,234 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 00:45:41,722 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 00:45:46,216 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:45:46,344 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:45:46,345 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 00:45:46,345 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 00:45:46,345 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:45:46,345 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 00:45:47,528 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 00:45:48,707 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 00:45:48,707 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 00:45:48,802 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 00:45:49,066 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 00:45:49,066 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 00:45:49,066 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 00:45:49,066 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 00:45:49,066 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 00:45:49,067 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 00:45:49,067 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 00:45:49,067 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 00:45:49,553 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 00:45:54,021 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:45:54,146 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:45:54,146 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 00:45:54,146 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 00:45:54,147 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:45:54,147 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 00:45:55,314 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 00:45:56,529 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 00:45:56,529 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 00:45:56,626 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 00:45:56,882 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 00:45:56,883 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 00:45:56,883 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 00:46:02,320 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:46:02,475 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:46:02,476 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 00:46:02,476 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:46:02,476 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 00:46:02,477 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:46:02,944 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:46:02,945 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:46:02,946 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:46:02,946 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:46:02,946 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:46:02,946 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:46:03,700 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:46:03,855 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:46:03,857 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 00:46:03,857 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:46:03,857 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 00:46:03,857 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:46:04,320 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:46:04,320 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:46:04,321 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:46:04,322 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:46:04,322 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:46:04,322 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:46:04,609 - test_security - INFO - 初始网络状态: 稳定
2025-09-11 00:46:04,609 - test_security - INFO - 执行测试: _test_oversized_bpdu
2025-09-11 00:46:08,955 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:46:09,111 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:46:09,112 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 00:46:09,112 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:46:09,113 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 00:46:09,113 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:46:09,589 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:46:09,589 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:46:09,591 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:46:09,591 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:46:09,591 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:46:09,591 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:46:09,877 - test_security - INFO - _test_oversized_bpdu 网络保持稳定
2025-09-11 00:46:09,877 - test_security - INFO - 执行测试: _test_undersized_bpdu
2025-09-11 00:46:09,930 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

# 创建过小的BPDU（缺少必要字段）
target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 只包含最小字段的BPDU
truncated_bpdu = Raw(load=b"     ")  # 截断的BPDU

packet = eth/llc/truncated_bpdu
sendp(packet, iface=interface, count=5, inter=1, verbose=0)
print("Undersized BPDU sent")
' > /tmp/undersized_bpdu.py
错误: 
2025-09-11 00:46:09,931 - test_security - WARNING - _test_undersized_bpdu 执行异常但继续测试: 
2025-09-11 00:46:09,931 - test_security - INFO - 执行测试: _test_invalid_protocol_id
2025-09-11 00:46:09,931 - test_security - WARNING - TestNode1: SSH连接断开，尝试重连...
2025-09-11 00:46:09,931 - SSH_TestNode1 - INFO - TestNode1: 尝试重新建立SSH连接...
2025-09-11 00:46:09,932 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-11 00:46:10,065 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-11 00:46:11,739 - test_security - INFO - TestNode1: 无效协议ID BPDU测试完成
2025-09-11 00:46:15,162 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:46:15,315 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:46:15,316 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 00:46:15,316 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:46:15,316 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 00:46:15,316 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:46:15,776 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:46:15,776 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:46:15,777 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:46:15,777 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:46:15,778 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:46:15,778 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:46:16,065 - test_security - INFO - _test_invalid_protocol_id 网络保持稳定
2025-09-11 00:46:16,065 - test_security - INFO - 执行测试: _test_invalid_version
2025-09-11 00:46:17,669 - test_security - INFO - TestNode1: 无效版本号BPDU测试完成
2025-09-11 00:46:21,091 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:46:21,247 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:46:21,248 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 00:46:21,248 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:46:21,249 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 00:46:21,249 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:46:21,712 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:46:21,712 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:46:21,713 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:46:21,713 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:46:21,713 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:46:21,714 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:46:22,001 - test_security - INFO - _test_invalid_version 网络保持稳定
2025-09-11 00:46:22,001 - test_security - INFO - 执行测试: _test_invalid_message_type
2025-09-11 00:46:23,600 - test_security - INFO - TestNode1: 无效消息类型BPDU测试完成
2025-09-11 00:46:27,027 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:46:27,182 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:46:27,183 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 00:46:27,184 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:46:27,184 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 00:46:27,184 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:46:27,648 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:46:27,648 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:46:27,649 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:46:27,649 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:46:27,649 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:46:27,649 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:46:27,936 - test_security - INFO - _test_invalid_message_type 网络保持稳定
2025-09-11 00:46:27,937 - test_security - INFO - 执行测试: _test_corrupted_fields
2025-09-11 00:46:29,828 - test_security - INFO - TestNode1: 损坏字段BPDU测试完成
2025-09-11 00:46:33,243 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:46:33,406 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:46:33,407 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 00:46:33,407 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:46:33,408 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 00:46:33,408 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:46:33,892 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:46:33,892 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:46:33,893 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:46:33,893 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:46:33,893 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:46:33,893 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:46:34,180 - test_security - INFO - _test_corrupted_fields 网络保持稳定
2025-09-11 00:46:37,954 - test_security - INFO - 畸形BPDU处理测试完成
2025-09-11 00:46:37,955 - RSTPTest - INFO - 测试完成: test_malformed_bpdu_handling (耗时: 59.67秒)
2025-09-11 00:46:37,955 - RSTPTest - INFO - ============================================================

2025-09-11 00:46:37,957 - RSTPTest - INFO - ============================================================
2025-09-11 00:46:37,957 - RSTPTest - INFO - 开始测试: test_non_standard_bpdu_handling
2025-09-11 00:46:37,958 - RSTPTest - INFO - ============================================================
2025-09-11 00:46:37,958 - test_security - INFO - 开始非标准BPDU处理测试
2025-09-11 00:46:37,963 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 00:46:37,963 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 00:46:37,963 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 00:46:37,964 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 00:46:37,964 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 00:46:37,964 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 00:46:37,964 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 00:46:37,964 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 00:46:37,965 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 00:46:38,496 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 00:46:38,496 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 00:46:38,496 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 00:46:38,660 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 00:46:39,757 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 00:46:39,757 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 00:46:39,757 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 00:46:39,757 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 00:46:39,758 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 00:46:40,237 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 00:46:40,721 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 00:46:40,721 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 00:46:40,920 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 00:46:40,921 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 00:46:40,921 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 00:46:40,921 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 00:46:40,921 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 00:46:40,921 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 00:46:40,921 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 00:46:40,922 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 00:46:41,426 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 00:46:45,903 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:46:46,033 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:46:46,034 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 00:46:46,034 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 00:46:46,034 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:46:46,035 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 00:46:47,233 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 00:46:48,418 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 00:46:48,418 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 00:46:48,515 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 00:46:48,779 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 00:46:48,779 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 00:46:48,779 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 00:46:48,779 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 00:46:48,780 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 00:46:48,780 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 00:46:48,780 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 00:46:48,780 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 00:46:49,268 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 00:46:53,755 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:46:53,882 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:46:53,882 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 00:46:53,883 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 00:46:53,883 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:46:53,883 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 00:46:55,061 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 00:46:56,265 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 00:46:56,266 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 00:46:56,361 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 00:46:56,623 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 00:46:56,623 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 00:46:56,623 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 00:47:01,624 - test_security - INFO - 执行测试: _test_pvst_plus_bpdu
2025-09-11 00:47:01,675 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

# PVST+ 使用不同的目标MAC地址
pvst_mac = "01:00:0c:cc:cc:cd"
interface = "eth0"

eth = Ether(dst=pvst_mac, src="00:11:22:33:44:55")
# PVST+ 使用SNAP封装
snap = SNAP(OUI=0x00000c, code=0x010b)
# 模拟PVST+ BPDU结构
pvst_bpdu = Raw(load=b"    " + b" " * 30 + b" ")  # 包含VLAN ID

packet = eth/snap/pvst_bpdu
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("PVST+ BPDU sent")
' > /tmp/pvst_bpdu.py
错误: 
2025-09-11 00:47:01,677 - test_security - ERROR - _test_pvst_plus_bpdu 执行失败: 
2025-09-11 00:47:01,677 - test_security - INFO - 执行测试: _test_cisco_proprietary_bpdu
2025-09-11 00:47:01,677 - SSH_TestNode1 - WARNING - TestNode1: SSH连接已断开，尝试重连...
2025-09-11 00:47:01,798 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-11 00:47:01,927 - SSH_TestNode1 - INFO - TestNode1: SSH重连成功
2025-09-11 00:47:01,973 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 模拟包含Cisco专有扩展的BPDU
cisco_bpdu = Raw(load=b"    " + b" " * 30 + 
                     b" )   ")  # Cisco OUI + 专有数据

packet = eth/llc/cisco_bpdu
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("Cisco proprietary BPDU sent")
' > /tmp/cisco_bpdu.py
错误: 
2025-09-11 00:47:01,974 - test_security - ERROR - _test_cisco_proprietary_bpdu 执行失败: 
2025-09-11 00:47:01,974 - test_security - INFO - 执行测试: _test_vlan_tagged_bpdu
2025-09-11 00:47:01,975 - SSH_TestNode1 - WARNING - TestNode1: SSH连接已断开，尝试重连...
2025-09-11 00:47:02,095 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-11 00:47:02,229 - SSH_TestNode1 - INFO - TestNode1: SSH重连成功
2025-09-11 00:47:09,543 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:47:09,698 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:47:09,699 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 00:47:09,699 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:47:09,699 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 00:47:09,700 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:47:10,168 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:47:10,168 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:47:10,169 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:47:10,170 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:47:10,170 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:47:10,170 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:47:10,456 - test_security - INFO - _test_vlan_tagged_bpdu 网络保持稳定
2025-09-11 00:47:10,456 - test_security - INFO - 执行测试: _test_unknown_tlv_bpdu
2025-09-11 00:47:10,508 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 标准BPDU + 未知TLV
standard_bpdu = b"    " + b" " * 30
unknown_tlv = b"ÿÿ "  # 未知类型和长度的TLV
bpdu_with_tlv = Raw(load=standard_bpdu + unknown_tlv)

packet = eth/llc/bpdu_with_tlv
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("BPDU with unknown TLV sent")
' > /tmp/unknown_tlv.py
错误: 
2025-09-11 00:47:10,509 - test_security - ERROR - _test_unknown_tlv_bpdu 执行失败: 
2025-09-11 00:47:20,636 - test_security - INFO - 非标准BPDU处理测试完成
2025-09-11 00:47:20,637 - RSTPTest - INFO - 测试完成: test_non_standard_bpdu_handling (耗时: 42.68秒)
2025-09-11 00:47:20,637 - RSTPTest - INFO - ============================================================

2025-09-11 00:47:20,638 - RSTPTest - INFO - ============================================================
2025-09-11 00:47:20,638 - RSTPTest - INFO - 开始测试: test_bpdu_guard_functionality
2025-09-11 00:47:20,639 - RSTPTest - INFO - ============================================================
2025-09-11 00:47:20,639 - test_security - INFO - 开始BPDU防护功能测试
2025-09-11 00:47:20,644 - NetworkTopology - INFO - 创建RSTP线性拓扑...
2025-09-11 00:47:20,644 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 00:47:20,644 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 00:47:20,644 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 00:47:20,644 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 00:47:20,645 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 00:47:20,645 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 00:47:20,645 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 00:47:20,645 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 00:47:21,175 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 00:47:21,176 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 00:47:21,176 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 00:47:21,331 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 00:47:22,403 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"32768
2025-09-11 00:47:22,403 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 00:47:22,404 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 00:47:22,404 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br4']
2025-09-11 00:47:22,404 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 00:47:22,879 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 00:47:22,880 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 00:47:23,071 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 00:47:23,072 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 00:47:23,072 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 00:47:23,072 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 00:47:23,072 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 00:47:23,072 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 00:47:23,072 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 00:47:23,073 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 00:47:23,073 - SSH_TestNode1 - WARNING - TestNode1: SSH连接已断开，尝试重连...
2025-09-11 00:47:23,205 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-11 00:47:23,331 - SSH_TestNode1 - INFO - TestNode1: SSH重连成功
2025-09-11 00:47:25,826 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 00:47:30,313 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:47:30,439 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:47:30,439 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 00:47:30,439 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 00:47:30,439 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:47:30,440 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 00:47:31,616 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 00:47:32,796 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 00:47:32,797 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 00:47:32,892 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 00:47:33,155 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 00:47:33,155 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 00:47:33,155 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 00:47:33,156 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 00:47:33,156 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 00:47:33,156 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 00:47:33,156 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 00:47:33,156 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 00:47:33,653 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 00:47:38,138 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:47:38,263 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:47:38,263 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 00:47:38,263 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 00:47:38,263 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0']
2025-09-11 00:47:38,264 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 00:47:39,440 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 00:47:39,440 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 00:47:39,534 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 00:47:39,799 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 00:47:39,800 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 00:47:39,800 - NetworkTopology - INFO - 线性拓扑创建完成
2025-09-11 00:47:45,275 - test_security - INFO - 边缘端口 eth2 初始状态: {}
2025-09-11 00:47:45,275 - test_security - INFO - 向边缘端口 eth2 发送BPDU
2025-09-11 00:47:52,354 - test_security - INFO - BPDU防护触发后端口 eth2 状态: {}
2025-09-11 00:47:52,355 - test_security - ERROR - BPDU防护功能异常：端口未被禁用
2025-09-11 00:47:52,584 - RSTPTest - INFO - 测试完成: test_bpdu_guard_functionality (耗时: 31.94秒)
2025-09-11 00:47:52,584 - RSTPTest - INFO - ============================================================

2025-09-11 00:47:52,587 - RSTPTest - INFO - ============================================================
2025-09-11 00:47:52,587 - RSTPTest - INFO - 开始测试: test_root_guard_functionality
2025-09-11 00:47:52,587 - RSTPTest - INFO - ============================================================
2025-09-11 00:47:52,588 - test_security - INFO - 开始根防护功能测试
2025-09-11 00:47:52,606 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 00:47:52,606 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 00:47:52,606 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 00:47:52,607 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 00:47:52,607 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 00:47:52,607 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 00:47:52,607 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 00:47:52,607 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 00:47:52,607 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 00:47:53,139 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 00:47:53,139 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 00:47:53,139 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 00:47:53,294 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 00:47:54,379 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 00:47:54,379 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 00:47:54,380 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 00:47:54,380 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 00:47:54,380 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 00:47:54,855 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 00:47:55,331 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 00:47:55,331 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 00:47:55,523 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 00:47:55,523 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 00:47:55,523 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 00:47:55,523 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 00:47:55,523 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 00:47:55,524 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 00:47:55,524 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 00:47:55,524 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 00:47:56,027 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 00:48:00,513 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:48:00,640 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:48:00,640 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 00:48:00,640 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 00:48:00,640 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:48:00,640 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 00:48:01,827 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 00:48:03,015 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 00:48:03,015 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 00:48:03,110 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 00:48:03,375 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 00:48:03,376 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 00:48:03,376 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 00:48:03,376 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 00:48:03,376 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 00:48:03,376 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 00:48:03,377 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 00:48:03,377 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 00:48:03,871 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 00:48:08,351 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:48:08,475 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:48:08,476 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 00:48:08,476 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 00:48:08,476 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:48:08,476 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 00:48:09,642 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 00:48:10,867 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 00:48:10,867 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 00:48:10,963 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 00:48:11,228 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 00:48:11,228 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 00:48:11,229 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 00:48:16,653 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:48:16,808 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:48:16,809 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 00:48:16,810 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:48:16,810 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 00:48:16,810 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:48:17,274 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:48:17,275 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:48:17,276 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:48:17,276 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:48:17,276 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:48:17,277 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:48:17,563 - test_security - INFO - 当前根桥ID: unknown
2025-09-11 00:48:17,886 - test_security - WARNING - 启用根防护失败: 
2025-09-11 00:48:17,887 - test_security - INFO - 在端口 eth1 启用根防护
2025-09-11 00:48:18,290 - test_security - INFO - 端口 eth1 初始状态: unknown
2025-09-11 00:48:18,291 - test_security - INFO - 发送更优BPDU尝试劫持根桥
2025-09-11 00:48:34,558 - test_security - INFO - 根防护触发后端口 eth1 状态: unknown
2025-09-11 00:48:35,021 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 00:48:35,177 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 00:48:35,178 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 00:48:35,179 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 00:48:35,179 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 00:48:35,179 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 00:48:35,646 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 00:48:35,646 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 00:48:35,647 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 00:48:35,648 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 00:48:35,648 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 00:48:35,648 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 00:48:35,934 - test_security - INFO - 根防护功能正常：根桥身份未被劫持
2025-09-11 00:48:35,935 - test_security - ERROR - 根防护功能异常：端口未进入阻塞状态
2025-09-11 00:48:35,935 - test_security - INFO - 测试根防护端口 eth1 恢复功能
2025-09-11 00:48:35,935 - test_security - INFO - 停止发送更优BPDU
2025-09-11 00:48:46,294 - test_security - INFO - 端口恢复后状态: unknown
2025-09-11 00:48:46,294 - test_security - WARNING - 根防护端口未能自动恢复
2025-09-11 00:48:46,540 - RSTPTest - INFO - 测试完成: test_root_guard_functionality (耗时: 53.95秒)
2025-09-11 00:48:46,540 - RSTPTest - INFO - ============================================================

2025-09-11 00:48:46,542 - RSTPTest - INFO - ============================================================
2025-09-11 00:48:46,542 - RSTPTest - INFO - 开始测试: test_loop_guard_functionality
2025-09-11 00:48:46,542 - RSTPTest - INFO - ============================================================
2025-09-11 00:48:46,543 - test_security - INFO - 开始环路防护功能测试
2025-09-11 00:48:46,543 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 00:48:46,543 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 00:48:46,543 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 00:48:46,543 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 00:48:46,544 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 00:48:46,544 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 00:48:46,544 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 00:48:46,544 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 00:48:46,544 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 00:48:47,054 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 00:48:47,054 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 00:48:47,054 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 00:48:47,222 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 00:48:48,306 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 00:48:48,306 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 00:48:48,306 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 00:48:48,306 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 00:48:48,306 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 00:48:48,798 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 00:48:49,282 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 00:48:49,283 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 00:48:49,474 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 00:48:49,474 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 00:48:49,474 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 00:48:49,474 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 00:48:49,475 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 00:48:49,475 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 00:48:49,475 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 00:48:49,475 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 00:48:49,980 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 00:48:54,461 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:48:54,594 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:48:54,595 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 00:48:54,595 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 00:48:54,595 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:48:54,596 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 00:48:55,787 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 00:48:56,980 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 00:48:56,981 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 00:48:57,076 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 00:48:57,338 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 00:48:57,339 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 00:48:57,339 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 00:48:57,339 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 00:48:57,339 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 00:48:57,339 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 00:48:57,339 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 00:48:57,340 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 00:48:57,832 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 00:49:02,370 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 00:49:02,498 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 00:49:02,498 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 00:49:02,498 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 00:49:02,499 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 00:49:02,499 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 00:49:03,675 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 00:49:04,879 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 00:49:04,879 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 00:49:04,978 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 00:49:05,241 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 00:49:05,242 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 00:49:05,242 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 00:49:10,529 - test_security - WARNING - 启用环路防护失败: 
2025-09-11 00:49:10,530 - test_security - INFO - 在端口 eth1 启用环路防护
2025-09-11 00:49:10,938 - test_security - INFO - 端口 eth1 初始状态: unknown
2025-09-11 00:49:10,938 - test_security - INFO - 模拟单向链路故障
2025-09-11 00:49:10,938 - test_security - INFO - 停止从测试节点发送BPDU
2025-09-11 00:49:31,425 - test_security - INFO - 环路防护触发后端口 eth1 状态: unknown
2025-09-11 00:49:31,425 - test_security - WARNING - 环路防护功能异常：端口未进入阻塞状态
2025-09-11 00:49:31,425 - test_security - INFO - 测试环路防护端口 eth1 恢复功能
2025-09-11 00:49:31,426 - test_security - INFO - 恢复BPDU发送
2025-09-11 00:49:41,970 - test_security - INFO - 端口恢复后状态: unknown
2025-09-11 00:49:41,970 - test_security - WARNING - 环路防护端口未能自动恢复
2025-09-11 00:49:42,185 - test_security - INFO - 环路防护功能测试完成
2025-09-11 00:49:42,186 - RSTPTest - INFO - 测试完成: test_loop_guard_functionality (耗时: 55.64秒)
2025-09-11 00:49:42,186 - RSTPTest - INFO - ============================================================

2025-09-11 00:49:42,187 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-11 00:49:42,187 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-11 00:49:42,188 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-11 00:49:42,689 - __main__ - INFO - ============================================================
2025-09-11 00:49:42,690 - __main__ - INFO - 测试完成，返回码: 1
2025-09-11 00:49:42,690 - __main__ - INFO - ============================================================
