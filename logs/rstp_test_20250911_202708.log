2025-09-11 20:27:08,763 - root - INFO - 日志系统初始化完成，日志文件: logs\rstp_test_20250911_202708.log
2025-09-11 20:27:09,033 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-11 20:27:09,033 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-11 20:27:09,157 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-11 20:27:09,157 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-11 20:27:09,298 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-11 20:27:09,298 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-11 20:27:09,299 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 20:27:09,299 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 20:27:09,299 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-11 20:27:09,299 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-11 20:27:09,361 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-11 20:27:09,361 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-11 20:27:19,486 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-11 20:27:19,486 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-11 20:27:19,486 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-11 20:27:19,486 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-11 20:27:19,487 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-11 20:27:19,541 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-11 20:27:19,542 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-11 20:27:29,665 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-11 20:27:29,665 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-11 20:27:29,665 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-11 20:27:29,665 - RSTPTest - INFO - ============================================================
2025-09-11 20:27:29,666 - RSTPTest - INFO - 开始测试: test_port_state_transitions
2025-09-11 20:27:29,666 - RSTPTest - INFO - ============================================================
2025-09-11 20:27:29,667 - test_additional_rstp - INFO - 开始端口状态转换测试
2025-09-11 20:27:29,667 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 20:27:29,667 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 20:27:29,667 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 20:27:29,667 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 20:27:29,667 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 20:27:29,667 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 20:27:29,667 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 20:27:29,668 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 20:27:29,668 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 20:27:30,143 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 20:27:30,143 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 20:27:30,143 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 20:27:30,299 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 20:27:31,362 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 20:27:31,362 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 20:27:31,363 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 20:27:31,363 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 20:27:31,363 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 20:27:31,839 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 20:27:32,315 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 20:27:32,315 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 20:27:32,506 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 20:27:32,507 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 20:27:32,507 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 20:27:32,507 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 20:27:32,507 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 20:27:32,508 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 20:27:32,508 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 20:27:32,508 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 20:28:02,856 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 20:29:36,904 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 20:29:46,983 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 20:29:46,984 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 20:29:46,984 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 20:29:46,984 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 20:29:46,984 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 20:30:51,399 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 20:31:47,079 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 20:31:47,079 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 20:31:47,177 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 20:31:55,473 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 20:31:55,474 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 20:31:55,474 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 20:31:55,474 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 20:31:55,475 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 20:31:55,475 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 20:31:55,475 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 20:31:55,475 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 20:32:25,805 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 20:33:59,851 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 20:34:09,931 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 20:34:09,931 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 20:34:09,931 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 20:34:09,931 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 20:34:09,932 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 20:35:23,293 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 20:36:04,643 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 20:36:04,643 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 20:36:04,741 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 20:36:06,943 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 20:36:06,944 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 20:36:06,944 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 20:36:06,944 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-11 20:36:06,944 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级12288 -> mstpd优先级3)
2025-09-11 20:36:15,116 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 20:36:15,116 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 32768 (方法: ovs)
2025-09-11 20:36:15,117 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 20:36:15,238 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 20:36:20,382 - test_additional_rstp - INFO - 使用网桥: SE_ETH2
2025-09-11 20:36:20,383 - test_additional_rstp - INFO - === 步骤1: 禁用端口触发状态转换 ===
2025-09-11 20:36:20,788 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:36:20,940 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Alternate  Discarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:36:20,941 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 20:36:20,941 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:36:20,941 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 20:36:20,942 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:36:21,406 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:36:21,406 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:36:21,407 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:36:21,407 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:36:21,408 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:36:21,408 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:36:21,695 - test_additional_rstp - INFO - 选择测试端口: br3
2025-09-11 20:36:21,696 - FaultInjector_DUT - INFO - 断开链路: br3
2025-09-11 20:36:31,802 - FaultInjector_DUT - INFO - 链路已断开: br3
2025-09-11 20:36:31,802 - test_additional_rstp - INFO - 已禁用端口 br3
2025-09-11 20:36:34,803 - test_additional_rstp - INFO - === 步骤2: 重新启用端口并监控状态转换 ===
2025-09-11 20:36:34,803 - FaultInjector_DUT - INFO - 恢复链路: br3
2025-09-11 20:36:34,925 - FaultInjector_DUT - INFO - 链路已恢复: br3
2025-09-11 20:36:34,926 - test_additional_rstp - INFO - 已启用端口 br3，开始监控状态转换
2025-09-11 20:36:36,437 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:36:36,592 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Disabled   Discarding 2000     128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:36:36,594 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 20:36:36,594 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:36:36,594 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 20:36:36,594 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:36:37,058 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:36:37,058 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:36:37,059 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:36:37,059 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:36:37,060 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:36:37,060 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:36:37,346 - test_additional_rstp - INFO - T+1.1s: br3 -> 状态=disabled, 角色=root
2025-09-11 20:36:38,772 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:36:38,923 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Alternate  Discarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:36:38,925 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 20:36:38,925 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:36:38,925 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 20:36:38,925 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:36:39,394 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:36:39,394 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:36:39,395 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:36:39,396 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:36:39,396 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:36:39,396 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:36:39,682 - test_additional_rstp - INFO - T+3.5s: br3 -> 状态=forwarding, 角色=root
2025-09-11 20:36:41,097 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:36:41,252 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Alternate  Discarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:36:41,253 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 20:36:41,253 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:36:41,253 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 20:36:41,254 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:36:41,938 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:36:41,939 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:36:41,940 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:36:41,940 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:36:41,940 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:36:41,940 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:36:43,640 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:36:43,791 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Alternate  Discarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:36:43,792 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 20:36:43,793 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:36:43,793 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 20:36:43,793 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:36:44,261 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:36:44,261 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:36:44,262 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:36:44,263 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:36:44,263 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:36:44,263 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:36:45,971 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:36:46,119 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Alternate  Discarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:36:46,120 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 20:36:46,121 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:36:46,121 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 20:36:46,121 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:36:46,585 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:36:46,586 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:36:46,587 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:36:46,587 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:36:46,587 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:36:46,587 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:36:48,288 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:36:48,444 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Alternate  Discarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:36:48,445 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 20:36:48,445 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:36:48,446 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 20:36:48,446 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:36:48,917 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:36:48,918 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:36:48,919 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:36:48,919 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:36:48,919 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:36:48,920 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:36:50,624 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:36:50,776 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Alternate  Discarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:36:50,777 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 20:36:50,777 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:36:50,778 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 20:36:50,778 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:36:51,237 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:36:51,238 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:36:51,239 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:36:51,239 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:36:51,239 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:36:51,239 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:36:52,948 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:36:53,100 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Alternate  Discarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:36:53,101 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 20:36:53,102 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:36:53,102 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 20:36:53,102 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:36:53,569 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:36:53,569 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:36:53,570 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:36:53,570 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:36:53,571 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:36:53,571 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:36:55,283 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:36:55,439 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Alternate  Discarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:36:55,441 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 20:36:55,441 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:36:55,441 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 20:36:55,441 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:36:55,902 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:36:55,902 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:36:55,903 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:36:55,903 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:36:55,903 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:36:55,904 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:36:57,616 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:36:57,771 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Alternate  Discarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:36:57,772 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 20:36:57,773 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:36:57,773 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 20:36:57,773 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:36:58,245 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:36:58,246 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:36:58,247 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:36:58,247 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:36:58,247 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:36:58,247 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:36:59,947 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:37:00,100 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Alternate  Discarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:37:00,101 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 20:37:00,101 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:37:00,101 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 20:37:00,101 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:37:00,565 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:37:00,565 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:37:00,566 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:37:00,567 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:37:00,567 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:37:00,567 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:37:02,279 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:37:02,431 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Alternate  Discarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:37:02,433 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 20:37:02,433 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:37:02,433 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 20:37:02,433 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:37:02,893 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:37:02,893 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:37:02,894 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:37:02,894 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:37:02,895 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:37:02,895 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:37:04,596 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:37:04,747 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Alternate  Discarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:37:04,748 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 20:37:04,749 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:37:04,749 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 20:37:04,749 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:37:05,209 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:37:05,210 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:37:05,211 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:37:05,211 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:37:05,211 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:37:05,212 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:37:06,916 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:37:07,071 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Alternate  Discarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:37:07,073 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 20:37:07,073 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:37:07,073 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 20:37:07,073 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:37:07,533 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:37:07,533 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:37:07,534 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:37:07,535 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:37:07,535 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:37:07,535 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:37:09,244 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:37:09,395 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Alternate  Discarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:37:09,397 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 20:37:09,397 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:37:09,398 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 20:37:09,398 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:37:09,853 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:37:09,853 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:37:09,854 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:37:09,854 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:37:09,854 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:37:09,854 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:37:10,146 - test_additional_rstp - INFO - === 步骤3: 验证状态转换序列 ===
2025-09-11 20:37:10,146 - test_additional_rstp - INFO - 观察到的状态转换序列:
2025-09-11 20:37:10,147 - test_additional_rstp - INFO -   1. T+1.1s: disabled (root)
2025-09-11 20:37:10,147 - test_additional_rstp - INFO -   2. T+3.5s: forwarding (root)
2025-09-11 20:37:10,147 - test_additional_rstp - INFO - 未观察到Learning状态 - 可能发生了快速转换
2025-09-11 20:37:10,147 - test_additional_rstp - INFO - ✓ 端口最终达到Forwarding状态
2025-09-11 20:37:10,147 - test_additional_rstp - INFO - 这可能是RSTP快速转换的结果（Proposal/Agreement机制）
2025-09-11 20:37:10,148 - test_additional_rstp - INFO - === 步骤4: 验证最终状态 ===
2025-09-11 20:37:10,607 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:37:10,760 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Alternate  Discarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:37:10,761 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 20:37:10,761 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:37:10,762 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 20:37:10,762 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:37:11,220 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:37:11,221 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:37:11,222 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:37:11,222 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:37:11,222 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:37:11,222 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:37:11,510 - test_additional_rstp - INFO - 最终状态: br3 -> 状态=forwarding, 角色=root
2025-09-11 20:37:11,510 - test_additional_rstp - INFO - ✓ 端口成功恢复到Forwarding状态
2025-09-11 20:37:11,510 - test_additional_rstp - INFO - 端口状态转换测试完成
2025-09-11 20:37:11,517 - RSTPTest - INFO - 测试完成: test_port_state_transitions (耗时: 581.85秒)
2025-09-11 20:37:11,517 - RSTPTest - INFO - ============================================================

2025-09-11 20:37:11,520 - RSTPTest - INFO - ============================================================
2025-09-11 20:37:11,520 - RSTPTest - INFO - 开始测试: test_bpdu_propagation_and_keepalive
2025-09-11 20:37:11,520 - RSTPTest - INFO - ============================================================
2025-09-11 20:37:11,521 - test_additional_rstp - INFO - 开始BPDU传播和保活机制测试
2025-09-11 20:37:11,522 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 20:37:11,522 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 20:37:11,522 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 20:37:11,522 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 20:37:11,523 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 20:37:11,523 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 20:37:11,523 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 20:37:11,523 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 20:37:11,524 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 20:37:12,045 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 20:37:12,045 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 20:37:12,045 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 20:37:12,205 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 20:37:13,305 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 20:37:13,305 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 20:37:13,305 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 20:37:13,306 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 20:37:13,306 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 20:37:13,789 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 20:37:14,273 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 20:37:14,273 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 20:37:14,473 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 20:37:14,474 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 20:37:14,474 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 20:37:14,474 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 20:37:14,474 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 20:37:14,475 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 20:37:14,475 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 20:37:14,475 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 20:37:30,104 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 20:37:34,592 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 20:37:44,671 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 20:37:44,671 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 20:37:44,672 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 20:37:44,672 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 20:37:44,672 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 20:38:50,377 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 20:39:44,123 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 20:39:44,123 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 20:39:44,219 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 20:39:52,518 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 20:39:52,519 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 20:39:52,519 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 20:39:52,520 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 20:39:52,520 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 20:39:52,520 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 20:39:52,521 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 20:39:52,521 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 20:40:06,007 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 20:40:10,479 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 20:40:10,603 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 20:40:10,603 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 20:40:10,603 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 20:40:10,603 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 20:40:10,603 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 20:40:11,793 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 20:40:12,963 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 20:40:12,964 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 20:40:13,058 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 20:40:13,324 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 20:40:13,324 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 20:40:13,324 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 20:40:13,325 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-11 20:40:13,325 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级12288 -> mstpd优先级3)
2025-09-11 20:40:21,509 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 20:40:21,509 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 32768 (方法: ovs)
2025-09-11 20:40:21,510 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 20:40:21,630 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 20:40:21,774 - NetworkTopology_TestNode2 - INFO - TestNode2: 设置网桥优先级 br0 = 24576 (方法: mstpd)
2025-09-11 20:40:21,774 - NetworkTopology_TestNode2 - INFO - TestNode2: 执行mstpd设置优先级命令 (标准优先级24576 -> mstpd优先级6)
2025-09-11 20:40:21,904 - NetworkTopology_TestNode2 - INFO - TestNode2: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 20:40:29,906 - test_additional_rstp - INFO - === 步骤1: 验证分布式BPDU生成 ===
2025-09-11 20:40:29,954 - test_additional_rstp - INFO - 检测到网桥接口: ['18:', '26:']
2025-09-11 20:40:29,954 - test_additional_rstp - INFO - 在接口 18: 上捕获BPDU...
2025-09-11 20:40:29,955 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: 18:, 数量: 10)
2025-09-11 20:40:30,083 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-11 20:40:30,083 - test_additional_rstp - WARNING - 在 18: 上未捕获到BPDU
2025-09-11 20:40:30,083 - test_additional_rstp - INFO - 在接口 26: 上捕获BPDU...
2025-09-11 20:40:30,084 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: 26:, 数量: 10)
2025-09-11 20:40:30,199 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-11 20:40:30,199 - test_additional_rstp - WARNING - 在 26: 上未捕获到BPDU
2025-09-11 20:40:30,200 - test_additional_rstp - INFO - 总共捕获 0 个BPDU，来自 0 个不同源
2025-09-11 20:40:30,200 - test_additional_rstp - WARNING - 未检测到BPDU传播
2025-09-11 20:40:30,200 - test_additional_rstp - INFO - BPDU传播和保活机制测试完成
2025-09-11 20:40:30,201 - RSTPTest - INFO - 测试完成: test_bpdu_propagation_and_keepalive (耗时: 198.68秒)
2025-09-11 20:40:30,201 - RSTPTest - INFO - ============================================================

2025-09-11 20:40:30,202 - RSTPTest - INFO - ============================================================
2025-09-11 20:40:30,203 - RSTPTest - INFO - 开始测试: test_disabled_port_exclusion_enhanced
2025-09-11 20:40:30,203 - RSTPTest - INFO - ============================================================
2025-09-11 20:40:30,203 - test_additional_rstp - INFO - 开始增强的禁用端口排除测试
2025-09-11 20:40:30,204 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 20:40:30,204 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 20:40:30,204 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 20:40:30,204 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 20:40:30,204 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 20:40:30,204 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 20:40:30,205 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 20:40:30,205 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 20:40:30,205 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 20:40:30,718 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 20:40:30,718 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 20:40:30,718 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 20:40:30,875 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 20:40:31,942 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 20:40:31,942 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 20:40:31,942 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 20:40:31,943 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 20:40:31,943 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 20:40:32,418 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 20:40:32,889 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 20:40:32,890 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 20:40:33,082 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 20:40:33,082 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 20:40:33,082 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 20:40:33,082 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 20:40:33,083 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 20:40:33,083 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 20:40:33,083 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 20:40:33,083 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 20:40:48,688 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 20:40:53,187 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 20:40:53,326 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 20:40:53,326 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 20:40:53,326 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 20:40:53,327 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 20:40:53,327 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 20:40:54,521 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 20:40:55,711 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 20:40:55,712 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 20:40:55,806 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 20:40:56,150 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 20:40:56,150 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 20:40:56,150 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 20:40:56,150 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 20:40:56,150 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 20:40:56,151 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 20:40:56,151 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 20:40:56,151 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 20:40:56,628 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 20:41:01,122 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 20:41:01,249 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 20:41:01,249 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 20:41:01,250 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 20:41:01,250 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 20:41:01,250 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 20:41:02,413 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 20:41:03,587 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 20:41:03,588 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 20:41:03,683 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 20:41:03,948 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 20:41:03,949 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 20:41:03,949 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 20:41:03,949 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-11 20:41:03,949 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级12288 -> mstpd优先级3)
2025-09-11 20:41:04,071 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 20:41:04,071 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 32768 (方法: ovs)
2025-09-11 20:41:04,071 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 20:41:04,190 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 20:41:09,751 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:41:09,900 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Alternate  Discarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:41:09,901 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 20:41:09,901 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:41:09,901 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 20:41:09,901 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:41:10,361 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:41:10,361 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:41:10,362 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:41:10,362 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:41:10,362 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:41:10,363 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:41:10,654 - test_additional_rstp - INFO - 初始活动端口数量: 2
2025-09-11 20:41:10,654 - test_additional_rstp - INFO - === 步骤1: 禁用端口 ===
2025-09-11 20:41:10,654 - test_additional_rstp - INFO - 禁用端口: br3
2025-09-11 20:41:10,655 - FaultInjector_DUT - INFO - 断开链路: br3
2025-09-11 20:41:20,767 - FaultInjector_DUT - INFO - 链路已断开: br3
2025-09-11 20:41:23,768 - test_additional_rstp - INFO - === 步骤2: 验证禁用端口被排除 ===
2025-09-11 20:41:24,183 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:41:24,335 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Disabled   Discarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:41:24,336 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 20:41:24,336 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:41:24,336 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 20:41:24,336 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:41:24,793 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:41:24,794 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:41:24,795 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:41:24,795 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:41:24,795 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:41:24,795 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:41:25,077 - test_additional_rstp - INFO - 禁用端口状态: disabled
2025-09-11 20:41:25,078 - test_additional_rstp - INFO - ✓ 端口正确标记为DISABLED
2025-09-11 20:41:25,078 - test_additional_rstp - INFO - 禁用后剩余活动端口: 1
2025-09-11 20:41:25,078 - test_additional_rstp - INFO - ✓ 网络在禁用端口后仍然正常收敛
2025-09-11 20:41:25,078 - test_additional_rstp - INFO - === 步骤3: 重新启用端口 ===
2025-09-11 20:41:25,079 - FaultInjector_DUT - INFO - 恢复链路: br3
2025-09-11 20:41:25,248 - FaultInjector_DUT - INFO - 链路已恢复: br3
2025-09-11 20:41:25,248 - test_additional_rstp - INFO - 重新启用端口: br3
2025-09-11 20:41:30,249 - test_additional_rstp - INFO - === 步骤4: 验证端口重新参与RSTP ===
2025-09-11 20:41:30,655 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:41:30,807 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Alternate  Discarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:41:30,808 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 20:41:30,808 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:41:30,809 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 20:41:30,809 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:41:31,264 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:41:31,265 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:41:31,266 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:41:31,266 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:41:31,266 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:41:31,266 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:41:31,562 - test_additional_rstp - INFO - 重新启用后端口状态: forwarding
2025-09-11 20:41:31,562 - test_additional_rstp - INFO - 重新启用后端口角色: root
2025-09-11 20:41:31,563 - test_additional_rstp - INFO - ✓ 端口成功重新参与RSTP
2025-09-11 20:41:31,563 - test_additional_rstp - INFO - 最终活动端口数量: 2
2025-09-11 20:41:31,563 - test_additional_rstp - INFO - ✓ 所有端口都重新参与RSTP
2025-09-11 20:41:31,563 - test_additional_rstp - INFO - 增强的禁用端口排除测试完成
2025-09-11 20:41:31,564 - RSTPTest - INFO - 测试完成: test_disabled_port_exclusion_enhanced (耗时: 61.36秒)
2025-09-11 20:41:31,564 - RSTPTest - INFO - ============================================================

2025-09-11 20:41:31,565 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-11 20:41:31,565 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-11 20:41:31,565 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-11 20:41:31,698 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-11 20:41:31,699 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-11 20:41:31,821 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-11 20:41:31,821 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-11 20:41:31,955 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-11 20:41:31,956 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-11 20:41:31,956 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 20:41:31,957 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 20:41:31,957 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-11 20:41:31,957 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-11 20:41:32,013 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-11 20:41:32,014 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-11 20:41:32,187 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-11 20:41:32,188 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-11 20:41:32,188 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-11 20:41:32,188 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-11 20:41:32,188 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-11 20:41:32,248 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-11 20:41:32,248 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-11 20:41:32,436 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-11 20:41:32,436 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-11 20:41:32,436 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-11 20:41:32,436 - RSTPTest - INFO - ============================================================
2025-09-11 20:41:32,437 - RSTPTest - INFO - 开始测试: test_proposal_agreement_handshake
2025-09-11 20:41:32,437 - RSTPTest - INFO - ============================================================
2025-09-11 20:41:32,438 - test_advanced_rstp_mechanisms - INFO - 开始测试RSTP Proposal/Agreement握手机制
2025-09-11 20:41:32,438 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 20:41:32,438 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 20:41:32,438 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 20:41:32,438 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 20:41:32,439 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 20:41:32,439 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 20:41:32,439 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 20:41:32,439 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 20:41:32,440 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 20:41:32,912 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 20:41:32,912 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 20:41:32,912 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 20:41:33,068 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 20:41:34,140 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 20:41:34,140 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 20:41:34,140 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 20:41:34,141 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 20:41:34,141 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 20:41:34,617 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 20:41:35,092 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 20:41:35,093 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 20:41:35,285 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 20:41:35,285 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 20:41:35,286 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 20:41:35,286 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 20:41:35,286 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 20:41:35,286 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 20:41:35,286 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 20:41:35,286 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 20:41:35,781 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 20:41:40,306 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 20:41:40,434 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 20:41:40,434 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 20:41:40,434 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 20:41:40,434 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 20:41:40,435 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 20:41:41,631 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 20:41:42,817 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 20:41:42,817 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 20:41:42,914 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 20:41:43,173 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 20:41:43,173 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 20:41:43,173 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 20:41:43,174 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 20:41:43,174 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 20:41:43,174 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 20:41:43,174 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 20:41:43,174 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 20:41:43,669 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 20:41:48,150 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 20:41:58,228 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 20:41:58,228 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 20:41:58,228 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 20:41:58,229 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 20:41:58,229 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 20:43:04,992 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 20:43:38,517 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 20:43:38,517 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 20:43:38,613 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 20:43:41,908 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 20:43:41,909 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 20:43:41,909 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 20:43:46,910 - test_advanced_rstp_mechanisms - INFO - 开始在eth0上捕获BPDU
2025-09-11 20:43:46,910 - test_advanced_rstp_mechanisms - INFO - 触发拓扑变更...
2025-09-11 20:43:46,910 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 28672 (方法: mstpd)
2025-09-11 20:43:46,910 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级28672 -> mstpd优先级7)
2025-09-11 20:43:47,039 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 20:43:50,040 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 32768 (方法: mstpd)
2025-09-11 20:43:50,041 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级32768 -> mstpd优先级8)
2025-09-11 20:43:50,177 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 20:43:53,178 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: eth0, 数量: 20)
2025-09-11 20:43:53,268 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-11 20:43:53,268 - test_advanced_rstp_mechanisms - INFO - 捕获到0个BPDU数据包
2025-09-11 20:43:53,268 - test_advanced_rstp_mechanisms - WARNING - 未能捕获到完整的BPDU握手序列，可能是环境限制
2025-09-11 20:43:53,268 - test_advanced_rstp_mechanisms - INFO - 改为验证网络收敛状态...
2025-09-11 20:43:53,741 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:43:53,896 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    28672
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Designated Forwarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:43:53,897 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 28672
2025-09-11 20:43:53,897 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:43:53,898 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 7000/6e:b3:08:fa:01:34
2025-09-11 20:43:53,898 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:43:54,377 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:43:54,378 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:43:54,379 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:43:54,379 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:43:54,379 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:43:54,379 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:43:54,679 - test_advanced_rstp_mechanisms - INFO - ✓ 网络收敛正常，存在根端口
2025-09-11 20:43:56,680 - test_advanced_rstp_mechanisms - INFO - RSTP Proposal/Agreement握手机制测试通过
2025-09-11 20:43:56,681 - RSTPTest - INFO - 测试完成: test_proposal_agreement_handshake (耗时: 144.24秒)
2025-09-11 20:43:56,681 - RSTPTest - INFO - ============================================================

2025-09-11 20:43:56,683 - RSTPTest - INFO - ============================================================
2025-09-11 20:43:56,683 - RSTPTest - INFO - 开始测试: test_tcn_topology_change_notification
2025-09-11 20:43:56,683 - RSTPTest - INFO - ============================================================
2025-09-11 20:43:56,684 - test_advanced_rstp_mechanisms - INFO - 开始测试TCN拓扑变更通知机制
2025-09-11 20:43:56,684 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 20:43:56,684 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 20:43:56,685 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 20:43:56,685 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 20:43:56,685 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 20:43:56,686 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 20:43:56,686 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 20:43:56,686 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 20:43:56,686 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 20:43:57,179 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 20:43:57,180 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 20:43:57,180 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 20:43:57,334 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 20:43:58,437 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 20:43:58,437 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 20:43:58,438 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 20:43:58,438 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 20:43:58,438 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 20:43:58,930 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 20:43:59,427 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 20:43:59,437 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 20:43:59,626 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 20:43:59,627 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 20:43:59,627 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 20:43:59,627 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 20:43:59,627 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 20:43:59,627 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 20:43:59,628 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 20:43:59,628 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 20:44:04,350 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 20:44:08,865 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 20:44:08,990 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 20:44:08,990 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 20:44:08,990 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 20:44:08,990 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 20:44:08,991 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 20:44:10,188 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 20:44:11,435 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 20:44:11,435 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 20:44:11,532 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 20:44:11,797 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 20:44:11,798 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 20:44:11,798 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 20:44:11,798 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 20:44:11,798 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 20:44:11,798 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 20:44:11,798 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 20:44:11,799 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 20:44:24,345 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 20:44:28,871 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 20:44:29,007 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 20:44:29,008 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 20:44:29,008 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 20:44:29,008 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 20:44:29,008 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 20:44:30,201 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 20:44:31,399 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 20:44:31,400 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 20:44:31,503 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 20:44:31,764 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 20:44:31,765 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 20:44:31,765 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 20:44:42,195 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:44:42,343 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Root       Forwarding 20000    128.1
  br4        Alternate  Discarding 20000    128.2


2025-09-11 20:44:42,344 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 20:44:42,345 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:44:42,345 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 20:44:42,345 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:44:42,817 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:44:42,817 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:44:42,819 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:44:42,819 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:44:42,819 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:44:42,819 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:44:43,122 - test_advanced_rstp_mechanisms - INFO - 初始网桥端口数量: 3
2025-09-11 20:44:43,123 - test_advanced_rstp_mechanisms - INFO - 触发拓扑变更：临时禁用/启用端口
2025-09-11 20:44:43,280 - test_advanced_rstp_mechanisms - INFO - 初始TC计数: 0
2025-09-11 20:44:51,564 - test_advanced_rstp_mechanisms - INFO - 变更后TC计数: 0
2025-09-11 20:44:51,565 - test_advanced_rstp_mechanisms - INFO - 拓扑变更可能未被检测到，这可能是正常的（取决于实现）
2025-09-11 20:44:52,043 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:44:52,196 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Root       Forwarding 20000    128.1
  br4        Alternate  Discarding 20000    128.2


2025-09-11 20:44:52,197 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 20:44:52,197 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:44:52,197 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 20:44:52,197 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:44:52,680 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:44:52,681 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:44:52,682 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:44:52,682 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:44:52,682 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:44:52,682 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:44:52,974 - test_advanced_rstp_mechanisms - INFO - 最终网桥端口数量: 3
2025-09-11 20:44:53,126 - test_advanced_rstp_mechanisms - INFO - 当前MAC地址表老化时间: 300秒
2025-09-11 20:44:53,126 - test_advanced_rstp_mechanisms - WARNING - MAC地址表老化时间(300秒)未缩短，可能是实现差异
2025-09-11 20:44:53,126 - test_advanced_rstp_mechanisms - INFO - TCN拓扑变更通知机制测试通过 - 使用安全的端口状态变更方式
2025-09-11 20:44:53,127 - RSTPTest - INFO - 测试完成: test_tcn_topology_change_notification (耗时: 56.44秒)
2025-09-11 20:44:53,127 - RSTPTest - INFO - ============================================================

2025-09-11 20:44:53,128 - RSTPTest - INFO - ============================================================
2025-09-11 20:44:53,129 - RSTPTest - INFO - 开始测试: test_edge_port_behavior
2025-09-11 20:44:53,129 - RSTPTest - INFO - ============================================================
2025-09-11 20:44:53,129 - test_advanced_rstp_mechanisms - INFO - 开始测试边缘端口行为
2025-09-11 20:44:53,129 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 20:44:53,130 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 20:44:53,130 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 20:44:53,130 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 20:44:53,130 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 20:44:53,130 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 20:44:53,130 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 20:44:53,130 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 20:44:53,131 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 20:44:53,654 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 20:44:53,655 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 20:44:53,655 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 20:44:53,809 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 20:44:54,933 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 20:44:54,933 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 20:44:54,933 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 20:44:54,934 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 20:44:54,934 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 20:44:55,433 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 20:44:55,906 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 20:44:55,906 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 20:44:56,097 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 20:44:56,098 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 20:44:56,098 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 20:44:56,098 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 20:44:56,099 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 20:44:56,099 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 20:44:56,099 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 20:44:56,099 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 20:44:56,618 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 20:45:01,111 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 20:45:01,234 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 20:45:01,235 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 20:45:01,235 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 20:45:01,235 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 20:45:01,235 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 20:45:02,420 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 20:45:03,651 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 20:45:03,652 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 20:45:03,750 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 20:45:04,019 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 20:45:04,020 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 20:45:04,020 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 20:45:04,020 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 20:45:04,020 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 20:45:04,020 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 20:45:04,021 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 20:45:04,021 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 20:45:04,532 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 20:45:09,045 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 20:45:09,172 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 20:45:09,172 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 20:45:09,172 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 20:45:09,172 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 20:45:09,172 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 20:45:10,353 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 20:45:11,537 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 20:45:11,537 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 20:45:11,632 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 20:45:11,897 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 20:45:11,897 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 20:45:11,898 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 20:45:19,056 - test_advanced_rstp_mechanisms - INFO - 可用端口: ['enp1s0']
2025-09-11 20:45:19,056 - test_advanced_rstp_mechanisms - INFO - 选择端口enp1s0作为边缘端口测试
2025-09-11 20:45:19,169 - test_advanced_rstp_mechanisms - INFO - 测试边缘端口立即转发特性
2025-09-11 20:45:22,068 - test_advanced_rstp_mechanisms - INFO - 边缘端口状态转换时间: 2.74秒
2025-09-11 20:45:22,069 - test_advanced_rstp_mechanisms - INFO - ✓ 边缘端口转换时间合理
2025-09-11 20:45:22,172 - test_advanced_rstp_mechanisms - INFO - ✓ 边缘端口状态变化未产生TCN
2025-09-11 20:45:22,173 - test_advanced_rstp_mechanisms - INFO - 测试边缘端口收到BPDU后的行为
2025-09-11 20:45:22,331 - test_advanced_rstp_mechanisms - INFO - 边缘端口状态: 1
1
normal
2025-09-11 20:45:22,332 - test_advanced_rstp_mechanisms - INFO - 边缘端口行为测试通过
2025-09-11 20:45:22,332 - RSTPTest - INFO - 测试完成: test_edge_port_behavior (耗时: 29.20秒)
2025-09-11 20:45:22,333 - RSTPTest - INFO - ============================================================

2025-09-11 20:45:22,334 - RSTPTest - INFO - ============================================================
2025-09-11 20:45:22,334 - RSTPTest - INFO - 开始测试: test_shared_vs_point_to_point_links
2025-09-11 20:45:22,334 - RSTPTest - INFO - ============================================================
2025-09-11 20:45:22,335 - test_advanced_rstp_mechanisms - INFO - 开始测试不同链路类型的行为差异
2025-09-11 20:45:22,335 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 20:45:22,335 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 20:45:22,335 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 20:45:22,335 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 20:45:22,336 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 20:45:22,336 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 20:45:22,336 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 20:45:22,336 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 20:45:22,336 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 20:45:22,858 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 20:45:22,859 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 20:45:22,859 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 20:45:23,012 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 20:45:24,104 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 20:45:24,105 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 20:45:24,105 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 20:45:24,105 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 20:45:24,106 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 20:45:24,605 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 20:45:25,100 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 20:45:25,101 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 20:45:25,305 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 20:45:25,305 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 20:45:25,306 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 20:45:25,306 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 20:45:25,306 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 20:45:25,306 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 20:45:25,306 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 20:45:25,306 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 20:45:25,794 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 20:45:30,333 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 20:45:30,458 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 20:45:30,458 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 20:45:30,459 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 20:45:30,459 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 20:45:30,459 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 20:45:31,723 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 20:45:32,928 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 20:45:32,928 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 20:45:33,024 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 20:45:33,289 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 20:45:33,289 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 20:45:33,289 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 20:45:33,290 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 20:45:33,290 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 20:45:33,290 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 20:45:33,290 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 20:45:33,290 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 20:45:33,804 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 20:45:38,300 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 20:45:38,432 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 20:45:38,432 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 20:45:38,432 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 20:45:38,433 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 20:45:38,433 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 20:45:39,624 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 20:45:40,818 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 20:45:40,818 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 20:45:40,913 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 20:45:41,173 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 20:45:41,173 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 20:45:41,173 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 20:45:46,281 - test_advanced_rstp_mechanisms - INFO - 检测到的链路类型: {}
2025-09-11 20:45:46,281 - test_advanced_rstp_mechanisms - INFO - 测试点对点链路收敛性能
2025-09-11 20:45:46,282 - ConvergenceMonitor - INFO - 开始故障收敛时间测量...
2025-09-11 20:45:46,282 - ConvergenceMonitor - INFO - 开始测量收敛时间...
2025-09-11 20:45:46,741 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:45:46,893 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Root       Forwarding 20000    128.1
  br4        Alternate  Discarding 20000    128.2


2025-09-11 20:45:46,894 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 20:45:46,894 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:45:46,894 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 20:45:46,894 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:45:47,352 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:45:47,352 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:45:47,354 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:45:47,354 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:45:47,354 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:45:47,354 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:45:47,641 - ConvergenceMonitor - INFO - 执行故障注入: trigger_topology_change
2025-09-11 20:45:50,714 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:45:50,866 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Root       Forwarding 20000    128.1
  br4        Alternate  Discarding 20000    128.2


2025-09-11 20:45:50,867 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 20:45:50,868 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:45:50,868 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 20:45:50,868 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:45:51,320 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:45:51,320 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:45:51,321 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:45:51,322 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:45:51,322 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:45:51,322 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:45:52,094 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:45:52,251 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Root       Forwarding 20000    128.1
  br4        Alternate  Discarding 20000    128.2


2025-09-11 20:45:52,253 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 20:45:52,253 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:45:52,253 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 20:45:52,253 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:45:52,720 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:45:52,720 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:45:52,721 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:45:52,721 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:45:52,722 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:45:52,722 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:45:53,490 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:45:53,647 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Root       Forwarding 20000    128.1
  br4        Alternate  Discarding 20000    128.2


2025-09-11 20:45:53,648 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 20:45:53,649 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:45:53,649 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 20:45:53,649 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:45:54,135 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:45:54,135 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:45:54,136 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:45:54,137 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:45:54,137 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:45:54,137 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:45:54,903 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:45:55,055 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Root       Forwarding 20000    128.1
  br4        Alternate  Discarding 20000    128.2


2025-09-11 20:45:55,056 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 20:45:55,057 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:45:55,057 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 20:45:55,057 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:45:55,520 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:45:55,521 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:45:55,522 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:45:55,522 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:45:55,522 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:45:55,523 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:45:55,842 - ConvergenceMonitor - WARNING - 未检测到明确的拓扑变化时刻，使用故障注入时间作为基准
2025-09-11 20:45:55,842 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 20:45:56,302 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:45:56,459 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Root       Forwarding 20000    128.1
  br4        Alternate  Discarding 20000    128.2


2025-09-11 20:45:56,460 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 20:45:56,461 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:45:56,461 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 20:45:56,461 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:45:56,936 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:45:56,936 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:45:56,937 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:45:56,938 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:45:56,938 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:45:56,938 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:45:57,229 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 9.588秒
2025-09-11 20:45:57,229 - ConvergenceMonitor - INFO - 故障收敛完整流程: 注入延迟0.0ms, 收敛时间9.588秒
2025-09-11 20:45:57,229 - test_advanced_rstp_mechanisms - INFO - 收敛时间: 9.588秒
2025-09-11 20:45:57,230 - test_advanced_rstp_mechanisms - INFO - 验证链路类型识别
2025-09-11 20:45:57,230 - test_advanced_rstp_mechanisms - INFO - 不同链路类型行为差异测试通过
2025-09-11 20:45:57,231 - RSTPTest - INFO - 测试完成: test_shared_vs_point_to_point_links (耗时: 34.90秒)
2025-09-11 20:45:57,231 - RSTPTest - INFO - ============================================================

2025-09-11 20:45:57,231 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-11 20:45:57,232 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-11 20:45:57,232 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-11 20:45:57,366 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-11 20:45:57,367 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-11 20:45:57,494 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-11 20:45:57,494 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-11 20:45:57,628 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-11 20:45:57,629 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-11 20:45:57,629 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 20:45:57,629 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 20:45:57,630 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-11 20:45:57,630 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-11 20:45:57,685 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-11 20:45:57,685 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-11 20:45:57,852 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-11 20:45:57,852 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-11 20:45:57,852 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-11 20:45:57,852 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-11 20:45:57,853 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-11 20:45:57,909 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-11 20:45:57,909 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-11 20:45:58,084 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-11 20:45:58,085 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-11 20:45:58,085 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-11 20:45:58,085 - RSTPTest - INFO - ============================================================
2025-09-11 20:45:58,085 - RSTPTest - INFO - 开始测试: test_backup_port_concept_verification
2025-09-11 20:45:58,085 - RSTPTest - INFO - ============================================================
2025-09-11 20:45:58,086 - test_backup_port_simulation - INFO - 开始备份端口概念验证测试
2025-09-11 20:45:58,086 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 20:45:58,086 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 20:45:58,087 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 20:45:58,087 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 20:45:58,087 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 20:45:58,087 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 20:45:58,087 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 20:45:58,087 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 20:45:58,087 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 20:45:58,572 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 20:45:58,573 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 20:45:58,573 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 20:45:58,728 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 20:45:59,816 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 20:45:59,816 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 20:45:59,816 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 20:45:59,817 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 20:45:59,817 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 20:46:00,309 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 20:46:00,780 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 20:46:00,781 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 20:46:00,977 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 20:46:00,977 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 20:46:00,977 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 20:46:00,977 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 20:46:00,977 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 20:46:00,978 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 20:46:00,978 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 20:46:00,978 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 20:46:01,470 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 20:46:05,978 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 20:46:06,107 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 20:46:06,107 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 20:46:06,107 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 20:46:06,108 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 20:46:06,108 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 20:46:07,337 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 20:46:08,544 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 20:46:08,544 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 20:46:08,641 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 20:46:08,916 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 20:46:08,916 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 20:46:08,916 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 20:46:08,917 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 20:46:08,917 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 20:46:08,917 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 20:46:08,917 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 20:46:08,917 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 20:46:09,425 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 20:46:13,925 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 20:46:14,056 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 20:46:14,056 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 20:46:14,057 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 20:46:14,057 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 20:46:14,057 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 20:46:15,235 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 20:46:16,430 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 20:46:16,431 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 20:46:16,527 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 20:46:16,811 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 20:46:16,812 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 20:46:16,812 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 20:46:27,218 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:46:27,370 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Root       Forwarding 20000    128.1
  br4        Alternate  Discarding 20000    128.2


2025-09-11 20:46:27,371 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 20:46:27,371 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:46:27,371 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 20:46:27,371 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:46:27,827 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:46:27,827 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:46:27,829 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:46:27,829 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:46:27,829 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:46:27,829 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:46:28,121 - test_backup_port_simulation - INFO - === 当前端口状态 ===
2025-09-11 20:46:28,121 - test_backup_port_simulation - INFO - 端口 br3: 角色=root, 状态=forwarding
2025-09-11 20:46:28,121 - test_backup_port_simulation - INFO - 端口 br4: 角色=alternate, 状态=discarding
2025-09-11 20:46:28,122 - test_backup_port_simulation - INFO - 端口 SE_ETH2: 角色=unknown, 状态=disabled
2025-09-11 20:46:28,122 - test_backup_port_simulation - INFO - ⚠ 在当前点对点拓扑中未检测到备份端口（符合预期）
2025-09-11 20:46:28,122 - test_backup_port_simulation - INFO - 备份端口通常出现在共享介质网段中，当前测试环境为点对点链路
2025-09-11 20:46:28,122 - test_backup_port_simulation - INFO - 端口角色分布: {<PortRole.ROOT: 'root'>: ['br3'], <PortRole.ALTERNATE: 'alternate'>: ['br4']}
2025-09-11 20:46:28,123 - test_backup_port_simulation - INFO - === RSTP端口角色覆盖分析 ===
2025-09-11 20:46:28,123 - test_backup_port_simulation - INFO - ✓ root端口: ['br3']
2025-09-11 20:46:28,123 - test_backup_port_simulation - INFO - - designated端口: 未检测到
2025-09-11 20:46:28,123 - test_backup_port_simulation - INFO - ✓ alternate端口: ['br4']
2025-09-11 20:46:28,123 - test_backup_port_simulation - INFO - - backup端口: 未检测到（在点对点拓扑中为正常现象）
2025-09-11 20:46:28,123 - test_backup_port_simulation - INFO - 备份端口概念验证测试完成
2025-09-11 20:46:28,124 - RSTPTest - INFO - 测试完成: test_backup_port_concept_verification (耗时: 30.04秒)
2025-09-11 20:46:28,124 - RSTPTest - INFO - ============================================================

2025-09-11 20:46:28,126 - RSTPTest - INFO - ============================================================
2025-09-11 20:46:28,126 - RSTPTest - INFO - 开始测试: test_shared_medium_simulation_attempt
2025-09-11 20:46:28,126 - RSTPTest - INFO - ============================================================
2025-09-11 20:46:28,127 - test_backup_port_simulation - INFO - 开始共享介质模拟尝试
2025-09-11 20:46:28,127 - test_backup_port_simulation - INFO - === 尝试创建共享介质模拟场景 ===
2025-09-11 20:46:28,127 - test_backup_port_simulation - INFO - 创建中心交换机模拟共享介质...
2025-09-11 20:46:28,127 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 20:46:28,127 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 20:46:28,128 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 20:46:28,128 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 20:46:28,129 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 20:46:28,129 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 20:46:28,129 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 20:46:28,129 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 20:46:28,129 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 20:46:28,647 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 20:46:28,647 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 20:46:28,647 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 20:46:28,803 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 20:46:29,872 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 20:46:29,873 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 20:46:29,873 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 20:46:29,873 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 20:46:29,873 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 20:46:30,348 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 20:46:30,819 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 20:46:30,819 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 20:46:31,012 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 20:46:31,012 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 20:46:31,012 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 20:46:31,013 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 20:46:31,013 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 20:46:31,013 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 20:46:31,013 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 20:46:31,013 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 20:46:31,508 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 20:46:36,084 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 20:46:36,213 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 20:46:36,213 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 20:46:36,214 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 20:46:36,214 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 20:46:36,214 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 20:46:37,409 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 20:46:38,594 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 20:46:38,594 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 20:46:38,689 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 20:46:38,958 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 20:46:38,958 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 20:46:38,959 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 20:46:38,959 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 20:46:38,959 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 20:46:38,959 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 20:46:38,959 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 20:46:38,960 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 20:46:39,451 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 20:46:43,944 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 20:46:44,078 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 20:46:44,078 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 20:46:44,079 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 20:46:44,079 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 20:46:44,079 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 20:46:45,258 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 20:46:46,449 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 20:46:46,449 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 20:46:46,544 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 20:46:46,803 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 20:46:46,804 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 20:46:46,804 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 20:46:57,226 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:46:57,381 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Root       Forwarding 20000    128.1
  br4        Alternate  Discarding 20000    128.2


2025-09-11 20:46:57,382 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 20:46:57,382 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:46:57,382 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 20:46:57,383 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:46:57,847 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:46:57,847 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:46:57,849 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:46:57,849 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:46:57,849 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:46:57,849 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:46:58,136 - test_backup_port_simulation - INFO - === 分析当前端口配置 ===
2025-09-11 20:46:58,136 - test_backup_port_simulation - INFO - 活动端口 br3: 角色=root, 状态=forwarding
2025-09-11 20:46:58,136 - test_backup_port_simulation - INFO - 活动端口 br4: 角色=alternate, 状态=discarding
2025-09-11 20:46:58,137 - test_backup_port_simulation - INFO - ⚠ 未检测到备份端口
2025-09-11 20:46:58,137 - test_backup_port_simulation - INFO - 这在当前测试环境中是正常的，因为缺乏真正的共享介质
2025-09-11 20:46:58,137 - test_backup_port_simulation - INFO - 共享介质模拟尝试完成
2025-09-11 20:46:58,138 - RSTPTest - INFO - 测试完成: test_shared_medium_simulation_attempt (耗时: 30.01秒)
2025-09-11 20:46:58,138 - RSTPTest - INFO - ============================================================

2025-09-11 20:46:58,140 - RSTPTest - INFO - ============================================================
2025-09-11 20:46:58,140 - RSTPTest - INFO - 开始测试: test_backup_port_documentation_verification
2025-09-11 20:46:58,140 - RSTPTest - INFO - ============================================================
2025-09-11 20:46:58,141 - test_backup_port_simulation - INFO - 开始备份端口文档验证
2025-09-11 20:46:58,141 - test_backup_port_simulation - INFO - ✓ PortRole.BACKUP 存在
2025-09-11 20:46:58,141 - test_backup_port_simulation - INFO - === 备份端口理论特性验证 ===
2025-09-11 20:46:58,141 - test_backup_port_simulation - INFO - purpose: 为共享介质网段提供冗余
2025-09-11 20:46:58,141 - test_backup_port_simulation - INFO - difference_from_alternate: 备份端口是同一交换机上指定端口的备份，而备用端口是不同交换机提供的路径
2025-09-11 20:46:58,141 - test_backup_port_simulation - INFO - state: Discarding
2025-09-11 20:46:58,142 - test_backup_port_simulation - INFO - scenario: 出现在连接到集线器或共享介质的场景中
2025-09-11 20:46:58,142 - test_backup_port_simulation - INFO - fast_transition: 当对应的指定端口失效时，可以快速转换为指定端口
2025-09-11 20:46:58,142 - test_backup_port_simulation - INFO - === 端口角色对比 ===
2025-09-11 20:46:58,142 - test_backup_port_simulation - INFO - root: 连接到根桥的最佳路径
2025-09-11 20:46:58,142 - test_backup_port_simulation - INFO - designated: 为网段提供转发服务
2025-09-11 20:46:58,143 - test_backup_port_simulation - INFO - alternate: 提供到根桥的备用路径（来自其他交换机）
2025-09-11 20:46:58,143 - test_backup_port_simulation - INFO - backup: 同一交换机上指定端口的备份（共享介质场景）
2025-09-11 20:46:58,143 - test_backup_port_simulation - INFO - === 测试覆盖率分析 ===
2025-09-11 20:46:58,143 - test_backup_port_simulation - INFO - 已覆盖: Root Port, Designated Port, Alternate Port, Disabled Port
2025-09-11 20:46:58,143 - test_backup_port_simulation - INFO - 部分覆盖: Backup Port (概念验证)
2025-09-11 20:46:58,144 - test_backup_port_simulation - INFO - 覆盖限制: 测试框架无法创建真正的共享介质拓扑
2025-09-11 20:46:58,144 - test_backup_port_simulation - INFO - 建议: 在实际部署环境中使用集线器或配置交换机共享模式进行完整测试
2025-09-11 20:46:58,144 - test_backup_port_simulation - INFO - 备份端口文档验证完成
2025-09-11 20:46:58,145 - RSTPTest - INFO - 测试完成: test_backup_port_documentation_verification (耗时: 0.00秒)
2025-09-11 20:46:58,145 - RSTPTest - INFO - ============================================================

2025-09-11 20:46:58,145 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-11 20:46:58,145 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-11 20:46:58,146 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-11 20:46:58,285 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-11 20:46:58,285 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-11 20:46:58,405 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-11 20:46:58,405 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-11 20:46:58,538 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-11 20:46:58,538 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-11 20:46:58,538 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 20:46:58,538 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 20:46:58,539 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-11 20:46:58,539 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-11 20:46:58,597 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-11 20:46:58,597 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-11 20:46:58,767 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-11 20:46:58,767 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-11 20:46:58,767 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-11 20:46:58,767 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-11 20:46:58,768 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-11 20:46:58,823 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-11 20:46:58,823 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-11 20:46:58,997 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-11 20:46:58,997 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-11 20:46:58,997 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-11 20:46:58,997 - RSTPTest - INFO - ============================================================
2025-09-11 20:46:58,998 - RSTPTest - INFO - 开始测试: test_direct_link_failure
2025-09-11 20:46:58,998 - RSTPTest - INFO - ============================================================
2025-09-11 20:46:58,999 - test_convergence - INFO - 开始直接链路故障测试
2025-09-11 20:46:58,999 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 20:46:58,999 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 20:46:58,999 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 20:46:59,000 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 20:46:59,000 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 20:46:59,000 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 20:46:59,000 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 20:46:59,000 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 20:46:59,000 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 20:46:59,484 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 20:46:59,484 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 20:46:59,484 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 20:46:59,639 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 20:47:00,714 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 20:47:00,715 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 20:47:00,715 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 20:47:00,715 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 20:47:00,715 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 20:47:01,192 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 20:47:01,667 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 20:47:01,668 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 20:47:01,855 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 20:47:01,856 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 20:47:01,856 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 20:47:01,856 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 20:47:01,856 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 20:47:01,856 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 20:47:01,856 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 20:47:01,857 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 20:47:02,349 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 20:47:06,828 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 20:47:06,962 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 20:47:06,963 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 20:47:06,963 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 20:47:06,963 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 20:47:06,964 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 20:47:08,170 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 20:47:09,366 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 20:47:09,366 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 20:47:09,464 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 20:47:09,728 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 20:47:09,729 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 20:47:09,729 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 20:47:09,729 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 20:47:09,729 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 20:47:09,730 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 20:47:09,730 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 20:47:09,730 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 20:47:10,227 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 20:47:14,699 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 20:47:14,825 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 20:47:14,825 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 20:47:14,826 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 20:47:14,826 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 20:47:14,826 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 20:47:16,003 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 20:47:17,196 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 20:47:17,196 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 20:47:17,293 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 20:47:17,561 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 20:47:17,561 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 20:47:17,561 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 20:47:17,561 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 16384 (方法: mstpd)
2025-09-11 20:47:17,562 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级16384 -> mstpd优先级4)
2025-09-11 20:47:17,693 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 20:47:17,693 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 32768 (方法: ovs)
2025-09-11 20:47:17,693 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 20:47:17,814 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 20:47:17,966 - NetworkTopology_TestNode2 - INFO - TestNode2: 设置网桥优先级 br0 = 28672 (方法: mstpd)
2025-09-11 20:47:17,967 - NetworkTopology_TestNode2 - INFO - TestNode2: 执行mstpd设置优先级命令 (标准优先级28672 -> mstpd优先级7)
2025-09-11 20:47:18,103 - NetworkTopology_TestNode2 - INFO - TestNode2: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 20:47:18,103 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 20:47:18,510 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:47:18,657 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    16384
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Alternate  Discarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:47:18,658 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 16384
2025-09-11 20:47:18,658 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:47:18,658 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 4000/6e:b3:08:fa:01:34
2025-09-11 20:47:18,658 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:47:19,114 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:47:19,114 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:47:19,115 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:47:19,116 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:47:19,116 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:47:19,116 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:47:20,090 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.987秒
2025-09-11 20:47:20,090 - test_convergence - INFO - 初始收敛时间: 1.99秒
2025-09-11 20:47:20,505 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:47:20,657 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    16384
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Alternate  Discarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:47:20,658 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 16384
2025-09-11 20:47:20,658 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:47:20,659 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 4000/6e:b3:08:fa:01:34
2025-09-11 20:47:20,659 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:47:21,123 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:47:21,123 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:47:21,125 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:47:21,125 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:47:21,125 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:47:21,125 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:47:21,407 - test_convergence - INFO - DUT的Root Port: br3
2025-09-11 20:47:21,408 - ConvergenceMonitor - INFO - 开始故障收敛时间测量...
2025-09-11 20:47:21,408 - ConvergenceMonitor - INFO - 开始测量收敛时间...
2025-09-11 20:47:21,862 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:47:22,009 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    16384
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Alternate  Discarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:47:22,010 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 16384
2025-09-11 20:47:22,010 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:47:22,010 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 4000/6e:b3:08:fa:01:34
2025-09-11 20:47:22,010 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:47:22,471 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:47:22,471 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:47:22,472 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:47:22,473 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:47:22,473 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:47:22,473 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:47:23,440 - ConvergenceMonitor - INFO - 执行故障注入: <lambda>
2025-09-11 20:47:23,440 - FaultInjector_DUT - INFO - 断开链路: br3
2025-09-11 20:47:33,531 - FaultInjector_DUT - INFO - 链路已断开: br3
2025-09-11 20:47:34,013 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:47:34,169 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    16384
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Disabled   Discarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:47:34,170 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 16384
2025-09-11 20:47:34,171 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:47:34,171 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 4000/6e:b3:08:fa:01:34
2025-09-11 20:47:34,171 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:47:34,622 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:47:34,622 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:47:34,624 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:47:34,624 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:47:34,624 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:47:34,624 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:47:34,911 - ConvergenceMonitor - INFO - 检测到端口br3角色变化: ROOT -> ALTERNATE
2025-09-11 20:47:34,911 - ConvergenceMonitor - INFO - DUT检测到拓扑变化的延迟: 11471.1ms
2025-09-11 20:47:34,912 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 20:47:35,378 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:47:35,529 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    16384
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Disabled   Discarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:47:35,530 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 16384
2025-09-11 20:47:35,530 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:47:35,530 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 4000/6e:b3:08:fa:01:34
2025-09-11 20:47:35,530 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:47:35,983 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:47:35,983 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:47:35,984 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:47:35,985 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:47:35,985 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:47:35,985 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:47:36,968 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 2.057秒
2025-09-11 20:47:36,968 - ConvergenceMonitor - INFO - 故障收敛完整流程: 注入延迟11471.1ms, 收敛时间2.057秒
2025-09-11 20:47:37,380 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:47:37,533 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    16384
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Disabled   Discarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:47:37,535 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 16384
2025-09-11 20:47:37,535 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:47:37,535 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 4000/6e:b3:08:fa:01:34
2025-09-11 20:47:37,535 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:47:37,994 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:47:37,994 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:47:37,995 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:47:37,996 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:47:37,996 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:47:37,996 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:47:38,283 - test_convergence - INFO - 链路故障收敛时间: 2.06秒
2025-09-11 20:47:38,284 - test_convergence - INFO - 新的Root Port: br4
2025-09-11 20:47:38,284 - test_convergence - INFO - 直接链路故障测试通过
2025-09-11 20:47:38,285 - RSTPTest - INFO - 测试完成: test_direct_link_failure (耗时: 39.29秒)
2025-09-11 20:47:38,285 - RSTPTest - INFO - ============================================================

2025-09-11 20:47:38,339 - RSTPTest - INFO - ============================================================
2025-09-11 20:47:38,340 - RSTPTest - INFO - 开始测试: test_multiple_link_failures
2025-09-11 20:47:38,340 - RSTPTest - INFO - ============================================================
2025-09-11 20:47:38,341 - test_convergence - INFO - 开始多重链路故障测试
2025-09-11 20:47:38,341 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 20:47:38,341 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 20:47:38,342 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 20:47:38,342 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 20:47:38,342 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 20:47:38,342 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 20:47:38,342 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 20:47:38,343 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 20:47:38,343 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 20:47:38,814 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 20:47:38,814 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 20:47:38,814 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 20:47:38,972 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 20:47:40,270 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 20:47:40,270 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 20:47:40,270 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 20:47:40,271 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 20:47:40,271 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 20:47:40,763 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 20:47:41,264 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 20:47:41,264 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 20:47:41,463 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 20:47:41,463 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 20:47:41,463 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 20:47:41,463 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 20:47:41,463 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 20:47:41,464 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 20:47:41,464 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 20:47:41,464 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 20:47:41,962 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 20:47:46,468 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 20:47:46,599 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 20:47:46,599 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 20:47:46,599 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 20:47:46,600 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 20:47:46,600 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 20:47:47,771 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 20:47:48,954 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 20:47:48,954 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 20:47:49,050 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 20:47:49,314 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 20:47:49,314 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 20:47:49,314 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 20:47:49,314 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 20:47:49,314 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 20:47:49,315 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 20:47:49,315 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 20:47:49,315 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 20:47:49,818 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 20:47:54,300 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 20:47:54,430 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 20:47:54,430 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 20:47:54,431 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 20:47:54,431 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 20:47:54,431 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 20:47:55,610 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 20:47:56,782 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 20:47:56,783 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 20:47:56,878 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 20:47:57,145 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 20:47:57,146 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 20:47:57,146 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 20:47:57,146 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 20:47:57,573 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:47:57,729 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Root       Forwarding 20000    128.1
  br4        Alternate  Discarding 20000    128.2


2025-09-11 20:47:57,730 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 20:47:57,730 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:47:57,731 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 20:47:57,731 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:47:58,195 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:47:58,195 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:47:58,197 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:47:58,197 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:47:58,197 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:47:58,197 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:47:59,193 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 2.047秒
2025-09-11 20:47:59,194 - test_convergence - INFO - 注入故障: eth0
2025-09-11 20:47:59,194 - ConvergenceMonitor - INFO - 开始故障收敛时间测量...
2025-09-11 20:47:59,194 - ConvergenceMonitor - INFO - 开始测量收敛时间...
2025-09-11 20:47:59,620 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:47:59,776 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Root       Forwarding 20000    128.1
  br4        Alternate  Discarding 20000    128.2


2025-09-11 20:47:59,778 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 20:47:59,778 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:47:59,778 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 20:47:59,778 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:48:00,247 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:48:00,247 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:48:00,249 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:48:00,249 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:48:00,249 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:48:00,249 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:48:01,233 - ConvergenceMonitor - INFO - 执行故障注入: <lambda>
2025-09-11 20:48:01,234 - FaultInjector_DUT - INFO - 断开链路: eth0
2025-09-11 20:48:01,462 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth0 (code=1)，将在逻辑上标记为已断开
2025-09-11 20:48:01,937 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:48:02,088 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Root       Forwarding 20000    128.1
  br4        Alternate  Discarding 20000    128.2


2025-09-11 20:48:02,089 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 20:48:02,089 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:48:02,089 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 20:48:02,089 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:48:02,550 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:48:02,550 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:48:02,552 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:48:02,552 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:48:02,552 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:48:02,552 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:48:03,960 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:48:04,118 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Root       Forwarding 20000    128.1
  br4        Alternate  Discarding 20000    128.2


2025-09-11 20:48:04,119 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 20:48:04,119 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:48:04,119 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 20:48:04,119 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:48:04,594 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:48:04,595 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:48:04,596 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:48:04,596 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:48:04,596 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:48:04,596 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:48:06,009 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:48:06,169 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Root       Forwarding 20000    128.1
  br4        Alternate  Discarding 20000    128.2


2025-09-11 20:48:06,170 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 20:48:06,170 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:48:06,170 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 20:48:06,170 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:48:06,652 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:48:06,652 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:48:06,653 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:48:06,654 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:48:06,654 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:48:06,654 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:48:07,655 - ConvergenceMonitor - WARNING - 未检测到明确的拓扑变化时刻，使用故障注入时间作为基准
2025-09-11 20:48:07,655 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 20:48:08,076 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:48:08,236 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Root       Forwarding 20000    128.1
  br4        Alternate  Discarding 20000    128.2


2025-09-11 20:48:08,237 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 20:48:08,238 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:48:08,238 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 20:48:08,238 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:48:08,711 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:48:08,711 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:48:08,712 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:48:08,712 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:48:08,712 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:48:08,713 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:48:09,698 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 8.465秒
2025-09-11 20:48:09,699 - ConvergenceMonitor - INFO - 故障收敛完整流程: 注入延迟0.0ms, 收敛时间8.465秒
2025-09-11 20:48:09,699 - test_convergence - INFO - eth0故障收敛时间: 8.465秒
2025-09-11 20:48:11,699 - test_convergence - INFO - 注入故障: eth2
2025-09-11 20:48:11,700 - ConvergenceMonitor - INFO - 开始故障收敛时间测量...
2025-09-11 20:48:11,700 - ConvergenceMonitor - INFO - 开始测量收敛时间...
2025-09-11 20:48:12,124 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:48:12,281 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Root       Forwarding 20000    128.1
  br4        Alternate  Discarding 20000    128.2


2025-09-11 20:48:12,282 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 20:48:12,282 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:48:12,282 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 20:48:12,282 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:48:12,750 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:48:12,750 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:48:12,751 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:48:12,752 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:48:12,752 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:48:12,752 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:48:13,737 - ConvergenceMonitor - INFO - 执行故障注入: <lambda>
2025-09-11 20:48:13,737 - FaultInjector_DUT - INFO - 断开链路: eth2
2025-09-11 20:48:13,957 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth2 (code=1)，将在逻辑上标记为已断开
2025-09-11 20:48:14,432 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:48:14,592 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Root       Forwarding 20000    128.1
  br4        Alternate  Discarding 20000    128.2


2025-09-11 20:48:14,594 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 20:48:14,594 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:48:14,594 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 20:48:14,594 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:48:15,066 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:48:15,066 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:48:15,067 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:48:15,067 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:48:15,067 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:48:15,068 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:48:16,505 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:48:16,663 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Root       Forwarding 20000    128.1
  br4        Alternate  Discarding 20000    128.2


2025-09-11 20:48:16,664 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 20:48:16,664 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:48:16,664 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 20:48:16,664 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:48:17,126 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:48:17,126 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:48:17,127 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:48:17,128 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:48:17,128 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:48:17,128 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:48:18,544 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:48:18,704 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Root       Forwarding 20000    128.1
  br4        Alternate  Discarding 20000    128.2


2025-09-11 20:48:18,705 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 20:48:18,706 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:48:18,706 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 20:48:18,706 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:48:19,182 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:48:19,183 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:48:19,184 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:48:19,184 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:48:19,184 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:48:19,184 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:48:20,184 - ConvergenceMonitor - WARNING - 未检测到明确的拓扑变化时刻，使用故障注入时间作为基准
2025-09-11 20:48:20,184 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 20:48:20,608 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:48:20,764 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Root       Forwarding 20000    128.1
  br4        Alternate  Discarding 20000    128.2


2025-09-11 20:48:20,766 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 20:48:20,766 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:48:20,766 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 20:48:20,766 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:48:21,234 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:48:21,234 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:48:21,235 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:48:21,236 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:48:21,236 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:48:21,236 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:48:22,209 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 8.472秒
2025-09-11 20:48:22,210 - ConvergenceMonitor - INFO - 故障收敛完整流程: 注入延迟0.0ms, 收敛时间8.472秒
2025-09-11 20:48:22,210 - test_convergence - INFO - eth2故障收敛时间: 8.472秒
2025-09-11 20:48:24,210 - FaultInjector_DUT - INFO - 恢复链路: eth0
2025-09-11 20:48:24,433 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth0 (code=1)，将在逻辑上标记为已恢复
2025-09-11 20:48:24,433 - FaultInjector_DUT - INFO - 恢复链路: eth2
2025-09-11 20:48:24,705 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth2 (code=1)，将在逻辑上标记为已恢复
2025-09-11 20:48:24,706 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 20:48:25,172 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:48:25,328 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Root       Forwarding 20000    128.1
  br4        Alternate  Discarding 20000    128.2


2025-09-11 20:48:25,329 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 20:48:25,329 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:48:25,329 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 20:48:25,330 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:48:25,786 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:48:25,787 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:48:25,788 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:48:25,788 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:48:25,788 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:48:25,788 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:48:26,775 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 2.069秒
2025-09-11 20:48:27,202 - RSTPTest - INFO - 测试完成: test_multiple_link_failures (耗时: 48.86秒)
2025-09-11 20:48:27,203 - RSTPTest - INFO - ============================================================

2025-09-11 20:48:27,205 - RSTPTest - INFO - ============================================================
2025-09-11 20:48:27,205 - RSTPTest - INFO - 开始测试: test_convergence_with_traffic
2025-09-11 20:48:27,206 - RSTPTest - INFO - ============================================================
2025-09-11 20:48:27,206 - test_convergence - INFO - 开始带流量的收敛测试
2025-09-11 20:48:27,206 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 20:48:27,207 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 20:48:27,207 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 20:48:27,207 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 20:48:27,207 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 20:48:27,207 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 20:48:27,207 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 20:48:27,208 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 20:48:27,208 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 20:48:27,713 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 20:48:27,713 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 20:48:27,713 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 20:48:27,873 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 20:48:28,969 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 20:48:28,969 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 20:48:28,970 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 20:48:28,970 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 20:48:28,970 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 20:48:29,455 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 20:48:29,934 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 20:48:29,935 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 20:48:30,126 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 20:48:30,126 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 20:48:30,126 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 20:48:30,127 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 20:48:30,127 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 20:48:30,127 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 20:48:30,127 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 20:48:30,127 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 20:48:30,634 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 20:48:35,101 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 20:48:35,235 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 20:48:35,236 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 20:48:35,236 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 20:48:35,236 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 20:48:35,236 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 20:48:36,421 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 20:48:37,605 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 20:48:37,605 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 20:48:37,702 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 20:48:37,970 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 20:48:37,971 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 20:48:37,971 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 20:48:37,971 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 20:48:37,971 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 20:48:37,971 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 20:48:37,972 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 20:48:37,972 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 20:48:38,470 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 20:48:42,931 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 20:48:43,055 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 20:48:43,056 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 20:48:43,056 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 20:48:43,056 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 20:48:43,056 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 20:48:44,343 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 20:48:45,537 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 20:48:45,537 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 20:48:45,631 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 20:48:45,898 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 20:48:45,898 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 20:48:45,898 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 20:48:52,152 - TrafficGenerator - INFO - 启动iperf3服务器: 192.168.184.131:5201
2025-09-11 20:48:54,324 - TrafficGenerator - ERROR - iperf3服务器启动失败
2025-09-11 20:48:57,153 - TrafficGenerator - INFO - 启动iperf3客户端: -> 192.168.184.131:5201
2025-09-11 20:48:57,153 - TrafficGenerator - INFO - iperf3客户端已启动 (udp, 100M)
2025-09-11 20:49:02,155 - FaultInjector_DUT - INFO - 断开链路: eth0
2025-09-11 20:49:02,381 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth0 (code=1)，将在逻辑上标记为已断开
2025-09-11 20:49:12,382 - test_convergence - INFO - 丢包数: 0
2025-09-11 20:49:12,382 - test_convergence - INFO - 估计中断时间: 0.000秒
2025-09-11 20:49:12,383 - TrafficGenerator - INFO - 停止流量生成
2025-09-11 20:49:14,537 - test_convergence - INFO - 带流量的收敛测试通过
2025-09-11 20:49:14,538 - RSTPTest - INFO - 测试完成: test_convergence_with_traffic (耗时: 47.33秒)
2025-09-11 20:49:14,538 - RSTPTest - INFO - ============================================================

2025-09-11 20:49:14,539 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-11 20:49:14,539 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-11 20:49:14,539 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-11 20:49:14,675 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-11 20:49:14,676 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-11 20:49:14,795 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-11 20:49:14,795 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-11 20:49:14,929 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-11 20:49:14,930 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-11 20:49:14,930 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 20:49:14,930 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 20:49:14,931 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-11 20:49:14,931 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-11 20:49:14,986 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-11 20:49:14,986 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-11 20:49:15,151 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-11 20:49:15,151 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-11 20:49:15,152 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-11 20:49:15,152 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-11 20:49:15,152 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-11 20:49:15,206 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-11 20:49:15,207 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-11 20:49:15,369 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-11 20:49:15,369 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-11 20:49:15,370 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-11 20:49:15,370 - RSTPTest - INFO - ============================================================
2025-09-11 20:49:15,370 - RSTPTest - INFO - 开始测试: test_backup_port_simulation
2025-09-11 20:49:15,370 - RSTPTest - INFO - ============================================================
2025-09-11 20:49:15,371 - test_enhanced_rstp_coverage - INFO - 开始备份端口模拟测试
2025-09-11 20:49:15,371 - test_enhanced_rstp_coverage - INFO - 创建模拟共享网段拓扑
2025-09-11 20:49:16,263 - test_enhanced_rstp_coverage - INFO - ✓ 创建连接: SE_ETH2:dut_port1 <-> shared_segment:shared_port1
2025-09-11 20:49:16,919 - test_enhanced_rstp_coverage - INFO - ✓ 创建连接: SE_ETH2:dut_port2 <-> shared_segment:shared_port2
2025-09-11 20:49:18,110 - test_enhanced_rstp_coverage - INFO - ✓ 创建远程交换机: remote_switch
2025-09-11 20:49:18,110 - test_enhanced_rstp_coverage - INFO - 等待RSTP收敛...
2025-09-11 20:49:33,527 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:49:33,680 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   22:ab:49:51:79:40
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       dut_port1
  root-path-cost  2000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  dut_port2  Alternate  Discarding 2000     128.4
  br3        Designated Forwarding 20000    128.1
  br4        Designated Forwarding 20000    128.2
  dut_port1  Root       Forwarding 2000     128.3


2025-09-11 20:49:33,682 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 20:49:33,682 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 22:ab:49:51:79:40
2025-09-11 20:49:33,682 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/22:ab:49:51:79:40
2025-09-11 20:49:33,682 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:49:34,144 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:49:34,144 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 3(dut_port1): addr:7e:a0:93:6b:f7:82
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 4(dut_port2): addr:e2:48:b5:df:0f:04
     config:     0
     state:      0
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:49:34,146 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:49:34,147 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:49:34,147 - RSTPAnalyzer_DUT - INFO - 找到端口: dut_port1 (从行:  3(dut_port1): addr:7e:a0:93:6b:f7:82)
2025-09-11 20:49:34,147 - RSTPAnalyzer_DUT - INFO - 找到端口: dut_port2 (从行:  4(dut_port2): addr:e2:48:b5:df:0f:04)
2025-09-11 20:49:34,147 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:49:34,147 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'dut_port1', 'dut_port2', 'SE_ETH2']
2025-09-11 20:49:34,629 - test_enhanced_rstp_coverage - INFO - DUT桥信息: BridgeInfo(bridge_id='1000/22:ab:49:51:79:40', root_id='unknown', root_port='br3', root_path_cost=0, protocol_version='rstp', hello_time=2, forward_delay=15, max_age=20, topology_changes=0, ports={'br3': PortInfo(name='br3', role=<PortRole.ROOT: 'root'>, state=<PortState.FORWARDING: 'forwarding'>, path_cost=0, designated_bridge='', designated_port=''), 'br4': PortInfo(name='br4', role=<PortRole.ALTERNATE: 'alternate'>, state=<PortState.DISCARDING: 'discarding'>, path_cost=0, designated_bridge='', designated_port=''), 'dut_port1': PortInfo(name='dut_port1', role=<PortRole.DESIGNATED: 'designated'>, state=<PortState.FORWARDING: 'forwarding'>, path_cost=0, designated_bridge='', designated_port=''), 'dut_port2': PortInfo(name='dut_port2', role=<PortRole.DESIGNATED: 'designated'>, state=<PortState.FORWARDING: 'forwarding'>, path_cost=0, designated_bridge='', designated_port=''), 'SE_ETH2': PortInfo(name='SE_ETH2', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')})
2025-09-11 20:49:34,630 - test_enhanced_rstp_coverage - INFO - 找到 2 个连接到共享网段的端口
2025-09-11 20:49:34,630 - test_enhanced_rstp_coverage - INFO - Designated端口: ['dut_port1', 'dut_port2']
2025-09-11 20:49:34,631 - test_enhanced_rstp_coverage - INFO - Backup端口: []
2025-09-11 20:49:34,631 - test_enhanced_rstp_coverage - WARNING - 未检测到Backup Port或阻塞端口，可能是OVS实现限制
2025-09-11 20:49:34,631 - test_enhanced_rstp_coverage - INFO - 测试备份端口故障切换
2025-09-11 20:49:34,631 - test_enhanced_rstp_coverage - INFO - 清理测试环境
2025-09-11 20:49:35,607 - test_enhanced_rstp_coverage - INFO - ✓ 备份端口模拟测试完成
2025-09-11 20:49:35,608 - RSTPTest - INFO - 测试完成: test_backup_port_simulation (耗时: 20.24秒)
2025-09-11 20:49:35,609 - RSTPTest - INFO - ============================================================

2025-09-11 20:49:35,610 - RSTPTest - INFO - ============================================================
2025-09-11 20:49:35,611 - RSTPTest - INFO - 开始测试: test_comprehensive_port_state_transitions
2025-09-11 20:49:35,611 - RSTPTest - INFO - ============================================================
2025-09-11 20:49:35,612 - test_enhanced_rstp_coverage - INFO - 开始全面端口状态转换测试
2025-09-11 20:49:35,613 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 20:49:35,613 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 20:49:35,613 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 20:49:35,613 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 20:49:35,613 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 20:49:35,614 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 20:49:35,614 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 20:49:35,614 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 20:49:35,614 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 20:49:36,144 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 20:49:36,144 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 20:49:36,145 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 20:49:36,301 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 20:49:37,396 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 20:49:37,397 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 20:49:37,397 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 20:49:37,397 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 20:49:37,397 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 20:49:37,882 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 20:49:38,365 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 20:49:38,366 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 20:49:38,552 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 20:49:38,553 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 20:49:38,553 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 20:49:38,553 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 20:49:38,553 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 20:49:38,554 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 20:49:38,554 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 20:49:38,554 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 20:49:39,049 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 20:49:43,561 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 20:49:43,691 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 20:49:43,691 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 20:49:43,692 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 20:49:43,692 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 20:49:43,692 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 20:49:44,878 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 20:49:46,079 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 20:49:46,079 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 20:49:46,175 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 20:49:46,437 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 20:49:46,437 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 20:49:46,437 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 20:49:46,438 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 20:49:46,438 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 20:49:46,438 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 20:49:46,438 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 20:49:46,438 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 20:50:16,790 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 20:51:50,824 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 20:52:00,902 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 20:52:00,902 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 20:52:00,902 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 20:52:00,902 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 20:52:00,903 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 20:53:06,441 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 20:54:03,015 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 20:54:03,016 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 20:54:03,111 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 20:54:08,391 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 20:54:08,391 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 20:54:08,391 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 20:54:08,392 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 4096 (方法: mstpd)
2025-09-11 20:54:08,392 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级4096 -> mstpd优先级1)
2025-09-11 20:54:08,519 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 20:54:08,519 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 8192 (方法: ovs)
2025-09-11 20:54:08,520 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 20:54:08,632 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 20:54:08,799 - test_enhanced_rstp_coverage - INFO - 等待初始收敛...
2025-09-11 20:54:08,799 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 20:54:09,236 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:54:09,395 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Alternate  Discarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:54:09,396 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 20:54:09,396 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:54:09,396 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 20:54:09,396 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:54:09,848 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:54:09,848 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:54:09,849 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:54:09,850 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:54:09,850 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:54:09,850 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:54:10,137 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.338秒
2025-09-11 20:54:10,602 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:54:10,755 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Designated Forwarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:54:10,756 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 20:54:10,756 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:54:10,756 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 20:54:10,757 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:54:11,232 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:54:11,233 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:54:11,234 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:54:11,234 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:54:11,235 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:54:11,235 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:54:11,521 - test_enhanced_rstp_coverage - INFO - === 测试场景1: 端口重启状态转换 ===
2025-09-11 20:54:11,522 - test_enhanced_rstp_coverage - INFO - 使用端口br3进行重启测试
2025-09-11 20:54:11,983 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:54:12,279 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Designated Forwarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:54:12,281 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 20:54:12,281 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:54:12,281 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 20:54:12,281 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:54:12,868 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:54:12,868 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:54:12,869 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:54:12,870 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:54:12,870 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:54:12,870 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:54:25,754 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:54:25,903 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Disabled   Discarding 2000     128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:54:25,904 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 20:54:25,904 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:54:25,904 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 20:54:25,905 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:54:26,364 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:54:26,365 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:54:26,366 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:54:26,366 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:54:26,366 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:54:26,367 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:54:26,652 - test_enhanced_rstp_coverage - INFO - 端口br3状态转换: disabled
2025-09-11 20:54:29,070 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:54:29,223 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Disabled   Discarding 2000     128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:54:29,224 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 20:54:29,224 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:54:29,224 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 20:54:29,224 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:54:29,708 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:54:29,708 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:54:29,709 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:54:29,709 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:54:29,709 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:54:29,710 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:54:30,005 - test_enhanced_rstp_coverage - INFO - 端口br3状态转换: forwarding
2025-09-11 20:54:32,418 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:54:32,567 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Designated Forwarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:54:32,568 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 20:54:32,568 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:54:32,568 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 20:54:32,568 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:54:33,027 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:54:33,027 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:54:33,029 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:54:33,029 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:54:33,029 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:54:33,029 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:54:35,733 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:54:35,886 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Designated Forwarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:54:35,887 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 20:54:35,887 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:54:35,887 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 20:54:35,888 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:54:36,351 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:54:36,351 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:54:36,352 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:54:36,353 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:54:36,353 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:54:36,353 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:54:39,045 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:54:39,198 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Designated Forwarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:54:39,199 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 20:54:39,199 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:54:39,200 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 20:54:39,200 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:54:39,663 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:54:39,664 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:54:39,665 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:54:39,665 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:54:39,665 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:54:39,665 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:54:41,953 - test_enhanced_rstp_coverage - INFO - 端口重启状态转换: ['forwarding', 'disabled', 'forwarding']
2025-09-11 20:54:41,953 - test_enhanced_rstp_coverage - INFO - 重启场景状态转换验证
2025-09-11 20:54:41,953 - test_enhanced_rstp_coverage - INFO - ✓ 重启: 状态转换序列正常
2025-09-11 20:54:41,954 - test_enhanced_rstp_coverage - INFO - === 测试场景2: 强制Learning状态 ===
2025-09-11 20:54:42,008 - test_enhanced_rstp_coverage - INFO - 原始Forward Delay: 4
2025-09-11 20:54:42,570 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:54:42,727 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Designated Forwarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:54:42,728 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 20:54:42,728 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:54:42,728 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 20:54:42,728 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:54:43,192 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:54:43,192 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:54:43,193 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:54:43,193 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:54:43,194 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:54:43,194 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:54:56,090 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:54:56,242 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Disabled   Discarding 2000     128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:54:56,243 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 20:54:56,243 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:54:56,244 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 20:54:56,244 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:54:56,699 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:54:56,699 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:54:56,701 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:54:56,701 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:54:56,701 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:54:56,702 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:54:56,988 - test_enhanced_rstp_coverage - INFO - 端口br3状态转换: disabled
2025-09-11 20:54:59,397 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:54:59,550 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Designated Discarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:54:59,551 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 20:54:59,551 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:54:59,551 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 20:54:59,551 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:55:00,011 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:55:00,012 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:55:00,013 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:55:00,013 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:55:00,013 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:55:00,013 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:55:00,304 - test_enhanced_rstp_coverage - INFO - 端口br3状态转换: forwarding
2025-09-11 20:55:02,718 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:55:02,874 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Designated Forwarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:55:02,875 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 20:55:02,875 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:55:02,875 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 20:55:02,876 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:55:03,340 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:55:03,340 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:55:03,341 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:55:03,341 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:55:03,341 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:55:03,342 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:55:06,046 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:55:06,198 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Designated Forwarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:55:06,199 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 20:55:06,199 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:55:06,199 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 20:55:06,199 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:55:06,659 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:55:06,659 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:55:06,660 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:55:06,660 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:55:06,661 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:55:06,661 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:55:08,948 - test_enhanced_rstp_coverage - INFO - Learning状态转换: ['forwarding', 'disabled', 'forwarding']
2025-09-11 20:55:08,949 - test_enhanced_rstp_coverage - WARNING - 未观察到Learning状态，可能是快速转换
2025-09-11 20:55:09,019 - test_enhanced_rstp_coverage - INFO - === 测试场景3: 拓扑变更状态转换 ===
2025-09-11 20:55:09,461 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:55:09,614 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Designated Forwarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:55:09,615 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 20:55:09,615 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:55:09,615 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 20:55:09,616 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:55:10,079 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:55:10,079 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:55:10,080 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:55:10,080 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:55:10,080 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:55:10,080 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:55:10,368 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-11 20:55:10,368 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级12288 -> mstpd优先级3)
2025-09-11 20:55:10,510 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 20:55:10,929 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:55:11,081 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Designated Forwarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:55:11,082 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 20:55:11,083 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:55:11,083 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 20:55:11,083 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:55:11,543 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:55:11,543 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:55:11,544 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:55:11,545 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:55:11,545 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:55:11,545 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:55:14,273 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:55:14,426 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Designated Forwarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:55:14,427 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 20:55:14,427 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:55:14,428 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 20:55:14,428 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:55:14,886 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:55:14,887 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:55:14,888 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:55:14,888 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:55:14,888 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:55:14,889 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:55:17,815 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:55:18,055 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Designated Forwarding 20000    128.1
  br4        Designated Discarding 20000    128.2


2025-09-11 20:55:18,056 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-11 20:55:18,056 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 20:55:18,056 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-11 20:55:18,056 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-11 20:55:18,514 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:55:18,515 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:55:18,516 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:55:18,516 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:55:18,516 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:55:18,516 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:55:21,213 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:55:21,365 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Designated Forwarding 20000    128.1
  br4        Designated Forwarding 20000    128.2


2025-09-11 20:55:21,366 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-11 20:55:21,367 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 20:55:21,367 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-11 20:55:21,367 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-11 20:55:21,832 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:55:21,832 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:55:21,834 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:55:21,834 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:55:21,834 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:55:21,834 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:55:24,529 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:55:24,681 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Designated Forwarding 20000    128.1
  br4        Designated Forwarding 20000    128.2


2025-09-11 20:55:24,682 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-11 20:55:24,683 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 20:55:24,683 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-11 20:55:24,683 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-11 20:55:25,139 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:55:25,139 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:55:25,140 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:55:25,140 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:55:25,141 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:55:25,141 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:55:27,845 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:55:27,998 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Designated Forwarding 20000    128.1
  br4        Designated Forwarding 20000    128.2


2025-09-11 20:55:27,999 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-11 20:55:27,999 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 20:55:27,999 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-11 20:55:27,999 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-11 20:55:28,463 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:55:28,463 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:55:28,464 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:55:28,465 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:55:28,465 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:55:28,465 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:55:30,756 - test_enhanced_rstp_coverage - INFO - 拓扑变更状态转换: ['forwarding']
2025-09-11 20:55:31,170 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:55:31,322 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Designated Forwarding 20000    128.1
  br4        Designated Forwarding 20000    128.2


2025-09-11 20:55:31,323 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 8192
2025-09-11 20:55:31,323 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 20:55:31,323 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 2000/90:12:10:b5:7d:f7
2025-09-11 20:55:31,323 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 2000/90:12:10:b5:7d:f7
2025-09-11 20:55:31,804 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:55:31,805 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:55:31,806 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:55:31,806 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:55:31,806 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:55:31,806 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:55:32,100 - test_enhanced_rstp_coverage - INFO - ✓ 拓扑变更后端口br3最终状态: forwarding
2025-09-11 20:55:32,100 - test_enhanced_rstp_coverage - INFO - ✓ 全面端口状态转换测试完成
2025-09-11 20:55:32,101 - RSTPTest - INFO - 测试完成: test_comprehensive_port_state_transitions (耗时: 356.49秒)
2025-09-11 20:55:32,101 - RSTPTest - INFO - ============================================================

2025-09-11 20:55:32,103 - RSTPTest - INFO - ============================================================
2025-09-11 20:55:32,103 - RSTPTest - INFO - 开始测试: test_detailed_bpdu_analysis
2025-09-11 20:55:32,103 - RSTPTest - INFO - ============================================================
2025-09-11 20:55:32,104 - test_enhanced_rstp_coverage - INFO - 开始详细BPDU分析测试
2025-09-11 20:55:32,104 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 20:55:32,104 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 20:55:32,104 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 20:55:32,105 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 20:55:32,105 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 20:55:32,105 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 20:55:32,105 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 20:55:32,105 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 20:55:32,105 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 20:55:32,631 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 20:55:32,631 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 20:55:32,631 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 20:55:32,787 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 20:55:33,870 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 20:55:33,870 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 20:55:33,870 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 20:55:33,870 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 20:55:33,870 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 20:55:34,347 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 20:55:34,835 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 20:55:34,835 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 20:55:35,031 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 20:55:35,031 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 20:55:35,032 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 20:55:35,032 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 20:55:35,032 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 20:55:35,032 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 20:55:35,033 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 20:55:35,033 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 20:55:35,547 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 20:55:40,053 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 20:55:40,183 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 20:55:40,184 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 20:55:40,184 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 20:55:40,184 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 20:55:40,184 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 20:55:41,367 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 20:55:42,554 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 20:55:42,555 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 20:55:42,650 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 20:55:42,907 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 20:55:42,907 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 20:55:42,907 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 20:55:42,908 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 20:55:42,908 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 20:55:42,908 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 20:55:42,908 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 20:55:42,908 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 20:55:57,537 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 20:56:02,036 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 20:56:02,171 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 20:56:02,171 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 20:56:02,172 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 20:56:02,172 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 20:56:02,172 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 20:56:03,349 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 20:56:04,541 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 20:56:04,541 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 20:56:04,636 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 20:56:04,899 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 20:56:04,900 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 20:56:04,900 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 20:56:04,900 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 4096 (方法: mstpd)
2025-09-11 20:56:04,900 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级4096 -> mstpd优先级1)
2025-09-11 20:56:05,034 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 20:56:05,034 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 8192 (方法: ovs)
2025-09-11 20:56:05,034 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 20:56:05,151 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 20:56:05,321 - NetworkTopology_TestNode2 - INFO - TestNode2: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-11 20:56:05,321 - NetworkTopology_TestNode2 - INFO - TestNode2: 执行mstpd设置优先级命令 (标准优先级12288 -> mstpd优先级3)
2025-09-11 20:56:05,446 - NetworkTopology_TestNode2 - INFO - TestNode2: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 20:56:05,447 - test_enhanced_rstp_coverage - INFO - 等待RSTP收敛...
2025-09-11 20:56:05,447 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 20:56:05,864 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:56:06,016 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Designated Forwarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:56:06,017 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 20:56:06,017 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:56:06,017 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 20:56:06,017 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:56:06,474 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:56:06,475 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:56:06,476 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:56:06,476 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:56:06,476 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:56:06,476 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:56:06,763 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.316秒
2025-09-11 20:56:07,209 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 20:56:07,361 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Designated Forwarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 20:56:07,362 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 20:56:07,362 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 20:56:07,362 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 20:56:07,362 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 20:56:07,822 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 20:56:07,823 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 20:56:07,824 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 20:56:07,824 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 20:56:07,824 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 20:56:07,824 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 20:56:08,112 - test_enhanced_rstp_coverage - INFO - Hello Time: 2秒
2025-09-11 20:56:08,112 - test_enhanced_rstp_coverage - INFO - === 测试1: 验证分布式BPDU生成 ===
2025-09-11 20:56:08,113 - test_enhanced_rstp_coverage - INFO - 在端口br3上捕获BPDU
2025-09-11 20:56:08,113 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br3, 数量: 10)
2025-09-11 20:56:20,256 - RSTPAnalyzer_DUT - INFO - 捕获到 5 个BPDU包
2025-09-11 20:56:20,256 - test_enhanced_rstp_coverage - INFO - 端口br3捕获到5个BPDU
2025-09-11 20:56:20,256 - test_enhanced_rstp_coverage - INFO - 在端口br4上捕获BPDU
2025-09-11 20:56:20,256 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br4, 数量: 10)
2025-09-11 20:56:32,415 - RSTPAnalyzer_DUT - INFO - 捕获到 6 个BPDU包
2025-09-11 20:56:32,416 - test_enhanced_rstp_coverage - INFO - 端口br4捕获到6个BPDU
2025-09-11 20:56:32,416 - test_enhanced_rstp_coverage - INFO - 总共捕获11个BPDU，来自0个不同源
2025-09-11 20:56:32,416 - test_enhanced_rstp_coverage - WARNING - 只检测到一个BPDU源，可能是拓扑限制
2025-09-11 20:56:32,416 - test_enhanced_rstp_coverage - INFO - === 测试2: 验证BPDU保活机制 ===
2025-09-11 20:56:32,416 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br3, 数量: 10)
2025-09-11 20:56:38,547 - RSTPAnalyzer_DUT - INFO - 捕获到 2 个BPDU包
2025-09-11 20:56:38,548 - test_enhanced_rstp_coverage - INFO - 正常情况下6秒内收到2个BPDU
2025-09-11 20:56:38,548 - test_enhanced_rstp_coverage - INFO - 模拟邻居故障，断开端口br3
2025-09-11 20:57:00,717 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br3, 数量: 10)
2025-09-11 20:57:04,827 - RSTPAnalyzer_DUT - INFO - 捕获到 2 个BPDU包
2025-09-11 20:57:04,827 - test_enhanced_rstp_coverage - INFO - 恢复后4秒内收到2个BPDU
2025-09-11 20:57:04,827 - test_enhanced_rstp_coverage - INFO - ✓ BPDU保活机制验证成功
2025-09-11 20:57:04,827 - test_enhanced_rstp_coverage - INFO - === 测试3: BPDU内容验证 ===
2025-09-11 20:57:04,827 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br3, 数量: 3)
2025-09-11 20:57:10,067 - RSTPAnalyzer_DUT - INFO - 捕获到 3 个BPDU包
2025-09-11 20:57:10,067 - test_enhanced_rstp_coverage - INFO - BPDU 1 分析:
2025-09-11 20:57:10,067 - test_enhanced_rstp_coverage - WARNING -   缺少字段: bridge_id
2025-09-11 20:57:10,068 - test_enhanced_rstp_coverage - WARNING -   缺少字段: root_id
2025-09-11 20:57:10,068 - test_enhanced_rstp_coverage - WARNING -   缺少字段: root_path_cost
2025-09-11 20:57:10,068 - test_enhanced_rstp_coverage - WARNING -   未检测到RSTP特有字段
2025-09-11 20:57:10,068 - test_enhanced_rstp_coverage - INFO - BPDU 2 分析:
2025-09-11 20:57:10,068 - test_enhanced_rstp_coverage - WARNING -   缺少字段: bridge_id
2025-09-11 20:57:10,068 - test_enhanced_rstp_coverage - WARNING -   缺少字段: root_id
2025-09-11 20:57:10,069 - test_enhanced_rstp_coverage - WARNING -   缺少字段: root_path_cost
2025-09-11 20:57:10,069 - test_enhanced_rstp_coverage - WARNING -   未检测到RSTP特有字段
2025-09-11 20:57:10,069 - test_enhanced_rstp_coverage - INFO - BPDU 3 分析:
2025-09-11 20:57:10,069 - test_enhanced_rstp_coverage - WARNING -   缺少字段: bridge_id
2025-09-11 20:57:10,069 - test_enhanced_rstp_coverage - WARNING -   缺少字段: root_id
2025-09-11 20:57:10,069 - test_enhanced_rstp_coverage - WARNING -   缺少字段: root_path_cost
2025-09-11 20:57:10,070 - test_enhanced_rstp_coverage - WARNING -   未检测到RSTP特有字段
2025-09-11 20:57:10,070 - test_enhanced_rstp_coverage - INFO - ✓ 详细BPDU分析测试完成
2025-09-11 20:57:10,070 - RSTPTest - INFO - 测试完成: test_detailed_bpdu_analysis (耗时: 97.97秒)
2025-09-11 20:57:10,071 - RSTPTest - INFO - ============================================================

2025-09-11 20:57:10,072 - RSTPTest - INFO - ============================================================
2025-09-11 20:57:10,072 - RSTPTest - INFO - 开始测试: test_topology_change_comprehensive
2025-09-11 20:57:10,072 - RSTPTest - INFO - ============================================================
2025-09-11 20:57:10,073 - test_enhanced_rstp_coverage - INFO - 开始全面拓扑变更测试
2025-09-11 20:57:10,073 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 20:57:10,073 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 20:57:10,073 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 20:57:10,073 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 20:57:10,074 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 20:57:10,074 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 20:57:10,074 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 20:57:10,074 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 20:57:10,074 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 20:57:10,596 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 20:57:10,597 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 20:57:10,597 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 20:57:10,753 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 20:57:11,841 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 20:57:11,841 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 20:57:11,842 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 20:57:11,842 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 20:57:11,842 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 20:57:12,321 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 20:57:12,801 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 20:57:12,802 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 20:57:12,994 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 20:57:12,994 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 20:57:12,994 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 20:57:12,994 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 20:57:12,994 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 20:57:12,995 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 20:57:12,995 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 20:57:12,995 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 20:57:13,506 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 20:57:18,012 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 20:57:18,142 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 20:57:18,142 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 20:57:18,142 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 20:57:18,142 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 20:57:18,142 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 20:57:19,344 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 20:57:20,550 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 20:57:20,550 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 20:57:20,645 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 20:57:20,907 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 20:57:20,907 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 20:57:20,907 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 20:57:20,907 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 20:57:20,907 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 20:57:20,908 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 20:57:20,908 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 20:57:20,908 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 20:57:51,244 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 20:59:25,281 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 20:59:35,360 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 20:59:35,360 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 20:59:35,361 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 20:59:35,361 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 20:59:35,361 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 21:00:44,175 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 21:01:38,687 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 21:01:38,688 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 21:01:38,784 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 21:01:47,085 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 21:01:47,086 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 21:01:47,086 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 21:01:47,087 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 4096 (方法: mstpd)
2025-09-11 21:01:47,087 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级4096 -> mstpd优先级1)
2025-09-11 21:01:47,215 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 21:01:47,215 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 8192 (方法: ovs)
2025-09-11 21:01:47,216 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 21:01:47,328 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 21:01:47,500 - test_enhanced_rstp_coverage - INFO - 等待初始收敛...
2025-09-11 21:01:47,500 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 21:01:47,951 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:01:48,103 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Designated Forwarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 21:01:48,104 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 21:01:48,105 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:01:48,105 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 21:01:48,105 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:01:48,576 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:01:48,576 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:01:48,577 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:01:48,577 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:01:48,578 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:01:48,578 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:01:48,885 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.385秒
2025-09-11 21:01:49,355 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:01:49,511 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Designated Forwarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 21:01:49,512 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 21:01:49,512 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:01:49,512 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 21:01:49,513 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:01:49,981 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:01:49,982 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:01:49,983 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:01:49,983 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:01:49,983 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:01:49,983 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:01:50,859 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:01:51,172 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Designated Forwarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 21:01:51,173 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 21:01:51,173 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:01:51,174 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 21:01:51,174 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:01:51,648 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:01:51,649 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:01:51,650 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:01:51,650 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:01:51,650 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:01:51,650 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:01:51,941 - RSTPAnalyzer_DUT - INFO - Root ID为unknown，判定为非根桥
2025-09-11 21:01:51,942 - test_enhanced_rstp_coverage - INFO - 初始状态: DUT是根桥=False
2025-09-11 21:01:51,942 - test_enhanced_rstp_coverage - INFO - === 测试场景1: 根桥变更 ===
2025-09-11 21:01:51,942 - test_enhanced_rstp_coverage - INFO - 将DUT设置为根桥
2025-09-11 21:01:51,942 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 1024 (方法: ovs)
2025-09-11 21:01:51,943 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 21:01:52,112 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 21:01:57,674 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:01:57,827 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Designated Forwarding 20000    128.1
  br4        Designated Forwarding 20000    128.2


2025-09-11 21:01:57,828 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 0
2025-09-11 21:01:57,828 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 21:01:57,829 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 0000/90:12:10:b5:7d:f7
2025-09-11 21:01:57,829 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 0000/90:12:10:b5:7d:f7
2025-09-11 21:01:58,295 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:01:58,296 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:01:58,297 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:01:58,297 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:01:58,297 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:01:58,298 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:01:59,087 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:01:59,250 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Designated Forwarding 20000    128.1
  br4        Designated Forwarding 20000    128.2


2025-09-11 21:01:59,251 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 0
2025-09-11 21:01:59,251 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 21:01:59,252 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 0000/90:12:10:b5:7d:f7
2025-09-11 21:01:59,252 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 0000/90:12:10:b5:7d:f7
2025-09-11 21:01:59,729 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:01:59,730 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:01:59,731 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:01:59,731 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:01:59,731 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:01:59,731 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:02:00,029 - RSTPAnalyzer_DUT - INFO - 根桥检查: bridge_id='0000/90:12:10:b5:7d:f7', root_id='0000/90:12:10:b5:7d:f7', is_root=True
2025-09-11 21:02:00,030 - test_enhanced_rstp_coverage - INFO - ✓ 检测到根桥变更
2025-09-11 21:02:00,030 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br3, 数量: 5)
2025-09-11 21:02:10,178 - RSTPAnalyzer_DUT - INFO - 捕获到 4 个BPDU包
2025-09-11 21:02:10,178 - test_enhanced_rstp_coverage - INFO - === 测试场景2: 端口故障恢复 ===
2025-09-11 21:02:10,643 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:02:10,795 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Designated Forwarding 20000    128.1
  br4        Designated Forwarding 20000    128.2


2025-09-11 21:02:10,796 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 0
2025-09-11 21:02:10,796 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 21:02:10,796 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 0000/90:12:10:b5:7d:f7
2025-09-11 21:02:10,796 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 0000/90:12:10:b5:7d:f7
2025-09-11 21:02:11,253 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:02:11,253 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:02:11,254 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:02:11,255 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:02:11,255 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:02:11,255 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:02:11,541 - test_enhanced_rstp_coverage - INFO - 测试端口br3故障恢复
2025-09-11 21:02:32,046 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:02:32,198 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Disabled   Discarding 20000    128.1
  br4        Designated Forwarding 20000    128.2


2025-09-11 21:02:32,199 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 0
2025-09-11 21:02:32,199 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 21:02:32,199 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 0000/90:12:10:b5:7d:f7
2025-09-11 21:02:32,200 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 0000/90:12:10:b5:7d:f7
2025-09-11 21:02:32,669 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:02:32,669 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:02:32,670 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:02:32,670 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:02:32,670 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:02:32,671 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:02:32,960 - test_enhanced_rstp_coverage - INFO - ✓ 端口故障引起拓扑变更
2025-09-11 21:02:43,490 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:02:43,645 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Designated Forwarding 20000    128.1
  br4        Designated Forwarding 20000    128.2


2025-09-11 21:02:43,646 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 0
2025-09-11 21:02:43,647 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 21:02:43,647 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 0000/90:12:10:b5:7d:f7
2025-09-11 21:02:43,647 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 0000/90:12:10:b5:7d:f7
2025-09-11 21:02:44,115 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:02:44,115 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:02:44,116 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:02:44,117 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:02:44,117 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:02:44,117 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:02:44,405 - test_enhanced_rstp_coverage - INFO - ✓ 端口br3成功恢复，状态: forwarding
2025-09-11 21:02:44,405 - test_enhanced_rstp_coverage - INFO - === 测试场景3: 端口优先级变更 ===
2025-09-11 21:02:44,870 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:02:45,018 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Designated Forwarding 20000    128.1
  br4        Designated Forwarding 20000    128.2


2025-09-11 21:02:45,019 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 0
2025-09-11 21:02:45,019 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 21:02:45,019 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 0000/90:12:10:b5:7d:f7
2025-09-11 21:02:45,019 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 0000/90:12:10:b5:7d:f7
2025-09-11 21:02:45,483 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:02:45,484 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:02:45,485 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:02:45,485 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:02:45,485 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:02:45,486 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:02:45,772 - test_enhanced_rstp_coverage - INFO - 修改端口br3优先级
2025-09-11 21:02:54,294 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:02:54,442 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    0
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Designated Forwarding 20000    64.1
  br4        Designated Forwarding 20000    128.2


2025-09-11 21:02:54,443 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 0
2025-09-11 21:02:54,443 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 21:02:54,443 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 0000/90:12:10:b5:7d:f7
2025-09-11 21:02:54,443 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 0000/90:12:10:b5:7d:f7
2025-09-11 21:02:54,907 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:02:54,907 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:02:54,908 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:02:54,909 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:02:54,909 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:02:54,909 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:02:55,196 - test_enhanced_rstp_coverage - INFO - 端口br3优先级变更后状态: forwarding
2025-09-11 21:02:55,197 - test_enhanced_rstp_coverage - INFO - ✓ 拓扑变更测试通过：成功检测到多种拓扑变更
2025-09-11 21:02:55,197 - test_enhanced_rstp_coverage - INFO - ✓ 全面拓扑变更测试完成
2025-09-11 21:02:55,198 - RSTPTest - INFO - 测试完成: test_topology_change_comprehensive (耗时: 345.13秒)
2025-09-11 21:02:55,198 - RSTPTest - INFO - ============================================================

2025-09-11 21:02:55,198 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-11 21:02:55,199 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-11 21:02:55,199 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-11 21:02:55,338 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-11 21:02:55,338 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-11 21:02:55,464 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-11 21:02:55,464 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-11 21:02:55,597 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-11 21:02:55,597 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-11 21:02:55,598 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 21:02:55,598 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 21:02:55,598 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-11 21:02:55,598 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-11 21:02:55,655 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-11 21:02:55,655 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-11 21:02:55,822 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-11 21:02:55,822 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-11 21:02:55,823 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-11 21:02:55,823 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-11 21:02:55,823 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-11 21:02:55,883 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-11 21:02:55,883 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-11 21:02:56,053 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-11 21:02:56,053 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-11 21:02:56,054 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-11 21:02:56,054 - RSTPTest - INFO - ============================================================
2025-09-11 21:02:56,054 - RSTPTest - INFO - 开始测试: test_rstp_reconvergence_no_switchover
2025-09-11 21:02:56,054 - RSTPTest - INFO - ============================================================
2025-09-11 21:02:56,055 - test_high_availability - INFO - 开始RSTP重构误判测试
2025-09-11 21:02:56,055 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 21:02:56,056 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 21:02:56,056 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 21:02:56,056 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 21:02:56,056 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 21:02:56,056 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 21:02:56,056 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 21:02:56,056 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 21:02:56,057 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 21:02:56,899 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 21:02:56,900 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 21:02:56,900 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 21:02:57,057 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 21:02:58,143 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 21:02:58,144 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 21:02:58,144 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 21:02:58,144 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 21:02:58,144 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 21:02:58,624 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 21:02:59,103 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 21:02:59,104 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 21:02:59,296 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 21:02:59,296 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 21:02:59,296 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 21:02:59,296 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 21:02:59,297 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 21:02:59,297 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 21:02:59,297 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 21:02:59,297 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 21:02:59,815 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 21:03:04,312 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 21:03:04,444 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 21:03:04,444 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 21:03:04,445 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 21:03:04,445 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 21:03:04,445 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 21:03:05,625 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 21:03:06,808 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 21:03:06,809 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 21:03:06,905 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 21:03:07,168 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 21:03:07,169 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 21:03:07,169 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 21:03:07,169 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 21:03:07,169 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 21:03:07,169 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 21:03:07,169 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 21:03:07,170 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 21:03:07,660 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 21:03:12,146 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 21:03:12,271 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 21:03:12,271 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 21:03:12,272 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 21:03:12,272 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 21:03:12,272 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 21:03:13,450 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 21:03:14,621 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 21:03:14,622 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 21:03:14,715 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 21:03:14,974 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 21:03:14,975 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 21:03:14,975 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 21:03:20,027 - test_high_availability - INFO - 初始HA状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-11 21:03:20,027 - test_high_availability - INFO - 在远端触发RSTP重构...
2025-09-11 21:03:20,027 - FaultInjector_TestNode2 - INFO - 断开链路: eth0
2025-09-11 21:03:20,204 - FaultInjector_TestNode2 - INFO - 链路已断开: eth0
2025-09-11 21:03:30,254 - test_high_availability - INFO - RSTP重构后HA状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-11 21:03:30,255 - FaultInjector_TestNode2 - INFO - 恢复链路: eth0
2025-09-11 21:03:30,386 - FaultInjector_TestNode2 - INFO - 链路已恢复: eth0
2025-09-11 21:03:30,386 - test_high_availability - INFO - RSTP重构误判测试完成
2025-09-11 21:03:30,388 - RSTPTest - INFO - 测试完成: test_rstp_reconvergence_no_switchover (耗时: 34.33秒)
2025-09-11 21:03:30,388 - RSTPTest - INFO - ============================================================

2025-09-11 21:03:30,389 - RSTPTest - INFO - ============================================================
2025-09-11 21:03:30,390 - RSTPTest - INFO - 开始测试: test_split_brain_scenario
2025-09-11 21:03:30,390 - RSTPTest - INFO - ============================================================
2025-09-11 21:03:30,390 - test_high_availability - INFO - 开始裂脑场景测试
2025-09-11 21:03:30,443 - test_high_availability - INFO - 初始状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-11 21:03:30,443 - test_high_availability - INFO - 断开同步链路: eth3
2025-09-11 21:03:30,443 - FaultInjector_DUT - INFO - 断开链路: eth3
2025-09-11 21:03:30,708 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth3 (code=1)，将在逻辑上标记为已断开
2025-09-11 21:03:40,708 - test_high_availability - WARNING - 裂脑测试需要访问两个控制器
2025-09-11 21:03:40,709 - FaultInjector_DUT - INFO - 恢复链路: eth3
2025-09-11 21:03:40,931 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth3 (code=1)，将在逻辑上标记为已恢复
2025-09-11 21:03:40,931 - test_high_availability - INFO - 裂脑场景测试完成
2025-09-11 21:03:40,932 - RSTPTest - INFO - 测试完成: test_split_brain_scenario (耗时: 10.54秒)
2025-09-11 21:03:40,932 - RSTPTest - INFO - ============================================================

2025-09-11 21:03:40,935 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-11 21:03:40,936 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-11 21:03:40,937 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-11 21:03:41,072 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-11 21:03:41,073 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-11 21:03:41,073 - RSTPTest - INFO - ============================================================
2025-09-11 21:03:41,073 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[12288]
2025-09-11 21:03:41,074 - RSTPTest - INFO - ============================================================
2025-09-11 21:03:41,074 - test_parameters - INFO - 测试网桥优先级: 12288
2025-09-11 21:03:42,555 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 21:03:42,556 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 21:03:42,556 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 12288 (方法: ovs)
2025-09-11 21:03:42,556 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 21:03:42,687 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 21:03:42,848 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-11 21:03:44,958 - test_parameters - INFO - 从OVS配置读取到优先级: 12288
2025-09-11 21:03:44,959 - test_parameters - INFO - 优先级12288设置成功
2025-09-11 21:03:44,959 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[12288] (耗时: 3.89秒)
2025-09-11 21:03:44,960 - RSTPTest - INFO - ============================================================

2025-09-11 21:03:44,961 - RSTPTest - INFO - ============================================================
2025-09-11 21:03:44,961 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[16384]
2025-09-11 21:03:44,961 - RSTPTest - INFO - ============================================================
2025-09-11 21:03:44,962 - test_parameters - INFO - 测试网桥优先级: 16384
2025-09-11 21:03:46,448 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 21:03:46,449 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 21:03:46,449 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 16384 (方法: ovs)
2025-09-11 21:03:46,449 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 21:03:46,578 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 21:03:46,730 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-11 21:03:48,844 - test_parameters - INFO - 从OVS配置读取到优先级: 16384
2025-09-11 21:03:48,844 - test_parameters - INFO - 优先级16384设置成功
2025-09-11 21:03:48,845 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[16384] (耗时: 3.88秒)
2025-09-11 21:03:48,845 - RSTPTest - INFO - ============================================================

2025-09-11 21:03:48,846 - RSTPTest - INFO - ============================================================
2025-09-11 21:03:48,847 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[32768]
2025-09-11 21:03:48,847 - RSTPTest - INFO - ============================================================
2025-09-11 21:03:48,847 - test_parameters - INFO - 测试网桥优先级: 32768
2025-09-11 21:03:50,319 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 21:03:50,319 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 21:03:50,320 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 32768 (方法: ovs)
2025-09-11 21:03:50,320 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 21:03:50,445 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 21:03:50,593 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-11 21:03:52,703 - test_parameters - INFO - 从OVS配置读取到优先级: 32768
2025-09-11 21:03:52,703 - test_parameters - INFO - 优先级32768设置成功
2025-09-11 21:03:52,704 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[32768] (耗时: 3.86秒)
2025-09-11 21:03:52,704 - RSTPTest - INFO - ============================================================

2025-09-11 21:03:52,705 - RSTPTest - INFO - ============================================================
2025-09-11 21:03:52,705 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[61440]
2025-09-11 21:03:52,706 - RSTPTest - INFO - ============================================================
2025-09-11 21:03:52,706 - test_parameters - INFO - 测试网桥优先级: 61440
2025-09-11 21:03:54,179 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 21:03:54,179 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 21:03:54,179 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 61440 (方法: ovs)
2025-09-11 21:03:54,180 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 21:03:54,305 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 21:03:54,458 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-11 21:03:56,568 - test_parameters - INFO - 从OVS配置读取到优先级: 61440
2025-09-11 21:03:56,568 - test_parameters - INFO - 优先级61440设置成功
2025-09-11 21:03:56,569 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[61440] (耗时: 3.86秒)
2025-09-11 21:03:56,569 - RSTPTest - INFO - ============================================================

2025-09-11 21:03:56,570 - RSTPTest - INFO - ============================================================
2025-09-11 21:03:56,570 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[4097]
2025-09-11 21:03:56,570 - RSTPTest - INFO - ============================================================
2025-09-11 21:03:56,571 - test_parameters - INFO - 测试无效优先级: 4097
2025-09-11 21:03:57,219 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 21:03:57,219 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 21:03:57,219 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 4097 (方法: ovs)
2025-09-11 21:03:57,219 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 21:03:57,383 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 21:03:58,634 - test_parameters - INFO - DUT处理无效优先级 4097 -> 4097
2025-09-11 21:03:58,634 - test_parameters - ERROR - DUT接受了非标准优先级值 4097，不符合802.1D标准（应为4096的倍数）
2025-09-11 21:03:58,652 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[4097] (耗时: 2.08秒)
2025-09-11 21:03:58,652 - RSTPTest - INFO - ============================================================

2025-09-11 21:03:58,655 - RSTPTest - INFO - ============================================================
2025-09-11 21:03:58,655 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[12289]
2025-09-11 21:03:58,655 - RSTPTest - INFO - ============================================================
2025-09-11 21:03:58,656 - test_parameters - INFO - 测试无效优先级: 12289
2025-09-11 21:03:59,226 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 21:03:59,226 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 21:03:59,226 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 12289 (方法: ovs)
2025-09-11 21:03:59,227 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 21:03:59,390 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 21:04:00,642 - test_parameters - INFO - DUT处理无效优先级 12289 -> 12289
2025-09-11 21:04:00,643 - test_parameters - ERROR - DUT接受了非标准优先级值 12289，不符合802.1D标准（应为4096的倍数）
2025-09-11 21:04:00,668 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[12289] (耗时: 2.01秒)
2025-09-11 21:04:00,669 - RSTPTest - INFO - ============================================================

2025-09-11 21:04:00,670 - RSTPTest - INFO - ============================================================
2025-09-11 21:04:00,671 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[70000]
2025-09-11 21:04:00,671 - RSTPTest - INFO - ============================================================
2025-09-11 21:04:00,672 - test_parameters - INFO - 测试无效优先级: 70000
2025-09-11 21:04:01,230 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 21:04:01,230 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 21:04:01,231 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 70000 (方法: ovs)
2025-09-11 21:04:01,231 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 21:04:01,399 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 21:04:02,656 - test_parameters - INFO - DUT处理无效优先级 70000 -> 70000
2025-09-11 21:04:02,656 - test_parameters - ERROR - DUT接受了非标准优先级值 70000，不符合802.1D标准（应为4096的倍数）
2025-09-11 21:04:02,680 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[70000] (耗时: 2.01秒)
2025-09-11 21:04:02,681 - RSTPTest - INFO - ============================================================

2025-09-11 21:04:02,683 - RSTPTest - INFO - ============================================================
2025-09-11 21:04:02,683 - RSTPTest - INFO - 开始测试: test_hello_time
2025-09-11 21:04:02,683 - RSTPTest - INFO - ============================================================
2025-09-11 21:04:02,684 - test_parameters - INFO - 测试Hello Time参数
2025-09-11 21:04:04,275 - test_parameters - INFO - 设置Hello Time: 1秒
2025-09-11 21:04:04,276 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 21:04:04,276 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 21:04:06,515 - test_parameters - INFO - 设置Hello Time: 2秒
2025-09-11 21:04:06,515 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 21:04:06,516 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 21:04:08,785 - test_parameters - INFO - 设置Hello Time: 5秒
2025-09-11 21:04:08,785 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 21:04:08,786 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 21:04:11,056 - test_parameters - INFO - Hello Time测试通过
2025-09-11 21:04:11,057 - RSTPTest - INFO - 测试完成: test_hello_time (耗时: 8.37秒)
2025-09-11 21:04:11,057 - RSTPTest - INFO - ============================================================

2025-09-11 21:04:11,059 - RSTPTest - INFO - ============================================================
2025-09-11 21:04:11,059 - RSTPTest - INFO - 开始测试: test_forward_delay
2025-09-11 21:04:11,059 - RSTPTest - INFO - ============================================================
2025-09-11 21:04:11,059 - test_parameters - INFO - 测试Forward Delay参数
2025-09-11 21:04:12,671 - test_parameters - INFO - 设置Forward Delay: 4秒
2025-09-11 21:04:12,671 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 21:04:12,672 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 21:04:14,901 - test_parameters - INFO - 设置Forward Delay: 10秒
2025-09-11 21:04:14,902 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 21:04:14,902 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 21:04:17,173 - test_parameters - INFO - 设置Forward Delay: 15秒
2025-09-11 21:04:17,173 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 21:04:17,174 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 21:04:19,449 - test_parameters - INFO - Forward Delay测试通过
2025-09-11 21:04:19,450 - RSTPTest - INFO - 测试完成: test_forward_delay (耗时: 8.39秒)
2025-09-11 21:04:19,450 - RSTPTest - INFO - ============================================================

2025-09-11 21:04:19,452 - RSTPTest - INFO - ============================================================
2025-09-11 21:04:19,452 - RSTPTest - INFO - 开始测试: test_max_age
2025-09-11 21:04:19,453 - RSTPTest - INFO - ============================================================
2025-09-11 21:04:19,453 - test_parameters - INFO - 测试Max Age参数
2025-09-11 21:04:21,059 - test_parameters - INFO - 设置Max Age: 6秒
2025-09-11 21:04:21,060 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 21:04:21,060 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 21:04:23,295 - test_parameters - INFO - 设置Max Age: 10秒
2025-09-11 21:04:23,295 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 21:04:23,295 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 21:04:25,572 - test_parameters - INFO - 设置Max Age: 20秒
2025-09-11 21:04:25,572 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 21:04:25,572 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 21:04:27,841 - test_parameters - INFO - Max Age测试通过
2025-09-11 21:04:27,842 - RSTPTest - INFO - 测试完成: test_max_age (耗时: 8.39秒)
2025-09-11 21:04:27,842 - RSTPTest - INFO - ============================================================

2025-09-11 21:04:27,968 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-11 21:04:27,968 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-11 21:04:28,116 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-11 21:04:28,117 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-11 21:04:28,117 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 21:04:28,118 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 21:04:28,118 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-11 21:04:28,118 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-11 21:04:28,175 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-11 21:04:28,175 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-11 21:04:28,345 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-11 21:04:28,345 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-11 21:04:28,346 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-11 21:04:28,346 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-11 21:04:28,346 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-11 21:04:28,403 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-11 21:04:28,404 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-11 21:04:28,569 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-11 21:04:28,569 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-11 21:04:28,569 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-11 21:04:28,569 - RSTPTest - INFO - ============================================================
2025-09-11 21:04:28,570 - RSTPTest - INFO - 开始测试: test_port_cost
2025-09-11 21:04:28,570 - RSTPTest - INFO - ============================================================
2025-09-11 21:04:28,570 - test_parameters - INFO - 测试端口路径成本
2025-09-11 21:04:28,571 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 21:04:28,571 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 21:04:28,571 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 21:04:28,571 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 21:04:28,571 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 21:04:28,571 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 21:04:28,572 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 21:04:28,572 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 21:04:28,572 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 21:04:29,082 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 21:04:29,083 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 21:04:29,083 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 21:04:29,217 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 21:04:30,249 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 21:04:30,249 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 21:04:30,250 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 21:04:30,250 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 21:04:30,250 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 21:04:30,714 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 21:04:31,178 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 21:04:31,178 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 21:04:31,346 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 21:04:31,346 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 21:04:31,346 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 21:04:31,347 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 21:04:31,347 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 21:04:31,347 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 21:04:31,347 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 21:04:31,347 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 21:04:31,859 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 21:04:36,376 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 21:04:36,504 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 21:04:36,505 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 21:04:36,505 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 21:04:36,505 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 21:04:36,505 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 21:04:37,690 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 21:04:38,887 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 21:04:38,887 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 21:04:38,984 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 21:04:39,257 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 21:04:39,258 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 21:04:39,258 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 21:04:39,258 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 21:04:39,258 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 21:04:39,259 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 21:04:39,259 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 21:04:39,259 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 21:04:39,745 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 21:06:13,803 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 21:06:23,881 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 21:06:23,881 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 21:06:23,881 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 21:06:23,882 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 21:06:23,882 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 21:07:34,714 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 21:08:33,723 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 21:08:33,723 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 21:08:33,818 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 21:08:44,031 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 21:08:44,032 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 21:08:44,032 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 21:08:49,033 - test_parameters - INFO - 设置端口eth0成本: 10
2025-09-11 21:08:49,033 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 21:08:49,033 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 21:08:49,096 - test_parameters - INFO - 设置端口eth0成本: 100
2025-09-11 21:08:49,096 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 21:08:49,096 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 21:08:49,200 - test_parameters - INFO - 设置端口eth0成本: 1000
2025-09-11 21:08:49,200 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 21:08:49,200 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 21:08:49,304 - test_parameters - INFO - 设置端口eth0成本: 20000
2025-09-11 21:08:49,304 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 21:08:49,304 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 21:08:49,408 - test_parameters - INFO - 端口成本测试通过
2025-09-11 21:08:49,409 - RSTPTest - INFO - 测试完成: test_port_cost (耗时: 260.84秒)
2025-09-11 21:08:49,409 - RSTPTest - INFO - ============================================================

2025-09-11 21:08:49,410 - RSTPTest - INFO - ============================================================
2025-09-11 21:08:49,411 - RSTPTest - INFO - 开始测试: test_parameter_persistence
2025-09-11 21:08:49,411 - RSTPTest - INFO - ============================================================
2025-09-11 21:08:49,411 - test_parameters - INFO - 测试参数持久性
2025-09-11 21:08:51,086 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 21:08:51,086 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 21:08:51,086 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 16384 (方法: ovs)
2025-09-11 21:08:51,086 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 21:08:51,207 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 21:08:57,045 - test_parameters - INFO - 参数持久性测试通过
2025-09-11 21:08:57,046 - RSTPTest - INFO - 测试完成: test_parameter_persistence (耗时: 7.63秒)
2025-09-11 21:08:57,046 - RSTPTest - INFO - ============================================================

2025-09-11 21:08:57,047 - RSTPTest - INFO - ============================================================
2025-09-11 21:08:57,047 - RSTPTest - INFO - 开始测试: test_parameter_boundaries
2025-09-11 21:08:57,047 - RSTPTest - INFO - ============================================================
2025-09-11 21:08:57,048 - test_parameters - INFO - 测试参数边界值
2025-09-11 21:08:58,716 - test_parameters - INFO - 最小值0: 失败
2025-09-11 21:08:58,816 - test_parameters - INFO - 最大值65535: 失败
2025-09-11 21:08:58,916 - test_parameters - INFO - 正确拒绝了无效值-1
2025-09-11 21:08:59,017 - test_parameters - INFO - 正确拒绝了无效值65536
2025-09-11 21:08:59,121 - test_parameters - INFO - 最小值1: 失败
2025-09-11 21:08:59,224 - test_parameters - INFO - 最大值10: 失败
2025-09-11 21:08:59,325 - test_parameters - INFO - 正确拒绝了无效值0
2025-09-11 21:08:59,429 - test_parameters - INFO - 正确拒绝了无效值11
2025-09-11 21:08:59,533 - test_parameters - INFO - 最小值4: 失败
2025-09-11 21:08:59,636 - test_parameters - INFO - 最大值30: 失败
2025-09-11 21:08:59,736 - test_parameters - INFO - 正确拒绝了无效值3
2025-09-11 21:08:59,840 - test_parameters - INFO - 正确拒绝了无效值31
2025-09-11 21:08:59,944 - test_parameters - INFO - 最小值6: 失败
2025-09-11 21:09:00,052 - test_parameters - INFO - 最大值40: 失败
2025-09-11 21:09:00,152 - test_parameters - INFO - 正确拒绝了无效值5
2025-09-11 21:09:00,256 - test_parameters - INFO - 正确拒绝了无效值41
2025-09-11 21:09:00,256 - test_parameters - INFO - 参数边界测试完成
2025-09-11 21:09:00,257 - RSTPTest - INFO - 测试完成: test_parameter_boundaries (耗时: 3.21秒)
2025-09-11 21:09:00,257 - RSTPTest - INFO - ============================================================

2025-09-11 21:09:00,258 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-11 21:09:00,258 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-11 21:09:00,258 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-11 21:09:00,395 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-11 21:09:00,396 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-11 21:09:00,514 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-11 21:09:00,514 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-11 21:09:00,647 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-11 21:09:00,647 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-11 21:09:00,647 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 21:09:00,648 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 21:09:00,648 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-11 21:09:00,648 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-11 21:09:00,706 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-11 21:09:00,706 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-11 21:09:06,984 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-11 21:09:06,984 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-11 21:09:06,984 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-11 21:09:06,984 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-11 21:09:06,984 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-11 21:09:07,039 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-11 21:09:07,039 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-11 21:09:17,161 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-11 21:09:17,161 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-11 21:09:17,161 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-11 21:09:17,161 - RSTPTest - INFO - ============================================================
2025-09-11 21:09:17,162 - RSTPTest - INFO - 开始测试: test_port_role_assignment_simplified
2025-09-11 21:09:17,162 - RSTPTest - INFO - ============================================================
2025-09-11 21:09:17,162 - test_protocol_conformance - INFO - 开始端口角色分配测试
2025-09-11 21:09:17,163 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 21:09:17,163 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 21:09:17,163 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 21:09:17,163 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 21:09:17,163 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 21:09:17,163 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 21:09:17,163 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 21:09:17,164 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 21:09:17,164 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 21:09:17,653 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 21:09:17,653 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 21:09:17,654 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 21:09:17,810 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 21:09:18,840 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 21:09:18,841 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 21:09:18,841 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 21:09:18,841 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 21:09:18,841 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 21:09:19,310 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 21:09:19,758 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 21:09:19,758 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 21:09:19,929 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 21:09:19,929 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 21:09:19,930 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 21:09:19,930 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 21:09:19,930 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 21:09:19,930 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 21:09:19,930 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 21:09:19,930 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 21:09:47,730 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 21:11:21,777 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 21:11:31,857 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 21:11:31,857 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 21:11:31,857 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 21:11:31,857 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 21:11:31,858 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 21:12:39,857 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 21:13:28,361 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 21:13:28,361 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 21:13:28,456 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 21:13:30,593 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 21:13:30,593 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 21:13:30,594 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 21:13:30,594 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 21:13:30,594 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 21:13:30,594 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 21:13:30,594 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 21:13:30,594 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 21:13:43,160 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 21:13:47,669 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 21:13:47,787 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 21:13:47,788 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 21:13:47,788 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 21:13:47,788 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 21:13:47,788 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 21:13:48,978 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 21:13:50,169 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 21:13:50,169 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 21:13:50,266 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 21:13:50,533 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 21:13:50,534 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 21:13:50,534 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 21:13:50,534 - test_protocol_conformance - INFO - 验证拓扑完整性...
2025-09-11 21:13:50,534 - NetworkTopology - INFO - 开始验证拓扑完整性...
2025-09-11 21:13:51,700 - NetworkTopology - INFO - 拓扑完整性验证通过
2025-09-11 21:13:51,701 - test_protocol_conformance - INFO - 设置网桥优先级...
2025-09-11 21:13:51,701 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-11 21:13:51,701 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级12288 -> mstpd优先级3)
2025-09-11 21:14:01,783 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 21:14:01,784 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 32768 (方法: ovs)
2025-09-11 21:14:01,784 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 21:14:01,905 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 21:14:02,048 - test_protocol_conformance - INFO - 等待网络收敛...
2025-09-11 21:14:02,048 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 21:14:02,487 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:14:02,639 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Root       Forwarding 20000    128.1
  br4        Alternate  Discarding 20000    128.2


2025-09-11 21:14:02,640 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 21:14:02,640 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:14:02,641 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 21:14:02,641 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:14:03,101 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:14:03,101 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:14:03,103 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:14:03,103 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:14:03,103 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:14:03,103 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:14:03,393 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.345秒
2025-09-11 21:14:03,851 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:14:04,003 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Alternate  Discarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 21:14:04,004 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 21:14:04,004 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:14:04,005 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 21:14:04,005 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:14:04,464 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:14:04,465 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:14:04,466 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:14:04,466 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:14:04,466 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:14:04,466 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:14:05,234 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:14:05,394 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Alternate  Discarding 20000    128.1
  br4        Root       Forwarding 20000    128.2


2025-09-11 21:14:05,396 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 21:14:05,396 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:14:05,396 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 21:14:05,396 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:14:05,884 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:14:05,885 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:14:05,886 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:14:05,886 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:14:05,886 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:14:05,886 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:14:06,177 - RSTPAnalyzer_DUT - INFO - Root ID为unknown，判定为非根桥
2025-09-11 21:14:06,178 - test_protocol_conformance - INFO - DUT是根桥: False
2025-09-11 21:14:06,178 - test_protocol_conformance - INFO - 活动端口角色: {<PortRole.ROOT: 'root'>: ['br3'], <PortRole.ALTERNATE: 'alternate'>: ['br4']}
2025-09-11 21:14:06,178 - test_protocol_conformance - INFO - 禁用端口: ['SE_ETH2']
2025-09-11 21:14:06,178 - test_protocol_conformance - INFO - 端口角色分配测试通过
2025-09-11 21:14:06,179 - RSTPTest - INFO - 测试完成: test_port_role_assignment_simplified (耗时: 289.02秒)
2025-09-11 21:14:06,180 - RSTPTest - INFO - ============================================================

2025-09-11 21:14:06,181 - RSTPTest - INFO - ============================================================
2025-09-11 21:14:06,182 - RSTPTest - INFO - 开始测试: test_root_bridge_election
2025-09-11 21:14:06,182 - RSTPTest - INFO - ============================================================
2025-09-11 21:14:06,183 - test_protocol_conformance - INFO - 开始根网桥选举测试
2025-09-11 21:14:06,183 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 21:14:06,183 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 21:14:06,183 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 21:14:06,184 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 21:14:06,184 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 21:14:06,184 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 21:14:06,184 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 21:14:06,185 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 21:14:06,185 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 21:14:06,697 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 21:14:06,698 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 21:14:06,698 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 21:14:06,852 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 21:14:07,924 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 21:14:07,924 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 21:14:07,924 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 21:14:07,925 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 21:14:07,925 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 21:14:08,396 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 21:14:08,872 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 21:14:08,873 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 21:14:09,065 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 21:14:09,065 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 21:14:09,065 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 21:14:09,065 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 21:14:09,065 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 21:14:09,066 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 21:14:09,066 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 21:14:09,066 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 21:14:22,517 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 21:14:27,025 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 21:14:27,146 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 21:14:27,146 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 21:14:27,146 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 21:14:27,146 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 21:14:27,146 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 21:14:28,338 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 21:14:29,526 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 21:14:29,526 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 21:14:29,621 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 21:14:29,883 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 21:14:29,883 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 21:14:29,883 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 21:14:29,884 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 21:14:29,884 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 21:14:29,884 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 21:14:29,884 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 21:14:29,884 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 21:14:30,375 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 21:14:34,870 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 21:14:35,006 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 21:14:35,007 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 21:14:35,007 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 21:14:35,007 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 21:14:35,007 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 21:14:36,207 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 21:14:37,393 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 21:14:37,394 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 21:14:37,489 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 21:14:37,755 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 21:14:37,755 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 21:14:37,756 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 21:14:40,757 - test_protocol_conformance - INFO - === 检查DUT网桥配置 ===
2025-09-11 21:14:40,757 - test_protocol_conformance - INFO - DUT使用OVS网桥: SE_ETH2
2025-09-11 21:14:40,817 - test_protocol_conformance - INFO - OVS网桥 SE_ETH2 存在
2025-09-11 21:14:40,920 - test_protocol_conformance - INFO - SE_ETH2 RSTP状态: true
2025-09-11 21:14:40,921 - test_protocol_conformance - INFO - === 初始网桥状态 ===
2025-09-11 21:14:41,377 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:14:41,534 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 21:14:41,535 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 21:14:41,535 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:14:41,535 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 21:14:41,535 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:14:42,008 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:14:42,008 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:14:42,010 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:14:42,010 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:14:42,010 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:14:42,010 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:14:42,296 - test_protocol_conformance - INFO - 活动端口数: 2
2025-09-11 21:14:42,297 - test_protocol_conformance - INFO - 初始端口状态:
2025-09-11 21:14:42,297 - test_protocol_conformance - INFO -   br3: 角色=root, 状态=forwarding
2025-09-11 21:14:42,297 - test_protocol_conformance - INFO -   br4: 角色=alternate, 状态=discarding
2025-09-11 21:14:42,297 - test_protocol_conformance - INFO - 初始状态 - DUT有Root Port: True
2025-09-11 21:14:42,297 - test_protocol_conformance - INFO - === 配置网桥优先级 ===
2025-09-11 21:14:42,298 - test_protocol_conformance - INFO - 设置TestNode1优先级为16384
2025-09-11 21:14:42,298 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 16384 (方法: mstpd)
2025-09-11 21:14:42,298 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级16384 -> mstpd优先级4)
2025-09-11 21:14:42,424 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 21:14:42,424 - test_protocol_conformance - INFO - 设置DUT优先级为32768
2025-09-11 21:14:42,494 - test_protocol_conformance - INFO - OVS设置优先级结果: ('', '', 0)
2025-09-11 21:14:42,596 - test_protocol_conformance - INFO - 验证优先级设置: ('"32768"\n', '', 0)
2025-09-11 21:14:42,597 - test_protocol_conformance - INFO - 设置TestNode2优先级为24576
2025-09-11 21:14:42,597 - NetworkTopology_TestNode2 - INFO - TestNode2: 设置网桥优先级 br0 = 24576 (方法: mstpd)
2025-09-11 21:14:42,597 - NetworkTopology_TestNode2 - INFO - TestNode2: 执行mstpd设置优先级命令 (标准优先级24576 -> mstpd优先级6)
2025-09-11 21:14:42,727 - NetworkTopology_TestNode2 - INFO - TestNode2: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 21:14:42,727 - test_protocol_conformance - INFO - 等待RSTP收敛...
2025-09-11 21:14:52,728 - test_protocol_conformance - INFO - === 第一阶段验证 ===
2025-09-11 21:14:53,161 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:14:53,313 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    16384
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 21:14:53,314 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 16384
2025-09-11 21:14:53,315 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:14:53,315 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 4000/6e:b3:08:fa:01:34
2025-09-11 21:14:53,315 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:14:53,783 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:14:53,784 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:14:53,785 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:14:53,785 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:14:53,785 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:14:53,785 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:14:54,189 - test_protocol_conformance - INFO - DUT当前优先级: 32768
2025-09-11 21:14:54,190 - test_protocol_conformance - INFO - 优先级验证通过
2025-09-11 21:14:54,190 - test_protocol_conformance - INFO -   br3: 角色=root
2025-09-11 21:14:54,190 - test_protocol_conformance - INFO -   br4: 角色=alternate
2025-09-11 21:14:54,190 - test_protocol_conformance - INFO - ✓ 第一阶段通过：DUT有Root Port，不是根桥
2025-09-11 21:14:54,190 - test_protocol_conformance - INFO - 
=== 第二阶段：DUT应成为根桥 ===
2025-09-11 21:14:54,191 - test_protocol_conformance - INFO - 设置DUT优先级为12288（最低）
2025-09-11 21:14:54,301 - test_protocol_conformance - INFO - OVS设置最低优先级结果: ('', '', 0)
2025-09-11 21:14:54,405 - test_protocol_conformance - INFO - 设置后优先级: 12288
2025-09-11 21:14:54,405 - test_protocol_conformance - INFO - 最低优先级设置验证通过
2025-09-11 21:14:54,405 - test_protocol_conformance - INFO - 等待RSTP重新收敛...
2025-09-11 21:15:04,406 - test_protocol_conformance - INFO - === 最终验证 ===
2025-09-11 21:15:04,822 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:15:04,978 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    16384
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 21:15:04,979 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 16384
2025-09-11 21:15:04,979 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:15:04,979 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 4000/6e:b3:08:fa:01:34
2025-09-11 21:15:04,979 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:15:05,439 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:15:05,439 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:15:05,440 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:15:05,440 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:15:05,440 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:15:05,440 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:15:05,736 - test_protocol_conformance - INFO -   br3: 角色=root, 状态=forwarding
2025-09-11 21:15:05,736 - test_protocol_conformance - INFO -   br4: 角色=alternate, 状态=discarding
2025-09-11 21:15:05,737 - test_protocol_conformance - ERROR - DUT RSTP实现问题诊断:
2025-09-11 21:15:05,737 - test_protocol_conformance - ERROR - 1. DUT优先级已设置为12288（最低）
2025-09-11 21:15:05,737 - test_protocol_conformance - ERROR - 2. 但DUT仍有Root Port: True
2025-09-11 21:15:05,737 - test_protocol_conformance - ERROR - 3. Designated端口数: 0
2025-09-11 21:15:05,737 - test_protocol_conformance - ERROR - 可能的原因:
2025-09-11 21:15:05,737 - test_protocol_conformance - ERROR - - DUT的RSTP实现不符合标准
2025-09-11 21:15:05,738 - test_protocol_conformance - ERROR - - DUT没有正确处理优先级变化
2025-09-11 21:15:05,738 - test_protocol_conformance - ERROR - - DUT的BPDU发送/接收有问题
2025-09-11 21:15:05,787 - RSTPTest - INFO - 测试完成: test_root_bridge_election (耗时: 59.60秒)
2025-09-11 21:15:05,787 - RSTPTest - INFO - ============================================================

2025-09-11 21:15:05,790 - RSTPTest - INFO - ============================================================
2025-09-11 21:15:05,790 - RSTPTest - INFO - 开始测试: test_port_role_assignment
2025-09-11 21:15:05,791 - RSTPTest - INFO - ============================================================
2025-09-11 21:15:05,791 - test_protocol_conformance - INFO - 开始端口角色分配测试
2025-09-11 21:15:05,792 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 21:15:05,792 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 21:15:05,792 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 21:15:05,792 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 21:15:05,792 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 21:15:05,792 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 21:15:05,792 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 21:15:05,793 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 21:15:05,793 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 21:15:06,283 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 21:15:06,283 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 21:15:06,283 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 21:15:06,439 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 21:15:07,523 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 21:15:07,523 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 21:15:07,523 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 21:15:07,523 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 21:15:07,524 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 21:15:08,008 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 21:15:08,483 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 21:15:08,484 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 21:15:08,683 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 21:15:08,684 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 21:15:08,684 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 21:15:08,684 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 21:15:08,684 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 21:15:08,684 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 21:15:08,685 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 21:15:08,685 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 21:15:09,190 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 21:15:13,689 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 21:15:13,830 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 21:15:13,830 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 21:15:13,830 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 21:15:13,830 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 21:15:13,831 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 21:15:15,073 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 21:15:16,267 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 21:15:16,268 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 21:15:16,366 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 21:15:16,640 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 21:15:16,641 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 21:15:16,641 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 21:15:16,641 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 21:15:16,641 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 21:15:16,641 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 21:15:16,642 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 21:15:16,642 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 21:15:17,148 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 21:15:21,648 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 21:15:21,770 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 21:15:21,771 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 21:15:21,771 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 21:15:21,771 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 21:15:21,771 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 21:15:22,921 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 21:15:24,110 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 21:15:24,111 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 21:15:24,206 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 21:15:24,468 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 21:15:24,469 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 21:15:24,469 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 21:15:24,469 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-11 21:15:24,469 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级12288 -> mstpd优先级3)
2025-09-11 21:15:24,598 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 21:15:24,598 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 32768 (方法: ovs)
2025-09-11 21:15:24,598 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 21:15:24,719 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 21:15:27,864 - test_protocol_conformance - INFO - 检查DUT的OVS网桥接口...
2025-09-11 21:15:27,920 - test_protocol_conformance - INFO - OVS配置状态:
('8c812ea9-3b0c-46a1-bd3c-ef3904d38c1a\n    Bridge SE_ETH2\n        Port br3\n            Interface br3\n        Port SE_ETH2\n            Interface SE_ETH2\n                type: internal\n        Port br4\n            Interface br4\n    Bridge SE_ETH4\n        Port SE_ETH4\n            Interface SE_ETH4\n                type: internal\n    Bridge SE_ETH6\n        Port SE_ETH6\n            Interface SE_ETH6\n                type: internal\n    Bridge rstp0\n        Port rstp0\n            Interface rstp0\n                type: internal\n    Bridge br0\n        Port eth0\n            Interface eth0\n                error: "could not open network device eth0 (No such device)"\n        Port br0\n            Interface br0\n                type: internal\n                error: "could not add network device br0 to ofproto (File exists)"\n        Port eth2\n            Interface eth2\n                error: "could not open network device eth2 (No such device)"\n    ovs_version: "3.1.0"\n', '', 0)
2025-09-11 21:15:28,024 - test_protocol_conformance - INFO - SE_ETH2 网桥端口:
('br3\nbr4\n', '', 0)
2025-09-11 21:15:28,128 - test_protocol_conformance - INFO - SE_ETH2 STP状态:
('true\n', '', 0)
2025-09-11 21:15:28,231 - test_protocol_conformance - INFO - SE_ETH2 端口信息:
('OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7\nn_tables:254, n_buffers:0\ncapabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP\nactions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst\n 1(br3): addr:90:12:10:b5:7d:f7\n     config:     0\n     state:      0\n     current:    1GB-FD AUTO_NEG\n     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM\n     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM\n     speed: 1000 Mbps now, 1000 Mbps max\n 2(br4): addr:90:12:10:b5:7d:f7\n     config:     0\n     state:      STP_FORWARD\n     current:    1GB-FD AUTO_NEG\n     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM\n     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM\n     speed: 1000 Mbps now, 1000 Mbps max\n LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7\n     config:     0\n     state:      0\n     speed: 0 Mbps now, 0 Mbps max\nOFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0\n', '', 0)
2025-09-11 21:15:28,232 - test_protocol_conformance - INFO - 获取初始网桥状态...
2025-09-11 21:15:28,686 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:15:28,837 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 21:15:28,838 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 21:15:28,838 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:15:28,839 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 21:15:28,839 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:15:29,294 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:15:29,295 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:15:29,296 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:15:29,296 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:15:29,296 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:15:29,296 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:15:29,584 - test_protocol_conformance - INFO - Bridge ID: 3000/6e:b3:08:fa:01:34
2025-09-11 21:15:29,584 - test_protocol_conformance - INFO - Root ID: unknown
2025-09-11 21:15:29,584 - test_protocol_conformance - INFO - Root Port: br3
2025-09-11 21:15:29,584 - test_protocol_conformance - INFO - 协议版本: rstp
2025-09-11 21:15:29,584 - test_protocol_conformance - INFO - 端口 br3: 角色=root, 状态=forwarding, 成本=0
2025-09-11 21:15:29,584 - test_protocol_conformance - INFO - 端口 br4: 角色=alternate, 状态=discarding, 成本=0
2025-09-11 21:15:29,585 - test_protocol_conformance - INFO - 端口 SE_ETH2: 角色=unknown, 状态=disabled, 成本=0
2025-09-11 21:15:29,585 - test_protocol_conformance - INFO - 等待网络收敛...
2025-09-11 21:15:29,585 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 21:15:30,049 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:15:30,197 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 21:15:30,198 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 21:15:30,198 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:15:30,198 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 21:15:30,199 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:15:30,663 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:15:30,663 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:15:30,664 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:15:30,664 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:15:30,664 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:15:30,665 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:15:30,956 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.371秒
2025-09-11 21:15:31,413 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:15:31,565 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 21:15:31,566 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 21:15:31,567 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:15:31,567 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 21:15:31,567 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:15:32,027 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:15:32,027 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:15:32,028 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:15:32,028 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:15:32,029 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:15:32,029 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:15:32,321 - test_protocol_conformance - INFO - 收敛后的端口状态:
2025-09-11 21:15:32,321 - test_protocol_conformance - INFO - 端口 br3: 角色=root, 状态=forwarding, 成本=0
2025-09-11 21:15:32,321 - test_protocol_conformance - INFO - 端口 br4: 角色=alternate, 状态=discarding, 成本=0
2025-09-11 21:15:32,322 - test_protocol_conformance - INFO - 端口 SE_ETH2: 角色=unknown, 状态=disabled, 成本=0
2025-09-11 21:15:32,777 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:15:32,929 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 21:15:32,930 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 12288
2025-09-11 21:15:32,930 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:15:32,930 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 3000/6e:b3:08:fa:01:34
2025-09-11 21:15:32,931 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:15:33,392 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:15:33,392 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:15:33,393 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:15:33,393 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:15:33,393 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:15:33,394 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:15:33,684 - RSTPAnalyzer_DUT - INFO - Root ID为unknown，判定为非根桥
2025-09-11 21:15:33,684 - test_protocol_conformance - INFO - is_root_bridge() 返回: False
2025-09-11 21:15:33,684 - test_protocol_conformance - INFO - 有Root Port: True
2025-09-11 21:15:33,684 - test_protocol_conformance - INFO - 最终判定 - DUT是根桥: False
2025-09-11 21:15:33,685 - test_protocol_conformance - INFO - 活动端口数: 2
2025-09-11 21:15:33,685 - test_protocol_conformance - INFO - 禁用端口: ['SE_ETH2']
2025-09-11 21:15:33,685 - test_protocol_conformance - INFO - 端口角色分布: {<PortRole.ROOT: 'root'>: ['br3'], <PortRole.ALTERNATE: 'alternate'>: ['br4']}
2025-09-11 21:15:33,685 - test_protocol_conformance - INFO - 两端口验证：检查Root Port和Designated Port
2025-09-11 21:15:33,750 - RSTPTest - INFO - 测试完成: test_port_role_assignment (耗时: 27.96秒)
2025-09-11 21:15:33,751 - RSTPTest - INFO - ============================================================

2025-09-11 21:15:33,755 - RSTPTest - INFO - ============================================================
2025-09-11 21:15:33,755 - RSTPTest - INFO - 开始测试: test_rstp_protocol_verification
2025-09-11 21:15:33,755 - RSTPTest - INFO - ============================================================
2025-09-11 21:15:33,756 - test_protocol_conformance - INFO - 开始RSTP协议验证
2025-09-11 21:15:33,757 - test_protocol_conformance - INFO - === 检查OVS配置 ===
2025-09-11 21:15:33,807 - test_protocol_conformance - INFO - 当前OVS配置:
8c812ea9-3b0c-46a1-bd3c-ef3904d38c1a
    Bridge SE_ETH2
        Port br3
            Interface br3
        Port SE_ETH2
            Interface SE_ETH2
                type: internal
        Port br4
            Interface br4
    Bridge SE_ETH4
        Port SE_ETH4
            Interface SE_ETH4
                type: internal
    Bridge SE_ETH6
        Port SE_ETH6
            Interface SE_ETH6
                type: internal
    Bridge rstp0
        Port rstp0
            Interface rstp0
          
2025-09-11 21:15:33,907 - test_protocol_conformance - INFO - 使用现有网桥 SE_ETH2，端口: ['br3', 'br4']
2025-09-11 21:15:33,907 - test_protocol_conformance - INFO - === 配置RSTP（确保是RSTP而不是STP）===
2025-09-11 21:15:35,123 - test_protocol_conformance - INFO - 启用RSTP...
2025-09-11 21:15:35,188 - test_protocol_conformance - INFO - ✓ RSTP已启用
2025-09-11 21:15:35,188 - test_protocol_conformance - INFO - 设置RSTP参数...
2025-09-11 21:15:35,295 - test_protocol_conformance - INFO - ✓ 设置: rstp-hello-time=2
2025-09-11 21:15:35,403 - test_protocol_conformance - INFO - ✓ 设置: rstp-forward-delay=4
2025-09-11 21:15:35,511 - test_protocol_conformance - INFO - ✓ 设置: rstp-max-age=6
2025-09-11 21:15:35,611 - test_protocol_conformance - INFO - ✓ 设置: rstp-priority=32768
2025-09-11 21:15:35,727 - test_protocol_conformance - INFO - ✓ 设置: rstp-force-protocol-version=2
2025-09-11 21:15:36,051 - test_protocol_conformance - INFO - ✓ 端口 br3 RSTP已启用
2025-09-11 21:15:36,364 - test_protocol_conformance - INFO - ✓ 端口 br4 RSTP已启用
2025-09-11 21:15:36,459 - test_protocol_conformance - INFO - 等待RSTP初始化...
2025-09-11 21:15:41,460 - test_protocol_conformance - INFO - === 验证RSTP配置 ===
2025-09-11 21:15:41,514 - test_protocol_conformance - INFO - RSTP状态:
---- SE_ETH2 ----
Root ID:
  stp-priority    12288
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     6s
  stp-fwd-delay   4s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 21:15:41,515 - test_protocol_conformance - INFO - ✓ 使用RSTP时间参数
2025-09-11 21:15:41,515 - test_protocol_conformance - INFO - === 创建测试拓扑 ===
2025-09-11 21:15:41,515 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 21:15:41,516 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 21:15:41,516 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 21:15:41,516 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 21:15:41,516 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 21:15:41,516 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 21:15:41,517 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 21:15:41,517 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 21:15:41,517 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 21:15:42,012 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 21:15:42,012 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 21:15:42,012 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 21:15:42,146 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 21:15:43,210 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 21:15:43,211 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 21:15:43,211 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 21:15:43,211 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 21:15:43,211 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 21:15:43,691 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 21:15:44,171 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 21:15:44,172 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 21:15:44,363 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 21:15:44,363 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 21:15:44,363 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 21:15:44,364 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 21:15:44,364 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 21:15:44,364 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 21:15:44,364 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 21:15:44,364 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 21:15:44,862 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 21:15:49,382 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 21:15:49,514 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 21:15:49,514 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 21:15:49,514 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 21:15:49,514 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 21:15:49,515 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 21:15:50,714 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 21:15:51,932 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 21:15:51,932 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 21:15:52,029 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 21:15:52,286 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 21:15:52,286 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 21:15:52,286 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 21:15:52,287 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 21:15:52,287 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 21:15:52,287 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 21:15:52,287 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 21:15:52,287 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 21:15:52,776 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 21:15:57,270 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 21:15:57,395 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 21:15:57,395 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 21:15:57,396 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 21:15:57,396 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 21:15:57,396 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 21:15:58,576 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 21:15:59,751 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 21:15:59,751 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 21:15:59,847 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 21:16:00,120 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 21:16:00,120 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 21:16:00,120 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 21:16:05,121 - test_protocol_conformance - INFO - === 捕获BPDU ===
2025-09-11 21:16:05,121 - test_protocol_conformance - INFO - 在 SE_ETH2 上捕获BPDU...
2025-09-11 21:16:05,121 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: SE_ETH2, 数量: 10)
2025-09-11 21:16:15,208 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-11 21:16:15,208 - test_protocol_conformance - INFO - 在 br3 上捕获BPDU...
2025-09-11 21:16:15,208 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br3, 数量: 10)
2025-09-11 21:16:25,348 - RSTPAnalyzer_DUT - INFO - 捕获到 4 个BPDU包
2025-09-11 21:16:25,348 - test_protocol_conformance - INFO - ✓ 捕获到 4 个BPDU
2025-09-11 21:16:25,348 - test_protocol_conformance - INFO - === 分析BPDU ===
2025-09-11 21:16:25,349 - test_protocol_conformance - INFO - 第一个BPDU信息: {'timestamp': '21:16:20.837635', 'raw': '21:16:20.837635 00:e0:0c:25:0c:5c > 01:80:c2:00:00:00, 802.3, length 39: LLC, dsap STP (0x42) Individual, ssap STP (0x42) Command, ctrl 0x03: STP 802.1w, Rapid STP, Flags [Proposal, Learn, Forward, Agreement], bridge-id 8000.6e:b3:08:fa:01:34.8002, length 36', 'is_rstp': False}
2025-09-11 21:16:25,349 - test_protocol_conformance - INFO - BPDU统计: RSTP=0, STP=4
2025-09-11 21:16:25,349 - test_protocol_conformance - WARNING - 检测到更多STP BPDU
2025-09-11 21:16:25,446 - test_protocol_conformance - INFO - rstp_enable状态: true
2025-09-11 21:16:25,546 - test_protocol_conformance - INFO - stp_enable状态: true
2025-09-11 21:16:25,646 - test_protocol_conformance - WARNING - OVS配置为RSTP但发送STP BPDU，可能是实现限制
2025-09-11 21:16:25,646 - test_protocol_conformance - INFO - 基于配置判断为RSTP
2025-09-11 21:16:25,646 - test_protocol_conformance - INFO - ✓ RSTP协议验证通过（检测到 4 个RSTP BPDU）
2025-09-11 21:16:25,647 - RSTPTest - INFO - 测试完成: test_rstp_protocol_verification (耗时: 51.89秒)
2025-09-11 21:16:25,647 - RSTPTest - INFO - ============================================================

2025-09-11 21:16:25,649 - RSTPTest - INFO - ============================================================
2025-09-11 21:16:25,649 - RSTPTest - INFO - 开始测试: test_alternate_port_verification
2025-09-11 21:16:25,649 - RSTPTest - INFO - ============================================================
2025-09-11 21:16:25,650 - test_protocol_conformance - INFO - 开始Alternate Port验证测试
2025-09-11 21:16:25,650 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 21:16:25,650 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 21:16:25,650 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 21:16:25,650 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 21:16:25,650 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 21:16:25,651 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 21:16:25,651 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 21:16:25,651 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 21:16:25,651 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 21:16:26,174 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 21:16:26,175 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 21:16:26,175 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 21:16:26,329 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 21:16:27,421 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 21:16:27,422 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 21:16:27,422 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 21:16:27,422 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 21:16:27,423 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 21:16:27,895 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 21:16:28,366 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 21:16:28,367 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 21:16:28,558 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 21:16:28,558 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 21:16:28,559 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 21:16:28,559 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 21:16:28,559 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 21:16:28,559 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 21:16:28,560 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 21:16:28,560 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 21:16:29,056 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 21:16:33,549 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 21:16:33,679 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 21:16:33,679 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 21:16:33,680 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 21:16:33,680 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 21:16:33,680 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 21:16:34,869 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 21:16:36,097 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 21:16:36,098 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 21:16:36,196 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 21:16:36,459 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 21:16:36,460 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 21:16:36,460 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 21:16:36,460 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 21:16:36,460 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 21:16:36,460 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 21:16:36,461 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 21:16:36,461 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 21:16:36,962 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 21:16:41,460 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 21:16:41,586 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 21:16:41,586 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 21:16:41,587 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 21:16:41,587 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 21:16:41,587 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 21:16:42,788 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 21:16:43,987 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 21:16:43,987 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 21:16:44,085 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 21:16:44,350 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 21:16:44,350 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 21:16:44,350 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 21:16:44,351 - test_protocol_conformance - INFO - 设置网桥优先级
2025-09-11 21:16:44,351 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 4096 (方法: mstpd)
2025-09-11 21:16:44,351 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级4096 -> mstpd优先级1)
2025-09-11 21:16:44,480 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 21:16:44,481 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 8192 (方法: ovs)
2025-09-11 21:16:44,481 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 21:16:44,594 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 21:16:44,757 - NetworkTopology_TestNode2 - INFO - TestNode2: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-11 21:16:44,758 - NetworkTopology_TestNode2 - INFO - TestNode2: 执行mstpd设置优先级命令 (标准优先级12288 -> mstpd优先级3)
2025-09-11 21:16:44,890 - NetworkTopology_TestNode2 - INFO - TestNode2: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 21:16:44,891 - test_protocol_conformance - INFO - 等待RSTP收敛...
2025-09-11 21:16:44,891 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 21:16:45,300 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:16:45,452 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 21:16:45,453 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 21:16:45,453 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:16:45,453 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 21:16:45,454 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:16:45,913 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:16:45,914 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:16:45,915 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:16:45,915 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:16:45,915 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:16:45,915 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:16:46,202 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.311秒
2025-09-11 21:16:46,663 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:16:46,817 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 21:16:46,818 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 21:16:46,818 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:16:46,819 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 21:16:46,819 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:16:47,290 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:16:47,290 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:16:47,292 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:16:47,292 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:16:47,292 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:16:47,292 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:16:47,579 - test_protocol_conformance - INFO - DUT桥信息: BridgeInfo(bridge_id='1000/6e:b3:08:fa:01:34', root_id='unknown', root_port='br3', root_path_cost=0, protocol_version='rstp', hello_time=2, forward_delay=15, max_age=20, topology_changes=0, ports={'br3': PortInfo(name='br3', role=<PortRole.ROOT: 'root'>, state=<PortState.FORWARDING: 'forwarding'>, path_cost=0, designated_bridge='', designated_port=''), 'br4': PortInfo(name='br4', role=<PortRole.ALTERNATE: 'alternate'>, state=<PortState.DISCARDING: 'discarding'>, path_cost=0, designated_bridge='', designated_port=''), 'SE_ETH2': PortInfo(name='SE_ETH2', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')})
2025-09-11 21:16:48,044 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:16:48,199 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 21:16:48,200 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 21:16:48,200 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:16:48,200 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 21:16:48,201 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:16:48,669 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:16:48,670 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:16:48,671 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:16:48,671 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:16:48,671 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:16:48,671 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:16:48,959 - RSTPAnalyzer_DUT - INFO - Root ID为unknown，判定为非根桥
2025-09-11 21:16:48,959 - test_protocol_conformance - INFO - DUT根桥判断结果: False
2025-09-11 21:16:48,960 - test_protocol_conformance - INFO - DUT桥信息 - bridge_id: '1000/6e:b3:08:fa:01:34', root_id: 'unknown'
2025-09-11 21:16:48,960 - test_protocol_conformance - INFO - 活动端口数量: 2
2025-09-11 21:16:48,960 - test_protocol_conformance - INFO - 端口角色分布: {<PortRole.ROOT: 'root'>: ['br3'], <PortRole.ALTERNATE: 'alternate'>: ['br4']}
2025-09-11 21:16:48,960 - test_protocol_conformance - INFO - ✓ Alternate端口br4状态正确: discarding
2025-09-11 21:16:48,960 - test_protocol_conformance - INFO - ✓ 成功验证Alternate Port: ['br4']
2025-09-11 21:16:48,961 - test_protocol_conformance - INFO - Alternate Port验证测试完成
2025-09-11 21:16:48,961 - RSTPTest - INFO - 测试完成: test_alternate_port_verification (耗时: 23.31秒)
2025-09-11 21:16:48,962 - RSTPTest - INFO - ============================================================

2025-09-11 21:16:48,963 - RSTPTest - INFO - ============================================================
2025-09-11 21:16:48,963 - RSTPTest - INFO - 开始测试: test_port_state_transitions
2025-09-11 21:16:48,963 - RSTPTest - INFO - ============================================================
2025-09-11 21:16:48,964 - test_protocol_conformance - INFO - 开始端口状态转换测试
2025-09-11 21:16:48,964 - NetworkTopology - INFO - 创建RSTP线性拓扑...
2025-09-11 21:16:48,964 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 21:16:48,964 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 21:16:48,965 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 21:16:48,965 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 21:16:48,965 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 21:16:48,965 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 21:16:48,965 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 21:16:48,965 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 21:16:49,473 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 21:16:49,474 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 21:16:49,474 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 21:16:49,626 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 21:16:50,689 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"32768
2025-09-11 21:16:50,690 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 21:16:50,690 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 21:16:50,690 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br4']
2025-09-11 21:16:50,690 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 21:16:51,166 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 21:16:51,166 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 21:16:51,358 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 21:16:51,358 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 21:16:51,358 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 21:16:51,358 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 21:16:51,359 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 21:16:51,359 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 21:16:51,359 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 21:16:51,359 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 21:16:51,860 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 21:16:56,354 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 21:16:56,482 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 21:16:56,483 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 21:16:56,483 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 21:16:56,483 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 21:16:56,483 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 21:16:57,675 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 21:16:58,874 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 21:16:58,875 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 21:16:58,983 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 21:16:59,250 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 21:16:59,250 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 21:16:59,250 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 21:16:59,251 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 21:16:59,251 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 21:16:59,251 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 21:16:59,251 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 21:16:59,251 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 21:16:59,754 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 21:17:04,251 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 21:17:04,384 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 21:17:04,384 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 21:17:04,384 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 21:17:04,385 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0']
2025-09-11 21:17:04,385 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 21:17:05,552 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 21:17:05,552 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 21:17:05,653 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 21:17:05,909 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 21:17:05,909 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 21:17:05,910 - NetworkTopology - INFO - 线性拓扑创建完成
2025-09-11 21:17:05,910 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 4096 (方法: mstpd)
2025-09-11 21:17:05,910 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级4096 -> mstpd优先级1)
2025-09-11 21:17:06,034 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 21:17:06,034 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 8192 (方法: ovs)
2025-09-11 21:17:06,034 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 21:17:06,154 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 21:17:06,297 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-11 21:17:06,297 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 21:17:06,740 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:17:06,897 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Discarding 20000    128.2


2025-09-11 21:17:06,898 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 21:17:06,898 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:17:06,898 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 21:17:06,898 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:17:07,377 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:17:07,377 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:17:07,378 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:17:07,379 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:17:07,379 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:17:07,379 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:17:07,843 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.545秒
2025-09-11 21:17:08,388 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:17:08,539 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Discarding 20000    128.2


2025-09-11 21:17:08,540 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 21:17:08,540 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:17:08,541 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 21:17:08,541 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:17:09,001 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:17:09,001 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:17:09,002 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:17:09,002 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:17:09,002 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:17:09,003 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:17:09,286 - test_protocol_conformance - INFO - 使用端口br3进行状态转换测试
2025-09-11 21:17:09,286 - test_protocol_conformance - INFO - 禁用端口br3
2025-09-11 21:17:09,287 - FaultInjector_DUT - INFO - 断开链路: br3
2025-09-11 21:17:19,382 - FaultInjector_DUT - INFO - 链路已断开: br3
2025-09-11 21:17:24,791 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:17:24,948 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 20000    128.2


2025-09-11 21:17:24,949 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 21:17:24,950 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:17:24,950 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 21:17:24,950 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:17:25,413 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:17:25,413 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:17:25,414 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:17:25,414 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:17:25,415 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:17:25,415 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:17:25,702 - test_protocol_conformance - INFO - ✓ 端口br3已成功禁用
2025-09-11 21:17:25,702 - test_protocol_conformance - INFO - 重新启用端口br3并监控状态转换
2025-09-11 21:17:25,702 - FaultInjector_DUT - INFO - 恢复链路: br3
2025-09-11 21:17:25,868 - FaultInjector_DUT - INFO - 链路已恢复: br3
2025-09-11 21:17:26,323 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:17:26,476 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-11 21:17:26,477 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 21:17:26,477 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:17:26,477 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 21:17:26,477 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:17:26,945 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:17:26,945 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      LINK_DOWN
     current:    AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 0 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:17:26,946 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:17:26,946 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:17:26,947 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:17:26,947 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:17:27,246 - test_protocol_conformance - INFO - 端口br3状态转换: disabled
2025-09-11 21:17:29,680 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:17:29,839 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 21:17:29,840 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 21:17:29,841 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:17:29,841 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 21:17:29,841 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:17:30,321 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:17:30,322 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:17:30,323 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:17:30,323 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:17:30,323 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:17:30,323 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:17:30,618 - test_protocol_conformance - INFO - 端口br3状态转换: forwarding
2025-09-11 21:17:30,618 - test_protocol_conformance - INFO - 状态转换序列: ['disabled', 'forwarding']
2025-09-11 21:17:31,084 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:17:31,244 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 21:17:31,245 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 21:17:31,245 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:17:31,245 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 21:17:31,245 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:17:31,729 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:17:31,729 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:17:31,730 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:17:31,730 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:17:31,731 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:17:31,731 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:17:32,034 - test_protocol_conformance - INFO - ✓ 端口br3最终状态正确: forwarding
2025-09-11 21:17:32,034 - test_protocol_conformance - INFO - 端口状态转换测试完成
2025-09-11 21:17:32,035 - RSTPTest - INFO - 测试完成: test_port_state_transitions (耗时: 43.07秒)
2025-09-11 21:17:32,035 - RSTPTest - INFO - ============================================================

2025-09-11 21:17:32,037 - RSTPTest - INFO - ============================================================
2025-09-11 21:17:32,037 - RSTPTest - INFO - 开始测试: test_bpdu_propagation_and_keepalive
2025-09-11 21:17:32,038 - RSTPTest - INFO - ============================================================
2025-09-11 21:17:32,038 - test_protocol_conformance - INFO - 开始BPDU传播和保活机制测试
2025-09-11 21:17:32,038 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 21:17:32,039 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 21:17:32,039 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 21:17:32,039 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 21:17:32,039 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 21:17:32,039 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 21:17:32,040 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 21:17:32,040 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 21:17:32,040 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 21:17:32,566 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 21:17:32,566 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 21:17:32,566 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 21:17:32,725 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 21:17:33,849 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 21:17:33,849 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 21:17:33,850 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 21:17:33,850 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 21:17:33,850 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 21:17:34,333 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 21:17:34,825 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 21:17:34,825 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 21:17:35,022 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 21:17:35,022 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 21:17:35,022 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 21:17:35,022 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 21:17:35,023 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 21:17:35,023 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 21:17:35,023 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 21:17:35,023 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 21:17:35,533 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 21:17:40,013 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 21:17:40,148 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 21:17:40,148 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 21:17:40,148 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 21:17:40,148 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 21:17:40,149 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 21:17:41,332 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 21:17:42,522 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 21:17:42,522 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 21:17:42,621 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 21:17:42,887 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 21:17:42,887 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 21:17:42,887 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 21:17:42,888 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 21:17:42,888 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 21:17:42,888 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 21:17:42,888 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 21:17:42,888 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 21:18:13,241 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 21:19:47,282 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 21:19:57,363 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 21:19:57,363 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 21:19:57,364 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 21:19:57,364 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 21:19:57,364 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 21:21:02,426 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 21:21:57,090 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 21:21:57,091 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 21:21:57,186 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 21:22:04,372 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 21:22:04,372 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 21:22:04,372 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 21:22:04,372 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 4096 (方法: mstpd)
2025-09-11 21:22:04,372 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级4096 -> mstpd优先级1)
2025-09-11 21:22:04,503 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 21:22:04,503 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 8192 (方法: ovs)
2025-09-11 21:22:04,503 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 21:22:04,616 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 21:22:04,780 - NetworkTopology_TestNode2 - INFO - TestNode2: 设置网桥优先级 br0 = 12288 (方法: mstpd)
2025-09-11 21:22:04,780 - NetworkTopology_TestNode2 - INFO - TestNode2: 执行mstpd设置优先级命令 (标准优先级12288 -> mstpd优先级3)
2025-09-11 21:22:12,961 - NetworkTopology_TestNode2 - INFO - TestNode2: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 21:22:12,962 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-11 21:22:12,962 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 21:22:13,378 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:22:13,534 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 21:22:13,535 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 21:22:13,535 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:22:13,535 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 21:22:13,535 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:22:14,009 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:22:14,009 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:22:14,010 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:22:14,010 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:22:14,011 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:22:14,011 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:22:14,309 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.347秒
2025-09-11 21:22:14,795 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:22:14,958 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 21:22:14,959 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 21:22:14,960 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:22:14,960 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 21:22:14,960 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:22:15,424 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:22:15,424 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:22:15,425 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:22:15,425 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:22:15,426 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:22:15,426 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:22:15,713 - test_protocol_conformance - INFO - Hello Time: 2秒
2025-09-11 21:22:15,713 - test_protocol_conformance - INFO - 开始捕获BPDU报文
2025-09-11 21:22:15,714 - test_protocol_conformance - INFO - 在端口br3上开始BPDU捕获
2025-09-11 21:22:15,714 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br3, 数量: 10)
2025-09-11 21:22:25,861 - RSTPAnalyzer_DUT - INFO - 捕获到 4 个BPDU包
2025-09-11 21:22:25,862 - test_protocol_conformance - INFO - 端口br3捕获到4个BPDU
2025-09-11 21:22:25,862 - test_protocol_conformance - INFO - 在端口br4上开始BPDU捕获
2025-09-11 21:22:25,862 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br4, 数量: 10)
2025-09-11 21:22:36,002 - RSTPAnalyzer_DUT - INFO - 捕获到 4 个BPDU包
2025-09-11 21:22:36,002 - test_protocol_conformance - INFO - 端口br4捕获到4个BPDU
2025-09-11 21:22:36,002 - test_protocol_conformance - INFO - 总共捕获到8个BPDU
2025-09-11 21:22:36,002 - test_protocol_conformance - INFO - 端口br3平均BPDU间隔: 2.17秒
2025-09-11 21:22:36,003 - test_protocol_conformance - INFO - ✓ 端口br3BPDU周期性验证通过
2025-09-11 21:22:36,003 - test_protocol_conformance - INFO - 端口br4平均BPDU间隔: 2.00秒
2025-09-11 21:22:36,003 - test_protocol_conformance - INFO - ✓ 端口br4BPDU周期性验证通过
2025-09-11 21:22:36,003 - test_protocol_conformance - INFO - 端口br3BPDU: 时间戳=21:22:21.917677, RSTP=False
2025-09-11 21:22:36,003 - test_protocol_conformance - INFO - 端口br3BPDU: 时间戳=21:22:24.418657, RSTP=False
2025-09-11 21:22:36,003 - test_protocol_conformance - INFO - 端口br3BPDU: 时间戳=21:22:26.420545, RSTP=False
2025-09-11 21:22:36,003 - test_protocol_conformance - INFO - 端口br4BPDU: 时间戳=21:22:31.887957, RSTP=False
2025-09-11 21:22:36,004 - test_protocol_conformance - INFO - 端口br4BPDU: 时间戳=21:22:33.888740, RSTP=False
2025-09-11 21:22:36,004 - test_protocol_conformance - INFO - 端口br4BPDU: 时间戳=21:22:35.889535, RSTP=False
2025-09-11 21:22:36,004 - test_protocol_conformance - INFO - ✓ BPDU传播和保活机制验证完成
2025-09-11 21:22:36,005 - RSTPTest - INFO - 测试完成: test_bpdu_propagation_and_keepalive (耗时: 303.97秒)
2025-09-11 21:22:36,005 - RSTPTest - INFO - ============================================================

2025-09-11 21:22:36,007 - RSTPTest - INFO - ============================================================
2025-09-11 21:22:36,007 - RSTPTest - INFO - 开始测试: test_disabled_port_exclusion
2025-09-11 21:22:36,007 - RSTPTest - INFO - ============================================================
2025-09-11 21:22:36,008 - test_protocol_conformance - INFO - 开始禁用端口排除测试
2025-09-11 21:22:36,008 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 21:22:36,008 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 21:22:36,008 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 21:22:36,008 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 21:22:36,009 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 21:22:36,009 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 21:22:36,009 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 21:22:36,009 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 21:22:36,009 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 21:22:36,532 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 21:22:36,532 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 21:22:36,533 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 21:22:36,696 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 21:22:37,788 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 21:22:37,788 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 21:22:37,788 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 21:22:37,788 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 21:22:37,788 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 21:22:38,284 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 21:22:38,764 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 21:22:38,764 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 21:22:38,956 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 21:22:38,956 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 21:22:38,956 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 21:22:38,957 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 21:22:38,957 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 21:22:38,957 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 21:22:38,957 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 21:22:38,957 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 21:22:39,458 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 21:22:44,016 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 21:22:44,153 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 21:22:44,154 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 21:22:44,154 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 21:22:44,154 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 21:22:44,154 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 21:22:45,364 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 21:22:46,563 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 21:22:46,564 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 21:22:46,661 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 21:22:46,936 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 21:22:46,936 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 21:22:46,937 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 21:22:46,937 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 21:22:46,937 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 21:22:46,937 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 21:22:46,938 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 21:22:46,938 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 21:23:02,560 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 21:23:07,069 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 21:23:07,204 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 21:23:07,204 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 21:23:07,205 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 21:23:07,205 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 21:23:07,205 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 21:23:08,427 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 21:23:09,637 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 21:23:09,637 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 21:23:09,732 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 21:23:09,993 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 21:23:09,994 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 21:23:09,994 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 21:23:09,994 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 4096 (方法: mstpd)
2025-09-11 21:23:09,994 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级4096 -> mstpd优先级1)
2025-09-11 21:23:10,122 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 21:23:10,123 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 8192 (方法: ovs)
2025-09-11 21:23:10,123 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 21:23:10,235 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 21:23:10,403 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-11 21:23:10,404 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-11 21:23:10,866 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:23:11,017 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 21:23:11,018 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 21:23:11,018 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:23:11,018 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 21:23:11,019 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:23:11,491 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:23:11,491 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:23:11,492 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:23:11,493 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:23:11,493 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:23:11,493 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:23:11,788 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.384秒
2025-09-11 21:23:12,242 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:23:12,394 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 21:23:12,395 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 21:23:12,396 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:23:12,396 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 21:23:12,396 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:23:12,875 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:23:12,875 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:23:12,877 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:23:12,877 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:23:12,877 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:23:12,877 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:23:13,168 - test_protocol_conformance - INFO - 所有端口信息: {'br3': PortInfo(name='br3', role=<PortRole.ROOT: 'root'>, state=<PortState.FORWARDING: 'forwarding'>, path_cost=0, designated_bridge='', designated_port=''), 'br4': PortInfo(name='br4', role=<PortRole.ALTERNATE: 'alternate'>, state=<PortState.DISCARDING: 'discarding'>, path_cost=0, designated_bridge='', designated_port=''), 'SE_ETH2': PortInfo(name='SE_ETH2', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')}
2025-09-11 21:23:13,322 - test_protocol_conformance - INFO - RSTP show输出 (code=0): 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 21:23:13,323 - test_protocol_conformance - INFO - 初始活动端口: ['br3', 'br4']
2025-09-11 21:23:13,323 - test_protocol_conformance - INFO - 选择端口br4进行禁用测试
2025-09-11 21:23:13,324 - test_protocol_conformance - INFO - 禁用端口br4
2025-09-11 21:23:13,324 - FaultInjector_DUT - INFO - 断开链路: br4
2025-09-11 21:23:23,422 - FaultInjector_DUT - INFO - 链路已断开: br4
2025-09-11 21:23:23,423 - test_protocol_conformance - INFO - 禁用命令结果: ('', '', 0)
2025-09-11 21:23:23,586 - test_protocol_conformance - INFO - 端口br4配置: stdout='1
1
{rstp-enable="true", rstp-port-admin-edge="true", rstp-port-auto-edge="true", stp-path-cost="20000"}
', stderr='', code=0
2025-09-11 21:23:39,018 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:23:39,176 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  40000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Disabled   Discarding 20000    128.1
  br3        Root       Forwarding 20000    128.2


2025-09-11 21:23:39,177 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 21:23:39,178 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:23:39,178 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 21:23:39,178 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:23:39,650 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:23:39,651 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:23:39,652 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:23:39,652 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:23:39,653 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:23:39,653 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:23:39,948 - test_protocol_conformance - INFO - 禁用后所有端口状态: [('br3', 'forwarding'), ('br4', 'disabled'), ('SE_ETH2', 'disabled')]
2025-09-11 21:23:39,948 - test_protocol_conformance - INFO - 端口br4状态: disabled, 角色: alternate
2025-09-11 21:23:39,949 - test_protocol_conformance - INFO - 禁用后活动端口: ['br3']
2025-09-11 21:23:39,949 - test_protocol_conformance - INFO - 活动端口数量: 1, 初始活动端口数量: 2
2025-09-11 21:23:39,949 - test_protocol_conformance - INFO - 禁用后端口角色分布: {<PortRole.ROOT: 'root'>: ['br3']}
2025-09-11 21:23:40,421 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:23:40,578 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br3
  root-path-cost  40000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Disabled   Discarding 20000    128.1
  br3        Root       Forwarding 20000    128.2


2025-09-11 21:23:40,579 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 21:23:40,579 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:23:40,580 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 21:23:40,580 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:23:41,262 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:23:41,263 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:23:41,264 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:23:41,264 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:23:41,264 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:23:41,265 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:23:41,572 - RSTPAnalyzer_DUT - INFO - Root ID为unknown，判定为非根桥
2025-09-11 21:23:41,573 - test_protocol_conformance - INFO - 重新启用端口br4
2025-09-11 21:23:41,573 - FaultInjector_DUT - INFO - 恢复链路: br4
2025-09-11 21:23:41,746 - FaultInjector_DUT - INFO - 链路已恢复: br4
2025-09-11 21:23:57,181 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:23:57,342 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    8192
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 21:23:57,343 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 21:23:57,344 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:23:57,344 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/6e:b3:08:fa:01:34
2025-09-11 21:23:57,344 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:23:57,832 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:23:57,841 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:23:57,925 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:23:58,016 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:23:58,059 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:23:58,081 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:23:58,355 - test_protocol_conformance - INFO - ✓ 端口br4已重新启用，状态: discarding
2025-09-11 21:23:58,356 - test_protocol_conformance - INFO - ✓ 禁用端口排除测试完成
2025-09-11 21:23:58,357 - RSTPTest - INFO - 测试完成: test_disabled_port_exclusion (耗时: 82.35秒)
2025-09-11 21:23:58,358 - RSTPTest - INFO - ============================================================

2025-09-11 21:23:58,360 - RSTPTest - INFO - ============================================================
2025-09-11 21:23:58,361 - RSTPTest - INFO - 开始测试: test_topology_change_notification
2025-09-11 21:23:58,361 - RSTPTest - INFO - ============================================================
2025-09-11 21:23:58,363 - test_protocol_conformance - INFO - 开始拓扑变更通知测试
2025-09-11 21:23:58,363 - test_protocol_conformance - INFO - === 步骤1: 创建多网桥环形拓扑 ===
2025-09-11 21:23:59,227 - test_protocol_conformance - INFO - 创建网桥 SE_ETH2 (优先级: 32768)
2025-09-11 21:23:59,671 - test_protocol_conformance - INFO - 创建网桥 rstp2 (优先级: 36864)
2025-09-11 21:24:00,111 - test_protocol_conformance - INFO - 创建网桥 rstp3 (优先级: 40960)
2025-09-11 21:24:00,859 - test_protocol_conformance - INFO - ✓ 连接 rstp1 <-> rstp2
2025-09-11 21:24:01,611 - test_protocol_conformance - INFO - ✓ 连接 rstp2 <-> rstp3
2025-09-11 21:24:02,360 - test_protocol_conformance - INFO - ✓ 连接 rstp3 <-> rstp1
2025-09-11 21:24:02,360 - test_protocol_conformance - INFO - 等待RSTP初始收敛...
2025-09-11 21:24:12,361 - test_protocol_conformance - INFO - === 步骤2: 验证初始RSTP状态 ===
2025-09-11 21:24:12,421 - test_protocol_conformance - INFO - 
SE_ETH2 初始RSTP状态:
2025-09-11 21:24:12,421 - test_protocol_conformance - INFO -   ---- SE_ETH2 ----
2025-09-11 21:24:12,422 - test_protocol_conformance - INFO -   Root ID:
2025-09-11 21:24:12,422 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-11 21:24:12,422 - test_protocol_conformance - INFO -     stp-system-id   9a:5d:94:b5:40:43
2025-09-11 21:24:12,422 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-11 21:24:12,422 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-11 21:24:12,422 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-11 21:24:12,423 - test_protocol_conformance - INFO -     This bridge is the root
2025-09-11 21:24:12,423 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-11 21:24:12,423 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-11 21:24:12,423 - test_protocol_conformance - INFO -     stp-system-id   9a:5d:94:b5:40:43
2025-09-11 21:24:12,423 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-11 21:24:12,423 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-11 21:24:12,423 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-11 21:24:12,424 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-11 21:24:12,424 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-11 21:24:12,424 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-11 21:24:12,518 - test_protocol_conformance - INFO - 
rstp2 初始RSTP状态:
2025-09-11 21:24:12,519 - test_protocol_conformance - INFO -   ---- rstp2 ----
2025-09-11 21:24:12,519 - test_protocol_conformance - INFO -   Root ID:
2025-09-11 21:24:12,519 - test_protocol_conformance - INFO -     stp-priority    36864
2025-09-11 21:24:12,519 - test_protocol_conformance - INFO -     stp-system-id   a6:e6:cd:2c:09:45
2025-09-11 21:24:12,519 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-11 21:24:12,519 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-11 21:24:12,520 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-11 21:24:12,520 - test_protocol_conformance - INFO -     This bridge is the root
2025-09-11 21:24:12,520 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-11 21:24:12,520 - test_protocol_conformance - INFO -     stp-priority    36864
2025-09-11 21:24:12,520 - test_protocol_conformance - INFO -     stp-system-id   a6:e6:cd:2c:09:45
2025-09-11 21:24:12,520 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-11 21:24:12,521 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-11 21:24:12,521 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-11 21:24:12,521 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-11 21:24:12,521 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-11 21:24:12,521 - test_protocol_conformance - INFO -     veth12b    Designated Forwarding 2000     128.1
2025-09-11 21:24:12,521 - test_protocol_conformance - INFO -     veth23a    Designated Forwarding 2000     128.2
2025-09-11 21:24:12,522 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-11 21:24:12,522 - test_protocol_conformance - INFO -   → 有转发端口
2025-09-11 21:24:12,621 - test_protocol_conformance - INFO - 
rstp3 初始RSTP状态:
2025-09-11 21:24:12,621 - test_protocol_conformance - INFO -   ---- rstp3 ----
2025-09-11 21:24:12,621 - test_protocol_conformance - INFO -   Root ID:
2025-09-11 21:24:12,622 - test_protocol_conformance - INFO -     stp-priority    36864
2025-09-11 21:24:12,622 - test_protocol_conformance - INFO -     stp-system-id   a6:e6:cd:2c:09:45
2025-09-11 21:24:12,622 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-11 21:24:12,622 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-11 21:24:12,622 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-11 21:24:12,623 - test_protocol_conformance - INFO -     root-port       veth23b
2025-09-11 21:24:12,623 - test_protocol_conformance - INFO -     root-path-cost  2000
2025-09-11 21:24:12,623 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-11 21:24:12,623 - test_protocol_conformance - INFO -     stp-priority    40960
2025-09-11 21:24:12,623 - test_protocol_conformance - INFO -     stp-system-id   b6:a1:ae:95:15:4c
2025-09-11 21:24:12,623 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-11 21:24:12,623 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-11 21:24:12,623 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-11 21:24:12,624 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-11 21:24:12,624 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-11 21:24:12,624 - test_protocol_conformance - INFO -     veth23b    Root       Forwarding 2000     128.1
2025-09-11 21:24:12,624 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-11 21:24:12,624 - test_protocol_conformance - INFO -   → 有转发端口
2025-09-11 21:24:12,624 - test_protocol_conformance - INFO - === 步骤3: 分析网络拓扑 ===
2025-09-11 21:24:12,625 - test_protocol_conformance - INFO - ✓ SE_ETH2 是根桥
2025-09-11 21:24:12,625 - test_protocol_conformance - INFO - ✓ rstp2 是根桥
2025-09-11 21:24:12,625 - test_protocol_conformance - INFO - === 步骤4: 触发拓扑变更 ===
2025-09-11 21:24:12,625 - test_protocol_conformance - INFO - 断开活动端口: veth31a
2025-09-11 21:24:17,993 - test_protocol_conformance - INFO - ✓ rstp3 状态已变化
2025-09-11 21:24:23,088 - test_protocol_conformance - INFO - === 步骤5: 验证拓扑变更 ===
2025-09-11 21:24:23,139 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: veth12a, 数量: 5)
2025-09-11 21:24:28,292 - RSTPAnalyzer_DUT - INFO - 捕获到 2 个BPDU包
2025-09-11 21:24:28,292 - test_protocol_conformance - INFO - 在 veth12a 捕获到 2 个BPDU
2025-09-11 21:24:28,292 - test_protocol_conformance - INFO - === 步骤6: 最终验证 ===
2025-09-11 21:24:28,293 - test_protocol_conformance - INFO - ✓ 测试通过：检测到拓扑变更
2025-09-11 21:24:28,389 - test_protocol_conformance - INFO - 
========== SE_ETH2 最终状态 ==========
2025-09-11 21:24:28,389 - test_protocol_conformance - INFO - ---- SE_ETH2 ----
2025-09-11 21:24:28,389 - test_protocol_conformance - INFO - Root ID:
2025-09-11 21:24:28,390 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-11 21:24:28,390 - test_protocol_conformance - INFO -   stp-system-id   9a:5d:94:b5:40:43
2025-09-11 21:24:28,390 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-11 21:24:28,390 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-11 21:24:28,390 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-11 21:24:28,390 - test_protocol_conformance - INFO -   This bridge is the root
2025-09-11 21:24:28,390 - test_protocol_conformance - INFO - Bridge ID:
2025-09-11 21:24:28,391 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-11 21:24:28,391 - test_protocol_conformance - INFO -   stp-system-id   9a:5d:94:b5:40:43
2025-09-11 21:24:28,391 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-11 21:24:28,391 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-11 21:24:28,391 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-11 21:24:28,391 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-11 21:24:28,392 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-11 21:24:28,493 - test_protocol_conformance - INFO - 
========== rstp2 最终状态 ==========
2025-09-11 21:24:28,493 - test_protocol_conformance - INFO - ---- rstp2 ----
2025-09-11 21:24:28,493 - test_protocol_conformance - INFO - Root ID:
2025-09-11 21:24:28,493 - test_protocol_conformance - INFO -   stp-priority    36864
2025-09-11 21:24:28,494 - test_protocol_conformance - INFO -   stp-system-id   a6:e6:cd:2c:09:45
2025-09-11 21:24:28,494 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-11 21:24:28,494 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-11 21:24:28,494 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-11 21:24:28,494 - test_protocol_conformance - INFO -   This bridge is the root
2025-09-11 21:24:28,494 - test_protocol_conformance - INFO - Bridge ID:
2025-09-11 21:24:28,494 - test_protocol_conformance - INFO -   stp-priority    36864
2025-09-11 21:24:28,495 - test_protocol_conformance - INFO -   stp-system-id   a6:e6:cd:2c:09:45
2025-09-11 21:24:28,495 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-11 21:24:28,495 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-11 21:24:28,495 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-11 21:24:28,495 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-11 21:24:28,495 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-11 21:24:28,495 - test_protocol_conformance - INFO -   veth12b    Designated Forwarding 2000     128.1
2025-09-11 21:24:28,496 - test_protocol_conformance - INFO -   veth23a    Designated Forwarding 2000     128.2
2025-09-11 21:24:28,592 - test_protocol_conformance - INFO - 
========== rstp3 最终状态 ==========
2025-09-11 21:24:28,593 - test_protocol_conformance - INFO - ---- rstp3 ----
2025-09-11 21:24:28,593 - test_protocol_conformance - INFO - Root ID:
2025-09-11 21:24:28,593 - test_protocol_conformance - INFO -   stp-priority    36864
2025-09-11 21:24:28,594 - test_protocol_conformance - INFO -   stp-system-id   a6:e6:cd:2c:09:45
2025-09-11 21:24:28,594 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-11 21:24:28,594 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-11 21:24:28,594 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-11 21:24:28,594 - test_protocol_conformance - INFO -   root-port       veth23b
2025-09-11 21:24:28,594 - test_protocol_conformance - INFO -   root-path-cost  2000
2025-09-11 21:24:28,595 - test_protocol_conformance - INFO - Bridge ID:
2025-09-11 21:24:28,595 - test_protocol_conformance - INFO -   stp-priority    40960
2025-09-11 21:24:28,595 - test_protocol_conformance - INFO -   stp-system-id   b6:a1:ae:95:15:4c
2025-09-11 21:24:28,595 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-11 21:24:28,595 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-11 21:24:28,596 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-11 21:24:28,596 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-11 21:24:28,596 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-11 21:24:28,596 - test_protocol_conformance - INFO -   veth23b    Root       Forwarding 2000     128.1
2025-09-11 21:24:28,596 - test_protocol_conformance - INFO -   veth31a    Designated Forwarding 2000     128.2
2025-09-11 21:24:28,597 - test_protocol_conformance - INFO - 
=== 诊断信息 ===
2025-09-11 21:24:28,697 - test_protocol_conformance - INFO - 系统日志中的STP/RSTP信息:
2025-09-11 21:24:28,698 - test_protocol_conformance - INFO - [641023.880984] rstp2: entered promiscuous mode
[641024.317546] rstp3: entered promiscuous mode

2025-09-11 21:24:28,795 - test_protocol_conformance - INFO - OVS日志中的拓扑变更信息:
2025-09-11 21:24:28,795 - test_protocol_conformance - INFO - 2025-09-11T13:24:22.303Z|28691|bridge|WARN|br0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-11T13:24:22.303Z|28692|bridge|WARN|rstp0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-11T13:24:22.317Z|28696|bridge|WARN|br0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-11T13:24:22.317Z|28697|bridge|WARN|rstp0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-11T13:24:27.462Z|28701|bridge|WARN|br0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-11T13:24:27.462Z|28702|bridge|WARN|rstp0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-11T13:24:32.459Z|28706|bridge|WARN|br0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-11T13:24:32.459Z|28707|bridge|WARN|rstp0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP

2025-09-11 21:24:28,795 - test_protocol_conformance - INFO - === 清理测试环境 ===
2025-09-11 21:24:29,470 - test_protocol_conformance - INFO - 拓扑变更通知测试完成
2025-09-11 21:24:29,471 - RSTPTest - INFO - 测试完成: test_topology_change_notification (耗时: 31.11秒)
2025-09-11 21:24:29,472 - RSTPTest - INFO - ============================================================

2025-09-11 21:24:29,472 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-11 21:24:29,472 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-11 21:24:29,473 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-11 21:24:29,608 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-11 21:24:29,608 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-11 21:24:29,729 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-11 21:24:29,729 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-11 21:24:29,864 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-11 21:24:29,864 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-11 21:24:29,865 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-11 21:24:29,865 - NetworkTopology - INFO - DUT: DUT设备，直接使用OVS方法
2025-09-11 21:24:29,865 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-11 21:24:29,865 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-11 21:24:29,921 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-11 21:24:29,921 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-11 21:24:30,095 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-11 21:24:30,096 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-11 21:24:30,096 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-11 21:24:30,096 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-11 21:24:30,096 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-11 21:24:30,152 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-11 21:24:30,152 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-11 21:24:30,337 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-11 21:24:30,338 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-11 21:24:30,338 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-11 21:24:30,338 - RSTPTest - INFO - ============================================================
2025-09-11 21:24:30,338 - RSTPTest - INFO - 开始测试: test_root_bridge_hijack_attack
2025-09-11 21:24:30,339 - RSTPTest - INFO - ============================================================
2025-09-11 21:24:30,339 - test_security - INFO - 开始根网桥劫持攻击测试
2025-09-11 21:24:30,339 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 21:24:30,340 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 21:24:30,340 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 21:24:30,340 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 21:24:30,340 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 21:24:30,340 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 21:24:30,340 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 21:24:30,341 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 21:24:30,341 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 21:24:30,838 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 21:24:30,838 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 21:24:30,839 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 21:24:30,995 - NetworkTopology - INFO - DUT: 创建新网桥SE_ETH2
2025-09-11 21:24:32,163 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 21:24:32,163 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 21:24:32,163 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 21:24:32,164 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 21:24:32,164 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 21:24:32,643 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 21:24:33,091 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 21:24:33,091 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 21:24:33,262 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 21:24:33,262 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 21:24:33,263 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 21:24:33,263 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 21:24:33,263 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 21:24:33,263 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 21:24:33,263 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 21:24:33,263 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 21:24:33,770 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 21:24:38,286 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 21:24:48,369 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 21:24:48,369 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 21:24:48,369 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 21:24:48,369 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 21:24:48,370 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 21:25:56,293 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 21:26:52,991 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 21:26:52,992 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 21:26:53,088 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 21:27:03,304 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 21:27:03,305 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 21:27:03,305 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 21:27:03,305 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 21:27:03,305 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 21:27:03,305 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 21:27:03,305 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 21:27:03,306 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 21:27:03,818 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 21:27:08,327 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 21:27:08,449 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 21:27:08,449 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 21:27:08,449 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 21:27:08,449 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 21:27:08,449 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 21:27:09,667 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 21:27:10,865 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 21:27:10,866 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 21:27:10,962 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 21:27:11,244 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 21:27:11,245 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 21:27:11,245 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 21:27:11,245 - NetworkTopology_DUT - INFO - DUT: 设置网桥优先级 SE_ETH2 = 16384 (方法: ovs)
2025-09-11 21:27:11,245 - NetworkTopology_DUT - INFO - DUT: 执行OVS设置优先级命令
2025-09-11 21:27:11,364 - NetworkTopology_DUT - INFO - DUT: OVS设置优先级结果: ('1\r\n1\r\n', '', 0)
2025-09-11 21:27:11,511 - NetworkTopology_TestNode1 - INFO - TestNode1: 设置网桥优先级 br0 = 32768 (方法: mstpd)
2025-09-11 21:27:11,512 - NetworkTopology_TestNode1 - INFO - TestNode1: 执行mstpd设置优先级命令 (标准优先级32768 -> mstpd优先级8)
2025-09-11 21:27:21,590 - NetworkTopology_TestNode1 - INFO - TestNode1: mstpd设置优先级结果: ('8N10xiaol\r\n8N10xiaol\r\n', '', 0)
2025-09-11 21:27:26,591 - test_security - INFO - 验证DUT和TestNode的优先级设置...
2025-09-11 21:27:26,703 - test_security - INFO - DUT实际优先级: 1
1
"16384
2025-09-11 21:27:26,704 - test_security - WARNING - DUT优先级设置可能未生效，期望16384，实际1
1
"16384
2025-09-11 21:27:27,181 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:27:27,342 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    16384
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    16384
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Designated Forwarding 20000    128.1
  br4        Designated Forwarding 20000    128.2


2025-09-11 21:27:27,344 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 16384
2025-09-11 21:27:27,344 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 21:27:27,344 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 4000/90:12:10:b5:7d:f7
2025-09-11 21:27:27,345 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 4000/90:12:10:b5:7d:f7
2025-09-11 21:27:27,815 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:27:27,815 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:27:27,816 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:27:27,816 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:27:27,816 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:27:27,817 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:27:28,104 - RSTPAnalyzer_DUT - INFO - 根桥检查: bridge_id='4000/90:12:10:b5:7d:f7', root_id='4000/90:12:10:b5:7d:f7', is_root=True
2025-09-11 21:27:28,562 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:27:28,713 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    16384
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    16384
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br3        Designated Forwarding 20000    128.1
  br4        Designated Forwarding 20000    128.2


2025-09-11 21:27:28,715 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 16384
2025-09-11 21:27:28,715 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 21:27:28,716 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 4000/90:12:10:b5:7d:f7
2025-09-11 21:27:28,716 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 4000/90:12:10:b5:7d:f7
2025-09-11 21:27:29,175 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:27:29,176 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:27:29,177 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:27:29,177 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:27:29,177 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:27:29,178 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:27:29,468 - test_security - INFO - 初始根网桥: 4000/90:12:10:b5:7d:f7
2025-09-11 21:27:29,584 - test_security - INFO - 注入前RSTP RX计数: 83
2025-09-11 21:27:29,584 - test_security - INFO - 在DUT接口['br3', 'br4']上启动BPDU抓包
2025-09-11 21:27:29,687 - test_security - INFO - 接口br3状态: 1
2025-09-11 21:27:29,784 - test_security - INFO - 已启动br3接口的BPDU抓包，日志文件：/tmp/tcpdump_br3.log
2025-09-11 21:27:30,859 - test_security - INFO - tcpdump进程已启动 (PID: 1
1
1548628
1548629)
2025-09-11 21:27:30,943 - test_security - INFO - 接口br4状态: 1
2025-09-11 21:27:31,040 - test_security - INFO - 已启动br4接口的BPDU抓包，日志文件：/tmp/tcpdump_br4.log
2025-09-11 21:27:32,115 - test_security - INFO - tcpdump进程已启动 (PID: 1
1
1548639
1548640)
2025-09-11 21:27:32,115 - test_security - INFO - === 检查网络连接状态 ===
2025-09-11 21:27:32,171 - test_security - INFO - TestNode1路由表:
default via 192.168.13.2 dev eth1 proto dhcp src 192.168.13.136 metric 150 
192.168.13.0/24 dev eth1 proto kernel scope link src 192.168.13.136 metric 150 
192.168.184.0/24 dev eth0 proto kernel scope link src 192.168.184.131 metric 148 
192.168.184.0/24 dev eth2 proto kernel scope link src 192.168.184.143 metric 150 

2025-09-11 21:27:32,270 - test_security - INFO - TestNode1 eth0接口状态:
2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel master br0 state UP group default qlen 1000
    link/ether 00:50:56:00:00:01 brd ff:ff:ff:ff:ff:ff permaddr 00:50:56:3f:8c:a5
    inet 192.168.184.131/24 brd 192.168.184.255 scope global dynamic noprefixroute eth0
       valid_lft 1625sec preferred_lft 1625sec
    inet6 fe80::8c3f:79f1:c04b:2792/64 scope link noprefixroute 
       valid_lft forever preferred_lft forever

2025-09-11 21:27:32,327 - test_security - INFO - DUT br3接口状态:
1
1
23: br3@br0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue master ovs-system state UP group default qlen 1000
    link/ether 90:12:10:b5:7d:f7 brd ff:ff:ff:ff:ff:ff
    inet 192.168.184.138/24 brd 192.168.184.255 scope global dynamic br3
       valid_lft 1604sec preferred_lft 1604sec
    inet6 fe80::9212:10ff:feb5:7df7/64 scope link 
       valid_lft forever preferred_lft forever

2025-09-11 21:27:34,432 - test_security - INFO - TestNode1到DUT连通性正常
2025-09-11 21:27:34,432 - test_security - INFO - === 开始注入恶意BPDU进行根桥劫持攻击 ===
2025-09-11 21:27:34,432 - test_security - INFO - 注入接口: eth2 (连接到DUT)
2025-09-11 21:27:34,433 - test_security - INFO - 恶意优先级: 0 (试图成为根桥)
2025-09-11 21:27:34,433 - test_security - INFO - 源MAC地址: 00:11:22:33:44:55
2025-09-11 21:27:34,433 - test_security - INFO - 注入数量: 10个BPDU
2025-09-11 21:27:34,433 - test_security - INFO - 注入间隔: 2.0秒
2025-09-11 21:27:34,527 - test_security - INFO - 注入接口eth2状态: 5:
2025-09-11 21:27:34,528 - test_security - INFO - 启动增强BPDU抓包
2025-09-11 21:27:34,589 - test_security - INFO - 检测到的网络接口: ['1', 'sit0@NONE', 'ip6tnl0@NONE', 'enp1s0', 'br0', 'SE_ETH1', 'ovs-system', 'SE_ETH4', 'SE_ETH6', 'br-4a389c520921', 'br-b2bd2c7fedc8', 'docker0', 'veth45650b3@if17', 'br3@br0', 'br4@br0', 'veth6d7f1eb@if25', 'veth01b@veth01a', 'veth01a@veth01b', 'veth20b@veth20a', 'veth20a@veth20b', 'shared_segment', 'vrstp0b@vrstp0a', 'vrstp0a@vrstp0b', 'vrstp1b@vrstp1a', 'vrstp1a@vrstp1b', 'rstp0', 'veth12b@veth12a', 'veth12a@veth12b', 'veth23b@veth23a', 'veth23a@veth23b', 'veth31b@veth31a', 'veth31a@veth31b', 'SE_ETH2']
2025-09-11 21:27:34,590 - FaultInjector_TestNode1 - WARNING - 注入恶意BPDU到 eth2，优先级: 0
2025-09-11 21:27:34,645 - FaultInjector_TestNode1 - INFO - 网桥状态检查: ('bridge name\tbridge id\t\tSTP enabled\tinterfaces\nbr0\t\t8000.6eb308fa0134\tyes\t\teth0\n\t\t\t\t\t\t\teth2\ntest_br\t\t8000.322c30a3a0e1\tyes\t\t\n', '', 0)
2025-09-11 21:27:34,645 - FaultInjector_TestNode1 - INFO - 尝试通过接口 eth2 发送BPDU
2025-09-11 21:27:34,742 - FaultInjector_TestNode1 - INFO - 接口 eth2 在网桥中，临时移除
2025-09-11 21:28:14,198 - FaultInjector_TestNode1 - INFO - 接口 eth2 BPDU注入脚本执行结果 (code=0):
2025-09-11 21:28:14,199 - FaultInjector_TestNode1 - INFO - STDOUT: 8N10xiaol
8N10xiaol
=== 恶意BPDU注入器 (增强版) ===
接口: eth2
优先级: 0
源MAC: 00:11:22:33:44:55
数量: 10, 间隔: 2.0s

开始BPDU注入...

=== 方法1: RAW Socket发送 ===
RAW Socket发送BPDU #1
RAW Socket发送BPDU #2
RAW Socket发送BPDU #3
RAW Socket发送BPDU #4
RAW Socket发送BPDU #5
RAW Socket发送BPDU #6
RAW Socket发送BPDU #7
RAW Socket发送BPDU #8
RAW Socket发送BPDU #9
RAW Socket发送BPDU #10
RAW Socket方法完成: 10/10

✓ RAW Socket方法成功

=== 注入结果 ===
总共发送: 10/10 个BPDU
目标: 劫持根桥 (优先级 0)

✓ BPDU注入成功完成

2025-09-11 21:28:14,201 - FaultInjector_TestNode1 - WARNING - 接口 eth2 恶意BPDU注入成功 (优先级: 0)
2025-09-11 21:28:14,201 - FaultInjector_TestNode1 - INFO - 恢复接口 eth2 到网桥
2025-09-11 21:28:24,821 - FaultInjector_TestNode1 - INFO - 尝试通过接口 eth0 发送BPDU
2025-09-11 21:28:24,877 - FaultInjector_TestNode1 - INFO - 接口 eth0 不在任何网桥中
2025-09-11 21:28:51,267 - FaultInjector_TestNode1 - INFO - 接口 eth0 BPDU注入脚本执行结果 (code=0):
2025-09-11 21:28:51,267 - FaultInjector_TestNode1 - INFO - STDOUT: 8N10xiaol
8N10xiaol
=== 恶意BPDU注入器 (增强版) ===
接口: eth0
优先级: 0
源MAC: 00:11:22:33:44:55
数量: 10, 间隔: 2.0s

开始BPDU注入...

=== 方法1: RAW Socket发送 ===
RAW Socket发送BPDU #1
RAW Socket发送BPDU #2
RAW Socket发送BPDU #3
RAW Socket发送BPDU #4
RAW Socket发送BPDU #5
RAW Socket发送BPDU #6
RAW Socket发送BPDU #7
RAW Socket发送BPDU #8
RAW Socket发送BPDU #9
RAW Socket发送BPDU #10
RAW Socket方法完成: 10/10

✓ RAW Socket方法成功

=== 注入结果 ===
总共发送: 10/10 个BPDU
目标: 劫持根桥 (优先级 0)

✓ BPDU注入成功完成

2025-09-11 21:28:51,268 - FaultInjector_TestNode1 - WARNING - 接口 eth0 恶意BPDU注入成功 (优先级: 0)
2025-09-11 21:28:51,269 - FaultInjector_TestNode1 - INFO - 尝试通过接口 eth1 发送BPDU
2025-09-11 21:28:51,366 - FaultInjector_TestNode1 - INFO - 接口 eth1 不在任何网桥中
2025-09-11 21:29:09,766 - FaultInjector_TestNode1 - INFO - 接口 eth1 BPDU注入脚本执行结果 (code=0):
2025-09-11 21:29:09,766 - FaultInjector_TestNode1 - INFO - STDOUT: 8N10xiaol
8N10xiaol
=== 恶意BPDU注入器 (增强版) ===
接口: eth1
优先级: 0
源MAC: 00:11:22:33:44:55
数量: 10, 间隔: 2.0s

开始BPDU注入...

=== 方法1: RAW Socket发送 ===
RAW Socket发送BPDU #1
RAW Socket发送BPDU #2
RAW Socket发送BPDU #3
RAW Socket发送BPDU #4
RAW Socket发送BPDU #5
RAW Socket发送BPDU #6
RAW Socket发送BPDU #7
RAW Socket发送BPDU #8
RAW Socket发送BPDU #9
RAW Socket发送BPDU #10
RAW Socket方法完成: 10/10

✓ RAW Socket方法成功

=== 注入结果 ===
总共发送: 10/10 个BPDU
目标: 劫持根桥 (优先级 0)

✓ BPDU注入成功完成

2025-09-11 21:29:09,767 - FaultInjector_TestNode1 - WARNING - 接口 eth1 恶意BPDU注入成功 (优先级: 0)
2025-09-11 21:29:09,768 - FaultInjector_TestNode1 - INFO - BPDU注入总结: 3/3 个接口成功
2025-09-11 21:29:09,768 - FaultInjector_TestNode1 - WARNING - 恶意BPDU注入完成 - 成功接口数: 3
2025-09-11 21:29:09,768 - test_security - INFO - 恶意BPDU注入完成，等待网络收敛...
2025-09-11 21:29:24,769 - test_security - INFO - 停止增强BPDU抓包并分析结果
2025-09-11 21:29:27,901 - test_security - WARNING - 未找到任何抓包文件
2025-09-11 21:29:27,902 - test_security - INFO - DUT接口捕获到的BPDU数量: 0
2025-09-11 21:29:28,009 - test_security - INFO - 注入后RSTP RX计数: 3
2025-09-11 21:29:28,009 - test_security - WARNING - 警告：DUT接口未捕获到任何BPDU，攻击可能未成功送达
2025-09-11 21:29:28,009 - test_security - INFO - 建议检查：1) 网络连接 2) 接口配置 3) BPDU格式
2025-09-11 21:29:28,009 - test_security - INFO - 
=== 诊断BPDU送达失败原因 ===
2025-09-11 21:29:28,010 - test_security - INFO - 1. 检查TestNode注入接口状态
2025-09-11 21:29:28,065 - test_security - INFO - TestNode eth2状态: 5: eth2: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000
    link/ether 00:e0:0c:25:0c:01 brd ff:ff:ff:ff:ff:ff

2025-09-11 21:29:28,065 - test_security - INFO - 2. 检查TestNode到DUT的连通性
2025-09-11 21:29:30,209 - test_security - INFO - TestNode到DUT连通性正常
2025-09-11 21:29:30,210 - test_security - INFO - 3. 检查DUT的网桥配置
2025-09-11 21:29:30,274 - test_security - INFO - DUT OVS配置:
1
1
8c812ea9-3b0c-46a1-bd3c-ef3904d38c1a
    Bridge SE_ETH2
        Port br4
            Interface br4
        Port br3
            Interface br3
        Port SE_ETH2
            Interface SE_ETH2
                type: internal
    Bridge SE_ETH4
        Port SE_ETH4
            Interface SE_ETH4
                type: internal
    Bridge SE_ETH6
        Port SE_ETH6
            Interface SE_ETH6
                type: internal
    Bridge rstp0
        Port rstp0
            Interface rstp0
                type: internal
    Bridge br0
        Port eth0
            Interface eth0
                error: "could not open network device eth0 (No such device)"
        Port br0
            Interface br0
                type: internal
                error: "could not add network device br0 to ofproto (File exists)"
        Port eth2
            Interface eth2
                error: "could not open network device eth2 (No such device)"
    ovs_version: "3.1.0"

2025-09-11 21:29:30,275 - test_security - INFO - 4. 检查DUT的RSTP状态
2025-09-11 21:29:30,381 - test_security - INFO - DUT网桥状态:
1
1
_uuid               : 4cfd2afd-ab86-476f-b985-45abaa45c58a
auto_attach         : []
controller          : []
datapath_id         : "0000fe2afd4c6f47"
datapath_type       : ""
datapath_version    : "<unknown>"
external_ids        : {}
fail_mode           : []
flood_vlans         : []
flow_tables         : {}
ipfix               : []
mcast_snooping_enable: false
mirrors             : []
name                : SE_ETH4
netflow             : []
other_config        : {}
ports               : [203d7a2c-23ba-473b-9053-b3f6c96f4e91]
protocols           : []
rstp_enable         : false
rstp_status         : {}
sflow               : []
status              : {}
stp_enable          : false

_uuid               : 7d2e9ab1-8b40-4162-af13-a58518fec6e4
auto_attach         : []
controller          : []
datapath_id         : "0000b29a2e7d6241"
datapath_type       : ""
datapath_version    : "<unknown>"
external_ids        : {}
fail_mode           : []
flood_vlans         : []
flow_tables         : {}
ipfix               : []
mcast_snooping_enable: false
mirrors             : []
name                : rstp0
netflow             : []
other_config        : {stp-forward-delay="15", stp-hello-time="2", stp-max-age="20", stp-priority="32768"}
ports               : [65a8428d-7b51-4a45-aaf1-ad6e8c6ca015]
protocols           : []
rstp_enable         : true
rstp_status         : {rstp_bridge_id="8.000.b29a2e7d6241", rstp_bridge_port_id="0000", rstp_designated_id="8.000.b29a2e7d6241", rstp_designated_port_id="0000", rstp_root_id="8.000.b29a2e7d6241", rstp_root_path_cost="0"}
sflow               : []
status              : {}
stp_enable          : true

_uuid               : e5b48cd9-ea14-4281-bc70-21ed0c5e4dfa
auto_attach         : []
controller          : []
datapath_id         : "0000da8cb4e58142"
datapath_type       : ""
datapath_version    : "<unknown>"
external_ids        : {}
fail_mode           : []
flood_vlans         : []
flow_tables         : {}
ipfix               : []
mcast_snooping_enable: false
mirrors             : []
name                : br0
netflow             : []
other_config        : {stp-forward-delay="15", stp-hello-time="2", stp-max-age="20", stp-priority="32768"}
ports               : [989831bf-8e9c-4ddc-9d24-559534a3c944, b6bbf1a9-054d-46a3-8581-6a80bcd62ed6, d9f0253e-af81-41f5-bf62-0f6ea2ca7257]
protocols           : []
rstp_enable         : true
rstp_status         : {rstp_bridge_id="8.000.da8cb4e58142", rstp_bridge_port_id="0000", rstp_designated_id="8.000.da8cb4e58142", rstp_designated_port_id="0000", rstp_root_id="8.000.da8cb4e58142", rstp_root_path_cost="0"}
sflow               : []
status              : {}
stp_enable          : true

_uuid               : 65b4ed9a-9bc8-4913-9890-905cbf97401a
auto_attach         : []
controller          : []
datapath_id         : "00009aedb4651349"
datapath_type       : ""
datapath_version    : "<unknown>"
external_ids        : {}
fail_mode           : []
flood_vlans         : []
flow_tables         : {}
ipfix               : []
mcast_snooping_enable: false
mirrors             : []
name                : SE_ETH6
netflow             : []
other_config        : {}
ports               : [2d77a04e-7989-4b12-b37b-ea0d1eecdd46]
protocols           : []
rstp_enable         : false
rstp_status         : {}
sflow               : []
status              : {}
stp_enable          : false

_uuid               : 1ad4fb76-1895-49aa-89ec-98f306f4f43a
auto_attach         : []
controller          : []
datapath_id         : "0000901210b57df7"
datapath_type       : ""
datapath_version    : "<unknown>"
external_ids        : {}
fail_mode           : []
flood_vlans         : []
flow_tables         : {}
ipfix               : []
mcast_snooping_enable: false
mirrors             : []
name                : SE_ETH2
netflow             : []
other_config        : {rstp-priority="4096", stp-forward-delay="15", stp-hello-time="2", stp-max-age="20", stp-priority="4096"}
ports               : [13b8bc96-0a95-41be-bbae-0b6bbfae22d0, 39969ec2-d708-4ec3-94cd-81c9741fecc9, f4403b56-390f-4be3-91d8-f45566985277]
protocols           : []
rstp_enable         : true
rstp_status         : {rstp_bridge_id="1.000.901210b57df7", rstp_bridge_port_id="0000", rstp_designated_id="1.000.901210b57df7", rstp_designated_port_id="0000", rstp_root_id="1.000.901210b57df7", rstp_root_path_cost="0"}
sflow               : []
status              : {}
stp_enable          : true

2025-09-11 21:29:30,386 - test_security - INFO - 5. 测试简单的网络包发送
2025-09-11 21:29:31,363 - test_security - INFO - 测试包发送结果 (code=0): 8N10xiaol
8N10xiaol
.
Sent 1 packets.
测试包发送成功

2025-09-11 21:29:31,364 - test_security - INFO - 6. 建议的修复措施:
2025-09-11 21:29:31,364 - test_security - INFO -    - 确认TestNode和DUT之间的网络连接
2025-09-11 21:29:31,364 - test_security - INFO -    - 检查防火墙设置是否阻止BPDU
2025-09-11 21:29:31,364 - test_security - INFO -    - 验证scapy权限和网络接口访问权限
2025-09-11 21:29:31,364 - test_security - INFO -    - 考虑使用不同的注入接口(eth0, eth1, eth2)
2025-09-11 21:29:31,365 - test_security - INFO -    - 检查DUT的STP/RSTP配置是否正确启用
2025-09-11 21:29:31,779 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:29:31,931 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    4096
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    4096
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Designated Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 21:29:31,932 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 4096
2025-09-11 21:29:31,933 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 90:12:10:b5:7d:f7
2025-09-11 21:29:31,933 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 1000/90:12:10:b5:7d:f7
2025-09-11 21:29:31,933 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 1000/90:12:10:b5:7d:f7
2025-09-11 21:29:32,393 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:29:32,393 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:29:32,395 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:29:32,395 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:29:32,395 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:29:32,395 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:29:32,682 - test_security - INFO - 
=== 根桥劫持攻击测试结果分析 ===
2025-09-11 21:29:32,682 - test_security - INFO - 注入前RSTP接收计数: 83
2025-09-11 21:29:32,682 - test_security - INFO - 注入后RSTP接收计数: 3
2025-09-11 21:29:32,683 - test_security - INFO - 原始根桥ID: 4000/90:12:10:b5:7d:f7
2025-09-11 21:29:32,683 - test_security - INFO - 当前根桥ID: 1000/90:12:10:b5:7d:f7
2025-09-11 21:29:32,683 - test_security - INFO - DUT是否仍为根桥: True
2025-09-11 21:29:32,683 - test_security - INFO - 恶意BPDU是否送达: False
2025-09-11 21:29:32,683 - test_security - INFO - 
测试结果: 可能虚假PASS（BPDU未送达）
2025-09-11 21:29:32,683 - test_security - INFO - 测试状态: UNCERTAIN
2025-09-11 21:29:32,684 - test_security - INFO - 建议: 需要检查网络连接、BPDU注入机制或测试环境配置
2025-09-11 21:29:32,684 - test_security - INFO - ==================================================
2025-09-11 21:29:32,732 - RSTPTest - INFO - 测试完成: test_root_bridge_hijack_attack (耗时: 302.39秒)
2025-09-11 21:29:32,732 - RSTPTest - INFO - ============================================================

2025-09-11 21:29:32,735 - RSTPTest - INFO - ============================================================
2025-09-11 21:29:32,735 - RSTPTest - INFO - 开始测试: test_bpdu_flood_attack
2025-09-11 21:29:32,735 - RSTPTest - INFO - ============================================================
2025-09-11 21:29:32,736 - test_security - INFO - 开始BPDU洪泛攻击测试
2025-09-11 21:29:32,736 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 21:29:32,736 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 21:29:32,736 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 21:29:32,737 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 21:29:32,737 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 21:29:32,737 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 21:29:32,737 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 21:29:32,737 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 21:29:32,737 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 21:29:33,209 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 21:29:33,210 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 21:29:33,210 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 21:29:33,365 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 21:29:34,437 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 21:29:34,437 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 21:29:34,438 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 21:29:34,438 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 21:29:34,438 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 21:29:34,913 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 21:29:35,389 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 21:29:35,390 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 21:29:35,581 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 21:29:35,582 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 21:29:35,582 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 21:29:35,582 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 21:29:35,582 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 21:29:35,583 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 21:29:35,583 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 21:29:35,583 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 21:29:36,081 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 21:29:40,565 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 21:29:40,688 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 21:29:40,689 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 21:29:40,689 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 21:29:40,689 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 21:29:40,689 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 21:29:41,865 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 21:29:43,063 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 21:29:43,063 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 21:29:43,157 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 21:29:43,423 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 21:29:43,423 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 21:29:43,423 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 21:29:43,424 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 21:29:43,424 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 21:29:43,424 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 21:29:43,424 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 21:29:43,424 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 21:29:43,924 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 21:29:48,420 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 21:29:48,547 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 21:29:48,547 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 21:29:48,547 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 21:29:48,547 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 21:29:48,547 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 21:29:49,728 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 21:29:50,909 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 21:29:50,909 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 21:29:51,004 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 21:29:51,271 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 21:29:51,271 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 21:29:51,271 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 21:29:56,490 - test_security - INFO - 初始CPU使用率: 33.3%
2025-09-11 21:29:56,491 - test_security - INFO - 使用接口进行BPDU洪泛: eth2
2025-09-11 21:30:06,855 - test_security - INFO - 洪泛时CPU使用率: 0.0%
2025-09-11 21:30:07,315 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:30:07,466 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 21:30:07,468 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 21:30:07,468 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:30:07,468 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 21:30:07,469 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:30:07,932 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:30:07,932 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:30:07,933 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:30:07,933 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:30:07,934 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:30:07,934 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:30:08,274 - test_security - INFO - 网络在BPDU洪泛下保持稳定
2025-09-11 21:30:08,274 - test_security - INFO - BPDU洪泛攻击测试完成
2025-09-11 21:30:08,275 - RSTPTest - INFO - 测试完成: test_bpdu_flood_attack (耗时: 35.54秒)
2025-09-11 21:30:08,275 - RSTPTest - INFO - ============================================================

2025-09-11 21:30:08,277 - RSTPTest - INFO - ============================================================
2025-09-11 21:30:08,277 - RSTPTest - INFO - 开始测试: test_topology_change_attack
2025-09-11 21:30:08,277 - RSTPTest - INFO - ============================================================
2025-09-11 21:30:08,278 - test_security - INFO - 开始拓扑变更攻击测试
2025-09-11 21:30:08,278 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 21:30:08,278 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 21:30:08,278 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 21:30:08,279 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 21:30:08,279 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 21:30:08,279 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 21:30:08,279 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 21:30:08,279 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 21:30:08,279 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 21:30:08,885 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 21:30:08,885 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 21:30:08,885 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 21:30:09,040 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 21:30:10,121 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 21:30:10,121 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 21:30:10,121 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 21:30:10,121 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 21:30:10,121 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 21:30:10,597 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 21:30:11,073 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 21:30:11,073 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 21:30:11,273 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 21:30:11,274 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 21:30:11,274 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 21:30:11,274 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 21:30:11,274 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 21:30:11,274 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 21:30:11,275 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 21:30:11,275 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 21:30:11,769 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 21:30:16,252 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 21:30:16,378 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 21:30:16,379 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 21:30:16,379 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 21:30:16,379 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 21:30:16,379 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 21:30:17,563 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 21:30:18,757 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 21:30:18,758 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 21:30:18,853 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 21:30:19,115 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 21:30:19,115 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 21:30:19,116 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 21:30:19,116 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 21:30:19,116 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 21:30:19,116 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 21:30:19,117 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 21:30:19,117 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 21:30:19,620 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 21:30:24,103 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 21:30:24,232 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 21:30:24,232 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 21:30:24,233 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 21:30:24,233 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 21:30:24,233 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 21:30:25,393 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 21:30:26,576 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 21:30:26,577 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 21:30:26,671 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 21:30:26,931 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 21:30:26,931 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 21:30:26,932 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 21:30:32,358 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:30:32,511 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 21:30:32,512 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 21:30:32,512 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:30:32,512 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 21:30:32,512 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:30:32,976 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:30:32,976 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:30:32,977 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:30:32,978 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:30:32,978 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:30:32,978 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:30:33,265 - test_security - INFO - 触发快速拓扑变更...
2025-09-11 21:30:51,802 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:30:51,954 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 21:30:51,955 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 21:30:51,955 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:30:51,955 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 21:30:51,956 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:30:52,412 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:30:52,412 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:30:52,413 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:30:52,414 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:30:52,414 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:30:52,414 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:30:52,697 - test_security - INFO - 检测到0次拓扑变更
2025-09-11 21:30:53,154 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:30:53,306 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 21:30:53,307 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 21:30:53,307 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:30:53,308 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 21:30:53,308 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:30:53,767 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:30:53,768 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:30:53,769 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:30:53,769 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:30:53,769 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:30:53,769 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:30:54,057 - test_security - INFO - 网络在频繁拓扑变更后保持稳定
2025-09-11 21:30:54,057 - test_security - INFO - 拓扑变更攻击测试完成
2025-09-11 21:30:54,058 - RSTPTest - INFO - 测试完成: test_topology_change_attack (耗时: 45.78秒)
2025-09-11 21:30:54,058 - RSTPTest - INFO - ============================================================

2025-09-11 21:30:54,059 - RSTPTest - INFO - ============================================================
2025-09-11 21:30:54,059 - RSTPTest - INFO - 开始测试: test_mac_spoofing
2025-09-11 21:30:54,060 - RSTPTest - INFO - ============================================================
2025-09-11 21:30:54,060 - test_security - INFO - 开始MAC地址欺骗测试
2025-09-11 21:30:54,060 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 21:30:54,061 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 21:30:54,061 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 21:30:54,061 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 21:30:54,061 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 21:30:54,061 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 21:30:54,061 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 21:30:54,061 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 21:30:54,062 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 21:30:54,583 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 21:30:54,584 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 21:30:54,584 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 21:30:54,739 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 21:30:55,823 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 21:30:55,823 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 21:30:55,824 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 21:30:55,824 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 21:30:55,824 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 21:30:56,300 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 21:30:56,792 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 21:30:56,793 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 21:30:56,984 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 21:30:56,984 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 21:30:56,984 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 21:30:56,984 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 21:30:56,984 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 21:30:56,985 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 21:30:56,985 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 21:30:56,985 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 21:30:57,489 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 21:31:02,029 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 21:31:02,155 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 21:31:02,156 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 21:31:02,156 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 21:31:02,156 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 21:31:02,156 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 21:31:39,716 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 21:32:36,298 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 21:32:36,298 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 21:32:36,395 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 21:32:41,666 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 21:32:41,666 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 21:32:41,667 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 21:32:41,667 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 21:32:41,667 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 21:32:41,667 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 21:32:41,667 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 21:32:41,667 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 21:32:42,159 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 21:32:46,660 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 21:32:46,786 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 21:32:46,787 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 21:32:46,787 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 21:32:46,788 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 21:32:46,788 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 21:32:47,986 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 21:32:49,166 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 21:32:49,166 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 21:32:49,260 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 21:32:49,523 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 21:32:49,523 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 21:32:49,523 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 21:32:54,575 - test_security - INFO - DUT MAC地址: 90:12:10:b5:7d:f7
2025-09-11 21:32:54,575 - test_security - INFO - 尝试MAC地址欺骗...
2025-09-11 21:33:10,456 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:33:10,608 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 21:33:10,609 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 21:33:10,609 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:33:10,610 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 21:33:10,610 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:33:11,070 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:33:11,070 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:33:11,071 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:33:11,071 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:33:11,072 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:33:11,072 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:33:11,358 - test_security - INFO - 网络对MAC欺骗具有抗性
2025-09-11 21:33:17,960 - test_security - INFO - MAC地址欺骗测试完成
2025-09-11 21:33:17,961 - RSTPTest - INFO - 测试完成: test_mac_spoofing (耗时: 143.90秒)
2025-09-11 21:33:17,961 - RSTPTest - INFO - ============================================================

2025-09-11 21:33:17,963 - RSTPTest - INFO - ============================================================
2025-09-11 21:33:17,963 - RSTPTest - INFO - 开始测试: test_port_security
2025-09-11 21:33:17,963 - RSTPTest - INFO - ============================================================
2025-09-11 21:33:17,963 - test_security - INFO - 开始端口安全测试
2025-09-11 21:33:18,013 - test_security - WARNING - 未检测到任何端口安全功能
2025-09-11 21:33:18,014 - RSTPTest - INFO - 测试完成: test_port_security (耗时: 0.05秒)
2025-09-11 21:33:18,014 - RSTPTest - INFO - ============================================================

2025-09-11 21:33:18,015 - RSTPTest - INFO - ============================================================
2025-09-11 21:33:18,016 - RSTPTest - INFO - 开始测试: test_bpdu_filter_functionality
2025-09-11 21:33:18,016 - RSTPTest - INFO - ============================================================
2025-09-11 21:33:18,016 - test_security - INFO - 开始BPDU过滤器功能测试
2025-09-11 21:33:18,060 - NetworkTopology - INFO - 创建RSTP线性拓扑...
2025-09-11 21:33:18,061 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 21:33:18,061 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 21:33:18,061 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 21:33:18,061 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 21:33:18,062 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 21:33:18,062 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 21:33:18,062 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 21:33:18,062 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 21:33:18,590 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 21:33:18,590 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 21:33:18,590 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 21:33:18,745 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 21:33:19,817 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"32768
2025-09-11 21:33:19,817 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 21:33:19,817 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 21:33:19,818 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br4']
2025-09-11 21:33:19,818 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 21:33:20,289 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 21:33:20,290 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 21:33:20,482 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 21:33:20,482 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 21:33:20,483 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 21:33:20,483 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 21:33:20,483 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 21:33:20,483 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 21:33:20,483 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 21:33:20,483 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 21:33:33,181 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 21:34:17,888 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 21:34:27,967 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 21:34:27,968 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 21:34:27,968 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 21:34:27,968 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 21:34:27,968 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 21:35:29,860 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 21:36:26,443 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 21:36:26,444 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 21:36:26,539 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 21:36:31,812 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 21:36:31,812 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 21:36:31,813 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 21:36:31,813 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 21:36:31,813 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 21:36:31,813 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 21:36:31,813 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 21:36:31,813 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 21:36:32,310 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 21:36:36,814 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 21:36:36,939 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 21:36:36,939 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 21:36:36,940 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 21:36:36,940 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0']
2025-09-11 21:36:36,940 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 21:36:38,125 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 21:36:38,125 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 21:36:38,219 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 21:36:38,478 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 21:36:38,478 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 21:36:38,478 - NetworkTopology - INFO - 线性拓扑创建完成
2025-09-11 21:36:43,607 - test_security - WARNING - BPDU包统计命令执行失败: 
2025-09-11 21:36:43,608 - test_security - INFO - 启用过滤器前端口 eth2 BPDU数量: 0
2025-09-11 21:36:43,749 - test_security - INFO - 在端口 eth2 启用BPDU过滤器
2025-09-11 21:36:53,880 - test_security - WARNING - BPDU包统计命令执行失败: 
2025-09-11 21:36:53,880 - test_security - INFO - 启用过滤器后端口 eth2 BPDU数量: 0
2025-09-11 21:36:53,880 - test_security - INFO - BPDU过滤器功能正常：BPDU发送已停止或减少
2025-09-11 21:36:53,881 - test_security - INFO - 测试向过滤端口发送外部BPDU
2025-09-11 21:37:15,172 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:37:15,324 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Designated Forwarding 20000    128.2


2025-09-11 21:37:15,326 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 21:37:15,326 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:37:15,326 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 21:37:15,327 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:37:15,790 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:37:15,790 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:37:15,792 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:37:15,792 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:37:15,792 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:37:15,792 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:37:16,086 - test_security - INFO - BPDU过滤器功能正常：外部BPDU被忽略，网络保持稳定
2025-09-11 21:37:16,086 - test_security - INFO - 测试BPDU过滤器错误配置场景
2025-09-11 21:37:16,240 - test_security - WARNING - OVS设置BPDU过滤器失败，尝试使用系统文件方法
2025-09-11 21:37:16,339 - test_security - ERROR - 启用BPDU过滤器失败: BPDU过滤器配置失败: 
2025-09-11 21:37:16,339 - test_security - ERROR - BPDU过滤器错误配置测试失败: BPDU过滤器配置失败: 
2025-09-11 21:37:16,626 - test_security - WARNING - 清理命令执行失败: echo 0 > /sys/class/net/SE_ETH2/bridge/ports/eth2/bpdu_filter, 错误: 
2025-09-11 21:37:16,626 - test_security - INFO - BPDU过滤器功能测试完成
2025-09-11 21:37:16,627 - RSTPTest - INFO - 测试完成: test_bpdu_filter_functionality (耗时: 238.61秒)
2025-09-11 21:37:16,627 - RSTPTest - INFO - ============================================================

2025-09-11 21:37:16,629 - RSTPTest - INFO - ============================================================
2025-09-11 21:37:16,629 - RSTPTest - INFO - 开始测试: test_malformed_bpdu_handling
2025-09-11 21:37:16,629 - RSTPTest - INFO - ============================================================
2025-09-11 21:37:16,630 - test_security - INFO - 开始畸形BPDU处理测试
2025-09-11 21:37:16,673 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 21:37:16,673 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 21:37:16,673 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 21:37:16,674 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 21:37:16,674 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 21:37:16,674 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 21:37:16,674 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 21:37:16,674 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 21:37:16,674 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 21:37:17,202 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 21:37:17,203 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 21:37:17,203 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 21:37:17,357 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 21:37:18,442 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 21:37:18,442 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 21:37:18,442 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 21:37:18,443 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 21:37:18,443 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 21:37:18,918 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 21:37:19,394 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 21:37:19,394 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 21:37:19,582 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 21:37:19,582 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 21:37:19,582 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 21:37:19,582 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 21:37:19,583 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 21:37:19,583 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 21:37:19,583 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 21:37:19,583 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 21:37:35,244 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 21:37:39,742 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 21:37:39,876 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 21:37:39,876 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 21:37:39,876 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 21:37:39,876 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 21:37:39,877 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 21:37:41,089 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 21:37:42,307 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 21:37:42,308 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 21:37:42,403 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 21:37:42,663 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 21:37:42,663 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 21:37:42,663 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 21:37:42,663 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 21:37:42,664 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 21:37:42,664 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 21:37:42,664 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 21:37:42,664 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 21:37:43,158 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 21:37:47,658 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 21:37:47,781 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 21:37:47,782 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 21:37:47,782 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 21:37:47,782 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 21:37:47,782 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 21:37:48,973 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 21:37:50,150 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 21:37:50,150 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 21:37:50,244 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 21:37:50,509 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 21:37:50,509 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 21:37:50,509 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 21:37:55,928 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:37:56,083 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 21:37:56,084 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 21:37:56,084 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:37:56,084 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 21:37:56,085 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:37:56,544 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:37:56,545 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:37:56,546 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:37:56,546 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:37:56,546 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:37:56,546 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:37:57,287 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:37:57,439 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 21:37:57,440 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 21:37:57,440 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:37:57,440 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 21:37:57,440 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:37:57,905 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:37:57,905 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:37:57,906 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:37:57,906 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:37:57,906 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:37:57,907 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:37:58,194 - test_security - INFO - 初始网络状态: 稳定
2025-09-11 21:37:58,194 - test_security - INFO - 执行测试: _test_oversized_bpdu
2025-09-11 21:38:02,571 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:38:02,723 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 21:38:02,724 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 21:38:02,724 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:38:02,725 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 21:38:02,725 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:38:03,185 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:38:03,185 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:38:03,186 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:38:03,187 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:38:03,187 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:38:03,187 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:38:03,474 - test_security - INFO - _test_oversized_bpdu 网络保持稳定
2025-09-11 21:38:03,475 - test_security - INFO - 执行测试: _test_undersized_bpdu
2025-09-11 21:38:03,526 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

# 创建过小的BPDU（缺少必要字段）
target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 只包含最小字段的BPDU
truncated_bpdu = Raw(load=b"     ")  # 截断的BPDU

packet = eth/llc/truncated_bpdu
sendp(packet, iface=interface, count=5, inter=1, verbose=0)
print("Undersized BPDU sent")
' > /tmp/undersized_bpdu.py
错误: 
2025-09-11 21:38:03,528 - test_security - WARNING - _test_undersized_bpdu 执行异常但继续测试: 
2025-09-11 21:38:03,528 - test_security - INFO - 执行测试: _test_invalid_protocol_id
2025-09-11 21:38:03,528 - test_security - WARNING - TestNode1: SSH连接断开，尝试重连...
2025-09-11 21:38:03,528 - SSH_TestNode1 - INFO - TestNode1: 尝试重新建立SSH连接...
2025-09-11 21:38:03,529 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-11 21:38:03,659 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-11 21:38:05,337 - test_security - INFO - TestNode1: 无效协议ID BPDU测试完成
2025-09-11 21:38:08,752 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:38:08,907 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 21:38:08,908 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 21:38:08,909 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:38:08,909 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 21:38:08,909 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:38:09,372 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:38:09,373 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:38:09,374 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:38:09,374 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:38:09,374 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:38:09,375 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:38:09,661 - test_security - INFO - _test_invalid_protocol_id 网络保持稳定
2025-09-11 21:38:09,662 - test_security - INFO - 执行测试: _test_invalid_version
2025-09-11 21:38:11,263 - test_security - INFO - TestNode1: 无效版本号BPDU测试完成
2025-09-11 21:38:14,683 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:38:14,839 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 21:38:14,841 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 21:38:14,842 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:38:14,842 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 21:38:14,842 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:38:15,312 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:38:15,313 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:38:15,314 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:38:15,314 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:38:15,314 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:38:15,314 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:38:15,601 - test_security - INFO - _test_invalid_version 网络保持稳定
2025-09-11 21:38:15,602 - test_security - INFO - 执行测试: _test_invalid_message_type
2025-09-11 21:38:17,210 - test_security - INFO - TestNode1: 无效消息类型BPDU测试完成
2025-09-11 21:38:20,627 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:38:20,779 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 21:38:20,780 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 21:38:20,780 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:38:20,780 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 21:38:20,781 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:38:21,255 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:38:21,256 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:38:21,257 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:38:21,257 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:38:21,257 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:38:21,257 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:38:21,554 - test_security - INFO - _test_invalid_message_type 网络保持稳定
2025-09-11 21:38:21,554 - test_security - INFO - 执行测试: _test_corrupted_fields
2025-09-11 21:38:23,439 - test_security - INFO - TestNode1: 损坏字段BPDU测试完成
2025-09-11 21:38:26,863 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:38:27,015 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 21:38:27,016 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 21:38:27,016 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:38:27,017 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 21:38:27,017 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:38:27,481 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:38:27,481 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:38:27,482 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:38:27,482 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:38:27,482 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:38:27,483 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:38:27,769 - test_security - INFO - _test_corrupted_fields 网络保持稳定
2025-09-11 21:38:31,567 - test_security - INFO - 畸形BPDU处理测试完成
2025-09-11 21:38:31,568 - RSTPTest - INFO - 测试完成: test_malformed_bpdu_handling (耗时: 74.94秒)
2025-09-11 21:38:31,568 - RSTPTest - INFO - ============================================================

2025-09-11 21:38:31,570 - RSTPTest - INFO - ============================================================
2025-09-11 21:38:31,570 - RSTPTest - INFO - 开始测试: test_non_standard_bpdu_handling
2025-09-11 21:38:31,570 - RSTPTest - INFO - ============================================================
2025-09-11 21:38:31,571 - test_security - INFO - 开始非标准BPDU处理测试
2025-09-11 21:38:31,575 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 21:38:31,575 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 21:38:31,576 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 21:38:31,576 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 21:38:31,576 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 21:38:31,576 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 21:38:31,576 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 21:38:31,576 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 21:38:31,577 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 21:38:32,115 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 21:38:32,115 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 21:38:32,115 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 21:38:32,275 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 21:38:33,360 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 21:38:33,360 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 21:38:33,361 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 21:38:33,361 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 21:38:33,361 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 21:38:33,837 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 21:38:34,320 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 21:38:34,320 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 21:38:34,512 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 21:38:34,513 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 21:38:34,513 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 21:38:34,513 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 21:38:34,513 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 21:38:34,513 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 21:38:34,513 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 21:38:34,514 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 21:38:35,020 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 21:38:39,549 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 21:38:39,677 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 21:38:39,678 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 21:38:39,678 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 21:38:39,678 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 21:38:39,679 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 21:38:40,857 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 21:38:42,052 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 21:38:42,052 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 21:38:42,147 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 21:38:42,412 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 21:38:42,413 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 21:38:42,413 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 21:38:42,413 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 21:38:42,413 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 21:38:42,413 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 21:38:42,413 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 21:38:42,414 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 21:38:42,916 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 21:38:47,405 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 21:38:47,528 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 21:38:47,529 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 21:38:47,529 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 21:38:47,529 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 21:38:47,529 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 21:38:48,707 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 21:38:49,881 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 21:38:49,882 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 21:38:49,976 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 21:38:50,240 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 21:38:50,241 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 21:38:50,241 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 21:38:55,241 - test_security - INFO - 执行测试: _test_pvst_plus_bpdu
2025-09-11 21:38:55,292 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

# PVST+ 使用不同的目标MAC地址
pvst_mac = "01:00:0c:cc:cc:cd"
interface = "eth0"

eth = Ether(dst=pvst_mac, src="00:11:22:33:44:55")
# PVST+ 使用SNAP封装
snap = SNAP(OUI=0x00000c, code=0x010b)
# 模拟PVST+ BPDU结构
pvst_bpdu = Raw(load=b"    " + b" " * 30 + b" ")  # 包含VLAN ID

packet = eth/snap/pvst_bpdu
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("PVST+ BPDU sent")
' > /tmp/pvst_bpdu.py
错误: 
2025-09-11 21:38:55,293 - test_security - ERROR - _test_pvst_plus_bpdu 执行失败: 
2025-09-11 21:38:55,293 - test_security - INFO - 执行测试: _test_cisco_proprietary_bpdu
2025-09-11 21:38:55,294 - SSH_TestNode1 - WARNING - TestNode1: SSH连接已断开，尝试重连...
2025-09-11 21:38:55,415 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-11 21:38:55,545 - SSH_TestNode1 - INFO - TestNode1: SSH重连成功
2025-09-11 21:38:55,591 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 模拟包含Cisco专有扩展的BPDU
cisco_bpdu = Raw(load=b"    " + b" " * 30 + 
                     b" )   ")  # Cisco OUI + 专有数据

packet = eth/llc/cisco_bpdu
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("Cisco proprietary BPDU sent")
' > /tmp/cisco_bpdu.py
错误: 
2025-09-11 21:38:55,592 - test_security - ERROR - _test_cisco_proprietary_bpdu 执行失败: 
2025-09-11 21:38:55,593 - test_security - INFO - 执行测试: _test_vlan_tagged_bpdu
2025-09-11 21:38:55,593 - SSH_TestNode1 - WARNING - TestNode1: SSH连接已断开，尝试重连...
2025-09-11 21:38:55,721 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-11 21:38:55,844 - SSH_TestNode1 - INFO - TestNode1: SSH重连成功
2025-09-11 21:39:03,191 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:39:03,346 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 21:39:03,347 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 21:39:03,348 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:39:03,348 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 21:39:03,348 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:39:03,808 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:39:03,808 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:39:03,809 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:39:03,810 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:39:03,810 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:39:03,810 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:39:04,092 - test_security - INFO - _test_vlan_tagged_bpdu 网络保持稳定
2025-09-11 21:39:04,093 - test_security - INFO - 执行测试: _test_unknown_tlv_bpdu
2025-09-11 21:39:04,146 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 标准BPDU + 未知TLV
standard_bpdu = b"    " + b" " * 30
unknown_tlv = b"ÿÿ "  # 未知类型和长度的TLV
bpdu_with_tlv = Raw(load=standard_bpdu + unknown_tlv)

packet = eth/llc/bpdu_with_tlv
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("BPDU with unknown TLV sent")
' > /tmp/unknown_tlv.py
错误: 
2025-09-11 21:39:04,147 - test_security - ERROR - _test_unknown_tlv_bpdu 执行失败: 
2025-09-11 21:39:04,320 - test_security - INFO - 非标准BPDU处理测试完成
2025-09-11 21:39:04,322 - RSTPTest - INFO - 测试完成: test_non_standard_bpdu_handling (耗时: 32.75秒)
2025-09-11 21:39:04,322 - RSTPTest - INFO - ============================================================

2025-09-11 21:39:04,324 - RSTPTest - INFO - ============================================================
2025-09-11 21:39:04,324 - RSTPTest - INFO - 开始测试: test_bpdu_guard_functionality
2025-09-11 21:39:04,324 - RSTPTest - INFO - ============================================================
2025-09-11 21:39:04,325 - test_security - INFO - 开始BPDU防护功能测试
2025-09-11 21:39:04,329 - NetworkTopology - INFO - 创建RSTP线性拓扑...
2025-09-11 21:39:04,329 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 21:39:04,329 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 21:39:04,330 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 21:39:04,330 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 21:39:04,330 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 21:39:04,330 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 21:39:04,330 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 21:39:04,330 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 21:39:04,856 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 21:39:04,856 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 21:39:04,857 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 21:39:05,012 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 21:39:06,091 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"32768
2025-09-11 21:39:06,092 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 21:39:06,092 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 21:39:06,092 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br4']
2025-09-11 21:39:06,092 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 21:39:06,574 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 21:39:06,574 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 21:39:06,769 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 21:39:06,769 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 21:39:06,769 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 21:39:06,769 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 21:39:06,769 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 21:39:06,770 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 21:39:06,770 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 21:39:06,770 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 21:39:06,770 - SSH_TestNode1 - WARNING - TestNode1: SSH连接已断开，尝试重连...
2025-09-11 21:39:06,892 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-11 21:39:07,016 - SSH_TestNode1 - INFO - TestNode1: SSH重连成功
2025-09-11 21:39:07,500 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 21:39:11,989 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 21:39:12,128 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 21:39:12,128 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 21:39:12,129 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 21:39:12,129 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 21:39:12,129 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 21:39:13,315 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 21:39:14,497 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 21:39:14,498 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 21:39:14,595 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 21:39:14,856 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 21:39:14,856 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 21:39:14,856 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 21:39:14,856 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 21:39:14,857 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 21:39:14,857 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 21:39:14,857 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 21:39:14,857 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 21:39:15,352 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 21:39:19,856 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 21:39:19,987 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 21:39:19,987 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 21:39:19,988 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 21:39:19,988 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0']
2025-09-11 21:39:19,988 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 21:39:21,162 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 21:39:21,163 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 21:39:21,257 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 21:39:21,519 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 21:39:21,520 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 21:39:21,520 - NetworkTopology - INFO - 线性拓扑创建完成
2025-09-11 21:39:26,999 - test_security - INFO - 边缘端口 eth2 初始状态: {}
2025-09-11 21:39:26,999 - test_security - INFO - 向边缘端口 eth2 发送BPDU
2025-09-11 21:39:34,071 - test_security - INFO - BPDU防护触发后端口 eth2 状态: {}
2025-09-11 21:39:34,071 - test_security - ERROR - BPDU防护功能异常：端口未被禁用
2025-09-11 21:39:34,317 - RSTPTest - INFO - 测试完成: test_bpdu_guard_functionality (耗时: 29.99秒)
2025-09-11 21:39:34,317 - RSTPTest - INFO - ============================================================

2025-09-11 21:39:34,319 - RSTPTest - INFO - ============================================================
2025-09-11 21:39:34,320 - RSTPTest - INFO - 开始测试: test_root_guard_functionality
2025-09-11 21:39:34,320 - RSTPTest - INFO - ============================================================
2025-09-11 21:39:34,320 - test_security - INFO - 开始根防护功能测试
2025-09-11 21:39:34,325 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 21:39:34,325 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 21:39:34,326 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 21:39:34,326 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 21:39:34,326 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 21:39:34,326 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 21:39:34,326 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 21:39:34,327 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 21:39:34,327 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 21:39:34,852 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 21:39:34,853 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 21:39:34,853 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 21:39:35,007 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 21:39:36,078 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 21:39:36,079 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 21:39:36,079 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 21:39:36,079 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 21:39:36,079 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 21:39:36,551 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 21:39:37,035 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 21:39:37,035 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 21:39:37,227 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 21:39:37,228 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 21:39:37,228 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 21:39:37,228 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 21:39:37,228 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 21:39:37,228 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 21:39:37,228 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 21:39:37,229 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 21:39:37,732 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 21:39:42,226 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 21:39:42,356 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 21:39:42,356 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 21:39:42,357 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 21:39:42,357 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 21:39:42,357 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 21:39:43,607 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 21:39:44,799 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 21:39:44,800 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 21:39:44,897 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 21:39:45,161 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 21:39:45,162 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 21:39:45,162 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 21:39:45,162 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 21:39:45,162 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 21:39:45,162 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 21:39:45,163 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 21:39:45,163 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 21:39:45,645 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 21:39:50,129 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 21:39:50,255 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 21:39:50,256 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 21:39:50,256 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 21:39:50,256 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 21:39:50,256 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 21:39:51,429 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 21:39:52,610 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 21:39:52,610 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 21:39:52,705 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 21:39:52,963 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 21:39:52,964 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 21:39:52,964 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 21:39:58,389 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:39:58,541 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 21:39:58,543 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 21:39:58,543 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:39:58,543 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 21:39:58,543 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:39:59,003 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:39:59,003 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:39:59,004 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:39:59,004 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:39:59,004 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:39:59,005 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:39:59,292 - test_security - INFO - 当前根桥ID: unknown
2025-09-11 21:39:59,619 - test_security - WARNING - 启用根防护失败: 
2025-09-11 21:39:59,619 - test_security - INFO - 在端口 eth1 启用根防护
2025-09-11 21:40:00,019 - test_security - INFO - 端口 eth1 初始状态: unknown
2025-09-11 21:40:00,019 - test_security - INFO - 发送更优BPDU尝试劫持根桥
2025-09-11 21:40:16,298 - test_security - INFO - 根防护触发后端口 eth1 状态: unknown
2025-09-11 21:40:16,757 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-11 21:40:16,913 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Alternate  Discarding 20000    128.2


2025-09-11 21:40:16,914 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-priority: 32768
2025-09-11 21:40:16,914 - RSTPAnalyzer_DUT - INFO - 从rstp/show解析到stp-system-id: 6e:b3:08:fa:01:34
2025-09-11 21:40:16,915 - RSTPAnalyzer_DUT - INFO - 从rstp/show构造bridge_id: 8000/6e:b3:08:fa:01:34
2025-09-11 21:40:16,915 - RSTPAnalyzer_DUT - INFO - 非根桥，root_id设为unknown
2025-09-11 21:40:17,378 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-11 21:40:17,379 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000901210b57df7
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(br3): addr:90:12:10:b5:7d:f7
     config:     0
     state:      0
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 2(br4): addr:90:12:10:b5:7d:f7
     config:     0
     state:      STP_FORWARD
     current:    1GB-FD AUTO_NEG
     advertised: 10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     supported:  10MB-HD 10MB-FD 100MB-HD 100MB-FD 1GB-HD 1GB-FD COPPER AUTO_NEG AUTO_PAUSE AUTO_PAUSE_ASYM
     speed: 1000 Mbps now, 1000 Mbps max
 LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-11 21:40:17,380 - RSTPAnalyzer_DUT - INFO - 找到端口: br3 (从行:  1(br3): addr:90:12:10:b5:7d:f7)
2025-09-11 21:40:17,380 - RSTPAnalyzer_DUT - INFO - 找到端口: br4 (从行:  2(br4): addr:90:12:10:b5:7d:f7)
2025-09-11 21:40:17,380 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:90:12:10:b5:7d:f7)
2025-09-11 21:40:17,381 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['br3', 'br4', 'SE_ETH2']
2025-09-11 21:40:17,675 - test_security - INFO - 根防护功能正常：根桥身份未被劫持
2025-09-11 21:40:17,675 - test_security - ERROR - 根防护功能异常：端口未进入阻塞状态
2025-09-11 21:40:17,676 - test_security - INFO - 测试根防护端口 eth1 恢复功能
2025-09-11 21:40:17,676 - test_security - INFO - 停止发送更优BPDU
2025-09-11 21:40:28,039 - test_security - INFO - 端口恢复后状态: unknown
2025-09-11 21:40:28,039 - test_security - WARNING - 根防护端口未能自动恢复
2025-09-11 21:40:28,288 - RSTPTest - INFO - 测试完成: test_root_guard_functionality (耗时: 53.97秒)
2025-09-11 21:40:28,289 - RSTPTest - INFO - ============================================================

2025-09-11 21:40:28,291 - RSTPTest - INFO - ============================================================
2025-09-11 21:40:28,291 - RSTPTest - INFO - 开始测试: test_loop_guard_functionality
2025-09-11 21:40:28,291 - RSTPTest - INFO - ============================================================
2025-09-11 21:40:28,291 - test_security - INFO - 开始环路防护功能测试
2025-09-11 21:40:28,292 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-11 21:40:28,292 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-11 21:40:28,292 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-11 21:40:28,292 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-11 21:40:28,292 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-11 21:40:28,292 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-11 21:40:28,293 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-11 21:40:28,293 - NetworkTopology - INFO - 清理 DUT 的测试接口...
2025-09-11 21:40:28,293 - NetworkTopology - INFO - 重置DUT网桥 SE_ETH2 的RSTP配置...
2025-09-11 21:40:28,786 - NetworkTopology - INFO - DUT网桥 SE_ETH2 配置重置完成
2025-09-11 21:40:28,787 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-11 21:40:28,787 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-11 21:40:28,942 - NetworkTopology - INFO - DUT: 网桥SE_ETH2已存在，跳过创建
2025-09-11 21:40:30,030 - NetworkTopology - INFO - DUT: 网桥SE_ETH2优先级已设置为1
1
"8192
2025-09-11 21:40:30,030 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-11 21:40:30,031 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-11 21:40:30,031 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-11 21:40:30,031 - NetworkTopology - INFO - 添加接口 br3 到 DUT 的网桥
2025-09-11 21:40:30,507 - NetworkTopology - INFO - 添加接口 br4 到 DUT 的网桥
2025-09-11 21:40:30,982 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-11 21:40:30,983 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-11 21:40:31,174 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-11 21:40:31,175 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-11 21:40:31,175 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-11 21:40:31,175 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-11 21:40:31,175 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-11 21:40:31,175 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-11 21:40:31,176 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-11 21:40:31,176 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-11 21:40:31,668 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-11 21:40:36,159 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 21:40:36,287 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 21:40:36,288 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-11 21:40:36,288 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-11 21:40:36,288 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-11 21:40:36,288 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-11 21:40:37,475 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-11 21:40:38,684 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-11 21:40:38,685 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-11 21:40:38,781 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-11 21:40:39,058 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-11 21:40:39,059 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-11 21:40:39,059 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-11 21:40:39,059 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-11 21:40:39,060 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-11 21:40:39,060 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-11 21:40:39,060 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-11 21:40:39,060 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-11 21:40:39,559 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-11 21:40:44,045 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-11 21:40:44,168 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-11 21:40:44,168 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-11 21:40:44,168 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-11 21:40:44,169 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-11 21:40:44,169 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-11 21:40:45,345 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-11 21:40:46,525 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-11 21:40:46,525 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-11 21:40:46,620 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-11 21:40:46,889 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-11 21:40:46,890 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-11 21:40:46,890 - NetworkTopology - INFO - 环形拓扑创建完成 - 使用真实物理连接
2025-09-11 21:40:52,170 - test_security - WARNING - 启用环路防护失败: 
2025-09-11 21:40:52,171 - test_security - INFO - 在端口 eth1 启用环路防护
2025-09-11 21:40:52,569 - test_security - INFO - 端口 eth1 初始状态: unknown
2025-09-11 21:40:52,570 - test_security - INFO - 模拟单向链路故障
2025-09-11 21:40:52,570 - test_security - INFO - 停止从测试节点发送BPDU
2025-09-11 21:41:13,061 - test_security - INFO - 环路防护触发后端口 eth1 状态: unknown
2025-09-11 21:41:13,062 - test_security - WARNING - 环路防护功能异常：端口未进入阻塞状态
2025-09-11 21:41:13,062 - test_security - INFO - 测试环路防护端口 eth1 恢复功能
2025-09-11 21:41:13,062 - test_security - INFO - 恢复BPDU发送
2025-09-11 21:41:23,549 - test_security - INFO - 端口恢复后状态: unknown
2025-09-11 21:41:23,550 - test_security - WARNING - 环路防护端口未能自动恢复
2025-09-11 21:41:23,765 - test_security - INFO - 环路防护功能测试完成
2025-09-11 21:41:23,766 - RSTPTest - INFO - 测试完成: test_loop_guard_functionality (耗时: 55.47秒)
2025-09-11 21:41:23,766 - RSTPTest - INFO - ============================================================

2025-09-11 21:41:23,766 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-11 21:41:23,767 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-11 21:41:23,767 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-11 21:41:24,251 - __main__ - INFO - ============================================================
2025-09-11 21:41:24,251 - __main__ - INFO - 测试完成，返回码: 1
2025-09-11 21:41:24,252 - __main__ - INFO - ============================================================
