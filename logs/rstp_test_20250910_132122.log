2025-09-10 13:21:22,479 - root - INFO - 日志系统初始化完成，日志文件: logs\rstp_test_20250910_132122.log
2025-09-10 13:21:22,723 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 13:21:22,723 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 13:21:22,841 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 13:21:22,842 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 13:21:22,974 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 13:21:22,975 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 13:21:22,985 - RSTPTest - INFO - ============================================================
2025-09-10 13:21:22,985 - RSTPTest - INFO - 开始测试: test_port_state_transitions
2025-09-10 13:21:22,985 - RSTPTest - INFO - ============================================================
2025-09-10 13:21:22,986 - test_additional_rstp - INFO - 开始端口状态转换测试
2025-09-10 13:21:22,987 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 13:21:22,987 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 13:21:22,987 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 13:21:22,987 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 13:21:22,988 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 13:21:22,988 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 13:21:22,988 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 13:21:22,994 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 13:21:23,054 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 13:21:23,054 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 13:21:23,054 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 13:21:23,055 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 13:21:23,576 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 13:21:23,576 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 13:21:24,615 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 13:21:24,615 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 13:21:24,615 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 13:21:24,616 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 13:21:25,093 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 13:21:25,572 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 13:21:25,572 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 13:21:25,676 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 13:21:25,773 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 13:21:25,773 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 13:21:25,773 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 13:21:25,773 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 13:21:25,774 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 13:21:25,774 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 13:21:25,774 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 13:21:25,781 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 13:21:25,781 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 13:21:35,855 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 13:21:35,855 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 13:21:35,855 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 13:21:35,855 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 13:21:35,856 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 13:21:41,562 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 13:21:46,110 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:21:46,242 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:21:46,243 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 13:21:46,243 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 13:21:46,243 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 13:21:46,243 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 13:21:47,454 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 13:21:48,692 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 13:21:48,692 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 13:21:48,740 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 13:21:48,956 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 13:21:48,957 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 13:21:48,957 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 13:21:48,957 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 13:21:48,958 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 13:21:48,958 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 13:21:48,958 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 13:21:48,966 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 13:21:48,966 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 13:21:52,105 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 13:21:52,105 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 13:21:52,105 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 13:21:52,106 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 13:21:52,106 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 13:22:04,710 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 13:22:09,297 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:22:09,436 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:22:09,437 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 13:22:09,437 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 13:22:09,437 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 13:22:09,437 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 13:22:10,663 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 13:22:11,919 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 13:22:11,919 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 13:22:11,968 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 13:22:12,191 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 13:22:12,191 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 13:22:12,192 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 13:22:17,384 - test_additional_rstp - INFO - 使用网桥: rstp0
2025-09-10 13:22:17,384 - test_additional_rstp - INFO - === 步骤1: 禁用端口触发状态转换 ===
2025-09-10 13:22:17,634 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:22:17,795 - RSTPTest - INFO - 测试完成: test_port_state_transitions (耗时: 54.81秒)
2025-09-10 13:22:17,795 - RSTPTest - INFO - ============================================================

2025-09-10 13:22:17,797 - RSTPTest - INFO - ============================================================
2025-09-10 13:22:17,797 - RSTPTest - INFO - 开始测试: test_bpdu_propagation_and_keepalive
2025-09-10 13:22:17,797 - RSTPTest - INFO - ============================================================
2025-09-10 13:22:17,798 - test_additional_rstp - INFO - 开始BPDU传播和保活机制测试
2025-09-10 13:22:17,798 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 13:22:17,798 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 13:22:17,799 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 13:22:17,799 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 13:22:17,799 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 13:22:17,799 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 13:22:17,799 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 13:22:17,799 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 13:22:18,287 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 13:22:18,287 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 13:22:19,327 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 13:22:19,328 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 13:22:19,328 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 13:22:19,328 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 13:22:19,784 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 13:22:20,260 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 13:22:20,260 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 13:22:20,367 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 13:22:20,472 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 13:22:20,472 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 13:22:20,472 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 13:22:20,472 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 13:22:20,473 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 13:22:20,473 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 13:22:20,473 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 13:22:20,474 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 13:22:20,970 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 13:22:25,563 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:22:25,702 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:22:25,703 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 13:22:25,703 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 13:22:25,703 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 13:22:25,703 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 13:22:26,951 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 13:22:28,189 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 13:22:28,189 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 13:22:28,237 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 13:22:28,462 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 13:22:28,462 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 13:22:28,462 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 13:22:28,462 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 13:22:28,463 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 13:22:28,463 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 13:22:28,463 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 13:22:28,463 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 13:22:28,970 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 13:22:33,516 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:22:33,654 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:22:33,654 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 13:22:33,654 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 13:22:33,654 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 13:22:33,655 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 13:22:34,890 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 13:22:36,145 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 13:22:36,145 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 13:22:36,196 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 13:22:36,409 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 13:22:36,409 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 13:22:36,410 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 13:22:44,743 - test_additional_rstp - INFO - === 步骤1: 验证分布式BPDU生成 ===
2025-09-10 13:22:44,750 - test_additional_rstp - INFO - 检测到网桥接口: ['18:', '26:', '16759:']
2025-09-10 13:22:44,750 - test_additional_rstp - INFO - 在接口 18: 上捕获BPDU...
2025-09-10 13:22:44,750 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: 18:, 数量: 10)
2025-09-10 13:22:44,833 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-10 13:22:44,833 - test_additional_rstp - WARNING - 在 18: 上未捕获到BPDU
2025-09-10 13:22:44,833 - test_additional_rstp - INFO - 在接口 26: 上捕获BPDU...
2025-09-10 13:22:44,833 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: 26:, 数量: 10)
2025-09-10 13:22:44,913 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-10 13:22:44,913 - test_additional_rstp - WARNING - 在 26: 上未捕获到BPDU
2025-09-10 13:22:44,913 - test_additional_rstp - INFO - 总共捕获 0 个BPDU，来自 0 个不同源
2025-09-10 13:22:44,913 - test_additional_rstp - WARNING - 未检测到BPDU传播
2025-09-10 13:22:44,913 - test_additional_rstp - INFO - BPDU传播和保活机制测试完成
2025-09-10 13:22:44,914 - RSTPTest - INFO - 测试完成: test_bpdu_propagation_and_keepalive (耗时: 27.12秒)
2025-09-10 13:22:44,915 - RSTPTest - INFO - ============================================================

2025-09-10 13:22:44,916 - RSTPTest - INFO - ============================================================
2025-09-10 13:22:44,916 - RSTPTest - INFO - 开始测试: test_disabled_port_exclusion_enhanced
2025-09-10 13:22:44,916 - RSTPTest - INFO - ============================================================
2025-09-10 13:22:44,917 - test_additional_rstp - INFO - 开始增强的禁用端口排除测试
2025-09-10 13:22:44,917 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 13:22:44,917 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 13:22:44,917 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 13:22:44,918 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 13:22:44,918 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 13:22:44,918 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 13:22:44,918 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 13:22:44,919 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 13:22:45,414 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 13:22:45,414 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 13:22:46,459 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 13:22:46,459 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 13:22:46,460 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 13:22:46,460 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 13:22:46,920 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 13:22:47,399 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 13:22:47,401 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 13:22:47,504 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 13:22:47,600 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 13:22:47,600 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 13:22:47,600 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 13:22:47,601 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 13:22:47,601 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 13:22:47,601 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 13:22:47,601 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 13:22:47,601 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 13:22:48,596 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 13:22:53,160 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:22:53,293 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:22:53,293 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 13:22:53,294 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 13:22:53,294 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 13:22:53,294 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 13:22:54,503 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 13:22:55,709 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 13:22:55,710 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 13:22:55,757 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 13:22:55,976 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 13:22:55,976 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 13:22:55,977 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 13:22:55,977 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 13:22:55,977 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 13:22:55,977 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 13:22:55,977 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 13:22:55,978 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 13:22:56,489 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 13:23:01,057 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:23:01,177 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:23:01,178 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 13:23:01,178 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 13:23:01,178 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 13:23:01,178 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 13:23:02,400 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 13:23:03,666 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 13:23:03,666 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 13:23:03,718 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 13:23:03,942 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 13:23:03,943 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 13:23:03,943 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 13:23:09,421 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:23:09,579 - test_additional_rstp - INFO - 初始活动端口数量: 0
2025-09-10 13:23:09,580 - RSTPTest - INFO - 测试完成: test_disabled_port_exclusion_enhanced (耗时: 24.66秒)
2025-09-10 13:23:09,580 - RSTPTest - INFO - ============================================================

2025-09-10 13:23:09,581 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 13:23:09,581 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 13:23:09,581 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 13:23:09,717 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 13:23:09,717 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 13:23:09,843 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 13:23:09,844 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 13:23:09,978 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 13:23:09,978 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 13:23:09,978 - RSTPTest - INFO - ============================================================
2025-09-10 13:23:09,978 - RSTPTest - INFO - 开始测试: test_proposal_agreement_handshake
2025-09-10 13:23:09,979 - RSTPTest - INFO - ============================================================
2025-09-10 13:23:09,979 - test_advanced_rstp_mechanisms - INFO - 开始测试RSTP Proposal/Agreement握手机制
2025-09-10 13:23:09,980 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 13:23:09,980 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 13:23:09,980 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 13:23:09,980 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 13:23:09,980 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 13:23:09,981 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 13:23:09,981 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 13:23:09,986 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 13:23:10,044 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 13:23:10,045 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 13:23:10,045 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 13:23:10,045 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 13:23:10,590 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 13:23:10,591 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 13:23:11,632 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 13:23:11,633 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 13:23:11,633 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 13:23:11,633 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 13:23:12,087 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 13:23:12,567 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 13:23:12,568 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 13:23:12,674 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 13:23:12,771 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 13:23:12,772 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 13:23:12,772 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 13:23:12,772 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 13:23:12,773 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 13:23:12,773 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 13:23:12,773 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 13:23:12,782 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 13:23:12,782 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 13:23:12,911 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 13:23:12,912 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 13:23:12,912 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 13:23:12,912 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 13:23:12,912 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 13:23:13,458 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 13:23:18,042 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:23:18,186 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:23:18,186 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 13:23:18,186 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 13:23:18,187 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 13:23:18,187 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 13:23:19,429 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 13:23:20,661 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 13:23:20,661 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 13:23:20,708 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 13:23:20,942 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 13:23:20,942 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 13:23:20,942 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 13:23:20,942 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 13:23:20,943 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 13:23:20,943 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 13:23:20,943 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 13:23:20,951 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 13:23:20,951 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 13:23:21,079 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 13:23:21,080 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 13:23:21,080 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 13:23:21,080 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 13:23:21,081 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 13:23:21,641 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 13:23:26,183 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:23:26,318 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:23:26,318 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 13:23:26,318 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 13:23:26,319 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 13:23:26,319 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 13:23:27,556 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 13:23:28,847 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 13:23:28,848 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 13:23:28,896 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 13:23:29,112 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 13:23:29,112 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 13:23:29,113 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 13:23:34,114 - test_advanced_rstp_mechanisms - INFO - 开始在eth0上捕获BPDU
2025-09-10 13:23:34,114 - test_advanced_rstp_mechanisms - INFO - 触发拓扑变更...
2025-09-10 13:23:40,379 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: eth0, 数量: 20)
2025-09-10 13:23:40,412 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-10 13:23:40,412 - test_advanced_rstp_mechanisms - INFO - 捕获到0个BPDU数据包
2025-09-10 13:23:40,412 - test_advanced_rstp_mechanisms - WARNING - 未能捕获到完整的BPDU握手序列，可能是环境限制
2025-09-10 13:23:40,412 - test_advanced_rstp_mechanisms - INFO - 改为验证网络收敛状态...
2025-09-10 13:23:40,689 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:23:40,843 - test_advanced_rstp_mechanisms - INFO - ✓ 网络收敛正常，存在根端口
2025-09-10 13:23:42,844 - test_advanced_rstp_mechanisms - INFO - RSTP Proposal/Agreement握手机制测试通过
2025-09-10 13:23:42,845 - RSTPTest - INFO - 测试完成: test_proposal_agreement_handshake (耗时: 32.87秒)
2025-09-10 13:23:42,845 - RSTPTest - INFO - ============================================================

2025-09-10 13:23:42,846 - RSTPTest - INFO - ============================================================
2025-09-10 13:23:42,847 - RSTPTest - INFO - 开始测试: test_tcn_topology_change_notification
2025-09-10 13:23:42,847 - RSTPTest - INFO - ============================================================
2025-09-10 13:23:42,847 - test_advanced_rstp_mechanisms - INFO - 开始测试TCN拓扑变更通知机制
2025-09-10 13:23:42,848 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 13:23:42,848 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 13:23:42,848 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 13:23:42,848 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 13:23:42,849 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 13:23:42,849 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 13:23:42,849 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 13:23:42,849 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 13:23:43,317 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 13:23:43,317 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 13:23:44,366 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 13:23:44,367 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 13:23:44,367 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 13:23:44,367 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 13:23:44,826 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 13:23:45,307 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 13:23:45,307 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 13:23:45,410 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 13:23:45,506 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 13:23:45,507 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 13:23:45,507 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 13:23:45,507 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 13:23:45,508 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 13:23:45,508 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 13:23:45,508 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 13:23:45,508 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 13:23:46,044 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 13:23:50,642 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:23:50,777 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:23:50,778 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 13:23:50,778 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 13:23:50,778 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 13:23:50,778 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 13:23:51,998 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 13:23:53,229 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 13:23:53,229 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 13:23:53,278 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 13:23:53,500 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 13:23:53,501 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 13:23:53,501 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 13:23:53,501 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 13:23:53,501 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 13:23:53,501 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 13:23:53,502 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 13:23:53,502 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 13:23:54,022 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 13:23:58,559 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:23:58,693 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:23:58,693 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 13:23:58,693 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 13:23:58,694 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 13:23:58,694 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 13:23:59,903 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 13:24:01,174 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 13:24:01,175 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 13:24:01,224 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 13:24:01,446 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 13:24:01,446 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 13:24:01,447 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 13:24:11,697 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 13:24:11,854 - test_advanced_rstp_mechanisms - INFO - 初始网桥端口数量: 3
2025-09-10 13:24:11,855 - test_advanced_rstp_mechanisms - INFO - 触发拓扑变更：临时禁用/启用端口
2025-09-10 13:24:12,005 - test_advanced_rstp_mechanisms - INFO - 初始TC计数: 0
2025-09-10 13:24:20,285 - test_advanced_rstp_mechanisms - INFO - 变更后TC计数: 0
2025-09-10 13:24:20,285 - test_advanced_rstp_mechanisms - INFO - 拓扑变更可能未被检测到，这可能是正常的（取决于实现）
2025-09-10 13:24:20,585 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 13:24:20,742 - test_advanced_rstp_mechanisms - INFO - 最终网桥端口数量: 3
2025-09-10 13:24:20,898 - test_advanced_rstp_mechanisms - INFO - 当前MAC地址表老化时间: 300秒
2025-09-10 13:24:20,898 - test_advanced_rstp_mechanisms - WARNING - MAC地址表老化时间(300秒)未缩短，可能是实现差异
2025-09-10 13:24:20,898 - test_advanced_rstp_mechanisms - INFO - TCN拓扑变更通知机制测试通过 - 使用安全的端口状态变更方式
2025-09-10 13:24:20,899 - RSTPTest - INFO - 测试完成: test_tcn_topology_change_notification (耗时: 38.05秒)
2025-09-10 13:24:20,900 - RSTPTest - INFO - ============================================================

2025-09-10 13:24:20,902 - RSTPTest - INFO - ============================================================
2025-09-10 13:24:20,902 - RSTPTest - INFO - 开始测试: test_edge_port_behavior
2025-09-10 13:24:20,902 - RSTPTest - INFO - ============================================================
2025-09-10 13:24:20,903 - test_advanced_rstp_mechanisms - INFO - 开始测试边缘端口行为
2025-09-10 13:24:20,903 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 13:24:20,903 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 13:24:20,903 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 13:24:20,904 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 13:24:20,904 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 13:24:20,904 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 13:24:20,904 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 13:24:20,904 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 13:24:21,410 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 13:24:21,410 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 13:24:22,453 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 13:24:22,453 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 13:24:22,454 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 13:24:22,454 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 13:24:22,914 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 13:24:23,393 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 13:24:23,393 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 13:24:23,498 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 13:24:23,594 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 13:24:23,594 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 13:24:23,594 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 13:24:23,594 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 13:24:23,594 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 13:24:23,595 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 13:24:23,595 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 13:24:23,595 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 13:24:24,107 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 13:24:28,637 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:24:28,773 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:24:28,774 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 13:24:28,774 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 13:24:28,774 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 13:24:28,774 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 13:24:29,996 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 13:24:31,212 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 13:24:31,212 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 13:24:31,260 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 13:24:31,488 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 13:24:31,489 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 13:24:31,489 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 13:24:31,489 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 13:24:31,489 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 13:24:31,489 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 13:24:31,490 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 13:24:31,490 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 13:24:32,004 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 13:24:36,551 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:24:36,686 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:24:36,687 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 13:24:36,687 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 13:24:36,687 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 13:24:36,688 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 13:24:37,919 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 13:24:39,219 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 13:24:39,219 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 13:24:39,268 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 13:24:39,489 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 13:24:39,489 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 13:24:39,489 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 13:24:45,980 - test_advanced_rstp_mechanisms - INFO - 可用端口: ['enp1s0']
2025-09-10 13:24:45,981 - test_advanced_rstp_mechanisms - INFO - 选择端口enp1s0作为边缘端口测试
2025-09-10 13:24:46,089 - test_advanced_rstp_mechanisms - INFO - 测试边缘端口立即转发特性
2025-09-10 13:24:48,983 - test_advanced_rstp_mechanisms - INFO - 边缘端口状态转换时间: 2.74秒
2025-09-10 13:24:48,983 - test_advanced_rstp_mechanisms - INFO - ✓ 边缘端口转换时间合理
2025-09-10 13:24:49,093 - test_advanced_rstp_mechanisms - INFO - ✓ 边缘端口状态变化未产生TCN
2025-09-10 13:24:49,093 - test_advanced_rstp_mechanisms - INFO - 测试边缘端口收到BPDU后的行为
2025-09-10 13:24:49,249 - test_advanced_rstp_mechanisms - INFO - 边缘端口状态: 1
1
normal
2025-09-10 13:24:49,249 - test_advanced_rstp_mechanisms - INFO - 边缘端口行为测试通过
2025-09-10 13:24:49,250 - RSTPTest - INFO - 测试完成: test_edge_port_behavior (耗时: 28.35秒)
2025-09-10 13:24:49,250 - RSTPTest - INFO - ============================================================

2025-09-10 13:24:49,252 - RSTPTest - INFO - ============================================================
2025-09-10 13:24:49,252 - RSTPTest - INFO - 开始测试: test_shared_vs_point_to_point_links
2025-09-10 13:24:49,252 - RSTPTest - INFO - ============================================================
2025-09-10 13:24:49,253 - test_advanced_rstp_mechanisms - INFO - 开始测试不同链路类型的行为差异
2025-09-10 13:24:49,253 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 13:24:49,253 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 13:24:49,253 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 13:24:49,253 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 13:24:49,253 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 13:24:49,254 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 13:24:49,254 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 13:24:49,254 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 13:24:49,797 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 13:24:49,798 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 13:24:50,827 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 13:24:50,828 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 13:24:50,828 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 13:24:50,828 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 13:24:51,285 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 13:24:51,765 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 13:24:51,765 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 13:24:51,868 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 13:24:51,965 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 13:24:51,966 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 13:24:51,966 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 13:24:51,966 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 13:24:51,966 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 13:24:51,967 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 13:24:51,967 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 13:24:51,967 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 13:24:52,485 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 13:24:57,029 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:24:57,157 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:24:57,157 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 13:24:57,157 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 13:24:57,158 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 13:24:57,158 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 13:24:58,373 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 13:24:59,706 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 13:24:59,706 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 13:24:59,756 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 13:24:59,985 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 13:24:59,986 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 13:24:59,986 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 13:24:59,986 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 13:24:59,986 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 13:24:59,987 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 13:24:59,987 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 13:24:59,987 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 13:25:00,513 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 13:25:05,053 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:25:05,184 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:25:05,184 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 13:25:05,184 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 13:25:05,184 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 13:25:05,185 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 13:25:06,400 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 13:25:07,677 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 13:25:07,677 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 13:25:07,725 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 13:25:07,951 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 13:25:07,951 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 13:25:07,951 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 13:25:13,067 - test_advanced_rstp_mechanisms - INFO - 检测到的链路类型: {}
2025-09-10 13:25:13,067 - test_advanced_rstp_mechanisms - INFO - 测试点对点链路收敛性能
2025-09-10 13:25:17,029 - test_advanced_rstp_mechanisms - INFO - 收敛时间: 3.96秒
2025-09-10 13:25:17,030 - test_advanced_rstp_mechanisms - INFO - 验证链路类型识别
2025-09-10 13:25:17,030 - test_advanced_rstp_mechanisms - INFO - 不同链路类型行为差异测试通过
2025-09-10 13:25:17,031 - RSTPTest - INFO - 测试完成: test_shared_vs_point_to_point_links (耗时: 27.78秒)
2025-09-10 13:25:17,031 - RSTPTest - INFO - ============================================================

2025-09-10 13:25:17,031 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 13:25:17,031 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 13:25:17,032 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 13:25:17,167 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 13:25:17,167 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 13:25:17,287 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 13:25:17,288 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 13:25:17,430 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 13:25:17,430 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 13:25:17,430 - RSTPTest - INFO - ============================================================
2025-09-10 13:25:17,430 - RSTPTest - INFO - 开始测试: test_backup_port_concept_verification
2025-09-10 13:25:17,431 - RSTPTest - INFO - ============================================================
2025-09-10 13:25:17,431 - test_backup_port_simulation - INFO - 开始备份端口概念验证测试
2025-09-10 13:25:17,432 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 13:25:17,432 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 13:25:17,432 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 13:25:17,432 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 13:25:17,432 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 13:25:17,432 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 13:25:17,433 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 13:25:17,438 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 13:25:17,493 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 13:25:17,494 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 13:25:17,494 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 13:25:17,494 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 13:25:18,025 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 13:25:18,026 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 13:25:19,086 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 13:25:19,086 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 13:25:19,087 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 13:25:19,087 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 13:25:19,550 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 13:25:20,033 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 13:25:20,033 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 13:25:20,137 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 13:25:20,233 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 13:25:20,233 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 13:25:20,234 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 13:25:20,234 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 13:25:20,234 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 13:25:20,235 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 13:25:20,235 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 13:25:20,243 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 13:25:20,243 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 13:25:20,375 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 13:25:20,375 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 13:25:20,375 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 13:25:20,376 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 13:25:20,376 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 13:25:20,911 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 13:25:25,448 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:25:25,578 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:25:25,578 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 13:25:25,578 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 13:25:25,579 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 13:25:25,579 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 13:25:26,799 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 13:25:28,025 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 13:25:28,025 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 13:25:28,074 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 13:25:28,297 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 13:25:28,297 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 13:25:28,298 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 13:25:28,298 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 13:25:28,298 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 13:25:28,298 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 13:25:28,298 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 13:25:28,307 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 13:25:28,307 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 13:25:28,433 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 13:25:28,433 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 13:25:28,433 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 13:25:28,434 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 13:25:28,434 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 13:25:28,966 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 13:25:33,499 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:25:33,629 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:25:33,630 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 13:25:33,630 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 13:25:33,630 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 13:25:33,631 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 13:25:34,850 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 13:25:36,121 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 13:25:36,121 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 13:25:36,170 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 13:25:36,392 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 13:25:36,393 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 13:25:36,393 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 13:25:46,647 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:25:46,805 - test_backup_port_simulation - INFO - === 当前端口状态 ===
2025-09-10 13:25:46,805 - test_backup_port_simulation - INFO - 端口 eth0: 角色=root, 状态=disabled
2025-09-10 13:25:46,806 - test_backup_port_simulation - INFO - 端口 eth2: 角色=unknown, 状态=disabled
2025-09-10 13:25:46,806 - test_backup_port_simulation - INFO - 端口 eth3: 角色=unknown, 状态=disabled
2025-09-10 13:25:46,806 - test_backup_port_simulation - INFO - ⚠ 在当前点对点拓扑中未检测到备份端口（符合预期）
2025-09-10 13:25:46,807 - test_backup_port_simulation - INFO - 备份端口通常出现在共享介质网段中，当前测试环境为点对点链路
2025-09-10 13:25:46,807 - test_backup_port_simulation - INFO - 端口角色分布: {}
2025-09-10 13:25:46,807 - test_backup_port_simulation - INFO - === RSTP端口角色覆盖分析 ===
2025-09-10 13:25:46,808 - test_backup_port_simulation - INFO - - root端口: 未检测到
2025-09-10 13:25:46,808 - test_backup_port_simulation - INFO - - designated端口: 未检测到
2025-09-10 13:25:46,808 - test_backup_port_simulation - INFO - - alternate端口: 未检测到
2025-09-10 13:25:46,808 - test_backup_port_simulation - INFO - - backup端口: 未检测到（在点对点拓扑中为正常现象）
2025-09-10 13:25:46,808 - test_backup_port_simulation - INFO - 备份端口概念验证测试完成
2025-09-10 13:25:46,809 - RSTPTest - INFO - 测试完成: test_backup_port_concept_verification (耗时: 29.38秒)
2025-09-10 13:25:46,810 - RSTPTest - INFO - ============================================================

2025-09-10 13:25:46,811 - RSTPTest - INFO - ============================================================
2025-09-10 13:25:46,811 - RSTPTest - INFO - 开始测试: test_shared_medium_simulation_attempt
2025-09-10 13:25:46,811 - RSTPTest - INFO - ============================================================
2025-09-10 13:25:46,812 - test_backup_port_simulation - INFO - 开始共享介质模拟尝试
2025-09-10 13:25:46,812 - test_backup_port_simulation - INFO - === 尝试创建共享介质模拟场景 ===
2025-09-10 13:25:46,812 - test_backup_port_simulation - INFO - 创建中心交换机模拟共享介质...
2025-09-10 13:25:46,812 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 13:25:46,812 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 13:25:46,813 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 13:25:46,813 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 13:25:46,813 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 13:25:46,813 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 13:25:46,813 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 13:25:46,814 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 13:25:47,324 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 13:25:47,324 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 13:25:48,380 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 13:25:48,380 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 13:25:48,380 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 13:25:48,381 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 13:25:48,846 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 13:25:49,324 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 13:25:49,324 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 13:25:49,429 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 13:25:49,529 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 13:25:49,529 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 13:25:49,530 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 13:25:49,530 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 13:25:49,530 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 13:25:49,530 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 13:25:49,531 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 13:25:49,531 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 13:25:50,034 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 13:25:54,595 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:25:54,726 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:25:54,727 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 13:25:54,727 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 13:25:54,727 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 13:25:54,728 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 13:25:55,945 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 13:25:57,191 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 13:25:57,191 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 13:25:57,240 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 13:25:57,466 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 13:25:57,466 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 13:25:57,467 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 13:25:57,467 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 13:25:57,467 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 13:25:57,467 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 13:25:57,467 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 13:25:57,468 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 13:25:57,973 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 13:26:02,549 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:26:02,687 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:26:02,687 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 13:26:02,687 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 13:26:02,688 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 13:26:02,688 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 13:26:03,902 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 13:26:05,162 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 13:26:05,162 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 13:26:05,210 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 13:26:05,436 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 13:26:05,437 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 13:26:05,437 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 13:26:15,690 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:26:15,844 - test_backup_port_simulation - INFO - === 分析当前端口配置 ===
2025-09-10 13:26:15,844 - test_backup_port_simulation - INFO - ⚠ 未检测到备份端口
2025-09-10 13:26:15,844 - test_backup_port_simulation - INFO - 这在当前测试环境中是正常的，因为缺乏真正的共享介质
2025-09-10 13:26:15,845 - test_backup_port_simulation - INFO - 共享介质模拟尝试完成
2025-09-10 13:26:15,845 - RSTPTest - INFO - 测试完成: test_shared_medium_simulation_attempt (耗时: 29.03秒)
2025-09-10 13:26:15,845 - RSTPTest - INFO - ============================================================

2025-09-10 13:26:15,847 - RSTPTest - INFO - ============================================================
2025-09-10 13:26:15,847 - RSTPTest - INFO - 开始测试: test_backup_port_documentation_verification
2025-09-10 13:26:15,847 - RSTPTest - INFO - ============================================================
2025-09-10 13:26:15,848 - test_backup_port_simulation - INFO - 开始备份端口文档验证
2025-09-10 13:26:15,848 - test_backup_port_simulation - INFO - ✓ PortRole.BACKUP 存在
2025-09-10 13:26:15,848 - test_backup_port_simulation - INFO - === 备份端口理论特性验证 ===
2025-09-10 13:26:15,848 - test_backup_port_simulation - INFO - purpose: 为共享介质网段提供冗余
2025-09-10 13:26:15,848 - test_backup_port_simulation - INFO - difference_from_alternate: 备份端口是同一交换机上指定端口的备份，而备用端口是不同交换机提供的路径
2025-09-10 13:26:15,849 - test_backup_port_simulation - INFO - state: Discarding
2025-09-10 13:26:15,849 - test_backup_port_simulation - INFO - scenario: 出现在连接到集线器或共享介质的场景中
2025-09-10 13:26:15,849 - test_backup_port_simulation - INFO - fast_transition: 当对应的指定端口失效时，可以快速转换为指定端口
2025-09-10 13:26:15,849 - test_backup_port_simulation - INFO - === 端口角色对比 ===
2025-09-10 13:26:15,850 - test_backup_port_simulation - INFO - root: 连接到根桥的最佳路径
2025-09-10 13:26:15,850 - test_backup_port_simulation - INFO - designated: 为网段提供转发服务
2025-09-10 13:26:15,850 - test_backup_port_simulation - INFO - alternate: 提供到根桥的备用路径（来自其他交换机）
2025-09-10 13:26:15,850 - test_backup_port_simulation - INFO - backup: 同一交换机上指定端口的备份（共享介质场景）
2025-09-10 13:26:15,850 - test_backup_port_simulation - INFO - === 测试覆盖率分析 ===
2025-09-10 13:26:15,850 - test_backup_port_simulation - INFO - 已覆盖: Root Port, Designated Port, Alternate Port, Disabled Port
2025-09-10 13:26:15,851 - test_backup_port_simulation - INFO - 部分覆盖: Backup Port (概念验证)
2025-09-10 13:26:15,851 - test_backup_port_simulation - INFO - 覆盖限制: 测试框架无法创建真正的共享介质拓扑
2025-09-10 13:26:15,851 - test_backup_port_simulation - INFO - 建议: 在实际部署环境中使用集线器或配置交换机共享模式进行完整测试
2025-09-10 13:26:15,851 - test_backup_port_simulation - INFO - 备份端口文档验证完成
2025-09-10 13:26:15,852 - RSTPTest - INFO - 测试完成: test_backup_port_documentation_verification (耗时: 0.00秒)
2025-09-10 13:26:15,852 - RSTPTest - INFO - ============================================================

2025-09-10 13:26:15,852 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 13:26:15,853 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 13:26:15,853 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 13:26:15,994 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 13:26:15,994 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 13:26:16,117 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 13:26:16,117 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 13:26:16,266 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 13:26:16,266 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 13:26:16,267 - RSTPTest - INFO - ============================================================
2025-09-10 13:26:16,267 - RSTPTest - INFO - 开始测试: test_direct_link_failure
2025-09-10 13:26:16,267 - RSTPTest - INFO - ============================================================
2025-09-10 13:26:16,268 - test_convergence - INFO - 开始直接链路故障测试
2025-09-10 13:26:16,268 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 13:26:16,269 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 13:26:16,269 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 13:26:16,269 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 13:26:16,269 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 13:26:16,269 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 13:26:16,269 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 13:26:16,275 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 13:26:16,337 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 13:26:16,337 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 13:26:16,338 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 13:26:16,338 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 13:26:16,871 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 13:26:16,871 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 13:26:17,942 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 13:26:17,943 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 13:26:17,943 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 13:26:17,943 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 13:26:18,412 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 13:26:18,896 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 13:26:18,896 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 13:26:19,001 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 13:26:19,096 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 13:26:19,097 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 13:26:19,097 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 13:26:19,097 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 13:26:19,097 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 13:26:19,097 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 13:26:19,098 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 13:26:19,105 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 13:26:19,105 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 13:26:19,232 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 13:26:19,233 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 13:26:19,233 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 13:26:19,233 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 13:26:19,233 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 13:26:19,801 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 13:26:24,324 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:26:24,458 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:26:24,458 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 13:26:24,459 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 13:26:24,459 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 13:26:24,459 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 13:26:25,685 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 13:26:26,917 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 13:26:26,918 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 13:26:26,976 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 13:26:27,201 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 13:26:27,202 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 13:26:27,202 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 13:26:27,202 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 13:26:27,202 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 13:26:27,202 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 13:26:27,203 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 13:26:27,212 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 13:26:27,212 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 13:26:27,339 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 13:26:27,339 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 13:26:27,339 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 13:26:27,340 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 13:26:27,340 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 13:26:27,892 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 13:26:32,446 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:26:32,573 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:26:32,574 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 13:26:32,574 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 13:26:32,574 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 13:26:32,575 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 13:26:33,795 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 13:26:35,056 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 13:26:35,056 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 13:26:35,105 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 13:26:35,329 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 13:26:35,329 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 13:26:35,329 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 13:26:35,654 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 13:26:35,910 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:26:36,771 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.12秒
2025-09-10 13:26:36,771 - test_convergence - INFO - 初始收敛时间: 1.12秒
2025-09-10 13:26:37,039 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:26:37,196 - test_convergence - INFO - DUT的Root Port: eth2
2025-09-10 13:26:37,196 - FaultInjector_DUT - INFO - 断开链路: eth2
2025-09-10 13:26:37,462 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth2 (code=1)，将在逻辑上标记为已断开
2025-09-10 13:26:37,463 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 13:26:37,770 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:26:38,577 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.11秒
2025-09-10 13:26:38,830 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:26:39,354 - RSTPTest - INFO - 测试完成: test_direct_link_failure (耗时: 23.09秒)
2025-09-10 13:26:39,354 - RSTPTest - INFO - ============================================================

2025-09-10 13:26:39,396 - RSTPTest - INFO - ============================================================
2025-09-10 13:26:39,396 - RSTPTest - INFO - 开始测试: test_multiple_link_failures
2025-09-10 13:26:39,396 - RSTPTest - INFO - ============================================================
2025-09-10 13:26:39,397 - test_convergence - INFO - 开始多重链路故障测试
2025-09-10 13:26:39,397 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 13:26:39,397 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 13:26:39,397 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 13:26:39,397 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 13:26:39,397 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 13:26:39,398 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 13:26:39,398 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 13:26:39,398 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 13:26:39,871 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 13:26:39,871 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 13:26:40,903 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 13:26:40,903 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 13:26:40,904 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 13:26:40,904 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 13:26:41,363 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 13:26:41,844 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 13:26:41,844 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 13:26:41,947 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 13:26:42,043 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 13:26:42,044 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 13:26:42,044 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 13:26:42,044 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 13:26:42,044 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 13:26:42,045 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 13:26:42,045 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 13:26:42,045 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 13:26:42,578 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 13:26:47,107 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:26:47,236 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:26:47,237 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 13:26:47,237 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 13:26:47,237 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 13:26:47,238 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 13:26:48,448 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 13:26:49,659 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 13:26:49,659 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 13:26:49,708 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 13:26:49,933 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 13:26:49,933 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 13:26:49,933 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 13:26:49,934 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 13:26:49,934 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 13:26:49,934 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 13:26:49,934 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 13:26:49,934 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 13:26:50,442 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 13:26:54,980 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:26:55,117 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:26:55,118 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 13:26:55,118 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 13:26:55,118 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 13:26:55,118 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 13:26:56,357 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 13:26:57,637 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 13:26:57,637 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 13:26:57,689 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 13:26:57,915 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 13:26:57,915 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 13:26:57,916 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 13:26:57,916 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 13:26:58,170 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:26:58,987 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.07秒
2025-09-10 13:26:58,988 - test_convergence - INFO - 注入故障: eth0
2025-09-10 13:26:58,988 - FaultInjector_DUT - INFO - 断开链路: eth0
2025-09-10 13:26:59,202 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth0 (code=1)，将在逻辑上标记为已断开
2025-09-10 13:26:59,202 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 13:26:59,498 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:27:00,264 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.06秒
2025-09-10 13:27:00,264 - test_convergence - INFO - eth0故障收敛时间: 1.06秒
2025-09-10 13:27:02,266 - test_convergence - INFO - 注入故障: eth2
2025-09-10 13:27:02,266 - FaultInjector_DUT - INFO - 断开链路: eth2
2025-09-10 13:27:02,502 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth2 (code=1)，将在逻辑上标记为已断开
2025-09-10 13:27:02,503 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 13:27:02,813 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:27:03,569 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.07秒
2025-09-10 13:27:03,570 - test_convergence - INFO - eth2故障收敛时间: 1.07秒
2025-09-10 13:27:05,570 - FaultInjector_DUT - INFO - 恢复链路: eth0
2025-09-10 13:27:05,790 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth0 (code=1)，将在逻辑上标记为已恢复
2025-09-10 13:27:05,791 - FaultInjector_DUT - INFO - 恢复链路: eth2
2025-09-10 13:27:06,054 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth2 (code=1)，将在逻辑上标记为已恢复
2025-09-10 13:27:06,055 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 13:27:06,346 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:27:07,118 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.06秒
2025-09-10 13:27:07,118 - test_convergence - INFO - 最终恢复收敛时间: 1.06秒
2025-09-10 13:27:07,118 - test_convergence - INFO - 多重链路故障测试通过
2025-09-10 13:27:07,119 - RSTPTest - INFO - 测试完成: test_multiple_link_failures (耗时: 27.72秒)
2025-09-10 13:27:07,120 - RSTPTest - INFO - ============================================================

2025-09-10 13:27:07,121 - RSTPTest - INFO - ============================================================
2025-09-10 13:27:07,121 - RSTPTest - INFO - 开始测试: test_convergence_with_traffic
2025-09-10 13:27:07,121 - RSTPTest - INFO - ============================================================
2025-09-10 13:27:07,122 - test_convergence - INFO - 开始带流量的收敛测试
2025-09-10 13:27:07,122 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 13:27:07,122 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 13:27:07,122 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 13:27:07,123 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 13:27:07,123 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 13:27:07,123 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 13:27:07,123 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 13:27:07,123 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 13:27:07,619 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 13:27:07,619 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 13:27:08,660 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 13:27:08,660 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 13:27:08,660 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 13:27:08,660 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 13:27:09,118 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 13:27:09,615 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 13:27:09,616 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 13:27:09,727 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 13:27:09,827 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 13:27:09,827 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 13:27:09,828 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 13:27:09,828 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 13:27:09,828 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 13:27:09,828 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 13:27:09,828 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 13:27:09,829 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 13:27:10,354 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 13:27:14,907 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:27:15,052 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:27:15,052 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 13:27:15,052 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 13:27:15,052 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 13:27:15,052 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 13:27:16,266 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 13:27:17,499 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 13:27:17,500 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 13:27:17,549 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 13:27:17,774 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 13:27:17,774 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 13:27:17,774 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 13:27:17,775 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 13:27:17,775 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 13:27:17,775 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 13:27:17,775 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 13:27:17,775 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 13:27:18,274 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 13:27:22,820 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:27:22,955 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:27:22,955 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 13:27:22,955 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 13:27:22,956 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 13:27:22,956 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 13:27:24,179 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 13:27:25,464 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 13:27:25,464 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 13:27:25,513 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 13:27:25,738 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 13:27:25,738 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 13:27:25,739 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 13:27:31,851 - TrafficGenerator - INFO - 启动iperf3服务器: 192.168.184.131:5201
2025-09-10 13:27:33,929 - TrafficGenerator - ERROR - iperf3服务器启动失败
2025-09-10 13:27:36,851 - TrafficGenerator - INFO - 启动iperf3客户端: -> 192.168.184.131:5201
2025-09-10 13:27:36,851 - TrafficGenerator - INFO - iperf3客户端已启动 (udp, 100M)
2025-09-10 13:27:41,853 - FaultInjector_DUT - INFO - 断开链路: eth0
2025-09-10 13:27:42,081 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth0 (code=1)，将在逻辑上标记为已断开
2025-09-10 13:27:52,082 - test_convergence - INFO - 丢包数: 0
2025-09-10 13:27:52,083 - test_convergence - INFO - 估计中断时间: 0.000秒
2025-09-10 13:27:52,083 - TrafficGenerator - INFO - 停止流量生成
2025-09-10 13:27:54,146 - test_convergence - INFO - 带流量的收敛测试通过
2025-09-10 13:27:54,147 - RSTPTest - INFO - 测试完成: test_convergence_with_traffic (耗时: 47.03秒)
2025-09-10 13:27:54,147 - RSTPTest - INFO - ============================================================

2025-09-10 13:27:54,147 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 13:27:54,148 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 13:27:54,148 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 13:27:54,280 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 13:27:54,280 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 13:27:54,412 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 13:27:54,412 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 13:27:54,549 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 13:27:54,549 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 13:27:54,550 - RSTPTest - INFO - ============================================================
2025-09-10 13:27:54,550 - RSTPTest - INFO - 开始测试: test_backup_port_simulation
2025-09-10 13:27:54,550 - RSTPTest - INFO - ============================================================
2025-09-10 13:27:54,551 - test_enhanced_rstp_coverage - INFO - 开始备份端口模拟测试
2025-09-10 13:27:54,551 - test_enhanced_rstp_coverage - INFO - 创建模拟共享网段拓扑
2025-09-10 13:27:55,003 - test_enhanced_rstp_coverage - INFO - ✓ 创建连接: rstp0:dut_port1 <-> shared_segment:shared_port1
2025-09-10 13:27:55,327 - test_enhanced_rstp_coverage - INFO - ✓ 创建连接: rstp0:dut_port2 <-> shared_segment:shared_port2
2025-09-10 13:27:55,951 - test_enhanced_rstp_coverage - INFO - ✓ 创建远程交换机: remote_switch
2025-09-10 13:27:55,951 - test_enhanced_rstp_coverage - INFO - 等待RSTP收敛...
2025-09-10 13:28:11,208 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:28:11,362 - test_enhanced_rstp_coverage - INFO - DUT桥信息: BridgeInfo(bridge_id='', root_id='', root_port='eth0', root_path_cost=0, protocol_version='unknown', hello_time=0, forward_delay=0, max_age=0, topology_changes=0, ports={'eth0': PortInfo(name='eth0', role=<PortRole.ROOT: 'root'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth2': PortInfo(name='eth2', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth3': PortInfo(name='eth3', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')})
2025-09-10 13:28:11,363 - test_enhanced_rstp_coverage - INFO - 清理测试环境
2025-09-10 13:28:12,105 - test_enhanced_rstp_coverage - INFO - ✓ 备份端口模拟测试完成
2025-09-10 13:28:12,106 - RSTPTest - INFO - 测试完成: test_backup_port_simulation (耗时: 17.56秒)
2025-09-10 13:28:12,106 - RSTPTest - INFO - ============================================================

2025-09-10 13:28:12,108 - RSTPTest - INFO - ============================================================
2025-09-10 13:28:12,108 - RSTPTest - INFO - 开始测试: test_comprehensive_port_state_transitions
2025-09-10 13:28:12,108 - RSTPTest - INFO - ============================================================
2025-09-10 13:28:12,109 - test_enhanced_rstp_coverage - INFO - 开始全面端口状态转换测试
2025-09-10 13:28:12,109 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 13:28:12,109 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 13:28:12,110 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 13:28:12,110 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 13:28:12,110 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 13:28:12,110 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 13:28:12,110 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 13:28:12,150 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 13:28:12,207 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 13:28:12,207 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 13:28:12,208 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 13:28:12,208 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 13:28:12,733 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 13:28:12,734 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 13:28:13,778 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 13:28:13,778 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 13:28:13,779 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 13:28:13,779 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 13:28:14,240 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 13:28:14,717 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 13:28:14,718 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 13:28:14,822 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 13:28:14,918 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 13:28:14,918 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 13:28:14,918 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 13:28:14,918 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 13:28:14,919 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 13:28:14,919 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 13:28:14,919 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 13:28:14,926 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 13:28:14,926 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 13:28:15,061 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 13:28:15,061 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 13:28:15,061 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 13:28:15,062 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 13:28:15,062 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 13:28:15,617 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 13:28:20,184 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:28:20,319 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:28:20,320 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 13:28:20,320 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 13:28:20,320 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 13:28:20,320 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 13:28:21,553 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 13:28:22,817 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 13:28:22,817 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 13:28:22,869 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 13:28:23,089 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 13:28:23,090 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 13:28:23,090 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 13:28:23,090 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 13:28:23,090 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 13:28:23,090 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 13:28:23,091 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 13:28:23,099 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 13:28:23,099 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 13:28:23,235 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 13:28:23,235 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 13:28:23,236 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 13:28:23,236 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 13:28:23,236 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 13:28:23,780 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 13:28:28,375 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:28:28,513 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:28:28,513 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 13:28:28,513 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 13:28:28,513 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 13:28:28,514 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 13:28:29,738 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 13:28:31,047 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 13:28:31,048 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 13:28:31,096 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 13:28:31,325 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 13:28:31,326 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 13:28:31,326 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 13:28:31,533 - test_enhanced_rstp_coverage - INFO - 等待初始收敛...
2025-09-10 13:28:31,533 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 13:28:31,812 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:28:31,965 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.43秒
2025-09-10 13:28:32,264 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:28:32,435 - RSTPTest - INFO - 测试完成: test_comprehensive_port_state_transitions (耗时: 20.33秒)
2025-09-10 13:28:32,435 - RSTPTest - INFO - ============================================================

2025-09-10 13:28:32,437 - RSTPTest - INFO - ============================================================
2025-09-10 13:28:32,437 - RSTPTest - INFO - 开始测试: test_detailed_bpdu_analysis
2025-09-10 13:28:32,437 - RSTPTest - INFO - ============================================================
2025-09-10 13:28:32,438 - test_enhanced_rstp_coverage - INFO - 开始详细BPDU分析测试
2025-09-10 13:28:32,438 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 13:28:32,438 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 13:28:32,439 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 13:28:32,439 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 13:28:32,439 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 13:28:32,439 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 13:28:32,439 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 13:28:32,440 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 13:28:32,942 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 13:28:32,942 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 13:28:33,977 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 13:28:33,977 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 13:28:33,977 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 13:28:33,978 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 13:28:34,435 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 13:28:34,914 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 13:28:34,914 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 13:28:35,017 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 13:28:35,114 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 13:28:35,114 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 13:28:35,114 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 13:28:35,114 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 13:28:35,115 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 13:28:35,115 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 13:28:35,115 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 13:28:35,115 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 13:28:35,657 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 13:28:40,271 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:28:40,411 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:28:40,411 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 13:28:40,411 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 13:28:40,411 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 13:28:40,412 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 13:28:41,624 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 13:28:42,865 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 13:28:42,865 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 13:28:42,914 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 13:28:43,137 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 13:28:43,138 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 13:28:43,138 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 13:28:43,138 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 13:28:43,138 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 13:28:43,138 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 13:28:43,139 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 13:28:43,139 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 13:28:43,658 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 13:28:48,192 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:28:48,332 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:28:48,332 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 13:28:48,332 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 13:28:48,332 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 13:28:48,333 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 13:28:49,546 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 13:28:50,798 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 13:28:50,798 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 13:28:50,847 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 13:28:51,076 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 13:28:51,076 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 13:28:51,076 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 13:28:51,416 - test_enhanced_rstp_coverage - INFO - 等待RSTP收敛...
2025-09-10 13:28:51,417 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 13:28:51,668 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:28:51,822 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.41秒
2025-09-10 13:28:52,119 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:28:52,274 - test_enhanced_rstp_coverage - INFO - Hello Time: 0秒
2025-09-10 13:28:52,274 - test_enhanced_rstp_coverage - INFO - === 测试1: 验证分布式BPDU生成 ===
2025-09-10 13:28:52,275 - test_enhanced_rstp_coverage - INFO - 总共捕获0个BPDU，来自0个不同源
2025-09-10 13:28:52,291 - RSTPTest - INFO - 测试完成: test_detailed_bpdu_analysis (耗时: 19.85秒)
2025-09-10 13:28:52,292 - RSTPTest - INFO - ============================================================

2025-09-10 13:28:52,294 - RSTPTest - INFO - ============================================================
2025-09-10 13:28:52,294 - RSTPTest - INFO - 开始测试: test_topology_change_comprehensive
2025-09-10 13:28:52,294 - RSTPTest - INFO - ============================================================
2025-09-10 13:28:52,295 - test_enhanced_rstp_coverage - INFO - 开始全面拓扑变更测试
2025-09-10 13:28:52,295 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 13:28:52,295 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 13:28:52,295 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 13:28:52,296 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 13:28:52,296 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 13:28:52,296 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 13:28:52,296 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 13:28:52,296 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 13:28:52,804 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 13:28:52,805 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 13:28:53,849 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 13:28:53,849 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 13:28:53,850 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 13:28:53,850 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 13:28:54,317 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 13:28:54,797 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 13:28:54,797 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 13:28:54,901 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 13:28:54,997 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 13:28:54,998 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 13:28:54,998 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 13:28:54,998 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 13:28:54,998 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 13:28:54,999 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 13:28:54,999 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 13:28:55,000 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 13:28:55,497 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 13:29:00,053 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:29:00,190 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:29:00,190 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 13:29:00,191 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 13:29:00,191 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 13:29:00,191 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 13:29:01,404 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 13:29:02,642 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 13:29:02,642 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 13:29:02,690 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 13:29:02,923 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 13:29:02,924 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 13:29:02,924 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 13:29:02,924 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 13:29:02,924 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 13:29:02,924 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 13:29:02,925 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 13:29:02,925 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 13:29:03,445 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 13:29:08,020 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:29:08,156 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:29:08,156 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 13:29:08,156 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 13:29:08,157 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 13:29:08,157 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 13:29:09,402 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 13:29:10,661 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 13:29:10,661 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 13:29:10,717 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 13:29:10,939 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 13:29:10,940 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 13:29:10,940 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 13:29:11,144 - test_enhanced_rstp_coverage - INFO - 等待初始收敛...
2025-09-10 13:29:11,144 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 13:29:11,436 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:29:11,594 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.45秒
2025-09-10 13:29:11,895 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:29:12,348 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 13:29:12,509 - test_enhanced_rstp_coverage - INFO - 初始状态: DUT是根桥=True
2025-09-10 13:29:12,510 - test_enhanced_rstp_coverage - INFO - === 测试场景1: 根桥变更 ===
2025-09-10 13:29:12,510 - test_enhanced_rstp_coverage - INFO - === 测试场景2: 端口故障恢复 ===
2025-09-10 13:29:12,807 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:29:12,962 - test_enhanced_rstp_coverage - INFO - === 测试场景3: 端口优先级变更 ===
2025-09-10 13:29:13,269 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:29:13,425 - test_enhanced_rstp_coverage - WARNING - 未检测到明显的拓扑变更，可能是测试环境限制
2025-09-10 13:29:13,425 - test_enhanced_rstp_coverage - INFO - ✓ 全面拓扑变更测试完成
2025-09-10 13:29:13,426 - RSTPTest - INFO - 测试完成: test_topology_change_comprehensive (耗时: 21.13秒)
2025-09-10 13:29:13,427 - RSTPTest - INFO - ============================================================

2025-09-10 13:29:13,427 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 13:29:13,427 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 13:29:13,428 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 13:29:13,567 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 13:29:13,567 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 13:29:13,691 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 13:29:13,692 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 13:29:13,825 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 13:29:13,826 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 13:29:13,826 - RSTPTest - INFO - ============================================================
2025-09-10 13:29:13,826 - RSTPTest - INFO - 开始测试: test_rstp_reconvergence_no_switchover
2025-09-10 13:29:13,827 - RSTPTest - INFO - ============================================================
2025-09-10 13:29:13,827 - test_high_availability - INFO - 开始RSTP重构误判测试
2025-09-10 13:29:13,828 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 13:29:13,828 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 13:29:13,828 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 13:29:13,828 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 13:29:13,828 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 13:29:13,828 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 13:29:13,829 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 13:29:13,834 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 13:29:13,890 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 13:29:13,890 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 13:29:13,890 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 13:29:13,890 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 13:29:14,404 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 13:29:14,404 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 13:29:15,437 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 13:29:15,437 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 13:29:15,437 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 13:29:15,437 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 13:29:15,962 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 13:29:16,445 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 13:29:16,445 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 13:29:16,548 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 13:29:16,645 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 13:29:16,645 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 13:29:16,645 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 13:29:16,645 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 13:29:16,645 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 13:29:16,646 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 13:29:16,646 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 13:29:16,654 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 13:29:16,655 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 13:29:16,788 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 13:29:16,789 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 13:29:16,789 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 13:29:16,789 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 13:29:16,789 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 13:29:17,350 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 13:29:21,942 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:29:22,076 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:29:22,077 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 13:29:22,077 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 13:29:22,077 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 13:29:22,078 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 13:29:23,301 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 13:29:24,527 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 13:29:24,528 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 13:29:24,577 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 13:29:24,795 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 13:29:24,796 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 13:29:24,796 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 13:29:24,796 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 13:29:24,796 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 13:29:24,797 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 13:29:24,797 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 13:29:24,805 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 13:29:24,805 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 13:29:24,931 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 13:29:24,931 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 13:29:24,931 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 13:29:24,931 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 13:29:24,932 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 13:29:25,486 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 13:29:30,022 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:29:30,167 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:29:30,167 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 13:29:30,167 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 13:29:30,168 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 13:29:30,168 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 13:29:31,402 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 13:29:32,645 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 13:29:32,645 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 13:29:32,693 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 13:29:32,915 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 13:29:32,915 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 13:29:32,915 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 13:29:37,921 - test_high_availability - INFO - 初始HA状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-10 13:29:37,921 - test_high_availability - INFO - 在远端触发RSTP重构...
2025-09-10 13:29:37,921 - FaultInjector_TestNode2 - INFO - 断开链路: eth0
2025-09-10 13:29:38,101 - FaultInjector_TestNode2 - INFO - 链路已断开: eth0
2025-09-10 13:29:48,107 - test_high_availability - INFO - RSTP重构后HA状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-10 13:29:48,107 - FaultInjector_TestNode2 - INFO - 恢复链路: eth0
2025-09-10 13:29:48,295 - FaultInjector_TestNode2 - INFO - 链路已恢复: eth0
2025-09-10 13:29:48,295 - test_high_availability - INFO - RSTP重构误判测试完成
2025-09-10 13:29:48,296 - RSTPTest - INFO - 测试完成: test_rstp_reconvergence_no_switchover (耗时: 34.47秒)
2025-09-10 13:29:48,297 - RSTPTest - INFO - ============================================================

2025-09-10 13:29:48,299 - RSTPTest - INFO - ============================================================
2025-09-10 13:29:48,299 - RSTPTest - INFO - 开始测试: test_split_brain_scenario
2025-09-10 13:29:48,299 - RSTPTest - INFO - ============================================================
2025-09-10 13:29:48,300 - test_high_availability - INFO - 开始裂脑场景测试
2025-09-10 13:29:48,305 - test_high_availability - INFO - 初始状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-10 13:29:48,305 - test_high_availability - INFO - 断开同步链路: eth3
2025-09-10 13:29:48,306 - FaultInjector_DUT - INFO - 断开链路: eth3
2025-09-10 13:29:48,568 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth3 (code=1)，将在逻辑上标记为已断开
2025-09-10 13:29:58,569 - test_high_availability - WARNING - 裂脑测试需要访问两个控制器
2025-09-10 13:29:58,569 - FaultInjector_DUT - INFO - 恢复链路: eth3
2025-09-10 13:29:58,788 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth3 (code=1)，将在逻辑上标记为已恢复
2025-09-10 13:29:58,788 - test_high_availability - INFO - 裂脑场景测试完成
2025-09-10 13:29:58,789 - RSTPTest - INFO - 测试完成: test_split_brain_scenario (耗时: 10.49秒)
2025-09-10 13:29:58,789 - RSTPTest - INFO - ============================================================

2025-09-10 13:29:58,793 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 13:29:58,793 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 13:29:58,794 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 13:29:58,926 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 13:29:58,926 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 13:29:58,926 - RSTPTest - INFO - ============================================================
2025-09-10 13:29:58,927 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[12288]
2025-09-10 13:29:58,927 - RSTPTest - INFO - ============================================================
2025-09-10 13:29:58,928 - test_parameters - INFO - 测试网桥优先级: 12288
2025-09-10 13:30:00,479 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-10 13:30:02,595 - test_parameters - INFO - 从OVS配置读取到优先级: 12288
2025-09-10 13:30:02,596 - test_parameters - INFO - 优先级12288设置成功
2025-09-10 13:30:02,596 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[12288] (耗时: 3.67秒)
2025-09-10 13:30:02,597 - RSTPTest - INFO - ============================================================

2025-09-10 13:30:02,598 - RSTPTest - INFO - ============================================================
2025-09-10 13:30:02,598 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[16384]
2025-09-10 13:30:02,598 - RSTPTest - INFO - ============================================================
2025-09-10 13:30:02,599 - test_parameters - INFO - 测试网桥优先级: 16384
2025-09-10 13:30:04,140 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-10 13:30:06,247 - test_parameters - INFO - 从OVS配置读取到优先级: 16384
2025-09-10 13:30:06,248 - test_parameters - INFO - 优先级16384设置成功
2025-09-10 13:30:06,249 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[16384] (耗时: 3.65秒)
2025-09-10 13:30:06,249 - RSTPTest - INFO - ============================================================

2025-09-10 13:30:06,250 - RSTPTest - INFO - ============================================================
2025-09-10 13:30:06,250 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[32768]
2025-09-10 13:30:06,250 - RSTPTest - INFO - ============================================================
2025-09-10 13:30:06,251 - test_parameters - INFO - 测试网桥优先级: 32768
2025-09-10 13:30:07,796 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-10 13:30:09,899 - test_parameters - INFO - 从OVS配置读取到优先级: 32768
2025-09-10 13:30:09,900 - test_parameters - INFO - 优先级32768设置成功
2025-09-10 13:30:09,900 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[32768] (耗时: 3.65秒)
2025-09-10 13:30:09,901 - RSTPTest - INFO - ============================================================

2025-09-10 13:30:09,902 - RSTPTest - INFO - ============================================================
2025-09-10 13:30:09,902 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[61440]
2025-09-10 13:30:09,902 - RSTPTest - INFO - ============================================================
2025-09-10 13:30:09,903 - test_parameters - INFO - 测试网桥优先级: 61440
2025-09-10 13:30:11,440 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-10 13:30:13,551 - test_parameters - INFO - 从OVS配置读取到优先级: 61440
2025-09-10 13:30:13,552 - test_parameters - INFO - 优先级61440设置成功
2025-09-10 13:30:13,552 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[61440] (耗时: 3.65秒)
2025-09-10 13:30:13,553 - RSTPTest - INFO - ============================================================

2025-09-10 13:30:13,554 - RSTPTest - INFO - ============================================================
2025-09-10 13:30:13,554 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[4097]
2025-09-10 13:30:13,554 - RSTPTest - INFO - ============================================================
2025-09-10 13:30:13,555 - test_parameters - INFO - 测试无效优先级: 4097
2025-09-10 13:30:15,427 - test_parameters - INFO - DUT处理无效优先级 4097 -> 4097
2025-09-10 13:30:15,427 - test_parameters - ERROR - DUT接受了非标准优先级值 4097，不符合802.1D标准（应为4096的倍数）
2025-09-10 13:30:15,447 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[4097] (耗时: 1.89秒)
2025-09-10 13:30:15,447 - RSTPTest - INFO - ============================================================

2025-09-10 13:30:15,449 - RSTPTest - INFO - ============================================================
2025-09-10 13:30:15,449 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[12289]
2025-09-10 13:30:15,449 - RSTPTest - INFO - ============================================================
2025-09-10 13:30:15,450 - test_parameters - INFO - 测试无效优先级: 12289
2025-09-10 13:30:17,275 - test_parameters - INFO - DUT处理无效优先级 12289 -> 12289
2025-09-10 13:30:17,275 - test_parameters - ERROR - DUT接受了非标准优先级值 12289，不符合802.1D标准（应为4096的倍数）
2025-09-10 13:30:17,296 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[12289] (耗时: 1.85秒)
2025-09-10 13:30:17,296 - RSTPTest - INFO - ============================================================

2025-09-10 13:30:17,298 - RSTPTest - INFO - ============================================================
2025-09-10 13:30:17,299 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[70000]
2025-09-10 13:30:17,299 - RSTPTest - INFO - ============================================================
2025-09-10 13:30:17,300 - test_parameters - INFO - 测试无效优先级: 70000
2025-09-10 13:30:19,126 - test_parameters - INFO - DUT处理无效优先级 70000 -> 70000
2025-09-10 13:30:19,126 - test_parameters - ERROR - DUT接受了非标准优先级值 70000，不符合802.1D标准（应为4096的倍数）
2025-09-10 13:30:19,144 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[70000] (耗时: 1.84秒)
2025-09-10 13:30:19,144 - RSTPTest - INFO - ============================================================

2025-09-10 13:30:19,146 - RSTPTest - INFO - ============================================================
2025-09-10 13:30:19,146 - RSTPTest - INFO - 开始测试: test_hello_time
2025-09-10 13:30:19,146 - RSTPTest - INFO - ============================================================
2025-09-10 13:30:19,147 - test_parameters - INFO - 测试Hello Time参数
2025-09-10 13:30:20,726 - test_parameters - INFO - 设置Hello Time: 1秒
2025-09-10 13:30:22,916 - test_parameters - INFO - Hello Time 1秒设置成功
2025-09-10 13:30:22,916 - test_parameters - INFO - 设置Hello Time: 2秒
2025-09-10 13:30:25,139 - test_parameters - INFO - Hello Time 2秒设置成功
2025-09-10 13:30:25,139 - test_parameters - INFO - 设置Hello Time: 5秒
2025-09-10 13:30:27,367 - test_parameters - INFO - Hello Time 5秒设置成功
2025-09-10 13:30:27,367 - test_parameters - INFO - Hello Time测试通过
2025-09-10 13:30:27,368 - RSTPTest - INFO - 测试完成: test_hello_time (耗时: 8.22秒)
2025-09-10 13:30:27,368 - RSTPTest - INFO - ============================================================

2025-09-10 13:30:27,369 - RSTPTest - INFO - ============================================================
2025-09-10 13:30:27,369 - RSTPTest - INFO - 开始测试: test_forward_delay
2025-09-10 13:30:27,370 - RSTPTest - INFO - ============================================================
2025-09-10 13:30:27,370 - test_parameters - INFO - 测试Forward Delay参数
2025-09-10 13:30:28,958 - test_parameters - INFO - 设置Forward Delay: 4秒
2025-09-10 13:30:31,152 - test_parameters - INFO - Forward Delay 4秒设置成功
2025-09-10 13:30:31,152 - test_parameters - INFO - 设置Forward Delay: 10秒
2025-09-10 13:30:33,379 - test_parameters - INFO - Forward Delay 10秒设置成功
2025-09-10 13:30:33,379 - test_parameters - INFO - 设置Forward Delay: 15秒
2025-09-10 13:30:35,598 - test_parameters - INFO - Forward Delay 15秒设置成功
2025-09-10 13:30:35,599 - test_parameters - INFO - Forward Delay测试通过
2025-09-10 13:30:35,600 - RSTPTest - INFO - 测试完成: test_forward_delay (耗时: 8.23秒)
2025-09-10 13:30:35,600 - RSTPTest - INFO - ============================================================

2025-09-10 13:30:35,603 - RSTPTest - INFO - ============================================================
2025-09-10 13:30:35,603 - RSTPTest - INFO - 开始测试: test_max_age
2025-09-10 13:30:35,603 - RSTPTest - INFO - ============================================================
2025-09-10 13:30:35,604 - test_parameters - INFO - 测试Max Age参数
2025-09-10 13:30:37,192 - test_parameters - INFO - 设置Max Age: 6秒
2025-09-10 13:30:39,372 - test_parameters - INFO - Max Age 6秒设置成功
2025-09-10 13:30:39,372 - test_parameters - INFO - 设置Max Age: 10秒
2025-09-10 13:30:41,603 - test_parameters - INFO - Max Age 10秒设置成功
2025-09-10 13:30:41,603 - test_parameters - INFO - 设置Max Age: 20秒
2025-09-10 13:30:43,839 - test_parameters - INFO - Max Age 20秒设置成功
2025-09-10 13:30:43,840 - test_parameters - INFO - Max Age测试通过
2025-09-10 13:30:43,841 - RSTPTest - INFO - 测试完成: test_max_age (耗时: 8.24秒)
2025-09-10 13:30:43,841 - RSTPTest - INFO - ============================================================

2025-09-10 13:30:43,962 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 13:30:43,963 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 13:30:44,099 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 13:30:44,100 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 13:30:44,100 - RSTPTest - INFO - ============================================================
2025-09-10 13:30:44,101 - RSTPTest - INFO - 开始测试: test_port_cost
2025-09-10 13:30:44,101 - RSTPTest - INFO - ============================================================
2025-09-10 13:30:44,102 - test_parameters - INFO - 测试端口路径成本
2025-09-10 13:30:44,102 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 13:30:44,102 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 13:30:44,102 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 13:30:44,103 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 13:30:44,103 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 13:30:44,103 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 13:30:44,103 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 13:30:44,108 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 13:30:44,165 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 13:30:44,165 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 13:30:44,165 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 13:30:44,165 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 13:30:44,714 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 13:30:44,715 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 13:30:45,765 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 13:30:45,766 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 13:30:45,766 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 13:30:45,766 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 13:30:46,240 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 13:30:46,727 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 13:30:46,727 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 13:30:46,831 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 13:30:46,927 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 13:30:46,928 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 13:30:46,928 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 13:30:46,928 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 13:30:46,928 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 13:30:46,928 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 13:30:46,929 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 13:30:46,936 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 13:30:46,936 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 13:30:47,062 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 13:30:47,063 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 13:30:47,063 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 13:30:47,064 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 13:30:47,064 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 13:30:47,609 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 13:30:52,178 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:30:52,315 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:30:52,315 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 13:30:52,315 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 13:30:52,315 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 13:30:52,316 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 13:30:53,542 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 13:30:54,763 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 13:30:54,764 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 13:30:54,813 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 13:30:55,026 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 13:30:55,026 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 13:30:55,027 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 13:30:55,027 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 13:30:55,027 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 13:30:55,027 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 13:30:55,027 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 13:30:55,035 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 13:30:55,035 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 13:30:55,154 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 13:30:55,155 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 13:30:55,155 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 13:30:55,155 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 13:30:55,155 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 13:30:55,713 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 13:32:29,774 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:32:39,852 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:32:39,853 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 13:32:39,853 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 13:32:39,853 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 13:32:39,854 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 13:33:48,749 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 13:34:42,501 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 13:34:42,502 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 13:34:42,551 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 13:34:50,765 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 13:34:50,766 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 13:34:50,766 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 13:34:55,767 - test_parameters - INFO - 设置端口eth0成本: 10
2025-09-10 13:34:55,829 - test_parameters - INFO - 设置端口eth0成本: 100
2025-09-10 13:34:55,934 - test_parameters - INFO - 设置端口eth0成本: 1000
2025-09-10 13:34:56,038 - test_parameters - INFO - 设置端口eth0成本: 20000
2025-09-10 13:34:56,142 - test_parameters - INFO - 端口成本测试通过
2025-09-10 13:34:56,143 - RSTPTest - INFO - 测试完成: test_port_cost (耗时: 252.04秒)
2025-09-10 13:34:56,143 - RSTPTest - INFO - ============================================================

2025-09-10 13:34:56,144 - RSTPTest - INFO - ============================================================
2025-09-10 13:34:56,144 - RSTPTest - INFO - 开始测试: test_parameter_persistence
2025-09-10 13:34:56,145 - RSTPTest - INFO - ============================================================
2025-09-10 13:34:56,145 - test_parameters - INFO - 测试参数持久性
2025-09-10 13:35:03,386 - test_parameters - INFO - 参数持久性测试通过
2025-09-10 13:35:03,388 - RSTPTest - INFO - 测试完成: test_parameter_persistence (耗时: 7.24秒)
2025-09-10 13:35:03,388 - RSTPTest - INFO - ============================================================

2025-09-10 13:35:03,389 - RSTPTest - INFO - ============================================================
2025-09-10 13:35:03,389 - RSTPTest - INFO - 开始测试: test_parameter_boundaries
2025-09-10 13:35:03,390 - RSTPTest - INFO - ============================================================
2025-09-10 13:35:03,390 - test_parameters - INFO - 测试参数边界值
2025-09-10 13:35:05,042 - test_parameters - INFO - 最小值0: 失败
2025-09-10 13:35:05,150 - test_parameters - INFO - 最大值65535: 失败
2025-09-10 13:35:05,255 - test_parameters - INFO - 正确拒绝了无效值-1
2025-09-10 13:35:05,362 - test_parameters - INFO - 正确拒绝了无效值65536
2025-09-10 13:35:05,462 - test_parameters - INFO - 最小值1: 失败
2025-09-10 13:35:05,570 - test_parameters - INFO - 最大值10: 失败
2025-09-10 13:35:05,674 - test_parameters - INFO - 正确拒绝了无效值0
2025-09-10 13:35:05,786 - test_parameters - INFO - 正确拒绝了无效值11
2025-09-10 13:35:05,890 - test_parameters - INFO - 最小值4: 失败
2025-09-10 13:35:05,993 - test_parameters - INFO - 最大值30: 失败
2025-09-10 13:35:06,093 - test_parameters - INFO - 正确拒绝了无效值3
2025-09-10 13:35:06,194 - test_parameters - INFO - 正确拒绝了无效值31
2025-09-10 13:35:06,293 - test_parameters - INFO - 最小值6: 失败
2025-09-10 13:35:06,394 - test_parameters - INFO - 最大值40: 失败
2025-09-10 13:35:06,494 - test_parameters - INFO - 正确拒绝了无效值5
2025-09-10 13:35:06,599 - test_parameters - INFO - 正确拒绝了无效值41
2025-09-10 13:35:06,599 - test_parameters - INFO - 参数边界测试完成
2025-09-10 13:35:06,600 - RSTPTest - INFO - 测试完成: test_parameter_boundaries (耗时: 3.21秒)
2025-09-10 13:35:06,600 - RSTPTest - INFO - ============================================================

2025-09-10 13:35:06,600 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 13:35:06,601 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 13:35:06,601 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 13:35:06,737 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 13:35:06,737 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 13:35:06,868 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 13:35:06,868 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 13:35:07,002 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 13:35:07,003 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 13:35:07,004 - RSTPTest - INFO - ============================================================
2025-09-10 13:35:07,004 - RSTPTest - INFO - 开始测试: test_port_role_assignment_simplified
2025-09-10 13:35:07,004 - RSTPTest - INFO - ============================================================
2025-09-10 13:35:07,005 - test_protocol_conformance - INFO - 开始端口角色分配测试
2025-09-10 13:35:07,006 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 13:35:07,006 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 13:35:07,006 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 13:35:07,006 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 13:35:07,007 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 13:35:07,007 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 13:35:07,007 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 13:35:07,013 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 13:35:07,068 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 13:35:07,068 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 13:35:07,069 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 13:35:07,069 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 13:35:07,618 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 13:35:07,618 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 13:35:08,672 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 13:35:08,672 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 13:35:08,672 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 13:35:08,673 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 13:35:09,133 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 13:35:09,615 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 13:35:09,615 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 13:35:09,719 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 13:35:09,816 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 13:35:09,816 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 13:35:09,817 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 13:35:09,817 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 13:35:09,817 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 13:35:09,817 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 13:35:09,817 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 13:35:09,825 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 13:35:09,826 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 13:35:09,966 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 13:35:09,967 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 13:35:09,967 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 13:35:09,967 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 13:35:09,967 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 13:35:10,525 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 13:35:15,065 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:35:15,205 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:35:15,205 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 13:35:15,205 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 13:35:15,206 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 13:35:15,206 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 13:35:16,424 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 13:35:17,664 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 13:35:17,665 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 13:35:17,713 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 13:35:17,934 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 13:35:17,934 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 13:35:17,934 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 13:35:17,935 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 13:35:17,935 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 13:35:17,935 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 13:35:17,935 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 13:35:17,943 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 13:35:17,943 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 13:35:26,097 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 13:35:26,097 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 13:35:26,097 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 13:35:26,097 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 13:35:26,097 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 13:35:41,780 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 13:35:46,330 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:35:46,466 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:35:46,467 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 13:35:46,467 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 13:35:46,467 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 13:35:46,467 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 13:35:47,712 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 13:35:48,992 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 13:35:48,992 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 13:35:49,041 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 13:35:49,260 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 13:35:49,261 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 13:35:49,261 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 13:35:49,457 - test_protocol_conformance - INFO - 等待网络收敛...
2025-09-10 13:35:49,458 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 13:35:49,753 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:35:49,907 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.45秒
2025-09-10 13:35:50,205 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:35:50,657 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 13:35:50,815 - test_protocol_conformance - INFO - DUT是根桥: True
2025-09-10 13:35:50,815 - test_protocol_conformance - INFO - 活动端口角色: {}
2025-09-10 13:35:50,815 - test_protocol_conformance - INFO - 禁用端口: ['eth0', 'eth2', 'eth3']
2025-09-10 13:35:50,853 - RSTPTest - INFO - 测试完成: test_port_role_assignment_simplified (耗时: 43.85秒)
2025-09-10 13:35:50,853 - RSTPTest - INFO - ============================================================

2025-09-10 13:35:50,855 - RSTPTest - INFO - ============================================================
2025-09-10 13:35:50,855 - RSTPTest - INFO - 开始测试: test_root_bridge_election
2025-09-10 13:35:50,855 - RSTPTest - INFO - ============================================================
2025-09-10 13:35:50,856 - test_protocol_conformance - INFO - 开始根网桥选举测试
2025-09-10 13:35:50,856 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 13:35:50,856 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 13:35:50,856 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 13:35:50,857 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 13:35:50,857 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 13:35:50,857 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 13:35:50,857 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 13:35:50,857 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 13:35:51,317 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 13:35:51,317 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 13:35:52,346 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 13:35:52,346 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 13:35:52,347 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 13:35:52,347 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 13:35:52,802 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 13:35:53,282 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 13:35:53,283 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 13:35:53,386 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 13:35:53,486 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 13:35:53,486 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 13:35:53,487 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 13:35:53,487 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 13:35:53,487 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 13:35:53,487 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 13:35:53,487 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 13:35:53,488 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 13:35:54,006 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 13:35:58,560 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:35:58,697 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:35:58,697 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 13:35:58,698 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 13:35:58,698 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 13:35:58,698 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 13:35:59,921 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 13:36:01,128 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 13:36:01,128 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 13:36:01,176 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 13:36:01,401 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 13:36:01,402 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 13:36:01,402 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 13:36:01,402 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 13:36:01,402 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 13:36:01,402 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 13:36:01,403 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 13:36:01,403 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 13:36:01,907 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 13:36:06,540 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:36:06,673 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:36:06,673 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 13:36:06,673 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 13:36:06,674 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 13:36:06,674 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 13:36:07,883 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 13:36:09,146 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 13:36:09,147 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 13:36:09,196 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 13:36:09,417 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 13:36:09,417 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 13:36:09,418 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 13:36:12,419 - test_protocol_conformance - INFO - === 检查DUT网桥配置 ===
2025-09-10 13:36:12,425 - test_protocol_conformance - INFO - 找到测试网桥: br0
2025-09-10 13:36:12,480 - test_protocol_conformance - INFO - 启用br0的RSTP
2025-09-10 13:36:12,526 - test_protocol_conformance - INFO - br0 STP状态: ('', 'cat: /sys/class/net/br0/bridge/stp_state: No such file or directory\n', 1)
2025-09-10 13:36:12,527 - test_protocol_conformance - INFO - === 初始网桥状态 ===
2025-09-10 13:36:12,821 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:36:12,975 - test_protocol_conformance - INFO - 活动端口数: 0
2025-09-10 13:36:12,975 - test_protocol_conformance - WARNING - 活动端口不足，尝试启用更多端口
2025-09-10 13:36:16,577 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:36:16,731 - test_protocol_conformance - INFO - 初始端口状态:
2025-09-10 13:36:16,731 - test_protocol_conformance - INFO - 初始状态 - DUT有Root Port: False
2025-09-10 13:36:16,731 - test_protocol_conformance - INFO - === 配置网桥优先级 ===
2025-09-10 13:36:16,731 - test_protocol_conformance - INFO - 设置TestNode1优先级为16384
2025-09-10 13:36:16,865 - test_protocol_conformance - INFO - 设置DUT优先级为32768
2025-09-10 13:36:16,876 - test_protocol_conformance - INFO - ip命令设置结果: ('', 'RTNETLINK answers: Operation not supported\n', 2)
2025-09-10 13:36:16,927 - test_protocol_conformance - INFO - sysfs设置结果: ('32768\n', 'tee: /sys/class/net/br0/bridge/priority: No such file or directory\n', 1)
2025-09-10 13:36:16,927 - test_protocol_conformance - INFO - 设置TestNode2优先级为24576
2025-09-10 13:36:17,062 - test_protocol_conformance - INFO - 等待RSTP收敛...
2025-09-10 13:36:27,063 - test_protocol_conformance - INFO - === 第一阶段验证 ===
2025-09-10 13:36:27,316 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:36:27,518 - test_protocol_conformance - INFO - DUT当前优先级: 
2025-09-10 13:36:27,519 - test_protocol_conformance - WARNING - 优先级验证失败: 优先级设置失败，期望32768，实际
assert '' == '32768'
  
  [0m[91m- 32768[39;49;00m[90m[39;49;00m
2025-09-10 13:36:27,519 - test_protocol_conformance - INFO - 
=== 第二阶段：DUT应成为根桥 ===
2025-09-10 13:36:27,520 - test_protocol_conformance - INFO - 设置DUT优先级为12288（最低）
2025-09-10 13:36:27,669 - test_protocol_conformance - INFO - 设置后优先级: 
2025-09-10 13:36:27,669 - test_protocol_conformance - INFO - 等待RSTP重新收敛...
2025-09-10 13:36:37,670 - test_protocol_conformance - INFO - === 最终验证 ===
2025-09-10 13:36:37,924 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:36:38,079 - test_protocol_conformance - ERROR - DUT RSTP实现问题诊断:
2025-09-10 13:36:38,079 - test_protocol_conformance - ERROR - 1. DUT优先级已设置为12288（最低）
2025-09-10 13:36:38,080 - test_protocol_conformance - ERROR - 2. 但DUT仍有Root Port: False
2025-09-10 13:36:38,080 - test_protocol_conformance - ERROR - 3. Designated端口数: 0
2025-09-10 13:36:38,080 - test_protocol_conformance - ERROR - 可能的原因:
2025-09-10 13:36:38,080 - test_protocol_conformance - ERROR - - DUT的RSTP实现不符合标准
2025-09-10 13:36:38,081 - test_protocol_conformance - ERROR - - DUT没有正确处理优先级变化
2025-09-10 13:36:38,081 - test_protocol_conformance - ERROR - - DUT的BPDU发送/接收有问题
2025-09-10 13:36:38,122 - RSTPTest - INFO - 测试完成: test_root_bridge_election (耗时: 47.27秒)
2025-09-10 13:36:38,122 - RSTPTest - INFO - ============================================================

2025-09-10 13:36:38,125 - RSTPTest - INFO - ============================================================
2025-09-10 13:36:38,125 - RSTPTest - INFO - 开始测试: test_port_role_assignment
2025-09-10 13:36:38,125 - RSTPTest - INFO - ============================================================
2025-09-10 13:36:38,126 - test_protocol_conformance - INFO - 开始端口角色分配测试
2025-09-10 13:36:38,126 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 13:36:38,126 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 13:36:38,127 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 13:36:38,127 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 13:36:38,127 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 13:36:38,127 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 13:36:38,127 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 13:36:38,127 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 13:36:38,593 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 13:36:38,594 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 13:36:39,625 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 13:36:39,626 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 13:36:39,626 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 13:36:39,626 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 13:36:40,086 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 13:36:40,566 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 13:36:40,566 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 13:36:40,669 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 13:36:40,766 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 13:36:40,766 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 13:36:40,767 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 13:36:40,767 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 13:36:40,767 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 13:36:40,767 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 13:36:40,768 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 13:36:40,768 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 13:36:41,297 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 13:36:45,836 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:36:45,966 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:36:45,966 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 13:36:45,967 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 13:36:45,967 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 13:36:45,967 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 13:36:47,198 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 13:36:48,422 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 13:36:48,423 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 13:36:48,472 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 13:36:48,698 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 13:36:48,699 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 13:36:48,699 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 13:36:48,699 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 13:36:48,699 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 13:36:48,700 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 13:36:48,700 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 13:36:48,700 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 13:36:49,209 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 13:36:53,784 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:36:53,923 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:36:53,924 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 13:36:53,924 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 13:36:53,924 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 13:36:53,924 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 13:36:55,143 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 13:36:56,403 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 13:36:56,404 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 13:36:56,452 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 13:36:56,678 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 13:36:56,678 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 13:36:56,679 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 13:36:59,882 - test_protocol_conformance - INFO - 启用DUT的网桥接口...
2025-09-10 13:37:00,060 - test_protocol_conformance - INFO - 已启用接口 eth0
2025-09-10 13:37:00,234 - test_protocol_conformance - INFO - 已启用接口 eth1
2025-09-10 13:37:00,402 - test_protocol_conformance - INFO - 已启用接口 eth2
2025-09-10 13:37:03,409 - test_protocol_conformance - INFO - br0 网桥接口状态:
('18: veth45650b3@if17: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 master br-b2bd2c7fedc8 state forwarding priority 32 cost 2 \n26: veth6d7f1eb@if25: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 master br-b2bd2c7fedc8 state forwarding priority 32 cost 2 \n', '', 0)
2025-09-10 13:37:03,459 - test_protocol_conformance - INFO - br0 状态:
('5: br0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1508 qdisc mq state UP mode DEFAULT group default qlen 1000\n    link/ether 90:12:10:b5:7d:f7 brd ff:ff:ff:ff:ff:ff\n    altname enp0s30f4\n', '', 0)
2025-09-10 13:37:03,510 - test_protocol_conformance - INFO - br0 STP状态:
('', 'cat: /sys/class/net/br0/bridge/stp_state: No such file or directory\n', 1)
2025-09-10 13:37:03,511 - test_protocol_conformance - INFO - 获取初始网桥状态...
2025-09-10 13:37:03,812 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:37:03,969 - test_protocol_conformance - INFO - Bridge ID: 未获取
2025-09-10 13:37:03,970 - test_protocol_conformance - INFO - Root ID: 未获取
2025-09-10 13:37:03,970 - test_protocol_conformance - INFO - Root Port: eth0
2025-09-10 13:37:03,970 - test_protocol_conformance - INFO - 协议版本: unknown
2025-09-10 13:37:03,971 - test_protocol_conformance - INFO - 端口 eth0: 角色=root, 状态=disabled, 成本=0
2025-09-10 13:37:03,971 - test_protocol_conformance - INFO - 端口 eth2: 角色=unknown, 状态=disabled, 成本=0
2025-09-10 13:37:03,971 - test_protocol_conformance - INFO - 端口 eth3: 角色=unknown, 状态=disabled, 成本=0
2025-09-10 13:37:03,971 - test_protocol_conformance - INFO - 等待网络收敛...
2025-09-10 13:37:03,971 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 13:37:04,269 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:37:04,425 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.45秒
2025-09-10 13:37:04,724 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:37:04,882 - test_protocol_conformance - INFO - 收敛后的端口状态:
2025-09-10 13:37:04,882 - test_protocol_conformance - INFO - 端口 eth0: 角色=root, 状态=disabled, 成本=0
2025-09-10 13:37:04,883 - test_protocol_conformance - INFO - 端口 eth2: 角色=unknown, 状态=disabled, 成本=0
2025-09-10 13:37:04,883 - test_protocol_conformance - INFO - 端口 eth3: 角色=unknown, 状态=disabled, 成本=0
2025-09-10 13:37:05,176 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 13:37:05,330 - test_protocol_conformance - INFO - is_root_bridge() 返回: True
2025-09-10 13:37:05,330 - test_protocol_conformance - INFO - 有Root Port: False
2025-09-10 13:37:05,331 - test_protocol_conformance - INFO - 最终判定 - DUT是根桥: True
2025-09-10 13:37:05,331 - test_protocol_conformance - INFO - 活动端口数: 0
2025-09-10 13:37:05,331 - test_protocol_conformance - INFO - 禁用端口: ['eth0', 'eth2', 'eth3']
2025-09-10 13:37:05,331 - test_protocol_conformance - WARNING - 活动端口不足，尝试启用禁用的端口...
2025-09-10 13:37:05,332 - test_protocol_conformance - INFO - 尝试启用端口 eth0
2025-09-10 13:37:05,498 - test_protocol_conformance - INFO - 尝试启用端口 eth2
2025-09-10 13:37:10,919 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:37:11,074 - test_protocol_conformance - INFO - 重新配置后 - 活动端口数: 0
2025-09-10 13:37:11,074 - test_protocol_conformance - INFO - 重新配置后 - 禁用端口: ['eth0', 'eth2', 'eth3']
2025-09-10 13:37:11,074 - test_protocol_conformance - INFO - 端口角色分布: {}
2025-09-10 13:37:11,111 - RSTPTest - INFO - 测试完成: test_port_role_assignment (耗时: 32.99秒)
2025-09-10 13:37:11,112 - RSTPTest - INFO - ============================================================

2025-09-10 13:37:11,114 - RSTPTest - INFO - ============================================================
2025-09-10 13:37:11,115 - RSTPTest - INFO - 开始测试: test_rstp_protocol_verification
2025-09-10 13:37:11,115 - RSTPTest - INFO - ============================================================
2025-09-10 13:37:11,116 - test_protocol_conformance - INFO - 开始RSTP协议验证
2025-09-10 13:37:11,116 - test_protocol_conformance - INFO - === 检查OVS配置 ===
2025-09-10 13:37:11,125 - test_protocol_conformance - INFO - 当前OVS配置:
8c812ea9-3b0c-46a1-bd3c-ef3904d38c1a
    Bridge SE_ETH4
        Port SE_ETH4
            Interface SE_ETH4
                type: internal
    Bridge SE_ETH6
        Port SE_ETH6
            Interface SE_ETH6
                type: internal
    Bridge rstp0
        Port rstp0
            Interface rstp0
                type: internal
    Bridge br0
        Port eth0
            Interface eth0
                error: "could not open network device eth0 (No such device)"
        Port br0
            
2025-09-10 13:37:11,177 - test_protocol_conformance - INFO - 使用现有网桥 SE_ETH2，端口: ['br3', 'br4']
2025-09-10 13:37:11,178 - test_protocol_conformance - INFO - === 配置RSTP（确保是RSTP而不是STP）===
2025-09-10 13:37:12,290 - test_protocol_conformance - INFO - 启用RSTP...
2025-09-10 13:37:12,309 - test_protocol_conformance - INFO - ✓ RSTP已启用
2025-09-10 13:37:12,309 - test_protocol_conformance - INFO - 设置RSTP参数...
2025-09-10 13:37:12,361 - test_protocol_conformance - INFO - ✓ 设置: rstp-hello-time=2
2025-09-10 13:37:12,414 - test_protocol_conformance - INFO - ✓ 设置: rstp-forward-delay=4
2025-09-10 13:37:12,465 - test_protocol_conformance - INFO - ✓ 设置: rstp-max-age=6
2025-09-10 13:37:12,517 - test_protocol_conformance - INFO - ✓ 设置: rstp-priority=32768
2025-09-10 13:37:12,569 - test_protocol_conformance - INFO - ✓ 设置: rstp-force-protocol-version=2
2025-09-10 13:37:12,721 - test_protocol_conformance - INFO - ✓ 端口 br3 RSTP已启用
2025-09-10 13:37:12,873 - test_protocol_conformance - INFO - ✓ 端口 br4 RSTP已启用
2025-09-10 13:37:12,921 - test_protocol_conformance - INFO - 等待RSTP初始化...
2025-09-10 13:37:17,922 - test_protocol_conformance - INFO - === 验证RSTP配置 ===
2025-09-10 13:37:17,930 - test_protocol_conformance - INFO - RSTP状态:
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     6s
  stp-fwd-delay   4s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 13:37:17,931 - test_protocol_conformance - INFO - ✓ 使用RSTP时间参数
2025-09-10 13:37:17,931 - test_protocol_conformance - INFO - === 创建测试拓扑 ===
2025-09-10 13:37:17,932 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 13:37:17,932 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 13:37:17,932 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 13:37:17,932 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 13:37:17,932 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 13:37:17,933 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 13:37:17,933 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 13:37:17,933 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 13:37:18,452 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 13:37:18,452 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 13:37:19,492 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 13:37:19,493 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 13:37:19,493 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 13:37:19,493 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 13:37:19,945 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 13:37:20,425 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 13:37:20,425 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 13:37:20,529 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 13:37:20,625 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 13:37:20,625 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 13:37:20,626 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 13:37:20,626 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 13:37:20,626 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 13:37:20,626 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 13:37:20,627 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 13:37:20,627 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 13:37:21,143 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 13:37:25,836 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:37:25,976 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:37:25,977 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 13:37:25,977 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 13:37:25,977 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 13:37:25,977 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 13:37:27,232 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 13:37:28,475 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 13:37:28,476 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 13:37:28,531 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 13:37:28,768 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 13:37:28,768 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 13:37:28,769 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 13:37:28,769 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 13:37:28,769 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 13:37:28,769 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 13:37:28,769 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 13:37:28,770 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 13:37:29,286 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 13:37:33,874 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:37:34,010 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:37:34,011 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 13:37:34,011 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 13:37:34,011 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 13:37:34,011 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 13:37:35,206 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 13:37:36,488 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 13:37:36,489 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 13:37:36,538 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 13:37:36,758 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 13:37:36,758 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 13:37:36,759 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 13:37:41,760 - test_protocol_conformance - INFO - === 捕获BPDU ===
2025-09-10 13:37:41,760 - test_protocol_conformance - INFO - 在 SE_ETH2 上捕获BPDU...
2025-09-10 13:37:41,760 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: SE_ETH2, 数量: 10)
2025-09-10 13:37:51,802 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-10 13:37:51,802 - test_protocol_conformance - INFO - 在 br3 上捕获BPDU...
2025-09-10 13:37:51,802 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br3, 数量: 10)
2025-09-10 13:38:01,890 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-10 13:38:01,890 - test_protocol_conformance - INFO - 在 br4 上捕获BPDU...
2025-09-10 13:38:01,890 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br4, 数量: 10)
2025-09-10 13:38:11,981 - RSTPAnalyzer_DUT - INFO - 捕获到 3 个BPDU包
2025-09-10 13:38:11,982 - test_protocol_conformance - INFO - ✓ 捕获到 3 个BPDU
2025-09-10 13:38:11,982 - test_protocol_conformance - INFO - === 分析BPDU ===
2025-09-10 13:38:11,982 - test_protocol_conformance - INFO - 第一个BPDU信息: {'timestamp': '13:38:05.873279', 'raw': '13:38:05.873279 00:e0:0c:25:0c:01 > 01:80:c2:00:00:00, 802.3, length 39: LLC, dsap STP (0x42) Individual, ssap STP (0x42) Command, ctrl 0x03: STP 802.1w, Rapid STP, Flags [Learn, Forward, Agreement], bridge-id 8000.6e:b3:08:fa:01:34.8002, length 36', 'is_rstp': False}
2025-09-10 13:38:11,982 - test_protocol_conformance - INFO - BPDU统计: RSTP=0, STP=3
2025-09-10 13:38:11,982 - test_protocol_conformance - WARNING - 检测到更多STP BPDU
2025-09-10 13:38:12,032 - test_protocol_conformance - INFO - rstp_enable状态: true
2025-09-10 13:38:12,084 - test_protocol_conformance - INFO - stp_enable状态: false
2025-09-10 13:38:12,136 - test_protocol_conformance - WARNING - OVS配置为RSTP但发送STP BPDU，可能是实现限制
2025-09-10 13:38:12,137 - test_protocol_conformance - INFO - 基于配置判断为RSTP
2025-09-10 13:38:12,137 - test_protocol_conformance - INFO - ✓ RSTP协议验证通过（检测到 3 个RSTP BPDU）
2025-09-10 13:38:12,138 - RSTPTest - INFO - 测试完成: test_rstp_protocol_verification (耗时: 61.02秒)
2025-09-10 13:38:12,138 - RSTPTest - INFO - ============================================================

2025-09-10 13:38:12,139 - RSTPTest - INFO - ============================================================
2025-09-10 13:38:12,140 - RSTPTest - INFO - 开始测试: test_alternate_port_verification
2025-09-10 13:38:12,140 - RSTPTest - INFO - ============================================================
2025-09-10 13:38:12,140 - test_protocol_conformance - INFO - 开始Alternate Port验证测试
2025-09-10 13:38:12,141 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 13:38:12,141 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 13:38:12,141 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 13:38:12,141 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 13:38:12,142 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 13:38:12,142 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 13:38:12,143 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 13:38:12,143 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 13:38:12,643 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 13:38:12,644 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 13:38:13,679 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 13:38:13,679 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 13:38:13,679 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 13:38:13,679 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 13:38:14,135 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 13:38:14,617 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 13:38:14,617 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 13:38:14,720 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 13:38:14,816 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 13:38:14,816 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 13:38:14,817 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 13:38:14,817 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 13:38:14,817 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 13:38:14,817 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 13:38:14,817 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 13:38:14,818 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 13:38:15,327 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 13:38:19,863 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:38:19,998 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:38:19,998 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 13:38:19,999 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 13:38:19,999 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 13:38:19,999 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 13:38:21,243 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 13:38:22,470 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 13:38:22,471 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 13:38:22,518 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 13:38:22,743 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 13:38:22,743 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 13:38:22,743 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 13:38:22,744 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 13:38:22,744 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 13:38:22,744 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 13:38:22,744 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 13:38:22,744 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 13:38:23,244 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 13:38:27,808 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:38:27,944 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:38:27,944 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 13:38:27,944 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 13:38:27,945 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 13:38:27,945 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 13:38:29,174 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 13:38:30,437 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 13:38:30,438 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 13:38:30,485 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 13:38:30,706 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 13:38:30,706 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 13:38:30,706 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 13:38:30,706 - test_protocol_conformance - INFO - 设置网桥优先级
2025-09-10 13:38:31,054 - test_protocol_conformance - INFO - 等待RSTP收敛...
2025-09-10 13:38:31,054 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 13:38:31,306 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:38:31,460 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.41秒
2025-09-10 13:38:31,767 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:38:31,924 - test_protocol_conformance - INFO - DUT桥信息: BridgeInfo(bridge_id='', root_id='', root_port='eth2', root_path_cost=0, protocol_version='unknown', hello_time=0, forward_delay=0, max_age=0, topology_changes=0, ports={'eth0': PortInfo(name='eth0', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth2': PortInfo(name='eth2', role=<PortRole.ROOT: 'root'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth3': PortInfo(name='eth3', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')})
2025-09-10 13:38:32,231 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 13:38:32,420 - RSTPTest - INFO - 测试完成: test_alternate_port_verification (耗时: 20.28秒)
2025-09-10 13:38:32,421 - RSTPTest - INFO - ============================================================

2025-09-10 13:38:32,423 - RSTPTest - INFO - ============================================================
2025-09-10 13:38:32,423 - RSTPTest - INFO - 开始测试: test_port_state_transitions
2025-09-10 13:38:32,423 - RSTPTest - INFO - ============================================================
2025-09-10 13:38:32,424 - test_protocol_conformance - INFO - 开始端口状态转换测试
2025-09-10 13:38:32,424 - NetworkTopology - INFO - 创建RSTP线性拓扑...
2025-09-10 13:38:32,425 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 13:38:32,425 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 13:38:32,425 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 13:38:32,425 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 13:38:32,426 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 13:38:32,426 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 13:38:32,426 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 13:38:32,907 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 13:38:32,908 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 13:38:33,940 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 13:38:33,940 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 13:38:33,940 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth2']
2025-09-10 13:38:33,941 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 13:38:34,404 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 13:38:34,404 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 13:38:34,511 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 13:38:34,612 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 13:38:34,612 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 13:38:34,612 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 13:38:34,613 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 13:38:34,613 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 13:38:34,613 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 13:38:34,613 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 13:38:34,613 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 13:38:35,141 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 13:38:39,689 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:38:39,819 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:38:39,819 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 13:38:39,819 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 13:38:39,819 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 13:38:39,820 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 13:38:41,052 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 13:38:42,268 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 13:38:42,268 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 13:38:42,316 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 13:38:42,540 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 13:38:42,540 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 13:38:42,541 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 13:38:42,541 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 13:38:42,541 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 13:38:42,542 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 13:38:42,542 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 13:38:42,542 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 13:38:43,053 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 13:38:47,598 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:38:47,735 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:38:47,735 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 13:38:47,736 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 13:38:47,736 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0']
2025-09-10 13:38:47,736 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 13:38:48,958 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 13:38:48,958 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 13:38:49,006 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 13:38:49,239 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 13:38:49,239 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 13:38:49,239 - NetworkTopology - INFO - 线性拓扑创建完成
2025-09-10 13:38:49,444 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-10 13:38:49,444 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 13:38:49,722 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:38:49,880 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.44秒
2025-09-10 13:38:50,178 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:38:50,366 - RSTPTest - INFO - 测试完成: test_port_state_transitions (耗时: 17.94秒)
2025-09-10 13:38:50,366 - RSTPTest - INFO - ============================================================

2025-09-10 13:38:50,368 - RSTPTest - INFO - ============================================================
2025-09-10 13:38:50,368 - RSTPTest - INFO - 开始测试: test_bpdu_propagation_and_keepalive
2025-09-10 13:38:50,369 - RSTPTest - INFO - ============================================================
2025-09-10 13:38:50,369 - test_protocol_conformance - INFO - 开始BPDU传播和保活机制测试
2025-09-10 13:38:50,369 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 13:38:50,370 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 13:38:50,370 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 13:38:50,370 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 13:38:50,370 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 13:38:50,370 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 13:38:50,371 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 13:38:50,371 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 13:38:50,843 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 13:38:50,843 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 13:38:51,880 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 13:38:51,880 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 13:38:51,881 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 13:38:51,881 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 13:38:52,347 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 13:38:52,823 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 13:38:52,824 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 13:38:52,926 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 13:38:53,023 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 13:38:53,024 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 13:38:53,024 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 13:38:53,025 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 13:38:53,025 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 13:38:53,025 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 13:38:53,025 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 13:38:53,026 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 13:38:53,547 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 13:38:58,122 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:38:58,254 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:38:58,255 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 13:38:58,255 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 13:38:58,255 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 13:38:58,255 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 13:38:59,487 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 13:39:00,710 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 13:39:00,710 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 13:39:00,758 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 13:39:00,979 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 13:39:00,980 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 13:39:00,980 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 13:39:00,980 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 13:39:00,981 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 13:39:00,981 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 13:39:00,981 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 13:39:00,981 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 13:39:01,509 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 13:39:06,046 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:39:06,182 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:39:06,182 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 13:39:06,182 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 13:39:06,183 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 13:39:06,183 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 13:39:07,416 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 13:39:08,682 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 13:39:08,682 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 13:39:08,734 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 13:39:08,957 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 13:39:08,958 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 13:39:08,958 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 13:39:09,293 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-10 13:39:09,293 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 13:39:09,542 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:39:09,700 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.41秒
2025-09-10 13:39:09,998 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:39:10,156 - test_protocol_conformance - INFO - Hello Time: 0秒
2025-09-10 13:39:10,156 - test_protocol_conformance - INFO - 开始捕获BPDU报文
2025-09-10 13:39:10,192 - RSTPTest - INFO - 测试完成: test_bpdu_propagation_and_keepalive (耗时: 19.82秒)
2025-09-10 13:39:10,193 - RSTPTest - INFO - ============================================================

2025-09-10 13:39:10,195 - RSTPTest - INFO - ============================================================
2025-09-10 13:39:10,195 - RSTPTest - INFO - 开始测试: test_disabled_port_exclusion
2025-09-10 13:39:10,195 - RSTPTest - INFO - ============================================================
2025-09-10 13:39:10,196 - test_protocol_conformance - INFO - 开始禁用端口排除测试
2025-09-10 13:39:10,196 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 13:39:10,196 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 13:39:10,196 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 13:39:10,196 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 13:39:10,196 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 13:39:10,197 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 13:39:10,197 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 13:39:10,197 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 13:39:10,842 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 13:39:10,842 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 13:39:12,023 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 13:39:12,023 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 13:39:12,023 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 13:39:12,024 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 13:39:12,483 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 13:39:12,963 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 13:39:12,963 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 13:39:13,067 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 13:39:13,163 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 13:39:13,163 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 13:39:13,164 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 13:39:13,164 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 13:39:13,164 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 13:39:13,164 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 13:39:13,164 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 13:39:13,164 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 13:39:13,674 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 13:39:18,263 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:39:18,396 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:39:18,396 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 13:39:18,397 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 13:39:18,397 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 13:39:18,397 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 13:39:19,634 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 13:39:20,919 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 13:39:20,920 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 13:39:20,968 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 13:39:21,183 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 13:39:21,184 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 13:39:21,184 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 13:39:21,184 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 13:39:21,184 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 13:39:21,184 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 13:39:21,184 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 13:39:21,185 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 13:39:21,699 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 13:39:26,240 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:39:26,382 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:39:26,383 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 13:39:26,383 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 13:39:26,383 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 13:39:26,383 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 13:39:27,607 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 13:39:28,886 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 13:39:28,886 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 13:39:28,938 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 13:39:29,163 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 13:39:29,163 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 13:39:29,164 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 13:39:29,371 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-10 13:39:29,371 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 13:39:29,650 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:39:29,807 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.44秒
2025-09-10 13:39:30,105 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:39:30,259 - test_protocol_conformance - INFO - 所有端口信息: {'eth0': PortInfo(name='eth0', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth2': PortInfo(name='eth2', role=<PortRole.ROOT: 'root'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth3': PortInfo(name='eth3', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')}
2025-09-10 13:39:30,413 - test_protocol_conformance - INFO - RSTP show输出 (code=0): 1
1
---- rstp0 ----
Root ID:
  stp-priority    32768
  stp-system-id   46:32:c4:1f:ec:4e
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    32768
  stp-system-id   46:32:c4:1f:ec:4e
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------


2025-09-10 13:39:30,415 - test_protocol_conformance - INFO - 初始活动端口: []
2025-09-10 13:39:30,415 - test_protocol_conformance - INFO - 没有找到活动端口，使用所有端口
2025-09-10 13:39:30,415 - test_protocol_conformance - INFO - 选择端口eth0进行禁用测试
2025-09-10 13:39:30,416 - test_protocol_conformance - INFO - 禁用端口eth0
2025-09-10 13:39:30,416 - FaultInjector_DUT - INFO - 断开链路: eth0
2025-09-10 13:39:30,674 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth0 (code=1)，将在逻辑上标记为已断开
2025-09-10 13:39:30,674 - test_protocol_conformance - INFO - 禁用命令结果: ('', '', 0)
2025-09-10 13:39:30,830 - test_protocol_conformance - INFO - 端口eth0配置: stdout='1
1
{rstp-enable="true", stp-enable="true", stp-path-cost="20000"}
', stderr='', code=0
2025-09-10 13:39:46,086 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:39:46,191 - test_protocol_conformance - INFO - 禁用后所有端口状态: [('eth0', 'disabled'), ('eth2', 'disabled'), ('eth3', 'disabled')]
2025-09-10 13:39:46,192 - test_protocol_conformance - INFO - 端口eth0状态: disabled, 角色: root
2025-09-10 13:39:46,192 - test_protocol_conformance - INFO - 禁用后活动端口: []
2025-09-10 13:39:46,192 - test_protocol_conformance - INFO - 活动端口数量: 0, 初始活动端口数量: 3
2025-09-10 13:39:46,192 - test_protocol_conformance - INFO - 禁用后端口角色分布: {}
2025-09-10 13:39:46,494 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 13:39:46,600 - test_protocol_conformance - INFO - 重新启用端口eth0
2025-09-10 13:39:46,600 - FaultInjector_DUT - INFO - 恢复链路: eth0
2025-09-10 13:39:46,861 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth0 (code=1)，将在逻辑上标记为已恢复
2025-09-10 13:40:02,117 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:40:02,218 - test_protocol_conformance - INFO - ✓ 端口eth0已重新启用，状态: forwarding
2025-09-10 13:40:02,258 - RSTPTest - INFO - 测试完成: test_disabled_port_exclusion (耗时: 52.06秒)
2025-09-10 13:40:02,258 - RSTPTest - INFO - ============================================================

2025-09-10 13:40:02,260 - RSTPTest - INFO - ============================================================
2025-09-10 13:40:02,261 - RSTPTest - INFO - 开始测试: test_topology_change_notification
2025-09-10 13:40:02,261 - RSTPTest - INFO - ============================================================
2025-09-10 13:40:02,261 - test_protocol_conformance - INFO - 开始拓扑变更通知测试
2025-09-10 13:40:02,262 - test_protocol_conformance - INFO - === 步骤1: 创建多网桥环形拓扑 ===
2025-09-10 13:40:02,612 - test_protocol_conformance - INFO - 创建网桥 rstp1 (优先级: 32768)
2025-09-10 13:40:02,847 - test_protocol_conformance - INFO - 创建网桥 rstp2 (优先级: 36864)
2025-09-10 13:40:03,084 - test_protocol_conformance - INFO - 创建网桥 rstp3 (优先级: 40960)
2025-09-10 13:40:03,555 - test_protocol_conformance - INFO - ✓ 连接 rstp1 <-> rstp2
2025-09-10 13:40:03,999 - test_protocol_conformance - INFO - ✓ 连接 rstp2 <-> rstp3
2025-09-10 13:40:04,435 - test_protocol_conformance - INFO - ✓ 连接 rstp3 <-> rstp1
2025-09-10 13:40:04,436 - test_protocol_conformance - INFO - 等待RSTP初始收敛...
2025-09-10 13:40:14,436 - test_protocol_conformance - INFO - === 步骤2: 验证初始RSTP状态 ===
2025-09-10 13:40:14,445 - test_protocol_conformance - INFO - 
rstp1 初始RSTP状态:
2025-09-10 13:40:14,446 - test_protocol_conformance - INFO -   ---- rstp1 ----
2025-09-10 13:40:14,446 - test_protocol_conformance - INFO -   Root ID:
2025-09-10 13:40:14,446 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-10 13:40:14,446 - test_protocol_conformance - INFO -     stp-system-id   5a:e8:0d:aa:03:44
2025-09-10 13:40:14,447 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 13:40:14,447 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 13:40:14,447 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 13:40:14,447 - test_protocol_conformance - INFO -     This bridge is the root
2025-09-10 13:40:14,447 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-10 13:40:14,448 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-10 13:40:14,448 - test_protocol_conformance - INFO -     stp-system-id   5a:e8:0d:aa:03:44
2025-09-10 13:40:14,448 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 13:40:14,448 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 13:40:14,448 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 13:40:14,449 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 13:40:14,449 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-10 13:40:14,449 - test_protocol_conformance - INFO -     veth12a    Designated Forwarding 2000     128.1
2025-09-10 13:40:14,449 - test_protocol_conformance - INFO -     veth31b    Designated Forwarding 2000     128.2
2025-09-10 13:40:14,449 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-10 13:40:14,449 - test_protocol_conformance - INFO -   → 有转发端口
2025-09-10 13:40:14,497 - test_protocol_conformance - INFO - 
rstp2 初始RSTP状态:
2025-09-10 13:40:14,497 - test_protocol_conformance - INFO -   ---- rstp2 ----
2025-09-10 13:40:14,497 - test_protocol_conformance - INFO -   Root ID:
2025-09-10 13:40:14,498 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-10 13:40:14,498 - test_protocol_conformance - INFO -     stp-system-id   5a:e8:0d:aa:03:44
2025-09-10 13:40:14,498 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 13:40:14,498 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 13:40:14,498 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 13:40:14,499 - test_protocol_conformance - INFO -     root-port       veth12b
2025-09-10 13:40:14,499 - test_protocol_conformance - INFO -     root-path-cost  2000
2025-09-10 13:40:14,499 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-10 13:40:14,499 - test_protocol_conformance - INFO -     stp-priority    36864
2025-09-10 13:40:14,499 - test_protocol_conformance - INFO -     stp-system-id   a6:0c:d4:71:2c:41
2025-09-10 13:40:14,499 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 13:40:14,499 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 13:40:14,500 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 13:40:14,500 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 13:40:14,500 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-10 13:40:14,500 - test_protocol_conformance - INFO -     veth12b    Root       Forwarding 2000     128.1
2025-09-10 13:40:14,500 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-10 13:40:14,500 - test_protocol_conformance - INFO -   → 有转发端口
2025-09-10 13:40:14,545 - test_protocol_conformance - INFO - 
rstp3 初始RSTP状态:
2025-09-10 13:40:14,545 - test_protocol_conformance - INFO -   ---- rstp3 ----
2025-09-10 13:40:14,545 - test_protocol_conformance - INFO -   Root ID:
2025-09-10 13:40:14,546 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-10 13:40:14,546 - test_protocol_conformance - INFO -     stp-system-id   5a:e8:0d:aa:03:44
2025-09-10 13:40:14,546 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 13:40:14,546 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 13:40:14,546 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 13:40:14,547 - test_protocol_conformance - INFO -     root-port       veth31a
2025-09-10 13:40:14,547 - test_protocol_conformance - INFO -     root-path-cost  2000
2025-09-10 13:40:14,547 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-10 13:40:14,547 - test_protocol_conformance - INFO -     stp-priority    40960
2025-09-10 13:40:14,547 - test_protocol_conformance - INFO -     stp-system-id   f6:6f:c3:00:03:4b
2025-09-10 13:40:14,548 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 13:40:14,548 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 13:40:14,548 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 13:40:14,548 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 13:40:14,549 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-10 13:40:14,549 - test_protocol_conformance - INFO -     veth23b    Alternate  Discarding 2000     128.1
2025-09-10 13:40:14,549 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-10 13:40:14,549 - test_protocol_conformance - INFO -   → 有转发端口
2025-09-10 13:40:14,549 - test_protocol_conformance - INFO -   → 有阻塞端口（防环路）
2025-09-10 13:40:14,549 - test_protocol_conformance - INFO - === 步骤3: 分析网络拓扑 ===
2025-09-10 13:40:14,550 - test_protocol_conformance - INFO - ✓ rstp1 是根桥
2025-09-10 13:40:14,550 - test_protocol_conformance - INFO - ✓ 找到阻塞端口: veth23b
2025-09-10 13:40:14,550 - test_protocol_conformance - INFO - === 步骤4: 触发拓扑变更 ===
2025-09-10 13:40:14,550 - test_protocol_conformance - INFO - 断开活动端口: veth31a
2025-09-10 13:40:19,619 - test_protocol_conformance - INFO - ✓ rstp1 状态已变化
2025-09-10 13:40:19,717 - test_protocol_conformance - INFO - ✓ rstp3 状态已变化
2025-09-10 13:40:24,763 - test_protocol_conformance - INFO - === 步骤5: 验证拓扑变更 ===
2025-09-10 13:40:24,770 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: veth12a, 数量: 5)
2025-09-10 13:40:29,867 - RSTPAnalyzer_DUT - INFO - 捕获到 2 个BPDU包
2025-09-10 13:40:29,868 - test_protocol_conformance - INFO - 在 veth12a 捕获到 2 个BPDU
2025-09-10 13:40:29,868 - test_protocol_conformance - INFO - === 步骤6: 最终验证 ===
2025-09-10 13:40:29,868 - test_protocol_conformance - INFO - ✓ 测试通过：检测到拓扑变更
2025-09-10 13:40:29,917 - test_protocol_conformance - INFO - 
========== rstp1 最终状态 ==========
2025-09-10 13:40:29,917 - test_protocol_conformance - INFO - ---- rstp1 ----
2025-09-10 13:40:29,917 - test_protocol_conformance - INFO - Root ID:
2025-09-10 13:40:29,917 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-10 13:40:29,918 - test_protocol_conformance - INFO -   stp-system-id   5a:e8:0d:aa:03:44
2025-09-10 13:40:29,918 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 13:40:29,918 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 13:40:29,918 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 13:40:29,918 - test_protocol_conformance - INFO -   This bridge is the root
2025-09-10 13:40:29,919 - test_protocol_conformance - INFO - Bridge ID:
2025-09-10 13:40:29,919 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-10 13:40:29,919 - test_protocol_conformance - INFO -   stp-system-id   5a:e8:0d:aa:03:44
2025-09-10 13:40:29,919 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 13:40:29,919 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 13:40:29,919 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 13:40:29,920 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 13:40:29,920 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-10 13:40:29,920 - test_protocol_conformance - INFO -   veth12a    Designated Forwarding 2000     128.1
2025-09-10 13:40:29,920 - test_protocol_conformance - INFO -   veth31b    Designated Forwarding 2000     128.2
2025-09-10 13:40:29,964 - test_protocol_conformance - INFO - 
========== rstp2 最终状态 ==========
2025-09-10 13:40:29,965 - test_protocol_conformance - INFO - ---- rstp2 ----
2025-09-10 13:40:29,965 - test_protocol_conformance - INFO - Root ID:
2025-09-10 13:40:29,965 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-10 13:40:29,965 - test_protocol_conformance - INFO -   stp-system-id   5a:e8:0d:aa:03:44
2025-09-10 13:40:29,965 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 13:40:29,966 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 13:40:29,966 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 13:40:29,966 - test_protocol_conformance - INFO -   root-port       veth12b
2025-09-10 13:40:29,966 - test_protocol_conformance - INFO -   root-path-cost  2000
2025-09-10 13:40:29,966 - test_protocol_conformance - INFO - Bridge ID:
2025-09-10 13:40:29,966 - test_protocol_conformance - INFO -   stp-priority    36864
2025-09-10 13:40:29,966 - test_protocol_conformance - INFO -   stp-system-id   a6:0c:d4:71:2c:41
2025-09-10 13:40:29,967 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 13:40:29,967 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 13:40:29,967 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 13:40:29,967 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 13:40:29,967 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-10 13:40:29,967 - test_protocol_conformance - INFO -   veth12b    Root       Forwarding 2000     128.1
2025-09-10 13:40:29,967 - test_protocol_conformance - INFO -   veth23a    Designated Forwarding 2000     128.2
2025-09-10 13:40:30,013 - test_protocol_conformance - INFO - 
========== rstp3 最终状态 ==========
2025-09-10 13:40:30,013 - test_protocol_conformance - INFO - ---- rstp3 ----
2025-09-10 13:40:30,014 - test_protocol_conformance - INFO - Root ID:
2025-09-10 13:40:30,014 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-10 13:40:30,014 - test_protocol_conformance - INFO -   stp-system-id   5a:e8:0d:aa:03:44
2025-09-10 13:40:30,014 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 13:40:30,014 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 13:40:30,015 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 13:40:30,015 - test_protocol_conformance - INFO -   root-port       veth31a
2025-09-10 13:40:30,015 - test_protocol_conformance - INFO -   root-path-cost  2000
2025-09-10 13:40:30,015 - test_protocol_conformance - INFO - Bridge ID:
2025-09-10 13:40:30,015 - test_protocol_conformance - INFO -   stp-priority    40960
2025-09-10 13:40:30,015 - test_protocol_conformance - INFO -   stp-system-id   f6:6f:c3:00:03:4b
2025-09-10 13:40:30,015 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 13:40:30,016 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 13:40:30,016 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 13:40:30,016 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 13:40:30,016 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-10 13:40:30,016 - test_protocol_conformance - INFO -   veth23b    Alternate  Discarding 2000     128.1
2025-09-10 13:40:30,016 - test_protocol_conformance - INFO -   veth31a    Root       Forwarding 2000     128.2
2025-09-10 13:40:30,016 - test_protocol_conformance - INFO - 
=== 诊断信息 ===
2025-09-10 13:40:30,068 - test_protocol_conformance - INFO - 系统日志中的STP/RSTP信息:
2025-09-10 13:40:30,069 - test_protocol_conformance - INFO - [526731.854074] rstp0: left promiscuous mode
[526732.717283] rstp0: entered promiscuous mode
[526784.022580] rstp1: entered promiscuous mode
[526784.252283] rstp2: entered promiscuous mode
[526784.488961] rstp3: entered promiscuous mode

2025-09-10 13:40:30,114 - test_protocol_conformance - INFO - OVS日志中的拓扑变更信息:
2025-09-10 13:40:30,115 - test_protocol_conformance - INFO - 2025-09-10T05:40:32.140Z|00530|rstp_sm(handler2777)|DBG|rstp3: move_rstp()
2025-09-10T05:40:32.140Z|00531|rstp_sm(handler2777)|DBG|v1: 8.000.5ae80daa0344, 2000, 9.000.a60cd4712c41, 32770, 0
2025-09-10T05:40:32.140Z|00532|rstp_sm(handler2777)|DBG|v2: 8.000.5ae80daa0344, 2000, 9.000.a60cd4712c41, 32770, 0
2025-09-10T05:40:32.140Z|00533|rstp_sm(handler2777)|DBG|superior_same
2025-09-10T05:40:32.140Z|00534|rstp_sm(handler2777)|DBG|rstp3, port 1: Port_information_sm 9 -> 17
2025-09-10T05:40:32.140Z|00535|rstp_sm(handler2777)|DBG|rstp3: move_rstp()
2025-09-10T05:40:32.140Z|00536|rstp_sm(handler2777)|DBG|rstp3, port 1: Port_information_sm 17 -> 7
2025-09-10T05:40:32.140Z|00537|rstp_sm(handler2777)|DBG|rstp3: move_rstp()
2025-09-10T05:40:32.140Z|00538|rstp_sm(handler2777)|DBG|rstp3, port 1: Port_information_sm 7 -> 8
2025-09-10T05:40:32.140Z|00539|rstp_sm(handler2777)|DBG|rstp3: move_rstp()
2025-09-10T05:40:32.160Z|10150442|bridge|WARN|rstp0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-10T05:40:32.160Z|10150443|bridge|WARN|br0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-10T05:40:32.170Z|10150447|bridge|WARN|rstp0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-10T05:40:32.170Z|10150448|bridge|WARN|br0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP

2025-09-10 13:40:30,116 - test_protocol_conformance - INFO - === 清理测试环境 ===
2025-09-10 13:40:30,635 - test_protocol_conformance - INFO - 拓扑变更通知测试完成
2025-09-10 13:40:30,636 - RSTPTest - INFO - 测试完成: test_topology_change_notification (耗时: 28.37秒)
2025-09-10 13:40:30,636 - RSTPTest - INFO - ============================================================

2025-09-10 13:40:30,636 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 13:40:30,637 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 13:40:30,637 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 13:40:30,772 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 13:40:30,772 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 13:40:30,891 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 13:40:30,891 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 13:40:31,024 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 13:40:31,024 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 13:40:31,025 - RSTPTest - INFO - ============================================================
2025-09-10 13:40:31,025 - RSTPTest - INFO - 开始测试: test_root_bridge_hijack_attack
2025-09-10 13:40:31,025 - RSTPTest - INFO - ============================================================
2025-09-10 13:40:31,026 - test_security - INFO - 开始根网桥劫持攻击测试
2025-09-10 13:40:31,026 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 13:40:31,027 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 13:40:31,027 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 13:40:31,027 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 13:40:31,027 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 13:40:31,028 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 13:40:31,028 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 13:40:31,033 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 13:40:31,091 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 13:40:31,091 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 13:40:31,091 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 13:40:31,091 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 13:40:31,606 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 13:40:31,606 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 13:40:32,642 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 13:40:32,642 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 13:40:32,642 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 13:40:32,643 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 13:40:33,097 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 13:40:33,574 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 13:40:33,574 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 13:40:33,677 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 13:40:33,774 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 13:40:33,774 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 13:40:33,775 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 13:40:33,775 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 13:40:33,775 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 13:40:33,775 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 13:40:33,776 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 13:40:33,783 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 13:40:33,783 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 13:40:33,918 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 13:40:33,919 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 13:40:33,919 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 13:40:33,919 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 13:40:33,919 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 13:40:34,469 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 13:40:39,011 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:40:39,154 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:40:39,155 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 13:40:39,155 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 13:40:39,155 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 13:40:39,156 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 13:40:40,380 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 13:40:41,600 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 13:40:41,600 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 13:40:41,648 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 13:40:41,867 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 13:40:41,867 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 13:40:41,868 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 13:40:41,868 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 13:40:41,868 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 13:40:41,868 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 13:40:41,868 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 13:40:41,875 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 13:40:41,876 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 13:40:42,001 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 13:40:42,001 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 13:40:42,002 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 13:40:42,002 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 13:40:42,002 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 13:40:42,556 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 13:40:47,145 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:40:47,286 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:40:47,287 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 13:40:47,287 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 13:40:47,287 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 13:40:47,288 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 13:40:48,491 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 13:40:49,751 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 13:40:49,751 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 13:40:49,799 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 13:40:50,028 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 13:40:50,029 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 13:40:50,029 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 13:40:55,484 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 13:40:55,941 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:40:56,098 - test_security - INFO - 初始根网桥: 
2025-09-10 13:40:56,098 - FaultInjector_TestNode1 - WARNING - 注入恶意BPDU到 eth0
2025-09-10 13:40:56,249 - FaultInjector_TestNode1 - WARNING - 恶意BPDU注入已启动 (优先级: 0)
2025-09-10 13:41:11,503 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:41:11,657 - test_security - INFO - 根网桥未被劫持（可能已启用防护）
2025-09-10 13:41:11,658 - test_security - INFO - 根网桥劫持攻击测试完成
2025-09-10 13:41:11,659 - RSTPTest - INFO - 测试完成: test_root_bridge_hijack_attack (耗时: 40.63秒)
2025-09-10 13:41:11,659 - RSTPTest - INFO - ============================================================

2025-09-10 13:41:11,661 - RSTPTest - INFO - ============================================================
2025-09-10 13:41:11,661 - RSTPTest - INFO - 开始测试: test_bpdu_flood_attack
2025-09-10 13:41:11,661 - RSTPTest - INFO - ============================================================
2025-09-10 13:41:11,662 - test_security - INFO - 开始BPDU洪泛攻击测试
2025-09-10 13:41:11,662 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 13:41:11,662 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 13:41:11,663 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 13:41:11,663 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 13:41:11,663 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 13:41:11,663 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 13:41:11,664 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 13:41:11,664 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 13:41:12,166 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 13:41:12,166 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 13:41:13,193 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 13:41:13,193 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 13:41:13,193 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 13:41:13,194 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 13:41:13,654 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 13:41:14,133 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 13:41:14,133 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 13:41:14,237 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 13:41:14,333 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 13:41:14,334 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 13:41:14,334 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 13:41:14,334 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 13:41:14,334 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 13:41:14,335 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 13:41:14,335 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 13:41:14,335 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 13:41:14,844 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 13:41:19,391 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:41:19,524 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:41:19,525 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 13:41:19,525 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 13:41:19,525 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 13:41:19,525 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 13:41:20,734 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 13:41:21,969 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 13:41:21,970 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 13:41:22,018 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 13:41:22,237 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 13:41:22,237 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 13:41:22,237 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 13:41:22,237 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 13:41:22,237 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 13:41:22,238 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 13:41:22,238 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 13:41:22,238 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 13:41:22,743 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 13:41:27,288 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:41:27,425 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:41:27,426 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 13:41:27,426 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 13:41:27,426 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 13:41:27,426 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 13:41:28,666 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 13:41:29,973 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 13:41:29,973 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 13:41:30,021 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 13:41:30,250 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 13:41:30,250 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 13:41:30,250 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 13:41:35,420 - test_security - INFO - 初始CPU使用率: 0.0%
2025-09-10 13:41:45,694 - test_security - INFO - 洪泛时CPU使用率: 33.3%
2025-09-10 13:41:45,983 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 13:41:46,137 - test_security - INFO - 网络在BPDU洪泛下保持稳定
2025-09-10 13:41:46,137 - test_security - INFO - BPDU洪泛攻击测试完成
2025-09-10 13:41:46,138 - RSTPTest - INFO - 测试完成: test_bpdu_flood_attack (耗时: 34.48秒)
2025-09-10 13:41:46,138 - RSTPTest - INFO - ============================================================

2025-09-10 13:41:46,140 - RSTPTest - INFO - ============================================================
2025-09-10 13:41:46,140 - RSTPTest - INFO - 开始测试: test_topology_change_attack
2025-09-10 13:41:46,140 - RSTPTest - INFO - ============================================================
2025-09-10 13:41:46,141 - test_security - INFO - 开始拓扑变更攻击测试
2025-09-10 13:41:46,141 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 13:41:46,141 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 13:41:46,141 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 13:41:46,141 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 13:41:46,141 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 13:41:46,141 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 13:41:46,142 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 13:41:46,142 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 13:41:46,657 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 13:41:46,657 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 13:41:47,701 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 13:41:47,701 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 13:41:47,702 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 13:41:47,702 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 13:41:48,160 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 13:41:48,642 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 13:41:48,642 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 13:41:48,745 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 13:41:48,846 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 13:41:48,846 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 13:41:48,846 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 13:41:48,846 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 13:41:48,847 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 13:41:48,847 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 13:41:48,847 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 13:41:48,847 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 13:41:49,360 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 13:41:53,984 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:41:54,131 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:41:54,131 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 13:41:54,131 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 13:41:54,131 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 13:41:54,132 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 13:41:55,359 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 13:41:56,610 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 13:41:56,610 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 13:41:56,660 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 13:41:56,892 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 13:41:56,892 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 13:41:56,892 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 13:41:56,892 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 13:41:56,892 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 13:41:56,892 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 13:41:56,893 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 13:41:56,893 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 13:41:57,429 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 13:42:01,984 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:42:02,120 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:42:02,120 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 13:42:02,120 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 13:42:02,120 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 13:42:02,121 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 13:42:03,353 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 13:42:04,622 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 13:42:04,622 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 13:42:04,671 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 13:42:04,903 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 13:42:04,903 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 13:42:04,904 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 13:42:10,159 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:42:10,317 - test_security - INFO - 触发快速拓扑变更...
2025-09-10 13:42:28,771 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:42:28,928 - test_security - INFO - 检测到0次拓扑变更
2025-09-10 13:42:29,226 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 13:42:29,381 - test_security - INFO - 网络在频繁拓扑变更后保持稳定
2025-09-10 13:42:29,381 - test_security - INFO - 拓扑变更攻击测试完成
2025-09-10 13:42:29,382 - RSTPTest - INFO - 测试完成: test_topology_change_attack (耗时: 43.24秒)
2025-09-10 13:42:29,382 - RSTPTest - INFO - ============================================================

2025-09-10 13:42:29,384 - RSTPTest - INFO - ============================================================
2025-09-10 13:42:29,384 - RSTPTest - INFO - 开始测试: test_mac_spoofing
2025-09-10 13:42:29,384 - RSTPTest - INFO - ============================================================
2025-09-10 13:42:29,384 - test_security - INFO - 开始MAC地址欺骗测试
2025-09-10 13:42:29,385 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 13:42:29,385 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 13:42:29,385 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 13:42:29,385 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 13:42:29,385 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 13:42:29,385 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 13:42:29,386 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 13:42:29,386 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 13:42:29,919 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 13:42:29,920 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 13:42:30,956 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 13:42:30,956 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 13:42:30,956 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 13:42:30,956 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 13:42:31,416 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 13:42:31,896 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 13:42:31,896 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 13:42:31,999 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 13:42:32,096 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 13:42:32,097 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 13:42:32,097 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 13:42:32,097 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 13:42:32,097 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 13:42:32,097 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 13:42:32,098 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 13:42:32,098 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 13:42:32,639 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 13:42:37,185 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:42:37,318 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:42:37,318 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 13:42:37,319 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 13:42:37,319 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 13:42:37,319 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 13:42:38,533 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 13:42:39,739 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 13:42:39,739 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 13:42:39,789 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 13:42:40,006 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 13:42:40,007 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 13:42:40,007 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 13:42:40,007 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 13:42:40,007 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 13:42:40,007 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 13:42:40,007 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 13:42:40,007 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 13:42:40,525 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 13:42:45,089 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:42:45,236 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:42:45,237 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 13:42:45,237 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 13:42:45,237 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 13:42:45,237 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 13:42:46,452 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 13:42:47,719 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 13:42:47,719 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 13:42:47,767 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 13:42:47,986 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 13:42:47,987 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 13:42:47,987 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 13:42:52,995 - test_security - INFO - DUT MAC地址: 90:12:10:b5:7d:f7
2025-09-10 13:42:52,995 - test_security - INFO - 尝试MAC地址欺骗...
2025-09-10 13:42:58,792 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 13:42:58,948 - test_security - INFO - 网络对MAC欺骗具有抗性
2025-09-10 13:43:05,593 - test_security - INFO - MAC地址欺骗测试完成
2025-09-10 13:43:05,594 - RSTPTest - INFO - 测试完成: test_mac_spoofing (耗时: 36.21秒)
2025-09-10 13:43:05,594 - RSTPTest - INFO - ============================================================

2025-09-10 13:43:05,596 - RSTPTest - INFO - ============================================================
2025-09-10 13:43:05,596 - RSTPTest - INFO - 开始测试: test_port_security
2025-09-10 13:43:05,596 - RSTPTest - INFO - ============================================================
2025-09-10 13:43:05,597 - test_security - INFO - 开始端口安全测试
2025-09-10 13:43:05,602 - test_security - WARNING - 未检测到任何端口安全功能
2025-09-10 13:43:05,602 - RSTPTest - INFO - 测试完成: test_port_security (耗时: 0.01秒)
2025-09-10 13:43:05,603 - RSTPTest - INFO - ============================================================

2025-09-10 13:43:05,604 - RSTPTest - INFO - ============================================================
2025-09-10 13:43:05,604 - RSTPTest - INFO - 开始测试: test_bpdu_filter_functionality
2025-09-10 13:43:05,604 - RSTPTest - INFO - ============================================================
2025-09-10 13:43:05,605 - test_security - INFO - 开始BPDU过滤器功能测试
2025-09-10 13:43:05,646 - NetworkTopology - INFO - 创建RSTP线性拓扑...
2025-09-10 13:43:05,647 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 13:43:05,647 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 13:43:05,647 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 13:43:05,647 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 13:43:05,647 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 13:43:05,647 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 13:43:05,647 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 13:43:06,182 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 13:43:06,182 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 13:43:07,235 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 13:43:07,236 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 13:43:07,236 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth2']
2025-09-10 13:43:07,236 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 13:43:07,696 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 13:43:07,696 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 13:43:07,800 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 13:43:07,895 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 13:43:07,896 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 13:43:07,896 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 13:43:07,896 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 13:43:07,896 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 13:43:07,897 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 13:43:07,897 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 13:43:07,897 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 13:43:20,598 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 13:43:35,096 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:43:45,178 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:43:45,178 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 13:43:45,179 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 13:43:45,179 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 13:43:45,179 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 13:44:55,889 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 13:45:49,657 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 13:45:49,657 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 13:45:49,706 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 13:45:56,940 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 13:45:56,940 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 13:45:56,940 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 13:45:56,941 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 13:45:56,941 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 13:45:56,941 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 13:45:56,941 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 13:45:56,941 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 13:45:57,460 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 13:46:02,012 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:46:02,143 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:46:02,144 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 13:46:02,144 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 13:46:02,144 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0']
2025-09-10 13:46:02,144 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 13:46:03,382 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 13:46:03,382 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 13:46:03,431 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 13:46:03,654 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 13:46:03,654 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 13:46:03,654 - NetworkTopology - INFO - 线性拓扑创建完成
2025-09-10 13:46:08,786 - test_security - WARNING - BPDU包统计命令执行失败: 
2025-09-10 13:46:08,786 - test_security - INFO - 启用过滤器前端口 eth2 BPDU数量: 0
2025-09-10 13:46:08,932 - test_security - WARNING - mstpctl设置BPDU过滤器失败，尝试使用brctl
2025-09-10 13:46:09,029 - test_security - ERROR - 启用BPDU过滤器失败: BPDU过滤器配置失败: 
2025-09-10 13:46:09,029 - test_security - ERROR - 启用BPDU过滤器失败: BPDU过滤器配置失败: 
2025-09-10 13:46:09,176 - test_security - WARNING - 清理命令执行失败: mstpctl setportbpdufilter br0 eth2 no, 错误: 
2025-09-10 13:46:09,321 - test_security - WARNING - 清理命令执行失败: echo 0 > /sys/class/net/br0/bridge/ports/eth2/bpdu_filter, 错误: 
2025-09-10 13:46:09,355 - RSTPTest - INFO - 测试完成: test_bpdu_filter_functionality (耗时: 183.75秒)
2025-09-10 13:46:09,356 - RSTPTest - INFO - ============================================================

2025-09-10 13:46:09,358 - RSTPTest - INFO - ============================================================
2025-09-10 13:46:09,358 - RSTPTest - INFO - 开始测试: test_malformed_bpdu_handling
2025-09-10 13:46:09,358 - RSTPTest - INFO - ============================================================
2025-09-10 13:46:09,359 - test_security - INFO - 开始畸形BPDU处理测试
2025-09-10 13:46:09,367 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 13:46:09,367 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 13:46:09,368 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 13:46:09,368 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 13:46:09,368 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 13:46:09,368 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 13:46:09,368 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 13:46:09,368 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 13:46:09,893 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 13:46:09,893 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 13:46:10,932 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 13:46:10,932 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 13:46:10,933 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 13:46:10,933 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 13:46:11,388 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 13:46:11,861 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 13:46:11,861 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 13:46:11,965 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 13:46:12,061 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 13:46:12,061 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 13:46:12,061 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 13:46:12,062 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 13:46:12,062 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 13:46:12,062 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 13:46:12,063 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 13:46:12,063 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 13:46:27,682 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 13:46:32,237 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:46:32,374 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:46:32,374 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 13:46:32,374 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 13:46:32,374 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 13:46:32,375 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 13:46:33,620 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 13:46:34,849 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 13:46:34,849 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 13:46:34,900 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 13:46:35,124 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 13:46:35,124 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 13:46:35,124 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 13:46:35,124 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 13:46:35,125 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 13:46:35,125 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 13:46:35,125 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 13:46:35,125 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 13:46:35,646 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 13:46:40,188 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:46:40,323 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:46:40,324 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 13:46:40,324 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 13:46:40,324 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 13:46:40,324 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 13:46:41,546 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 13:46:42,808 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 13:46:42,808 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 13:46:42,856 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 13:46:43,077 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 13:46:43,077 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 13:46:43,077 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 13:46:48,334 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:46:48,786 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 13:46:48,940 - test_security - INFO - 初始网络状态: 稳定
2025-09-10 13:46:48,941 - test_security - INFO - 执行测试: _test_oversized_bpdu
2025-09-10 13:46:53,082 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 13:46:53,236 - test_security - INFO - _test_oversized_bpdu 网络保持稳定
2025-09-10 13:46:53,236 - test_security - INFO - 执行测试: _test_undersized_bpdu
2025-09-10 13:46:53,241 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

# 创建过小的BPDU（缺少必要字段）
target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 只包含最小字段的BPDU
truncated_bpdu = Raw(load=b"     ")  # 截断的BPDU

packet = eth/llc/truncated_bpdu
sendp(packet, iface=interface, count=5, inter=1, verbose=0)
print("Undersized BPDU sent")
' > /tmp/undersized_bpdu.py
错误: 
2025-09-10 13:46:53,242 - test_security - ERROR - _test_undersized_bpdu 执行失败: 
2025-09-10 13:46:53,242 - test_security - INFO - 执行测试: _test_invalid_protocol_id
2025-09-10 13:46:53,242 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 使用无效的协议ID（正常应该是0x0000）
invalid_bpdu = Raw(load=b"ÿÿ   " + b" " * 30)

packet = eth/llc/invalid_bpdu
sendp(packet, iface=interface, count=5, inter=1, verbose=0)
print("Invalid protocol ID BPDU sent")
' > /tmp/invalid_protocol.py
错误: SSH session not active
2025-09-10 13:46:53,243 - test_security - ERROR - _test_invalid_protocol_id 执行失败: SSH session not active
2025-09-10 13:46:53,243 - test_security - INFO - 执行测试: _test_invalid_version
2025-09-10 13:46:53,244 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 使用无效版本号（正常RSTP应该是2）
invalid_version_bpdu = Raw(load=b"  ÿ  " + b" " * 30)

packet = eth/llc/invalid_version_bpdu
sendp(packet, iface=interface, count=5, inter=1, verbose=0)
print("Invalid version BPDU sent")
' > /tmp/invalid_version.py
错误: SSH session not active
2025-09-10 13:46:53,245 - test_security - ERROR - _test_invalid_version 执行失败: SSH session not active
2025-09-10 13:46:53,245 - test_security - INFO - 执行测试: _test_invalid_message_type
2025-09-10 13:46:53,245 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 使用无效消息类型（正常配置BPDU是0x00，TCN是0x80）
invalid_type_bpdu = Raw(load=b"  ÿ " + b" " * 30)

packet = eth/llc/invalid_type_bpdu
sendp(packet, iface=interface, count=5, inter=1, verbose=0)
print("Invalid message type BPDU sent")
' > /tmp/invalid_type.py
错误: SSH session not active
2025-09-10 13:46:53,246 - test_security - ERROR - _test_invalid_message_type 执行失败: SSH session not active
2025-09-10 13:46:53,246 - test_security - INFO - 执行测试: _test_corrupted_fields
2025-09-10 13:46:53,246 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *
import random

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)

# 创建包含随机损坏数据的BPDU
corrupted_data = bytes([random.randint(0, 255) for _ in range(36)])
corrupted_bpdu = Raw(load=corrupted_data)

packet = eth/llc/corrupted_bpdu
sendp(packet, iface=interface, count=5, inter=1, verbose=0)
print("Corrupted BPDU sent")
' > /tmp/corrupted_bpdu.py
错误: SSH session not active
2025-09-10 13:46:53,247 - test_security - ERROR - _test_corrupted_fields 执行失败: SSH session not active
2025-09-10 13:46:56,413 - RSTPTest - INFO - 测试完成: test_malformed_bpdu_handling (耗时: 47.05秒)
2025-09-10 13:46:56,413 - RSTPTest - INFO - ============================================================

2025-09-10 13:46:56,415 - RSTPTest - INFO - ============================================================
2025-09-10 13:46:56,416 - RSTPTest - INFO - 开始测试: test_non_standard_bpdu_handling
2025-09-10 13:46:56,416 - RSTPTest - INFO - ============================================================
2025-09-10 13:46:56,416 - test_security - INFO - 开始非标准BPDU处理测试
2025-09-10 13:46:56,421 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 13:46:56,422 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 13:46:56,422 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 13:46:56,422 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 13:46:56,422 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 13:46:56,422 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 13:46:56,423 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 13:46:56,423 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 13:46:56,940 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 13:46:56,940 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 13:46:57,978 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 13:46:57,978 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 13:46:57,978 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 13:46:57,979 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 13:46:58,442 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 13:46:58,928 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 13:46:58,928 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 13:46:59,032 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 13:46:59,127 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 13:46:59,128 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 13:46:59,128 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 13:46:59,128 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 13:46:59,128 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 13:46:59,129 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 13:46:59,129 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 13:46:59,129 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 13:46:59,129 - SSH_TestNode1 - WARNING - TestNode1: SSH连接已断开，尝试重连...
2025-09-10 13:46:59,248 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 13:46:59,381 - SSH_TestNode1 - INFO - TestNode1: SSH重连成功
2025-09-10 13:46:59,896 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 13:47:04,473 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:47:04,604 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:47:04,604 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 13:47:04,604 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 13:47:04,604 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 13:47:04,605 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 13:47:05,824 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 13:47:07,047 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 13:47:07,047 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 13:47:07,098 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 13:47:07,322 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 13:47:07,322 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 13:47:07,322 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 13:47:07,323 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 13:47:07,323 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 13:47:07,323 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 13:47:07,323 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 13:47:07,323 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 13:47:07,838 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 13:47:12,408 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:47:12,546 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:47:12,546 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 13:47:12,547 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 13:47:12,547 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 13:47:12,547 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 13:47:13,772 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 13:47:14,999 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 13:47:14,999 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 13:47:15,048 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 13:47:15,276 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 13:47:15,276 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 13:47:15,277 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 13:47:20,277 - test_security - INFO - 执行测试: _test_pvst_plus_bpdu
2025-09-10 13:47:20,282 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

# PVST+ 使用不同的目标MAC地址
pvst_mac = "01:00:0c:cc:cc:cd"
interface = "eth0"

eth = Ether(dst=pvst_mac, src="00:11:22:33:44:55")
# PVST+ 使用SNAP封装
snap = SNAP(OUI=0x00000c, code=0x010b)
# 模拟PVST+ BPDU结构
pvst_bpdu = Raw(load=b"    " + b" " * 30 + b" ")  # 包含VLAN ID

packet = eth/snap/pvst_bpdu
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("PVST+ BPDU sent")
' > /tmp/pvst_bpdu.py
错误: 
2025-09-10 13:47:20,283 - test_security - ERROR - _test_pvst_plus_bpdu 执行失败: 
2025-09-10 13:47:20,284 - test_security - INFO - 执行测试: _test_cisco_proprietary_bpdu
2025-09-10 13:47:20,284 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 模拟包含Cisco专有扩展的BPDU
cisco_bpdu = Raw(load=b"    " + b" " * 30 + 
                     b" )   ")  # Cisco OUI + 专有数据

packet = eth/llc/cisco_bpdu
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("Cisco proprietary BPDU sent")
' > /tmp/cisco_bpdu.py
错误: SSH session not active
2025-09-10 13:47:20,285 - test_security - ERROR - _test_cisco_proprietary_bpdu 执行失败: SSH session not active
2025-09-10 13:47:20,285 - test_security - INFO - 执行测试: _test_vlan_tagged_bpdu
2025-09-10 13:47:20,286 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
# 添加VLAN标签
vlan = Dot1Q(vlan=100)
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
bpdu = STP(bpdutype=0x00, rootid=32768, bridgeid=32768)

packet = eth/vlan/llc/bpdu
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("VLAN tagged BPDU sent")
' > /tmp/vlan_bpdu.py
错误: SSH session not active
2025-09-10 13:47:20,286 - test_security - ERROR - _test_vlan_tagged_bpdu 执行失败: SSH session not active
2025-09-10 13:47:20,286 - test_security - INFO - 执行测试: _test_unknown_tlv_bpdu
2025-09-10 13:47:20,287 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 标准BPDU + 未知TLV
standard_bpdu = b"    " + b" " * 30
unknown_tlv = b"ÿÿ "  # 未知类型和长度的TLV
bpdu_with_tlv = Raw(load=standard_bpdu + unknown_tlv)

packet = eth/llc/bpdu_with_tlv
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("BPDU with unknown TLV sent")
' > /tmp/unknown_tlv.py
错误: SSH session not active
2025-09-10 13:47:20,288 - test_security - ERROR - _test_unknown_tlv_bpdu 执行失败: SSH session not active
2025-09-10 13:47:20,475 - test_security - INFO - 非标准BPDU处理测试完成
2025-09-10 13:47:20,476 - RSTPTest - INFO - 测试完成: test_non_standard_bpdu_handling (耗时: 24.06秒)
2025-09-10 13:47:20,476 - RSTPTest - INFO - ============================================================

2025-09-10 13:47:20,478 - RSTPTest - INFO - ============================================================
2025-09-10 13:47:20,478 - RSTPTest - INFO - 开始测试: test_bpdu_guard_functionality
2025-09-10 13:47:20,478 - RSTPTest - INFO - ============================================================
2025-09-10 13:47:20,478 - test_security - INFO - 开始BPDU防护功能测试
2025-09-10 13:47:20,483 - NetworkTopology - INFO - 创建RSTP线性拓扑...
2025-09-10 13:47:20,483 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 13:47:20,484 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 13:47:20,484 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 13:47:20,484 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 13:47:20,484 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 13:47:20,485 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 13:47:20,485 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 13:47:20,982 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 13:47:20,983 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 13:47:22,031 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 13:47:22,031 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 13:47:22,031 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth2']
2025-09-10 13:47:22,032 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 13:47:22,491 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 13:47:22,492 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 13:47:22,595 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 13:47:22,696 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 13:47:22,696 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 13:47:22,696 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 13:47:22,697 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 13:47:22,697 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 13:47:22,697 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 13:47:22,697 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 13:47:22,697 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 13:47:22,697 - SSH_TestNode1 - WARNING - TestNode1: SSH连接已断开，尝试重连...
2025-09-10 13:47:22,827 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 13:47:22,963 - SSH_TestNode1 - INFO - TestNode1: SSH重连成功
2025-09-10 13:47:23,476 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 13:47:28,040 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:47:28,180 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:47:28,180 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 13:47:28,180 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 13:47:28,181 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 13:47:28,181 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 13:47:29,424 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 13:47:30,724 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 13:47:30,724 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 13:47:30,774 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 13:47:31,000 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 13:47:31,000 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 13:47:31,000 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 13:47:31,001 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 13:47:31,001 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 13:47:31,001 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 13:47:31,001 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 13:47:31,002 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 13:47:31,524 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 13:47:36,113 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:47:36,253 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:47:36,253 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 13:47:36,254 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 13:47:36,254 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0']
2025-09-10 13:47:36,254 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 13:47:37,502 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 13:47:37,502 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 13:47:37,552 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 13:47:37,763 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 13:47:37,763 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 13:47:37,763 - NetworkTopology - INFO - 线性拓扑创建完成
2025-09-10 13:47:42,820 - test_security - WARNING - 启用BPDU防护失败: 
2025-09-10 13:47:42,868 - test_security - INFO - 边缘端口 eth2 初始状态: unknown
2025-09-10 13:47:42,868 - test_security - INFO - 向边缘端口 eth2 发送BPDU
2025-09-10 13:47:49,731 - test_security - INFO - BPDU防护触发后端口 eth2 状态: unknown
2025-09-10 13:47:49,731 - test_security - ERROR - BPDU防护功能异常：端口未被禁用
2025-09-10 13:47:49,962 - RSTPTest - INFO - 测试完成: test_bpdu_guard_functionality (耗时: 29.48秒)
2025-09-10 13:47:49,963 - RSTPTest - INFO - ============================================================

2025-09-10 13:47:49,965 - RSTPTest - INFO - ============================================================
2025-09-10 13:47:49,965 - RSTPTest - INFO - 开始测试: test_root_guard_functionality
2025-09-10 13:47:49,965 - RSTPTest - INFO - ============================================================
2025-09-10 13:47:49,966 - test_security - INFO - 开始根防护功能测试
2025-09-10 13:47:49,982 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 13:47:49,982 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 13:47:49,982 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 13:47:49,982 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 13:47:49,982 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 13:47:49,983 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 13:47:49,983 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 13:47:49,983 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 13:47:50,489 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 13:47:50,490 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 13:47:51,530 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 13:47:51,531 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 13:47:51,531 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 13:47:51,531 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 13:47:51,991 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 13:47:52,470 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 13:47:52,471 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 13:47:52,574 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 13:47:52,671 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 13:47:52,671 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 13:47:52,671 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 13:47:52,671 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 13:47:52,671 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 13:47:52,671 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 13:47:52,672 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 13:47:52,672 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 13:47:53,187 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 13:47:57,725 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:47:57,859 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:47:57,859 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 13:47:57,859 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 13:47:57,859 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 13:47:57,859 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 13:47:59,094 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 13:48:00,317 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 13:48:00,318 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 13:48:00,368 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 13:48:00,655 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 13:48:00,656 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 13:48:00,656 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 13:48:00,656 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 13:48:00,656 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 13:48:00,657 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 13:48:00,657 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 13:48:00,657 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 13:48:01,173 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 13:48:05,738 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:48:05,871 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:48:05,871 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 13:48:05,871 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 13:48:05,872 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 13:48:05,872 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 13:48:07,104 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 13:48:08,375 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 13:48:08,375 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 13:48:08,423 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 13:48:08,651 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 13:48:08,652 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 13:48:08,652 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 13:48:13,911 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:48:14,071 - test_security - INFO - 当前根桥ID: 
2025-09-10 13:48:14,170 - test_security - WARNING - 启用根防护失败: 
2025-09-10 13:48:14,170 - test_security - INFO - 在端口 eth1 启用根防护
2025-09-10 13:48:14,218 - test_security - INFO - 端口 eth1 初始状态: unknown
2025-09-10 13:48:14,219 - test_security - INFO - 发送更优BPDU尝试劫持根桥
2025-09-10 13:48:30,168 - test_security - INFO - 根防护触发后端口 eth1 状态: unknown
2025-09-10 13:48:30,468 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 13:48:30,623 - test_security - INFO - 根防护功能正常：根桥身份未被劫持
2025-09-10 13:48:30,624 - test_security - ERROR - 根防护功能异常：端口未进入阻塞状态
2025-09-10 13:48:30,624 - test_security - INFO - 测试根防护端口 eth1 恢复功能
2025-09-10 13:48:30,624 - test_security - INFO - 停止发送更优BPDU
2025-09-10 13:48:40,631 - test_security - INFO - 端口恢复后状态: unknown
2025-09-10 13:48:40,631 - test_security - WARNING - 根防护端口未能自动恢复
2025-09-10 13:48:40,858 - RSTPTest - INFO - 测试完成: test_root_guard_functionality (耗时: 50.89秒)
2025-09-10 13:48:40,858 - RSTPTest - INFO - ============================================================

2025-09-10 13:48:40,860 - RSTPTest - INFO - ============================================================
2025-09-10 13:48:40,860 - RSTPTest - INFO - 开始测试: test_loop_guard_functionality
2025-09-10 13:48:40,860 - RSTPTest - INFO - ============================================================
2025-09-10 13:48:40,860 - test_security - INFO - 开始环路防护功能测试
2025-09-10 13:48:40,861 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 13:48:40,861 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 13:48:40,861 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 13:48:40,861 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 13:48:40,861 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 13:48:40,861 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 13:48:40,862 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 13:48:40,862 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 13:48:41,369 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 13:48:41,369 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 13:48:42,422 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 13:48:42,422 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 13:48:42,422 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 13:48:42,422 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 13:48:42,882 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 13:48:43,358 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 13:48:43,358 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 13:48:43,461 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 13:48:43,558 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 13:48:43,559 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 13:48:43,559 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 13:48:43,559 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 13:48:43,560 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 13:48:43,560 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 13:48:43,560 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 13:48:43,561 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 13:48:44,062 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 13:48:48,603 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:48:48,752 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:48:48,753 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 13:48:48,753 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 13:48:48,753 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 13:48:48,753 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 13:48:49,962 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 13:48:51,184 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 13:48:51,184 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 13:48:51,232 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 13:48:51,462 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 13:48:51,463 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 13:48:51,463 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 13:48:51,463 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 13:48:51,463 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 13:48:51,463 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 13:48:51,464 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 13:48:51,464 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 13:48:51,974 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 13:48:56,526 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 13:48:56,656 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 13:48:56,656 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 13:48:56,656 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 13:48:56,656 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 13:48:56,656 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 13:48:57,894 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 13:48:59,151 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 13:48:59,151 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 13:48:59,200 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 13:48:59,424 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 13:48:59,424 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 13:48:59,424 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 13:49:04,481 - test_security - WARNING - 启用环路防护失败: 
2025-09-10 13:49:04,482 - test_security - INFO - 在端口 eth1 启用环路防护
2025-09-10 13:49:04,530 - test_security - INFO - 端口 eth1 初始状态: unknown
2025-09-10 13:49:04,531 - test_security - INFO - 模拟单向链路故障
2025-09-10 13:49:04,531 - test_security - INFO - 停止从测试节点发送BPDU
2025-09-10 13:49:24,670 - test_security - INFO - 环路防护触发后端口 eth1 状态: unknown
2025-09-10 13:49:24,670 - test_security - WARNING - 环路防护功能异常：端口未进入阻塞状态
2025-09-10 13:49:24,671 - test_security - INFO - 测试环路防护端口 eth1 恢复功能
2025-09-10 13:49:24,671 - test_security - INFO - 恢复BPDU发送
2025-09-10 13:49:34,816 - test_security - INFO - 端口恢复后状态: unknown
2025-09-10 13:49:34,816 - test_security - WARNING - 环路防护端口未能自动恢复
2025-09-10 13:49:35,024 - test_security - INFO - 环路防护功能测试完成
2025-09-10 13:49:35,025 - RSTPTest - INFO - 测试完成: test_loop_guard_functionality (耗时: 54.16秒)
2025-09-10 13:49:35,025 - RSTPTest - INFO - ============================================================

2025-09-10 13:49:35,026 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 13:49:35,026 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 13:49:35,027 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 13:49:35,651 - __main__ - INFO - ============================================================
2025-09-10 13:49:35,652 - __main__ - INFO - 测试完成，返回码: 1
2025-09-10 13:49:35,652 - __main__ - INFO - ============================================================
