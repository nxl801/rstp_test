2025-09-10 20:37:51,839 - root - INFO - 日志系统初始化完成，日志文件: logs\rstp_test_20250910_203751.log
2025-09-10 20:37:52,117 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 20:37:52,117 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 20:37:52,245 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 20:37:52,246 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 20:37:52,383 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 20:37:52,383 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 20:37:52,395 - RSTPTest - INFO - ============================================================
2025-09-10 20:37:52,396 - RSTPTest - INFO - 开始测试: test_port_role_assignment_simplified
2025-09-10 20:37:52,396 - RSTPTest - INFO - ============================================================
2025-09-10 20:37:52,397 - test_protocol_conformance - INFO - 开始端口角色分配测试
2025-09-10 20:37:52,398 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 20:37:52,398 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 20:37:52,398 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 20:37:52,399 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 20:37:52,399 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 20:37:52,399 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 20:37:52,399 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 20:37:52,450 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 20:37:52,556 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 20:37:52,556 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 20:37:52,556 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 20:37:52,557 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 20:37:53,098 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 20:37:53,099 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 20:37:54,130 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 20:37:54,131 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 20:37:54,131 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 20:37:54,131 - NetworkTopology - INFO - 跳过DUT接口 br3，将通过veth pair连接
2025-09-10 20:37:54,131 - NetworkTopology - INFO - 跳过DUT接口 br4，将通过veth pair连接
2025-09-10 20:37:54,131 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 20:37:54,132 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 20:37:54,214 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 20:37:54,411 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 20:37:54,411 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 20:37:54,411 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 20:37:54,412 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 20:37:54,412 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 20:37:54,412 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 20:37:54,412 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 20:37:54,467 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 20:37:54,467 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 20:37:54,638 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 20:37:54,639 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 20:37:54,639 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 20:37:54,639 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 20:37:54,639 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 20:37:55,188 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 20:37:59,700 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 20:37:59,829 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 20:37:59,829 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 20:37:59,829 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 20:37:59,830 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 20:37:59,830 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 20:38:01,034 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 20:38:02,214 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 20:38:02,214 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 20:38:02,310 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 20:38:02,576 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 20:38:02,576 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 20:38:02,576 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 20:38:02,577 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 20:38:02,577 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 20:38:02,577 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 20:38:02,577 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 20:38:02,632 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 20:38:02,633 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 20:38:02,803 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 20:38:02,803 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 20:38:02,803 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 20:38:02,804 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 20:38:02,804 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 20:38:03,339 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 20:38:07,846 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 20:38:07,969 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 20:38:07,969 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 20:38:07,970 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 20:38:07,970 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 20:38:07,970 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 20:38:09,159 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 20:38:10,370 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 20:38:10,370 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 20:38:10,466 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 20:38:10,735 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 20:38:10,735 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 20:38:10,736 - NetworkTopology - INFO - 创建节点间的veth pair连接...
2025-09-10 20:38:10,736 - NetworkTopology - INFO - 创建连接: DUT:br3 <-> TestNode1:eth0
2025-09-10 20:38:11,511 - NetworkTopology - INFO - ✓ 连接创建成功: veth01a <-> veth01b
2025-09-10 20:38:11,511 - NetworkTopology - INFO - 创建连接: TestNode1:eth2 <-> TestNode2:eth0
2025-09-10 20:38:12,302 - NetworkTopology - INFO - ✓ 连接创建成功: veth12a <-> veth12b
2025-09-10 20:38:12,302 - NetworkTopology - INFO - 创建连接: TestNode2:eth2 <-> DUT:br4
2025-09-10 20:38:13,048 - NetworkTopology - INFO - ✓ 连接创建成功: veth20a <-> veth20b
2025-09-10 20:38:13,049 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 20:38:13,448 - test_protocol_conformance - INFO - 等待网络收敛...
2025-09-10 20:38:13,448 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 20:38:13,905 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 20:38:14,056 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   ee:32:d8:8c:2c:48
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    32768
  stp-system-id   ee:32:d8:8c:2c:48
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  veth01a    Designated Forwarding 2000     128.1
  veth20b    Designated Discarding 2000     128.2


2025-09-10 20:38:14,209 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000ee32d88c2c48
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(veth01a): addr:7e:19:0a:6f:ab:18
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth20b): addr:b6:d0:61:7c:94:22
     config:     0
     state:      0
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:ee:32:d8:8c:2c:48
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:38:14,210 - RSTPAnalyzer_DUT - INFO - 从ovs-ofctl show提取到dpid: 0000ee32d88c2c48
2025-09-10 20:38:14,517 - RSTPAnalyzer_DUT - INFO - 获取到优先级: 1132768
2025-09-10 20:38:14,518 - RSTPAnalyzer_DUT - INFO - 从dpid构造bridge_id: 1132768/ee:32:d8:8c:2c:48
2025-09-10 20:38:14,518 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 1132768/ee:32:d8:8c:2c:48
2025-09-10 20:38:14,981 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 20:38:14,982 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000ee32d88c2c48
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(veth01a): addr:7e:19:0a:6f:ab:18
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth20b): addr:b6:d0:61:7c:94:22
     config:     0
     state:      0
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:ee:32:d8:8c:2c:48
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:38:14,982 - RSTPAnalyzer_DUT - INFO - 找到端口: veth01a (从行:  1(veth01a): addr:7e:19:0a:6f:ab:18)
2025-09-10 20:38:14,983 - RSTPAnalyzer_DUT - INFO - 找到端口: veth20b (从行:  2(veth20b): addr:b6:d0:61:7c:94:22)
2025-09-10 20:38:14,983 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:ee:32:d8:8c:2c:48)
2025-09-10 20:38:14,983 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['veth01a', 'veth20b', 'SE_ETH2']
2025-09-10 20:38:15,271 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.82秒
2025-09-10 20:38:15,728 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 20:38:15,880 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   ee:32:d8:8c:2c:48
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    32768
  stp-system-id   ee:32:d8:8c:2c:48
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  veth01a    Designated Forwarding 2000     128.1
  veth20b    Designated Discarding 2000     128.2


2025-09-10 20:38:16,033 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000ee32d88c2c48
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(veth01a): addr:7e:19:0a:6f:ab:18
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth20b): addr:b6:d0:61:7c:94:22
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:ee:32:d8:8c:2c:48
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:38:16,034 - RSTPAnalyzer_DUT - INFO - 从ovs-ofctl show提取到dpid: 0000ee32d88c2c48
2025-09-10 20:38:16,342 - RSTPAnalyzer_DUT - INFO - 获取到优先级: 1132768
2025-09-10 20:38:16,342 - RSTPAnalyzer_DUT - INFO - 从dpid构造bridge_id: 1132768/ee:32:d8:8c:2c:48
2025-09-10 20:38:16,343 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 1132768/ee:32:d8:8c:2c:48
2025-09-10 20:38:16,810 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 20:38:16,811 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000ee32d88c2c48
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(veth01a): addr:7e:19:0a:6f:ab:18
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth20b): addr:b6:d0:61:7c:94:22
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:ee:32:d8:8c:2c:48
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:38:16,812 - RSTPAnalyzer_DUT - INFO - 找到端口: veth01a (从行:  1(veth01a): addr:7e:19:0a:6f:ab:18)
2025-09-10 20:38:16,812 - RSTPAnalyzer_DUT - INFO - 找到端口: veth20b (从行:  2(veth20b): addr:b6:d0:61:7c:94:22)
2025-09-10 20:38:16,812 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:ee:32:d8:8c:2c:48)
2025-09-10 20:38:16,812 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['veth01a', 'veth20b', 'SE_ETH2']
2025-09-10 20:38:17,565 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 20:38:17,721 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   ee:32:d8:8c:2c:48
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    32768
  stp-system-id   ee:32:d8:8c:2c:48
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  veth01a    Designated Forwarding 2000     128.1
  veth20b    Designated Forwarding 2000     128.2


2025-09-10 20:38:17,873 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000ee32d88c2c48
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(veth01a): addr:7e:19:0a:6f:ab:18
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth20b): addr:b6:d0:61:7c:94:22
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:ee:32:d8:8c:2c:48
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:38:17,874 - RSTPAnalyzer_DUT - INFO - 从ovs-ofctl show提取到dpid: 0000ee32d88c2c48
2025-09-10 20:38:18,182 - RSTPAnalyzer_DUT - INFO - 获取到优先级: 1132768
2025-09-10 20:38:18,182 - RSTPAnalyzer_DUT - INFO - 从dpid构造bridge_id: 1132768/ee:32:d8:8c:2c:48
2025-09-10 20:38:18,182 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 1132768/ee:32:d8:8c:2c:48
2025-09-10 20:38:18,646 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 20:38:18,646 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000ee32d88c2c48
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(veth01a): addr:7e:19:0a:6f:ab:18
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth20b): addr:b6:d0:61:7c:94:22
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:ee:32:d8:8c:2c:48
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:38:18,647 - RSTPAnalyzer_DUT - INFO - 找到端口: veth01a (从行:  1(veth01a): addr:7e:19:0a:6f:ab:18)
2025-09-10 20:38:18,647 - RSTPAnalyzer_DUT - INFO - 找到端口: veth20b (从行:  2(veth20b): addr:b6:d0:61:7c:94:22)
2025-09-10 20:38:18,648 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:ee:32:d8:8c:2c:48)
2025-09-10 20:38:18,648 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['veth01a', 'veth20b', 'SE_ETH2']
2025-09-10 20:38:18,935 - RSTPAnalyzer_DUT - INFO - 根桥检查: bridge_id='1132768/ee:32:d8:8c:2c:48', root_id='1132768/ee:32:d8:8c:2c:48', is_root=True
2025-09-10 20:38:18,935 - test_protocol_conformance - INFO - DUT是根桥: True
2025-09-10 20:38:18,935 - test_protocol_conformance - INFO - 活动端口角色: {<PortRole.DESIGNATED: 'designated'>: ['veth01a', 'veth20b']}
2025-09-10 20:38:18,935 - test_protocol_conformance - INFO - 禁用端口: ['SE_ETH2']
2025-09-10 20:38:18,936 - test_protocol_conformance - INFO - 端口角色分配测试通过
2025-09-10 20:38:18,936 - RSTPTest - INFO - 测试完成: test_port_role_assignment_simplified (耗时: 26.54秒)
2025-09-10 20:38:18,937 - RSTPTest - INFO - ============================================================

2025-09-10 20:38:18,938 - RSTPTest - INFO - ============================================================
2025-09-10 20:38:18,938 - RSTPTest - INFO - 开始测试: test_root_bridge_election
2025-09-10 20:38:18,938 - RSTPTest - INFO - ============================================================
2025-09-10 20:38:18,939 - test_protocol_conformance - INFO - 开始根网桥选举测试
2025-09-10 20:38:18,939 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 20:38:18,939 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 20:38:18,939 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 20:38:18,939 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 20:38:18,939 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 20:38:18,939 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 20:38:18,939 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 20:38:18,940 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 20:38:19,497 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 20:38:19,498 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 20:38:20,607 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 20:38:20,607 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 20:38:20,607 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 20:38:20,608 - NetworkTopology - INFO - 跳过DUT接口 br3，将通过veth pair连接
2025-09-10 20:38:20,608 - NetworkTopology - INFO - 跳过DUT接口 br4，将通过veth pair连接
2025-09-10 20:38:20,608 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 20:38:20,608 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 20:38:20,691 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 20:38:20,882 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 20:38:20,882 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 20:38:20,882 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 20:38:20,883 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 20:38:20,883 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 20:38:20,883 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 20:38:20,883 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 20:38:20,884 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 20:38:21,378 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 20:38:25,868 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 20:38:25,997 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 20:38:25,997 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 20:38:25,997 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 20:38:25,998 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 20:38:25,998 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 20:38:27,183 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 20:38:28,378 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 20:38:28,378 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 20:38:28,473 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 20:38:28,740 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 20:38:28,741 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 20:38:28,741 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 20:38:28,741 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 20:38:28,742 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 20:38:28,742 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 20:38:28,742 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 20:38:28,742 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 20:38:29,227 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 20:38:33,724 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 20:38:33,845 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 20:38:33,846 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 20:38:33,846 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 20:38:33,846 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 20:38:33,847 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 20:38:35,029 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 20:38:36,251 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 20:38:36,252 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 20:38:36,347 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 20:38:36,613 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 20:38:36,614 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 20:38:36,614 - NetworkTopology - INFO - 创建节点间的veth pair连接...
2025-09-10 20:38:36,614 - NetworkTopology - INFO - 创建连接: DUT:br3 <-> TestNode1:eth0
2025-09-10 20:38:37,428 - NetworkTopology - INFO - ✓ 连接创建成功: veth01a <-> veth01b
2025-09-10 20:38:37,429 - NetworkTopology - INFO - 创建连接: TestNode1:eth2 <-> TestNode2:eth0
2025-09-10 20:38:38,209 - NetworkTopology - INFO - ✓ 连接创建成功: veth12a <-> veth12b
2025-09-10 20:38:38,209 - NetworkTopology - INFO - 创建连接: TestNode2:eth2 <-> DUT:br4
2025-09-10 20:38:38,952 - NetworkTopology - INFO - ✓ 连接创建成功: veth20a <-> veth20b
2025-09-10 20:38:38,952 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 20:38:41,953 - test_protocol_conformance - INFO - === 检查DUT网桥配置 ===
2025-09-10 20:38:41,953 - test_protocol_conformance - INFO - DUT使用OVS网桥: SE_ETH2
2025-09-10 20:38:42,013 - test_protocol_conformance - INFO - OVS网桥 SE_ETH2 存在
2025-09-10 20:38:42,122 - test_protocol_conformance - INFO - SE_ETH2 RSTP状态: true
2025-09-10 20:38:42,122 - test_protocol_conformance - INFO - === 初始网桥状态 ===
2025-09-10 20:38:42,580 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 20:38:42,732 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   9a:01:ef:ec:d4:41
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    32768
  stp-system-id   9a:01:ef:ec:d4:41
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  veth01a    Designated Forwarding 2000     128.1
  veth20b    Designated Forwarding 2000     128.2


2025-09-10 20:38:42,885 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:00009a01efecd441
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(veth01a): addr:7e:19:0a:6f:ab:18
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth20b): addr:b6:d0:61:7c:94:22
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:9a:01:ef:ec:d4:41
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:38:42,886 - RSTPAnalyzer_DUT - INFO - 从ovs-ofctl show提取到dpid: 00009a01efecd441
2025-09-10 20:38:43,193 - RSTPAnalyzer_DUT - INFO - 获取到优先级: 1132768
2025-09-10 20:38:43,193 - RSTPAnalyzer_DUT - INFO - 从dpid构造bridge_id: 1132768/9a:01:ef:ec:d4:41
2025-09-10 20:38:43,194 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 1132768/9a:01:ef:ec:d4:41
2025-09-10 20:38:43,658 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 20:38:43,658 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:00009a01efecd441
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(veth01a): addr:7e:19:0a:6f:ab:18
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth20b): addr:b6:d0:61:7c:94:22
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:9a:01:ef:ec:d4:41
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:38:43,659 - RSTPAnalyzer_DUT - INFO - 找到端口: veth01a (从行:  1(veth01a): addr:7e:19:0a:6f:ab:18)
2025-09-10 20:38:43,659 - RSTPAnalyzer_DUT - INFO - 找到端口: veth20b (从行:  2(veth20b): addr:b6:d0:61:7c:94:22)
2025-09-10 20:38:43,659 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:9a:01:ef:ec:d4:41)
2025-09-10 20:38:43,659 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['veth01a', 'veth20b', 'SE_ETH2']
2025-09-10 20:38:43,946 - test_protocol_conformance - INFO - 活动端口数: 2
2025-09-10 20:38:43,946 - test_protocol_conformance - INFO - 初始端口状态:
2025-09-10 20:38:43,947 - test_protocol_conformance - INFO -   veth01a: 角色=designated, 状态=forwarding
2025-09-10 20:38:43,947 - test_protocol_conformance - INFO -   veth20b: 角色=designated, 状态=forwarding
2025-09-10 20:38:43,947 - test_protocol_conformance - INFO - 初始状态 - DUT有Root Port: False
2025-09-10 20:38:43,947 - test_protocol_conformance - INFO - === 配置网桥优先级 ===
2025-09-10 20:38:43,947 - test_protocol_conformance - INFO - 设置TestNode1优先级为16384
2025-09-10 20:38:44,077 - test_protocol_conformance - INFO - 设置DUT优先级为32768
2025-09-10 20:38:44,147 - test_protocol_conformance - INFO - OVS设置优先级结果: ('', '', 0)
2025-09-10 20:38:44,251 - test_protocol_conformance - INFO - 验证优先级设置: ('"32768"\n', '', 0)
2025-09-10 20:38:44,251 - test_protocol_conformance - INFO - 设置TestNode2优先级为24576
2025-09-10 20:38:44,376 - test_protocol_conformance - INFO - 等待RSTP收敛...
2025-09-10 20:38:54,377 - test_protocol_conformance - INFO - === 第一阶段验证 ===
2025-09-10 20:38:54,796 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 20:38:54,950 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   9a:01:ef:ec:d4:41
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    32768
  stp-system-id   9a:01:ef:ec:d4:41
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  veth01a    Designated Forwarding 2000     128.1
  veth20b    Designated Forwarding 2000     128.2


2025-09-10 20:38:55,111 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:00009a01efecd441
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(veth01a): addr:7e:19:0a:6f:ab:18
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth20b): addr:b6:d0:61:7c:94:22
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:9a:01:ef:ec:d4:41
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:38:55,112 - RSTPAnalyzer_DUT - INFO - 从ovs-ofctl show提取到dpid: 00009a01efecd441
2025-09-10 20:38:55,428 - RSTPAnalyzer_DUT - INFO - 获取到优先级: 1132768
2025-09-10 20:38:55,429 - RSTPAnalyzer_DUT - INFO - 从dpid构造bridge_id: 1132768/9a:01:ef:ec:d4:41
2025-09-10 20:38:55,429 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 1132768/9a:01:ef:ec:d4:41
2025-09-10 20:38:55,893 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 20:38:55,893 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:00009a01efecd441
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(veth01a): addr:7e:19:0a:6f:ab:18
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth20b): addr:b6:d0:61:7c:94:22
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:9a:01:ef:ec:d4:41
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:38:55,894 - RSTPAnalyzer_DUT - INFO - 找到端口: veth01a (从行:  1(veth01a): addr:7e:19:0a:6f:ab:18)
2025-09-10 20:38:55,894 - RSTPAnalyzer_DUT - INFO - 找到端口: veth20b (从行:  2(veth20b): addr:b6:d0:61:7c:94:22)
2025-09-10 20:38:55,894 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:9a:01:ef:ec:d4:41)
2025-09-10 20:38:55,895 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['veth01a', 'veth20b', 'SE_ETH2']
2025-09-10 20:38:56,291 - test_protocol_conformance - INFO - DUT当前优先级: 32768
2025-09-10 20:38:56,291 - test_protocol_conformance - INFO - 优先级验证通过
2025-09-10 20:38:56,291 - test_protocol_conformance - INFO -   veth01a: 角色=designated
2025-09-10 20:38:56,291 - test_protocol_conformance - INFO -   veth20b: 角色=designated
2025-09-10 20:38:56,292 - test_protocol_conformance - ERROR - DUT是根桥（所有端口都是Designated），但不应该是
2025-09-10 20:38:56,292 - test_protocol_conformance - INFO - 检查其他节点的优先级...
2025-09-10 20:38:56,347 - test_protocol_conformance - INFO - TestNode1优先级: ('16384\n', '', 0)
2025-09-10 20:38:56,402 - test_protocol_conformance - INFO - TestNode2优先级: ('24576\n', '', 0)
2025-09-10 20:38:56,402 - test_protocol_conformance - INFO - 
=== 第二阶段：DUT应成为根桥 ===
2025-09-10 20:38:56,402 - test_protocol_conformance - INFO - 设置DUT优先级为12288（最低）
2025-09-10 20:38:56,470 - test_protocol_conformance - INFO - OVS设置最低优先级结果: ('', '', 0)
2025-09-10 20:38:56,575 - test_protocol_conformance - INFO - 设置后优先级: 12288
2025-09-10 20:38:56,575 - test_protocol_conformance - INFO - 最低优先级设置验证通过
2025-09-10 20:38:56,575 - test_protocol_conformance - INFO - 等待RSTP重新收敛...
2025-09-10 20:39:06,576 - test_protocol_conformance - INFO - === 最终验证 ===
2025-09-10 20:39:06,992 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 20:39:07,157 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   9a:01:ef:ec:d4:41
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    32768
  stp-system-id   9a:01:ef:ec:d4:41
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  veth01a    Designated Forwarding 2000     128.1
  veth20b    Designated Forwarding 2000     128.2


2025-09-10 20:39:07,313 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:00009a01efecd441
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(veth01a): addr:7e:19:0a:6f:ab:18
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth20b): addr:b6:d0:61:7c:94:22
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:9a:01:ef:ec:d4:41
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:39:07,314 - RSTPAnalyzer_DUT - INFO - 从ovs-ofctl show提取到dpid: 00009a01efecd441
2025-09-10 20:39:07,627 - RSTPAnalyzer_DUT - INFO - 获取到优先级: 1112288
2025-09-10 20:39:07,627 - RSTPAnalyzer_DUT - INFO - 从dpid构造bridge_id: 1112288/9a:01:ef:ec:d4:41
2025-09-10 20:39:07,627 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 1112288/9a:01:ef:ec:d4:41
2025-09-10 20:39:08,088 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 20:39:08,089 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:00009a01efecd441
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(veth01a): addr:7e:19:0a:6f:ab:18
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth20b): addr:b6:d0:61:7c:94:22
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:9a:01:ef:ec:d4:41
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:39:08,090 - RSTPAnalyzer_DUT - INFO - 找到端口: veth01a (从行:  1(veth01a): addr:7e:19:0a:6f:ab:18)
2025-09-10 20:39:08,090 - RSTPAnalyzer_DUT - INFO - 找到端口: veth20b (从行:  2(veth20b): addr:b6:d0:61:7c:94:22)
2025-09-10 20:39:08,090 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:9a:01:ef:ec:d4:41)
2025-09-10 20:39:08,090 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['veth01a', 'veth20b', 'SE_ETH2']
2025-09-10 20:39:08,379 - test_protocol_conformance - INFO -   veth01a: 角色=designated, 状态=forwarding
2025-09-10 20:39:08,379 - test_protocol_conformance - INFO -   veth20b: 角色=designated, 状态=forwarding
2025-09-10 20:39:08,379 - test_protocol_conformance - INFO - ✓ DUT成为根桥
2025-09-10 20:39:08,379 - test_protocol_conformance - INFO - 根网桥选举测试通过
2025-09-10 20:39:08,380 - RSTPTest - INFO - 测试完成: test_root_bridge_election (耗时: 49.44秒)
2025-09-10 20:39:08,380 - RSTPTest - INFO - ============================================================

2025-09-10 20:39:08,381 - RSTPTest - INFO - ============================================================
2025-09-10 20:39:08,382 - RSTPTest - INFO - 开始测试: test_port_role_assignment
2025-09-10 20:39:08,382 - RSTPTest - INFO - ============================================================
2025-09-10 20:39:08,382 - test_protocol_conformance - INFO - 开始端口角色分配测试
2025-09-10 20:39:08,382 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 20:39:08,383 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 20:39:08,383 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 20:39:08,383 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 20:39:08,383 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 20:39:08,383 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 20:39:08,383 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 20:39:08,383 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 20:39:08,941 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 20:39:08,941 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 20:39:09,977 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 20:39:09,977 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 20:39:09,977 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 20:39:09,977 - NetworkTopology - INFO - 跳过DUT接口 br3，将通过veth pair连接
2025-09-10 20:39:09,978 - NetworkTopology - INFO - 跳过DUT接口 br4，将通过veth pair连接
2025-09-10 20:39:09,978 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 20:39:09,978 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 20:39:10,061 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 20:39:10,249 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 20:39:10,249 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 20:39:10,250 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 20:39:10,250 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 20:39:10,250 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 20:39:10,250 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 20:39:10,250 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 20:39:10,251 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 20:39:10,755 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 20:39:15,248 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 20:39:15,373 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 20:39:15,373 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 20:39:15,373 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 20:39:15,374 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 20:39:15,374 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 20:39:16,536 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 20:39:17,719 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 20:39:17,719 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 20:39:17,814 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 20:39:18,076 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 20:39:18,076 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 20:39:18,076 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 20:39:18,076 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 20:39:18,077 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 20:39:18,077 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 20:39:18,077 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 20:39:18,077 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 20:39:18,575 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 20:39:23,070 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 20:39:23,197 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 20:39:23,197 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 20:39:23,197 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 20:39:23,197 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 20:39:23,198 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 20:39:24,380 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 20:39:25,600 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 20:39:25,600 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 20:39:25,694 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 20:39:25,958 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 20:39:25,958 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 20:39:25,958 - NetworkTopology - INFO - 创建节点间的veth pair连接...
2025-09-10 20:39:25,958 - NetworkTopology - INFO - 创建连接: DUT:br3 <-> TestNode1:eth0
2025-09-10 20:39:26,813 - NetworkTopology - INFO - ✓ 连接创建成功: veth01a <-> veth01b
2025-09-10 20:39:26,813 - NetworkTopology - INFO - 创建连接: TestNode1:eth2 <-> TestNode2:eth0
2025-09-10 20:39:27,583 - NetworkTopology - INFO - ✓ 连接创建成功: veth12a <-> veth12b
2025-09-10 20:39:27,584 - NetworkTopology - INFO - 创建连接: TestNode2:eth2 <-> DUT:br4
2025-09-10 20:39:28,340 - NetworkTopology - INFO - ✓ 连接创建成功: veth20a <-> veth20b
2025-09-10 20:39:28,341 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 20:39:31,751 - test_protocol_conformance - INFO - 检查DUT的OVS网桥接口...
2025-09-10 20:39:31,854 - test_protocol_conformance - INFO - OVS配置状态:
('8c812ea9-3b0c-46a1-bd3c-ef3904d38c1a\n    Bridge SE_ETH4\n        Port SE_ETH4\n            Interface SE_ETH4\n                type: internal\n    Bridge SE_ETH6\n        Port SE_ETH6\n            Interface SE_ETH6\n                type: internal\n    Bridge rstp0\n        Port rstp0\n            Interface rstp0\n                type: internal\n    Bridge SE_ETH2\n        Port veth20b\n            Interface veth20b\n        Port SE_ETH2\n            Interface SE_ETH2\n                type: internal\n        Port veth01a\n            Interface veth01a\n    Bridge br0\n        Port eth0\n            Interface eth0\n                error: "could not open network device eth0 (No such device)"\n        Port br0\n            Interface br0\n                type: internal\n                error: "could not add network device br0 to ofproto (File exists)"\n        Port eth2\n            Interface eth2\n                error: "could not open network device eth2 (No such device)"\n    ovs_version: "3.1.0"\n', '', 0)
2025-09-10 20:39:31,959 - test_protocol_conformance - INFO - SE_ETH2 网桥端口:
('veth01a\nveth20b\n', '', 0)
2025-09-10 20:39:32,066 - test_protocol_conformance - INFO - SE_ETH2 STP状态:
('true\n', '', 0)
2025-09-10 20:39:32,171 - test_protocol_conformance - INFO - SE_ETH2 端口信息:
('OFPT_FEATURES_REPLY (xid=0x2): dpid:0000c62d01933a4b\nn_tables:254, n_buffers:0\ncapabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP\nactions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst\n 1(veth01a): addr:7e:19:0a:6f:ab:18\n     config:     0\n     state:      STP_FORWARD\n     current:    10GB-FD COPPER\n     speed: 10000 Mbps now, 0 Mbps max\n 2(veth20b): addr:b6:d0:61:7c:94:22\n     config:     0\n     state:      STP_FORWARD\n     current:    10GB-FD COPPER\n     speed: 10000 Mbps now, 0 Mbps max\n LOCAL(SE_ETH2): addr:c6:2d:01:93:3a:4b\n     config:     0\n     state:      0\n     speed: 0 Mbps now, 0 Mbps max\nOFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0\n', '', 0)
2025-09-10 20:39:32,172 - test_protocol_conformance - INFO - 获取初始网桥状态...
2025-09-10 20:39:32,630 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 20:39:32,783 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   c6:2d:01:93:3a:4b
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    32768
  stp-system-id   c6:2d:01:93:3a:4b
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  veth01a    Designated Forwarding 2000     128.1
  veth20b    Designated Forwarding 2000     128.2


2025-09-10 20:39:32,937 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000c62d01933a4b
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(veth01a): addr:7e:19:0a:6f:ab:18
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth20b): addr:b6:d0:61:7c:94:22
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:c6:2d:01:93:3a:4b
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:39:32,938 - RSTPAnalyzer_DUT - INFO - 从ovs-ofctl show提取到dpid: 0000c62d01933a4b
2025-09-10 20:39:33,244 - RSTPAnalyzer_DUT - INFO - 获取到优先级: 1132768
2025-09-10 20:39:33,244 - RSTPAnalyzer_DUT - INFO - 从dpid构造bridge_id: 1132768/c6:2d:01:93:3a:4b
2025-09-10 20:39:33,244 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 1132768/c6:2d:01:93:3a:4b
2025-09-10 20:39:33,705 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 20:39:33,706 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000c62d01933a4b
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(veth01a): addr:7e:19:0a:6f:ab:18
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth20b): addr:b6:d0:61:7c:94:22
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:c6:2d:01:93:3a:4b
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:39:33,707 - RSTPAnalyzer_DUT - INFO - 找到端口: veth01a (从行:  1(veth01a): addr:7e:19:0a:6f:ab:18)
2025-09-10 20:39:33,707 - RSTPAnalyzer_DUT - INFO - 找到端口: veth20b (从行:  2(veth20b): addr:b6:d0:61:7c:94:22)
2025-09-10 20:39:33,707 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:c6:2d:01:93:3a:4b)
2025-09-10 20:39:33,707 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['veth01a', 'veth20b', 'SE_ETH2']
2025-09-10 20:39:33,994 - test_protocol_conformance - INFO - Bridge ID: 1132768/c6:2d:01:93:3a:4b
2025-09-10 20:39:33,994 - test_protocol_conformance - INFO - Root ID: 1132768/c6:2d:01:93:3a:4b
2025-09-10 20:39:33,995 - test_protocol_conformance - INFO - Root Port: 
2025-09-10 20:39:33,995 - test_protocol_conformance - INFO - 协议版本: rstp
2025-09-10 20:39:33,995 - test_protocol_conformance - INFO - 端口 veth01a: 角色=designated, 状态=forwarding, 成本=0
2025-09-10 20:39:33,995 - test_protocol_conformance - INFO - 端口 veth20b: 角色=designated, 状态=forwarding, 成本=0
2025-09-10 20:39:33,995 - test_protocol_conformance - INFO - 端口 SE_ETH2: 角色=designated, 状态=disabled, 成本=0
2025-09-10 20:39:33,995 - test_protocol_conformance - INFO - 等待网络收敛...
2025-09-10 20:39:33,995 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 20:39:34,447 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 20:39:34,599 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   c6:2d:01:93:3a:4b
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    32768
  stp-system-id   c6:2d:01:93:3a:4b
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  veth01a    Designated Forwarding 2000     128.1
  veth20b    Designated Forwarding 2000     128.2


2025-09-10 20:39:34,753 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000c62d01933a4b
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(veth01a): addr:7e:19:0a:6f:ab:18
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth20b): addr:b6:d0:61:7c:94:22
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:c6:2d:01:93:3a:4b
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:39:34,754 - RSTPAnalyzer_DUT - INFO - 从ovs-ofctl show提取到dpid: 0000c62d01933a4b
2025-09-10 20:39:35,060 - RSTPAnalyzer_DUT - INFO - 获取到优先级: 1132768
2025-09-10 20:39:35,060 - RSTPAnalyzer_DUT - INFO - 从dpid构造bridge_id: 1132768/c6:2d:01:93:3a:4b
2025-09-10 20:39:35,061 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 1132768/c6:2d:01:93:3a:4b
2025-09-10 20:39:35,521 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 20:39:35,521 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000c62d01933a4b
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(veth01a): addr:7e:19:0a:6f:ab:18
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth20b): addr:b6:d0:61:7c:94:22
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:c6:2d:01:93:3a:4b
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:39:35,522 - RSTPAnalyzer_DUT - INFO - 找到端口: veth01a (从行:  1(veth01a): addr:7e:19:0a:6f:ab:18)
2025-09-10 20:39:35,522 - RSTPAnalyzer_DUT - INFO - 找到端口: veth20b (从行:  2(veth20b): addr:b6:d0:61:7c:94:22)
2025-09-10 20:39:35,522 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:c6:2d:01:93:3a:4b)
2025-09-10 20:39:35,523 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['veth01a', 'veth20b', 'SE_ETH2']
2025-09-10 20:39:35,809 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.81秒
2025-09-10 20:39:36,271 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 20:39:36,422 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   c6:2d:01:93:3a:4b
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    32768
  stp-system-id   c6:2d:01:93:3a:4b
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  veth01a    Designated Forwarding 2000     128.1
  veth20b    Designated Forwarding 2000     128.2


2025-09-10 20:39:36,576 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000c62d01933a4b
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(veth01a): addr:7e:19:0a:6f:ab:18
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth20b): addr:b6:d0:61:7c:94:22
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:c6:2d:01:93:3a:4b
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:39:36,577 - RSTPAnalyzer_DUT - INFO - 从ovs-ofctl show提取到dpid: 0000c62d01933a4b
2025-09-10 20:39:36,884 - RSTPAnalyzer_DUT - INFO - 获取到优先级: 1132768
2025-09-10 20:39:36,885 - RSTPAnalyzer_DUT - INFO - 从dpid构造bridge_id: 1132768/c6:2d:01:93:3a:4b
2025-09-10 20:39:36,885 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 1132768/c6:2d:01:93:3a:4b
2025-09-10 20:39:37,341 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 20:39:37,341 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000c62d01933a4b
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(veth01a): addr:7e:19:0a:6f:ab:18
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth20b): addr:b6:d0:61:7c:94:22
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:c6:2d:01:93:3a:4b
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:39:37,342 - RSTPAnalyzer_DUT - INFO - 找到端口: veth01a (从行:  1(veth01a): addr:7e:19:0a:6f:ab:18)
2025-09-10 20:39:37,342 - RSTPAnalyzer_DUT - INFO - 找到端口: veth20b (从行:  2(veth20b): addr:b6:d0:61:7c:94:22)
2025-09-10 20:39:37,342 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:c6:2d:01:93:3a:4b)
2025-09-10 20:39:37,343 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['veth01a', 'veth20b', 'SE_ETH2']
2025-09-10 20:39:37,630 - test_protocol_conformance - INFO - 收敛后的端口状态:
2025-09-10 20:39:37,630 - test_protocol_conformance - INFO - 端口 veth01a: 角色=designated, 状态=forwarding, 成本=0
2025-09-10 20:39:37,630 - test_protocol_conformance - INFO - 端口 veth20b: 角色=designated, 状态=forwarding, 成本=0
2025-09-10 20:39:37,631 - test_protocol_conformance - INFO - 端口 SE_ETH2: 角色=designated, 状态=disabled, 成本=0
2025-09-10 20:39:38,104 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 20:39:38,256 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   c6:2d:01:93:3a:4b
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    32768
  stp-system-id   c6:2d:01:93:3a:4b
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  veth01a    Designated Forwarding 2000     128.1
  veth20b    Designated Forwarding 2000     128.2


2025-09-10 20:39:38,409 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000c62d01933a4b
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(veth01a): addr:7e:19:0a:6f:ab:18
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth20b): addr:b6:d0:61:7c:94:22
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:c6:2d:01:93:3a:4b
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:39:38,411 - RSTPAnalyzer_DUT - INFO - 从ovs-ofctl show提取到dpid: 0000c62d01933a4b
2025-09-10 20:39:38,716 - RSTPAnalyzer_DUT - INFO - 获取到优先级: 1132768
2025-09-10 20:39:38,716 - RSTPAnalyzer_DUT - INFO - 从dpid构造bridge_id: 1132768/c6:2d:01:93:3a:4b
2025-09-10 20:39:38,716 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 1132768/c6:2d:01:93:3a:4b
2025-09-10 20:39:39,176 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 20:39:39,177 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000c62d01933a4b
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(veth01a): addr:7e:19:0a:6f:ab:18
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth20b): addr:b6:d0:61:7c:94:22
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:c6:2d:01:93:3a:4b
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:39:39,178 - RSTPAnalyzer_DUT - INFO - 找到端口: veth01a (从行:  1(veth01a): addr:7e:19:0a:6f:ab:18)
2025-09-10 20:39:39,178 - RSTPAnalyzer_DUT - INFO - 找到端口: veth20b (从行:  2(veth20b): addr:b6:d0:61:7c:94:22)
2025-09-10 20:39:39,179 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:c6:2d:01:93:3a:4b)
2025-09-10 20:39:39,179 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['veth01a', 'veth20b', 'SE_ETH2']
2025-09-10 20:39:39,466 - RSTPAnalyzer_DUT - INFO - 根桥检查: bridge_id='1132768/c6:2d:01:93:3a:4b', root_id='1132768/c6:2d:01:93:3a:4b', is_root=True
2025-09-10 20:39:39,466 - test_protocol_conformance - INFO - is_root_bridge() 返回: True
2025-09-10 20:39:39,467 - test_protocol_conformance - INFO - 有Root Port: False
2025-09-10 20:39:39,467 - test_protocol_conformance - INFO - 最终判定 - DUT是根桥: True
2025-09-10 20:39:39,467 - test_protocol_conformance - INFO - 活动端口数: 2
2025-09-10 20:39:39,468 - test_protocol_conformance - INFO - 禁用端口: ['SE_ETH2']
2025-09-10 20:39:39,468 - test_protocol_conformance - INFO - 端口角色分布: {<PortRole.DESIGNATED: 'designated'>: ['veth01a', 'veth20b']}
2025-09-10 20:39:39,468 - test_protocol_conformance - INFO - 两端口验证：检查Root Port和Designated Port
2025-09-10 20:39:39,468 - test_protocol_conformance - INFO - 两端口验证通过
2025-09-10 20:39:39,469 - test_protocol_conformance - INFO - 端口角色分配测试完成
2025-09-10 20:39:39,470 - RSTPTest - INFO - 测试完成: test_port_role_assignment (耗时: 31.09秒)
2025-09-10 20:39:39,470 - RSTPTest - INFO - ============================================================

2025-09-10 20:39:39,472 - RSTPTest - INFO - ============================================================
2025-09-10 20:39:39,472 - RSTPTest - INFO - 开始测试: test_rstp_protocol_verification
2025-09-10 20:39:39,473 - RSTPTest - INFO - ============================================================
2025-09-10 20:39:39,473 - test_protocol_conformance - INFO - 开始RSTP协议验证
2025-09-10 20:39:39,474 - test_protocol_conformance - INFO - === 检查OVS配置 ===
2025-09-10 20:39:39,565 - test_protocol_conformance - INFO - 当前OVS配置:
8c812ea9-3b0c-46a1-bd3c-ef3904d38c1a
    Bridge SE_ETH4
        Port SE_ETH4
            Interface SE_ETH4
                type: internal
    Bridge SE_ETH6
        Port SE_ETH6
            Interface SE_ETH6
                type: internal
    Bridge rstp0
        Port rstp0
            Interface rstp0
                type: internal
    Bridge SE_ETH2
        Port veth20b
            Interface veth20b
        Port SE_ETH2
            Interface SE_ETH2
                type: internal
        Port v
2025-09-10 20:39:39,665 - test_protocol_conformance - INFO - 使用现有网桥 SE_ETH2，端口: ['veth01a', 'veth20b']
2025-09-10 20:39:39,666 - test_protocol_conformance - INFO - === 配置RSTP（确保是RSTP而不是STP）===
2025-09-10 20:39:40,881 - test_protocol_conformance - INFO - 启用RSTP...
2025-09-10 20:39:40,945 - test_protocol_conformance - INFO - ✓ RSTP已启用
2025-09-10 20:39:40,946 - test_protocol_conformance - INFO - 设置RSTP参数...
2025-09-10 20:39:41,053 - test_protocol_conformance - INFO - ✓ 设置: rstp-hello-time=2
2025-09-10 20:39:41,160 - test_protocol_conformance - INFO - ✓ 设置: rstp-forward-delay=4
2025-09-10 20:39:41,269 - test_protocol_conformance - INFO - ✓ 设置: rstp-max-age=6
2025-09-10 20:39:41,369 - test_protocol_conformance - INFO - ✓ 设置: rstp-priority=32768
2025-09-10 20:39:41,477 - test_protocol_conformance - INFO - ✓ 设置: rstp-force-protocol-version=2
2025-09-10 20:39:41,789 - test_protocol_conformance - INFO - ✓ 端口 veth01a RSTP已启用
2025-09-10 20:39:42,101 - test_protocol_conformance - INFO - ✓ 端口 veth20b RSTP已启用
2025-09-10 20:39:42,198 - test_protocol_conformance - INFO - 等待RSTP初始化...
2025-09-10 20:39:47,198 - test_protocol_conformance - INFO - === 验证RSTP配置 ===
2025-09-10 20:39:47,251 - test_protocol_conformance - INFO - RSTP状态:
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   c6:2d:01:93:3a:4b
  stp-hello-time  2s
  stp-max-age     6s
  stp-fwd-delay   4s
  This bridge is the root

Bridge ID:
  stp-priority    32768
  stp-system-id   c6:2d:01:93:3a:4b
  stp-hello-time  2s
  stp-max-age     6s
  stp-fwd-delay   4s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  veth20b    Designated Forwarding 2000     128.1
  veth01a    Designated Forwarding 2000     128.2


2025-09-10 20:39:47,252 - test_protocol_conformance - INFO - ✓ 使用RSTP时间参数
2025-09-10 20:39:47,252 - test_protocol_conformance - INFO - === 创建测试拓扑 ===
2025-09-10 20:39:47,252 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 20:39:47,252 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 20:39:47,253 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 20:39:47,253 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 20:39:47,253 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 20:39:47,253 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 20:39:47,253 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 20:39:47,253 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 20:39:47,820 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 20:39:47,821 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 20:39:48,857 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 20:39:48,857 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 20:39:48,858 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 20:39:48,858 - NetworkTopology - INFO - 跳过DUT接口 br3，将通过veth pair连接
2025-09-10 20:39:48,858 - NetworkTopology - INFO - 跳过DUT接口 br4，将通过veth pair连接
2025-09-10 20:39:48,858 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 20:39:48,858 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 20:39:48,940 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 20:39:49,133 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 20:39:49,133 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 20:39:49,133 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 20:39:49,134 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 20:39:49,134 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 20:39:49,134 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 20:39:49,134 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 20:39:49,134 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 20:39:49,610 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 20:39:54,103 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 20:39:54,233 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 20:39:54,233 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 20:39:54,234 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 20:39:54,234 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 20:39:54,234 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 20:39:55,427 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 20:39:56,611 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 20:39:56,612 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 20:39:56,706 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 20:39:56,973 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 20:39:56,974 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 20:39:56,974 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 20:39:56,974 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 20:39:56,974 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 20:39:56,974 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 20:39:56,975 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 20:39:56,975 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 20:39:57,460 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 20:40:01,945 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 20:40:02,070 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 20:40:02,071 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 20:40:02,071 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 20:40:02,071 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 20:40:02,071 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 20:40:03,242 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 20:40:04,461 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 20:40:04,461 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 20:40:04,557 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 20:40:04,824 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 20:40:04,825 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 20:40:04,825 - NetworkTopology - INFO - 创建节点间的veth pair连接...
2025-09-10 20:40:04,825 - NetworkTopology - INFO - 创建连接: DUT:br3 <-> TestNode1:eth0
2025-09-10 20:40:05,615 - NetworkTopology - INFO - ✓ 连接创建成功: veth01a <-> veth01b
2025-09-10 20:40:05,615 - NetworkTopology - INFO - 创建连接: TestNode1:eth2 <-> TestNode2:eth0
2025-09-10 20:40:06,381 - NetworkTopology - INFO - ✓ 连接创建成功: veth12a <-> veth12b
2025-09-10 20:40:06,382 - NetworkTopology - INFO - 创建连接: TestNode2:eth2 <-> DUT:br4
2025-09-10 20:40:07,123 - NetworkTopology - INFO - ✓ 连接创建成功: veth20a <-> veth20b
2025-09-10 20:40:07,123 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 20:40:12,124 - test_protocol_conformance - INFO - === 捕获BPDU ===
2025-09-10 20:40:12,125 - test_protocol_conformance - INFO - 在 SE_ETH2 上捕获BPDU...
2025-09-10 20:40:12,125 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: SE_ETH2, 数量: 10)
2025-09-10 20:40:22,210 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-10 20:40:22,210 - test_protocol_conformance - INFO - 在 veth01a 上捕获BPDU...
2025-09-10 20:40:22,210 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: veth01a, 数量: 10)
2025-09-10 20:40:32,345 - RSTPAnalyzer_DUT - INFO - 捕获到 5 个BPDU包
2025-09-10 20:40:32,345 - test_protocol_conformance - INFO - ✓ 捕获到 5 个BPDU
2025-09-10 20:40:32,346 - test_protocol_conformance - INFO - === 分析BPDU ===
2025-09-10 20:40:32,346 - test_protocol_conformance - INFO - 第一个BPDU信息: {'timestamp': '20:40:25.401378', 'raw': '20:40:25.401378 7e:19:0a:6f:ab:18 > 01:80:c2:00:00:00, 802.3, length 39: LLC, dsap STP (0x42) Individual, ssap STP (0x42) Command, ctrl 0x03: STP 802.1w, Rapid STP, Flags [Proposal, Learn, Forward], bridge-id 8000.86:68:7e:e6:d7:4a.8001, length 36', 'is_rstp': False}
2025-09-10 20:40:32,346 - test_protocol_conformance - INFO - BPDU统计: RSTP=0, STP=5
2025-09-10 20:40:32,346 - test_protocol_conformance - WARNING - 检测到更多STP BPDU
2025-09-10 20:40:32,444 - test_protocol_conformance - INFO - rstp_enable状态: true
2025-09-10 20:40:32,544 - test_protocol_conformance - INFO - stp_enable状态: true
2025-09-10 20:40:32,644 - test_protocol_conformance - WARNING - OVS配置为RSTP但发送STP BPDU，可能是实现限制
2025-09-10 20:40:32,644 - test_protocol_conformance - INFO - 基于配置判断为RSTP
2025-09-10 20:40:32,644 - test_protocol_conformance - INFO - ✓ RSTP协议验证通过（检测到 5 个RSTP BPDU）
2025-09-10 20:40:32,645 - RSTPTest - INFO - 测试完成: test_rstp_protocol_verification (耗时: 53.17秒)
2025-09-10 20:40:32,646 - RSTPTest - INFO - ============================================================

2025-09-10 20:40:32,647 - RSTPTest - INFO - ============================================================
2025-09-10 20:40:32,647 - RSTPTest - INFO - 开始测试: test_alternate_port_verification
2025-09-10 20:40:32,647 - RSTPTest - INFO - ============================================================
2025-09-10 20:40:32,648 - test_protocol_conformance - INFO - 开始Alternate Port验证测试
2025-09-10 20:40:32,648 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 20:40:32,648 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 20:40:32,648 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 20:40:32,649 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 20:40:32,649 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 20:40:32,649 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 20:40:32,649 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 20:40:32,649 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 20:40:33,195 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 20:40:33,195 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 20:40:34,240 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 20:40:34,240 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 20:40:34,241 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 20:40:34,241 - NetworkTopology - INFO - 跳过DUT接口 br3，将通过veth pair连接
2025-09-10 20:40:34,241 - NetworkTopology - INFO - 跳过DUT接口 br4，将通过veth pair连接
2025-09-10 20:40:34,241 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 20:40:34,241 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 20:40:34,324 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 20:40:34,512 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 20:40:34,512 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 20:40:34,512 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 20:40:34,512 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 20:40:34,512 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 20:40:34,513 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 20:40:34,513 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 20:40:34,513 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 20:40:34,989 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 20:40:39,476 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 20:40:39,601 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 20:40:39,601 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 20:40:39,602 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 20:40:39,602 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 20:40:39,602 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 20:40:40,779 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 20:40:41,997 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 20:40:41,997 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 20:40:42,093 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 20:40:42,354 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 20:40:42,354 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 20:40:42,355 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 20:40:42,355 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 20:40:42,355 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 20:40:42,355 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 20:40:42,355 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 20:40:42,355 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 20:40:42,843 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 20:40:47,340 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 20:40:47,467 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 20:40:47,468 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 20:40:47,468 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 20:40:47,468 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 20:40:47,468 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 20:40:48,632 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 20:40:49,857 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 20:40:49,857 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 20:40:49,953 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 20:40:50,220 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 20:40:50,220 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 20:40:50,220 - NetworkTopology - INFO - 创建节点间的veth pair连接...
2025-09-10 20:40:50,221 - NetworkTopology - INFO - 创建连接: DUT:br3 <-> TestNode1:eth0
2025-09-10 20:40:51,032 - NetworkTopology - INFO - ✓ 连接创建成功: veth01a <-> veth01b
2025-09-10 20:40:51,032 - NetworkTopology - INFO - 创建连接: TestNode1:eth2 <-> TestNode2:eth0
2025-09-10 20:40:51,813 - NetworkTopology - INFO - ✓ 连接创建成功: veth12a <-> veth12b
2025-09-10 20:40:51,813 - NetworkTopology - INFO - 创建连接: TestNode2:eth2 <-> DUT:br4
2025-09-10 20:40:52,564 - NetworkTopology - INFO - ✓ 连接创建成功: veth20a <-> veth20b
2025-09-10 20:40:52,565 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 20:40:52,565 - test_protocol_conformance - INFO - 设置网桥优先级
2025-09-10 20:40:53,087 - test_protocol_conformance - INFO - 等待RSTP收敛...
2025-09-10 20:40:53,088 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 20:40:53,506 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 20:40:53,654 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   da:13:6f:20:5f:48
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   da:13:6f:20:5f:48
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  veth01a    Designated Forwarding 2000     128.1
  veth20b    Designated Discarding 2000     128.2


2025-09-10 20:40:53,808 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000da136f205f48
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(veth01a): addr:7e:19:0a:6f:ab:18
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth20b): addr:b6:d0:61:7c:94:22
     config:     0
     state:      0
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:da:13:6f:20:5f:48
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:40:53,809 - RSTPAnalyzer_DUT - INFO - 从ovs-ofctl show提取到dpid: 0000da136f205f48
2025-09-10 20:40:54,114 - RSTPAnalyzer_DUT - INFO - 获取到优先级: 118192
2025-09-10 20:40:54,114 - RSTPAnalyzer_DUT - INFO - 从dpid构造bridge_id: 118192/da:13:6f:20:5f:48
2025-09-10 20:40:54,115 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 118192/da:13:6f:20:5f:48
2025-09-10 20:40:54,579 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 20:40:54,580 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000da136f205f48
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(veth01a): addr:7e:19:0a:6f:ab:18
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth20b): addr:b6:d0:61:7c:94:22
     config:     0
     state:      0
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:da:13:6f:20:5f:48
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:40:54,581 - RSTPAnalyzer_DUT - INFO - 找到端口: veth01a (从行:  1(veth01a): addr:7e:19:0a:6f:ab:18)
2025-09-10 20:40:54,581 - RSTPAnalyzer_DUT - INFO - 找到端口: veth20b (从行:  2(veth20b): addr:b6:d0:61:7c:94:22)
2025-09-10 20:40:54,581 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:da:13:6f:20:5f:48)
2025-09-10 20:40:54,581 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['veth01a', 'veth20b', 'SE_ETH2']
2025-09-10 20:40:54,868 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.78秒
2025-09-10 20:40:55,326 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 20:40:55,481 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   da:13:6f:20:5f:48
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   da:13:6f:20:5f:48
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  veth01a    Designated Forwarding 2000     128.1
  veth20b    Designated Discarding 2000     128.2


2025-09-10 20:40:55,635 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000da136f205f48
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(veth01a): addr:7e:19:0a:6f:ab:18
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth20b): addr:b6:d0:61:7c:94:22
     config:     0
     state:      0
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:da:13:6f:20:5f:48
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:40:55,636 - RSTPAnalyzer_DUT - INFO - 从ovs-ofctl show提取到dpid: 0000da136f205f48
2025-09-10 20:40:55,942 - RSTPAnalyzer_DUT - INFO - 获取到优先级: 118192
2025-09-10 20:40:55,943 - RSTPAnalyzer_DUT - INFO - 从dpid构造bridge_id: 118192/da:13:6f:20:5f:48
2025-09-10 20:40:55,943 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 118192/da:13:6f:20:5f:48
2025-09-10 20:40:56,403 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 20:40:56,404 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000da136f205f48
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(veth01a): addr:7e:19:0a:6f:ab:18
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth20b): addr:b6:d0:61:7c:94:22
     config:     0
     state:      0
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:da:13:6f:20:5f:48
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:40:56,404 - RSTPAnalyzer_DUT - INFO - 找到端口: veth01a (从行:  1(veth01a): addr:7e:19:0a:6f:ab:18)
2025-09-10 20:40:56,405 - RSTPAnalyzer_DUT - INFO - 找到端口: veth20b (从行:  2(veth20b): addr:b6:d0:61:7c:94:22)
2025-09-10 20:40:56,405 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:da:13:6f:20:5f:48)
2025-09-10 20:40:56,405 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['veth01a', 'veth20b', 'SE_ETH2']
2025-09-10 20:40:56,692 - test_protocol_conformance - INFO - DUT桥信息: BridgeInfo(bridge_id='118192/da:13:6f:20:5f:48', root_id='118192/da:13:6f:20:5f:48', root_port='', root_path_cost=0, protocol_version='rstp', hello_time=2, forward_delay=15, max_age=20, topology_changes=0, ports={'veth01a': PortInfo(name='veth01a', role=<PortRole.DESIGNATED: 'designated'>, state=<PortState.FORWARDING: 'forwarding'>, path_cost=0, designated_bridge='', designated_port=''), 'veth20b': PortInfo(name='veth20b', role=<PortRole.DESIGNATED: 'designated'>, state=<PortState.FORWARDING: 'forwarding'>, path_cost=0, designated_bridge='', designated_port=''), 'SE_ETH2': PortInfo(name='SE_ETH2', role=<PortRole.DESIGNATED: 'designated'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')})
2025-09-10 20:40:57,154 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 20:40:57,310 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   da:13:6f:20:5f:48
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   da:13:6f:20:5f:48
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  veth01a    Designated Forwarding 2000     128.1
  veth20b    Designated Forwarding 2000     128.2


2025-09-10 20:40:57,459 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000da136f205f48
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(veth01a): addr:7e:19:0a:6f:ab:18
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth20b): addr:b6:d0:61:7c:94:22
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:da:13:6f:20:5f:48
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:40:57,460 - RSTPAnalyzer_DUT - INFO - 从ovs-ofctl show提取到dpid: 0000da136f205f48
2025-09-10 20:40:57,771 - RSTPAnalyzer_DUT - INFO - 获取到优先级: 118192
2025-09-10 20:40:57,772 - RSTPAnalyzer_DUT - INFO - 从dpid构造bridge_id: 118192/da:13:6f:20:5f:48
2025-09-10 20:40:57,772 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 118192/da:13:6f:20:5f:48
2025-09-10 20:40:58,229 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 20:40:58,229 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000da136f205f48
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(veth01a): addr:7e:19:0a:6f:ab:18
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth20b): addr:b6:d0:61:7c:94:22
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:da:13:6f:20:5f:48
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:40:58,230 - RSTPAnalyzer_DUT - INFO - 找到端口: veth01a (从行:  1(veth01a): addr:7e:19:0a:6f:ab:18)
2025-09-10 20:40:58,230 - RSTPAnalyzer_DUT - INFO - 找到端口: veth20b (从行:  2(veth20b): addr:b6:d0:61:7c:94:22)
2025-09-10 20:40:58,231 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:da:13:6f:20:5f:48)
2025-09-10 20:40:58,231 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['veth01a', 'veth20b', 'SE_ETH2']
2025-09-10 20:40:58,517 - RSTPAnalyzer_DUT - INFO - 根桥检查: bridge_id='118192/da:13:6f:20:5f:48', root_id='118192/da:13:6f:20:5f:48', is_root=True
2025-09-10 20:40:58,517 - test_protocol_conformance - INFO - DUT根桥判断结果: True
2025-09-10 20:40:58,517 - test_protocol_conformance - INFO - DUT桥信息 - bridge_id: '118192/da:13:6f:20:5f:48', root_id: '118192/da:13:6f:20:5f:48'
2025-09-10 20:40:58,941 - RSTPTest - INFO - 测试完成: test_alternate_port_verification (耗时: 26.29秒)
2025-09-10 20:40:58,942 - RSTPTest - INFO - ============================================================

2025-09-10 20:40:58,943 - RSTPTest - INFO - ============================================================
2025-09-10 20:40:58,943 - RSTPTest - INFO - 开始测试: test_port_state_transitions
2025-09-10 20:40:58,943 - RSTPTest - INFO - ============================================================
2025-09-10 20:40:58,944 - test_protocol_conformance - INFO - 开始端口状态转换测试
2025-09-10 20:40:58,944 - NetworkTopology - INFO - 创建RSTP线性拓扑...
2025-09-10 20:40:58,945 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 20:40:58,945 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 20:40:58,945 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 20:40:58,945 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 20:40:58,945 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 20:40:58,946 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 20:40:58,946 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 20:40:59,474 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 20:40:59,475 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 20:41:00,506 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 20:41:00,507 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 20:41:00,507 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br4']
2025-09-10 20:41:00,507 - NetworkTopology - INFO - 跳过DUT接口 br4，将通过veth pair连接
2025-09-10 20:41:00,507 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 20:41:00,507 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 20:41:00,591 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 20:41:00,784 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 20:41:00,784 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 20:41:00,784 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 20:41:00,784 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 20:41:00,785 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 20:41:00,785 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 20:41:00,785 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 20:41:00,785 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 20:41:01,292 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 20:41:05,799 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 20:41:05,927 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 20:41:05,928 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 20:41:05,928 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 20:41:05,928 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 20:41:05,928 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 20:41:07,122 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 20:41:08,315 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 20:41:08,316 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 20:41:08,411 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 20:41:08,677 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 20:41:08,678 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 20:41:08,678 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 20:41:08,678 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 20:41:08,679 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 20:41:08,679 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 20:41:08,679 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 20:41:08,679 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 20:41:09,186 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 20:41:13,689 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 20:41:13,818 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 20:41:13,819 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 20:41:13,819 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 20:41:13,819 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0']
2025-09-10 20:41:13,820 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 20:41:15,010 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 20:41:15,011 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 20:41:15,104 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 20:41:15,366 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 20:41:15,366 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 20:41:15,366 - NetworkTopology - INFO - 线性拓扑创建完成
2025-09-10 20:41:15,749 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-10 20:41:15,749 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 20:41:16,201 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 20:41:16,350 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   02:0d:d6:4e:f6:40
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   02:0d:d6:4e:f6:40
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------


2025-09-10 20:41:16,503 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000020dd64ef640
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 LOCAL(SE_ETH2): addr:02:0d:d6:4e:f6:40
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:41:16,503 - RSTPAnalyzer_DUT - INFO - 从ovs-ofctl show提取到dpid: 0000020dd64ef640
2025-09-10 20:41:16,810 - RSTPAnalyzer_DUT - INFO - 获取到优先级: 118192
2025-09-10 20:41:16,811 - RSTPAnalyzer_DUT - INFO - 从dpid构造bridge_id: 118192/02:0d:d6:4e:f6:40
2025-09-10 20:41:16,811 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 118192/02:0d:d6:4e:f6:40
2025-09-10 20:41:17,284 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 20:41:17,284 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000020dd64ef640
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 LOCAL(SE_ETH2): addr:02:0d:d6:4e:f6:40
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:41:17,285 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:02:0d:d6:4e:f6:40)
2025-09-10 20:41:17,285 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['SE_ETH2']
2025-09-10 20:41:17,380 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.63秒
2025-09-10 20:41:17,841 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 20:41:17,989 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   02:0d:d6:4e:f6:40
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   02:0d:d6:4e:f6:40
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------


2025-09-10 20:41:18,143 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000020dd64ef640
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 LOCAL(SE_ETH2): addr:02:0d:d6:4e:f6:40
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:41:18,144 - RSTPAnalyzer_DUT - INFO - 从ovs-ofctl show提取到dpid: 0000020dd64ef640
2025-09-10 20:41:18,453 - RSTPAnalyzer_DUT - INFO - 获取到优先级: 118192
2025-09-10 20:41:18,453 - RSTPAnalyzer_DUT - INFO - 从dpid构造bridge_id: 118192/02:0d:d6:4e:f6:40
2025-09-10 20:41:18,453 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 118192/02:0d:d6:4e:f6:40
2025-09-10 20:41:18,918 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 20:41:18,919 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000020dd64ef640
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 LOCAL(SE_ETH2): addr:02:0d:d6:4e:f6:40
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:41:18,919 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:02:0d:d6:4e:f6:40)
2025-09-10 20:41:18,919 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['SE_ETH2']
2025-09-10 20:41:19,051 - RSTPTest - INFO - 测试完成: test_port_state_transitions (耗时: 20.11秒)
2025-09-10 20:41:19,051 - RSTPTest - INFO - ============================================================

2025-09-10 20:41:19,053 - RSTPTest - INFO - ============================================================
2025-09-10 20:41:19,053 - RSTPTest - INFO - 开始测试: test_bpdu_propagation_and_keepalive
2025-09-10 20:41:19,053 - RSTPTest - INFO - ============================================================
2025-09-10 20:41:19,054 - test_protocol_conformance - INFO - 开始BPDU传播和保活机制测试
2025-09-10 20:41:19,054 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 20:41:19,054 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 20:41:19,054 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 20:41:19,054 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 20:41:19,055 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 20:41:19,055 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 20:41:19,055 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 20:41:19,055 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 20:41:19,546 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 20:41:19,547 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 20:41:20,572 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 20:41:20,572 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 20:41:20,572 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 20:41:20,572 - NetworkTopology - INFO - 跳过DUT接口 br3，将通过veth pair连接
2025-09-10 20:41:20,572 - NetworkTopology - INFO - 跳过DUT接口 br4，将通过veth pair连接
2025-09-10 20:41:20,573 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 20:41:20,573 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 20:41:20,655 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 20:41:20,847 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 20:41:20,847 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 20:41:20,848 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 20:41:20,848 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 20:41:20,848 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 20:41:20,848 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 20:41:20,849 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 20:41:20,849 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 20:41:21,353 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 20:41:25,845 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 20:41:25,969 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 20:41:25,969 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 20:41:25,970 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 20:41:25,970 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 20:41:25,970 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 20:41:27,159 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 20:41:28,360 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 20:41:28,360 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 20:41:28,456 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 20:41:28,722 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 20:41:28,722 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 20:41:28,722 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 20:41:28,722 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 20:41:28,723 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 20:41:28,723 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 20:41:28,723 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 20:41:28,723 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 20:41:29,220 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 20:41:33,739 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 20:41:33,864 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 20:41:33,865 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 20:41:33,865 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 20:41:33,865 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 20:41:33,865 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 20:41:35,043 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 20:41:36,248 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 20:41:36,248 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 20:41:36,344 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 20:41:36,608 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 20:41:36,609 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 20:41:36,609 - NetworkTopology - INFO - 创建节点间的veth pair连接...
2025-09-10 20:41:36,609 - NetworkTopology - INFO - 创建连接: DUT:br3 <-> TestNode1:eth0
2025-09-10 20:41:37,495 - NetworkTopology - INFO - ✓ 连接创建成功: veth01a <-> veth01b
2025-09-10 20:41:37,495 - NetworkTopology - INFO - 创建连接: TestNode1:eth2 <-> TestNode2:eth0
2025-09-10 20:41:38,263 - NetworkTopology - INFO - ✓ 连接创建成功: veth12a <-> veth12b
2025-09-10 20:41:38,264 - NetworkTopology - INFO - 创建连接: TestNode2:eth2 <-> DUT:br4
2025-09-10 20:41:39,025 - NetworkTopology - INFO - ✓ 连接创建成功: veth20a <-> veth20b
2025-09-10 20:41:39,025 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 20:41:39,544 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-10 20:41:39,544 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 20:41:39,953 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 20:41:40,106 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   fe:5d:03:89:93:42
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   fe:5d:03:89:93:42
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  veth01a    Designated Forwarding 2000     128.1
  veth20b    Designated Discarding 2000     128.2


2025-09-10 20:41:40,258 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000fe5d03899342
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(veth01a): addr:7e:19:0a:6f:ab:18
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth20b): addr:b6:d0:61:7c:94:22
     config:     0
     state:      0
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:fe:5d:03:89:93:42
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:41:40,259 - RSTPAnalyzer_DUT - INFO - 从ovs-ofctl show提取到dpid: 0000fe5d03899342
2025-09-10 20:41:40,566 - RSTPAnalyzer_DUT - INFO - 获取到优先级: 118192
2025-09-10 20:41:40,566 - RSTPAnalyzer_DUT - INFO - 从dpid构造bridge_id: 118192/fe:5d:03:89:93:42
2025-09-10 20:41:40,566 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 118192/fe:5d:03:89:93:42
2025-09-10 20:41:41,027 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 20:41:41,027 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000fe5d03899342
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(veth01a): addr:7e:19:0a:6f:ab:18
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth20b): addr:b6:d0:61:7c:94:22
     config:     0
     state:      0
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:fe:5d:03:89:93:42
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:41:41,029 - RSTPAnalyzer_DUT - INFO - 找到端口: veth01a (从行:  1(veth01a): addr:7e:19:0a:6f:ab:18)
2025-09-10 20:41:41,029 - RSTPAnalyzer_DUT - INFO - 找到端口: veth20b (从行:  2(veth20b): addr:b6:d0:61:7c:94:22)
2025-09-10 20:41:41,029 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:fe:5d:03:89:93:42)
2025-09-10 20:41:41,029 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['veth01a', 'veth20b', 'SE_ETH2']
2025-09-10 20:41:41,316 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.77秒
2025-09-10 20:41:41,769 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 20:41:41,921 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   fe:5d:03:89:93:42
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   fe:5d:03:89:93:42
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  veth01a    Designated Forwarding 2000     128.1
  veth20b    Designated Discarding 2000     128.2


2025-09-10 20:41:42,075 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000fe5d03899342
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(veth01a): addr:7e:19:0a:6f:ab:18
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth20b): addr:b6:d0:61:7c:94:22
     config:     0
     state:      0
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:fe:5d:03:89:93:42
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:41:42,076 - RSTPAnalyzer_DUT - INFO - 从ovs-ofctl show提取到dpid: 0000fe5d03899342
2025-09-10 20:41:42,571 - RSTPAnalyzer_DUT - INFO - 获取到优先级: 118192
2025-09-10 20:41:42,571 - RSTPAnalyzer_DUT - INFO - 从dpid构造bridge_id: 118192/fe:5d:03:89:93:42
2025-09-10 20:41:42,572 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 118192/fe:5d:03:89:93:42
2025-09-10 20:41:43,134 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 20:41:43,135 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000fe5d03899342
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(veth01a): addr:7e:19:0a:6f:ab:18
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth20b): addr:b6:d0:61:7c:94:22
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:fe:5d:03:89:93:42
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:41:43,135 - RSTPAnalyzer_DUT - INFO - 找到端口: veth01a (从行:  1(veth01a): addr:7e:19:0a:6f:ab:18)
2025-09-10 20:41:43,136 - RSTPAnalyzer_DUT - INFO - 找到端口: veth20b (从行:  2(veth20b): addr:b6:d0:61:7c:94:22)
2025-09-10 20:41:43,136 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:fe:5d:03:89:93:42)
2025-09-10 20:41:43,136 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['veth01a', 'veth20b', 'SE_ETH2']
2025-09-10 20:41:43,424 - test_protocol_conformance - INFO - Hello Time: 2秒
2025-09-10 20:41:43,424 - test_protocol_conformance - INFO - 开始捕获BPDU报文
2025-09-10 20:41:43,424 - test_protocol_conformance - INFO - 在端口veth01a上开始BPDU捕获
2025-09-10 20:41:43,425 - test_protocol_conformance - WARNING - 端口veth01aBPDU捕获失败: RSTPAnalyzer.capture_bpdu() got an unexpected keyword argument 'duration'
2025-09-10 20:41:43,425 - test_protocol_conformance - INFO - 在端口veth20b上开始BPDU捕获
2025-09-10 20:41:43,425 - test_protocol_conformance - WARNING - 端口veth20bBPDU捕获失败: RSTPAnalyzer.capture_bpdu() got an unexpected keyword argument 'duration'
2025-09-10 20:41:43,425 - test_protocol_conformance - INFO - 总共捕获到0个BPDU
2025-09-10 20:41:43,462 - RSTPTest - INFO - 测试完成: test_bpdu_propagation_and_keepalive (耗时: 24.41秒)
2025-09-10 20:41:43,463 - RSTPTest - INFO - ============================================================

2025-09-10 20:41:43,464 - RSTPTest - INFO - ============================================================
2025-09-10 20:41:43,464 - RSTPTest - INFO - 开始测试: test_disabled_port_exclusion
2025-09-10 20:41:43,464 - RSTPTest - INFO - ============================================================
2025-09-10 20:41:43,465 - test_protocol_conformance - INFO - 开始禁用端口排除测试
2025-09-10 20:41:43,465 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 20:41:43,465 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 20:41:43,465 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 20:41:43,465 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 20:41:43,466 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 20:41:43,466 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 20:41:43,466 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 20:41:43,466 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 20:41:43,982 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 20:41:43,982 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 20:41:45,019 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 20:41:45,019 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 20:41:45,020 - NetworkTopology - INFO - 为 DUT 准备添加接口: ['br3', 'br4']
2025-09-10 20:41:45,020 - NetworkTopology - INFO - 跳过DUT接口 br3，将通过veth pair连接
2025-09-10 20:41:45,020 - NetworkTopology - INFO - 跳过DUT接口 br4，将通过veth pair连接
2025-09-10 20:41:45,020 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 20:41:45,020 - NetworkTopology - INFO - 启动 DUT 的网桥 SE_ETH2...
2025-09-10 20:41:45,102 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 20:41:45,298 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 20:41:45,299 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 20:41:45,299 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 20:41:45,299 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 20:41:45,299 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 20:41:45,299 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 20:41:45,300 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 20:41:45,300 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 20:41:45,793 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 20:41:50,300 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 20:41:50,428 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 20:41:50,428 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 20:41:50,428 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 20:41:50,428 - NetworkTopology - INFO - 为 TestNode1 准备添加接口: ['eth0', 'eth2']
2025-09-10 20:41:50,429 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 20:41:51,605 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 20:41:52,800 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 20:41:52,800 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 20:41:52,897 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 20:41:53,158 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 20:41:53,159 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 20:41:53,159 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 20:41:53,159 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 20:41:53,159 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 20:41:53,159 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 20:41:53,159 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 20:41:53,160 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 20:41:53,648 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 20:41:58,148 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 20:41:58,276 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 20:41:58,276 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 20:41:58,276 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 20:41:58,277 - NetworkTopology - INFO - 为 TestNode2 准备添加接口: ['eth0', 'eth2']
2025-09-10 20:41:58,277 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 20:41:59,447 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 20:42:00,676 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 20:42:00,676 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 20:42:00,772 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 20:42:01,032 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 20:42:01,032 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 20:42:01,033 - NetworkTopology - INFO - 创建节点间的veth pair连接...
2025-09-10 20:42:01,033 - NetworkTopology - INFO - 创建连接: DUT:br3 <-> TestNode1:eth0
2025-09-10 20:42:01,808 - NetworkTopology - INFO - ✓ 连接创建成功: veth01a <-> veth01b
2025-09-10 20:42:01,808 - NetworkTopology - INFO - 创建连接: TestNode1:eth2 <-> TestNode2:eth0
2025-09-10 20:42:02,572 - NetworkTopology - INFO - ✓ 连接创建成功: veth12a <-> veth12b
2025-09-10 20:42:02,573 - NetworkTopology - INFO - 创建连接: TestNode2:eth2 <-> DUT:br4
2025-09-10 20:42:03,325 - NetworkTopology - INFO - ✓ 连接创建成功: veth20a <-> veth20b
2025-09-10 20:42:03,326 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 20:42:03,705 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-10 20:42:03,705 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 20:42:04,165 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 20:42:04,317 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   ea:11:04:54:a8:49
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   ea:11:04:54:a8:49
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  veth01a    Designated Discarding 2000     128.1
  veth20b    Designated Discarding 2000     128.2


2025-09-10 20:42:04,470 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000ea110454a849
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(veth01a): addr:7e:19:0a:6f:ab:18
     config:     0
     state:      0
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth20b): addr:b6:d0:61:7c:94:22
     config:     0
     state:      0
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:ea:11:04:54:a8:49
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:42:04,471 - RSTPAnalyzer_DUT - INFO - 从ovs-ofctl show提取到dpid: 0000ea110454a849
2025-09-10 20:42:04,779 - RSTPAnalyzer_DUT - INFO - 获取到优先级: 118192
2025-09-10 20:42:04,779 - RSTPAnalyzer_DUT - INFO - 从dpid构造bridge_id: 118192/ea:11:04:54:a8:49
2025-09-10 20:42:04,779 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 118192/ea:11:04:54:a8:49
2025-09-10 20:42:05,238 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 20:42:05,238 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000ea110454a849
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(veth01a): addr:7e:19:0a:6f:ab:18
     config:     0
     state:      0
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth20b): addr:b6:d0:61:7c:94:22
     config:     0
     state:      0
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:ea:11:04:54:a8:49
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:42:05,239 - RSTPAnalyzer_DUT - INFO - 找到端口: veth01a (从行:  1(veth01a): addr:7e:19:0a:6f:ab:18)
2025-09-10 20:42:05,240 - RSTPAnalyzer_DUT - INFO - 找到端口: veth20b (从行:  2(veth20b): addr:b6:d0:61:7c:94:22)
2025-09-10 20:42:05,240 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:ea:11:04:54:a8:49)
2025-09-10 20:42:05,240 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['veth01a', 'veth20b', 'SE_ETH2']
2025-09-10 20:42:05,527 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.82秒
2025-09-10 20:42:05,989 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 20:42:06,145 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   ea:11:04:54:a8:49
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   ea:11:04:54:a8:49
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  veth01a    Designated Discarding 2000     128.1
  veth20b    Designated Discarding 2000     128.2


2025-09-10 20:42:06,299 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000ea110454a849
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(veth01a): addr:7e:19:0a:6f:ab:18
     config:     0
     state:      0
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth20b): addr:b6:d0:61:7c:94:22
     config:     0
     state:      0
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:ea:11:04:54:a8:49
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:42:06,300 - RSTPAnalyzer_DUT - INFO - 从ovs-ofctl show提取到dpid: 0000ea110454a849
2025-09-10 20:42:06,610 - RSTPAnalyzer_DUT - INFO - 获取到优先级: 118192
2025-09-10 20:42:06,610 - RSTPAnalyzer_DUT - INFO - 从dpid构造bridge_id: 118192/ea:11:04:54:a8:49
2025-09-10 20:42:06,610 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 118192/ea:11:04:54:a8:49
2025-09-10 20:42:07,074 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 20:42:07,074 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000ea110454a849
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(veth01a): addr:7e:19:0a:6f:ab:18
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth20b): addr:b6:d0:61:7c:94:22
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:ea:11:04:54:a8:49
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:42:07,075 - RSTPAnalyzer_DUT - INFO - 找到端口: veth01a (从行:  1(veth01a): addr:7e:19:0a:6f:ab:18)
2025-09-10 20:42:07,075 - RSTPAnalyzer_DUT - INFO - 找到端口: veth20b (从行:  2(veth20b): addr:b6:d0:61:7c:94:22)
2025-09-10 20:42:07,075 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:ea:11:04:54:a8:49)
2025-09-10 20:42:07,075 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['veth01a', 'veth20b', 'SE_ETH2']
2025-09-10 20:42:07,367 - test_protocol_conformance - INFO - 所有端口信息: {'veth01a': PortInfo(name='veth01a', role=<PortRole.DESIGNATED: 'designated'>, state=<PortState.FORWARDING: 'forwarding'>, path_cost=0, designated_bridge='', designated_port=''), 'veth20b': PortInfo(name='veth20b', role=<PortRole.DESIGNATED: 'designated'>, state=<PortState.FORWARDING: 'forwarding'>, path_cost=0, designated_bridge='', designated_port=''), 'SE_ETH2': PortInfo(name='SE_ETH2', role=<PortRole.DESIGNATED: 'designated'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')}
2025-09-10 20:42:07,523 - test_protocol_conformance - INFO - RSTP show输出 (code=0): 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   ea:11:04:54:a8:49
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   ea:11:04:54:a8:49
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  veth01a    Designated Forwarding 2000     128.1
  veth20b    Designated Forwarding 2000     128.2


2025-09-10 20:42:07,524 - test_protocol_conformance - INFO - 初始活动端口: ['veth01a', 'veth20b']
2025-09-10 20:42:07,524 - test_protocol_conformance - INFO - 选择端口veth01a进行禁用测试
2025-09-10 20:42:07,524 - test_protocol_conformance - INFO - 禁用端口veth01a
2025-09-10 20:42:07,524 - FaultInjector_DUT - INFO - 断开链路: veth01a
2025-09-10 20:42:07,695 - FaultInjector_DUT - INFO - 链路已断开: veth01a
2025-09-10 20:42:07,696 - test_protocol_conformance - INFO - 禁用命令结果: ('', '', 0)
2025-09-10 20:42:07,830 - test_protocol_conformance - INFO - 端口veth01a配置: stdout='1
1
{}
', stderr='', code=0
2025-09-10 20:42:23,249 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 20:42:23,400 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   ea:11:04:54:a8:49
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   ea:11:04:54:a8:49
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  veth01a    Disabled   Discarding 2000     128.1
  veth20b    Designated Forwarding 2000     128.2


2025-09-10 20:42:23,554 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000ea110454a849
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(veth01a): addr:7e:19:0a:6f:ab:18
     config:     PORT_DOWN
     state:      LINK_DOWN
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth20b): addr:b6:d0:61:7c:94:22
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:ea:11:04:54:a8:49
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:42:23,555 - RSTPAnalyzer_DUT - INFO - 从ovs-ofctl show提取到dpid: 0000ea110454a849
2025-09-10 20:42:23,862 - RSTPAnalyzer_DUT - INFO - 获取到优先级: 118192
2025-09-10 20:42:23,862 - RSTPAnalyzer_DUT - INFO - 从dpid构造bridge_id: 118192/ea:11:04:54:a8:49
2025-09-10 20:42:23,862 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 118192/ea:11:04:54:a8:49
2025-09-10 20:42:24,326 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 20:42:24,326 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000ea110454a849
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(veth01a): addr:7e:19:0a:6f:ab:18
     config:     PORT_DOWN
     state:      LINK_DOWN
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth20b): addr:b6:d0:61:7c:94:22
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:ea:11:04:54:a8:49
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:42:24,327 - RSTPAnalyzer_DUT - INFO - 找到端口: veth01a (从行:  1(veth01a): addr:7e:19:0a:6f:ab:18)
2025-09-10 20:42:24,327 - RSTPAnalyzer_DUT - INFO - 找到端口: veth20b (从行:  2(veth20b): addr:b6:d0:61:7c:94:22)
2025-09-10 20:42:24,327 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:ea:11:04:54:a8:49)
2025-09-10 20:42:24,327 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['veth01a', 'veth20b', 'SE_ETH2']
2025-09-10 20:42:24,615 - test_protocol_conformance - INFO - 禁用后所有端口状态: [('veth01a', 'disabled'), ('veth20b', 'forwarding'), ('SE_ETH2', 'disabled')]
2025-09-10 20:42:24,615 - test_protocol_conformance - INFO - 端口veth01a状态: disabled, 角色: designated
2025-09-10 20:42:24,615 - test_protocol_conformance - INFO - 禁用后活动端口: ['veth20b']
2025-09-10 20:42:24,616 - test_protocol_conformance - INFO - 活动端口数量: 1, 初始活动端口数量: 2
2025-09-10 20:42:24,616 - test_protocol_conformance - INFO - 禁用后端口角色分布: {<PortRole.DESIGNATED: 'designated'>: ['veth20b']}
2025-09-10 20:42:25,073 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 20:42:25,228 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   ea:11:04:54:a8:49
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   ea:11:04:54:a8:49
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  veth01a    Disabled   Discarding 2000     128.1
  veth20b    Designated Forwarding 2000     128.2


2025-09-10 20:42:25,382 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000ea110454a849
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(veth01a): addr:7e:19:0a:6f:ab:18
     config:     PORT_DOWN
     state:      LINK_DOWN
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth20b): addr:b6:d0:61:7c:94:22
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:ea:11:04:54:a8:49
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:42:25,383 - RSTPAnalyzer_DUT - INFO - 从ovs-ofctl show提取到dpid: 0000ea110454a849
2025-09-10 20:42:25,686 - RSTPAnalyzer_DUT - INFO - 获取到优先级: 118192
2025-09-10 20:42:25,686 - RSTPAnalyzer_DUT - INFO - 从dpid构造bridge_id: 118192/ea:11:04:54:a8:49
2025-09-10 20:42:25,686 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 118192/ea:11:04:54:a8:49
2025-09-10 20:42:26,149 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 20:42:26,150 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000ea110454a849
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(veth01a): addr:7e:19:0a:6f:ab:18
     config:     PORT_DOWN
     state:      LINK_DOWN
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth20b): addr:b6:d0:61:7c:94:22
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:ea:11:04:54:a8:49
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:42:26,151 - RSTPAnalyzer_DUT - INFO - 找到端口: veth01a (从行:  1(veth01a): addr:7e:19:0a:6f:ab:18)
2025-09-10 20:42:26,151 - RSTPAnalyzer_DUT - INFO - 找到端口: veth20b (从行:  2(veth20b): addr:b6:d0:61:7c:94:22)
2025-09-10 20:42:26,151 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:ea:11:04:54:a8:49)
2025-09-10 20:42:26,152 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['veth01a', 'veth20b', 'SE_ETH2']
2025-09-10 20:42:26,439 - RSTPAnalyzer_DUT - INFO - 根桥检查: bridge_id='118192/ea:11:04:54:a8:49', root_id='118192/ea:11:04:54:a8:49', is_root=True
2025-09-10 20:42:26,439 - test_protocol_conformance - INFO - 重新启用端口veth01a
2025-09-10 20:42:26,439 - FaultInjector_DUT - INFO - 恢复链路: veth01a
2025-09-10 20:42:26,586 - FaultInjector_DUT - INFO - 链路已恢复: veth01a
2025-09-10 20:42:42,008 - RSTPAnalyzer_DUT - WARNING - stp/show SE_ETH2 命令失败，返回码: 2
2025-09-10 20:42:42,160 - RSTPAnalyzer_DUT - INFO - rstp/show SE_ETH2 输出: 1
1
---- SE_ETH2 ----
Root ID:
  stp-priority    8192
  stp-system-id   ea:11:04:54:a8:49
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    8192
  stp-system-id   ea:11:04:54:a8:49
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  veth01a    Designated Forwarding 2000     128.1
  veth20b    Designated Forwarding 2000     128.2


2025-09-10 20:42:42,365 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000ea110454a849
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(veth01a): addr:7e:19:0a:6f:ab:18
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth20b): addr:b6:d0:61:7c:94:22
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:ea:11:04:54:a8:49
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:42:42,366 - RSTPAnalyzer_DUT - INFO - 从ovs-ofctl show提取到dpid: 0000ea110454a849
2025-09-10 20:42:42,726 - RSTPAnalyzer_DUT - INFO - 获取到优先级: 118192
2025-09-10 20:42:42,727 - RSTPAnalyzer_DUT - INFO - 从dpid构造bridge_id: 118192/ea:11:04:54:a8:49
2025-09-10 20:42:42,727 - RSTPAnalyzer_DUT - INFO - 设置root_id为自身: 118192/ea:11:04:54:a8:49
2025-09-10 20:42:43,194 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 返回码: 0
2025-09-10 20:42:43,194 - RSTPAnalyzer_DUT - INFO - ovs-ofctl show SE_ETH2 输出: 1
1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000ea110454a849
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(veth01a): addr:7e:19:0a:6f:ab:18
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth20b): addr:b6:d0:61:7c:94:22
     config:     0
     state:      STP_FORWARD
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(SE_ETH2): addr:ea:11:04:54:a8:49
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0

2025-09-10 20:42:43,195 - RSTPAnalyzer_DUT - INFO - 找到端口: veth01a (从行:  1(veth01a): addr:7e:19:0a:6f:ab:18)
2025-09-10 20:42:43,195 - RSTPAnalyzer_DUT - INFO - 找到端口: veth20b (从行:  2(veth20b): addr:b6:d0:61:7c:94:22)
2025-09-10 20:42:43,195 - RSTPAnalyzer_DUT - INFO - 找到端口: SE_ETH2 (从行:  LOCAL(SE_ETH2): addr:ea:11:04:54:a8:49)
2025-09-10 20:42:43,195 - RSTPAnalyzer_DUT - INFO - 解析到的端口名称: ['veth01a', 'veth20b', 'SE_ETH2']
2025-09-10 20:42:43,483 - test_protocol_conformance - INFO - ✓ 端口veth01a已重新启用，状态: forwarding
2025-09-10 20:42:43,483 - test_protocol_conformance - INFO - ✓ 禁用端口排除测试完成
2025-09-10 20:42:43,484 - RSTPTest - INFO - 测试完成: test_disabled_port_exclusion (耗时: 60.02秒)
2025-09-10 20:42:43,485 - RSTPTest - INFO - ============================================================

2025-09-10 20:42:43,486 - RSTPTest - INFO - ============================================================
2025-09-10 20:42:43,486 - RSTPTest - INFO - 开始测试: test_topology_change_notification
2025-09-10 20:42:43,487 - RSTPTest - INFO - ============================================================
2025-09-10 20:42:43,487 - test_protocol_conformance - INFO - 开始拓扑变更通知测试
2025-09-10 20:42:43,487 - test_protocol_conformance - INFO - === 步骤1: 创建多网桥环形拓扑 ===
2025-09-10 20:42:44,326 - test_protocol_conformance - INFO - 创建网桥 SE_ETH2 (优先级: 32768)
2025-09-10 20:42:44,750 - test_protocol_conformance - INFO - 创建网桥 rstp2 (优先级: 36864)
2025-09-10 20:42:45,174 - test_protocol_conformance - INFO - 创建网桥 rstp3 (优先级: 40960)
2025-09-10 20:42:45,890 - test_protocol_conformance - INFO - ✓ 连接 rstp1 <-> rstp2
2025-09-10 20:42:46,591 - test_protocol_conformance - INFO - ✓ 连接 rstp2 <-> rstp3
2025-09-10 20:42:47,312 - test_protocol_conformance - INFO - ✓ 连接 rstp3 <-> rstp1
2025-09-10 20:42:47,312 - test_protocol_conformance - INFO - 等待RSTP初始收敛...
2025-09-10 20:42:57,312 - test_protocol_conformance - INFO - === 步骤2: 验证初始RSTP状态 ===
2025-09-10 20:42:57,368 - test_protocol_conformance - INFO - 
SE_ETH2 初始RSTP状态:
2025-09-10 20:42:57,368 - test_protocol_conformance - INFO -   ---- SE_ETH2 ----
2025-09-10 20:42:57,369 - test_protocol_conformance - INFO -   Root ID:
2025-09-10 20:42:57,369 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-10 20:42:57,369 - test_protocol_conformance - INFO -     stp-system-id   9e:cb:76:cd:25:4c
2025-09-10 20:42:57,369 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 20:42:57,369 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 20:42:57,370 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 20:42:57,370 - test_protocol_conformance - INFO -     This bridge is the root
2025-09-10 20:42:57,370 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-10 20:42:57,370 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-10 20:42:57,370 - test_protocol_conformance - INFO -     stp-system-id   9e:cb:76:cd:25:4c
2025-09-10 20:42:57,370 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 20:42:57,370 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 20:42:57,371 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 20:42:57,371 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 20:42:57,371 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-10 20:42:57,371 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-10 20:42:57,472 - test_protocol_conformance - INFO - 
rstp2 初始RSTP状态:
2025-09-10 20:42:57,472 - test_protocol_conformance - INFO -   ---- rstp2 ----
2025-09-10 20:42:57,473 - test_protocol_conformance - INFO -   Root ID:
2025-09-10 20:42:57,473 - test_protocol_conformance - INFO -     stp-priority    36864
2025-09-10 20:42:57,473 - test_protocol_conformance - INFO -     stp-system-id   52:fb:2f:de:17:45
2025-09-10 20:42:57,473 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 20:42:57,473 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 20:42:57,473 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 20:42:57,474 - test_protocol_conformance - INFO -     This bridge is the root
2025-09-10 20:42:57,474 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-10 20:42:57,474 - test_protocol_conformance - INFO -     stp-priority    36864
2025-09-10 20:42:57,474 - test_protocol_conformance - INFO -     stp-system-id   52:fb:2f:de:17:45
2025-09-10 20:42:57,474 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 20:42:57,474 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 20:42:57,475 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 20:42:57,475 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 20:42:57,475 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-10 20:42:57,475 - test_protocol_conformance - INFO -     veth12b    Designated Forwarding 2000     128.1
2025-09-10 20:42:57,475 - test_protocol_conformance - INFO -     veth23a    Designated Forwarding 2000     128.2
2025-09-10 20:42:57,475 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-10 20:42:57,475 - test_protocol_conformance - INFO -   → 有转发端口
2025-09-10 20:42:57,568 - test_protocol_conformance - INFO - 
rstp3 初始RSTP状态:
2025-09-10 20:42:57,568 - test_protocol_conformance - INFO -   ---- rstp3 ----
2025-09-10 20:42:57,568 - test_protocol_conformance - INFO -   Root ID:
2025-09-10 20:42:57,569 - test_protocol_conformance - INFO -     stp-priority    36864
2025-09-10 20:42:57,569 - test_protocol_conformance - INFO -     stp-system-id   52:fb:2f:de:17:45
2025-09-10 20:42:57,569 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 20:42:57,569 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 20:42:57,569 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 20:42:57,569 - test_protocol_conformance - INFO -     root-port       veth23b
2025-09-10 20:42:57,569 - test_protocol_conformance - INFO -     root-path-cost  2000
2025-09-10 20:42:57,570 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-10 20:42:57,570 - test_protocol_conformance - INFO -     stp-priority    40960
2025-09-10 20:42:57,570 - test_protocol_conformance - INFO -     stp-system-id   da:de:4e:71:2e:48
2025-09-10 20:42:57,570 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 20:42:57,570 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 20:42:57,570 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 20:42:57,570 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 20:42:57,571 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-10 20:42:57,571 - test_protocol_conformance - INFO -     veth23b    Root       Forwarding 2000     128.1
2025-09-10 20:42:57,571 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-10 20:42:57,571 - test_protocol_conformance - INFO -   → 有转发端口
2025-09-10 20:42:57,571 - test_protocol_conformance - INFO - === 步骤3: 分析网络拓扑 ===
2025-09-10 20:42:57,571 - test_protocol_conformance - INFO - ✓ SE_ETH2 是根桥
2025-09-10 20:42:57,572 - test_protocol_conformance - INFO - ✓ rstp2 是根桥
2025-09-10 20:42:57,572 - test_protocol_conformance - INFO - === 步骤4: 触发拓扑变更 ===
2025-09-10 20:42:57,572 - test_protocol_conformance - INFO - 断开活动端口: veth31a
2025-09-10 20:43:02,932 - test_protocol_conformance - INFO - ✓ rstp3 状态已变化
2025-09-10 20:43:08,026 - test_protocol_conformance - INFO - === 步骤5: 验证拓扑变更 ===
2025-09-10 20:43:08,078 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: veth12a, 数量: 5)
2025-09-10 20:43:13,222 - RSTPAnalyzer_DUT - INFO - 捕获到 2 个BPDU包
2025-09-10 20:43:13,223 - test_protocol_conformance - INFO - 在 veth12a 捕获到 2 个BPDU
2025-09-10 20:43:13,223 - test_protocol_conformance - INFO - === 步骤6: 最终验证 ===
2025-09-10 20:43:13,223 - test_protocol_conformance - INFO - ✓ 测试通过：检测到拓扑变更
2025-09-10 20:43:13,320 - test_protocol_conformance - INFO - 
========== SE_ETH2 最终状态 ==========
2025-09-10 20:43:13,321 - test_protocol_conformance - INFO - ---- SE_ETH2 ----
2025-09-10 20:43:13,321 - test_protocol_conformance - INFO - Root ID:
2025-09-10 20:43:13,321 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-10 20:43:13,321 - test_protocol_conformance - INFO -   stp-system-id   9e:cb:76:cd:25:4c
2025-09-10 20:43:13,321 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 20:43:13,322 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 20:43:13,322 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 20:43:13,322 - test_protocol_conformance - INFO -   This bridge is the root
2025-09-10 20:43:13,322 - test_protocol_conformance - INFO - Bridge ID:
2025-09-10 20:43:13,322 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-10 20:43:13,322 - test_protocol_conformance - INFO -   stp-system-id   9e:cb:76:cd:25:4c
2025-09-10 20:43:13,323 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 20:43:13,323 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 20:43:13,323 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 20:43:13,323 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 20:43:13,323 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-10 20:43:13,420 - test_protocol_conformance - INFO - 
========== rstp2 最终状态 ==========
2025-09-10 20:43:13,420 - test_protocol_conformance - INFO - ---- rstp2 ----
2025-09-10 20:43:13,420 - test_protocol_conformance - INFO - Root ID:
2025-09-10 20:43:13,421 - test_protocol_conformance - INFO -   stp-priority    36864
2025-09-10 20:43:13,421 - test_protocol_conformance - INFO -   stp-system-id   52:fb:2f:de:17:45
2025-09-10 20:43:13,421 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 20:43:13,421 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 20:43:13,422 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 20:43:13,422 - test_protocol_conformance - INFO -   This bridge is the root
2025-09-10 20:43:13,422 - test_protocol_conformance - INFO - Bridge ID:
2025-09-10 20:43:13,422 - test_protocol_conformance - INFO -   stp-priority    36864
2025-09-10 20:43:13,423 - test_protocol_conformance - INFO -   stp-system-id   52:fb:2f:de:17:45
2025-09-10 20:43:13,423 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 20:43:13,423 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 20:43:13,423 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 20:43:13,423 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 20:43:13,423 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-10 20:43:13,423 - test_protocol_conformance - INFO -   veth12b    Designated Forwarding 2000     128.1
2025-09-10 20:43:13,424 - test_protocol_conformance - INFO -   veth23a    Designated Forwarding 2000     128.2
2025-09-10 20:43:13,515 - test_protocol_conformance - INFO - 
========== rstp3 最终状态 ==========
2025-09-10 20:43:13,516 - test_protocol_conformance - INFO - ---- rstp3 ----
2025-09-10 20:43:13,516 - test_protocol_conformance - INFO - Root ID:
2025-09-10 20:43:13,516 - test_protocol_conformance - INFO -   stp-priority    36864
2025-09-10 20:43:13,516 - test_protocol_conformance - INFO -   stp-system-id   52:fb:2f:de:17:45
2025-09-10 20:43:13,517 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 20:43:13,517 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 20:43:13,517 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 20:43:13,517 - test_protocol_conformance - INFO -   root-port       veth23b
2025-09-10 20:43:13,517 - test_protocol_conformance - INFO -   root-path-cost  2000
2025-09-10 20:43:13,518 - test_protocol_conformance - INFO - Bridge ID:
2025-09-10 20:43:13,518 - test_protocol_conformance - INFO -   stp-priority    40960
2025-09-10 20:43:13,518 - test_protocol_conformance - INFO -   stp-system-id   da:de:4e:71:2e:48
2025-09-10 20:43:13,518 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 20:43:13,518 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 20:43:13,518 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 20:43:13,519 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 20:43:13,519 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-10 20:43:13,519 - test_protocol_conformance - INFO -   veth23b    Root       Forwarding 2000     128.1
2025-09-10 20:43:13,519 - test_protocol_conformance - INFO -   veth31a    Designated Forwarding 2000     128.2
2025-09-10 20:43:13,519 - test_protocol_conformance - INFO - 
=== 诊断信息 ===
2025-09-10 20:43:13,616 - test_protocol_conformance - INFO - 系统日志中的STP/RSTP信息:
2025-09-10 20:43:13,616 - test_protocol_conformance - INFO - [552146.670870] rstp2: entered promiscuous mode
[552147.094435] rstp3: entered promiscuous mode

2025-09-10 20:43:13,714 - test_protocol_conformance - INFO - OVS日志中的拓扑变更信息:
2025-09-10 20:43:13,714 - test_protocol_conformance - INFO - 2025-09-10T12:43:15.798Z|00072|rstp_sm(handler3736)|DBG|rstp3, port 1: Port_receive_sm 4 -> 3
2025-09-10T12:43:15.798Z|00073|rstp_sm(handler3736)|DBG|rstp3: move_rstp()
2025-09-10T12:43:15.798Z|00074|rstp_sm(handler3736)|DBG|rstp3, port 1: Port_receive_sm 3 -> 4
2025-09-10T12:43:15.798Z|00075|rstp_sm(handler3736)|DBG|rstp3, port 1: Port_information_sm 8 -> 9
2025-09-10T12:43:15.798Z|00076|rstp_sm(handler3736)|DBG|rstp3: move_rstp()
2025-09-10T12:43:15.798Z|00077|rstp_sm(handler3736)|DBG|v1: 9.000.52fb2fde1745, 0, 9.000.52fb2fde1745, 32770, 0
2025-09-10T12:43:15.798Z|00078|rstp_sm(handler3736)|DBG|v2: 9.000.52fb2fde1745, 0, 9.000.52fb2fde1745, 32770, 0
2025-09-10T12:43:15.798Z|00079|rstp_sm(handler3736)|DBG|superior_same
2025-09-10T12:43:15.798Z|00080|rstp_sm(handler3736)|DBG|rstp3, port 1: Port_information_sm 9 -> 17
2025-09-10T12:43:15.798Z|00081|rstp_sm(handler3736)|DBG|rstp3: move_rstp()
2025-09-10T12:43:15.798Z|00082|rstp_sm(handler3736)|DBG|rstp3, port 1: Port_information_sm 17 -> 7
2025-09-10T12:43:15.798Z|00083|rstp_sm(handler3736)|DBG|rstp3: move_rstp()
2025-09-10T12:43:15.798Z|00084|rstp_sm(handler3736)|DBG|rstp3, port 1: Port_information_sm 7 -> 8
2025-09-10T12:43:15.798Z|00085|rstp_sm(handler3736)|DBG|rstp3: move_rstp()
2025-09-10T12:43:15.798Z|10387182|rstp_sm|DBG|br0: move_rstp()
2025-09-10T12:43:15.931Z|10387186|bridge|WARN|rstp0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-10T12:43:15.931Z|10387187|bridge|WARN|br0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP

2025-09-10 20:43:13,715 - test_protocol_conformance - INFO - === 清理测试环境 ===
2025-09-10 20:43:14,377 - test_protocol_conformance - INFO - 拓扑变更通知测试完成
2025-09-10 20:43:14,378 - RSTPTest - INFO - 测试完成: test_topology_change_notification (耗时: 30.89秒)
2025-09-10 20:43:14,379 - RSTPTest - INFO - ============================================================

2025-09-10 20:43:14,379 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 20:43:14,379 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 20:43:14,380 - SSH_DUT - INFO - SSH连接已关闭: DUT
