2025-09-10 11:40:03,382 - root - INFO - 日志系统初始化完成，日志文件: logs\rstp_test_20250910_114003.log
2025-09-10 11:40:03,626 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 11:40:03,627 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 11:40:03,754 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 11:40:03,754 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 11:40:03,887 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 11:40:03,887 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 11:40:03,898 - RSTPTest - INFO - ============================================================
2025-09-10 11:40:03,898 - RSTPTest - INFO - 开始测试: test_port_state_transitions
2025-09-10 11:40:03,899 - RSTPTest - INFO - ============================================================
2025-09-10 11:40:03,899 - test_additional_rstp - INFO - 开始端口状态转换测试
2025-09-10 11:40:03,900 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 11:40:03,900 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 11:40:03,900 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 11:40:03,900 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 11:40:03,900 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 11:40:03,901 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 11:40:03,901 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 11:40:03,906 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 11:40:03,961 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 11:40:03,962 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 11:40:03,962 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 11:40:03,962 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 11:40:04,477 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 11:40:04,477 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 11:40:05,672 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 11:40:05,673 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 11:40:05,673 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 11:40:05,673 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 11:40:06,133 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 11:40:06,613 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 11:40:06,613 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 11:40:06,716 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 11:40:06,813 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 11:40:06,813 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 11:40:06,814 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 11:40:06,814 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 11:40:06,814 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 11:40:06,814 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 11:40:06,815 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 11:40:06,822 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 11:40:06,822 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 11:40:06,946 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 11:40:06,947 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 11:40:06,947 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 11:40:06,947 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 11:40:06,947 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 11:40:07,475 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 11:40:09,316 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 11:40:09,488 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 11:40:09,651 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 11:40:09,830 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 11:40:12,005 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 11:40:12,137 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 11:40:12,137 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 11:40:12,137 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 11:40:12,137 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 11:40:12,137 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 11:40:13,351 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 11:40:14,568 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 11:40:14,569 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 11:40:14,624 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 11:40:14,849 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 11:40:14,849 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 11:40:14,850 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 11:40:14,850 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 11:40:14,850 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 11:40:14,850 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 11:40:14,851 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 11:40:14,859 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 11:40:14,859 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 11:40:24,931 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 11:40:24,932 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 11:40:24,932 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 11:40:24,933 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 11:40:24,933 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 11:40:55,564 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 11:41:47,140 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 11:41:57,260 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 11:42:07,381 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 11:42:17,499 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 11:42:29,615 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 11:42:39,694 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 11:42:39,694 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 11:42:39,695 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 11:42:39,695 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 11:42:39,695 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 11:43:50,634 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 11:44:25,068 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 11:44:25,069 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 11:44:25,117 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 11:44:35,286 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 11:44:35,287 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 11:44:35,287 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 11:44:40,480 - test_additional_rstp - INFO - 使用网桥: rstp0
2025-09-10 11:44:40,481 - test_additional_rstp - INFO - === 步骤1: 禁用端口触发状态转换 ===
2025-09-10 11:44:40,736 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 11:44:40,899 - RSTPTest - INFO - 测试完成: test_port_state_transitions (耗时: 277.00秒)
2025-09-10 11:44:40,899 - RSTPTest - INFO - ============================================================

2025-09-10 11:44:40,901 - RSTPTest - INFO - ============================================================
2025-09-10 11:44:40,901 - RSTPTest - INFO - 开始测试: test_bpdu_propagation_and_keepalive
2025-09-10 11:44:40,902 - RSTPTest - INFO - ============================================================
2025-09-10 11:44:40,902 - test_additional_rstp - INFO - 开始BPDU传播和保活机制测试
2025-09-10 11:44:40,903 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 11:44:40,903 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 11:44:40,903 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 11:44:40,903 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 11:44:40,903 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 11:44:40,903 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 11:44:40,904 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 11:44:40,904 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 11:44:41,407 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 11:44:41,408 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 11:44:42,436 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 11:44:42,437 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 11:44:42,437 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 11:44:42,437 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 11:44:42,908 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 11:44:43,397 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 11:44:43,398 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 11:44:43,501 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 11:44:43,597 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 11:44:43,598 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 11:44:43,598 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 11:44:43,598 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 11:44:43,598 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 11:44:43,599 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 11:44:43,599 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 11:44:43,599 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 11:44:44,124 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 11:44:45,993 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 11:44:46,180 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 11:44:46,357 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 11:44:46,526 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 11:44:48,694 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 11:44:48,823 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 11:44:48,823 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 11:44:48,824 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 11:44:48,824 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 11:44:48,824 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 11:44:50,015 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 11:44:51,240 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 11:44:51,241 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 11:44:51,291 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 11:44:51,507 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 11:44:51,507 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 11:44:51,507 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 11:44:51,508 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 11:44:51,508 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 11:44:51,508 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 11:44:51,508 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 11:44:51,508 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 11:45:04,955 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 11:45:06,825 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 11:45:06,996 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 11:45:07,171 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 11:45:07,347 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 11:45:09,523 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 11:45:09,658 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 11:45:09,658 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 11:45:09,658 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 11:45:09,658 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 11:45:09,659 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 11:45:10,878 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 11:45:12,135 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 11:45:12,136 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 11:45:12,184 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 11:45:12,407 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 11:45:12,408 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 11:45:12,408 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 11:45:20,742 - test_additional_rstp - INFO - === 步骤1: 验证分布式BPDU生成 ===
2025-09-10 11:45:20,748 - test_additional_rstp - INFO - 检测到网桥接口: ['18:', '26:']
2025-09-10 11:45:20,749 - test_additional_rstp - INFO - 在接口 18: 上捕获BPDU...
2025-09-10 11:45:20,749 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: 18:, 数量: 10)
2025-09-10 11:45:20,829 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-10 11:45:20,829 - test_additional_rstp - WARNING - 在 18: 上未捕获到BPDU
2025-09-10 11:45:20,829 - test_additional_rstp - INFO - 在接口 26: 上捕获BPDU...
2025-09-10 11:45:20,830 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: 26:, 数量: 10)
2025-09-10 11:45:20,888 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-10 11:45:20,889 - test_additional_rstp - WARNING - 在 26: 上未捕获到BPDU
2025-09-10 11:45:20,889 - test_additional_rstp - INFO - 总共捕获 0 个BPDU，来自 0 个不同源
2025-09-10 11:45:20,889 - test_additional_rstp - WARNING - 未检测到BPDU传播
2025-09-10 11:45:20,889 - test_additional_rstp - INFO - BPDU传播和保活机制测试完成
2025-09-10 11:45:20,890 - RSTPTest - INFO - 测试完成: test_bpdu_propagation_and_keepalive (耗时: 39.99秒)
2025-09-10 11:45:20,890 - RSTPTest - INFO - ============================================================

2025-09-10 11:45:20,891 - RSTPTest - INFO - ============================================================
2025-09-10 11:45:20,891 - RSTPTest - INFO - 开始测试: test_disabled_port_exclusion_enhanced
2025-09-10 11:45:20,892 - RSTPTest - INFO - ============================================================
2025-09-10 11:45:20,892 - test_additional_rstp - INFO - 开始增强的禁用端口排除测试
2025-09-10 11:45:20,892 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 11:45:20,892 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 11:45:20,893 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 11:45:20,893 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 11:45:20,893 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 11:45:20,893 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 11:45:20,893 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 11:45:20,893 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 11:45:21,411 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 11:45:21,411 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 11:45:22,455 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 11:45:22,456 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 11:45:22,456 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 11:45:22,456 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 11:45:22,920 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 11:45:23,408 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 11:45:23,408 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 11:45:23,516 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 11:45:23,618 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 11:45:23,618 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 11:45:23,618 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 11:45:23,619 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 11:45:23,619 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 11:45:23,619 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 11:45:23,619 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 11:45:23,619 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 11:45:24,132 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 11:45:25,971 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 11:45:26,147 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 11:45:26,318 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 11:45:26,487 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 11:45:28,661 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 11:45:28,795 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 11:45:28,796 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 11:45:28,796 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 11:45:28,796 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 11:45:28,797 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 11:45:30,047 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 11:45:31,302 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 11:45:31,303 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 11:45:31,351 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 11:45:31,572 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 11:45:31,573 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 11:45:31,573 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 11:45:31,573 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 11:45:31,573 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 11:45:31,574 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 11:45:31,574 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 11:45:31,574 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 11:45:32,091 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 11:45:33,934 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 11:45:34,106 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 11:45:34,281 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 11:45:34,460 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 11:45:36,629 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 11:45:36,753 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 11:45:36,754 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 11:45:36,754 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 11:45:36,754 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 11:45:36,754 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 11:45:37,953 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 11:45:39,224 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 11:45:39,225 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 11:45:39,274 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 11:45:39,499 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 11:45:39,500 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 11:45:39,500 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 11:45:44,942 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 11:45:45,095 - test_additional_rstp - INFO - 初始活动端口数量: 0
2025-09-10 11:45:45,096 - RSTPTest - INFO - 测试完成: test_disabled_port_exclusion_enhanced (耗时: 24.20秒)
2025-09-10 11:45:45,096 - RSTPTest - INFO - ============================================================

2025-09-10 11:45:45,097 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 11:45:45,097 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 11:45:45,097 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 11:45:45,233 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 11:45:45,233 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 11:45:45,356 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 11:45:45,357 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 11:45:45,506 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 11:45:45,507 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 11:45:45,507 - RSTPTest - INFO - ============================================================
2025-09-10 11:45:45,507 - RSTPTest - INFO - 开始测试: test_proposal_agreement_handshake
2025-09-10 11:45:45,508 - RSTPTest - INFO - ============================================================
2025-09-10 11:45:45,509 - test_advanced_rstp_mechanisms - INFO - 开始测试RSTP Proposal/Agreement握手机制
2025-09-10 11:45:45,509 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 11:45:45,509 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 11:45:45,509 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 11:45:45,510 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 11:45:45,510 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 11:45:45,510 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 11:45:45,510 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 11:45:45,516 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 11:45:45,572 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 11:45:45,573 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 11:45:45,573 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 11:45:45,574 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 11:45:46,086 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 11:45:46,086 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 11:45:47,127 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 11:45:47,127 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 11:45:47,127 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 11:45:47,127 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 11:45:47,587 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 11:45:48,067 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 11:45:48,068 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 11:45:48,171 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 11:45:48,267 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 11:45:48,267 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 11:45:48,267 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 11:45:48,268 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 11:45:48,268 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 11:45:48,268 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 11:45:48,269 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 11:45:48,277 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 11:45:48,278 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 11:45:48,417 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 11:45:48,418 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 11:45:48,418 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 11:45:48,418 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 11:45:48,418 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 11:45:48,965 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 11:45:50,796 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 11:45:50,975 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 11:45:51,148 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 11:45:51,314 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 11:45:53,481 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 11:45:53,611 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 11:45:53,611 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 11:45:53,611 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 11:45:53,611 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 11:45:53,611 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 11:45:54,798 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 11:45:56,005 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 11:45:56,005 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 11:45:56,060 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 11:45:56,278 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 11:45:56,279 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 11:45:56,279 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 11:45:56,279 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 11:45:56,279 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 11:45:56,279 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 11:45:56,280 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 11:45:56,288 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 11:45:56,288 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 11:45:56,411 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 11:45:56,412 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 11:45:56,412 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 11:45:56,412 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 11:45:56,412 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 11:45:56,961 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 11:45:58,803 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 11:45:58,971 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 11:45:59,138 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 11:45:59,308 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 11:46:01,477 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 11:46:01,605 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 11:46:01,606 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 11:46:01,606 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 11:46:01,606 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 11:46:01,606 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 11:46:02,798 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 11:46:04,020 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 11:46:04,021 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 11:46:04,068 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 11:46:04,281 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 11:46:04,282 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 11:46:04,282 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 11:46:09,283 - test_advanced_rstp_mechanisms - INFO - 开始在eth0上捕获BPDU
2025-09-10 11:46:09,283 - test_advanced_rstp_mechanisms - INFO - 触发拓扑变更...
2025-09-10 11:46:15,556 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: eth0, 数量: 20)
2025-09-10 11:46:15,596 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-10 11:46:15,596 - test_advanced_rstp_mechanisms - INFO - 捕获到0个BPDU数据包
2025-09-10 11:46:15,597 - test_advanced_rstp_mechanisms - WARNING - 未能捕获到完整的BPDU握手序列，可能是环境限制
2025-09-10 11:46:15,597 - test_advanced_rstp_mechanisms - INFO - 改为验证网络收敛状态...
2025-09-10 11:46:15,878 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 11:46:16,037 - test_advanced_rstp_mechanisms - INFO - ✓ 网络收敛正常，存在根端口
2025-09-10 11:46:18,038 - test_advanced_rstp_mechanisms - INFO - RSTP Proposal/Agreement握手机制测试通过
2025-09-10 11:46:18,039 - RSTPTest - INFO - 测试完成: test_proposal_agreement_handshake (耗时: 32.53秒)
2025-09-10 11:46:18,039 - RSTPTest - INFO - ============================================================

2025-09-10 11:46:18,040 - RSTPTest - INFO - ============================================================
2025-09-10 11:46:18,040 - RSTPTest - INFO - 开始测试: test_tcn_topology_change_notification
2025-09-10 11:46:18,040 - RSTPTest - INFO - ============================================================
2025-09-10 11:46:18,041 - test_advanced_rstp_mechanisms - INFO - 开始测试TCN拓扑变更通知机制
2025-09-10 11:46:18,041 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 11:46:18,042 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 11:46:18,042 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 11:46:18,042 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 11:46:18,042 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 11:46:18,043 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 11:46:18,043 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 11:46:18,043 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 11:46:18,499 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 11:46:18,499 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 11:46:19,538 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 11:46:19,539 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 11:46:19,539 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 11:46:19,539 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 11:46:19,999 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 11:46:20,475 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 11:46:20,476 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 11:46:20,578 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 11:46:20,675 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 11:46:20,675 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 11:46:20,675 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 11:46:20,676 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 11:46:20,676 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 11:46:20,676 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 11:46:20,676 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 11:46:20,676 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 11:46:21,188 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 11:46:23,034 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 11:46:23,212 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 11:46:23,398 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 11:46:23,574 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 11:46:25,745 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 11:46:25,871 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 11:46:25,871 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 11:46:25,871 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 11:46:25,871 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 11:46:25,872 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 11:46:27,071 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 11:46:28,266 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 11:46:28,266 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 11:46:28,314 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 11:46:28,533 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 11:46:28,533 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 11:46:28,533 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 11:46:28,534 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 11:46:28,534 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 11:46:28,534 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 11:46:28,534 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 11:46:28,534 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 11:46:29,023 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 11:46:30,865 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 11:46:31,032 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 11:46:31,204 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 11:46:31,371 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 11:46:33,543 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 11:46:33,666 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 11:46:33,667 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 11:46:33,667 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 11:46:33,667 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 11:46:33,667 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 11:46:34,869 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 11:46:36,114 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 11:46:36,114 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 11:46:36,162 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 11:46:36,381 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 11:46:36,381 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 11:46:36,381 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 11:46:46,637 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 11:46:46,795 - test_advanced_rstp_mechanisms - INFO - 初始网桥端口数量: 3
2025-09-10 11:46:46,795 - test_advanced_rstp_mechanisms - INFO - 触发拓扑变更：临时禁用/启用端口
2025-09-10 11:46:46,945 - test_advanced_rstp_mechanisms - INFO - 初始TC计数: 0
2025-09-10 11:46:55,225 - test_advanced_rstp_mechanisms - INFO - 变更后TC计数: 0
2025-09-10 11:46:55,225 - test_advanced_rstp_mechanisms - INFO - 拓扑变更可能未被检测到，这可能是正常的（取决于实现）
2025-09-10 11:46:55,525 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 11:46:55,682 - test_advanced_rstp_mechanisms - INFO - 最终网桥端口数量: 3
2025-09-10 11:46:55,838 - test_advanced_rstp_mechanisms - INFO - 当前MAC地址表老化时间: 300秒
2025-09-10 11:46:55,838 - test_advanced_rstp_mechanisms - WARNING - MAC地址表老化时间(300秒)未缩短，可能是实现差异
2025-09-10 11:46:55,838 - test_advanced_rstp_mechanisms - INFO - TCN拓扑变更通知机制测试通过 - 使用安全的端口状态变更方式
2025-09-10 11:46:55,839 - RSTPTest - INFO - 测试完成: test_tcn_topology_change_notification (耗时: 37.80秒)
2025-09-10 11:46:55,839 - RSTPTest - INFO - ============================================================

2025-09-10 11:46:55,841 - RSTPTest - INFO - ============================================================
2025-09-10 11:46:55,841 - RSTPTest - INFO - 开始测试: test_edge_port_behavior
2025-09-10 11:46:55,841 - RSTPTest - INFO - ============================================================
2025-09-10 11:46:55,841 - test_advanced_rstp_mechanisms - INFO - 开始测试边缘端口行为
2025-09-10 11:46:55,842 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 11:46:55,842 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 11:46:55,842 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 11:46:55,842 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 11:46:55,842 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 11:46:55,842 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 11:46:55,842 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 11:46:55,843 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 11:46:56,349 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 11:46:56,349 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 11:46:57,390 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 11:46:57,390 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 11:46:57,391 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 11:46:57,391 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 11:46:57,850 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 11:46:58,338 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 11:46:58,338 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 11:46:58,442 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 11:46:58,538 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 11:46:58,538 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 11:46:58,538 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 11:46:58,538 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 11:46:58,539 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 11:46:58,539 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 11:46:58,539 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 11:46:58,539 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 11:46:59,053 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 11:47:00,868 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 11:47:01,037 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 11:47:01,206 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 11:47:01,382 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 11:47:03,552 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 11:47:03,694 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 11:47:03,695 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 11:47:03,695 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 11:47:03,695 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 11:47:03,695 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 11:47:04,900 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 11:47:06,117 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 11:47:06,118 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 11:47:06,167 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 11:47:06,393 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 11:47:06,393 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 11:47:06,394 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 11:47:06,394 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 11:47:06,394 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 11:47:06,394 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 11:47:06,394 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 11:47:06,394 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 11:47:06,904 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 11:47:08,744 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 11:47:08,913 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 11:47:09,086 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 11:47:09,253 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 11:47:11,420 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 11:47:11,551 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 11:47:11,551 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 11:47:11,551 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 11:47:11,551 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 11:47:11,551 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 11:47:12,749 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 11:47:14,001 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 11:47:14,001 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 11:47:14,049 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 11:47:14,262 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 11:47:14,263 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 11:47:14,263 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 11:47:20,764 - test_advanced_rstp_mechanisms - INFO - 可用端口: ['enp1s0']
2025-09-10 11:47:20,765 - test_advanced_rstp_mechanisms - INFO - 选择端口enp1s0作为边缘端口测试
2025-09-10 11:47:20,876 - test_advanced_rstp_mechanisms - INFO - 测试边缘端口立即转发特性
2025-09-10 11:47:23,781 - test_advanced_rstp_mechanisms - INFO - 边缘端口状态转换时间: 2.75秒
2025-09-10 11:47:23,781 - test_advanced_rstp_mechanisms - INFO - ✓ 边缘端口转换时间合理
2025-09-10 11:47:23,890 - test_advanced_rstp_mechanisms - INFO - ✓ 边缘端口状态变化未产生TCN
2025-09-10 11:47:23,890 - test_advanced_rstp_mechanisms - INFO - 测试边缘端口收到BPDU后的行为
2025-09-10 11:47:24,048 - test_advanced_rstp_mechanisms - INFO - 边缘端口状态: 1
1
normal
2025-09-10 11:47:24,048 - test_advanced_rstp_mechanisms - INFO - 边缘端口行为测试通过
2025-09-10 11:47:24,049 - RSTPTest - INFO - 测试完成: test_edge_port_behavior (耗时: 28.21秒)
2025-09-10 11:47:24,050 - RSTPTest - INFO - ============================================================

2025-09-10 11:47:24,052 - RSTPTest - INFO - ============================================================
2025-09-10 11:47:24,052 - RSTPTest - INFO - 开始测试: test_shared_vs_point_to_point_links
2025-09-10 11:47:24,052 - RSTPTest - INFO - ============================================================
2025-09-10 11:47:24,053 - test_advanced_rstp_mechanisms - INFO - 开始测试不同链路类型的行为差异
2025-09-10 11:47:24,053 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 11:47:24,053 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 11:47:24,054 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 11:47:24,054 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 11:47:24,054 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 11:47:24,054 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 11:47:24,055 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 11:47:24,055 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 11:47:24,585 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 11:47:24,586 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 11:47:25,634 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 11:47:25,634 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 11:47:25,634 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 11:47:25,634 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 11:47:26,094 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 11:47:26,576 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 11:47:26,576 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 11:47:26,678 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 11:47:26,773 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 11:47:26,773 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 11:47:26,774 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 11:47:26,774 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 11:47:26,774 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 11:47:26,774 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 11:47:26,774 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 11:47:26,775 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 11:47:27,271 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 11:47:29,110 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 11:47:29,302 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 11:47:29,473 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 11:47:29,643 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 11:47:31,813 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 11:47:31,948 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 11:47:31,949 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 11:47:31,949 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 11:47:31,949 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 11:47:31,949 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 11:47:33,156 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 11:47:34,357 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 11:47:34,357 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 11:47:34,405 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 11:47:34,621 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 11:47:34,622 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 11:47:34,622 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 11:47:34,622 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 11:47:34,622 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 11:47:34,622 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 11:47:34,623 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 11:47:34,623 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 11:47:35,119 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 11:47:36,952 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 11:47:37,119 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 11:47:37,284 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 11:47:37,453 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 11:47:39,626 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 11:47:39,759 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 11:47:39,759 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 11:47:39,759 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 11:47:39,759 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 11:47:39,760 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 11:47:40,968 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 11:47:42,236 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 11:47:42,237 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 11:47:42,285 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 11:47:42,502 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 11:47:42,502 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 11:47:42,502 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 11:47:47,611 - test_advanced_rstp_mechanisms - INFO - 检测到的链路类型: {}
2025-09-10 11:47:47,611 - test_advanced_rstp_mechanisms - INFO - 测试点对点链路收敛性能
2025-09-10 11:47:52,042 - test_advanced_rstp_mechanisms - INFO - 收敛时间: 4.43秒
2025-09-10 11:47:52,042 - test_advanced_rstp_mechanisms - INFO - 验证链路类型识别
2025-09-10 11:47:52,042 - test_advanced_rstp_mechanisms - INFO - 不同链路类型行为差异测试通过
2025-09-10 11:47:52,043 - RSTPTest - INFO - 测试完成: test_shared_vs_point_to_point_links (耗时: 27.99秒)
2025-09-10 11:47:52,044 - RSTPTest - INFO - ============================================================

2025-09-10 11:47:52,044 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 11:47:52,044 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 11:47:52,045 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 11:47:52,187 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 11:47:52,187 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 11:47:52,306 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 11:47:52,306 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 11:47:52,439 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 11:47:52,439 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 11:47:52,440 - RSTPTest - INFO - ============================================================
2025-09-10 11:47:52,440 - RSTPTest - INFO - 开始测试: test_backup_port_concept_verification
2025-09-10 11:47:52,440 - RSTPTest - INFO - ============================================================
2025-09-10 11:47:52,441 - test_backup_port_simulation - INFO - 开始备份端口概念验证测试
2025-09-10 11:47:52,441 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 11:47:52,441 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 11:47:52,442 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 11:47:52,442 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 11:47:52,442 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 11:47:52,442 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 11:47:52,443 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 11:47:52,448 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 11:47:52,506 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 11:47:52,506 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 11:47:52,506 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 11:47:52,506 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 11:47:53,040 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 11:47:53,040 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 11:47:54,082 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 11:47:54,083 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 11:47:54,083 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 11:47:54,083 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 11:47:54,541 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 11:47:55,022 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 11:47:55,022 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 11:47:55,126 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 11:47:55,221 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 11:47:55,222 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 11:47:55,222 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 11:47:55,222 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 11:47:55,222 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 11:47:55,222 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 11:47:55,222 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 11:47:55,230 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 11:47:55,230 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 11:47:55,351 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 11:47:55,351 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 11:47:55,351 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 11:47:55,352 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 11:47:55,352 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 11:47:55,897 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 11:47:57,751 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 11:47:57,928 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 11:47:58,113 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 11:47:58,287 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 11:48:00,464 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 11:48:00,593 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 11:48:00,594 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 11:48:00,594 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 11:48:00,594 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 11:48:00,594 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 11:48:01,796 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 11:48:02,978 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 11:48:02,979 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 11:48:03,027 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 11:48:03,250 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 11:48:03,250 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 11:48:03,250 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 11:48:03,251 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 11:48:03,251 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 11:48:03,251 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 11:48:03,251 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 11:48:03,260 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 11:48:03,260 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 11:48:03,390 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 11:48:03,391 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 11:48:03,391 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 11:48:03,391 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 11:48:03,391 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 11:48:03,919 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 11:48:05,740 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 11:48:05,919 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 11:48:06,084 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 11:48:06,252 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 11:48:08,421 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 11:48:08,554 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 11:48:08,555 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 11:48:08,555 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 11:48:08,555 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 11:48:08,555 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 11:48:09,736 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 11:48:10,960 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 11:48:10,961 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 11:48:11,009 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 11:48:11,232 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 11:48:11,232 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 11:48:11,233 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 11:48:21,491 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 11:48:21,649 - test_backup_port_simulation - INFO - === 当前端口状态 ===
2025-09-10 11:48:21,649 - test_backup_port_simulation - INFO - 端口 eth0: 角色=root, 状态=disabled
2025-09-10 11:48:21,650 - test_backup_port_simulation - INFO - 端口 eth2: 角色=unknown, 状态=disabled
2025-09-10 11:48:21,650 - test_backup_port_simulation - INFO - 端口 eth3: 角色=unknown, 状态=disabled
2025-09-10 11:48:21,650 - test_backup_port_simulation - INFO - ⚠ 在当前点对点拓扑中未检测到备份端口（符合预期）
2025-09-10 11:48:21,650 - test_backup_port_simulation - INFO - 备份端口通常出现在共享介质网段中，当前测试环境为点对点链路
2025-09-10 11:48:21,650 - test_backup_port_simulation - INFO - 端口角色分布: {}
2025-09-10 11:48:21,651 - test_backup_port_simulation - INFO - === RSTP端口角色覆盖分析 ===
2025-09-10 11:48:21,651 - test_backup_port_simulation - INFO - - root端口: 未检测到
2025-09-10 11:48:21,651 - test_backup_port_simulation - INFO - - designated端口: 未检测到
2025-09-10 11:48:21,651 - test_backup_port_simulation - INFO - - alternate端口: 未检测到
2025-09-10 11:48:21,651 - test_backup_port_simulation - INFO - - backup端口: 未检测到（在点对点拓扑中为正常现象）
2025-09-10 11:48:21,651 - test_backup_port_simulation - INFO - 备份端口概念验证测试完成
2025-09-10 11:48:21,652 - RSTPTest - INFO - 测试完成: test_backup_port_concept_verification (耗时: 29.21秒)
2025-09-10 11:48:21,652 - RSTPTest - INFO - ============================================================

2025-09-10 11:48:21,654 - RSTPTest - INFO - ============================================================
2025-09-10 11:48:21,654 - RSTPTest - INFO - 开始测试: test_shared_medium_simulation_attempt
2025-09-10 11:48:21,654 - RSTPTest - INFO - ============================================================
2025-09-10 11:48:21,655 - test_backup_port_simulation - INFO - 开始共享介质模拟尝试
2025-09-10 11:48:21,655 - test_backup_port_simulation - INFO - === 尝试创建共享介质模拟场景 ===
2025-09-10 11:48:21,655 - test_backup_port_simulation - INFO - 创建中心交换机模拟共享介质...
2025-09-10 11:48:21,656 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 11:48:21,656 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 11:48:21,656 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 11:48:21,656 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 11:48:21,656 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 11:48:21,657 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 11:48:21,657 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 11:48:21,657 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 11:48:22,192 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 11:48:22,193 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 11:48:23,264 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 11:48:23,265 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 11:48:23,265 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 11:48:23,265 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 11:48:23,735 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 11:48:24,218 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 11:48:24,218 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 11:48:24,321 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 11:48:24,417 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 11:48:24,417 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 11:48:24,417 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 11:48:24,417 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 11:48:24,417 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 11:48:24,418 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 11:48:24,418 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 11:48:24,418 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 11:48:24,919 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 11:48:27,031 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 11:48:27,201 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 11:48:27,368 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 11:48:27,536 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 11:48:29,707 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 11:48:29,838 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 11:48:29,838 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 11:48:29,838 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 11:48:29,839 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 11:48:29,839 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 11:48:31,022 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 11:48:32,216 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 11:48:32,216 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 11:48:32,265 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 11:48:32,493 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 11:48:32,493 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 11:48:32,493 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 11:48:32,493 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 11:48:32,494 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 11:48:32,494 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 11:48:32,494 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 11:48:32,494 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 11:48:32,986 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 11:48:34,836 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 11:48:35,003 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 11:48:35,183 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 11:48:35,358 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 11:48:37,531 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 11:48:37,662 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 11:48:37,663 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 11:48:37,663 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 11:48:37,663 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 11:48:37,663 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 11:48:38,839 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 11:48:40,096 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 11:48:40,097 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 11:48:40,146 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 11:48:40,364 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 11:48:40,364 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 11:48:40,364 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 11:48:50,615 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 11:48:50,772 - test_backup_port_simulation - INFO - === 分析当前端口配置 ===
2025-09-10 11:48:50,772 - test_backup_port_simulation - INFO - ⚠ 未检测到备份端口
2025-09-10 11:48:50,772 - test_backup_port_simulation - INFO - 这在当前测试环境中是正常的，因为缺乏真正的共享介质
2025-09-10 11:48:50,772 - test_backup_port_simulation - INFO - 共享介质模拟尝试完成
2025-09-10 11:48:50,773 - RSTPTest - INFO - 测试完成: test_shared_medium_simulation_attempt (耗时: 29.12秒)
2025-09-10 11:48:50,773 - RSTPTest - INFO - ============================================================

2025-09-10 11:48:50,775 - RSTPTest - INFO - ============================================================
2025-09-10 11:48:50,775 - RSTPTest - INFO - 开始测试: test_backup_port_documentation_verification
2025-09-10 11:48:50,775 - RSTPTest - INFO - ============================================================
2025-09-10 11:48:50,775 - test_backup_port_simulation - INFO - 开始备份端口文档验证
2025-09-10 11:48:50,775 - test_backup_port_simulation - INFO - ✓ PortRole.BACKUP 存在
2025-09-10 11:48:50,776 - test_backup_port_simulation - INFO - === 备份端口理论特性验证 ===
2025-09-10 11:48:50,776 - test_backup_port_simulation - INFO - purpose: 为共享介质网段提供冗余
2025-09-10 11:48:50,776 - test_backup_port_simulation - INFO - difference_from_alternate: 备份端口是同一交换机上指定端口的备份，而备用端口是不同交换机提供的路径
2025-09-10 11:48:50,776 - test_backup_port_simulation - INFO - state: Discarding
2025-09-10 11:48:50,776 - test_backup_port_simulation - INFO - scenario: 出现在连接到集线器或共享介质的场景中
2025-09-10 11:48:50,776 - test_backup_port_simulation - INFO - fast_transition: 当对应的指定端口失效时，可以快速转换为指定端口
2025-09-10 11:48:50,777 - test_backup_port_simulation - INFO - === 端口角色对比 ===
2025-09-10 11:48:50,777 - test_backup_port_simulation - INFO - root: 连接到根桥的最佳路径
2025-09-10 11:48:50,777 - test_backup_port_simulation - INFO - designated: 为网段提供转发服务
2025-09-10 11:48:50,777 - test_backup_port_simulation - INFO - alternate: 提供到根桥的备用路径（来自其他交换机）
2025-09-10 11:48:50,777 - test_backup_port_simulation - INFO - backup: 同一交换机上指定端口的备份（共享介质场景）
2025-09-10 11:48:50,777 - test_backup_port_simulation - INFO - === 测试覆盖率分析 ===
2025-09-10 11:48:50,778 - test_backup_port_simulation - INFO - 已覆盖: Root Port, Designated Port, Alternate Port, Disabled Port
2025-09-10 11:48:50,778 - test_backup_port_simulation - INFO - 部分覆盖: Backup Port (概念验证)
2025-09-10 11:48:50,778 - test_backup_port_simulation - INFO - 覆盖限制: 测试框架无法创建真正的共享介质拓扑
2025-09-10 11:48:50,778 - test_backup_port_simulation - INFO - 建议: 在实际部署环境中使用集线器或配置交换机共享模式进行完整测试
2025-09-10 11:48:50,778 - test_backup_port_simulation - INFO - 备份端口文档验证完成
2025-09-10 11:48:50,779 - RSTPTest - INFO - 测试完成: test_backup_port_documentation_verification (耗时: 0.00秒)
2025-09-10 11:48:50,779 - RSTPTest - INFO - ============================================================

2025-09-10 11:48:50,779 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 11:48:50,780 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 11:48:50,780 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 11:48:50,914 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 11:48:50,914 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 11:48:51,044 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 11:48:51,044 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 11:48:51,179 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 11:48:51,179 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 11:48:51,180 - RSTPTest - INFO - ============================================================
2025-09-10 11:48:51,180 - RSTPTest - INFO - 开始测试: test_direct_link_failure
2025-09-10 11:48:51,180 - RSTPTest - INFO - ============================================================
2025-09-10 11:48:51,181 - test_convergence - INFO - 开始直接链路故障测试
2025-09-10 11:48:51,182 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 11:48:51,182 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 11:48:51,182 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 11:48:51,182 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 11:48:51,183 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 11:48:51,183 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 11:48:51,183 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 11:48:51,189 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 11:48:51,246 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 11:48:51,247 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 11:48:51,247 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 11:48:51,247 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 11:48:51,755 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 11:48:51,755 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 11:48:52,821 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 11:48:52,821 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 11:48:52,821 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 11:48:52,821 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 11:48:53,298 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 11:48:53,790 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 11:48:53,790 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 11:48:53,894 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 11:48:53,988 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 11:48:53,989 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 11:48:53,989 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 11:48:53,989 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 11:48:53,990 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 11:48:53,990 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 11:48:53,990 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 11:48:53,997 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 11:48:53,997 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 11:48:54,127 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 11:48:54,127 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 11:48:54,128 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 11:48:54,128 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 11:48:54,128 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 11:48:54,667 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 11:48:56,514 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 11:48:56,693 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 11:48:56,864 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 11:48:57,047 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 11:48:59,230 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 11:48:59,369 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 11:48:59,369 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 11:48:59,369 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 11:48:59,370 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 11:48:59,370 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 11:49:00,610 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 11:49:01,831 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 11:49:01,832 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 11:49:01,880 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 11:49:02,105 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 11:49:02,105 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 11:49:02,106 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 11:49:02,106 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 11:49:02,106 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 11:49:02,106 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 11:49:02,106 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 11:49:02,114 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 11:49:02,114 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 11:49:02,240 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 11:49:02,240 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 11:49:02,241 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 11:49:02,241 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 11:49:02,241 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 11:49:02,803 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 11:49:04,657 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 11:49:04,829 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 11:49:05,008 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 11:49:05,187 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 11:49:07,365 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 11:49:07,498 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 11:49:07,499 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 11:49:07,499 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 11:49:07,499 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 11:49:07,499 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 11:49:08,755 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 11:49:10,013 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 11:49:10,013 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 11:49:10,062 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 11:49:10,291 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 11:49:10,291 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 11:49:10,292 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 11:49:10,620 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 11:49:10,886 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 11:49:11,743 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.12秒
2025-09-10 11:49:11,744 - test_convergence - INFO - 初始收敛时间: 1.12秒
2025-09-10 11:49:12,003 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 11:49:12,169 - test_convergence - INFO - DUT的Root Port: eth2
2025-09-10 11:49:12,169 - FaultInjector_DUT - INFO - 断开链路: eth2
2025-09-10 11:49:12,443 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth2 (code=1)，将在逻辑上标记为已断开
2025-09-10 11:49:12,444 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 11:49:12,767 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 11:49:13,585 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.14秒
2025-09-10 11:49:13,844 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 11:49:14,347 - RSTPTest - INFO - 测试完成: test_direct_link_failure (耗时: 23.17秒)
2025-09-10 11:49:14,347 - RSTPTest - INFO - ============================================================

2025-09-10 11:49:14,405 - RSTPTest - INFO - ============================================================
2025-09-10 11:49:14,405 - RSTPTest - INFO - 开始测试: test_multiple_link_failures
2025-09-10 11:49:14,405 - RSTPTest - INFO - ============================================================
2025-09-10 11:49:14,406 - test_convergence - INFO - 开始多重链路故障测试
2025-09-10 11:49:14,406 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 11:49:14,406 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 11:49:14,406 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 11:49:14,406 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 11:49:14,406 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 11:49:14,406 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 11:49:14,407 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 11:49:14,407 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 11:49:14,891 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 11:49:14,891 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 11:49:15,947 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 11:49:15,947 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 11:49:15,948 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 11:49:15,948 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 11:49:16,407 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 11:49:16,883 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 11:49:16,884 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 11:49:16,987 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 11:49:17,083 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 11:49:17,084 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 11:49:17,084 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 11:49:17,084 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 11:49:17,084 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 11:49:17,084 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 11:49:17,084 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 11:49:17,085 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 11:49:17,612 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 11:49:19,482 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 11:49:19,658 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 11:49:19,834 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 11:49:20,006 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 11:49:22,176 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 11:49:22,301 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 11:49:22,302 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 11:49:22,302 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 11:49:22,302 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 11:49:22,302 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 11:49:23,486 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 11:49:24,671 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 11:49:24,672 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 11:49:24,721 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 11:49:24,941 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 11:49:24,942 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 11:49:24,942 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 11:49:24,942 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 11:49:24,942 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 11:49:24,942 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 11:49:24,942 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 11:49:24,943 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 11:49:25,436 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 11:49:27,284 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 11:49:27,456 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 11:49:27,666 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 11:49:27,834 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 11:49:30,005 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 11:49:30,137 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 11:49:30,137 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 11:49:30,137 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 11:49:30,138 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 11:49:30,138 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 11:49:31,331 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 11:49:32,563 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 11:49:32,564 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 11:49:32,612 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 11:49:32,834 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 11:49:32,835 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 11:49:32,835 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 11:49:32,835 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 11:49:33,098 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 11:49:33,894 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.06秒
2025-09-10 11:49:33,894 - test_convergence - INFO - 注入故障: eth0
2025-09-10 11:49:33,894 - FaultInjector_DUT - INFO - 断开链路: eth0
2025-09-10 11:49:34,114 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth0 (code=1)，将在逻辑上标记为已断开
2025-09-10 11:49:34,114 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 11:49:34,410 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 11:49:35,155 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.04秒
2025-09-10 11:49:35,155 - test_convergence - INFO - eth0故障收敛时间: 1.04秒
2025-09-10 11:49:37,156 - test_convergence - INFO - 注入故障: eth2
2025-09-10 11:49:37,156 - FaultInjector_DUT - INFO - 断开链路: eth2
2025-09-10 11:49:37,378 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth2 (code=1)，将在逻辑上标记为已断开
2025-09-10 11:49:37,379 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 11:49:37,690 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 11:49:38,431 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.05秒
2025-09-10 11:49:38,432 - test_convergence - INFO - eth2故障收敛时间: 1.05秒
2025-09-10 11:49:40,433 - FaultInjector_DUT - INFO - 恢复链路: eth0
2025-09-10 11:49:40,651 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth0 (code=1)，将在逻辑上标记为已恢复
2025-09-10 11:49:40,651 - FaultInjector_DUT - INFO - 恢复链路: eth2
2025-09-10 11:49:40,914 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth2 (code=1)，将在逻辑上标记为已恢复
2025-09-10 11:49:40,915 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 11:49:41,214 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 11:49:41,951 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.04秒
2025-09-10 11:49:41,952 - test_convergence - INFO - 最终恢复收敛时间: 1.04秒
2025-09-10 11:49:41,952 - test_convergence - INFO - 多重链路故障测试通过
2025-09-10 11:49:41,953 - RSTPTest - INFO - 测试完成: test_multiple_link_failures (耗时: 27.55秒)
2025-09-10 11:49:41,953 - RSTPTest - INFO - ============================================================

2025-09-10 11:49:41,954 - RSTPTest - INFO - ============================================================
2025-09-10 11:49:41,955 - RSTPTest - INFO - 开始测试: test_convergence_with_traffic
2025-09-10 11:49:41,955 - RSTPTest - INFO - ============================================================
2025-09-10 11:49:41,955 - test_convergence - INFO - 开始带流量的收敛测试
2025-09-10 11:49:41,956 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 11:49:41,956 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 11:49:41,956 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 11:49:41,957 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 11:49:41,957 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 11:49:41,957 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 11:49:41,957 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 11:49:41,957 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 11:49:42,446 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 11:49:42,447 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 11:49:43,552 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 11:49:43,552 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 11:49:43,553 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 11:49:43,553 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 11:49:44,035 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 11:49:44,532 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 11:49:44,532 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 11:49:44,635 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 11:49:44,732 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 11:49:44,733 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 11:49:44,733 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 11:49:44,733 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 11:49:44,733 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 11:49:44,734 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 11:49:44,734 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 11:49:44,734 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 11:49:45,233 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 11:49:47,057 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 11:49:47,223 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 11:49:47,395 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 11:49:47,561 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 11:49:49,738 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 11:49:49,864 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 11:49:49,864 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 11:49:49,864 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 11:49:49,864 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 11:49:49,865 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 11:49:51,036 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 11:49:52,221 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 11:49:52,221 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 11:49:52,270 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 11:49:52,485 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 11:49:52,486 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 11:49:52,486 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 11:49:52,486 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 11:49:52,486 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 11:49:52,486 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 11:49:52,486 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 11:49:52,487 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 11:49:53,004 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 11:49:54,831 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 11:49:55,006 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 11:49:55,173 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 11:49:55,342 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 11:49:57,509 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 11:49:57,637 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 11:49:57,637 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 11:49:57,638 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 11:49:57,638 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 11:49:57,638 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 11:49:58,809 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 11:50:00,027 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 11:50:00,027 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 11:50:00,076 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 11:50:00,294 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 11:50:00,295 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 11:50:00,295 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 11:50:06,411 - TrafficGenerator - INFO - 启动iperf3服务器: 192.168.184.131:5201
2025-09-10 11:50:08,491 - TrafficGenerator - ERROR - iperf3服务器启动失败
2025-09-10 11:50:11,414 - TrafficGenerator - INFO - 启动iperf3客户端: -> 192.168.184.131:5201
2025-09-10 11:50:11,414 - TrafficGenerator - INFO - iperf3客户端已启动 (udp, 100M)
2025-09-10 11:50:16,415 - FaultInjector_DUT - INFO - 断开链路: eth0
2025-09-10 11:50:16,647 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth0 (code=1)，将在逻辑上标记为已断开
2025-09-10 11:50:26,648 - test_convergence - INFO - 丢包数: 0
2025-09-10 11:50:26,648 - test_convergence - INFO - 估计中断时间: 0.000秒
2025-09-10 11:50:26,648 - TrafficGenerator - INFO - 停止流量生成
2025-09-10 11:50:28,711 - test_convergence - INFO - 带流量的收敛测试通过
2025-09-10 11:50:28,713 - RSTPTest - INFO - 测试完成: test_convergence_with_traffic (耗时: 46.76秒)
2025-09-10 11:50:28,713 - RSTPTest - INFO - ============================================================

2025-09-10 11:50:28,713 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 11:50:28,714 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 11:50:28,714 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 11:50:28,849 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 11:50:28,849 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 11:50:28,967 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 11:50:28,968 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 11:50:29,103 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 11:50:29,104 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 11:50:29,104 - RSTPTest - INFO - ============================================================
2025-09-10 11:50:29,105 - RSTPTest - INFO - 开始测试: test_backup_port_simulation
2025-09-10 11:50:29,105 - RSTPTest - INFO - ============================================================
2025-09-10 11:50:29,106 - test_enhanced_rstp_coverage - INFO - 开始备份端口模拟测试
2025-09-10 11:50:29,106 - test_enhanced_rstp_coverage - INFO - 创建模拟共享网段拓扑
2025-09-10 11:50:29,559 - test_enhanced_rstp_coverage - INFO - ✓ 创建连接: rstp0:dut_port1 <-> shared_segment:shared_port1
2025-09-10 11:50:29,904 - test_enhanced_rstp_coverage - INFO - ✓ 创建连接: rstp0:dut_port2 <-> shared_segment:shared_port2
2025-09-10 11:50:30,535 - test_enhanced_rstp_coverage - INFO - ✓ 创建远程交换机: remote_switch
2025-09-10 11:50:30,536 - test_enhanced_rstp_coverage - INFO - 等待RSTP收敛...
2025-09-10 11:50:45,793 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 11:50:45,950 - test_enhanced_rstp_coverage - INFO - DUT桥信息: BridgeInfo(bridge_id='', root_id='', root_port='eth0', root_path_cost=0, protocol_version='unknown', hello_time=0, forward_delay=0, max_age=0, topology_changes=0, ports={'eth0': PortInfo(name='eth0', role=<PortRole.ROOT: 'root'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth2': PortInfo(name='eth2', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth3': PortInfo(name='eth3', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')})
2025-09-10 11:50:45,951 - test_enhanced_rstp_coverage - INFO - 清理测试环境
2025-09-10 11:50:46,677 - test_enhanced_rstp_coverage - INFO - ✓ 备份端口模拟测试完成
2025-09-10 11:50:46,678 - RSTPTest - INFO - 测试完成: test_backup_port_simulation (耗时: 17.57秒)
2025-09-10 11:50:46,678 - RSTPTest - INFO - ============================================================

2025-09-10 11:50:46,679 - RSTPTest - INFO - ============================================================
2025-09-10 11:50:46,680 - RSTPTest - INFO - 开始测试: test_comprehensive_port_state_transitions
2025-09-10 11:50:46,680 - RSTPTest - INFO - ============================================================
2025-09-10 11:50:46,680 - test_enhanced_rstp_coverage - INFO - 开始全面端口状态转换测试
2025-09-10 11:50:46,681 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 11:50:46,681 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 11:50:46,681 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 11:50:46,681 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 11:50:46,681 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 11:50:46,682 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 11:50:46,682 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 11:50:46,722 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 11:50:46,779 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 11:50:46,780 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 11:50:46,780 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 11:50:46,780 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 11:50:47,287 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 11:50:47,287 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 11:50:48,318 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 11:50:48,319 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 11:50:48,319 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 11:50:48,319 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 11:50:48,779 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 11:50:49,259 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 11:50:49,259 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 11:50:49,362 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 11:50:49,458 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 11:50:49,458 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 11:50:49,458 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 11:50:49,459 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 11:50:49,459 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 11:50:49,459 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 11:50:49,459 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 11:50:49,466 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 11:50:49,467 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 11:50:49,599 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 11:50:49,600 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 11:50:49,600 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 11:50:49,600 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 11:50:49,601 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 11:50:50,149 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 11:50:51,981 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 11:50:52,147 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 11:50:52,313 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 11:50:52,482 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 11:50:54,654 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 11:50:54,784 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 11:50:54,784 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 11:50:54,784 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 11:50:54,784 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 11:50:54,785 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 11:50:55,960 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 11:50:57,532 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 11:50:57,533 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 11:50:57,582 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 11:50:57,799 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 11:50:57,799 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 11:50:57,800 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 11:50:57,800 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 11:50:57,800 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 11:50:57,801 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 11:50:57,801 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 11:50:57,809 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 11:50:57,810 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 11:50:57,937 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 11:50:57,937 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 11:50:57,937 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 11:50:57,938 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 11:50:57,938 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 11:50:58,465 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 11:51:00,295 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 11:51:00,471 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 11:51:00,640 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 11:51:00,805 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 11:51:02,977 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 11:51:03,103 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 11:51:03,104 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 11:51:03,104 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 11:51:03,104 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 11:51:03,104 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 11:51:04,335 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 11:51:05,581 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 11:51:05,581 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 11:51:05,629 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 11:51:05,849 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 11:51:05,849 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 11:51:05,849 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 11:51:06,053 - test_enhanced_rstp_coverage - INFO - 等待初始收敛...
2025-09-10 11:51:06,054 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 11:51:06,325 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 11:51:06,482 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.43秒
2025-09-10 11:51:06,781 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 11:51:06,954 - RSTPTest - INFO - 测试完成: test_comprehensive_port_state_transitions (耗时: 20.27秒)
2025-09-10 11:51:06,954 - RSTPTest - INFO - ============================================================

2025-09-10 11:51:06,957 - RSTPTest - INFO - ============================================================
2025-09-10 11:51:06,957 - RSTPTest - INFO - 开始测试: test_detailed_bpdu_analysis
2025-09-10 11:51:06,958 - RSTPTest - INFO - ============================================================
2025-09-10 11:51:06,958 - test_enhanced_rstp_coverage - INFO - 开始详细BPDU分析测试
2025-09-10 11:51:06,958 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 11:51:06,959 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 11:51:06,959 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 11:51:06,959 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 11:51:06,959 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 11:51:06,959 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 11:51:06,959 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 11:51:06,959 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 11:51:07,461 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 11:51:07,461 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 11:51:08,494 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 11:51:08,494 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 11:51:08,494 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 11:51:08,495 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 11:51:08,958 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 11:51:09,438 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 11:51:09,438 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 11:51:09,542 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 11:51:09,638 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 11:51:09,638 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 11:51:09,638 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 11:51:09,638 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 11:51:09,639 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 11:51:09,639 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 11:51:09,639 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 11:51:09,639 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 11:51:10,181 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 11:51:12,015 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 11:51:12,191 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 11:51:12,363 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 11:51:12,535 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 11:51:14,716 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 11:51:14,844 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 11:51:14,844 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 11:51:14,844 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 11:51:14,845 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 11:51:14,845 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 11:51:16,056 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 11:51:17,262 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 11:51:17,262 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 11:51:17,309 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 11:51:17,531 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 11:51:17,531 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 11:51:17,531 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 11:51:17,531 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 11:51:17,532 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 11:51:17,532 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 11:51:17,532 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 11:51:17,532 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 11:51:18,036 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 11:51:19,871 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 11:51:20,035 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 11:51:20,206 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 11:51:20,373 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 11:51:22,552 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 11:51:22,675 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 11:51:22,676 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 11:51:22,676 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 11:51:22,676 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 11:51:22,676 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 11:51:23,854 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 11:51:25,105 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 11:51:25,105 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 11:51:25,154 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 11:51:25,369 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 11:51:25,369 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 11:51:25,369 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 11:51:25,702 - test_enhanced_rstp_coverage - INFO - 等待RSTP收敛...
2025-09-10 11:51:25,703 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 11:51:25,953 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 11:51:26,110 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.41秒
2025-09-10 11:51:26,408 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 11:51:26,561 - test_enhanced_rstp_coverage - INFO - Hello Time: 0秒
2025-09-10 11:51:26,562 - test_enhanced_rstp_coverage - INFO - === 测试1: 验证分布式BPDU生成 ===
2025-09-10 11:51:26,562 - test_enhanced_rstp_coverage - INFO - 总共捕获0个BPDU，来自0个不同源
2025-09-10 11:51:26,579 - RSTPTest - INFO - 测试完成: test_detailed_bpdu_analysis (耗时: 19.62秒)
2025-09-10 11:51:26,579 - RSTPTest - INFO - ============================================================

2025-09-10 11:51:26,581 - RSTPTest - INFO - ============================================================
2025-09-10 11:51:26,582 - RSTPTest - INFO - 开始测试: test_topology_change_comprehensive
2025-09-10 11:51:26,582 - RSTPTest - INFO - ============================================================
2025-09-10 11:51:26,583 - test_enhanced_rstp_coverage - INFO - 开始全面拓扑变更测试
2025-09-10 11:51:26,583 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 11:51:26,583 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 11:51:26,583 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 11:51:26,583 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 11:51:26,583 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 11:51:26,584 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 11:51:26,584 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 11:51:26,584 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 11:51:27,092 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 11:51:27,093 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 11:51:28,134 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 11:51:28,135 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 11:51:28,135 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 11:51:28,135 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 11:51:28,596 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 11:51:29,074 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 11:51:29,074 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 11:51:29,177 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 11:51:29,273 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 11:51:29,274 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 11:51:29,274 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 11:51:29,274 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 11:51:29,274 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 11:51:29,275 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 11:51:29,275 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 11:51:29,275 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 11:51:29,763 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 11:51:31,582 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 11:51:31,754 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 11:51:31,924 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 11:51:32,094 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 11:51:34,261 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 11:51:34,391 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 11:51:34,391 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 11:51:34,392 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 11:51:34,392 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 11:51:34,392 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 11:51:35,602 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 11:51:36,847 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 11:51:36,848 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 11:51:36,895 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 11:51:37,144 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 11:51:37,145 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 11:51:37,145 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 11:51:37,145 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 11:51:37,145 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 11:51:37,145 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 11:51:37,146 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 11:51:37,146 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 11:51:37,817 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 11:51:39,635 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 11:51:39,815 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 11:51:39,975 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 11:51:40,150 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 11:51:42,325 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 11:51:42,464 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 11:51:42,464 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 11:51:42,464 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 11:51:42,464 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 11:51:42,465 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 11:51:43,643 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 11:51:44,859 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 11:51:44,860 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 11:51:44,908 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 11:51:45,256 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 11:51:45,256 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 11:51:45,257 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 11:51:45,458 - test_enhanced_rstp_coverage - INFO - 等待初始收敛...
2025-09-10 11:51:45,458 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 11:51:45,736 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 11:51:45,893 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.43秒
2025-09-10 11:51:46,196 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 11:51:46,644 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 11:51:46,797 - test_enhanced_rstp_coverage - INFO - 初始状态: DUT是根桥=True
2025-09-10 11:51:46,798 - test_enhanced_rstp_coverage - INFO - === 测试场景1: 根桥变更 ===
2025-09-10 11:51:46,798 - test_enhanced_rstp_coverage - INFO - === 测试场景2: 端口故障恢复 ===
2025-09-10 11:51:47,095 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 11:51:47,249 - test_enhanced_rstp_coverage - INFO - === 测试场景3: 端口优先级变更 ===
2025-09-10 11:51:47,548 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 11:51:47,701 - test_enhanced_rstp_coverage - WARNING - 未检测到明显的拓扑变更，可能是测试环境限制
2025-09-10 11:51:47,701 - test_enhanced_rstp_coverage - INFO - ✓ 全面拓扑变更测试完成
2025-09-10 11:51:47,702 - RSTPTest - INFO - 测试完成: test_topology_change_comprehensive (耗时: 21.12秒)
2025-09-10 11:51:47,702 - RSTPTest - INFO - ============================================================

2025-09-10 11:51:47,702 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 11:51:47,703 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 11:51:47,703 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 11:51:47,847 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 11:51:47,848 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 11:51:47,973 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 11:51:47,973 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 11:51:48,123 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 11:51:48,124 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 11:51:48,124 - RSTPTest - INFO - ============================================================
2025-09-10 11:51:48,124 - RSTPTest - INFO - 开始测试: test_rstp_reconvergence_no_switchover
2025-09-10 11:51:48,124 - RSTPTest - INFO - ============================================================
2025-09-10 11:51:48,125 - test_high_availability - INFO - 开始RSTP重构误判测试
2025-09-10 11:51:48,125 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 11:51:48,126 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 11:51:48,126 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 11:51:48,126 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 11:51:48,126 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 11:51:48,127 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 11:51:48,127 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 11:51:48,132 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 11:51:48,190 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 11:51:48,191 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 11:51:48,191 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 11:51:48,191 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 11:51:48,705 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 11:51:48,706 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 11:51:49,759 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 11:51:49,759 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 11:51:49,760 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 11:51:49,760 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 11:51:50,217 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 11:51:50,701 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 11:51:50,701 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 11:51:50,805 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 11:51:50,901 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 11:51:50,902 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 11:51:50,902 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 11:51:50,902 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 11:51:50,902 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 11:51:50,903 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 11:51:50,903 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 11:51:50,910 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 11:51:50,910 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 11:51:51,026 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 11:51:51,027 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 11:51:51,027 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 11:51:51,027 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 11:51:51,027 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 11:51:51,573 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 11:51:53,394 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 11:51:53,558 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 11:51:53,726 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 11:51:53,896 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 11:51:56,062 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 11:51:56,192 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 11:51:56,193 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 11:51:56,193 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 11:51:56,193 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 11:51:56,193 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 11:51:57,387 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 11:51:58,580 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 11:51:58,580 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 11:51:58,628 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 11:51:58,842 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 11:51:58,842 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 11:51:58,842 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 11:51:58,843 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 11:51:58,843 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 11:51:58,843 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 11:51:58,843 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 11:51:58,851 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 11:51:58,852 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 11:51:58,971 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 11:51:58,972 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 11:51:58,972 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 11:51:58,972 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 11:51:58,973 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 11:51:59,516 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 11:52:01,342 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 11:52:01,511 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 11:52:01,691 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 11:52:01,856 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 11:52:04,026 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 11:52:04,170 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 11:52:04,171 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 11:52:04,171 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 11:52:04,171 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 11:52:04,171 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 11:52:05,371 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 11:52:06,587 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 11:52:06,587 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 11:52:06,636 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 11:52:06,862 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 11:52:06,862 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 11:52:06,863 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 11:52:11,868 - test_high_availability - INFO - 初始HA状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-10 11:52:11,868 - test_high_availability - INFO - 在远端触发RSTP重构...
2025-09-10 11:52:11,868 - FaultInjector_TestNode2 - INFO - 断开链路: eth0
2025-09-10 11:52:12,047 - FaultInjector_TestNode2 - INFO - 链路已断开: eth0
2025-09-10 11:52:22,053 - test_high_availability - INFO - RSTP重构后HA状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-10 11:52:22,053 - FaultInjector_TestNode2 - INFO - 恢复链路: eth0
2025-09-10 11:52:22,208 - FaultInjector_TestNode2 - INFO - 链路已恢复: eth0
2025-09-10 11:52:22,208 - test_high_availability - INFO - RSTP重构误判测试完成
2025-09-10 11:52:22,209 - RSTPTest - INFO - 测试完成: test_rstp_reconvergence_no_switchover (耗时: 34.08秒)
2025-09-10 11:52:22,209 - RSTPTest - INFO - ============================================================

2025-09-10 11:52:22,212 - RSTPTest - INFO - ============================================================
2025-09-10 11:52:22,212 - RSTPTest - INFO - 开始测试: test_split_brain_scenario
2025-09-10 11:52:22,212 - RSTPTest - INFO - ============================================================
2025-09-10 11:52:22,213 - test_high_availability - INFO - 开始裂脑场景测试
2025-09-10 11:52:22,218 - test_high_availability - INFO - 初始状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-10 11:52:22,218 - test_high_availability - INFO - 断开同步链路: eth3
2025-09-10 11:52:22,218 - FaultInjector_DUT - INFO - 断开链路: eth3
2025-09-10 11:52:22,479 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth3 (code=1)，将在逻辑上标记为已断开
2025-09-10 11:52:32,481 - test_high_availability - WARNING - 裂脑测试需要访问两个控制器
2025-09-10 11:52:32,481 - FaultInjector_DUT - INFO - 恢复链路: eth3
2025-09-10 11:52:32,699 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth3 (code=1)，将在逻辑上标记为已恢复
2025-09-10 11:52:32,700 - test_high_availability - INFO - 裂脑场景测试完成
2025-09-10 11:52:32,701 - RSTPTest - INFO - 测试完成: test_split_brain_scenario (耗时: 10.49秒)
2025-09-10 11:52:32,701 - RSTPTest - INFO - ============================================================

2025-09-10 11:52:32,705 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 11:52:32,705 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 11:52:32,705 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 11:52:32,850 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 11:52:32,850 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 11:52:32,851 - RSTPTest - INFO - ============================================================
2025-09-10 11:52:32,851 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[12288]
2025-09-10 11:52:32,851 - RSTPTest - INFO - ============================================================
2025-09-10 11:52:32,852 - test_parameters - INFO - 测试网桥优先级: 12288
2025-09-10 11:52:34,415 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-10 11:52:36,524 - test_parameters - INFO - 从OVS配置读取到优先级: 12288
2025-09-10 11:52:36,524 - test_parameters - INFO - 优先级12288设置成功
2025-09-10 11:52:36,525 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[12288] (耗时: 3.67秒)
2025-09-10 11:52:36,525 - RSTPTest - INFO - ============================================================

2025-09-10 11:52:36,526 - RSTPTest - INFO - ============================================================
2025-09-10 11:52:36,526 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[16384]
2025-09-10 11:52:36,526 - RSTPTest - INFO - ============================================================
2025-09-10 11:52:36,527 - test_parameters - INFO - 测试网桥优先级: 16384
2025-09-10 11:52:38,072 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-10 11:52:40,179 - test_parameters - INFO - 从OVS配置读取到优先级: 16384
2025-09-10 11:52:40,180 - test_parameters - INFO - 优先级16384设置成功
2025-09-10 11:52:40,181 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[16384] (耗时: 3.65秒)
2025-09-10 11:52:40,181 - RSTPTest - INFO - ============================================================

2025-09-10 11:52:40,182 - RSTPTest - INFO - ============================================================
2025-09-10 11:52:40,182 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[32768]
2025-09-10 11:52:40,182 - RSTPTest - INFO - ============================================================
2025-09-10 11:52:40,183 - test_parameters - INFO - 测试网桥优先级: 32768
2025-09-10 11:52:41,724 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-10 11:52:43,836 - test_parameters - INFO - 从OVS配置读取到优先级: 32768
2025-09-10 11:52:43,837 - test_parameters - INFO - 优先级32768设置成功
2025-09-10 11:52:43,838 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[32768] (耗时: 3.65秒)
2025-09-10 11:52:43,838 - RSTPTest - INFO - ============================================================

2025-09-10 11:52:43,839 - RSTPTest - INFO - ============================================================
2025-09-10 11:52:43,839 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[61440]
2025-09-10 11:52:43,839 - RSTPTest - INFO - ============================================================
2025-09-10 11:52:43,840 - test_parameters - INFO - 测试网桥优先级: 61440
2025-09-10 11:52:45,384 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-10 11:52:47,492 - test_parameters - INFO - 从OVS配置读取到优先级: 61440
2025-09-10 11:52:47,492 - test_parameters - INFO - 优先级61440设置成功
2025-09-10 11:52:47,493 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[61440] (耗时: 3.65秒)
2025-09-10 11:52:47,493 - RSTPTest - INFO - ============================================================

2025-09-10 11:52:47,494 - RSTPTest - INFO - ============================================================
2025-09-10 11:52:47,495 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[4097]
2025-09-10 11:52:47,495 - RSTPTest - INFO - ============================================================
2025-09-10 11:52:47,495 - test_parameters - INFO - 测试无效优先级: 4097
2025-09-10 11:52:49,327 - test_parameters - INFO - DUT处理无效优先级 4097 -> 4097
2025-09-10 11:52:49,328 - test_parameters - ERROR - DUT接受了非标准优先级值 4097，不符合802.1D标准（应为4096的倍数）
2025-09-10 11:52:49,346 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[4097] (耗时: 1.85秒)
2025-09-10 11:52:49,347 - RSTPTest - INFO - ============================================================

2025-09-10 11:52:49,348 - RSTPTest - INFO - ============================================================
2025-09-10 11:52:49,348 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[12289]
2025-09-10 11:52:49,349 - RSTPTest - INFO - ============================================================
2025-09-10 11:52:49,349 - test_parameters - INFO - 测试无效优先级: 12289
2025-09-10 11:52:51,163 - test_parameters - INFO - DUT处理无效优先级 12289 -> 12289
2025-09-10 11:52:51,164 - test_parameters - ERROR - DUT接受了非标准优先级值 12289，不符合802.1D标准（应为4096的倍数）
2025-09-10 11:52:51,185 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[12289] (耗时: 1.84秒)
2025-09-10 11:52:51,185 - RSTPTest - INFO - ============================================================

2025-09-10 11:52:51,187 - RSTPTest - INFO - ============================================================
2025-09-10 11:52:51,187 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[70000]
2025-09-10 11:52:51,187 - RSTPTest - INFO - ============================================================
2025-09-10 11:52:51,188 - test_parameters - INFO - 测试无效优先级: 70000
2025-09-10 11:52:52,996 - test_parameters - INFO - DUT处理无效优先级 70000 -> 70000
2025-09-10 11:52:52,997 - test_parameters - ERROR - DUT接受了非标准优先级值 70000，不符合802.1D标准（应为4096的倍数）
2025-09-10 11:52:53,015 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[70000] (耗时: 1.83秒)
2025-09-10 11:52:53,015 - RSTPTest - INFO - ============================================================

2025-09-10 11:52:53,017 - RSTPTest - INFO - ============================================================
2025-09-10 11:52:53,018 - RSTPTest - INFO - 开始测试: test_hello_time
2025-09-10 11:52:53,018 - RSTPTest - INFO - ============================================================
2025-09-10 11:52:53,019 - test_parameters - INFO - 测试Hello Time参数
2025-09-10 11:52:54,617 - test_parameters - INFO - 设置Hello Time: 1秒
2025-09-10 11:52:56,800 - test_parameters - INFO - Hello Time 1秒设置成功
2025-09-10 11:52:56,800 - test_parameters - INFO - 设置Hello Time: 2秒
2025-09-10 11:52:59,027 - test_parameters - INFO - Hello Time 2秒设置成功
2025-09-10 11:52:59,028 - test_parameters - INFO - 设置Hello Time: 5秒
2025-09-10 11:53:01,252 - test_parameters - INFO - Hello Time 5秒设置成功
2025-09-10 11:53:01,253 - test_parameters - INFO - Hello Time测试通过
2025-09-10 11:53:01,254 - RSTPTest - INFO - 测试完成: test_hello_time (耗时: 8.24秒)
2025-09-10 11:53:01,254 - RSTPTest - INFO - ============================================================

2025-09-10 11:53:01,255 - RSTPTest - INFO - ============================================================
2025-09-10 11:53:01,255 - RSTPTest - INFO - 开始测试: test_forward_delay
2025-09-10 11:53:01,255 - RSTPTest - INFO - ============================================================
2025-09-10 11:53:01,256 - test_parameters - INFO - 测试Forward Delay参数
2025-09-10 11:53:02,860 - test_parameters - INFO - 设置Forward Delay: 4秒
2025-09-10 11:53:05,044 - test_parameters - INFO - Forward Delay 4秒设置成功
2025-09-10 11:53:05,044 - test_parameters - INFO - 设置Forward Delay: 10秒
2025-09-10 11:53:07,267 - test_parameters - INFO - Forward Delay 10秒设置成功
2025-09-10 11:53:07,267 - test_parameters - INFO - 设置Forward Delay: 15秒
2025-09-10 11:53:09,491 - test_parameters - INFO - Forward Delay 15秒设置成功
2025-09-10 11:53:09,491 - test_parameters - INFO - Forward Delay测试通过
2025-09-10 11:53:09,492 - RSTPTest - INFO - 测试完成: test_forward_delay (耗时: 8.24秒)
2025-09-10 11:53:09,492 - RSTPTest - INFO - ============================================================

2025-09-10 11:53:09,493 - RSTPTest - INFO - ============================================================
2025-09-10 11:53:09,494 - RSTPTest - INFO - 开始测试: test_max_age
2025-09-10 11:53:09,494 - RSTPTest - INFO - ============================================================
2025-09-10 11:53:09,494 - test_parameters - INFO - 测试Max Age参数
2025-09-10 11:53:11,076 - test_parameters - INFO - 设置Max Age: 6秒
2025-09-10 11:53:13,264 - test_parameters - INFO - Max Age 6秒设置成功
2025-09-10 11:53:13,264 - test_parameters - INFO - 设置Max Age: 10秒
2025-09-10 11:53:15,488 - test_parameters - INFO - Max Age 10秒设置成功
2025-09-10 11:53:15,488 - test_parameters - INFO - 设置Max Age: 20秒
2025-09-10 11:53:17,718 - test_parameters - INFO - Max Age 20秒设置成功
2025-09-10 11:53:17,719 - test_parameters - INFO - Max Age测试通过
2025-09-10 11:53:17,719 - RSTPTest - INFO - 测试完成: test_max_age (耗时: 8.23秒)
2025-09-10 11:53:17,720 - RSTPTest - INFO - ============================================================

2025-09-10 11:53:17,850 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 11:53:17,850 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 11:53:17,982 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 11:53:17,982 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 11:53:17,983 - RSTPTest - INFO - ============================================================
2025-09-10 11:53:17,983 - RSTPTest - INFO - 开始测试: test_port_cost
2025-09-10 11:53:17,983 - RSTPTest - INFO - ============================================================
2025-09-10 11:53:17,984 - test_parameters - INFO - 测试端口路径成本
2025-09-10 11:53:17,985 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 11:53:17,985 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 11:53:17,985 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 11:53:17,985 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 11:53:17,986 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 11:53:17,986 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 11:53:17,986 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 11:53:17,991 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 11:53:18,049 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 11:53:18,049 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 11:53:18,049 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 11:53:18,050 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 11:53:18,603 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 11:53:18,604 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 11:53:19,631 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 11:53:19,631 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 11:53:19,631 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 11:53:19,632 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 11:53:20,092 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 11:53:20,572 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 11:53:20,572 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 11:53:20,676 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 11:53:20,772 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 11:53:20,772 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 11:53:20,772 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 11:53:20,773 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 11:53:20,773 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 11:53:20,773 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 11:53:20,773 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 11:53:20,781 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 11:53:20,782 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 11:53:20,899 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 11:53:20,899 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 11:53:20,900 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 11:53:20,900 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 11:53:20,900 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 11:53:21,438 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 11:53:23,273 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 11:53:23,441 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 11:53:23,612 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 11:53:23,793 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 11:53:25,957 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 11:53:26,085 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 11:53:26,085 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 11:53:26,085 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 11:53:26,085 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 11:53:26,085 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 11:53:27,269 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 11:53:28,502 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 11:53:28,503 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 11:53:28,551 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 11:53:28,774 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 11:53:28,774 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 11:53:28,775 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 11:53:28,775 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 11:53:28,775 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 11:53:28,775 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 11:53:28,775 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 11:53:28,782 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 11:53:28,783 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 11:53:28,907 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 11:53:28,907 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 11:53:28,908 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 11:53:28,908 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 11:53:28,908 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 11:53:29,460 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 11:54:21,028 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 11:54:31,147 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 11:54:41,264 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 11:54:51,384 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 11:55:03,503 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 11:55:13,581 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 11:55:13,582 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 11:55:13,582 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 11:55:13,582 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 11:55:13,582 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 11:56:21,335 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 11:57:13,169 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 11:57:13,170 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 11:57:13,219 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 11:57:23,389 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 11:57:23,389 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 11:57:23,390 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 11:57:28,390 - test_parameters - INFO - 设置端口eth0成本: 10
2025-09-10 11:57:28,454 - test_parameters - INFO - 设置端口eth0成本: 100
2025-09-10 11:57:28,564 - test_parameters - INFO - 设置端口eth0成本: 1000
2025-09-10 11:57:28,670 - test_parameters - INFO - 设置端口eth0成本: 20000
2025-09-10 11:57:28,774 - test_parameters - INFO - 端口成本测试通过
2025-09-10 11:57:28,775 - RSTPTest - INFO - 测试完成: test_port_cost (耗时: 250.79秒)
2025-09-10 11:57:28,775 - RSTPTest - INFO - ============================================================

2025-09-10 11:57:28,776 - RSTPTest - INFO - ============================================================
2025-09-10 11:57:28,777 - RSTPTest - INFO - 开始测试: test_parameter_persistence
2025-09-10 11:57:28,777 - RSTPTest - INFO - ============================================================
2025-09-10 11:57:28,777 - test_parameters - INFO - 测试参数持久性
2025-09-10 11:57:36,007 - test_parameters - INFO - 参数持久性测试通过
2025-09-10 11:57:36,008 - RSTPTest - INFO - 测试完成: test_parameter_persistence (耗时: 7.23秒)
2025-09-10 11:57:36,008 - RSTPTest - INFO - ============================================================

2025-09-10 11:57:36,010 - RSTPTest - INFO - ============================================================
2025-09-10 11:57:36,010 - RSTPTest - INFO - 开始测试: test_parameter_boundaries
2025-09-10 11:57:36,010 - RSTPTest - INFO - ============================================================
2025-09-10 11:57:36,010 - test_parameters - INFO - 测试参数边界值
2025-09-10 11:57:37,663 - test_parameters - INFO - 最小值0: 失败
2025-09-10 11:57:37,766 - test_parameters - INFO - 最大值65535: 失败
2025-09-10 11:57:37,866 - test_parameters - INFO - 正确拒绝了无效值-1
2025-09-10 11:57:37,970 - test_parameters - INFO - 正确拒绝了无效值65536
2025-09-10 11:57:38,074 - test_parameters - INFO - 最小值1: 失败
2025-09-10 11:57:38,178 - test_parameters - INFO - 最大值10: 失败
2025-09-10 11:57:38,454 - test_parameters - INFO - 正确拒绝了无效值0
2025-09-10 11:57:38,567 - test_parameters - INFO - 正确拒绝了无效值11
2025-09-10 11:57:38,748 - test_parameters - INFO - 最小值4: 失败
2025-09-10 11:57:38,851 - test_parameters - INFO - 最大值30: 失败
2025-09-10 11:57:38,955 - test_parameters - INFO - 正确拒绝了无效值3
2025-09-10 11:57:39,059 - test_parameters - INFO - 正确拒绝了无效值31
2025-09-10 11:57:39,162 - test_parameters - INFO - 最小值6: 失败
2025-09-10 11:57:39,266 - test_parameters - INFO - 最大值40: 失败
2025-09-10 11:57:39,366 - test_parameters - INFO - 正确拒绝了无效值5
2025-09-10 11:57:39,466 - test_parameters - INFO - 正确拒绝了无效值41
2025-09-10 11:57:39,466 - test_parameters - INFO - 参数边界测试完成
2025-09-10 11:57:39,467 - RSTPTest - INFO - 测试完成: test_parameter_boundaries (耗时: 3.46秒)
2025-09-10 11:57:39,467 - RSTPTest - INFO - ============================================================

2025-09-10 11:57:39,467 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 11:57:39,468 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 11:57:39,468 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 11:57:39,601 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 11:57:39,601 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 11:57:39,721 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 11:57:39,721 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 11:57:39,856 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 11:57:39,856 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 11:57:39,857 - RSTPTest - INFO - ============================================================
2025-09-10 11:57:39,857 - RSTPTest - INFO - 开始测试: test_port_role_assignment_simplified
2025-09-10 11:57:39,857 - RSTPTest - INFO - ============================================================
2025-09-10 11:57:39,858 - test_protocol_conformance - INFO - 开始端口角色分配测试
2025-09-10 11:57:39,858 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 11:57:39,859 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 11:57:39,859 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 11:57:39,859 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 11:57:39,859 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 11:57:39,860 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 11:57:39,860 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 11:57:39,866 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 11:57:39,920 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 11:57:39,920 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 11:57:39,921 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 11:57:39,921 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 11:57:40,443 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 11:57:40,443 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 11:57:41,480 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 11:57:41,480 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 11:57:41,481 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 11:57:41,481 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 11:57:41,944 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 11:57:42,433 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 11:57:42,433 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 11:57:42,542 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 11:57:42,639 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 11:57:42,640 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 11:57:42,640 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 11:57:42,640 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 11:57:42,640 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 11:57:42,640 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 11:57:42,640 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 11:57:42,647 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 11:57:42,648 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 11:57:42,769 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 11:57:42,769 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 11:57:42,769 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 11:57:42,770 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 11:57:42,770 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 11:57:43,316 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 11:57:45,186 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 11:57:45,358 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 11:57:45,539 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 11:57:45,713 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 11:57:47,885 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 11:57:48,017 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 11:57:48,017 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 11:57:48,017 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 11:57:48,017 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 11:57:48,017 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 11:57:49,625 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 11:57:50,864 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 11:57:50,865 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 11:57:50,913 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 11:57:51,142 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 11:57:51,142 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 11:57:51,142 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 11:57:51,142 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 11:57:51,143 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 11:57:51,143 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 11:57:51,143 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 11:57:51,150 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 11:57:51,151 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 11:57:59,321 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 11:57:59,322 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 11:57:59,322 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 11:57:59,322 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 11:57:59,322 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 11:58:15,009 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 11:58:16,865 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 11:58:17,052 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 11:58:17,231 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 11:58:17,412 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 11:58:19,585 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 11:58:19,714 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 11:58:19,715 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 11:58:19,715 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 11:58:19,715 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 11:58:19,715 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 11:58:21,309 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 11:58:22,550 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 11:58:22,551 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 11:58:22,599 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 11:58:22,822 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 11:58:22,823 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 11:58:22,823 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 11:58:23,019 - test_protocol_conformance - INFO - 等待网络收敛...
2025-09-10 11:58:23,019 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 11:58:23,325 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 11:58:23,479 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.46秒
2025-09-10 11:58:23,778 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 11:58:24,234 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 11:58:24,395 - test_protocol_conformance - INFO - DUT是根桥: True
2025-09-10 11:58:24,395 - test_protocol_conformance - INFO - 活动端口角色: {}
2025-09-10 11:58:24,395 - test_protocol_conformance - INFO - 禁用端口: ['eth0', 'eth2', 'eth3']
2025-09-10 11:58:24,434 - RSTPTest - INFO - 测试完成: test_port_role_assignment_simplified (耗时: 44.58秒)
2025-09-10 11:58:24,434 - RSTPTest - INFO - ============================================================

2025-09-10 11:58:24,436 - RSTPTest - INFO - ============================================================
2025-09-10 11:58:24,436 - RSTPTest - INFO - 开始测试: test_root_bridge_election
2025-09-10 11:58:24,436 - RSTPTest - INFO - ============================================================
2025-09-10 11:58:24,436 - test_protocol_conformance - INFO - 开始根网桥选举测试
2025-09-10 11:58:24,437 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 11:58:24,437 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 11:58:24,437 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 11:58:24,437 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 11:58:24,437 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 11:58:24,437 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 11:58:24,437 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 11:58:24,438 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 11:58:24,950 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 11:58:24,950 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 11:58:25,990 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 11:58:25,991 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 11:58:25,991 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 11:58:25,991 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 11:58:26,447 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 11:58:26,927 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 11:58:26,927 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 11:58:27,030 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 11:58:27,126 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 11:58:27,126 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 11:58:27,127 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 11:58:27,127 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 11:58:27,127 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 11:58:27,127 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 11:58:27,127 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 11:58:27,127 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 11:58:27,633 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 11:58:29,473 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 11:58:29,644 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 11:58:29,829 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 11:58:30,007 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 11:58:32,176 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 11:58:32,311 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 11:58:32,311 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 11:58:32,312 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 11:58:32,312 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 11:58:32,312 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 11:58:33,518 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 11:58:34,740 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 11:58:34,740 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 11:58:34,789 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 11:58:35,013 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 11:58:35,013 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 11:58:35,013 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 11:58:35,014 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 11:58:35,014 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 11:58:35,014 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 11:58:35,015 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 11:58:35,015 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 11:58:35,535 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 11:58:46,418 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 11:58:46,594 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 11:58:46,768 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 11:58:46,936 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 11:58:49,118 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 11:58:49,254 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 11:58:49,255 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 11:58:49,255 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 11:58:49,255 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 11:58:49,256 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 11:58:50,871 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 11:58:52,142 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 11:58:52,142 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 11:58:52,191 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 11:58:52,412 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 11:58:52,412 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 11:58:52,412 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 11:58:55,413 - test_protocol_conformance - INFO - === 检查DUT网桥配置 ===
2025-09-10 11:58:55,420 - test_protocol_conformance - INFO - 找到测试网桥: br0
2025-09-10 11:58:55,471 - test_protocol_conformance - INFO - 启用br0的RSTP
2025-09-10 11:58:55,518 - test_protocol_conformance - INFO - br0 STP状态: ('', 'cat: /sys/class/net/br0/bridge/stp_state: No such file or directory\n', 1)
2025-09-10 11:58:55,519 - test_protocol_conformance - INFO - === 初始网桥状态 ===
2025-09-10 11:58:55,820 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 11:58:55,982 - test_protocol_conformance - INFO - 活动端口数: 0
2025-09-10 11:58:55,983 - test_protocol_conformance - WARNING - 活动端口不足，尝试启用更多端口
2025-09-10 11:58:59,572 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 11:58:59,727 - test_protocol_conformance - INFO - 初始端口状态:
2025-09-10 11:58:59,727 - test_protocol_conformance - INFO - 初始状态 - DUT有Root Port: False
2025-09-10 11:58:59,727 - test_protocol_conformance - INFO - === 配置网桥优先级 ===
2025-09-10 11:58:59,727 - test_protocol_conformance - INFO - 设置TestNode1优先级为16384
2025-09-10 11:58:59,865 - test_protocol_conformance - INFO - 设置DUT优先级为32768
2025-09-10 11:58:59,876 - test_protocol_conformance - INFO - ip命令设置结果: ('', 'RTNETLINK answers: Operation not supported\n', 2)
2025-09-10 11:58:59,927 - test_protocol_conformance - INFO - sysfs设置结果: ('32768\n', 'tee: /sys/class/net/br0/bridge/priority: No such file or directory\n', 1)
2025-09-10 11:58:59,927 - test_protocol_conformance - INFO - 设置TestNode2优先级为24576
2025-09-10 11:59:00,070 - test_protocol_conformance - INFO - 等待RSTP收敛...
2025-09-10 11:59:10,071 - test_protocol_conformance - INFO - === 第一阶段验证 ===
2025-09-10 11:59:10,326 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 11:59:10,534 - test_protocol_conformance - INFO - DUT当前优先级: 
2025-09-10 11:59:10,535 - test_protocol_conformance - WARNING - 优先级验证失败: 优先级设置失败，期望32768，实际
assert '' == '32768'
  
  [0m[91m- 32768[39;49;00m[90m[39;49;00m
2025-09-10 11:59:10,535 - test_protocol_conformance - INFO - 
=== 第二阶段：DUT应成为根桥 ===
2025-09-10 11:59:10,535 - test_protocol_conformance - INFO - 设置DUT优先级为12288（最低）
2025-09-10 11:59:10,689 - test_protocol_conformance - INFO - 设置后优先级: 
2025-09-10 11:59:10,690 - test_protocol_conformance - INFO - 等待RSTP重新收敛...
2025-09-10 11:59:20,690 - test_protocol_conformance - INFO - === 最终验证 ===
2025-09-10 11:59:20,945 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 11:59:21,102 - test_protocol_conformance - ERROR - DUT RSTP实现问题诊断:
2025-09-10 11:59:21,103 - test_protocol_conformance - ERROR - 1. DUT优先级已设置为12288（最低）
2025-09-10 11:59:21,103 - test_protocol_conformance - ERROR - 2. 但DUT仍有Root Port: False
2025-09-10 11:59:21,103 - test_protocol_conformance - ERROR - 3. Designated端口数: 0
2025-09-10 11:59:21,103 - test_protocol_conformance - ERROR - 可能的原因:
2025-09-10 11:59:21,103 - test_protocol_conformance - ERROR - - DUT的RSTP实现不符合标准
2025-09-10 11:59:21,104 - test_protocol_conformance - ERROR - - DUT没有正确处理优先级变化
2025-09-10 11:59:21,104 - test_protocol_conformance - ERROR - - DUT的BPDU发送/接收有问题
2025-09-10 11:59:21,143 - RSTPTest - INFO - 测试完成: test_root_bridge_election (耗时: 56.71秒)
2025-09-10 11:59:21,143 - RSTPTest - INFO - ============================================================

2025-09-10 11:59:21,146 - RSTPTest - INFO - ============================================================
2025-09-10 11:59:21,147 - RSTPTest - INFO - 开始测试: test_port_role_assignment
2025-09-10 11:59:21,147 - RSTPTest - INFO - ============================================================
2025-09-10 11:59:21,148 - test_protocol_conformance - INFO - 开始端口角色分配测试
2025-09-10 11:59:21,148 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 11:59:21,148 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 11:59:21,149 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 11:59:21,149 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 11:59:21,149 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 11:59:21,149 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 11:59:21,149 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 11:59:21,149 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 11:59:21,620 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 11:59:21,621 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 11:59:22,665 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 11:59:22,666 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 11:59:22,666 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 11:59:22,666 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 11:59:23,125 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 11:59:23,602 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 11:59:23,602 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 11:59:23,705 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 11:59:23,802 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 11:59:23,802 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 11:59:23,802 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 11:59:23,802 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 11:59:23,802 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 11:59:23,803 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 11:59:23,803 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 11:59:23,803 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 11:59:24,316 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 11:59:26,165 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 11:59:26,336 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 11:59:26,515 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 11:59:26,692 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 11:59:28,864 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 11:59:28,996 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 11:59:28,997 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 11:59:28,997 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 11:59:28,997 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 11:59:28,997 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 11:59:30,224 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 11:59:31,432 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 11:59:31,433 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 11:59:31,482 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 11:59:31,703 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 11:59:31,703 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 11:59:31,703 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 11:59:31,703 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 11:59:31,703 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 11:59:31,704 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 11:59:31,704 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 11:59:31,704 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 11:59:32,211 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 11:59:34,060 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 11:59:34,241 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 11:59:34,425 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 11:59:34,596 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 11:59:36,765 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 11:59:36,914 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 11:59:36,915 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 11:59:36,915 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 11:59:36,915 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 11:59:36,915 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 11:59:38,120 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 11:59:39,389 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 11:59:39,389 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 11:59:39,438 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 11:59:39,660 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 11:59:39,661 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 11:59:39,661 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 11:59:42,871 - test_protocol_conformance - INFO - 启用DUT的网桥接口...
2025-09-10 11:59:42,998 - test_protocol_conformance - INFO - 已启用接口 eth0
2025-09-10 11:59:43,169 - test_protocol_conformance - INFO - 已启用接口 eth1
2025-09-10 11:59:43,339 - test_protocol_conformance - INFO - 已启用接口 eth2
2025-09-10 11:59:46,346 - test_protocol_conformance - INFO - br0 网桥接口状态:
('18: veth45650b3@if17: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 master br-b2bd2c7fedc8 state forwarding priority 32 cost 2 \n26: veth6d7f1eb@if25: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 master br-b2bd2c7fedc8 state forwarding priority 32 cost 2 \n16580: veth040ac9d@if16579: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 master br-b2bd2c7fedc8 state forwarding priority 32 cost 2 \n', '', 0)
2025-09-10 11:59:46,394 - test_protocol_conformance - INFO - br0 状态:
('5: br0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1508 qdisc mq state UP mode DEFAULT group default qlen 1000\n    link/ether 90:12:10:b5:7d:f7 brd ff:ff:ff:ff:ff:ff\n    altname enp0s30f4\n', '', 0)
2025-09-10 11:59:46,441 - test_protocol_conformance - INFO - br0 STP状态:
('', 'cat: /sys/class/net/br0/bridge/stp_state: No such file or directory\n', 1)
2025-09-10 11:59:46,441 - test_protocol_conformance - INFO - 获取初始网桥状态...
2025-09-10 11:59:46,740 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 11:59:46,898 - test_protocol_conformance - INFO - Bridge ID: 未获取
2025-09-10 11:59:46,898 - test_protocol_conformance - INFO - Root ID: 未获取
2025-09-10 11:59:46,898 - test_protocol_conformance - INFO - Root Port: eth0
2025-09-10 11:59:46,898 - test_protocol_conformance - INFO - 协议版本: unknown
2025-09-10 11:59:46,899 - test_protocol_conformance - INFO - 端口 eth0: 角色=root, 状态=disabled, 成本=0
2025-09-10 11:59:46,899 - test_protocol_conformance - INFO - 端口 eth2: 角色=unknown, 状态=disabled, 成本=0
2025-09-10 11:59:46,899 - test_protocol_conformance - INFO - 端口 eth3: 角色=unknown, 状态=disabled, 成本=0
2025-09-10 11:59:46,899 - test_protocol_conformance - INFO - 等待网络收敛...
2025-09-10 11:59:46,899 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 11:59:47,196 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 11:59:47,355 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.46秒
2025-09-10 11:59:47,651 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 11:59:47,805 - test_protocol_conformance - INFO - 收敛后的端口状态:
2025-09-10 11:59:47,806 - test_protocol_conformance - INFO - 端口 eth0: 角色=root, 状态=disabled, 成本=0
2025-09-10 11:59:47,806 - test_protocol_conformance - INFO - 端口 eth2: 角色=unknown, 状态=disabled, 成本=0
2025-09-10 11:59:47,806 - test_protocol_conformance - INFO - 端口 eth3: 角色=unknown, 状态=disabled, 成本=0
2025-09-10 11:59:48,104 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 11:59:48,257 - test_protocol_conformance - INFO - is_root_bridge() 返回: True
2025-09-10 11:59:48,258 - test_protocol_conformance - INFO - 有Root Port: False
2025-09-10 11:59:48,258 - test_protocol_conformance - INFO - 最终判定 - DUT是根桥: True
2025-09-10 11:59:48,258 - test_protocol_conformance - INFO - 活动端口数: 0
2025-09-10 11:59:48,258 - test_protocol_conformance - INFO - 禁用端口: ['eth0', 'eth2', 'eth3']
2025-09-10 11:59:48,258 - test_protocol_conformance - WARNING - 活动端口不足，尝试启用禁用的端口...
2025-09-10 11:59:48,259 - test_protocol_conformance - INFO - 尝试启用端口 eth0
2025-09-10 11:59:48,426 - test_protocol_conformance - INFO - 尝试启用端口 eth2
2025-09-10 11:59:53,849 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 11:59:54,005 - test_protocol_conformance - INFO - 重新配置后 - 活动端口数: 0
2025-09-10 11:59:54,005 - test_protocol_conformance - INFO - 重新配置后 - 禁用端口: ['eth0', 'eth2', 'eth3']
2025-09-10 11:59:54,005 - test_protocol_conformance - INFO - 端口角色分布: {}
2025-09-10 11:59:54,043 - RSTPTest - INFO - 测试完成: test_port_role_assignment (耗时: 32.90秒)
2025-09-10 11:59:54,043 - RSTPTest - INFO - ============================================================

2025-09-10 11:59:54,046 - RSTPTest - INFO - ============================================================
2025-09-10 11:59:54,047 - RSTPTest - INFO - 开始测试: test_rstp_protocol_verification
2025-09-10 11:59:54,047 - RSTPTest - INFO - ============================================================
2025-09-10 11:59:54,047 - test_protocol_conformance - INFO - 开始RSTP协议验证
2025-09-10 11:59:54,048 - test_protocol_conformance - INFO - === 检查OVS配置 ===
2025-09-10 11:59:54,057 - test_protocol_conformance - INFO - 当前OVS配置:
8c812ea9-3b0c-46a1-bd3c-ef3904d38c1a
    Bridge SE_ETH4
        Port SE_ETH4
            Interface SE_ETH4
                type: internal
    Bridge SE_ETH6
        Port SE_ETH6
            Interface SE_ETH6
                type: internal
    Bridge rstp0
        Port rstp0
            Interface rstp0
                type: internal
    Bridge br0
        Port eth0
            Interface eth0
                error: "could not open network device eth0 (No such device)"
        Port br0
            
2025-09-10 11:59:54,109 - test_protocol_conformance - INFO - 使用现有网桥 SE_ETH2，端口: ['br3', 'br4']
2025-09-10 11:59:54,109 - test_protocol_conformance - INFO - === 配置RSTP（确保是RSTP而不是STP）===
2025-09-10 11:59:55,222 - test_protocol_conformance - INFO - 启用RSTP...
2025-09-10 11:59:55,240 - test_protocol_conformance - INFO - ✓ RSTP已启用
2025-09-10 11:59:55,241 - test_protocol_conformance - INFO - 设置RSTP参数...
2025-09-10 11:59:55,293 - test_protocol_conformance - INFO - ✓ 设置: rstp-hello-time=2
2025-09-10 11:59:55,346 - test_protocol_conformance - INFO - ✓ 设置: rstp-forward-delay=4
2025-09-10 11:59:55,397 - test_protocol_conformance - INFO - ✓ 设置: rstp-max-age=6
2025-09-10 11:59:55,449 - test_protocol_conformance - INFO - ✓ 设置: rstp-priority=32768
2025-09-10 11:59:55,501 - test_protocol_conformance - INFO - ✓ 设置: rstp-force-protocol-version=2
2025-09-10 11:59:55,653 - test_protocol_conformance - INFO - ✓ 端口 br3 RSTP已启用
2025-09-10 11:59:55,805 - test_protocol_conformance - INFO - ✓ 端口 br4 RSTP已启用
2025-09-10 11:59:55,858 - test_protocol_conformance - INFO - 等待RSTP初始化...
2025-09-10 12:00:00,859 - test_protocol_conformance - INFO - === 验证RSTP配置 ===
2025-09-10 12:00:00,867 - test_protocol_conformance - INFO - RSTP状态:
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     6s
  stp-fwd-delay   4s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 12:00:00,869 - test_protocol_conformance - INFO - ✓ 使用RSTP时间参数
2025-09-10 12:00:00,869 - test_protocol_conformance - INFO - === 创建测试拓扑 ===
2025-09-10 12:00:00,869 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 12:00:00,869 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 12:00:00,869 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 12:00:00,870 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 12:00:00,870 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 12:00:00,870 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 12:00:00,870 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 12:00:00,871 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 12:00:01,377 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 12:00:01,377 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 12:00:02,413 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 12:00:02,413 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 12:00:02,413 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 12:00:02,413 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 12:00:02,877 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 12:00:03,362 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 12:00:03,362 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 12:00:03,465 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 12:00:03,561 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 12:00:03,561 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 12:00:03,561 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 12:00:03,561 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 12:00:03,562 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 12:00:03,562 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 12:00:03,562 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 12:00:03,562 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 12:00:04,113 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 12:00:05,978 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 12:00:06,219 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 12:00:06,400 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 12:00:06,577 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 12:00:08,748 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 12:00:08,884 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 12:00:08,884 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 12:00:08,885 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 12:00:08,885 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 12:00:08,885 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 12:00:10,125 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 12:00:11,347 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 12:00:11,347 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 12:00:11,395 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 12:00:11,620 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 12:00:11,620 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 12:00:11,620 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 12:00:11,620 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 12:00:11,621 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 12:00:11,621 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 12:00:11,621 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 12:00:11,621 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 12:00:12,123 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 12:00:13,981 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 12:00:14,155 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 12:00:14,333 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 12:00:14,512 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 12:00:16,692 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 12:00:16,830 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 12:00:16,830 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 12:00:16,830 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 12:00:16,830 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 12:00:16,830 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 12:00:18,048 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 12:00:19,454 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 12:00:19,454 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 12:00:19,503 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 12:00:19,726 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 12:00:19,727 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 12:00:19,727 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 12:00:24,727 - test_protocol_conformance - INFO - === 捕获BPDU ===
2025-09-10 12:00:24,728 - test_protocol_conformance - INFO - 在 SE_ETH2 上捕获BPDU...
2025-09-10 12:00:24,728 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: SE_ETH2, 数量: 10)
2025-09-10 12:00:34,770 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-10 12:00:34,770 - test_protocol_conformance - INFO - 在 br3 上捕获BPDU...
2025-09-10 12:00:34,770 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br3, 数量: 10)
2025-09-10 12:00:44,853 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-10 12:00:44,854 - test_protocol_conformance - INFO - 在 br4 上捕获BPDU...
2025-09-10 12:00:44,854 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br4, 数量: 10)
2025-09-10 12:00:55,001 - RSTPAnalyzer_DUT - INFO - 捕获到 3 个BPDU包
2025-09-10 12:00:55,002 - test_protocol_conformance - INFO - ✓ 捕获到 3 个BPDU
2025-09-10 12:00:55,002 - test_protocol_conformance - INFO - === 分析BPDU ===
2025-09-10 12:00:55,002 - test_protocol_conformance - INFO - 第一个BPDU信息: {'timestamp': '12:00:47.767432', 'raw': '12:00:47.767432 00:e0:0c:25:0c:01 > 01:80:c2:00:00:00, 802.3, length 39: LLC, dsap STP (0x42) Individual, ssap STP (0x42) Command, ctrl 0x03: STP 802.1w, Rapid STP, Flags [Learn, Forward, Agreement], bridge-id 8000.6e:b3:08:fa:01:34.8002, length 36', 'is_rstp': False}
2025-09-10 12:00:55,003 - test_protocol_conformance - INFO - BPDU统计: RSTP=0, STP=3
2025-09-10 12:00:55,003 - test_protocol_conformance - WARNING - 检测到更多STP BPDU
2025-09-10 12:00:55,078 - test_protocol_conformance - INFO - rstp_enable状态: true
2025-09-10 12:00:55,169 - test_protocol_conformance - INFO - stp_enable状态: false
2025-09-10 12:00:55,249 - test_protocol_conformance - WARNING - OVS配置为RSTP但发送STP BPDU，可能是实现限制
2025-09-10 12:00:55,250 - test_protocol_conformance - INFO - 基于配置判断为RSTP
2025-09-10 12:00:55,250 - test_protocol_conformance - INFO - ✓ RSTP协议验证通过（检测到 3 个RSTP BPDU）
2025-09-10 12:00:55,251 - RSTPTest - INFO - 测试完成: test_rstp_protocol_verification (耗时: 61.20秒)
2025-09-10 12:00:55,251 - RSTPTest - INFO - ============================================================

2025-09-10 12:00:55,252 - RSTPTest - INFO - ============================================================
2025-09-10 12:00:55,253 - RSTPTest - INFO - 开始测试: test_alternate_port_verification
2025-09-10 12:00:55,253 - RSTPTest - INFO - ============================================================
2025-09-10 12:00:55,253 - test_protocol_conformance - INFO - 开始Alternate Port验证测试
2025-09-10 12:00:55,253 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 12:00:55,254 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 12:00:55,254 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 12:00:55,254 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 12:00:55,254 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 12:00:55,254 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 12:00:55,255 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 12:00:55,255 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 12:00:55,752 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 12:00:55,752 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 12:00:56,785 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 12:00:56,786 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 12:00:56,786 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 12:00:56,786 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 12:00:57,245 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 12:00:57,733 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 12:00:57,734 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 12:00:57,843 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 12:00:57,944 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 12:00:57,945 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 12:00:57,945 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 12:00:57,945 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 12:00:57,945 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 12:00:57,946 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 12:00:57,946 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 12:00:57,946 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 12:00:58,441 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 12:01:00,291 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 12:01:00,472 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 12:01:00,642 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 12:01:00,809 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 12:01:02,979 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 12:01:03,111 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 12:01:03,112 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 12:01:03,112 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 12:01:03,112 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 12:01:03,112 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 12:01:04,315 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 12:01:05,532 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 12:01:05,532 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 12:01:05,580 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 12:01:05,804 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 12:01:05,805 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 12:01:05,805 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 12:01:05,805 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 12:01:05,805 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 12:01:05,805 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 12:01:05,806 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 12:01:05,806 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 12:01:06,321 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 12:01:08,150 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 12:01:08,327 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 12:01:08,509 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 12:01:08,683 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 12:01:10,853 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 12:01:10,984 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 12:01:10,984 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 12:01:10,985 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 12:01:10,985 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 12:01:10,985 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 12:01:12,222 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 12:01:13,487 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 12:01:13,487 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 12:01:13,536 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 12:01:13,760 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 12:01:13,760 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 12:01:13,760 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 12:01:13,760 - test_protocol_conformance - INFO - 设置网桥优先级
2025-09-10 12:01:14,103 - test_protocol_conformance - INFO - 等待RSTP收敛...
2025-09-10 12:01:14,104 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 12:01:14,355 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 12:01:14,512 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.41秒
2025-09-10 12:01:14,811 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 12:01:14,968 - test_protocol_conformance - INFO - DUT桥信息: BridgeInfo(bridge_id='', root_id='', root_port='eth2', root_path_cost=0, protocol_version='unknown', hello_time=0, forward_delay=0, max_age=0, topology_changes=0, ports={'eth0': PortInfo(name='eth0', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth2': PortInfo(name='eth2', role=<PortRole.ROOT: 'root'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth3': PortInfo(name='eth3', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')})
2025-09-10 12:01:15,266 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 12:01:15,459 - RSTPTest - INFO - 测试完成: test_alternate_port_verification (耗时: 20.21秒)
2025-09-10 12:01:15,460 - RSTPTest - INFO - ============================================================

2025-09-10 12:01:15,462 - RSTPTest - INFO - ============================================================
2025-09-10 12:01:15,462 - RSTPTest - INFO - 开始测试: test_port_state_transitions
2025-09-10 12:01:15,462 - RSTPTest - INFO - ============================================================
2025-09-10 12:01:15,463 - test_protocol_conformance - INFO - 开始端口状态转换测试
2025-09-10 12:01:15,463 - NetworkTopology - INFO - 创建RSTP线性拓扑...
2025-09-10 12:01:15,464 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 12:01:15,464 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 12:01:15,464 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 12:01:15,464 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 12:01:15,464 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 12:01:15,465 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 12:01:15,465 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 12:01:15,935 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 12:01:15,935 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 12:01:16,969 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 12:01:16,969 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 12:01:16,969 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth2']
2025-09-10 12:01:16,969 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 12:01:17,428 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 12:01:17,428 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 12:01:17,532 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 12:01:17,627 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 12:01:17,628 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 12:01:17,628 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 12:01:17,628 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 12:01:17,628 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 12:01:17,629 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 12:01:17,629 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 12:01:17,629 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 12:01:18,127 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 12:01:19,989 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 12:01:20,170 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 12:01:20,352 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 12:01:20,535 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 12:01:22,717 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 12:01:22,877 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 12:01:22,877 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 12:01:22,878 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 12:01:22,878 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 12:01:22,878 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 12:01:24,083 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 12:01:25,288 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 12:01:25,288 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 12:01:25,337 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 12:01:25,552 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 12:01:25,552 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 12:01:25,553 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 12:01:25,553 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 12:01:25,553 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 12:01:25,553 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 12:01:25,553 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 12:01:25,554 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 12:01:26,064 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 12:01:27,912 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 12:01:28,082 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 12:01:28,257 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 12:01:28,435 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 12:01:30,610 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 12:01:30,740 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 12:01:30,740 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 12:01:30,740 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 12:01:30,740 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0']
2025-09-10 12:01:30,741 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 12:01:31,967 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 12:01:31,968 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 12:01:32,019 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 12:01:32,240 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 12:01:32,240 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 12:01:32,241 - NetworkTopology - INFO - 线性拓扑创建完成
2025-09-10 12:01:32,444 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-10 12:01:32,445 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 12:01:32,723 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 12:01:32,884 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.44秒
2025-09-10 12:01:33,182 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 12:01:33,370 - RSTPTest - INFO - 测试完成: test_port_state_transitions (耗时: 17.91秒)
2025-09-10 12:01:33,370 - RSTPTest - INFO - ============================================================

2025-09-10 12:01:33,372 - RSTPTest - INFO - ============================================================
2025-09-10 12:01:33,372 - RSTPTest - INFO - 开始测试: test_bpdu_propagation_and_keepalive
2025-09-10 12:01:33,372 - RSTPTest - INFO - ============================================================
2025-09-10 12:01:33,373 - test_protocol_conformance - INFO - 开始BPDU传播和保活机制测试
2025-09-10 12:01:33,373 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 12:01:33,373 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 12:01:33,373 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 12:01:33,374 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 12:01:33,374 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 12:01:33,374 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 12:01:33,374 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 12:01:33,374 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 12:01:33,859 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 12:01:33,859 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 12:01:34,904 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 12:01:34,904 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 12:01:34,904 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 12:01:34,904 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 12:01:35,364 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 12:01:35,840 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 12:01:35,840 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 12:01:35,943 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 12:01:36,039 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 12:01:36,039 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 12:01:36,040 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 12:01:36,040 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 12:01:36,040 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 12:01:36,040 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 12:01:36,040 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 12:01:36,040 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 12:01:36,532 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 12:01:38,390 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 12:01:38,568 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 12:01:38,740 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 12:01:38,913 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 12:01:41,081 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 12:01:41,216 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 12:01:41,216 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 12:01:41,216 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 12:01:41,216 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 12:01:41,217 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 12:01:42,452 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 12:01:43,691 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 12:01:43,691 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 12:01:43,740 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 12:01:43,970 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 12:01:43,970 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 12:01:43,970 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 12:01:43,971 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 12:01:43,971 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 12:01:43,971 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 12:01:43,971 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 12:01:43,971 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 12:01:44,493 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 12:01:46,353 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 12:01:46,524 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 12:01:46,695 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 12:01:46,874 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 12:01:49,049 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 12:01:49,188 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 12:01:49,188 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 12:01:49,189 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 12:01:49,189 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 12:01:49,189 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 12:01:50,408 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 12:01:51,679 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 12:01:51,679 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 12:01:51,728 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 12:01:51,946 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 12:01:51,946 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 12:01:51,947 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 12:01:52,282 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-10 12:01:52,283 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 12:01:52,540 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 12:01:52,696 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.41秒
2025-09-10 12:01:52,994 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 12:01:53,147 - test_protocol_conformance - INFO - Hello Time: 0秒
2025-09-10 12:01:53,148 - test_protocol_conformance - INFO - 开始捕获BPDU报文
2025-09-10 12:01:53,183 - RSTPTest - INFO - 测试完成: test_bpdu_propagation_and_keepalive (耗时: 19.81秒)
2025-09-10 12:01:53,184 - RSTPTest - INFO - ============================================================

2025-09-10 12:01:53,186 - RSTPTest - INFO - ============================================================
2025-09-10 12:01:53,186 - RSTPTest - INFO - 开始测试: test_disabled_port_exclusion
2025-09-10 12:01:53,186 - RSTPTest - INFO - ============================================================
2025-09-10 12:01:53,187 - test_protocol_conformance - INFO - 开始禁用端口排除测试
2025-09-10 12:01:53,188 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 12:01:53,188 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 12:01:53,188 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 12:01:53,188 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 12:01:53,189 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 12:01:53,189 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 12:01:53,189 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 12:01:53,189 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 12:01:53,667 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 12:01:53,667 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 12:01:54,704 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 12:01:54,704 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 12:01:54,704 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 12:01:54,705 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 12:01:55,302 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 12:01:55,794 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 12:01:55,795 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 12:01:55,900 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 12:01:55,996 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 12:01:55,996 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 12:01:55,996 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 12:01:55,996 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 12:01:55,997 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 12:01:55,997 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 12:01:55,997 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 12:01:55,997 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 12:01:56,515 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 12:01:58,351 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 12:01:58,530 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 12:01:58,708 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 12:01:58,881 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 12:02:01,054 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 12:02:01,191 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 12:02:01,192 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 12:02:01,192 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 12:02:01,192 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 12:02:01,192 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 12:02:02,400 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 12:02:03,630 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 12:02:03,630 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 12:02:03,678 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 12:02:03,893 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 12:02:03,893 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 12:02:03,893 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 12:02:03,893 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 12:02:03,893 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 12:02:03,894 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 12:02:03,894 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 12:02:03,894 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 12:02:04,405 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 12:02:06,271 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 12:02:06,447 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 12:02:06,629 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 12:02:06,803 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 12:02:08,985 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 12:02:09,132 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 12:02:09,133 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 12:02:09,133 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 12:02:09,133 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 12:02:09,134 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 12:02:10,362 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 12:02:11,615 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 12:02:11,616 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 12:02:11,664 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 12:02:11,879 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 12:02:11,880 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 12:02:11,880 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 12:02:12,082 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-10 12:02:12,083 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 12:02:12,367 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 12:02:12,524 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.44秒
2025-09-10 12:02:12,822 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 12:02:12,979 - test_protocol_conformance - INFO - 所有端口信息: {'eth0': PortInfo(name='eth0', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth2': PortInfo(name='eth2', role=<PortRole.ROOT: 'root'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth3': PortInfo(name='eth3', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')}
2025-09-10 12:02:13,133 - test_protocol_conformance - INFO - RSTP show输出 (code=0): 1
1
---- rstp0 ----
Root ID:
  stp-priority    32768
  stp-system-id   7e:88:1d:ec:f0:4e
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    32768
  stp-system-id   7e:88:1d:ec:f0:4e
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------


2025-09-10 12:02:13,134 - test_protocol_conformance - INFO - 初始活动端口: []
2025-09-10 12:02:13,134 - test_protocol_conformance - INFO - 没有找到活动端口，使用所有端口
2025-09-10 12:02:13,134 - test_protocol_conformance - INFO - 选择端口eth0进行禁用测试
2025-09-10 12:02:13,135 - test_protocol_conformance - INFO - 禁用端口eth0
2025-09-10 12:02:13,135 - FaultInjector_DUT - INFO - 断开链路: eth0
2025-09-10 12:02:13,394 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth0 (code=1)，将在逻辑上标记为已断开
2025-09-10 12:02:13,394 - test_protocol_conformance - INFO - 禁用命令结果: ('', '', 0)
2025-09-10 12:02:13,554 - test_protocol_conformance - INFO - 端口eth0配置: stdout='1
1
{rstp-enable="true", stp-enable="true", stp-path-cost="20000"}
', stderr='', code=0
2025-09-10 12:02:28,813 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 12:02:28,919 - test_protocol_conformance - INFO - 禁用后所有端口状态: [('eth0', 'disabled'), ('eth2', 'disabled'), ('eth3', 'disabled')]
2025-09-10 12:02:28,919 - test_protocol_conformance - INFO - 端口eth0状态: disabled, 角色: root
2025-09-10 12:02:28,919 - test_protocol_conformance - INFO - 禁用后活动端口: []
2025-09-10 12:02:28,920 - test_protocol_conformance - INFO - 活动端口数量: 0, 初始活动端口数量: 3
2025-09-10 12:02:28,920 - test_protocol_conformance - INFO - 禁用后端口角色分布: {}
2025-09-10 12:02:29,217 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 12:02:29,319 - test_protocol_conformance - INFO - 重新启用端口eth0
2025-09-10 12:02:29,319 - FaultInjector_DUT - INFO - 恢复链路: eth0
2025-09-10 12:02:29,581 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth0 (code=1)，将在逻辑上标记为已恢复
2025-09-10 12:02:44,842 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 12:02:44,947 - test_protocol_conformance - INFO - ✓ 端口eth0已重新启用，状态: forwarding
2025-09-10 12:02:44,985 - RSTPTest - INFO - 测试完成: test_disabled_port_exclusion (耗时: 51.80秒)
2025-09-10 12:02:44,985 - RSTPTest - INFO - ============================================================

2025-09-10 12:02:44,988 - RSTPTest - INFO - ============================================================
2025-09-10 12:02:44,988 - RSTPTest - INFO - 开始测试: test_topology_change_notification
2025-09-10 12:02:44,988 - RSTPTest - INFO - ============================================================
2025-09-10 12:02:44,989 - test_protocol_conformance - INFO - 开始拓扑变更通知测试
2025-09-10 12:02:44,989 - test_protocol_conformance - INFO - === 步骤1: 创建多网桥环形拓扑 ===
2025-09-10 12:02:45,335 - test_protocol_conformance - INFO - 创建网桥 rstp1 (优先级: 32768)
2025-09-10 12:02:45,571 - test_protocol_conformance - INFO - 创建网桥 rstp2 (优先级: 36864)
2025-09-10 12:02:45,807 - test_protocol_conformance - INFO - 创建网桥 rstp3 (优先级: 40960)
2025-09-10 12:02:46,251 - test_protocol_conformance - INFO - ✓ 连接 rstp1 <-> rstp2
2025-09-10 12:02:46,692 - test_protocol_conformance - INFO - ✓ 连接 rstp2 <-> rstp3
2025-09-10 12:02:47,131 - test_protocol_conformance - INFO - ✓ 连接 rstp3 <-> rstp1
2025-09-10 12:02:47,131 - test_protocol_conformance - INFO - 等待RSTP初始收敛...
2025-09-10 12:02:57,133 - test_protocol_conformance - INFO - === 步骤2: 验证初始RSTP状态 ===
2025-09-10 12:02:57,141 - test_protocol_conformance - INFO - 
rstp1 初始RSTP状态:
2025-09-10 12:02:57,141 - test_protocol_conformance - INFO -   ---- rstp1 ----
2025-09-10 12:02:57,141 - test_protocol_conformance - INFO -   Root ID:
2025-09-10 12:02:57,141 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-10 12:02:57,142 - test_protocol_conformance - INFO -     stp-system-id   02:59:c9:d6:ba:45
2025-09-10 12:02:57,142 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 12:02:57,142 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 12:02:57,142 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 12:02:57,143 - test_protocol_conformance - INFO -     This bridge is the root
2025-09-10 12:02:57,143 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-10 12:02:57,143 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-10 12:02:57,143 - test_protocol_conformance - INFO -     stp-system-id   02:59:c9:d6:ba:45
2025-09-10 12:02:57,143 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 12:02:57,144 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 12:02:57,144 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 12:02:57,144 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 12:02:57,144 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-10 12:02:57,144 - test_protocol_conformance - INFO -     veth12a    Designated Forwarding 2000     128.1
2025-09-10 12:02:57,145 - test_protocol_conformance - INFO -     veth31b    Designated Forwarding 2000     128.2
2025-09-10 12:02:57,145 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-10 12:02:57,145 - test_protocol_conformance - INFO -   → 有转发端口
2025-09-10 12:02:57,191 - test_protocol_conformance - INFO - 
rstp2 初始RSTP状态:
2025-09-10 12:02:57,191 - test_protocol_conformance - INFO -   ---- rstp2 ----
2025-09-10 12:02:57,191 - test_protocol_conformance - INFO -   Root ID:
2025-09-10 12:02:57,191 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-10 12:02:57,191 - test_protocol_conformance - INFO -     stp-system-id   02:59:c9:d6:ba:45
2025-09-10 12:02:57,192 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 12:02:57,192 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 12:02:57,192 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 12:02:57,192 - test_protocol_conformance - INFO -     root-port       veth12b
2025-09-10 12:02:57,192 - test_protocol_conformance - INFO -     root-path-cost  2000
2025-09-10 12:02:57,192 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-10 12:02:57,192 - test_protocol_conformance - INFO -     stp-priority    36864
2025-09-10 12:02:57,192 - test_protocol_conformance - INFO -     stp-system-id   3e:8a:56:c0:9c:42
2025-09-10 12:02:57,193 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 12:02:57,193 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 12:02:57,193 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 12:02:57,193 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 12:02:57,193 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-10 12:02:57,193 - test_protocol_conformance - INFO -     veth12b    Root       Forwarding 2000     128.1
2025-09-10 12:02:57,194 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-10 12:02:57,194 - test_protocol_conformance - INFO -   → 有转发端口
2025-09-10 12:02:57,241 - test_protocol_conformance - INFO - 
rstp3 初始RSTP状态:
2025-09-10 12:02:57,242 - test_protocol_conformance - INFO -   ---- rstp3 ----
2025-09-10 12:02:57,242 - test_protocol_conformance - INFO -   Root ID:
2025-09-10 12:02:57,242 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-10 12:02:57,242 - test_protocol_conformance - INFO -     stp-system-id   02:59:c9:d6:ba:45
2025-09-10 12:02:57,242 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 12:02:57,242 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 12:02:57,243 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 12:02:57,243 - test_protocol_conformance - INFO -     root-port       veth31a
2025-09-10 12:02:57,243 - test_protocol_conformance - INFO -     root-path-cost  2000
2025-09-10 12:02:57,243 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-10 12:02:57,243 - test_protocol_conformance - INFO -     stp-priority    40960
2025-09-10 12:02:57,243 - test_protocol_conformance - INFO -     stp-system-id   66:c1:0e:f2:d1:43
2025-09-10 12:02:57,244 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 12:02:57,244 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 12:02:57,244 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 12:02:57,244 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 12:02:57,244 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-10 12:02:57,244 - test_protocol_conformance - INFO -     veth23b    Alternate  Discarding 2000     128.1
2025-09-10 12:02:57,244 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-10 12:02:57,245 - test_protocol_conformance - INFO -   → 有转发端口
2025-09-10 12:02:57,245 - test_protocol_conformance - INFO -   → 有阻塞端口（防环路）
2025-09-10 12:02:57,245 - test_protocol_conformance - INFO - === 步骤3: 分析网络拓扑 ===
2025-09-10 12:02:57,245 - test_protocol_conformance - INFO - ✓ rstp1 是根桥
2025-09-10 12:02:57,245 - test_protocol_conformance - INFO - ✓ 找到阻塞端口: veth23b
2025-09-10 12:02:57,245 - test_protocol_conformance - INFO - === 步骤4: 触发拓扑变更 ===
2025-09-10 12:02:57,246 - test_protocol_conformance - INFO - 断开活动端口: veth31a
2025-09-10 12:03:02,320 - test_protocol_conformance - INFO - ✓ rstp1 状态已变化
2025-09-10 12:03:02,421 - test_protocol_conformance - INFO - ✓ rstp3 状态已变化
2025-09-10 12:03:07,472 - test_protocol_conformance - INFO - === 步骤5: 验证拓扑变更 ===
2025-09-10 12:03:07,479 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: veth12a, 数量: 5)
2025-09-10 12:03:12,563 - RSTPAnalyzer_DUT - INFO - 捕获到 2 个BPDU包
2025-09-10 12:03:12,563 - test_protocol_conformance - INFO - 在 veth12a 捕获到 2 个BPDU
2025-09-10 12:03:12,564 - test_protocol_conformance - INFO - === 步骤6: 最终验证 ===
2025-09-10 12:03:12,564 - test_protocol_conformance - INFO - ✓ 测试通过：检测到拓扑变更
2025-09-10 12:03:12,612 - test_protocol_conformance - INFO - 
========== rstp1 最终状态 ==========
2025-09-10 12:03:12,612 - test_protocol_conformance - INFO - ---- rstp1 ----
2025-09-10 12:03:12,613 - test_protocol_conformance - INFO - Root ID:
2025-09-10 12:03:12,613 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-10 12:03:12,613 - test_protocol_conformance - INFO -   stp-system-id   02:59:c9:d6:ba:45
2025-09-10 12:03:12,613 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 12:03:12,613 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 12:03:12,613 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 12:03:12,613 - test_protocol_conformance - INFO -   This bridge is the root
2025-09-10 12:03:12,614 - test_protocol_conformance - INFO - Bridge ID:
2025-09-10 12:03:12,614 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-10 12:03:12,614 - test_protocol_conformance - INFO -   stp-system-id   02:59:c9:d6:ba:45
2025-09-10 12:03:12,614 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 12:03:12,614 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 12:03:12,614 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 12:03:12,615 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 12:03:12,615 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-10 12:03:12,615 - test_protocol_conformance - INFO -   veth12a    Designated Forwarding 2000     128.1
2025-09-10 12:03:12,615 - test_protocol_conformance - INFO -   veth31b    Designated Forwarding 2000     128.2
2025-09-10 12:03:12,661 - test_protocol_conformance - INFO - 
========== rstp2 最终状态 ==========
2025-09-10 12:03:12,661 - test_protocol_conformance - INFO - ---- rstp2 ----
2025-09-10 12:03:12,661 - test_protocol_conformance - INFO - Root ID:
2025-09-10 12:03:12,662 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-10 12:03:12,662 - test_protocol_conformance - INFO -   stp-system-id   02:59:c9:d6:ba:45
2025-09-10 12:03:12,662 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 12:03:12,662 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 12:03:12,662 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 12:03:12,663 - test_protocol_conformance - INFO -   root-port       veth12b
2025-09-10 12:03:12,663 - test_protocol_conformance - INFO -   root-path-cost  2000
2025-09-10 12:03:12,663 - test_protocol_conformance - INFO - Bridge ID:
2025-09-10 12:03:12,663 - test_protocol_conformance - INFO -   stp-priority    36864
2025-09-10 12:03:12,664 - test_protocol_conformance - INFO -   stp-system-id   3e:8a:56:c0:9c:42
2025-09-10 12:03:12,664 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 12:03:12,664 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 12:03:12,664 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 12:03:12,665 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 12:03:12,665 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-10 12:03:12,665 - test_protocol_conformance - INFO -   veth12b    Root       Forwarding 2000     128.1
2025-09-10 12:03:12,665 - test_protocol_conformance - INFO -   veth23a    Designated Forwarding 2000     128.2
2025-09-10 12:03:12,712 - test_protocol_conformance - INFO - 
========== rstp3 最终状态 ==========
2025-09-10 12:03:12,713 - test_protocol_conformance - INFO - ---- rstp3 ----
2025-09-10 12:03:12,713 - test_protocol_conformance - INFO - Root ID:
2025-09-10 12:03:12,713 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-10 12:03:12,713 - test_protocol_conformance - INFO -   stp-system-id   02:59:c9:d6:ba:45
2025-09-10 12:03:12,714 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 12:03:12,714 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 12:03:12,714 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 12:03:12,714 - test_protocol_conformance - INFO -   root-port       veth31a
2025-09-10 12:03:12,714 - test_protocol_conformance - INFO -   root-path-cost  2000
2025-09-10 12:03:12,714 - test_protocol_conformance - INFO - Bridge ID:
2025-09-10 12:03:12,714 - test_protocol_conformance - INFO -   stp-priority    40960
2025-09-10 12:03:12,715 - test_protocol_conformance - INFO -   stp-system-id   66:c1:0e:f2:d1:43
2025-09-10 12:03:12,715 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 12:03:12,715 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 12:03:12,715 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 12:03:12,715 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 12:03:12,715 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-10 12:03:12,715 - test_protocol_conformance - INFO -   veth23b    Alternate  Discarding 2000     128.1
2025-09-10 12:03:12,715 - test_protocol_conformance - INFO -   veth31a    Root       Forwarding 2000     128.2
2025-09-10 12:03:12,716 - test_protocol_conformance - INFO - 
=== 诊断信息 ===
2025-09-10 12:03:12,764 - test_protocol_conformance - INFO - 系统日志中的STP/RSTP信息:
2025-09-10 12:03:12,765 - test_protocol_conformance - INFO - [520894.695847] rstp0: left promiscuous mode
[520895.259111] rstp0: entered promiscuous mode
[520946.600612] rstp1: entered promiscuous mode
[520946.825869] rstp2: entered promiscuous mode
[520947.061370] rstp3: entered promiscuous mode

2025-09-10 12:03:12,810 - test_protocol_conformance - INFO - OVS日志中的拓扑变更信息:
2025-09-10 12:03:12,811 - test_protocol_conformance - INFO - 2025-09-10T04:03:14.753Z|00385|rstp_sm(handler2487)|DBG|rstp3: move_rstp()
2025-09-10T04:03:14.753Z|00386|rstp_sm(handler2487)|DBG|v1: 8.000.0259c9d6ba45, 0, 8.000.0259c9d6ba45, 32770, 0
2025-09-10T04:03:14.753Z|00387|rstp_sm(handler2487)|DBG|v2: 8.000.0259c9d6ba45, 0, 8.000.0259c9d6ba45, 32770, 0
2025-09-10T04:03:14.753Z|00388|rstp_sm(handler2487)|DBG|superior_same
2025-09-10T04:03:14.753Z|00389|rstp_sm(handler2487)|DBG|rstp3, port 2: Port_information_sm 9 -> 17
2025-09-10T04:03:14.753Z|00390|rstp_sm(handler2487)|DBG|rstp3: move_rstp()
2025-09-10T04:03:14.753Z|00391|rstp_sm(handler2487)|DBG|rstp3, port 2: Port_information_sm 17 -> 7
2025-09-10T04:03:14.753Z|00392|rstp_sm(handler2487)|DBG|rstp3: move_rstp()
2025-09-10T04:03:14.753Z|00393|rstp_sm(handler2487)|DBG|rstp3, port 2: Port_information_sm 7 -> 8
2025-09-10T04:03:14.753Z|00394|rstp_sm(handler2487)|DBG|rstp3: move_rstp()
2025-09-10T04:03:14.771Z|10031293|bridge|WARN|rstp0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-10T04:03:14.771Z|10031294|bridge|WARN|br0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-10T04:03:14.782Z|10031298|bridge|WARN|rstp0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-10T04:03:14.782Z|10031299|bridge|WARN|br0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP

2025-09-10 12:03:12,811 - test_protocol_conformance - INFO - === 清理测试环境 ===
2025-09-10 12:03:13,410 - test_protocol_conformance - INFO - 拓扑变更通知测试完成
2025-09-10 12:03:13,412 - RSTPTest - INFO - 测试完成: test_topology_change_notification (耗时: 28.42秒)
2025-09-10 12:03:13,412 - RSTPTest - INFO - ============================================================

2025-09-10 12:03:13,412 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 12:03:13,413 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 12:03:13,413 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 12:03:13,548 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 12:03:13,548 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 12:03:13,672 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 12:03:13,672 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 12:03:13,808 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 12:03:13,808 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 12:03:13,809 - RSTPTest - INFO - ============================================================
2025-09-10 12:03:13,809 - RSTPTest - INFO - 开始测试: test_root_bridge_hijack_attack
2025-09-10 12:03:13,809 - RSTPTest - INFO - ============================================================
2025-09-10 12:03:13,810 - test_security - INFO - 开始根网桥劫持攻击测试
2025-09-10 12:03:13,810 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 12:03:13,810 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 12:03:13,811 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 12:03:13,811 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 12:03:13,811 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 12:03:13,811 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 12:03:13,811 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 12:03:13,817 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 12:03:13,875 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 12:03:13,875 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 12:03:13,875 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 12:03:13,876 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 12:03:14,403 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 12:03:14,404 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 12:03:15,443 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 12:03:15,443 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 12:03:15,443 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 12:03:15,444 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 12:03:15,898 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 12:03:16,378 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 12:03:16,378 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 12:03:16,482 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 12:03:16,578 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 12:03:16,578 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 12:03:16,578 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 12:03:16,578 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 12:03:16,579 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 12:03:16,579 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 12:03:16,579 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 12:03:16,586 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 12:03:16,587 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 12:03:16,711 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 12:03:16,712 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 12:03:16,712 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 12:03:16,712 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 12:03:16,712 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 12:03:17,236 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 12:03:19,085 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 12:03:19,259 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 12:03:19,429 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 12:03:19,604 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 12:03:21,775 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 12:03:21,908 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 12:03:21,908 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 12:03:21,908 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 12:03:21,908 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 12:03:21,908 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 12:03:23,129 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 12:03:24,384 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 12:03:24,385 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 12:03:24,434 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 12:03:24,664 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 12:03:24,664 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 12:03:24,665 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 12:03:24,665 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 12:03:24,665 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 12:03:24,666 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 12:03:24,666 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 12:03:24,675 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 12:03:24,676 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 12:03:24,802 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 12:03:24,803 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 12:03:24,803 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 12:03:24,803 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 12:03:24,803 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 12:03:25,355 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 12:03:27,207 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 12:03:27,380 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 12:03:27,554 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 12:03:27,730 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 12:03:29,903 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 12:03:30,036 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 12:03:30,037 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 12:03:30,037 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 12:03:30,037 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 12:03:30,037 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 12:03:31,259 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 12:03:32,521 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 12:03:32,522 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 12:03:32,570 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 12:03:32,793 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 12:03:32,793 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 12:03:32,793 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 12:03:38,244 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 12:03:38,695 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 12:03:38,850 - test_security - INFO - 初始根网桥: 
2025-09-10 12:03:38,851 - FaultInjector_TestNode1 - WARNING - 注入恶意BPDU到 eth0
2025-09-10 12:03:39,001 - FaultInjector_TestNode1 - WARNING - 恶意BPDU注入已启动 (优先级: 0)
2025-09-10 12:03:54,260 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 12:03:54,429 - test_security - INFO - 根网桥未被劫持（可能已启用防护）
2025-09-10 12:03:54,430 - test_security - INFO - 根网桥劫持攻击测试完成
2025-09-10 12:03:54,431 - RSTPTest - INFO - 测试完成: test_root_bridge_hijack_attack (耗时: 40.62秒)
2025-09-10 12:03:54,431 - RSTPTest - INFO - ============================================================

2025-09-10 12:03:54,433 - RSTPTest - INFO - ============================================================
2025-09-10 12:03:54,433 - RSTPTest - INFO - 开始测试: test_bpdu_flood_attack
2025-09-10 12:03:54,433 - RSTPTest - INFO - ============================================================
2025-09-10 12:03:54,434 - test_security - INFO - 开始BPDU洪泛攻击测试
2025-09-10 12:03:54,434 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 12:03:54,434 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 12:03:54,434 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 12:03:54,435 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 12:03:54,435 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 12:03:54,435 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 12:03:54,435 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 12:03:54,435 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 12:03:54,977 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 12:03:54,977 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 12:03:56,067 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 12:03:56,068 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 12:03:56,068 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 12:03:56,068 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 12:03:56,569 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 12:03:57,061 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 12:03:57,062 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 12:03:57,165 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 12:03:57,261 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 12:03:57,261 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 12:03:57,262 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 12:03:57,262 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 12:03:57,262 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 12:03:57,262 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 12:03:57,262 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 12:03:57,262 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 12:03:57,781 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 12:03:59,621 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 12:03:59,790 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 12:03:59,958 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 12:04:00,129 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 12:04:02,306 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 12:04:02,444 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 12:04:02,445 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 12:04:02,445 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 12:04:02,445 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 12:04:02,445 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 12:04:03,647 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 12:04:04,857 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 12:04:04,857 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 12:04:04,906 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 12:04:05,130 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 12:04:05,130 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 12:04:05,130 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 12:04:05,131 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 12:04:05,131 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 12:04:05,131 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 12:04:05,131 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 12:04:05,131 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 12:04:05,634 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 12:04:07,486 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 12:04:07,656 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 12:04:07,838 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 12:04:08,019 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 12:04:10,193 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 12:04:10,327 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 12:04:10,327 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 12:04:10,328 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 12:04:10,328 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 12:04:10,328 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 12:04:11,543 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 12:04:12,801 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 12:04:12,801 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 12:04:12,849 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 12:04:13,072 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 12:04:13,072 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 12:04:13,073 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 12:04:18,243 - test_security - INFO - 初始CPU使用率: 0.0%
2025-09-10 12:04:28,517 - test_security - INFO - 洪泛时CPU使用率: 0.0%
2025-09-10 12:04:28,840 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 12:04:29,001 - test_security - INFO - 网络在BPDU洪泛下保持稳定
2025-09-10 12:04:29,001 - test_security - INFO - BPDU洪泛攻击测试完成
2025-09-10 12:04:29,002 - RSTPTest - INFO - 测试完成: test_bpdu_flood_attack (耗时: 34.57秒)
2025-09-10 12:04:29,002 - RSTPTest - INFO - ============================================================

2025-09-10 12:04:29,004 - RSTPTest - INFO - ============================================================
2025-09-10 12:04:29,004 - RSTPTest - INFO - 开始测试: test_topology_change_attack
2025-09-10 12:04:29,004 - RSTPTest - INFO - ============================================================
2025-09-10 12:04:29,004 - test_security - INFO - 开始拓扑变更攻击测试
2025-09-10 12:04:29,004 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 12:04:29,005 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 12:04:29,005 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 12:04:29,005 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 12:04:29,005 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 12:04:29,005 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 12:04:29,005 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 12:04:29,005 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 12:04:29,559 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 12:04:29,560 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 12:04:30,640 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 12:04:30,641 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 12:04:30,641 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 12:04:30,641 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 12:04:31,129 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 12:04:31,624 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 12:04:31,625 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 12:04:31,733 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 12:04:31,829 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 12:04:31,829 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 12:04:31,829 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 12:04:31,829 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 12:04:31,830 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 12:04:31,830 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 12:04:31,830 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 12:04:31,830 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 12:04:32,334 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 12:04:34,173 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 12:04:34,341 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 12:04:34,528 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 12:04:34,709 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 12:04:36,886 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 12:04:37,031 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 12:04:37,031 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 12:04:37,031 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 12:04:37,031 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 12:04:37,032 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 12:04:38,228 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 12:04:39,487 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 12:04:39,487 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 12:04:39,536 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 12:04:39,762 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 12:04:39,762 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 12:04:39,762 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 12:04:39,762 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 12:04:39,763 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 12:04:39,763 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 12:04:39,763 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 12:04:39,763 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 12:04:40,257 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 12:04:42,117 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 12:04:42,288 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 12:04:42,469 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 12:04:42,650 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 12:04:44,823 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 12:04:44,955 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 12:04:44,955 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 12:04:44,955 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 12:04:44,955 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 12:04:44,955 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 12:04:46,191 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 12:04:47,442 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 12:04:47,443 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 12:04:47,492 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 12:04:47,711 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 12:04:47,711 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 12:04:47,711 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 12:04:52,988 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 12:04:53,144 - test_security - INFO - 触发快速拓扑变更...
2025-09-10 12:05:11,597 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 12:05:11,753 - test_security - INFO - 检测到0次拓扑变更
2025-09-10 12:05:12,050 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 12:05:12,204 - test_security - INFO - 网络在频繁拓扑变更后保持稳定
2025-09-10 12:05:12,204 - test_security - INFO - 拓扑变更攻击测试完成
2025-09-10 12:05:12,205 - RSTPTest - INFO - 测试完成: test_topology_change_attack (耗时: 43.20秒)
2025-09-10 12:05:12,205 - RSTPTest - INFO - ============================================================

2025-09-10 12:05:12,206 - RSTPTest - INFO - ============================================================
2025-09-10 12:05:12,206 - RSTPTest - INFO - 开始测试: test_mac_spoofing
2025-09-10 12:05:12,207 - RSTPTest - INFO - ============================================================
2025-09-10 12:05:12,207 - test_security - INFO - 开始MAC地址欺骗测试
2025-09-10 12:05:12,207 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 12:05:12,208 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 12:05:12,208 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 12:05:12,208 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 12:05:12,208 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 12:05:12,208 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 12:05:12,208 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 12:05:12,209 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 12:05:12,731 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 12:05:12,732 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 12:05:13,808 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 12:05:13,808 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 12:05:13,809 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 12:05:13,809 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 12:05:14,282 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 12:05:14,780 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 12:05:14,780 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 12:05:14,889 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 12:05:14,989 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 12:05:14,989 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 12:05:14,989 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 12:05:14,989 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 12:05:14,990 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 12:05:14,990 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 12:05:14,990 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 12:05:14,990 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 12:05:15,513 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 12:05:18,160 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 12:05:18,335 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 12:05:18,506 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 12:05:18,679 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 12:05:20,851 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 12:05:20,988 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 12:05:20,988 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 12:05:20,988 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 12:05:20,988 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 12:05:20,989 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 12:05:22,215 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 12:05:23,443 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 12:05:23,444 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 12:05:23,491 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 12:05:23,712 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 12:05:23,712 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 12:05:23,712 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 12:05:23,713 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 12:05:23,713 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 12:05:23,713 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 12:05:23,713 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 12:05:23,713 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 12:05:24,223 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 12:05:26,071 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 12:05:26,246 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 12:05:26,426 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 12:05:26,602 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 12:05:28,776 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 12:05:28,914 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 12:05:28,914 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 12:05:28,914 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 12:05:28,915 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 12:05:28,915 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 12:05:30,127 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 12:05:31,378 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 12:05:31,378 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 12:05:31,426 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 12:05:31,658 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 12:05:31,658 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 12:05:31,658 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 12:05:36,665 - test_security - INFO - DUT MAC地址: 90:12:10:b5:7d:f7
2025-09-10 12:05:36,666 - test_security - INFO - 尝试MAC地址欺骗...
2025-09-10 12:05:42,454 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 12:05:42,616 - test_security - INFO - 网络对MAC欺骗具有抗性
2025-09-10 12:05:49,229 - test_security - INFO - MAC地址欺骗测试完成
2025-09-10 12:05:49,230 - RSTPTest - INFO - 测试完成: test_mac_spoofing (耗时: 37.02秒)
2025-09-10 12:05:49,230 - RSTPTest - INFO - ============================================================

2025-09-10 12:05:49,232 - RSTPTest - INFO - ============================================================
2025-09-10 12:05:49,232 - RSTPTest - INFO - 开始测试: test_port_security
2025-09-10 12:05:49,232 - RSTPTest - INFO - ============================================================
2025-09-10 12:05:49,233 - test_security - INFO - 开始端口安全测试
2025-09-10 12:05:49,238 - test_security - WARNING - 未检测到任何端口安全功能
2025-09-10 12:05:49,239 - RSTPTest - INFO - 测试完成: test_port_security (耗时: 0.01秒)
2025-09-10 12:05:49,239 - RSTPTest - INFO - ============================================================

2025-09-10 12:05:49,240 - RSTPTest - INFO - ============================================================
2025-09-10 12:05:49,240 - RSTPTest - INFO - 开始测试: test_bpdu_filter_functionality
2025-09-10 12:05:49,241 - RSTPTest - INFO - ============================================================
2025-09-10 12:05:49,241 - test_security - INFO - 开始BPDU过滤器功能测试
2025-09-10 12:05:49,282 - NetworkTopology - INFO - 创建RSTP线性拓扑...
2025-09-10 12:05:49,282 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 12:05:49,283 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 12:05:49,283 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 12:05:49,283 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 12:05:49,283 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 12:05:49,283 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 12:05:49,284 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 12:05:49,819 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 12:05:49,819 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 12:05:50,915 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 12:05:50,916 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 12:05:50,916 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth2']
2025-09-10 12:05:50,916 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 12:05:51,395 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 12:05:51,395 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 12:05:51,503 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 12:05:51,603 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 12:05:51,604 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 12:05:51,604 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 12:05:51,604 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 12:05:51,604 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 12:05:51,604 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 12:05:51,605 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 12:05:51,605 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 12:06:04,282 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 12:06:06,114 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 12:06:06,289 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 12:06:06,460 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 12:06:06,634 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 12:06:08,818 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 12:06:18,896 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 12:06:18,896 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 12:06:18,896 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 12:06:18,897 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 12:06:18,897 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 12:07:18,950 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 12:08:14,500 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 12:08:14,500 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 12:08:14,549 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 12:08:22,768 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 12:08:22,768 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 12:08:22,768 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 12:08:22,769 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 12:08:22,769 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 12:08:22,769 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 12:08:22,770 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 12:08:22,770 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 12:08:23,279 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 12:08:25,123 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 12:08:25,298 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 12:08:25,476 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 12:08:25,650 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 12:08:27,813 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 12:08:27,946 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 12:08:27,946 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 12:08:27,946 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 12:08:27,947 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0']
2025-09-10 12:08:27,947 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 12:08:29,175 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 12:08:29,176 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 12:08:29,224 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 12:08:29,449 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 12:08:29,449 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 12:08:29,449 - NetworkTopology - INFO - 线性拓扑创建完成
2025-09-10 12:08:34,582 - test_security - WARNING - BPDU包统计命令执行失败: 
2025-09-10 12:08:34,582 - test_security - INFO - 启用过滤器前端口 eth2 BPDU数量: 0
2025-09-10 12:08:34,711 - test_security - WARNING - mstpctl设置BPDU过滤器失败，尝试使用brctl
2025-09-10 12:08:34,806 - test_security - ERROR - 启用BPDU过滤器失败: BPDU过滤器配置失败: 
2025-09-10 12:08:34,806 - test_security - ERROR - 启用BPDU过滤器失败: BPDU过滤器配置失败: 
2025-09-10 12:08:34,953 - test_security - WARNING - 清理命令执行失败: mstpctl setportbpdufilter br0 eth2 no, 错误: 
2025-09-10 12:08:35,098 - test_security - WARNING - 清理命令执行失败: echo 0 > /sys/class/net/br0/bridge/ports/eth2/bpdu_filter, 错误: 
2025-09-10 12:08:35,136 - RSTPTest - INFO - 测试完成: test_bpdu_filter_functionality (耗时: 165.89秒)
2025-09-10 12:08:35,136 - RSTPTest - INFO - ============================================================

2025-09-10 12:08:35,139 - RSTPTest - INFO - ============================================================
2025-09-10 12:08:35,139 - RSTPTest - INFO - 开始测试: test_malformed_bpdu_handling
2025-09-10 12:08:35,139 - RSTPTest - INFO - ============================================================
2025-09-10 12:08:35,140 - test_security - INFO - 开始畸形BPDU处理测试
2025-09-10 12:08:35,144 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 12:08:35,145 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 12:08:35,145 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 12:08:35,145 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 12:08:35,145 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 12:08:35,145 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 12:08:35,145 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 12:08:35,146 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 12:08:35,683 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 12:08:35,684 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 12:08:36,720 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 12:08:36,721 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 12:08:36,721 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 12:08:36,721 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 12:08:37,177 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 12:08:37,652 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 12:08:37,652 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 12:08:37,756 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 12:08:37,852 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 12:08:37,853 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 12:08:37,853 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 12:08:37,853 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 12:08:37,853 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 12:08:37,854 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 12:08:37,854 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 12:08:37,854 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 12:08:53,480 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 12:08:55,342 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 12:08:55,531 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 12:08:55,703 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 12:08:55,897 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 12:08:58,071 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 12:08:58,203 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 12:08:58,203 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 12:08:58,204 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 12:08:58,204 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 12:08:58,204 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 12:08:59,418 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 12:09:00,640 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 12:09:00,640 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 12:09:00,689 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 12:09:00,907 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 12:09:00,907 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 12:09:00,907 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 12:09:00,907 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 12:09:00,908 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 12:09:00,908 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 12:09:00,908 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 12:09:00,909 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 12:09:01,428 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 12:09:03,272 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 12:09:03,444 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 12:09:03,618 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 12:09:03,795 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 12:09:05,971 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 12:09:06,111 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 12:09:06,111 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 12:09:06,111 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 12:09:06,112 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 12:09:06,112 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 12:09:07,328 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 12:09:08,564 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 12:09:08,564 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 12:09:08,613 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 12:09:08,845 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 12:09:08,845 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 12:09:08,845 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 12:09:14,098 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-10 12:09:14,550 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 12:09:14,704 - test_security - INFO - 初始网络状态: 稳定
2025-09-10 12:09:14,705 - test_security - INFO - 执行测试: _test_oversized_bpdu
2025-09-10 12:09:18,867 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: rstp0
2025-09-10 12:09:19,024 - test_security - INFO - _test_oversized_bpdu 网络保持稳定
2025-09-10 12:09:19,024 - test_security - INFO - 执行测试: _test_undersized_bpdu
2025-09-10 12:09:19,031 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

# 创建过小的BPDU（缺少必要字段）
target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 只包含最小字段的BPDU
truncated_bpdu = Raw(load=b"     ")  # 截断的BPDU

packet = eth/llc/truncated_bpdu
sendp(packet, iface=interface, count=5, inter=1, verbose=0)
print("Undersized BPDU sent")
' > /tmp/undersized_bpdu.py
错误: 
2025-09-10 12:09:19,032 - test_security - ERROR - _test_undersized_bpdu 执行失败: 
2025-09-10 12:09:19,032 - test_security - INFO - 执行测试: _test_invalid_protocol_id
2025-09-10 12:09:19,032 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 使用无效的协议ID（正常应该是0x0000）
invalid_bpdu = Raw(load=b"ÿÿ   " + b" " * 30)

packet = eth/llc/invalid_bpdu
sendp(packet, iface=interface, count=5, inter=1, verbose=0)
print("Invalid protocol ID BPDU sent")
' > /tmp/invalid_protocol.py
错误: SSH session not active
2025-09-10 12:09:19,033 - test_security - ERROR - _test_invalid_protocol_id 执行失败: SSH session not active
2025-09-10 12:09:19,034 - test_security - INFO - 执行测试: _test_invalid_version
2025-09-10 12:09:19,034 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 使用无效版本号（正常RSTP应该是2）
invalid_version_bpdu = Raw(load=b"  ÿ  " + b" " * 30)

packet = eth/llc/invalid_version_bpdu
sendp(packet, iface=interface, count=5, inter=1, verbose=0)
print("Invalid version BPDU sent")
' > /tmp/invalid_version.py
错误: SSH session not active
2025-09-10 12:09:19,035 - test_security - ERROR - _test_invalid_version 执行失败: SSH session not active
2025-09-10 12:09:19,035 - test_security - INFO - 执行测试: _test_invalid_message_type
2025-09-10 12:09:19,035 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 使用无效消息类型（正常配置BPDU是0x00，TCN是0x80）
invalid_type_bpdu = Raw(load=b"  ÿ " + b" " * 30)

packet = eth/llc/invalid_type_bpdu
sendp(packet, iface=interface, count=5, inter=1, verbose=0)
print("Invalid message type BPDU sent")
' > /tmp/invalid_type.py
错误: SSH session not active
2025-09-10 12:09:19,036 - test_security - ERROR - _test_invalid_message_type 执行失败: SSH session not active
2025-09-10 12:09:19,037 - test_security - INFO - 执行测试: _test_corrupted_fields
2025-09-10 12:09:19,037 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *
import random

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)

# 创建包含随机损坏数据的BPDU
corrupted_data = bytes([random.randint(0, 255) for _ in range(36)])
corrupted_bpdu = Raw(load=corrupted_data)

packet = eth/llc/corrupted_bpdu
sendp(packet, iface=interface, count=5, inter=1, verbose=0)
print("Corrupted BPDU sent")
' > /tmp/corrupted_bpdu.py
错误: SSH session not active
2025-09-10 12:09:19,038 - test_security - ERROR - _test_corrupted_fields 执行失败: SSH session not active
2025-09-10 12:09:22,200 - RSTPTest - INFO - 测试完成: test_malformed_bpdu_handling (耗时: 47.06秒)
2025-09-10 12:09:22,200 - RSTPTest - INFO - ============================================================

2025-09-10 12:09:22,203 - RSTPTest - INFO - ============================================================
2025-09-10 12:09:22,204 - RSTPTest - INFO - 开始测试: test_non_standard_bpdu_handling
2025-09-10 12:09:22,204 - RSTPTest - INFO - ============================================================
2025-09-10 12:09:22,204 - test_security - INFO - 开始非标准BPDU处理测试
2025-09-10 12:09:22,209 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 12:09:22,209 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 12:09:22,209 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 12:09:22,210 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 12:09:22,210 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 12:09:22,210 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 12:09:22,210 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 12:09:22,210 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 12:09:22,747 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 12:09:22,747 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 12:09:23,808 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 12:09:23,808 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 12:09:23,809 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 12:09:23,809 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 12:09:24,285 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 12:09:24,784 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 12:09:24,785 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 12:09:24,888 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 12:09:24,988 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 12:09:24,988 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 12:09:24,988 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 12:09:24,989 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 12:09:24,989 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 12:09:24,989 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 12:09:24,989 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 12:09:24,990 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 12:09:24,990 - SSH_TestNode1 - WARNING - TestNode1: SSH连接已断开，尝试重连...
2025-09-10 12:09:25,110 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 12:09:25,245 - SSH_TestNode1 - INFO - TestNode1: SSH重连成功
2025-09-10 12:09:25,754 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 12:09:27,634 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 12:09:27,817 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 12:09:27,999 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 12:09:28,173 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 12:09:30,345 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 12:09:30,483 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 12:09:30,484 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 12:09:30,484 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 12:09:30,485 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 12:09:30,485 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 12:09:31,732 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 12:09:32,937 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 12:09:32,937 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 12:09:32,986 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 12:09:33,197 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 12:09:33,198 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 12:09:33,198 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 12:09:33,198 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 12:09:33,198 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 12:09:33,199 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 12:09:33,199 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 12:09:33,199 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 12:09:33,727 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 12:09:35,609 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 12:09:35,775 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 12:09:35,953 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 12:09:36,124 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 12:09:38,289 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 12:09:38,425 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 12:09:38,425 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 12:09:38,425 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 12:09:38,426 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 12:09:38,426 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 12:09:39,656 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 12:09:40,903 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 12:09:40,903 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 12:09:40,951 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 12:09:41,174 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 12:09:41,174 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 12:09:41,174 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 12:09:46,175 - test_security - INFO - 执行测试: _test_pvst_plus_bpdu
2025-09-10 12:09:46,180 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

# PVST+ 使用不同的目标MAC地址
pvst_mac = "01:00:0c:cc:cc:cd"
interface = "eth0"

eth = Ether(dst=pvst_mac, src="00:11:22:33:44:55")
# PVST+ 使用SNAP封装
snap = SNAP(OUI=0x00000c, code=0x010b)
# 模拟PVST+ BPDU结构
pvst_bpdu = Raw(load=b"    " + b" " * 30 + b" ")  # 包含VLAN ID

packet = eth/snap/pvst_bpdu
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("PVST+ BPDU sent")
' > /tmp/pvst_bpdu.py
错误: 
2025-09-10 12:09:46,181 - test_security - ERROR - _test_pvst_plus_bpdu 执行失败: 
2025-09-10 12:09:46,182 - test_security - INFO - 执行测试: _test_cisco_proprietary_bpdu
2025-09-10 12:09:46,182 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 模拟包含Cisco专有扩展的BPDU
cisco_bpdu = Raw(load=b"    " + b" " * 30 + 
                     b" )   ")  # Cisco OUI + 专有数据

packet = eth/llc/cisco_bpdu
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("Cisco proprietary BPDU sent")
' > /tmp/cisco_bpdu.py
错误: SSH session not active
2025-09-10 12:09:46,183 - test_security - ERROR - _test_cisco_proprietary_bpdu 执行失败: SSH session not active
2025-09-10 12:09:46,183 - test_security - INFO - 执行测试: _test_vlan_tagged_bpdu
2025-09-10 12:09:46,183 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
# 添加VLAN标签
vlan = Dot1Q(vlan=100)
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
bpdu = STP(bpdutype=0x00, rootid=32768, bridgeid=32768)

packet = eth/vlan/llc/bpdu
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("VLAN tagged BPDU sent")
' > /tmp/vlan_bpdu.py
错误: SSH session not active
2025-09-10 12:09:46,184 - test_security - ERROR - _test_vlan_tagged_bpdu 执行失败: SSH session not active
2025-09-10 12:09:46,184 - test_security - INFO - 执行测试: _test_unknown_tlv_bpdu
2025-09-10 12:09:46,185 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 标准BPDU + 未知TLV
standard_bpdu = b"    " + b" " * 30
unknown_tlv = b"ÿÿ "  # 未知类型和长度的TLV
bpdu_with_tlv = Raw(load=standard_bpdu + unknown_tlv)

packet = eth/llc/bpdu_with_tlv
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("BPDU with unknown TLV sent")
' > /tmp/unknown_tlv.py
错误: SSH session not active
2025-09-10 12:09:46,186 - test_security - ERROR - _test_unknown_tlv_bpdu 执行失败: SSH session not active
2025-09-10 12:09:46,374 - test_security - INFO - 非标准BPDU处理测试完成
2025-09-10 12:09:46,375 - RSTPTest - INFO - 测试完成: test_non_standard_bpdu_handling (耗时: 24.17秒)
2025-09-10 12:09:46,375 - RSTPTest - INFO - ============================================================

2025-09-10 12:09:46,377 - RSTPTest - INFO - ============================================================
2025-09-10 12:09:46,377 - RSTPTest - INFO - 开始测试: test_bpdu_guard_functionality
2025-09-10 12:09:46,377 - RSTPTest - INFO - ============================================================
2025-09-10 12:09:46,378 - test_security - INFO - 开始BPDU防护功能测试
2025-09-10 12:09:46,382 - NetworkTopology - INFO - 创建RSTP线性拓扑...
2025-09-10 12:09:46,382 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 12:09:46,383 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 12:09:46,383 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 12:09:46,383 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 12:09:46,383 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 12:09:46,383 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 12:09:46,384 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 12:09:46,907 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 12:09:46,907 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 12:09:47,987 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 12:09:47,987 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 12:09:47,987 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth2']
2025-09-10 12:09:47,988 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 12:09:48,459 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 12:09:48,460 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 12:09:48,565 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 12:09:48,663 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 12:09:48,664 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 12:09:48,664 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 12:09:48,664 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 12:09:48,664 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 12:09:48,664 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 12:09:48,665 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 12:09:48,665 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 12:09:48,665 - SSH_TestNode1 - WARNING - TestNode1: SSH连接已断开，尝试重连...
2025-09-10 12:09:48,797 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 12:09:48,920 - SSH_TestNode1 - INFO - TestNode1: SSH重连成功
2025-09-10 12:09:49,432 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 12:09:51,260 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 12:09:51,435 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 12:09:51,613 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 12:09:51,784 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 12:09:53,959 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 12:09:54,090 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 12:09:54,091 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 12:09:54,091 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 12:09:54,091 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 12:09:54,091 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 12:09:55,314 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 12:09:56,538 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 12:09:56,538 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 12:09:56,586 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 12:09:56,809 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 12:09:56,810 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 12:09:56,810 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 12:09:56,810 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 12:09:56,810 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 12:09:56,811 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 12:09:56,811 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 12:09:56,811 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 12:09:57,328 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 12:09:59,204 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 40960

2025-09-10 12:09:59,380 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 12:09:59,566 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 12:09:59,736 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 12:10:01,911 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 12:10:02,046 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 12:10:02,046 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 12:10:02,046 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 12:10:02,047 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0']
2025-09-10 12:10:02,047 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 12:10:03,266 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 12:10:03,267 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 12:10:03,314 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 12:10:03,546 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 12:10:03,547 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 12:10:03,547 - NetworkTopology - INFO - 线性拓扑创建完成
2025-09-10 12:10:08,603 - test_security - WARNING - 启用BPDU防护失败: 
2025-09-10 12:10:08,651 - test_security - INFO - 边缘端口 eth2 初始状态: unknown
2025-09-10 12:10:08,651 - test_security - INFO - 向边缘端口 eth2 发送BPDU
2025-09-10 12:10:15,549 - test_security - INFO - BPDU防护触发后端口 eth2 状态: unknown
2025-09-10 12:10:15,549 - test_security - ERROR - BPDU防护功能异常：端口未被禁用
2025-09-10 12:10:15,783 - RSTPTest - INFO - 测试完成: test_bpdu_guard_functionality (耗时: 29.41秒)
2025-09-10 12:10:15,783 - RSTPTest - INFO - ============================================================

2025-09-10 12:10:15,785 - RSTPTest - INFO - ============================================================
2025-09-10 12:10:15,785 - RSTPTest - INFO - 开始测试: test_root_guard_functionality
2025-09-10 12:10:15,786 - RSTPTest - INFO - ============================================================
2025-09-10 12:10:15,786 - test_security - INFO - 开始根防护功能测试
2025-09-10 12:10:15,814 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 12:10:15,815 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 12:10:15,815 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 12:10:15,815 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 12:10:15,816 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 12:10:15,816 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 12:10:15,816 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 12:10:15,816 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 12:10:16,351 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 12:10:16,351 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 12:10:17,409 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 12:10:17,409 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 12:10:17,410 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 12:10:17,410 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 12:10:17,890 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 12:10:18,371 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 12:10:18,372 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 12:10:18,474 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 12:10:18,570 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 12:10:18,571 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 12:10:18,571 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 12:10:18,571 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 12:10:18,571 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 12:10:18,572 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 12:10:18,572 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 12:10:18,572 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 12:10:19,273 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 12:10:21,125 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgeprio br0 36864

2025-09-10 12:10:21,302 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgehello br0 2

2025-09-10 12:10:21,472 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgefdelay br0 15

2025-09-10 12:10:21,651 - NetworkTopology - WARNING - MSTPD命令警告: mstpctl setbridgemaxage br0 20

2025-09-10 12:10:23,823 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 12:10:23,955 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 12:10:23,956 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 12:10:23,956 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 12:10:23,956 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 12:10:23,956 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 12:10:25,181 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
