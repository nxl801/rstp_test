2025-09-10 14:01:13,091 - root - INFO - 日志系统初始化完成，日志文件: logs\rstp_test_20250910_140113.log
2025-09-10 14:01:13,335 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 14:01:13,336 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 14:01:13,456 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 14:01:13,456 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 14:01:13,598 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 14:01:13,599 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 14:01:13,600 - RSTPTest - INFO - ============================================================
2025-09-10 14:01:13,600 - RSTPTest - INFO - 开始测试: test_port_state_transitions
2025-09-10 14:01:13,600 - RSTPTest - INFO - ============================================================
2025-09-10 14:01:13,601 - test_additional_rstp - INFO - 开始端口状态转换测试
2025-09-10 14:01:13,602 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 14:01:13,602 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 14:01:13,602 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 14:01:13,603 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 14:01:13,603 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 14:01:13,603 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 14:01:13,603 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 14:01:13,609 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 14:01:13,667 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 14:01:13,668 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 14:01:13,669 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 14:01:13,669 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 14:01:14,205 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 14:01:14,205 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 14:01:15,238 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 14:01:15,238 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 14:01:15,238 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 14:01:15,239 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 14:01:15,697 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 14:01:16,177 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 14:01:16,178 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 14:01:16,281 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 14:01:16,377 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 14:01:16,377 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 14:01:16,377 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 14:01:16,378 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 14:01:16,378 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 14:01:16,378 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 14:01:16,378 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 14:01:16,388 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 14:01:16,389 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 14:01:16,520 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 14:01:16,520 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 14:01:16,520 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 14:01:16,521 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 14:01:16,521 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 14:01:17,071 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 14:01:21,629 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:01:21,762 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:01:21,762 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 14:01:21,762 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 14:01:21,762 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 14:01:21,763 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 14:01:23,059 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 14:01:24,277 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 14:01:24,278 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 14:01:24,326 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 14:01:24,551 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 14:01:24,551 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 14:01:24,551 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 14:01:24,551 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 14:01:24,552 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 14:01:24,552 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 14:01:24,552 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 14:01:24,560 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 14:01:24,560 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 14:01:24,687 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 14:01:24,687 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 14:01:24,687 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 14:01:24,688 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 14:01:24,688 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 14:01:25,234 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 14:01:29,795 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:01:29,931 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:01:29,931 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 14:01:29,931 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 14:01:29,932 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 14:01:29,932 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 14:01:31,551 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 14:01:33,111 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 14:01:33,111 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 14:01:33,161 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 14:01:33,384 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 14:01:33,385 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 14:01:33,385 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 14:01:38,581 - test_additional_rstp - INFO - 使用网桥: rstp0
2025-09-10 14:01:38,582 - test_additional_rstp - INFO - === 步骤1: 禁用端口触发状态转换 ===
2025-09-10 14:01:39,464 - RSTPTest - INFO - 测试完成: test_port_state_transitions (耗时: 25.86秒)
2025-09-10 14:01:39,464 - RSTPTest - INFO - ============================================================

2025-09-10 14:01:39,466 - RSTPTest - INFO - ============================================================
2025-09-10 14:01:39,466 - RSTPTest - INFO - 开始测试: test_bpdu_propagation_and_keepalive
2025-09-10 14:01:39,466 - RSTPTest - INFO - ============================================================
2025-09-10 14:01:39,467 - test_additional_rstp - INFO - 开始BPDU传播和保活机制测试
2025-09-10 14:01:39,467 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 14:01:39,467 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 14:01:39,467 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 14:01:39,468 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 14:01:39,468 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 14:01:39,468 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 14:01:39,468 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 14:01:39,468 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 14:01:39,973 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 14:01:39,973 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 14:01:41,028 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 14:01:41,029 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 14:01:41,029 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 14:01:41,029 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 14:01:41,485 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 14:01:41,960 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 14:01:41,961 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 14:01:42,064 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 14:01:42,161 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 14:01:42,161 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 14:01:42,162 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 14:01:42,162 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 14:01:42,162 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 14:01:42,162 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 14:01:42,162 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 14:01:42,162 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 14:01:42,695 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 14:01:47,243 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:01:47,377 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:01:47,377 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 14:01:47,378 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 14:01:47,378 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 14:01:47,378 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 14:01:48,614 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 14:01:49,875 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 14:01:49,875 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 14:01:49,924 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 14:01:50,142 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 14:01:50,142 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 14:01:50,142 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 14:01:50,142 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 14:01:50,142 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 14:01:50,143 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 14:01:50,143 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 14:01:50,143 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 14:01:50,653 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 14:01:55,209 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:01:55,342 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:01:55,342 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 14:01:55,342 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 14:01:55,343 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 14:01:55,343 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 14:01:56,547 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 14:01:57,830 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 14:01:57,830 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 14:01:57,879 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 14:01:58,104 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 14:01:58,104 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 14:01:58,104 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 14:02:06,437 - test_additional_rstp - INFO - === 步骤1: 验证分布式BPDU生成 ===
2025-09-10 14:02:06,476 - test_additional_rstp - INFO - 检测到网桥接口: ['18:', '26:', '16890:']
2025-09-10 14:02:06,476 - test_additional_rstp - INFO - 在接口 18: 上捕获BPDU...
2025-09-10 14:02:06,476 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: 18:, 数量: 10)
2025-09-10 14:02:06,594 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-10 14:02:06,594 - test_additional_rstp - WARNING - 在 18: 上未捕获到BPDU
2025-09-10 14:02:06,595 - test_additional_rstp - INFO - 在接口 26: 上捕获BPDU...
2025-09-10 14:02:06,595 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: 26:, 数量: 10)
2025-09-10 14:02:06,770 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-10 14:02:06,770 - test_additional_rstp - WARNING - 在 26: 上未捕获到BPDU
2025-09-10 14:02:06,770 - test_additional_rstp - INFO - 总共捕获 0 个BPDU，来自 0 个不同源
2025-09-10 14:02:06,770 - test_additional_rstp - WARNING - 未检测到BPDU传播
2025-09-10 14:02:06,771 - test_additional_rstp - INFO - BPDU传播和保活机制测试完成
2025-09-10 14:02:06,771 - RSTPTest - INFO - 测试完成: test_bpdu_propagation_and_keepalive (耗时: 27.30秒)
2025-09-10 14:02:06,772 - RSTPTest - INFO - ============================================================

2025-09-10 14:02:06,773 - RSTPTest - INFO - ============================================================
2025-09-10 14:02:06,773 - RSTPTest - INFO - 开始测试: test_disabled_port_exclusion_enhanced
2025-09-10 14:02:06,773 - RSTPTest - INFO - ============================================================
2025-09-10 14:02:06,774 - test_additional_rstp - INFO - 开始增强的禁用端口排除测试
2025-09-10 14:02:06,774 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 14:02:06,774 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 14:02:06,775 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 14:02:06,775 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 14:02:06,775 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 14:02:06,775 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 14:02:06,775 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 14:02:06,776 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 14:02:07,304 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 14:02:07,304 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 14:02:08,345 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 14:02:08,345 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 14:02:08,346 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 14:02:08,346 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 14:02:08,809 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 14:02:09,294 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 14:02:09,295 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 14:02:09,403 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 14:02:09,497 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 14:02:09,498 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 14:02:09,498 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 14:02:09,498 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 14:02:09,499 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 14:02:09,499 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 14:02:09,499 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 14:02:09,499 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 14:02:10,020 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 14:02:14,581 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:02:14,721 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:02:14,721 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 14:02:14,721 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 14:02:14,722 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 14:02:14,722 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 14:02:15,949 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 14:02:17,159 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 14:02:17,160 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 14:02:17,207 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 14:02:17,433 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 14:02:17,434 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 14:02:17,434 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 14:02:17,434 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 14:02:17,434 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 14:02:17,434 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 14:02:17,435 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 14:02:17,435 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 14:02:17,939 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 14:02:22,479 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:02:22,618 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:02:22,618 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 14:02:22,619 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 14:02:22,619 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 14:02:22,619 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 14:02:23,843 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 14:02:25,125 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 14:02:25,126 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 14:02:25,174 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 14:02:25,407 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 14:02:25,407 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 14:02:25,407 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 14:02:31,496 - test_additional_rstp - INFO - 初始活动端口数量: 0
2025-09-10 14:02:31,498 - RSTPTest - INFO - 测试完成: test_disabled_port_exclusion_enhanced (耗时: 24.72秒)
2025-09-10 14:02:31,498 - RSTPTest - INFO - ============================================================

2025-09-10 14:02:31,498 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 14:02:31,499 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 14:02:31,499 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 14:02:31,634 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 14:02:31,634 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 14:02:31,753 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 14:02:31,754 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 14:02:31,902 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 14:02:31,903 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 14:02:31,903 - RSTPTest - INFO - ============================================================
2025-09-10 14:02:31,903 - RSTPTest - INFO - 开始测试: test_proposal_agreement_handshake
2025-09-10 14:02:31,904 - RSTPTest - INFO - ============================================================
2025-09-10 14:02:31,905 - test_advanced_rstp_mechanisms - INFO - 开始测试RSTP Proposal/Agreement握手机制
2025-09-10 14:02:31,905 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 14:02:31,905 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 14:02:31,906 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 14:02:31,906 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 14:02:31,906 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 14:02:31,906 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 14:02:31,906 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 14:02:31,912 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 14:02:31,970 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 14:02:31,970 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 14:02:31,970 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 14:02:31,970 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 14:02:32,503 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 14:02:32,503 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 14:02:33,553 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 14:02:33,553 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 14:02:33,554 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 14:02:33,554 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 14:02:34,012 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 14:02:34,498 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 14:02:34,498 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 14:02:34,600 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 14:02:34,696 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 14:02:34,696 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 14:02:34,697 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 14:02:34,697 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 14:02:34,697 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 14:02:34,697 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 14:02:34,697 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 14:02:34,706 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 14:02:34,707 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 14:02:34,835 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 14:02:34,835 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 14:02:34,835 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 14:02:34,835 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 14:02:34,835 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 14:02:35,412 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 14:02:39,968 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:02:40,103 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:02:40,103 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 14:02:40,104 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 14:02:40,104 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 14:02:40,104 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 14:02:41,330 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 14:02:42,583 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 14:02:42,583 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 14:02:42,633 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 14:02:42,853 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 14:02:42,853 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 14:02:42,854 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 14:02:42,854 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 14:02:42,854 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 14:02:42,854 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 14:02:42,854 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 14:02:42,862 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 14:02:42,863 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 14:02:42,988 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 14:02:42,989 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 14:02:42,989 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 14:02:42,989 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 14:02:42,989 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 14:02:43,545 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 14:02:48,080 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:02:48,215 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:02:48,215 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 14:02:48,216 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 14:02:48,216 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 14:02:48,216 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 14:02:49,439 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 14:02:50,686 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 14:02:50,687 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 14:02:50,735 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 14:02:50,966 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 14:02:50,966 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 14:02:50,966 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 14:02:55,967 - test_advanced_rstp_mechanisms - INFO - 开始在eth0上捕获BPDU
2025-09-10 14:02:55,968 - test_advanced_rstp_mechanisms - INFO - 触发拓扑变更...
2025-09-10 14:03:02,255 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: eth0, 数量: 20)
2025-09-10 14:03:02,289 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-10 14:03:02,289 - test_advanced_rstp_mechanisms - INFO - 捕获到0个BPDU数据包
2025-09-10 14:03:02,289 - test_advanced_rstp_mechanisms - WARNING - 未能捕获到完整的BPDU握手序列，可能是环境限制
2025-09-10 14:03:02,290 - test_advanced_rstp_mechanisms - INFO - 改为验证网络收敛状态...
2025-09-10 14:03:03,208 - test_advanced_rstp_mechanisms - INFO - ✓ 网络收敛正常，存在根端口
2025-09-10 14:03:05,209 - test_advanced_rstp_mechanisms - INFO - RSTP Proposal/Agreement握手机制测试通过
2025-09-10 14:03:05,210 - RSTPTest - INFO - 测试完成: test_proposal_agreement_handshake (耗时: 33.31秒)
2025-09-10 14:03:05,210 - RSTPTest - INFO - ============================================================

2025-09-10 14:03:05,211 - RSTPTest - INFO - ============================================================
2025-09-10 14:03:05,212 - RSTPTest - INFO - 开始测试: test_tcn_topology_change_notification
2025-09-10 14:03:05,212 - RSTPTest - INFO - ============================================================
2025-09-10 14:03:05,212 - test_advanced_rstp_mechanisms - INFO - 开始测试TCN拓扑变更通知机制
2025-09-10 14:03:05,213 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 14:03:05,213 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 14:03:05,213 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 14:03:05,213 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 14:03:05,213 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 14:03:05,214 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 14:03:05,214 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 14:03:05,214 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 14:03:05,703 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 14:03:05,703 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 14:03:06,796 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 14:03:06,796 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 14:03:06,797 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 14:03:06,797 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 14:03:07,255 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 14:03:07,738 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 14:03:07,739 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 14:03:07,843 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 14:03:07,939 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 14:03:07,940 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 14:03:07,940 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 14:03:07,940 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 14:03:07,940 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 14:03:07,940 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 14:03:07,941 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 14:03:07,941 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 14:03:08,464 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 14:03:13,010 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:03:13,144 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:03:13,145 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 14:03:13,145 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 14:03:13,145 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 14:03:13,145 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 14:03:14,408 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 14:03:15,638 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 14:03:15,638 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 14:03:15,689 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 14:03:15,919 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 14:03:15,920 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 14:03:15,920 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 14:03:15,920 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 14:03:15,920 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 14:03:15,921 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 14:03:15,921 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 14:03:15,921 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 14:03:16,404 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 14:03:20,988 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:03:21,129 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:03:21,130 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 14:03:21,130 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 14:03:21,130 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 14:03:21,130 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 14:03:22,366 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 14:03:23,640 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 14:03:23,640 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 14:03:23,689 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 14:03:23,914 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 14:03:23,915 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 14:03:23,915 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 14:03:34,795 - test_advanced_rstp_mechanisms - INFO - 初始网桥端口数量: 3
2025-09-10 14:03:34,796 - test_advanced_rstp_mechanisms - INFO - 触发拓扑变更：临时禁用/启用端口
2025-09-10 14:03:34,954 - test_advanced_rstp_mechanisms - INFO - 初始TC计数: 0
2025-09-10 14:03:43,242 - test_advanced_rstp_mechanisms - INFO - 变更后TC计数: 0
2025-09-10 14:03:43,242 - test_advanced_rstp_mechanisms - INFO - 拓扑变更可能未被检测到，这可能是正常的（取决于实现）
2025-09-10 14:03:44,167 - test_advanced_rstp_mechanisms - INFO - 最终网桥端口数量: 3
2025-09-10 14:03:44,323 - test_advanced_rstp_mechanisms - INFO - 当前MAC地址表老化时间: 300秒
2025-09-10 14:03:44,324 - test_advanced_rstp_mechanisms - WARNING - MAC地址表老化时间(300秒)未缩短，可能是实现差异
2025-09-10 14:03:44,324 - test_advanced_rstp_mechanisms - INFO - TCN拓扑变更通知机制测试通过 - 使用安全的端口状态变更方式
2025-09-10 14:03:44,324 - RSTPTest - INFO - 测试完成: test_tcn_topology_change_notification (耗时: 39.11秒)
2025-09-10 14:03:44,325 - RSTPTest - INFO - ============================================================

2025-09-10 14:03:44,326 - RSTPTest - INFO - ============================================================
2025-09-10 14:03:44,327 - RSTPTest - INFO - 开始测试: test_edge_port_behavior
2025-09-10 14:03:44,327 - RSTPTest - INFO - ============================================================
2025-09-10 14:03:44,327 - test_advanced_rstp_mechanisms - INFO - 开始测试边缘端口行为
2025-09-10 14:03:44,327 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 14:03:44,328 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 14:03:44,328 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 14:03:44,328 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 14:03:44,328 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 14:03:44,328 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 14:03:44,328 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 14:03:44,329 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 14:03:44,846 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 14:03:44,846 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 14:03:45,881 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 14:03:45,881 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 14:03:45,881 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 14:03:45,881 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 14:03:46,339 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 14:03:46,819 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 14:03:46,819 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 14:03:46,923 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 14:03:47,019 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 14:03:47,019 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 14:03:47,019 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 14:03:47,019 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 14:03:47,019 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 14:03:47,020 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 14:03:47,020 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 14:03:47,020 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 14:03:47,541 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 14:03:52,082 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:03:52,214 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:03:52,215 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 14:03:52,215 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 14:03:52,215 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 14:03:52,215 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 14:03:53,447 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 14:03:54,675 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 14:03:54,675 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 14:03:54,723 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 14:03:54,941 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 14:03:54,942 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 14:03:54,942 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 14:03:54,942 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 14:03:54,942 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 14:03:54,943 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 14:03:54,943 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 14:03:54,943 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 14:03:55,458 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 14:04:00,006 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:04:00,132 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:04:00,132 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 14:04:00,132 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 14:04:00,132 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 14:04:00,133 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 14:04:01,396 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 14:04:02,707 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 14:04:02,708 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 14:04:02,757 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 14:04:02,983 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 14:04:02,983 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 14:04:02,983 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 14:04:09,474 - test_advanced_rstp_mechanisms - INFO - 可用端口: ['enp1s0']
2025-09-10 14:04:09,474 - test_advanced_rstp_mechanisms - INFO - 选择端口enp1s0作为边缘端口测试
2025-09-10 14:04:09,582 - test_advanced_rstp_mechanisms - INFO - 测试边缘端口立即转发特性
2025-09-10 14:04:12,470 - test_advanced_rstp_mechanisms - INFO - 边缘端口状态转换时间: 2.74秒
2025-09-10 14:04:12,471 - test_advanced_rstp_mechanisms - INFO - ✓ 边缘端口转换时间合理
2025-09-10 14:04:12,573 - test_advanced_rstp_mechanisms - INFO - ✓ 边缘端口状态变化未产生TCN
2025-09-10 14:04:12,573 - test_advanced_rstp_mechanisms - INFO - 测试边缘端口收到BPDU后的行为
2025-09-10 14:04:12,725 - test_advanced_rstp_mechanisms - INFO - 边缘端口状态: 1
1
normal
2025-09-10 14:04:12,726 - test_advanced_rstp_mechanisms - INFO - 边缘端口行为测试通过
2025-09-10 14:04:12,726 - RSTPTest - INFO - 测试完成: test_edge_port_behavior (耗时: 28.40秒)
2025-09-10 14:04:12,726 - RSTPTest - INFO - ============================================================

2025-09-10 14:04:12,728 - RSTPTest - INFO - ============================================================
2025-09-10 14:04:12,728 - RSTPTest - INFO - 开始测试: test_shared_vs_point_to_point_links
2025-09-10 14:04:12,728 - RSTPTest - INFO - ============================================================
2025-09-10 14:04:12,728 - test_advanced_rstp_mechanisms - INFO - 开始测试不同链路类型的行为差异
2025-09-10 14:04:12,729 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 14:04:12,729 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 14:04:12,729 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 14:04:12,729 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 14:04:12,729 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 14:04:12,729 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 14:04:12,729 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 14:04:12,730 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 14:04:13,250 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 14:04:13,250 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 14:04:14,281 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 14:04:14,281 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 14:04:14,282 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 14:04:14,282 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 14:04:14,755 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 14:04:15,235 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 14:04:15,235 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 14:04:15,338 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 14:04:15,435 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 14:04:15,435 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 14:04:15,436 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 14:04:15,436 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 14:04:15,436 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 14:04:15,436 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 14:04:15,437 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 14:04:15,437 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 14:04:15,956 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 14:04:20,521 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:04:20,658 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:04:20,658 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 14:04:20,658 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 14:04:20,659 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 14:04:20,659 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 14:04:21,896 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 14:04:23,150 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 14:04:23,150 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 14:04:23,204 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 14:04:23,427 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 14:04:23,427 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 14:04:23,427 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 14:04:23,428 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 14:04:23,428 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 14:04:23,428 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 14:04:23,428 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 14:04:23,428 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 14:04:23,943 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 14:04:28,522 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:04:28,660 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:04:28,661 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 14:04:28,661 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 14:04:28,661 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 14:04:28,661 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 14:04:29,911 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 14:04:31,186 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 14:04:31,186 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 14:04:31,235 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 14:04:31,454 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 14:04:31,454 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 14:04:31,455 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 14:04:36,563 - test_advanced_rstp_mechanisms - INFO - 检测到的链路类型: {}
2025-09-10 14:04:36,564 - test_advanced_rstp_mechanisms - INFO - 测试点对点链路收敛性能
2025-09-10 14:04:40,565 - test_advanced_rstp_mechanisms - INFO - 收敛时间: 4.00秒
2025-09-10 14:04:40,566 - test_advanced_rstp_mechanisms - INFO - 验证链路类型识别
2025-09-10 14:04:40,566 - test_advanced_rstp_mechanisms - INFO - 不同链路类型行为差异测试通过
2025-09-10 14:04:40,567 - RSTPTest - INFO - 测试完成: test_shared_vs_point_to_point_links (耗时: 27.84秒)
2025-09-10 14:04:40,567 - RSTPTest - INFO - ============================================================

2025-09-10 14:04:40,567 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 14:04:40,568 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 14:04:40,568 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 14:04:40,704 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 14:04:40,704 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 14:04:40,835 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 14:04:40,835 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 14:04:40,968 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 14:04:40,969 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 14:04:40,969 - RSTPTest - INFO - ============================================================
2025-09-10 14:04:40,969 - RSTPTest - INFO - 开始测试: test_backup_port_concept_verification
2025-09-10 14:04:40,970 - RSTPTest - INFO - ============================================================
2025-09-10 14:04:40,970 - test_backup_port_simulation - INFO - 开始备份端口概念验证测试
2025-09-10 14:04:40,971 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 14:04:40,971 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 14:04:40,971 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 14:04:40,971 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 14:04:40,971 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 14:04:40,972 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 14:04:40,972 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 14:04:40,977 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 14:04:41,036 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 14:04:41,036 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 14:04:41,036 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 14:04:41,037 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 14:04:41,574 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 14:04:41,574 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 14:04:42,622 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 14:04:42,623 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 14:04:42,623 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 14:04:42,623 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 14:04:43,082 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 14:04:43,562 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 14:04:43,563 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 14:04:43,666 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 14:04:43,762 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 14:04:43,762 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 14:04:43,762 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 14:04:43,763 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 14:04:43,763 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 14:04:43,763 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 14:04:43,763 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 14:04:43,770 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 14:04:43,771 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 14:04:43,909 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 14:04:43,910 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 14:04:43,910 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 14:04:43,910 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 14:04:43,910 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 14:04:44,485 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 14:04:49,050 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:04:49,184 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:04:49,184 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 14:04:49,185 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 14:04:49,185 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 14:04:49,185 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 14:04:50,420 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 14:04:51,656 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 14:04:51,657 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 14:04:51,705 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 14:04:51,924 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 14:04:51,925 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 14:04:51,925 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 14:04:51,925 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 14:04:51,926 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 14:04:51,926 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 14:04:51,926 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 14:04:51,935 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 14:04:51,935 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 14:04:52,065 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 14:04:52,066 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 14:04:52,066 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 14:04:52,066 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 14:04:52,067 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 14:04:52,619 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 14:04:57,195 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:04:57,332 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:04:57,332 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 14:04:57,332 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 14:04:57,333 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 14:04:57,333 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 14:04:58,583 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 14:04:59,866 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 14:04:59,866 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 14:04:59,915 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 14:05:00,141 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 14:05:00,141 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 14:05:00,141 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 14:05:11,022 - test_backup_port_simulation - INFO - === 当前端口状态 ===
2025-09-10 14:05:11,022 - test_backup_port_simulation - INFO - 端口 eth0: 角色=root, 状态=disabled
2025-09-10 14:05:11,023 - test_backup_port_simulation - INFO - 端口 eth2: 角色=alternate, 状态=disabled
2025-09-10 14:05:11,023 - test_backup_port_simulation - INFO - 端口 eth3: 角色=unknown, 状态=disabled
2025-09-10 14:05:11,023 - test_backup_port_simulation - INFO - ⚠ 在当前点对点拓扑中未检测到备份端口（符合预期）
2025-09-10 14:05:11,023 - test_backup_port_simulation - INFO - 备份端口通常出现在共享介质网段中，当前测试环境为点对点链路
2025-09-10 14:05:11,023 - test_backup_port_simulation - INFO - 端口角色分布: {}
2025-09-10 14:05:11,024 - test_backup_port_simulation - INFO - === RSTP端口角色覆盖分析 ===
2025-09-10 14:05:11,024 - test_backup_port_simulation - INFO - - root端口: 未检测到
2025-09-10 14:05:11,024 - test_backup_port_simulation - INFO - - designated端口: 未检测到
2025-09-10 14:05:11,024 - test_backup_port_simulation - INFO - - alternate端口: 未检测到
2025-09-10 14:05:11,024 - test_backup_port_simulation - INFO - - backup端口: 未检测到（在点对点拓扑中为正常现象）
2025-09-10 14:05:11,025 - test_backup_port_simulation - INFO - 备份端口概念验证测试完成
2025-09-10 14:05:11,025 - RSTPTest - INFO - 测试完成: test_backup_port_concept_verification (耗时: 30.06秒)
2025-09-10 14:05:11,026 - RSTPTest - INFO - ============================================================

2025-09-10 14:05:11,027 - RSTPTest - INFO - ============================================================
2025-09-10 14:05:11,027 - RSTPTest - INFO - 开始测试: test_shared_medium_simulation_attempt
2025-09-10 14:05:11,027 - RSTPTest - INFO - ============================================================
2025-09-10 14:05:11,028 - test_backup_port_simulation - INFO - 开始共享介质模拟尝试
2025-09-10 14:05:11,028 - test_backup_port_simulation - INFO - === 尝试创建共享介质模拟场景 ===
2025-09-10 14:05:11,028 - test_backup_port_simulation - INFO - 创建中心交换机模拟共享介质...
2025-09-10 14:05:11,028 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 14:05:11,028 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 14:05:11,029 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 14:05:11,029 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 14:05:11,029 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 14:05:11,029 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 14:05:11,029 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 14:05:11,029 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 14:05:11,520 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 14:05:11,521 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 14:05:12,570 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 14:05:12,570 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 14:05:12,570 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 14:05:12,570 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 14:05:13,026 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 14:05:13,514 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 14:05:13,514 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 14:05:13,622 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 14:05:13,718 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 14:05:13,718 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 14:05:13,718 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 14:05:13,718 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 14:05:13,718 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 14:05:13,719 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 14:05:13,719 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 14:05:13,719 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 14:05:14,234 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 14:05:18,821 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:05:18,952 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:05:18,952 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 14:05:18,952 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 14:05:18,953 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 14:05:18,953 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 14:05:20,384 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 14:05:21,613 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 14:05:21,613 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 14:05:21,663 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 14:05:21,894 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 14:05:21,894 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 14:05:21,895 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 14:05:21,895 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 14:05:21,895 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 14:05:21,895 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 14:05:21,895 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 14:05:21,895 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 14:05:22,427 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 14:05:26,985 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:05:27,121 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:05:27,121 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 14:05:27,122 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 14:05:27,122 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 14:05:27,122 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 14:05:28,372 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 14:05:29,655 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 14:05:29,655 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 14:05:29,704 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 14:05:29,934 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 14:05:29,934 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 14:05:29,934 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 14:05:40,805 - test_backup_port_simulation - INFO - === 分析当前端口配置 ===
2025-09-10 14:05:40,805 - test_backup_port_simulation - INFO - ⚠ 未检测到备份端口
2025-09-10 14:05:40,806 - test_backup_port_simulation - INFO - 这在当前测试环境中是正常的，因为缺乏真正的共享介质
2025-09-10 14:05:40,806 - test_backup_port_simulation - INFO - 共享介质模拟尝试完成
2025-09-10 14:05:40,807 - RSTPTest - INFO - 测试完成: test_shared_medium_simulation_attempt (耗时: 29.78秒)
2025-09-10 14:05:40,807 - RSTPTest - INFO - ============================================================

2025-09-10 14:05:40,809 - RSTPTest - INFO - ============================================================
2025-09-10 14:05:40,809 - RSTPTest - INFO - 开始测试: test_backup_port_documentation_verification
2025-09-10 14:05:40,809 - RSTPTest - INFO - ============================================================
2025-09-10 14:05:40,810 - test_backup_port_simulation - INFO - 开始备份端口文档验证
2025-09-10 14:05:40,810 - test_backup_port_simulation - INFO - ✓ PortRole.BACKUP 存在
2025-09-10 14:05:40,810 - test_backup_port_simulation - INFO - === 备份端口理论特性验证 ===
2025-09-10 14:05:40,810 - test_backup_port_simulation - INFO - purpose: 为共享介质网段提供冗余
2025-09-10 14:05:40,811 - test_backup_port_simulation - INFO - difference_from_alternate: 备份端口是同一交换机上指定端口的备份，而备用端口是不同交换机提供的路径
2025-09-10 14:05:40,811 - test_backup_port_simulation - INFO - state: Discarding
2025-09-10 14:05:40,811 - test_backup_port_simulation - INFO - scenario: 出现在连接到集线器或共享介质的场景中
2025-09-10 14:05:40,811 - test_backup_port_simulation - INFO - fast_transition: 当对应的指定端口失效时，可以快速转换为指定端口
2025-09-10 14:05:40,811 - test_backup_port_simulation - INFO - === 端口角色对比 ===
2025-09-10 14:05:40,812 - test_backup_port_simulation - INFO - root: 连接到根桥的最佳路径
2025-09-10 14:05:40,812 - test_backup_port_simulation - INFO - designated: 为网段提供转发服务
2025-09-10 14:05:40,812 - test_backup_port_simulation - INFO - alternate: 提供到根桥的备用路径（来自其他交换机）
2025-09-10 14:05:40,813 - test_backup_port_simulation - INFO - backup: 同一交换机上指定端口的备份（共享介质场景）
2025-09-10 14:05:40,813 - test_backup_port_simulation - INFO - === 测试覆盖率分析 ===
2025-09-10 14:05:40,813 - test_backup_port_simulation - INFO - 已覆盖: Root Port, Designated Port, Alternate Port, Disabled Port
2025-09-10 14:05:40,813 - test_backup_port_simulation - INFO - 部分覆盖: Backup Port (概念验证)
2025-09-10 14:05:40,813 - test_backup_port_simulation - INFO - 覆盖限制: 测试框架无法创建真正的共享介质拓扑
2025-09-10 14:05:40,814 - test_backup_port_simulation - INFO - 建议: 在实际部署环境中使用集线器或配置交换机共享模式进行完整测试
2025-09-10 14:05:40,814 - test_backup_port_simulation - INFO - 备份端口文档验证完成
2025-09-10 14:05:40,815 - RSTPTest - INFO - 测试完成: test_backup_port_documentation_verification (耗时: 0.01秒)
2025-09-10 14:05:40,815 - RSTPTest - INFO - ============================================================

2025-09-10 14:05:40,815 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 14:05:40,816 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 14:05:40,816 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 14:05:40,963 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 14:05:40,963 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 14:05:41,083 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 14:05:41,083 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 14:05:41,221 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 14:05:41,221 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 14:05:41,222 - RSTPTest - INFO - ============================================================
2025-09-10 14:05:41,222 - RSTPTest - INFO - 开始测试: test_direct_link_failure
2025-09-10 14:05:41,223 - RSTPTest - INFO - ============================================================
2025-09-10 14:05:41,224 - test_convergence - INFO - 开始直接链路故障测试
2025-09-10 14:05:41,224 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 14:05:41,224 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 14:05:41,224 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 14:05:41,225 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 14:05:41,225 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 14:05:41,225 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 14:05:41,225 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 14:05:41,231 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 14:05:41,286 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 14:05:41,287 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 14:05:41,287 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 14:05:41,287 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 14:05:41,812 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 14:05:41,812 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 14:05:42,857 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 14:05:42,857 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 14:05:42,857 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 14:05:42,858 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 14:05:43,313 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 14:05:43,784 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 14:05:43,784 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 14:05:43,888 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 14:05:43,985 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 14:05:43,986 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 14:05:43,986 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 14:05:43,986 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 14:05:43,986 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 14:05:43,986 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 14:05:43,986 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 14:05:43,995 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 14:05:43,995 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 14:05:44,139 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 14:05:44,140 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 14:05:44,140 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 14:05:44,140 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 14:05:44,140 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 14:05:44,703 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 14:05:49,226 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:05:49,369 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:05:49,369 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 14:05:49,370 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 14:05:49,370 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 14:05:49,370 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 14:05:50,603 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 14:05:51,855 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 14:05:51,855 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 14:05:51,905 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 14:05:52,121 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 14:05:52,121 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 14:05:52,121 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 14:05:52,121 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 14:05:52,121 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 14:05:52,122 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 14:05:52,122 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 14:05:52,131 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 14:05:52,131 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 14:05:52,257 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 14:05:52,258 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 14:05:52,258 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 14:05:52,258 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 14:05:52,258 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 14:05:52,811 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 14:05:57,340 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:05:57,478 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:05:57,478 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 14:05:57,479 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 14:05:57,479 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 14:05:57,479 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 14:05:58,731 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 14:05:59,991 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 14:05:59,991 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 14:06:00,042 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 14:06:00,266 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 14:06:00,266 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 14:06:00,266 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 14:06:00,613 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 14:06:02,236 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.62秒
2025-09-10 14:06:02,236 - test_convergence - INFO - 初始收敛时间: 1.62秒
2025-09-10 14:06:03,105 - test_convergence - INFO - DUT的Root Port: eth0
2025-09-10 14:06:03,105 - FaultInjector_DUT - INFO - 断开链路: eth0
2025-09-10 14:06:03,363 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth0 (code=1)，将在逻辑上标记为已断开
2025-09-10 14:06:03,364 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 14:06:04,925 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.56秒
2025-09-10 14:06:05,737 - test_convergence - INFO - 链路故障收敛时间: 1.56秒
2025-09-10 14:06:05,737 - test_convergence - INFO - 新的Root Port: eth2
2025-09-10 14:06:05,737 - test_convergence - INFO - 直接链路故障测试通过
2025-09-10 14:06:05,738 - RSTPTest - INFO - 测试完成: test_direct_link_failure (耗时: 24.52秒)
2025-09-10 14:06:05,738 - RSTPTest - INFO - ============================================================

2025-09-10 14:06:05,781 - RSTPTest - INFO - ============================================================
2025-09-10 14:06:05,781 - RSTPTest - INFO - 开始测试: test_multiple_link_failures
2025-09-10 14:06:05,781 - RSTPTest - INFO - ============================================================
2025-09-10 14:06:05,782 - test_convergence - INFO - 开始多重链路故障测试
2025-09-10 14:06:05,782 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 14:06:05,783 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 14:06:05,783 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 14:06:05,783 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 14:06:05,783 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 14:06:05,783 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 14:06:05,783 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 14:06:05,783 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 14:06:06,267 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 14:06:06,268 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 14:06:07,330 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 14:06:07,330 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 14:06:07,330 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 14:06:07,331 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 14:06:07,785 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 14:06:08,264 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 14:06:08,264 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 14:06:08,368 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 14:06:08,465 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 14:06:08,465 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 14:06:08,466 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 14:06:08,466 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 14:06:08,466 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 14:06:08,466 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 14:06:08,467 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 14:06:08,467 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 14:06:08,992 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 14:06:13,585 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:06:13,723 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:06:13,723 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 14:06:13,723 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 14:06:13,724 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 14:06:13,724 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 14:06:14,981 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 14:06:16,205 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 14:06:16,206 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 14:06:16,255 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 14:06:16,508 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 14:06:16,509 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 14:06:16,509 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 14:06:16,509 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 14:06:16,510 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 14:06:16,510 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 14:06:16,510 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 14:06:16,510 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 14:06:17,048 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 14:06:21,605 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:06:21,754 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:06:21,754 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 14:06:21,755 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 14:06:21,755 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 14:06:21,755 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 14:06:22,973 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 14:06:24,227 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 14:06:24,227 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 14:06:24,275 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 14:06:24,515 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 14:06:24,515 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 14:06:24,516 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 14:06:24,516 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 14:06:26,058 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.54秒
2025-09-10 14:06:26,059 - test_convergence - INFO - 注入故障: eth0
2025-09-10 14:06:26,059 - FaultInjector_DUT - INFO - 断开链路: eth0
2025-09-10 14:06:26,283 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth0 (code=1)，将在逻辑上标记为已断开
2025-09-10 14:06:26,283 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 14:06:27,884 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.60秒
2025-09-10 14:06:27,884 - test_convergence - INFO - eth0故障收敛时间: 1.60秒
2025-09-10 14:06:29,885 - test_convergence - INFO - 注入故障: eth2
2025-09-10 14:06:29,885 - FaultInjector_DUT - INFO - 断开链路: eth2
2025-09-10 14:06:30,115 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth2 (code=1)，将在逻辑上标记为已断开
2025-09-10 14:06:30,115 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 14:06:31,677 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.56秒
2025-09-10 14:06:31,678 - test_convergence - INFO - eth2故障收敛时间: 1.56秒
2025-09-10 14:06:33,678 - FaultInjector_DUT - INFO - 恢复链路: eth0
2025-09-10 14:06:33,899 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth0 (code=1)，将在逻辑上标记为已恢复
2025-09-10 14:06:33,900 - FaultInjector_DUT - INFO - 恢复链路: eth2
2025-09-10 14:06:34,159 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth2 (code=1)，将在逻辑上标记为已恢复
2025-09-10 14:06:34,160 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 14:06:35,797 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 1.64秒
2025-09-10 14:06:35,797 - test_convergence - INFO - 最终恢复收敛时间: 1.64秒
2025-09-10 14:06:35,797 - test_convergence - INFO - 多重链路故障测试通过
2025-09-10 14:06:35,798 - RSTPTest - INFO - 测试完成: test_multiple_link_failures (耗时: 30.02秒)
2025-09-10 14:06:35,798 - RSTPTest - INFO - ============================================================

2025-09-10 14:06:35,799 - RSTPTest - INFO - ============================================================
2025-09-10 14:06:35,800 - RSTPTest - INFO - 开始测试: test_convergence_with_traffic
2025-09-10 14:06:35,800 - RSTPTest - INFO - ============================================================
2025-09-10 14:06:35,801 - test_convergence - INFO - 开始带流量的收敛测试
2025-09-10 14:06:35,801 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 14:06:35,801 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 14:06:35,801 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 14:06:35,801 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 14:06:35,802 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 14:06:35,802 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 14:06:35,802 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 14:06:35,802 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 14:06:36,277 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 14:06:36,277 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 14:06:37,328 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 14:06:37,328 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 14:06:37,329 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 14:06:37,329 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 14:06:37,808 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 14:06:38,300 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 14:06:38,300 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 14:06:38,403 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 14:06:38,500 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 14:06:38,501 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 14:06:38,501 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 14:06:38,501 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 14:06:38,502 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 14:06:38,502 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 14:06:38,502 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 14:06:38,502 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 14:06:39,021 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 14:06:43,600 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:06:43,734 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:06:43,734 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 14:06:43,734 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 14:06:43,735 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 14:06:43,735 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 14:06:44,967 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 14:06:46,182 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 14:06:46,183 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 14:06:46,231 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 14:06:46,451 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 14:06:46,452 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 14:06:46,452 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 14:06:46,452 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 14:06:46,452 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 14:06:46,452 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 14:06:46,452 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 14:06:46,453 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 14:06:46,970 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 14:06:51,542 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:06:51,682 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:06:51,683 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 14:06:51,683 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 14:06:51,683 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 14:06:51,683 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 14:06:52,914 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 14:06:54,196 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 14:06:54,196 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 14:06:54,246 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 14:06:54,464 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 14:06:54,465 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 14:06:54,465 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 14:07:00,579 - TrafficGenerator - INFO - 启动iperf3服务器: 192.168.184.131:5201
2025-09-10 14:07:02,657 - TrafficGenerator - ERROR - iperf3服务器启动失败
2025-09-10 14:07:05,580 - TrafficGenerator - INFO - 启动iperf3客户端: -> 192.168.184.131:5201
2025-09-10 14:07:05,580 - TrafficGenerator - INFO - iperf3客户端已启动 (udp, 100M)
2025-09-10 14:07:10,582 - FaultInjector_DUT - INFO - 断开链路: eth0
2025-09-10 14:07:10,799 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth0 (code=1)，将在逻辑上标记为已断开
2025-09-10 14:07:20,800 - test_convergence - INFO - 丢包数: 0
2025-09-10 14:07:20,800 - test_convergence - INFO - 估计中断时间: 0.000秒
2025-09-10 14:07:20,801 - TrafficGenerator - INFO - 停止流量生成
2025-09-10 14:07:22,863 - test_convergence - INFO - 带流量的收敛测试通过
2025-09-10 14:07:22,864 - RSTPTest - INFO - 测试完成: test_convergence_with_traffic (耗时: 47.06秒)
2025-09-10 14:07:22,864 - RSTPTest - INFO - ============================================================

2025-09-10 14:07:22,864 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 14:07:22,865 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 14:07:22,865 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 14:07:22,997 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 14:07:22,997 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 14:07:23,117 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 14:07:23,117 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 14:07:23,264 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 14:07:23,264 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 14:07:23,264 - RSTPTest - INFO - ============================================================
2025-09-10 14:07:23,264 - RSTPTest - INFO - 开始测试: test_backup_port_simulation
2025-09-10 14:07:23,265 - RSTPTest - INFO - ============================================================
2025-09-10 14:07:23,265 - test_enhanced_rstp_coverage - INFO - 开始备份端口模拟测试
2025-09-10 14:07:23,266 - test_enhanced_rstp_coverage - INFO - 创建模拟共享网段拓扑
2025-09-10 14:07:23,732 - test_enhanced_rstp_coverage - INFO - ✓ 创建连接: rstp0:dut_port1 <-> shared_segment:shared_port1
2025-09-10 14:07:24,088 - test_enhanced_rstp_coverage - INFO - ✓ 创建连接: rstp0:dut_port2 <-> shared_segment:shared_port2
2025-09-10 14:07:24,736 - test_enhanced_rstp_coverage - INFO - ✓ 创建远程交换机: remote_switch
2025-09-10 14:07:24,736 - test_enhanced_rstp_coverage - INFO - 等待RSTP收敛...
2025-09-10 14:07:40,612 - test_enhanced_rstp_coverage - INFO - DUT桥信息: BridgeInfo(bridge_id='', root_id='', root_port='eth0', root_path_cost=0, protocol_version='rstp', hello_time=2, forward_delay=15, max_age=20, topology_changes=0, ports={'eth0': PortInfo(name='eth0', role=<PortRole.ROOT: 'root'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth2': PortInfo(name='eth2', role=<PortRole.ALTERNATE: 'alternate'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth3': PortInfo(name='eth3', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')})
2025-09-10 14:07:40,612 - test_enhanced_rstp_coverage - INFO - 清理测试环境
2025-09-10 14:07:41,298 - test_enhanced_rstp_coverage - INFO - ✓ 备份端口模拟测试完成
2025-09-10 14:07:41,299 - RSTPTest - INFO - 测试完成: test_backup_port_simulation (耗时: 18.03秒)
2025-09-10 14:07:41,299 - RSTPTest - INFO - ============================================================

2025-09-10 14:07:41,300 - RSTPTest - INFO - ============================================================
2025-09-10 14:07:41,300 - RSTPTest - INFO - 开始测试: test_comprehensive_port_state_transitions
2025-09-10 14:07:41,300 - RSTPTest - INFO - ============================================================
2025-09-10 14:07:41,301 - test_enhanced_rstp_coverage - INFO - 开始全面端口状态转换测试
2025-09-10 14:07:41,301 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 14:07:41,302 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 14:07:41,302 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 14:07:41,302 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 14:07:41,302 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 14:07:41,302 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 14:07:41,303 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 14:07:41,343 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 14:07:41,400 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 14:07:41,400 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 14:07:41,401 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 14:07:41,401 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 14:07:41,918 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 14:07:41,918 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 14:07:42,979 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 14:07:42,979 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 14:07:42,979 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 14:07:42,979 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 14:07:43,439 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 14:07:43,919 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 14:07:43,919 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 14:07:44,023 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 14:07:44,119 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 14:07:44,119 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 14:07:44,120 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 14:07:44,120 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 14:07:44,120 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 14:07:44,120 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 14:07:44,120 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 14:07:44,128 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 14:07:44,128 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 14:07:44,256 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 14:07:44,257 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 14:07:44,257 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 14:07:44,257 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 14:07:44,257 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 14:07:44,802 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 14:07:49,350 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:07:49,485 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:07:49,485 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 14:07:49,485 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 14:07:49,486 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 14:07:49,486 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 14:07:50,714 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 14:07:51,945 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 14:07:51,946 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 14:07:51,994 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 14:07:52,222 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 14:07:52,222 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 14:07:52,223 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 14:07:52,223 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 14:07:52,223 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 14:07:52,223 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 14:07:52,223 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 14:07:52,231 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 14:07:52,231 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 14:07:52,355 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 14:07:52,355 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 14:07:52,356 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 14:07:52,356 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 14:07:52,356 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 14:07:52,909 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 14:07:57,488 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:07:57,625 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:07:57,626 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 14:07:57,626 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 14:07:57,626 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 14:07:57,626 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 14:07:58,860 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 14:08:00,144 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 14:08:00,145 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 14:08:00,195 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 14:08:00,416 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 14:08:00,416 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 14:08:00,416 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 14:08:00,628 - test_enhanced_rstp_coverage - INFO - 等待初始收敛...
2025-09-10 14:08:00,629 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 14:08:01,535 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.91秒
2025-09-10 14:08:02,898 - RSTPTest - INFO - 测试完成: test_comprehensive_port_state_transitions (耗时: 21.60秒)
2025-09-10 14:08:02,898 - RSTPTest - INFO - ============================================================

2025-09-10 14:08:02,900 - RSTPTest - INFO - ============================================================
2025-09-10 14:08:02,900 - RSTPTest - INFO - 开始测试: test_detailed_bpdu_analysis
2025-09-10 14:08:02,901 - RSTPTest - INFO - ============================================================
2025-09-10 14:08:02,901 - test_enhanced_rstp_coverage - INFO - 开始详细BPDU分析测试
2025-09-10 14:08:02,901 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 14:08:02,902 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 14:08:02,902 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 14:08:02,902 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 14:08:02,902 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 14:08:02,902 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 14:08:02,903 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 14:08:02,903 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 14:08:03,414 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 14:08:03,414 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 14:08:04,492 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 14:08:04,492 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 14:08:04,493 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 14:08:04,493 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 14:08:04,942 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 14:08:05,418 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 14:08:05,419 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 14:08:05,522 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 14:08:05,619 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 14:08:05,619 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 14:08:05,619 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 14:08:05,620 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 14:08:05,620 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 14:08:05,620 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 14:08:05,620 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 14:08:05,620 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 14:08:06,143 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 14:08:10,698 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:08:10,828 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:08:10,828 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 14:08:10,828 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 14:08:10,829 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 14:08:10,829 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 14:08:12,057 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 14:08:13,319 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 14:08:13,319 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 14:08:13,367 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 14:08:13,587 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 14:08:13,587 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 14:08:13,587 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 14:08:13,587 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 14:08:13,587 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 14:08:13,588 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 14:08:13,588 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 14:08:13,588 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 14:08:14,113 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 14:08:18,658 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:08:18,796 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:08:18,797 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 14:08:18,797 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 14:08:18,797 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 14:08:18,797 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 14:08:20,012 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 14:08:21,287 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 14:08:21,288 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 14:08:21,337 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 14:08:21,571 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 14:08:21,571 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 14:08:21,571 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 14:08:21,902 - test_enhanced_rstp_coverage - INFO - 等待RSTP收敛...
2025-09-10 14:08:21,902 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 14:08:22,799 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.90秒
2025-09-10 14:08:23,742 - test_enhanced_rstp_coverage - INFO - Hello Time: 2秒
2025-09-10 14:08:23,743 - test_enhanced_rstp_coverage - INFO - === 测试1: 验证分布式BPDU生成 ===
2025-09-10 14:08:23,743 - test_enhanced_rstp_coverage - INFO - 总共捕获0个BPDU，来自0个不同源
2025-09-10 14:08:23,761 - RSTPTest - INFO - 测试完成: test_detailed_bpdu_analysis (耗时: 20.86秒)
2025-09-10 14:08:23,761 - RSTPTest - INFO - ============================================================

2025-09-10 14:08:23,763 - RSTPTest - INFO - ============================================================
2025-09-10 14:08:23,763 - RSTPTest - INFO - 开始测试: test_topology_change_comprehensive
2025-09-10 14:08:23,763 - RSTPTest - INFO - ============================================================
2025-09-10 14:08:23,764 - test_enhanced_rstp_coverage - INFO - 开始全面拓扑变更测试
2025-09-10 14:08:23,764 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 14:08:23,765 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 14:08:23,765 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 14:08:23,765 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 14:08:23,765 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 14:08:23,765 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 14:08:23,765 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 14:08:23,766 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 14:08:24,270 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 14:08:24,270 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 14:08:25,330 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 14:08:25,330 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 14:08:25,330 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 14:08:25,331 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 14:08:25,818 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 14:08:26,318 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 14:08:26,318 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 14:08:26,430 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 14:08:26,530 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 14:08:26,531 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 14:08:26,531 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 14:08:26,531 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 14:08:26,531 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 14:08:26,531 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 14:08:26,532 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 14:08:26,532 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 14:08:27,053 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 14:08:31,646 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:08:31,790 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:08:31,791 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 14:08:31,791 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 14:08:31,791 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 14:08:31,791 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 14:08:33,014 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 14:08:34,231 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 14:08:34,232 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 14:08:34,281 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 14:08:34,508 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 14:08:34,508 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 14:08:34,508 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 14:08:34,508 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 14:08:34,508 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 14:08:34,509 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 14:08:34,509 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 14:08:34,509 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 14:08:35,017 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 14:08:39,555 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:08:39,701 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:08:39,702 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 14:08:39,702 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 14:08:39,702 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 14:08:39,702 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 14:08:40,941 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 14:08:42,234 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 14:08:42,235 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 14:08:42,283 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 14:08:42,502 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 14:08:42,502 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 14:08:42,502 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 14:08:42,702 - test_enhanced_rstp_coverage - INFO - 等待初始收敛...
2025-09-10 14:08:42,702 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 14:08:43,626 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.92秒
2025-09-10 14:08:45,482 - test_enhanced_rstp_coverage - INFO - 初始状态: DUT是根桥=True
2025-09-10 14:08:45,482 - test_enhanced_rstp_coverage - INFO - === 测试场景1: 根桥变更 ===
2025-09-10 14:08:45,482 - test_enhanced_rstp_coverage - INFO - === 测试场景2: 端口故障恢复 ===
2025-09-10 14:08:46,430 - test_enhanced_rstp_coverage - INFO - === 测试场景3: 端口优先级变更 ===
2025-09-10 14:08:47,350 - test_enhanced_rstp_coverage - WARNING - 未检测到明显的拓扑变更，可能是测试环境限制
2025-09-10 14:08:47,351 - test_enhanced_rstp_coverage - INFO - ✓ 全面拓扑变更测试完成
2025-09-10 14:08:47,352 - RSTPTest - INFO - 测试完成: test_topology_change_comprehensive (耗时: 23.59秒)
2025-09-10 14:08:47,352 - RSTPTest - INFO - ============================================================

2025-09-10 14:08:47,352 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 14:08:47,353 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 14:08:47,353 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 14:08:47,504 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 14:08:47,505 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 14:08:47,624 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 14:08:47,625 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 14:08:47,759 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 14:08:47,759 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 14:08:47,760 - RSTPTest - INFO - ============================================================
2025-09-10 14:08:47,760 - RSTPTest - INFO - 开始测试: test_rstp_reconvergence_no_switchover
2025-09-10 14:08:47,761 - RSTPTest - INFO - ============================================================
2025-09-10 14:08:47,761 - test_high_availability - INFO - 开始RSTP重构误判测试
2025-09-10 14:08:47,762 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 14:08:47,762 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 14:08:47,762 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 14:08:47,762 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 14:08:47,763 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 14:08:47,763 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 14:08:47,763 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 14:08:47,769 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 14:08:47,833 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 14:08:47,834 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 14:08:47,834 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 14:08:47,834 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 14:08:48,353 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 14:08:48,354 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 14:08:49,398 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 14:08:49,399 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 14:08:49,399 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 14:08:49,399 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 14:08:49,868 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 14:08:50,361 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 14:08:50,361 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 14:08:50,462 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 14:08:50,559 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 14:08:50,559 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 14:08:50,560 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 14:08:50,560 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 14:08:50,560 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 14:08:50,560 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 14:08:50,561 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 14:08:50,569 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 14:08:50,569 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 14:08:50,708 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 14:08:50,708 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 14:08:50,708 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 14:08:50,709 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 14:08:50,709 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 14:08:51,274 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 14:08:55,838 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:08:55,974 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:08:55,974 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 14:08:55,974 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 14:08:55,975 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 14:08:55,975 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 14:08:57,209 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 14:08:58,462 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 14:08:58,463 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 14:08:58,513 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 14:08:58,743 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 14:08:58,743 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 14:08:58,743 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 14:08:58,744 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 14:08:58,744 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 14:08:58,744 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 14:08:58,744 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 14:08:58,752 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 14:08:58,752 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 14:08:58,882 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 14:08:58,883 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 14:08:58,883 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 14:08:58,883 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 14:08:58,883 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 14:08:59,428 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 14:09:04,016 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:09:04,156 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:09:04,158 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 14:09:04,159 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 14:09:04,159 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 14:09:04,159 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 14:09:05,396 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 14:09:06,663 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 14:09:06,664 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 14:09:06,712 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 14:09:06,938 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 14:09:06,938 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 14:09:06,939 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 14:09:11,944 - test_high_availability - INFO - 初始HA状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-10 14:09:11,944 - test_high_availability - INFO - 在远端触发RSTP重构...
2025-09-10 14:09:11,944 - FaultInjector_TestNode2 - INFO - 断开链路: eth0
2025-09-10 14:09:12,129 - FaultInjector_TestNode2 - INFO - 链路已断开: eth0
2025-09-10 14:09:22,135 - test_high_availability - INFO - RSTP重构后HA状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-10 14:09:22,135 - FaultInjector_TestNode2 - INFO - 恢复链路: eth0
2025-09-10 14:09:22,277 - FaultInjector_TestNode2 - INFO - 链路已恢复: eth0
2025-09-10 14:09:22,278 - test_high_availability - INFO - RSTP重构误判测试完成
2025-09-10 14:09:22,279 - RSTPTest - INFO - 测试完成: test_rstp_reconvergence_no_switchover (耗时: 34.52秒)
2025-09-10 14:09:22,279 - RSTPTest - INFO - ============================================================

2025-09-10 14:09:22,281 - RSTPTest - INFO - ============================================================
2025-09-10 14:09:22,281 - RSTPTest - INFO - 开始测试: test_split_brain_scenario
2025-09-10 14:09:22,281 - RSTPTest - INFO - ============================================================
2025-09-10 14:09:22,282 - test_high_availability - INFO - 开始裂脑场景测试
2025-09-10 14:09:22,287 - test_high_availability - INFO - 初始状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-10 14:09:22,288 - test_high_availability - INFO - 断开同步链路: eth3
2025-09-10 14:09:22,288 - FaultInjector_DUT - INFO - 断开链路: eth3
2025-09-10 14:09:22,545 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth3 (code=1)，将在逻辑上标记为已断开
2025-09-10 14:09:32,546 - test_high_availability - WARNING - 裂脑测试需要访问两个控制器
2025-09-10 14:09:32,546 - FaultInjector_DUT - INFO - 恢复链路: eth3
2025-09-10 14:09:32,764 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth3 (code=1)，将在逻辑上标记为已恢复
2025-09-10 14:09:32,765 - test_high_availability - INFO - 裂脑场景测试完成
2025-09-10 14:09:32,765 - RSTPTest - INFO - 测试完成: test_split_brain_scenario (耗时: 10.48秒)
2025-09-10 14:09:32,766 - RSTPTest - INFO - ============================================================

2025-09-10 14:09:32,770 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 14:09:32,770 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 14:09:32,771 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 14:09:32,903 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 14:09:32,904 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 14:09:32,904 - RSTPTest - INFO - ============================================================
2025-09-10 14:09:32,904 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[12288]
2025-09-10 14:09:32,904 - RSTPTest - INFO - ============================================================
2025-09-10 14:09:32,905 - test_parameters - INFO - 测试网桥优先级: 12288
2025-09-10 14:09:34,458 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-10 14:09:36,565 - test_parameters - INFO - 从OVS配置读取到优先级: 12288
2025-09-10 14:09:36,565 - test_parameters - INFO - 优先级12288设置成功
2025-09-10 14:09:36,566 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[12288] (耗时: 3.66秒)
2025-09-10 14:09:36,566 - RSTPTest - INFO - ============================================================

2025-09-10 14:09:36,567 - RSTPTest - INFO - ============================================================
2025-09-10 14:09:36,567 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[16384]
2025-09-10 14:09:36,567 - RSTPTest - INFO - ============================================================
2025-09-10 14:09:36,568 - test_parameters - INFO - 测试网桥优先级: 16384
2025-09-10 14:09:38,113 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-10 14:09:40,221 - test_parameters - INFO - 从OVS配置读取到优先级: 16384
2025-09-10 14:09:40,221 - test_parameters - INFO - 优先级16384设置成功
2025-09-10 14:09:40,222 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[16384] (耗时: 3.65秒)
2025-09-10 14:09:40,222 - RSTPTest - INFO - ============================================================

2025-09-10 14:09:40,224 - RSTPTest - INFO - ============================================================
2025-09-10 14:09:40,224 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[32768]
2025-09-10 14:09:40,224 - RSTPTest - INFO - ============================================================
2025-09-10 14:09:40,225 - test_parameters - INFO - 测试网桥优先级: 32768
2025-09-10 14:09:41,760 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-10 14:09:43,865 - test_parameters - INFO - 从OVS配置读取到优先级: 32768
2025-09-10 14:09:43,865 - test_parameters - INFO - 优先级32768设置成功
2025-09-10 14:09:43,866 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[32768] (耗时: 3.64秒)
2025-09-10 14:09:43,866 - RSTPTest - INFO - ============================================================

2025-09-10 14:09:43,867 - RSTPTest - INFO - ============================================================
2025-09-10 14:09:43,867 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[61440]
2025-09-10 14:09:43,867 - RSTPTest - INFO - ============================================================
2025-09-10 14:09:43,868 - test_parameters - INFO - 测试网桥优先级: 61440
2025-09-10 14:09:45,486 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-10 14:09:47,597 - test_parameters - INFO - 从OVS配置读取到优先级: 61440
2025-09-10 14:09:47,597 - test_parameters - INFO - 优先级61440设置成功
2025-09-10 14:09:47,598 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[61440] (耗时: 3.73秒)
2025-09-10 14:09:47,598 - RSTPTest - INFO - ============================================================

2025-09-10 14:09:47,599 - RSTPTest - INFO - ============================================================
2025-09-10 14:09:47,600 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[4097]
2025-09-10 14:09:47,600 - RSTPTest - INFO - ============================================================
2025-09-10 14:09:47,601 - test_parameters - INFO - 测试无效优先级: 4097
2025-09-10 14:09:49,413 - test_parameters - INFO - DUT处理无效优先级 4097 -> 4097
2025-09-10 14:09:49,413 - test_parameters - ERROR - DUT接受了非标准优先级值 4097，不符合802.1D标准（应为4096的倍数）
2025-09-10 14:09:49,432 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[4097] (耗时: 1.83秒)
2025-09-10 14:09:49,432 - RSTPTest - INFO - ============================================================

2025-09-10 14:09:49,434 - RSTPTest - INFO - ============================================================
2025-09-10 14:09:49,434 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[12289]
2025-09-10 14:09:49,434 - RSTPTest - INFO - ============================================================
2025-09-10 14:09:49,435 - test_parameters - INFO - 测试无效优先级: 12289
2025-09-10 14:09:51,257 - test_parameters - INFO - DUT处理无效优先级 12289 -> 12289
2025-09-10 14:09:51,257 - test_parameters - ERROR - DUT接受了非标准优先级值 12289，不符合802.1D标准（应为4096的倍数）
2025-09-10 14:09:51,279 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[12289] (耗时: 1.84秒)
2025-09-10 14:09:51,279 - RSTPTest - INFO - ============================================================

2025-09-10 14:09:51,281 - RSTPTest - INFO - ============================================================
2025-09-10 14:09:51,281 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[70000]
2025-09-10 14:09:51,281 - RSTPTest - INFO - ============================================================
2025-09-10 14:09:51,282 - test_parameters - INFO - 测试无效优先级: 70000
2025-09-10 14:09:53,100 - test_parameters - INFO - DUT处理无效优先级 70000 -> 70000
2025-09-10 14:09:53,100 - test_parameters - ERROR - DUT接受了非标准优先级值 70000，不符合802.1D标准（应为4096的倍数）
2025-09-10 14:09:53,121 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[70000] (耗时: 1.84秒)
2025-09-10 14:09:53,121 - RSTPTest - INFO - ============================================================

2025-09-10 14:09:53,124 - RSTPTest - INFO - ============================================================
2025-09-10 14:09:53,124 - RSTPTest - INFO - 开始测试: test_hello_time
2025-09-10 14:09:53,124 - RSTPTest - INFO - ============================================================
2025-09-10 14:09:53,125 - test_parameters - INFO - 测试Hello Time参数
2025-09-10 14:09:54,693 - test_parameters - INFO - 设置Hello Time: 1秒
2025-09-10 14:09:56,872 - test_parameters - INFO - Hello Time 1秒设置成功
2025-09-10 14:09:56,872 - test_parameters - INFO - 设置Hello Time: 2秒
2025-09-10 14:09:59,095 - test_parameters - INFO - Hello Time 2秒设置成功
2025-09-10 14:09:59,096 - test_parameters - INFO - 设置Hello Time: 5秒
2025-09-10 14:10:01,324 - test_parameters - INFO - Hello Time 5秒设置成功
2025-09-10 14:10:01,325 - test_parameters - INFO - Hello Time测试通过
2025-09-10 14:10:01,325 - RSTPTest - INFO - 测试完成: test_hello_time (耗时: 8.20秒)
2025-09-10 14:10:01,325 - RSTPTest - INFO - ============================================================

2025-09-10 14:10:01,327 - RSTPTest - INFO - ============================================================
2025-09-10 14:10:01,327 - RSTPTest - INFO - 开始测试: test_forward_delay
2025-09-10 14:10:01,327 - RSTPTest - INFO - ============================================================
2025-09-10 14:10:01,328 - test_parameters - INFO - 测试Forward Delay参数
2025-09-10 14:10:02,944 - test_parameters - INFO - 设置Forward Delay: 4秒
2025-09-10 14:10:05,124 - test_parameters - INFO - Forward Delay 4秒设置成功
2025-09-10 14:10:05,124 - test_parameters - INFO - 设置Forward Delay: 10秒
2025-09-10 14:10:07,348 - test_parameters - INFO - Forward Delay 10秒设置成功
2025-09-10 14:10:07,348 - test_parameters - INFO - 设置Forward Delay: 15秒
2025-09-10 14:10:09,571 - test_parameters - INFO - Forward Delay 15秒设置成功
2025-09-10 14:10:09,572 - test_parameters - INFO - Forward Delay测试通过
2025-09-10 14:10:09,573 - RSTPTest - INFO - 测试完成: test_forward_delay (耗时: 8.25秒)
2025-09-10 14:10:09,573 - RSTPTest - INFO - ============================================================

2025-09-10 14:10:09,574 - RSTPTest - INFO - ============================================================
2025-09-10 14:10:09,574 - RSTPTest - INFO - 开始测试: test_max_age
2025-09-10 14:10:09,574 - RSTPTest - INFO - ============================================================
2025-09-10 14:10:09,575 - test_parameters - INFO - 测试Max Age参数
2025-09-10 14:10:11,219 - test_parameters - INFO - 设置Max Age: 6秒
2025-09-10 14:10:13,404 - test_parameters - INFO - Max Age 6秒设置成功
2025-09-10 14:10:13,404 - test_parameters - INFO - 设置Max Age: 10秒
2025-09-10 14:10:15,628 - test_parameters - INFO - Max Age 10秒设置成功
2025-09-10 14:10:15,628 - test_parameters - INFO - 设置Max Age: 20秒
2025-09-10 14:10:17,852 - test_parameters - INFO - Max Age 20秒设置成功
2025-09-10 14:10:17,853 - test_parameters - INFO - Max Age测试通过
2025-09-10 14:10:17,854 - RSTPTest - INFO - 测试完成: test_max_age (耗时: 8.28秒)
2025-09-10 14:10:17,854 - RSTPTest - INFO - ============================================================

2025-09-10 14:10:17,975 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 14:10:17,975 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 14:10:18,108 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 14:10:18,109 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 14:10:18,109 - RSTPTest - INFO - ============================================================
2025-09-10 14:10:18,110 - RSTPTest - INFO - 开始测试: test_port_cost
2025-09-10 14:10:18,110 - RSTPTest - INFO - ============================================================
2025-09-10 14:10:18,111 - test_parameters - INFO - 测试端口路径成本
2025-09-10 14:10:18,111 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 14:10:18,111 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 14:10:18,111 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 14:10:18,111 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 14:10:18,112 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 14:10:18,112 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 14:10:18,112 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 14:10:18,118 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 14:10:18,174 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 14:10:18,174 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 14:10:18,174 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 14:10:18,175 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 14:10:18,696 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 14:10:18,696 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 14:10:19,743 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 14:10:19,743 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 14:10:19,743 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 14:10:19,743 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 14:10:20,205 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 14:10:20,690 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 14:10:20,690 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 14:10:20,792 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 14:10:20,888 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 14:10:20,889 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 14:10:20,889 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 14:10:20,889 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 14:10:20,889 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 14:10:20,890 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 14:10:20,890 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 14:10:20,902 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 14:10:20,903 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 14:10:21,024 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 14:10:21,025 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 14:10:21,025 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 14:10:21,025 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 14:10:21,025 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 14:10:21,589 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 14:10:26,167 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:10:26,296 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:10:26,296 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 14:10:26,297 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 14:10:26,297 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 14:10:26,297 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 14:10:27,531 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 14:10:28,771 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 14:10:28,771 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 14:10:28,821 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 14:10:29,052 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 14:10:29,053 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 14:10:29,053 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 14:10:29,053 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 14:10:29,053 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 14:10:29,054 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 14:10:29,054 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 14:10:29,061 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 14:10:29,062 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 14:10:29,189 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 14:10:29,189 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 14:10:29,189 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 14:10:29,189 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 14:10:29,189 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 14:10:29,744 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 14:12:03,794 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:12:13,882 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:12:13,882 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 14:12:13,883 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 14:12:13,883 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 14:12:13,883 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 14:13:17,320 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 14:14:11,070 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 14:14:11,071 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 14:14:11,121 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 14:14:19,399 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 14:14:19,399 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 14:14:19,400 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 14:14:24,400 - test_parameters - INFO - 设置端口eth0成本: 10
2025-09-10 14:14:24,463 - test_parameters - INFO - 设置端口eth0成本: 100
2025-09-10 14:14:24,567 - test_parameters - INFO - 设置端口eth0成本: 1000
2025-09-10 14:14:24,671 - test_parameters - INFO - 设置端口eth0成本: 20000
2025-09-10 14:14:24,775 - test_parameters - INFO - 端口成本测试通过
2025-09-10 14:14:24,776 - RSTPTest - INFO - 测试完成: test_port_cost (耗时: 246.67秒)
2025-09-10 14:14:24,776 - RSTPTest - INFO - ============================================================

2025-09-10 14:14:24,777 - RSTPTest - INFO - ============================================================
2025-09-10 14:14:24,778 - RSTPTest - INFO - 开始测试: test_parameter_persistence
2025-09-10 14:14:24,778 - RSTPTest - INFO - ============================================================
2025-09-10 14:14:24,779 - test_parameters - INFO - 测试参数持久性
2025-09-10 14:14:32,004 - test_parameters - INFO - 参数持久性测试通过
2025-09-10 14:14:32,005 - RSTPTest - INFO - 测试完成: test_parameter_persistence (耗时: 7.23秒)
2025-09-10 14:14:32,005 - RSTPTest - INFO - ============================================================

2025-09-10 14:14:32,006 - RSTPTest - INFO - ============================================================
2025-09-10 14:14:32,007 - RSTPTest - INFO - 开始测试: test_parameter_boundaries
2025-09-10 14:14:32,007 - RSTPTest - INFO - ============================================================
2025-09-10 14:14:32,008 - test_parameters - INFO - 测试参数边界值
2025-09-10 14:14:33,683 - test_parameters - INFO - 最小值0: 失败
2025-09-10 14:14:33,787 - test_parameters - INFO - 最大值65535: 失败
2025-09-10 14:14:33,892 - test_parameters - INFO - 正确拒绝了无效值-1
2025-09-10 14:14:33,995 - test_parameters - INFO - 正确拒绝了无效值65536
2025-09-10 14:14:34,095 - test_parameters - INFO - 最小值1: 失败
2025-09-10 14:14:34,195 - test_parameters - INFO - 最大值10: 失败
2025-09-10 14:14:34,299 - test_parameters - INFO - 正确拒绝了无效值0
2025-09-10 14:14:34,401 - test_parameters - INFO - 正确拒绝了无效值11
2025-09-10 14:14:34,512 - test_parameters - INFO - 最小值4: 失败
2025-09-10 14:14:34,616 - test_parameters - INFO - 最大值30: 失败
2025-09-10 14:14:34,720 - test_parameters - INFO - 正确拒绝了无效值3
2025-09-10 14:14:34,824 - test_parameters - INFO - 正确拒绝了无效值31
2025-09-10 14:14:34,927 - test_parameters - INFO - 最小值6: 失败
2025-09-10 14:14:35,030 - test_parameters - INFO - 最大值40: 失败
2025-09-10 14:14:35,131 - test_parameters - INFO - 正确拒绝了无效值5
2025-09-10 14:14:35,235 - test_parameters - INFO - 正确拒绝了无效值41
2025-09-10 14:14:35,235 - test_parameters - INFO - 参数边界测试完成
2025-09-10 14:14:35,236 - RSTPTest - INFO - 测试完成: test_parameter_boundaries (耗时: 3.23秒)
2025-09-10 14:14:35,236 - RSTPTest - INFO - ============================================================

2025-09-10 14:14:35,237 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 14:14:35,237 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 14:14:35,237 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 14:14:35,370 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 14:14:35,371 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 14:14:35,503 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 14:14:35,503 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 14:14:35,656 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 14:14:35,657 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 14:14:35,657 - RSTPTest - INFO - ============================================================
2025-09-10 14:14:35,657 - RSTPTest - INFO - 开始测试: test_port_role_assignment_simplified
2025-09-10 14:14:35,657 - RSTPTest - INFO - ============================================================
2025-09-10 14:14:35,658 - test_protocol_conformance - INFO - 开始端口角色分配测试
2025-09-10 14:14:35,658 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 14:14:35,658 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 14:14:35,659 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 14:14:35,659 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 14:14:35,659 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 14:14:35,659 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 14:14:35,659 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 14:14:35,665 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 14:14:35,721 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 14:14:35,721 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 14:14:35,722 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 14:14:35,722 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 14:14:36,228 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 14:14:36,228 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 14:14:37,260 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 14:14:37,261 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 14:14:37,261 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 14:14:37,261 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 14:14:37,717 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 14:14:38,203 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 14:14:38,204 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 14:14:38,309 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 14:14:38,405 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 14:14:38,405 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 14:14:38,405 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 14:14:38,405 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 14:14:38,405 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 14:14:38,406 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 14:14:38,406 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 14:14:38,414 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 14:14:38,415 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 14:14:38,549 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 14:14:38,550 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 14:14:38,550 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 14:14:38,550 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 14:14:38,550 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 14:14:39,098 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 14:14:43,611 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:14:43,748 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:14:43,748 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 14:14:43,748 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 14:14:43,749 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 14:14:43,749 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 14:14:44,986 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 14:14:46,221 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 14:14:46,221 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 14:14:46,270 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 14:14:46,495 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 14:14:46,495 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 14:14:46,495 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 14:14:46,496 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 14:14:46,496 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 14:14:46,496 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 14:14:46,496 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 14:14:46,504 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 14:14:46,504 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 14:14:54,663 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 14:14:54,663 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 14:14:54,663 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 14:14:54,664 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 14:14:54,664 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 14:15:10,353 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 14:15:14,902 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:15:15,044 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:15:15,045 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 14:15:15,045 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 14:15:15,045 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 14:15:15,046 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 14:15:16,286 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 14:15:17,556 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 14:15:17,557 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 14:15:17,606 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 14:15:17,825 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 14:15:17,825 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 14:15:17,825 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 14:15:18,024 - test_protocol_conformance - INFO - 等待网络收敛...
2025-09-10 14:15:18,025 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 14:15:18,945 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.92秒
2025-09-10 14:15:20,795 - test_protocol_conformance - INFO - DUT是根桥: True
2025-09-10 14:15:20,796 - test_protocol_conformance - INFO - 活动端口角色: {}
2025-09-10 14:15:20,796 - test_protocol_conformance - INFO - 禁用端口: ['eth0', 'eth2', 'eth3']
2025-09-10 14:15:20,833 - RSTPTest - INFO - 测试完成: test_port_role_assignment_simplified (耗时: 45.18秒)
2025-09-10 14:15:20,834 - RSTPTest - INFO - ============================================================

2025-09-10 14:15:20,837 - RSTPTest - INFO - ============================================================
2025-09-10 14:15:20,837 - RSTPTest - INFO - 开始测试: test_root_bridge_election
2025-09-10 14:15:20,837 - RSTPTest - INFO - ============================================================
2025-09-10 14:15:20,838 - test_protocol_conformance - INFO - 开始根网桥选举测试
2025-09-10 14:15:20,838 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 14:15:20,838 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 14:15:20,838 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 14:15:20,839 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 14:15:20,839 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 14:15:20,839 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 14:15:20,839 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 14:15:20,840 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 14:15:21,326 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 14:15:21,326 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 14:15:22,356 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 14:15:22,356 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 14:15:22,356 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 14:15:22,356 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 14:15:22,820 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 14:15:23,304 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 14:15:23,304 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 14:15:23,407 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 14:15:23,504 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 14:15:23,504 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 14:15:23,505 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 14:15:23,505 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 14:15:23,505 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 14:15:23,506 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 14:15:23,506 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 14:15:23,506 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 14:15:24,024 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 14:15:28,564 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:15:28,702 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:15:28,702 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 14:15:28,703 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 14:15:28,703 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 14:15:28,703 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 14:15:29,919 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 14:15:31,149 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 14:15:31,149 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 14:15:31,197 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 14:15:31,421 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 14:15:31,421 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 14:15:31,421 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 14:15:31,422 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 14:15:31,422 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 14:15:31,422 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 14:15:31,422 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 14:15:31,422 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 14:15:31,943 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 14:15:36,488 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:15:36,620 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:15:36,620 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 14:15:36,621 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 14:15:36,621 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 14:15:36,621 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 14:15:37,852 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 14:15:39,141 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 14:15:39,142 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 14:15:39,190 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 14:15:39,420 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 14:15:39,420 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 14:15:39,420 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 14:15:42,422 - test_protocol_conformance - INFO - === 检查DUT网桥配置 ===
2025-09-10 14:15:42,428 - test_protocol_conformance - INFO - 找到测试网桥: br0
2025-09-10 14:15:42,481 - test_protocol_conformance - INFO - 启用br0的RSTP
2025-09-10 14:15:42,528 - test_protocol_conformance - INFO - br0 STP状态: ('', 'cat: /sys/class/net/br0/bridge/stp_state: No such file or directory\n', 1)
2025-09-10 14:15:42,529 - test_protocol_conformance - INFO - === 初始网桥状态 ===
2025-09-10 14:15:43,472 - test_protocol_conformance - INFO - 活动端口数: 0
2025-09-10 14:15:43,472 - test_protocol_conformance - WARNING - 活动端口不足，尝试启用更多端口
2025-09-10 14:15:47,684 - test_protocol_conformance - INFO - 初始端口状态:
2025-09-10 14:15:47,684 - test_protocol_conformance - INFO - 初始状态 - DUT有Root Port: False
2025-09-10 14:15:47,684 - test_protocol_conformance - INFO - === 配置网桥优先级 ===
2025-09-10 14:15:47,684 - test_protocol_conformance - INFO - 设置TestNode1优先级为16384
2025-09-10 14:15:47,818 - test_protocol_conformance - INFO - 设置DUT优先级为32768
2025-09-10 14:15:47,828 - test_protocol_conformance - INFO - ip命令设置结果: ('', 'RTNETLINK answers: Operation not supported\n', 2)
2025-09-10 14:15:47,880 - test_protocol_conformance - INFO - sysfs设置结果: ('32768\n', 'tee: /sys/class/net/br0/bridge/priority: No such file or directory\n', 1)
2025-09-10 14:15:47,880 - test_protocol_conformance - INFO - 设置TestNode2优先级为24576
2025-09-10 14:15:48,014 - test_protocol_conformance - INFO - 等待RSTP收敛...
2025-09-10 14:15:58,015 - test_protocol_conformance - INFO - === 第一阶段验证 ===
2025-09-10 14:15:58,951 - test_protocol_conformance - INFO - DUT当前优先级: 
2025-09-10 14:15:58,952 - test_protocol_conformance - WARNING - 优先级验证失败: 优先级设置失败，期望32768，实际
assert '' == '32768'
  
  [0m[91m- 32768[39;49;00m[90m[39;49;00m
2025-09-10 14:15:58,952 - test_protocol_conformance - INFO - 
=== 第二阶段：DUT应成为根桥 ===
2025-09-10 14:15:58,952 - test_protocol_conformance - INFO - 设置DUT优先级为12288（最低）
2025-09-10 14:15:59,107 - test_protocol_conformance - INFO - 设置后优先级: 
2025-09-10 14:15:59,107 - test_protocol_conformance - INFO - 等待RSTP重新收敛...
2025-09-10 14:16:09,109 - test_protocol_conformance - INFO - === 最终验证 ===
2025-09-10 14:16:09,987 - test_protocol_conformance - ERROR - DUT RSTP实现问题诊断:
2025-09-10 14:16:09,988 - test_protocol_conformance - ERROR - 1. DUT优先级已设置为12288（最低）
2025-09-10 14:16:09,988 - test_protocol_conformance - ERROR - 2. 但DUT仍有Root Port: False
2025-09-10 14:16:09,988 - test_protocol_conformance - ERROR - 3. Designated端口数: 0
2025-09-10 14:16:09,988 - test_protocol_conformance - ERROR - 可能的原因:
2025-09-10 14:16:09,988 - test_protocol_conformance - ERROR - - DUT的RSTP实现不符合标准
2025-09-10 14:16:09,989 - test_protocol_conformance - ERROR - - DUT没有正确处理优先级变化
2025-09-10 14:16:09,989 - test_protocol_conformance - ERROR - - DUT的BPDU发送/接收有问题
2025-09-10 14:16:10,028 - RSTPTest - INFO - 测试完成: test_root_bridge_election (耗时: 49.19秒)
2025-09-10 14:16:10,028 - RSTPTest - INFO - ============================================================

2025-09-10 14:16:10,031 - RSTPTest - INFO - ============================================================
2025-09-10 14:16:10,031 - RSTPTest - INFO - 开始测试: test_port_role_assignment
2025-09-10 14:16:10,031 - RSTPTest - INFO - ============================================================
2025-09-10 14:16:10,032 - test_protocol_conformance - INFO - 开始端口角色分配测试
2025-09-10 14:16:10,032 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 14:16:10,032 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 14:16:10,033 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 14:16:10,033 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 14:16:10,033 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 14:16:10,033 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 14:16:10,033 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 14:16:10,034 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 14:16:10,502 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 14:16:10,503 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 14:16:11,543 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 14:16:11,544 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 14:16:11,544 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 14:16:11,544 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 14:16:11,999 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 14:16:12,479 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 14:16:12,479 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 14:16:12,583 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 14:16:12,696 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 14:16:12,696 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 14:16:12,697 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 14:16:12,697 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 14:16:12,697 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 14:16:12,697 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 14:16:12,698 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 14:16:12,698 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 14:16:13,224 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 14:16:17,769 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:16:17,905 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:16:17,905 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 14:16:17,905 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 14:16:17,905 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 14:16:17,906 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 14:16:19,145 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 14:16:20,381 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 14:16:20,381 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 14:16:20,430 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 14:16:20,651 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 14:16:20,652 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 14:16:20,652 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 14:16:20,652 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 14:16:20,653 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 14:16:20,653 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 14:16:20,653 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 14:16:20,653 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 14:16:21,158 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 14:16:25,747 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:16:25,885 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:16:25,885 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 14:16:25,885 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 14:16:25,886 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 14:16:25,886 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 14:16:27,224 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 14:16:28,505 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 14:16:28,505 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 14:16:28,555 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 14:16:28,774 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 14:16:28,774 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 14:16:28,774 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 14:16:31,971 - test_protocol_conformance - INFO - 启用DUT的网桥接口...
2025-09-10 14:16:32,100 - test_protocol_conformance - INFO - 已启用接口 eth0
2025-09-10 14:16:32,268 - test_protocol_conformance - INFO - 已启用接口 eth1
2025-09-10 14:16:32,443 - test_protocol_conformance - INFO - 已启用接口 eth2
2025-09-10 14:16:35,450 - test_protocol_conformance - INFO - br0 网桥接口状态:
('18: veth45650b3@if17: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 master br-b2bd2c7fedc8 state forwarding priority 32 cost 2 \n26: veth6d7f1eb@if25: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 master br-b2bd2c7fedc8 state forwarding priority 32 cost 2 \n', '', 0)
2025-09-10 14:16:35,499 - test_protocol_conformance - INFO - br0 状态:
('5: br0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1508 qdisc mq state UP mode DEFAULT group default qlen 1000\n    link/ether 90:12:10:b5:7d:f7 brd ff:ff:ff:ff:ff:ff\n    altname enp0s30f4\n', '', 0)
2025-09-10 14:16:35,546 - test_protocol_conformance - INFO - br0 STP状态:
('', 'cat: /sys/class/net/br0/bridge/stp_state: No such file or directory\n', 1)
2025-09-10 14:16:35,546 - test_protocol_conformance - INFO - 获取初始网桥状态...
2025-09-10 14:16:36,463 - test_protocol_conformance - INFO - Bridge ID: 未获取
2025-09-10 14:16:36,463 - test_protocol_conformance - INFO - Root ID: 未获取
2025-09-10 14:16:36,463 - test_protocol_conformance - INFO - Root Port: eth0
2025-09-10 14:16:36,463 - test_protocol_conformance - INFO - 协议版本: rstp
2025-09-10 14:16:36,464 - test_protocol_conformance - INFO - 端口 eth0: 角色=root, 状态=disabled, 成本=0
2025-09-10 14:16:36,464 - test_protocol_conformance - INFO - 端口 eth2: 角色=alternate, 状态=disabled, 成本=0
2025-09-10 14:16:36,464 - test_protocol_conformance - INFO - 端口 eth3: 角色=unknown, 状态=disabled, 成本=0
2025-09-10 14:16:36,464 - test_protocol_conformance - INFO - 等待网络收敛...
2025-09-10 14:16:36,464 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 14:16:37,383 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.92秒
2025-09-10 14:16:38,295 - test_protocol_conformance - INFO - 收敛后的端口状态:
2025-09-10 14:16:38,295 - test_protocol_conformance - INFO - 端口 eth0: 角色=root, 状态=disabled, 成本=0
2025-09-10 14:16:38,296 - test_protocol_conformance - INFO - 端口 eth2: 角色=alternate, 状态=disabled, 成本=0
2025-09-10 14:16:38,296 - test_protocol_conformance - INFO - 端口 eth3: 角色=unknown, 状态=disabled, 成本=0
2025-09-10 14:16:39,211 - test_protocol_conformance - INFO - is_root_bridge() 返回: True
2025-09-10 14:16:39,211 - test_protocol_conformance - INFO - 有Root Port: False
2025-09-10 14:16:39,211 - test_protocol_conformance - INFO - 最终判定 - DUT是根桥: True
2025-09-10 14:16:39,212 - test_protocol_conformance - INFO - 活动端口数: 0
2025-09-10 14:16:39,212 - test_protocol_conformance - INFO - 禁用端口: ['eth0', 'eth2', 'eth3']
2025-09-10 14:16:39,212 - test_protocol_conformance - WARNING - 活动端口不足，尝试启用禁用的端口...
2025-09-10 14:16:39,212 - test_protocol_conformance - INFO - 尝试启用端口 eth0
2025-09-10 14:16:39,379 - test_protocol_conformance - INFO - 尝试启用端口 eth2
2025-09-10 14:16:45,435 - test_protocol_conformance - INFO - 重新配置后 - 活动端口数: 0
2025-09-10 14:16:45,435 - test_protocol_conformance - INFO - 重新配置后 - 禁用端口: ['eth0', 'eth2', 'eth3']
2025-09-10 14:16:45,435 - test_protocol_conformance - INFO - 端口角色分布: {}
2025-09-10 14:16:45,473 - RSTPTest - INFO - 测试完成: test_port_role_assignment (耗时: 35.44秒)
2025-09-10 14:16:45,473 - RSTPTest - INFO - ============================================================

2025-09-10 14:16:45,476 - RSTPTest - INFO - ============================================================
2025-09-10 14:16:45,476 - RSTPTest - INFO - 开始测试: test_rstp_protocol_verification
2025-09-10 14:16:45,477 - RSTPTest - INFO - ============================================================
2025-09-10 14:16:45,477 - test_protocol_conformance - INFO - 开始RSTP协议验证
2025-09-10 14:16:45,478 - test_protocol_conformance - INFO - === 检查OVS配置 ===
2025-09-10 14:16:45,487 - test_protocol_conformance - INFO - 当前OVS配置:
8c812ea9-3b0c-46a1-bd3c-ef3904d38c1a
    Bridge rstp0
        Port rstp0
            Interface rstp0
                type: internal
    Bridge SE_ETH4
        Port SE_ETH4
            Interface SE_ETH4
                type: internal
    Bridge SE_ETH6
        Port SE_ETH6
            Interface SE_ETH6
                type: internal
    Bridge br0
        Port eth0
            Interface eth0
                error: "could not open network device eth0 (No such device)"
        Port br0
            
2025-09-10 14:16:45,538 - test_protocol_conformance - INFO - 使用现有网桥 SE_ETH2，端口: ['br3', 'br4']
2025-09-10 14:16:45,539 - test_protocol_conformance - INFO - === 配置RSTP（确保是RSTP而不是STP）===
2025-09-10 14:16:46,652 - test_protocol_conformance - INFO - 启用RSTP...
2025-09-10 14:16:46,671 - test_protocol_conformance - INFO - ✓ RSTP已启用
2025-09-10 14:16:46,671 - test_protocol_conformance - INFO - 设置RSTP参数...
2025-09-10 14:16:46,722 - test_protocol_conformance - INFO - ✓ 设置: rstp-hello-time=2
2025-09-10 14:16:46,775 - test_protocol_conformance - INFO - ✓ 设置: rstp-forward-delay=4
2025-09-10 14:16:46,826 - test_protocol_conformance - INFO - ✓ 设置: rstp-max-age=6
2025-09-10 14:16:46,879 - test_protocol_conformance - INFO - ✓ 设置: rstp-priority=32768
2025-09-10 14:16:46,930 - test_protocol_conformance - INFO - ✓ 设置: rstp-force-protocol-version=2
2025-09-10 14:16:47,082 - test_protocol_conformance - INFO - ✓ 端口 br3 RSTP已启用
2025-09-10 14:16:47,235 - test_protocol_conformance - INFO - ✓ 端口 br4 RSTP已启用
2025-09-10 14:16:47,283 - test_protocol_conformance - INFO - 等待RSTP初始化...
2025-09-10 14:16:52,284 - test_protocol_conformance - INFO - === 验证RSTP配置 ===
2025-09-10 14:16:52,292 - test_protocol_conformance - INFO - RSTP状态:
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     6s
  stp-fwd-delay   4s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-10 14:16:52,294 - test_protocol_conformance - INFO - ✓ 使用RSTP时间参数
2025-09-10 14:16:52,294 - test_protocol_conformance - INFO - === 创建测试拓扑 ===
2025-09-10 14:16:52,294 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 14:16:52,294 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 14:16:52,295 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 14:16:52,295 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 14:16:52,295 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 14:16:52,295 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 14:16:52,295 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 14:16:52,296 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 14:16:52,801 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 14:16:52,802 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 14:16:53,843 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 14:16:53,843 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 14:16:53,843 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 14:16:53,844 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 14:16:54,326 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 14:16:54,806 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 14:16:54,806 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 14:16:54,910 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 14:16:55,006 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 14:16:55,006 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 14:16:55,007 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 14:16:55,007 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 14:16:55,007 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 14:16:55,007 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 14:16:55,007 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 14:16:55,008 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 14:16:55,516 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 14:17:00,103 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:17:00,249 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:17:00,249 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 14:17:00,249 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 14:17:00,250 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 14:17:00,250 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 14:17:01,484 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 14:17:02,712 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 14:17:02,713 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 14:17:02,761 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 14:17:02,992 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 14:17:02,992 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 14:17:02,993 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 14:17:02,993 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 14:17:02,993 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 14:17:02,993 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 14:17:02,993 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 14:17:02,993 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 14:17:03,520 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 14:17:08,102 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:17:08,241 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:17:08,241 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 14:17:08,241 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 14:17:08,242 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 14:17:08,242 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 14:17:09,489 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 14:17:10,811 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 14:17:10,811 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 14:17:10,859 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 14:17:11,082 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 14:17:11,083 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 14:17:11,083 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 14:17:16,084 - test_protocol_conformance - INFO - === 捕获BPDU ===
2025-09-10 14:17:16,085 - test_protocol_conformance - INFO - 在 SE_ETH2 上捕获BPDU...
2025-09-10 14:17:16,085 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: SE_ETH2, 数量: 10)
2025-09-10 14:17:26,135 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-10 14:17:26,135 - test_protocol_conformance - INFO - 在 br3 上捕获BPDU...
2025-09-10 14:17:26,135 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br3, 数量: 10)
2025-09-10 14:17:36,235 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-10 14:17:36,235 - test_protocol_conformance - INFO - 在 br4 上捕获BPDU...
2025-09-10 14:17:36,236 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br4, 数量: 10)
2025-09-10 14:17:46,327 - RSTPAnalyzer_DUT - INFO - 捕获到 3 个BPDU包
2025-09-10 14:17:46,327 - test_protocol_conformance - INFO - ✓ 捕获到 3 个BPDU
2025-09-10 14:17:46,328 - test_protocol_conformance - INFO - === 分析BPDU ===
2025-09-10 14:17:46,328 - test_protocol_conformance - INFO - 第一个BPDU信息: {'timestamp': '14:17:39.796289', 'raw': '14:17:39.796289 00:e0:0c:25:0c:01 > 01:80:c2:00:00:00, 802.3, length 39: LLC, dsap STP (0x42) Individual, ssap STP (0x42) Command, ctrl 0x03: STP 802.1w, Rapid STP, Flags [Learn, Forward, Agreement], bridge-id 8000.6e:b3:08:fa:01:34.8002, length 36', 'is_rstp': False}
2025-09-10 14:17:46,328 - test_protocol_conformance - INFO - BPDU统计: RSTP=0, STP=3
2025-09-10 14:17:46,328 - test_protocol_conformance - WARNING - 检测到更多STP BPDU
2025-09-10 14:17:46,377 - test_protocol_conformance - INFO - rstp_enable状态: true
2025-09-10 14:17:46,429 - test_protocol_conformance - INFO - stp_enable状态: false
2025-09-10 14:17:46,481 - test_protocol_conformance - WARNING - OVS配置为RSTP但发送STP BPDU，可能是实现限制
2025-09-10 14:17:46,482 - test_protocol_conformance - INFO - 基于配置判断为RSTP
2025-09-10 14:17:46,482 - test_protocol_conformance - INFO - ✓ RSTP协议验证通过（检测到 3 个RSTP BPDU）
2025-09-10 14:17:46,482 - RSTPTest - INFO - 测试完成: test_rstp_protocol_verification (耗时: 61.01秒)
2025-09-10 14:17:46,483 - RSTPTest - INFO - ============================================================

2025-09-10 14:17:46,484 - RSTPTest - INFO - ============================================================
2025-09-10 14:17:46,484 - RSTPTest - INFO - 开始测试: test_alternate_port_verification
2025-09-10 14:17:46,484 - RSTPTest - INFO - ============================================================
2025-09-10 14:17:46,485 - test_protocol_conformance - INFO - 开始Alternate Port验证测试
2025-09-10 14:17:46,485 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 14:17:46,485 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 14:17:46,485 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 14:17:46,485 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 14:17:46,486 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 14:17:46,486 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 14:17:46,486 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 14:17:46,486 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 14:17:46,996 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 14:17:46,996 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 14:17:48,033 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 14:17:48,033 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 14:17:48,034 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 14:17:48,034 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 14:17:48,494 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 14:17:48,973 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 14:17:48,974 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 14:17:49,078 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 14:17:49,174 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 14:17:49,174 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 14:17:49,174 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 14:17:49,175 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 14:17:49,175 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 14:17:49,175 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 14:17:49,176 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 14:17:49,176 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 14:17:49,690 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 14:17:54,237 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:17:54,387 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:17:54,387 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 14:17:54,387 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 14:17:54,387 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 14:17:54,388 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 14:17:55,647 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 14:17:56,889 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 14:17:56,890 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 14:17:56,939 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 14:17:57,161 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 14:17:57,161 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 14:17:57,161 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 14:17:57,161 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 14:17:57,162 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 14:17:57,162 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 14:17:57,162 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 14:17:57,162 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 14:17:57,676 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 14:18:02,277 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:18:02,413 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:18:02,414 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 14:18:02,414 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 14:18:02,414 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 14:18:02,414 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 14:18:03,636 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 14:18:04,898 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 14:18:04,899 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 14:18:04,946 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 14:18:05,172 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 14:18:05,172 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 14:18:05,173 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 14:18:05,173 - test_protocol_conformance - INFO - 设置网桥优先级
2025-09-10 14:18:05,509 - test_protocol_conformance - INFO - 等待RSTP收敛...
2025-09-10 14:18:05,509 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 14:18:06,386 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.88秒
2025-09-10 14:18:07,305 - test_protocol_conformance - INFO - DUT桥信息: BridgeInfo(bridge_id='', root_id='', root_port='eth0', root_path_cost=0, protocol_version='rstp', hello_time=2, forward_delay=15, max_age=20, topology_changes=0, ports={'eth0': PortInfo(name='eth0', role=<PortRole.ROOT: 'root'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth2': PortInfo(name='eth2', role=<PortRole.ALTERNATE: 'alternate'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth3': PortInfo(name='eth3', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')})
2025-09-10 14:18:08,268 - RSTPTest - INFO - 测试完成: test_alternate_port_verification (耗时: 21.78秒)
2025-09-10 14:18:08,269 - RSTPTest - INFO - ============================================================

2025-09-10 14:18:08,271 - RSTPTest - INFO - ============================================================
2025-09-10 14:18:08,271 - RSTPTest - INFO - 开始测试: test_port_state_transitions
2025-09-10 14:18:08,271 - RSTPTest - INFO - ============================================================
2025-09-10 14:18:08,272 - test_protocol_conformance - INFO - 开始端口状态转换测试
2025-09-10 14:18:08,272 - NetworkTopology - INFO - 创建RSTP线性拓扑...
2025-09-10 14:18:08,272 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 14:18:08,272 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 14:18:08,273 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 14:18:08,273 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 14:18:08,273 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 14:18:08,273 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 14:18:08,273 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 14:18:08,745 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 14:18:08,745 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 14:18:09,804 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 14:18:09,805 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 14:18:09,805 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth2']
2025-09-10 14:18:09,805 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 14:18:10,275 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 14:18:10,275 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 14:18:10,376 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 14:18:10,473 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 14:18:10,474 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 14:18:10,474 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 14:18:10,474 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 14:18:10,474 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 14:18:10,474 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 14:18:10,475 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 14:18:10,475 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 14:18:10,984 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 14:18:15,539 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:18:15,675 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:18:15,675 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 14:18:15,675 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 14:18:15,675 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 14:18:15,675 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 14:18:16,920 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 14:18:18,163 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 14:18:18,163 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 14:18:18,211 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 14:18:18,445 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 14:18:18,445 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 14:18:18,446 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 14:18:18,446 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 14:18:18,446 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 14:18:18,446 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 14:18:18,446 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 14:18:18,446 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 14:18:18,970 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 14:18:23,543 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:18:23,684 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:18:23,684 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 14:18:23,684 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 14:18:23,684 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0']
2025-09-10 14:18:23,685 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 14:18:24,897 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 14:18:24,897 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 14:18:24,946 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 14:18:25,175 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 14:18:25,175 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 14:18:25,175 - NetworkTopology - INFO - 线性拓扑创建完成
2025-09-10 14:18:25,380 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-10 14:18:25,380 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 14:18:26,273 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.89秒
2025-09-10 14:18:27,220 - RSTPTest - INFO - 测试完成: test_port_state_transitions (耗时: 18.95秒)
2025-09-10 14:18:27,220 - RSTPTest - INFO - ============================================================

2025-09-10 14:18:27,222 - RSTPTest - INFO - ============================================================
2025-09-10 14:18:27,222 - RSTPTest - INFO - 开始测试: test_bpdu_propagation_and_keepalive
2025-09-10 14:18:27,222 - RSTPTest - INFO - ============================================================
2025-09-10 14:18:27,223 - test_protocol_conformance - INFO - 开始BPDU传播和保活机制测试
2025-09-10 14:18:27,223 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 14:18:27,224 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 14:18:27,224 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 14:18:27,224 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 14:18:27,224 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 14:18:27,225 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 14:18:27,225 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 14:18:27,225 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 14:18:27,712 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 14:18:27,712 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 14:18:28,753 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 14:18:28,753 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 14:18:28,754 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 14:18:28,754 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 14:18:29,363 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 14:18:29,870 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 14:18:29,871 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 14:18:29,978 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 14:18:30,073 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 14:18:30,073 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 14:18:30,073 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 14:18:30,074 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 14:18:30,074 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 14:18:30,074 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 14:18:30,074 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 14:18:30,074 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 14:18:30,592 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 14:18:35,117 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:18:35,250 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:18:35,250 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 14:18:35,251 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 14:18:35,251 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 14:18:35,251 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 14:18:36,485 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 14:18:37,756 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 14:18:37,757 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 14:18:37,806 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 14:18:38,029 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 14:18:38,029 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 14:18:38,029 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 14:18:38,029 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 14:18:38,030 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 14:18:38,030 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 14:18:38,030 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 14:18:38,030 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 14:18:38,556 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 14:18:43,130 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:18:43,262 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:18:43,263 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 14:18:43,263 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 14:18:43,263 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 14:18:43,263 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 14:18:44,587 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 14:18:45,880 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 14:18:45,881 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 14:18:45,928 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 14:18:46,172 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 14:18:46,172 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 14:18:46,173 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 14:18:46,530 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-10 14:18:46,530 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 14:18:47,400 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.87秒
2025-09-10 14:18:48,322 - test_protocol_conformance - INFO - Hello Time: 2秒
2025-09-10 14:18:48,322 - test_protocol_conformance - INFO - 开始捕获BPDU报文
2025-09-10 14:18:48,359 - RSTPTest - INFO - 测试完成: test_bpdu_propagation_and_keepalive (耗时: 21.14秒)
2025-09-10 14:18:48,359 - RSTPTest - INFO - ============================================================

2025-09-10 14:18:48,361 - RSTPTest - INFO - ============================================================
2025-09-10 14:18:48,361 - RSTPTest - INFO - 开始测试: test_disabled_port_exclusion
2025-09-10 14:18:48,361 - RSTPTest - INFO - ============================================================
2025-09-10 14:18:48,362 - test_protocol_conformance - INFO - 开始禁用端口排除测试
2025-09-10 14:18:48,362 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 14:18:48,362 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 14:18:48,362 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 14:18:48,362 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 14:18:48,362 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 14:18:48,363 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 14:18:48,363 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 14:18:48,363 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 14:18:48,860 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 14:18:48,860 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 14:18:49,901 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 14:18:49,902 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 14:18:49,902 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 14:18:49,902 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 14:18:50,366 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 14:18:50,857 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 14:18:50,857 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 14:18:50,961 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 14:18:51,056 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 14:18:51,057 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 14:18:51,057 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 14:18:51,057 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 14:18:51,057 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 14:18:51,057 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 14:18:51,058 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 14:18:51,058 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 14:18:51,593 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 14:18:56,151 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:18:56,281 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:18:56,281 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 14:18:56,281 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 14:18:56,282 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 14:18:56,282 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 14:18:57,517 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 14:18:58,740 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 14:18:58,740 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 14:18:58,788 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 14:18:59,009 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 14:18:59,010 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 14:18:59,010 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 14:18:59,010 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 14:18:59,011 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 14:18:59,011 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 14:18:59,011 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 14:18:59,011 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 14:18:59,527 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 14:19:04,111 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:19:04,245 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:19:04,245 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 14:19:04,245 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 14:19:04,245 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 14:19:04,246 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 14:19:05,488 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 14:19:06,806 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 14:19:06,807 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 14:19:06,856 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 14:19:07,083 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 14:19:07,084 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 14:19:07,084 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 14:19:07,288 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-10 14:19:07,288 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-10 14:19:08,194 - ConvergenceMonitor - INFO - 网络已收敛，耗时: 0.91秒
2025-09-10 14:19:09,125 - test_protocol_conformance - INFO - 所有端口信息: {'eth0': PortInfo(name='eth0', role=<PortRole.ROOT: 'root'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth2': PortInfo(name='eth2', role=<PortRole.ALTERNATE: 'alternate'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port=''), 'eth3': PortInfo(name='eth3', role=<PortRole.UNKNOWN: 'unknown'>, state=<PortState.DISABLED: 'disabled'>, path_cost=0, designated_bridge='', designated_port='')}
2025-09-10 14:19:09,280 - test_protocol_conformance - INFO - RSTP show输出 (code=0): 1
1
---- rstp0 ----
Root ID:
  stp-priority    32768
  stp-system-id   16:75:0d:53:b4:4d
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  This bridge is the root

Bridge ID:
  stp-priority    32768
  stp-system-id   16:75:0d:53:b4:4d
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------


2025-09-10 14:19:09,281 - test_protocol_conformance - INFO - 初始活动端口: []
2025-09-10 14:19:09,281 - test_protocol_conformance - INFO - 没有找到活动端口，使用所有端口
2025-09-10 14:19:09,281 - test_protocol_conformance - INFO - 选择端口eth2进行禁用测试
2025-09-10 14:19:09,281 - test_protocol_conformance - INFO - 禁用端口eth2
2025-09-10 14:19:09,282 - FaultInjector_DUT - INFO - 断开链路: eth2
2025-09-10 14:19:09,544 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth2 (code=1)，将在逻辑上标记为已断开
2025-09-10 14:19:09,544 - test_protocol_conformance - INFO - 禁用命令结果: ('', '', 0)
2025-09-10 14:19:09,700 - test_protocol_conformance - INFO - 端口eth2配置: stdout='1
1
{rstp-enable="true", stp-enable="true", stp-path-cost="20000"}
', stderr='', code=0
2025-09-10 14:19:25,528 - test_protocol_conformance - INFO - 禁用后所有端口状态: [('eth0', 'disabled'), ('eth3', 'disabled')]
2025-09-10 14:19:25,529 - test_protocol_conformance - ERROR - 端口eth2不存在于端口列表中
2025-09-10 14:19:25,530 - RSTPTest - INFO - 测试完成: test_disabled_port_exclusion (耗时: 37.17秒)
2025-09-10 14:19:25,530 - RSTPTest - INFO - ============================================================

2025-09-10 14:19:25,531 - RSTPTest - INFO - ============================================================
2025-09-10 14:19:25,531 - RSTPTest - INFO - 开始测试: test_topology_change_notification
2025-09-10 14:19:25,532 - RSTPTest - INFO - ============================================================
2025-09-10 14:19:25,532 - test_protocol_conformance - INFO - 开始拓扑变更通知测试
2025-09-10 14:19:25,532 - test_protocol_conformance - INFO - === 步骤1: 创建多网桥环形拓扑 ===
2025-09-10 14:19:25,921 - test_protocol_conformance - INFO - 创建网桥 rstp1 (优先级: 32768)
2025-09-10 14:19:26,156 - test_protocol_conformance - INFO - 创建网桥 rstp2 (优先级: 36864)
2025-09-10 14:19:26,396 - test_protocol_conformance - INFO - 创建网桥 rstp3 (优先级: 40960)
2025-09-10 14:19:26,853 - test_protocol_conformance - INFO - ✓ 连接 rstp1 <-> rstp2
2025-09-10 14:19:27,284 - test_protocol_conformance - INFO - ✓ 连接 rstp2 <-> rstp3
2025-09-10 14:19:27,697 - test_protocol_conformance - INFO - ✓ 连接 rstp3 <-> rstp1
2025-09-10 14:19:27,697 - test_protocol_conformance - INFO - 等待RSTP初始收敛...
2025-09-10 14:19:37,697 - test_protocol_conformance - INFO - === 步骤2: 验证初始RSTP状态 ===
2025-09-10 14:19:37,706 - test_protocol_conformance - INFO - 
rstp1 初始RSTP状态:
2025-09-10 14:19:37,707 - test_protocol_conformance - INFO -   ---- rstp1 ----
2025-09-10 14:19:37,707 - test_protocol_conformance - INFO -   Root ID:
2025-09-10 14:19:37,707 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-10 14:19:37,707 - test_protocol_conformance - INFO -     stp-system-id   4a:4a:46:e2:cd:40
2025-09-10 14:19:37,708 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 14:19:37,708 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 14:19:37,708 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 14:19:37,708 - test_protocol_conformance - INFO -     This bridge is the root
2025-09-10 14:19:37,708 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-10 14:19:37,708 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-10 14:19:37,709 - test_protocol_conformance - INFO -     stp-system-id   4a:4a:46:e2:cd:40
2025-09-10 14:19:37,709 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 14:19:37,709 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 14:19:37,709 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 14:19:37,709 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 14:19:37,709 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-10 14:19:37,710 - test_protocol_conformance - INFO -     veth12a    Designated Forwarding 2000     128.1
2025-09-10 14:19:37,710 - test_protocol_conformance - INFO -     veth31b    Designated Forwarding 2000     128.2
2025-09-10 14:19:37,710 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-10 14:19:37,710 - test_protocol_conformance - INFO -   → 有转发端口
2025-09-10 14:19:37,758 - test_protocol_conformance - INFO - 
rstp2 初始RSTP状态:
2025-09-10 14:19:37,759 - test_protocol_conformance - INFO -   ---- rstp2 ----
2025-09-10 14:19:37,759 - test_protocol_conformance - INFO -   Root ID:
2025-09-10 14:19:37,759 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-10 14:19:37,759 - test_protocol_conformance - INFO -     stp-system-id   4a:4a:46:e2:cd:40
2025-09-10 14:19:37,759 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 14:19:37,760 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 14:19:37,760 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 14:19:37,760 - test_protocol_conformance - INFO -     root-port       veth12b
2025-09-10 14:19:37,760 - test_protocol_conformance - INFO -     root-path-cost  2000
2025-09-10 14:19:37,760 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-10 14:19:37,760 - test_protocol_conformance - INFO -     stp-priority    36864
2025-09-10 14:19:37,760 - test_protocol_conformance - INFO -     stp-system-id   92:95:ae:77:b9:40
2025-09-10 14:19:37,761 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 14:19:37,761 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 14:19:37,761 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 14:19:37,761 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 14:19:37,761 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-10 14:19:37,761 - test_protocol_conformance - INFO -     veth12b    Root       Forwarding 2000     128.1
2025-09-10 14:19:37,761 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-10 14:19:37,762 - test_protocol_conformance - INFO -   → 有转发端口
2025-09-10 14:19:37,810 - test_protocol_conformance - INFO - 
rstp3 初始RSTP状态:
2025-09-10 14:19:37,811 - test_protocol_conformance - INFO -   ---- rstp3 ----
2025-09-10 14:19:37,811 - test_protocol_conformance - INFO -   Root ID:
2025-09-10 14:19:37,811 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-10 14:19:37,811 - test_protocol_conformance - INFO -     stp-system-id   4a:4a:46:e2:cd:40
2025-09-10 14:19:37,812 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 14:19:37,812 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 14:19:37,812 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 14:19:37,812 - test_protocol_conformance - INFO -     root-port       veth31a
2025-09-10 14:19:37,812 - test_protocol_conformance - INFO -     root-path-cost  2000
2025-09-10 14:19:37,812 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-10 14:19:37,813 - test_protocol_conformance - INFO -     stp-priority    40960
2025-09-10 14:19:37,813 - test_protocol_conformance - INFO -     stp-system-id   5e:1c:01:89:89:44
2025-09-10 14:19:37,813 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-10 14:19:37,813 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-10 14:19:37,813 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-10 14:19:37,813 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 14:19:37,813 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-10 14:19:37,814 - test_protocol_conformance - INFO -     veth23b    Alternate  Discarding 2000     128.1
2025-09-10 14:19:37,814 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-10 14:19:37,814 - test_protocol_conformance - INFO -   → 有转发端口
2025-09-10 14:19:37,814 - test_protocol_conformance - INFO -   → 有阻塞端口（防环路）
2025-09-10 14:19:37,814 - test_protocol_conformance - INFO - === 步骤3: 分析网络拓扑 ===
2025-09-10 14:19:37,814 - test_protocol_conformance - INFO - ✓ rstp1 是根桥
2025-09-10 14:19:37,815 - test_protocol_conformance - INFO - ✓ 找到阻塞端口: veth23b
2025-09-10 14:19:37,815 - test_protocol_conformance - INFO - === 步骤4: 触发拓扑变更 ===
2025-09-10 14:19:37,815 - test_protocol_conformance - INFO - 断开活动端口: veth31a
2025-09-10 14:19:42,904 - test_protocol_conformance - INFO - ✓ rstp1 状态已变化
2025-09-10 14:19:43,002 - test_protocol_conformance - INFO - ✓ rstp3 状态已变化
2025-09-10 14:19:48,048 - test_protocol_conformance - INFO - === 步骤5: 验证拓扑变更 ===
2025-09-10 14:19:48,055 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: veth12a, 数量: 5)
2025-09-10 14:19:53,153 - RSTPAnalyzer_DUT - INFO - 捕获到 2 个BPDU包
2025-09-10 14:19:53,153 - test_protocol_conformance - INFO - 在 veth12a 捕获到 2 个BPDU
2025-09-10 14:19:53,153 - test_protocol_conformance - INFO - === 步骤6: 最终验证 ===
2025-09-10 14:19:53,153 - test_protocol_conformance - INFO - ✓ 测试通过：检测到拓扑变更
2025-09-10 14:19:53,202 - test_protocol_conformance - INFO - 
========== rstp1 最终状态 ==========
2025-09-10 14:19:53,202 - test_protocol_conformance - INFO - ---- rstp1 ----
2025-09-10 14:19:53,202 - test_protocol_conformance - INFO - Root ID:
2025-09-10 14:19:53,202 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-10 14:19:53,203 - test_protocol_conformance - INFO -   stp-system-id   4a:4a:46:e2:cd:40
2025-09-10 14:19:53,203 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 14:19:53,203 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 14:19:53,203 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 14:19:53,203 - test_protocol_conformance - INFO -   This bridge is the root
2025-09-10 14:19:53,203 - test_protocol_conformance - INFO - Bridge ID:
2025-09-10 14:19:53,203 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-10 14:19:53,203 - test_protocol_conformance - INFO -   stp-system-id   4a:4a:46:e2:cd:40
2025-09-10 14:19:53,204 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 14:19:53,204 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 14:19:53,204 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 14:19:53,204 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 14:19:53,204 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-10 14:19:53,204 - test_protocol_conformance - INFO -   veth12a    Designated Forwarding 2000     128.1
2025-09-10 14:19:53,204 - test_protocol_conformance - INFO -   veth31b    Designated Forwarding 2000     128.2
2025-09-10 14:19:53,250 - test_protocol_conformance - INFO - 
========== rstp2 最终状态 ==========
2025-09-10 14:19:53,250 - test_protocol_conformance - INFO - ---- rstp2 ----
2025-09-10 14:19:53,250 - test_protocol_conformance - INFO - Root ID:
2025-09-10 14:19:53,251 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-10 14:19:53,251 - test_protocol_conformance - INFO -   stp-system-id   4a:4a:46:e2:cd:40
2025-09-10 14:19:53,251 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 14:19:53,251 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 14:19:53,252 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 14:19:53,252 - test_protocol_conformance - INFO -   root-port       veth12b
2025-09-10 14:19:53,252 - test_protocol_conformance - INFO -   root-path-cost  2000
2025-09-10 14:19:53,252 - test_protocol_conformance - INFO - Bridge ID:
2025-09-10 14:19:53,252 - test_protocol_conformance - INFO -   stp-priority    36864
2025-09-10 14:19:53,252 - test_protocol_conformance - INFO -   stp-system-id   92:95:ae:77:b9:40
2025-09-10 14:19:53,252 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 14:19:53,253 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 14:19:53,253 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 14:19:53,253 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 14:19:53,253 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-10 14:19:53,253 - test_protocol_conformance - INFO -   veth12b    Root       Forwarding 2000     128.1
2025-09-10 14:19:53,253 - test_protocol_conformance - INFO -   veth23a    Designated Forwarding 2000     128.2
2025-09-10 14:19:53,298 - test_protocol_conformance - INFO - 
========== rstp3 最终状态 ==========
2025-09-10 14:19:53,298 - test_protocol_conformance - INFO - ---- rstp3 ----
2025-09-10 14:19:53,298 - test_protocol_conformance - INFO - Root ID:
2025-09-10 14:19:53,299 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-10 14:19:53,299 - test_protocol_conformance - INFO -   stp-system-id   4a:4a:46:e2:cd:40
2025-09-10 14:19:53,299 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 14:19:53,299 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 14:19:53,299 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 14:19:53,299 - test_protocol_conformance - INFO -   root-port       veth31a
2025-09-10 14:19:53,299 - test_protocol_conformance - INFO -   root-path-cost  2000
2025-09-10 14:19:53,300 - test_protocol_conformance - INFO - Bridge ID:
2025-09-10 14:19:53,300 - test_protocol_conformance - INFO -   stp-priority    40960
2025-09-10 14:19:53,300 - test_protocol_conformance - INFO -   stp-system-id   5e:1c:01:89:89:44
2025-09-10 14:19:53,300 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-10 14:19:53,300 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-10 14:19:53,300 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-10 14:19:53,300 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-10 14:19:53,301 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-10 14:19:53,301 - test_protocol_conformance - INFO -   veth23b    Alternate  Discarding 2000     128.1
2025-09-10 14:19:53,301 - test_protocol_conformance - INFO -   veth31a    Root       Forwarding 2000     128.2
2025-09-10 14:19:53,301 - test_protocol_conformance - INFO - 
=== 诊断信息 ===
2025-09-10 14:19:53,349 - test_protocol_conformance - INFO - 系统日志中的STP/RSTP信息:
2025-09-10 14:19:53,350 - test_protocol_conformance - INFO - [529110.085502] rstp0: left promiscuous mode
[529110.664258] rstp0: entered promiscuous mode
[529147.393581] rstp1: entered promiscuous mode
[529147.622232] rstp2: entered promiscuous mode
[529147.862814] rstp3: entered promiscuous mode

2025-09-10 14:19:53,396 - test_protocol_conformance - INFO - OVS日志中的拓扑变更信息:
2025-09-10 14:19:53,396 - test_protocol_conformance - INFO - 2025-09-10T06:19:54.962Z|00612|rstp_sm(handler3058)|DBG|rstp3: move_rstp()
2025-09-10T06:19:54.962Z|00613|rstp_sm(handler3058)|DBG|v1: 8.000.4a4a46e2cd40, 0, 8.000.4a4a46e2cd40, 32770, 0
2025-09-10T06:19:54.962Z|00614|rstp_sm(handler3058)|DBG|v2: 8.000.4a4a46e2cd40, 0, 8.000.4a4a46e2cd40, 32770, 0
2025-09-10T06:19:54.962Z|00615|rstp_sm(handler3058)|DBG|superior_same
2025-09-10T06:19:54.962Z|00616|rstp_sm(handler3058)|DBG|rstp3, port 2: Port_information_sm 9 -> 17
2025-09-10T06:19:54.962Z|00617|rstp_sm(handler3058)|DBG|rstp3: move_rstp()
2025-09-10T06:19:54.962Z|00618|rstp_sm(handler3058)|DBG|rstp3, port 2: Port_information_sm 17 -> 7
2025-09-10T06:19:54.962Z|00619|rstp_sm(handler3058)|DBG|rstp3: move_rstp()
2025-09-10T06:19:54.962Z|00620|rstp_sm(handler3058)|DBG|rstp3, port 2: Port_information_sm 7 -> 8
2025-09-10T06:19:54.962Z|00621|rstp_sm(handler3058)|DBG|rstp3: move_rstp()
2025-09-10T06:19:55.488Z|10201919|bridge|WARN|rstp0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-10T06:19:55.488Z|10201920|bridge|WARN|br0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-10T06:19:55.498Z|10201924|bridge|WARN|rstp0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-10T06:19:55.498Z|10201925|bridge|WARN|br0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP

2025-09-10 14:19:53,397 - test_protocol_conformance - INFO - === 清理测试环境 ===
2025-09-10 14:19:53,972 - test_protocol_conformance - INFO - 拓扑变更通知测试完成
2025-09-10 14:19:53,973 - RSTPTest - INFO - 测试完成: test_topology_change_notification (耗时: 28.44秒)
2025-09-10 14:19:53,973 - RSTPTest - INFO - ============================================================

2025-09-10 14:19:53,974 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 14:19:53,974 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 14:19:53,975 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 14:19:54,113 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-10 14:19:54,113 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-10 14:19:54,245 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 14:19:54,246 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-10 14:19:54,379 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-10 14:19:54,379 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-10 14:19:54,380 - RSTPTest - INFO - ============================================================
2025-09-10 14:19:54,380 - RSTPTest - INFO - 开始测试: test_root_bridge_hijack_attack
2025-09-10 14:19:54,380 - RSTPTest - INFO - ============================================================
2025-09-10 14:19:54,381 - test_security - INFO - 开始根网桥劫持攻击测试
2025-09-10 14:19:54,381 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 14:19:54,381 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 14:19:54,382 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 14:19:54,382 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 14:19:54,382 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 14:19:54,382 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-10 14:19:54,382 - NetworkTopology - INFO - DUT: DUT设备，优先检测OVS支持...
2025-09-10 14:19:54,388 - NetworkTopology - INFO - DUT: ovs-vsctl检查结果: code=0
2025-09-10 14:19:54,448 - NetworkTopology - INFO - DUT: OVS服务状态检查: code=0
2025-09-10 14:19:54,449 - NetworkTopology - INFO - DUT: 检测到OVS支持
2025-09-10 14:19:54,449 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 14:19:54,449 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 14:19:55,002 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 14:19:55,002 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 14:19:56,067 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 14:19:56,068 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 14:19:56,068 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 14:19:56,068 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 14:19:56,539 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 14:19:57,039 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 14:19:57,040 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 14:19:57,142 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 14:19:57,243 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 14:19:57,243 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 14:19:57,243 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 14:19:57,244 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 14:19:57,244 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 14:19:57,244 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-10 14:19:57,244 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-10 14:19:57,252 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-10 14:19:57,253 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-10 14:19:57,395 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=0, output=active
2025-09-10 14:19:57,396 - NetworkTopology - INFO - TestNode1: 检测到mstpd支持
2025-09-10 14:19:57,396 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: mstpd
2025-09-10 14:19:57,396 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 14:19:57,397 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 14:19:57,961 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 14:20:02,627 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:20:02,769 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:20:02,770 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 14:20:02,770 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 14:20:02,770 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 14:20:02,770 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 14:20:03,983 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 14:20:05,219 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 14:20:05,219 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 14:20:05,267 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 14:20:05,487 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 14:20:05,488 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 14:20:05,488 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 14:20:05,488 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 14:20:05,488 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 14:20:05,488 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-10 14:20:05,489 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-10 14:20:05,496 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-10 14:20:05,496 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-10 14:20:05,622 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=0, output=active
2025-09-10 14:20:05,623 - NetworkTopology - INFO - TestNode2: 检测到mstpd支持
2025-09-10 14:20:05,623 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: mstpd
2025-09-10 14:20:05,623 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 14:20:05,623 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 14:20:06,172 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 14:20:10,729 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:20:10,867 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:20:10,867 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 14:20:10,868 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 14:20:10,868 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 14:20:10,868 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 14:20:12,099 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 14:20:13,362 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 14:20:13,362 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 14:20:13,411 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 14:20:13,636 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 14:20:13,636 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 14:20:13,637 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 14:20:20,639 - test_security - INFO - 初始根网桥: 
2025-09-10 14:20:20,639 - FaultInjector_TestNode1 - WARNING - 注入恶意BPDU到 eth0
2025-09-10 14:20:20,791 - FaultInjector_TestNode1 - WARNING - 恶意BPDU注入已启动 (优先级: 0)
2025-09-10 14:20:36,675 - test_security - INFO - 根网桥未被劫持（可能已启用防护）
2025-09-10 14:20:36,675 - test_security - INFO - 根网桥劫持攻击测试完成
2025-09-10 14:20:36,676 - RSTPTest - INFO - 测试完成: test_root_bridge_hijack_attack (耗时: 42.30秒)
2025-09-10 14:20:36,676 - RSTPTest - INFO - ============================================================

2025-09-10 14:20:36,677 - RSTPTest - INFO - ============================================================
2025-09-10 14:20:36,677 - RSTPTest - INFO - 开始测试: test_bpdu_flood_attack
2025-09-10 14:20:36,677 - RSTPTest - INFO - ============================================================
2025-09-10 14:20:36,678 - test_security - INFO - 开始BPDU洪泛攻击测试
2025-09-10 14:20:36,678 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 14:20:36,678 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 14:20:36,678 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 14:20:36,679 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 14:20:36,679 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 14:20:36,679 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 14:20:36,679 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 14:20:36,679 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 14:20:37,193 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 14:20:37,194 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 14:20:38,246 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 14:20:38,247 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 14:20:38,247 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 14:20:38,247 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 14:20:38,703 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 14:20:39,178 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 14:20:39,178 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 14:20:39,282 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 14:20:39,379 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 14:20:39,379 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 14:20:39,380 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 14:20:39,380 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 14:20:39,380 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 14:20:39,380 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 14:20:39,381 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 14:20:39,381 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 14:20:39,940 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 14:20:44,547 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:20:44,679 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:20:44,679 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 14:20:44,680 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 14:20:44,680 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 14:20:44,680 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 14:20:45,918 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 14:20:47,168 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 14:20:47,169 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 14:20:47,218 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 14:20:47,443 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 14:20:47,443 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 14:20:47,443 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 14:20:47,443 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 14:20:47,444 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 14:20:47,444 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 14:20:47,444 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 14:20:47,444 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 14:20:47,975 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 14:20:52,557 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:20:52,689 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:20:52,690 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 14:20:52,690 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 14:20:52,690 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 14:20:52,690 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 14:20:53,945 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 14:20:55,264 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 14:20:55,265 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 14:20:55,313 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 14:20:55,545 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 14:20:55,545 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 14:20:55,545 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 14:21:00,716 - test_security - INFO - 初始CPU使用率: 0.0%
2025-09-10 14:21:10,990 - test_security - INFO - 洪泛时CPU使用率: 0.0%
2025-09-10 14:21:11,942 - test_security - INFO - 网络在BPDU洪泛下保持稳定
2025-09-10 14:21:11,943 - test_security - INFO - BPDU洪泛攻击测试完成
2025-09-10 14:21:11,944 - RSTPTest - INFO - 测试完成: test_bpdu_flood_attack (耗时: 35.27秒)
2025-09-10 14:21:11,944 - RSTPTest - INFO - ============================================================

2025-09-10 14:21:11,945 - RSTPTest - INFO - ============================================================
2025-09-10 14:21:11,945 - RSTPTest - INFO - 开始测试: test_topology_change_attack
2025-09-10 14:21:11,945 - RSTPTest - INFO - ============================================================
2025-09-10 14:21:11,946 - test_security - INFO - 开始拓扑变更攻击测试
2025-09-10 14:21:11,946 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 14:21:11,947 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 14:21:11,947 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 14:21:11,947 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 14:21:11,947 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 14:21:11,948 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 14:21:11,948 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 14:21:11,948 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 14:21:12,466 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 14:21:12,467 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 14:21:13,517 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 14:21:13,518 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 14:21:13,518 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 14:21:13,518 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 14:21:13,978 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 14:21:14,474 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 14:21:14,474 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 14:21:14,577 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 14:21:14,674 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 14:21:14,675 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 14:21:14,675 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 14:21:14,675 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 14:21:14,675 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 14:21:14,675 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 14:21:14,675 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 14:21:14,676 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 14:21:15,229 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 14:21:19,801 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:21:19,942 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:21:19,943 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 14:21:19,943 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 14:21:19,943 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 14:21:19,943 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 14:21:21,214 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 14:21:22,681 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 14:21:22,682 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 14:21:22,731 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 14:21:23,004 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 14:21:23,005 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 14:21:23,005 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 14:21:23,005 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 14:21:23,005 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 14:21:23,006 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 14:21:23,006 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 14:21:23,006 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 14:21:23,562 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 14:21:28,202 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:21:28,343 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:21:28,343 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 14:21:28,344 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 14:21:28,344 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 14:21:28,344 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 14:21:29,573 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 14:21:30,901 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 14:21:30,901 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 14:21:30,950 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 14:21:31,173 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 14:21:31,173 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 14:21:31,173 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 14:21:37,078 - test_security - INFO - 触发快速拓扑变更...
2025-09-10 14:21:56,277 - test_security - INFO - 检测到0次拓扑变更
2025-09-10 14:21:57,225 - test_security - INFO - 网络在频繁拓扑变更后保持稳定
2025-09-10 14:21:57,225 - test_security - INFO - 拓扑变更攻击测试完成
2025-09-10 14:21:57,226 - RSTPTest - INFO - 测试完成: test_topology_change_attack (耗时: 45.28秒)
2025-09-10 14:21:57,227 - RSTPTest - INFO - ============================================================

2025-09-10 14:21:57,228 - RSTPTest - INFO - ============================================================
2025-09-10 14:21:57,228 - RSTPTest - INFO - 开始测试: test_mac_spoofing
2025-09-10 14:21:57,228 - RSTPTest - INFO - ============================================================
2025-09-10 14:21:57,229 - test_security - INFO - 开始MAC地址欺骗测试
2025-09-10 14:21:57,229 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 14:21:57,229 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 14:21:57,229 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 14:21:57,230 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 14:21:57,230 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 14:21:57,230 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 14:21:57,230 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 14:21:57,230 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 14:21:57,756 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 14:21:57,757 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 14:21:58,800 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 14:21:58,801 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 14:21:58,801 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 14:21:58,801 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 14:21:59,257 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 14:21:59,738 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 14:21:59,739 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 14:21:59,841 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 14:21:59,937 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 14:21:59,938 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 14:21:59,938 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 14:21:59,938 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 14:21:59,938 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 14:21:59,938 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 14:21:59,939 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 14:21:59,939 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 14:22:00,461 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 14:22:05,061 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:22:05,190 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:22:05,190 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 14:22:05,190 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 14:22:05,190 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 14:22:05,191 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 14:22:06,421 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 14:22:07,641 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 14:22:07,642 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 14:22:07,691 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 14:22:07,910 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 14:22:07,910 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 14:22:07,910 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 14:22:07,911 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 14:22:07,911 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 14:22:07,911 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 14:22:07,911 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 14:22:07,912 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 14:22:08,438 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 14:22:13,202 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:22:13,347 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:22:13,348 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 14:22:13,348 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 14:22:13,348 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 14:22:13,348 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 14:22:14,566 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 14:22:15,853 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 14:22:15,853 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 14:22:15,902 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 14:22:16,128 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 14:22:16,129 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 14:22:16,129 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 14:22:21,136 - test_security - INFO - DUT MAC地址: 90:12:10:b5:7d:f7
2025-09-10 14:22:21,136 - test_security - INFO - 尝试MAC地址欺骗...
2025-09-10 14:22:27,553 - test_security - INFO - 网络对MAC欺骗具有抗性
2025-09-10 14:22:34,232 - test_security - INFO - MAC地址欺骗测试完成
2025-09-10 14:22:34,233 - RSTPTest - INFO - 测试完成: test_mac_spoofing (耗时: 37.00秒)
2025-09-10 14:22:34,233 - RSTPTest - INFO - ============================================================

2025-09-10 14:22:34,235 - RSTPTest - INFO - ============================================================
2025-09-10 14:22:34,235 - RSTPTest - INFO - 开始测试: test_port_security
2025-09-10 14:22:34,235 - RSTPTest - INFO - ============================================================
2025-09-10 14:22:34,235 - test_security - INFO - 开始端口安全测试
2025-09-10 14:22:34,240 - test_security - WARNING - 未检测到任何端口安全功能
2025-09-10 14:22:34,241 - RSTPTest - INFO - 测试完成: test_port_security (耗时: 0.01秒)
2025-09-10 14:22:34,241 - RSTPTest - INFO - ============================================================

2025-09-10 14:22:34,243 - RSTPTest - INFO - ============================================================
2025-09-10 14:22:34,243 - RSTPTest - INFO - 开始测试: test_bpdu_filter_functionality
2025-09-10 14:22:34,243 - RSTPTest - INFO - ============================================================
2025-09-10 14:22:34,244 - test_security - INFO - 开始BPDU过滤器功能测试
2025-09-10 14:22:34,291 - NetworkTopology - INFO - 创建RSTP线性拓扑...
2025-09-10 14:22:34,292 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 14:22:34,292 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 14:22:34,292 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 14:22:34,292 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 14:22:34,293 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 14:22:34,293 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 14:22:34,293 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 14:22:34,816 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 14:22:34,817 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 14:22:35,941 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 14:22:35,942 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 14:22:35,942 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth2']
2025-09-10 14:22:35,942 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 14:22:36,405 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 14:22:36,406 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 14:22:36,508 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 14:22:36,605 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 14:22:36,605 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 14:22:36,606 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 14:22:36,606 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 14:22:36,606 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 14:22:36,606 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 14:22:36,607 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 14:22:36,607 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 14:22:49,287 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 14:22:53,876 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:23:03,956 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:23:03,956 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 14:23:03,957 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 14:23:03,957 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 14:23:03,957 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 14:24:07,426 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 14:25:03,103 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 14:25:03,103 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 14:25:03,152 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 14:25:13,325 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 14:25:13,326 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 14:25:13,326 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 14:25:13,326 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 14:25:13,327 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 14:25:13,327 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 14:25:13,327 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 14:25:13,327 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 14:25:13,850 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 14:25:18,455 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:25:18,578 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:25:18,579 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 14:25:18,579 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 14:25:18,579 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0']
2025-09-10 14:25:18,579 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 14:25:19,865 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 14:25:19,865 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 14:25:19,913 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 14:25:20,137 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 14:25:20,137 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 14:25:20,138 - NetworkTopology - INFO - 线性拓扑创建完成
2025-09-10 14:25:25,279 - test_security - WARNING - BPDU包统计命令执行失败: 
2025-09-10 14:25:25,279 - test_security - INFO - 启用过滤器前端口 eth2 BPDU数量: 0
2025-09-10 14:25:25,430 - test_security - WARNING - mstpctl设置BPDU过滤器失败，尝试使用brctl
2025-09-10 14:25:25,531 - test_security - ERROR - 启用BPDU过滤器失败: BPDU过滤器配置失败: 
2025-09-10 14:25:25,531 - test_security - ERROR - 启用BPDU过滤器失败: BPDU过滤器配置失败: 
2025-09-10 14:25:25,682 - test_security - WARNING - 清理命令执行失败: mstpctl setportbpdufilter br0 eth2 no, 错误: 
2025-09-10 14:25:25,830 - test_security - WARNING - 清理命令执行失败: echo 0 > /sys/class/net/br0/bridge/ports/eth2/bpdu_filter, 错误: 
2025-09-10 14:25:25,868 - RSTPTest - INFO - 测试完成: test_bpdu_filter_functionality (耗时: 171.62秒)
2025-09-10 14:25:25,868 - RSTPTest - INFO - ============================================================

2025-09-10 14:25:25,871 - RSTPTest - INFO - ============================================================
2025-09-10 14:25:25,871 - RSTPTest - INFO - 开始测试: test_malformed_bpdu_handling
2025-09-10 14:25:25,871 - RSTPTest - INFO - ============================================================
2025-09-10 14:25:25,872 - test_security - INFO - 开始畸形BPDU处理测试
2025-09-10 14:25:25,881 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 14:25:25,881 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 14:25:25,881 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 14:25:25,881 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 14:25:25,881 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 14:25:25,882 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 14:25:25,882 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 14:25:25,882 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 14:25:26,414 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 14:25:26,415 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 14:25:27,457 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 14:25:27,457 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 14:25:27,458 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 14:25:27,458 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 14:25:27,918 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 14:25:28,402 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 14:25:28,402 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 14:25:28,505 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 14:25:28,602 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 14:25:28,602 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 14:25:28,602 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 14:25:28,603 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 14:25:28,603 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 14:25:28,603 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 14:25:28,603 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 14:25:28,604 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 14:25:44,273 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 14:25:48,834 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:25:48,964 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:25:48,964 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 14:25:48,964 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 14:25:48,965 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 14:25:48,965 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 14:25:50,635 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 14:25:51,880 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 14:25:51,881 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 14:25:51,930 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 14:25:52,151 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 14:25:52,151 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 14:25:52,152 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 14:25:52,152 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 14:25:52,152 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 14:25:52,152 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 14:25:52,152 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 14:25:52,152 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 14:25:52,659 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 14:25:57,249 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:25:57,374 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:25:57,375 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 14:25:57,375 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 14:25:57,375 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 14:25:57,375 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 14:25:58,624 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 14:25:59,887 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 14:25:59,887 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 14:25:59,938 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 14:26:00,161 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 14:26:00,162 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 14:26:00,162 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 14:26:07,025 - test_security - INFO - 初始网络状态: 稳定
2025-09-10 14:26:07,026 - test_security - INFO - 执行测试: _test_oversized_bpdu
2025-09-10 14:26:11,925 - test_security - INFO - _test_oversized_bpdu 网络保持稳定
2025-09-10 14:26:11,925 - test_security - INFO - 执行测试: _test_undersized_bpdu
2025-09-10 14:26:11,930 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

# 创建过小的BPDU（缺少必要字段）
target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 只包含最小字段的BPDU
truncated_bpdu = Raw(load=b"     ")  # 截断的BPDU

packet = eth/llc/truncated_bpdu
sendp(packet, iface=interface, count=5, inter=1, verbose=0)
print("Undersized BPDU sent")
' > /tmp/undersized_bpdu.py
错误: 
2025-09-10 14:26:11,931 - test_security - ERROR - _test_undersized_bpdu 执行失败: 
2025-09-10 14:26:11,931 - test_security - INFO - 执行测试: _test_invalid_protocol_id
2025-09-10 14:26:11,931 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 使用无效的协议ID（正常应该是0x0000）
invalid_bpdu = Raw(load=b"ÿÿ   " + b" " * 30)

packet = eth/llc/invalid_bpdu
sendp(packet, iface=interface, count=5, inter=1, verbose=0)
print("Invalid protocol ID BPDU sent")
' > /tmp/invalid_protocol.py
错误: SSH session not active
2025-09-10 14:26:11,932 - test_security - ERROR - _test_invalid_protocol_id 执行失败: SSH session not active
2025-09-10 14:26:11,933 - test_security - INFO - 执行测试: _test_invalid_version
2025-09-10 14:26:11,933 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 使用无效版本号（正常RSTP应该是2）
invalid_version_bpdu = Raw(load=b"  ÿ  " + b" " * 30)

packet = eth/llc/invalid_version_bpdu
sendp(packet, iface=interface, count=5, inter=1, verbose=0)
print("Invalid version BPDU sent")
' > /tmp/invalid_version.py
错误: SSH session not active
2025-09-10 14:26:11,934 - test_security - ERROR - _test_invalid_version 执行失败: SSH session not active
2025-09-10 14:26:11,934 - test_security - INFO - 执行测试: _test_invalid_message_type
2025-09-10 14:26:11,934 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 使用无效消息类型（正常配置BPDU是0x00，TCN是0x80）
invalid_type_bpdu = Raw(load=b"  ÿ " + b" " * 30)

packet = eth/llc/invalid_type_bpdu
sendp(packet, iface=interface, count=5, inter=1, verbose=0)
print("Invalid message type BPDU sent")
' > /tmp/invalid_type.py
错误: SSH session not active
2025-09-10 14:26:11,935 - test_security - ERROR - _test_invalid_message_type 执行失败: SSH session not active
2025-09-10 14:26:11,935 - test_security - INFO - 执行测试: _test_corrupted_fields
2025-09-10 14:26:11,935 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *
import random

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)

# 创建包含随机损坏数据的BPDU
corrupted_data = bytes([random.randint(0, 255) for _ in range(36)])
corrupted_bpdu = Raw(load=corrupted_data)

packet = eth/llc/corrupted_bpdu
sendp(packet, iface=interface, count=5, inter=1, verbose=0)
print("Corrupted BPDU sent")
' > /tmp/corrupted_bpdu.py
错误: SSH session not active
2025-09-10 14:26:11,936 - test_security - ERROR - _test_corrupted_fields 执行失败: SSH session not active
2025-09-10 14:26:15,106 - RSTPTest - INFO - 测试完成: test_malformed_bpdu_handling (耗时: 49.23秒)
2025-09-10 14:26:15,106 - RSTPTest - INFO - ============================================================

2025-09-10 14:26:15,108 - RSTPTest - INFO - ============================================================
2025-09-10 14:26:15,109 - RSTPTest - INFO - 开始测试: test_non_standard_bpdu_handling
2025-09-10 14:26:15,109 - RSTPTest - INFO - ============================================================
2025-09-10 14:26:15,109 - test_security - INFO - 开始非标准BPDU处理测试
2025-09-10 14:26:15,114 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 14:26:15,115 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 14:26:15,115 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 14:26:15,115 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 14:26:15,115 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 14:26:15,115 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 14:26:15,115 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 14:26:15,116 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 14:26:15,644 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 14:26:15,645 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 14:26:16,682 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 14:26:16,682 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 14:26:16,682 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 14:26:16,683 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 14:26:17,137 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 14:26:17,621 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 14:26:17,622 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 14:26:17,729 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 14:26:17,825 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 14:26:17,825 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 14:26:17,825 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 14:26:17,825 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 14:26:17,826 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 14:26:17,826 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 14:26:17,826 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 14:26:17,826 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 14:26:17,826 - SSH_TestNode1 - WARNING - TestNode1: SSH连接已断开，尝试重连...
2025-09-10 14:26:17,949 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 14:26:18,084 - SSH_TestNode1 - INFO - TestNode1: SSH重连成功
2025-09-10 14:26:18,627 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 14:26:23,226 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:26:23,359 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:26:23,359 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 14:26:23,359 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 14:26:23,360 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 14:26:23,360 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 14:26:24,576 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 14:26:25,850 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 14:26:25,851 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 14:26:25,899 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 14:26:26,119 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 14:26:26,120 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 14:26:26,120 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 14:26:26,120 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 14:26:26,120 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 14:26:26,121 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 14:26:26,121 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 14:26:26,121 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 14:26:26,628 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 14:26:31,185 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:26:31,329 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:26:31,329 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 14:26:31,329 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 14:26:31,329 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 14:26:31,330 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 14:26:32,643 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 14:26:33,906 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 14:26:33,907 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 14:26:33,955 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 14:26:34,179 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 14:26:34,179 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 14:26:34,179 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-10 14:26:39,180 - test_security - INFO - 执行测试: _test_pvst_plus_bpdu
2025-09-10 14:26:39,187 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

# PVST+ 使用不同的目标MAC地址
pvst_mac = "01:00:0c:cc:cc:cd"
interface = "eth0"

eth = Ether(dst=pvst_mac, src="00:11:22:33:44:55")
# PVST+ 使用SNAP封装
snap = SNAP(OUI=0x00000c, code=0x010b)
# 模拟PVST+ BPDU结构
pvst_bpdu = Raw(load=b"    " + b" " * 30 + b" ")  # 包含VLAN ID

packet = eth/snap/pvst_bpdu
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("PVST+ BPDU sent")
' > /tmp/pvst_bpdu.py
错误: 
2025-09-10 14:26:39,189 - test_security - ERROR - _test_pvst_plus_bpdu 执行失败: 
2025-09-10 14:26:39,189 - test_security - INFO - 执行测试: _test_cisco_proprietary_bpdu
2025-09-10 14:26:39,189 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 模拟包含Cisco专有扩展的BPDU
cisco_bpdu = Raw(load=b"    " + b" " * 30 + 
                     b" )   ")  # Cisco OUI + 专有数据

packet = eth/llc/cisco_bpdu
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("Cisco proprietary BPDU sent")
' > /tmp/cisco_bpdu.py
错误: SSH session not active
2025-09-10 14:26:39,190 - test_security - ERROR - _test_cisco_proprietary_bpdu 执行失败: SSH session not active
2025-09-10 14:26:39,190 - test_security - INFO - 执行测试: _test_vlan_tagged_bpdu
2025-09-10 14:26:39,190 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
# 添加VLAN标签
vlan = Dot1Q(vlan=100)
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
bpdu = STP(bpdutype=0x00, rootid=32768, bridgeid=32768)

packet = eth/vlan/llc/bpdu
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("VLAN tagged BPDU sent")
' > /tmp/vlan_bpdu.py
错误: SSH session not active
2025-09-10 14:26:39,191 - test_security - ERROR - _test_vlan_tagged_bpdu 执行失败: SSH session not active
2025-09-10 14:26:39,191 - test_security - INFO - 执行测试: _test_unknown_tlv_bpdu
2025-09-10 14:26:39,192 - SSH_TestNode1 - ERROR - 命令执行失败 [TestNode1]: echo '
from scapy.all import *

target_mac = "01:80:c2:00:00:00"
interface = "eth0"

eth = Ether(dst=target_mac, src="00:11:22:33:44:55")
llc = LLC(dsap=0x42, ssap=0x42, ctrl=0x03)
# 标准BPDU + 未知TLV
standard_bpdu = b"    " + b" " * 30
unknown_tlv = b"ÿÿ "  # 未知类型和长度的TLV
bpdu_with_tlv = Raw(load=standard_bpdu + unknown_tlv)

packet = eth/llc/bpdu_with_tlv
sendp(packet, iface=interface, count=3, inter=1, verbose=0)
print("BPDU with unknown TLV sent")
' > /tmp/unknown_tlv.py
错误: SSH session not active
2025-09-10 14:26:39,192 - test_security - ERROR - _test_unknown_tlv_bpdu 执行失败: SSH session not active
2025-09-10 14:26:39,391 - test_security - INFO - 非标准BPDU处理测试完成
2025-09-10 14:26:39,392 - RSTPTest - INFO - 测试完成: test_non_standard_bpdu_handling (耗时: 24.28秒)
2025-09-10 14:26:39,393 - RSTPTest - INFO - ============================================================

2025-09-10 14:26:39,395 - RSTPTest - INFO - ============================================================
2025-09-10 14:26:39,395 - RSTPTest - INFO - 开始测试: test_bpdu_guard_functionality
2025-09-10 14:26:39,395 - RSTPTest - INFO - ============================================================
2025-09-10 14:26:39,396 - test_security - INFO - 开始BPDU防护功能测试
2025-09-10 14:26:39,401 - NetworkTopology - INFO - 创建RSTP线性拓扑...
2025-09-10 14:26:39,401 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 14:26:39,401 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 14:26:39,402 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 14:26:39,402 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 14:26:39,402 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 14:26:39,402 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 14:26:39,402 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 14:26:39,912 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 14:26:39,916 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 14:26:40,965 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 14:26:40,965 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 14:26:40,966 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth2']
2025-09-10 14:26:40,966 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 14:26:41,425 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 14:26:41,426 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 14:26:41,531 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 14:26:41,626 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 14:26:41,626 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 14:26:41,626 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 14:26:41,627 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 14:26:41,627 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 14:26:41,627 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 14:26:41,627 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 14:26:41,627 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 14:26:41,627 - SSH_TestNode1 - WARNING - TestNode1: SSH连接已断开，尝试重连...
2025-09-10 14:26:41,759 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-10 14:26:41,884 - SSH_TestNode1 - INFO - TestNode1: SSH重连成功
2025-09-10 14:26:42,401 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 14:26:46,965 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:26:47,099 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:26:47,100 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 14:26:47,100 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 14:26:47,100 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 14:26:47,100 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 14:26:48,347 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 14:26:49,586 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 14:26:49,587 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 14:26:49,635 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 14:26:49,864 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 14:26:49,864 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 14:26:49,865 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 14:26:49,865 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 14:26:49,865 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 14:26:49,865 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 14:26:49,866 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 14:26:49,866 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 14:26:50,363 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 14:26:54,956 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:26:55,099 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:26:55,099 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 14:26:55,099 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 14:26:55,099 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0']
2025-09-10 14:26:55,099 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 14:26:56,313 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-10 14:26:56,313 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-10 14:26:56,361 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-10 14:26:56,595 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-10 14:26:56,595 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-10 14:26:56,596 - NetworkTopology - INFO - 线性拓扑创建完成
2025-09-10 14:27:01,652 - test_security - WARNING - 启用BPDU防护失败: 
2025-09-10 14:27:01,700 - test_security - INFO - 边缘端口 eth2 初始状态: unknown
2025-09-10 14:27:01,701 - test_security - INFO - 向边缘端口 eth2 发送BPDU
2025-09-10 14:27:08,613 - test_security - INFO - BPDU防护触发后端口 eth2 状态: unknown
2025-09-10 14:27:08,613 - test_security - ERROR - BPDU防护功能异常：端口未被禁用
2025-09-10 14:27:08,848 - RSTPTest - INFO - 测试完成: test_bpdu_guard_functionality (耗时: 29.45秒)
2025-09-10 14:27:08,848 - RSTPTest - INFO - ============================================================

2025-09-10 14:27:08,850 - RSTPTest - INFO - ============================================================
2025-09-10 14:27:08,851 - RSTPTest - INFO - 开始测试: test_root_guard_functionality
2025-09-10 14:27:08,851 - RSTPTest - INFO - ============================================================
2025-09-10 14:27:08,852 - test_security - INFO - 开始根防护功能测试
2025-09-10 14:27:08,879 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-10 14:27:08,880 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-10 14:27:08,880 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-10 14:27:08,880 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-10 14:27:08,880 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-10 14:27:08,880 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: ovs
2025-09-10 14:27:08,880 - NetworkTopology - INFO - DUT 使用方法: ovs
2025-09-10 14:27:08,881 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-10 14:27:09,403 - NetworkTopology - INFO - 为 DUT 配置RSTP (ovs)...
2025-09-10 14:27:09,403 - NetworkTopology - INFO - DUT: 使用OVS配置RSTP
2025-09-10 14:27:10,466 - NetworkTopology - INFO - DUT: RSTP已通过OVS配置
2025-09-10 14:27:10,466 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-10 14:27:10,466 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-10 14:27:10,466 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-10 14:27:10,941 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-10 14:27:11,441 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-10 14:27:11,441 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-10 14:27:11,544 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-10 14:27:11,641 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-10 14:27:11,641 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-10 14:27:11,641 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-10 14:27:11,641 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-10 14:27:11,641 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-10 14:27:11,642 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: mstpd
2025-09-10 14:27:11,642 - NetworkTopology - INFO - TestNode1 使用方法: mstpd
2025-09-10 14:27:11,642 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-10 14:27:12,165 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (mstpd)...
2025-09-10 14:27:16,733 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:27:16,877 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:27:16,877 - NetworkTopology - INFO - TestNode1: RSTP已通过mstpd配置
2025-09-10 14:27:16,878 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-10 14:27:16,878 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-10 14:27:16,878 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-10 14:27:18,103 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-10 14:27:19,327 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-10 14:27:19,328 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-10 14:27:19,376 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-10 14:27:19,601 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-10 14:27:19,601 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-10 14:27:19,601 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-10 14:27:19,602 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-10 14:27:19,602 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-10 14:27:19,602 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: mstpd
2025-09-10 14:27:19,602 - NetworkTopology - INFO - TestNode2 使用方法: mstpd
2025-09-10 14:27:19,603 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-10 14:27:20,113 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (mstpd)...
2025-09-10 14:27:24,680 - NetworkTopology - INFO - 验证br0的mstpd配置...
2025-09-10 14:27:24,814 - NetworkTopology - INFO - mstpd配置验证通过
2025-09-10 14:27:24,814 - NetworkTopology - INFO - TestNode2: RSTP已通过mstpd配置
2025-09-10 14:27:24,815 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-10 14:27:24,815 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-10 14:27:24,815 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-10 14:27:26,039 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-10 14:27:26,863 - RSTPTest - INFO - 测试完成: test_root_guard_functionality (耗时: 18.01秒)
2025-09-10 14:27:26,864 - RSTPTest - INFO - ============================================================

2025-09-10 14:27:26,865 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-10 14:27:26,865 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-10 14:27:26,866 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-10 14:27:27,359 - __main__ - INFO - ============================================================
2025-09-10 14:27:27,360 - __main__ - INFO - 测试完成，返回码: 2
2025-09-10 14:27:27,360 - __main__ - INFO - ============================================================
