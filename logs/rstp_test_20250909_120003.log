2025-09-09 12:00:03,326 - root - INFO - 日志系统初始化完成，日志文件: logs\rstp_test_20250909_120003.log
2025-09-09 12:00:03,557 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 12:00:03,557 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 12:00:03,558 - RSTPTest - INFO - ============================================================
2025-09-09 12:00:03,558 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[12288]
2025-09-09 12:00:03,558 - RSTPTest - INFO - ============================================================
2025-09-09 12:00:03,570 - test_parameters - INFO - 测试网桥优先级: 12288
2025-09-09 12:00:04,884 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-09 12:00:06,903 - test_parameters - INFO - 优先级12288设置成功
2025-09-09 12:00:06,905 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[12288] (耗时: 3.34秒)
2025-09-09 12:00:06,905 - RSTPTest - INFO - ============================================================

2025-09-09 12:00:06,907 - RSTPTest - INFO - ============================================================
2025-09-09 12:00:06,908 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[16384]
2025-09-09 12:00:06,908 - RSTPTest - INFO - ============================================================
2025-09-09 12:00:06,909 - test_parameters - INFO - 测试网桥优先级: 16384
2025-09-09 12:00:08,205 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-09 12:00:10,223 - test_parameters - INFO - 优先级16384设置成功
2025-09-09 12:00:10,224 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[16384] (耗时: 3.32秒)
2025-09-09 12:00:10,225 - RSTPTest - INFO - ============================================================

2025-09-09 12:00:10,226 - RSTPTest - INFO - ============================================================
2025-09-09 12:00:10,226 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[32768]
2025-09-09 12:00:10,226 - RSTPTest - INFO - ============================================================
2025-09-09 12:00:10,227 - test_parameters - INFO - 测试网桥优先级: 32768
2025-09-09 12:00:11,526 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-09 12:00:13,543 - test_parameters - INFO - 优先级32768设置成功
2025-09-09 12:00:13,545 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[32768] (耗时: 3.32秒)
2025-09-09 12:00:13,545 - RSTPTest - INFO - ============================================================

2025-09-09 12:00:13,546 - RSTPTest - INFO - ============================================================
2025-09-09 12:00:13,547 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[61440]
2025-09-09 12:00:13,547 - RSTPTest - INFO - ============================================================
2025-09-09 12:00:13,548 - test_parameters - INFO - 测试网桥优先级: 61440
2025-09-09 12:00:14,856 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-09 12:00:16,874 - test_parameters - INFO - 优先级61440设置成功
2025-09-09 12:00:16,875 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[61440] (耗时: 3.33秒)
2025-09-09 12:00:16,875 - RSTPTest - INFO - ============================================================

2025-09-09 12:00:16,876 - RSTPTest - INFO - ============================================================
2025-09-09 12:00:16,877 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[4097]
2025-09-09 12:00:16,877 - RSTPTest - INFO - ============================================================
2025-09-09 12:00:16,878 - test_parameters - INFO - 测试无效优先级: 4097
2025-09-09 12:00:17,643 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[4097] (耗时: 0.77秒)
2025-09-09 12:00:17,643 - RSTPTest - INFO - ============================================================

2025-09-09 12:00:17,644 - RSTPTest - INFO - ============================================================
2025-09-09 12:00:17,645 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[12289]
2025-09-09 12:00:17,645 - RSTPTest - INFO - ============================================================
2025-09-09 12:00:17,646 - test_parameters - INFO - 测试无效优先级: 12289
2025-09-09 12:00:17,940 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[12289] (耗时: 0.30秒)
2025-09-09 12:00:17,941 - RSTPTest - INFO - ============================================================

2025-09-09 12:00:17,942 - RSTPTest - INFO - ============================================================
2025-09-09 12:00:17,942 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[70000]
2025-09-09 12:00:17,942 - RSTPTest - INFO - ============================================================
2025-09-09 12:00:17,943 - test_parameters - INFO - 测试无效优先级: 70000
2025-09-09 12:00:18,255 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[70000] (耗时: 0.31秒)
2025-09-09 12:00:18,256 - RSTPTest - INFO - ============================================================

2025-09-09 12:00:18,257 - RSTPTest - INFO - ============================================================
2025-09-09 12:00:18,257 - RSTPTest - INFO - 开始测试: test_hello_time
2025-09-09 12:00:18,257 - RSTPTest - INFO - ============================================================
2025-09-09 12:00:18,257 - test_parameters - INFO - 测试Hello Time参数
2025-09-09 12:00:19,515 - test_parameters - INFO - 设置Hello Time: 1秒
2025-09-09 12:00:21,557 - test_parameters - INFO - Hello Time 1秒设置成功
2025-09-09 12:00:21,557 - test_parameters - INFO - 设置Hello Time: 2秒
2025-09-09 12:00:23,639 - test_parameters - INFO - Hello Time 2秒设置成功
2025-09-09 12:00:23,640 - test_parameters - INFO - 设置Hello Time: 5秒
2025-09-09 12:00:25,723 - test_parameters - INFO - Hello Time 5秒设置成功
2025-09-09 12:00:25,723 - test_parameters - INFO - Hello Time测试通过
2025-09-09 12:00:25,724 - RSTPTest - INFO - 测试完成: test_hello_time (耗时: 7.47秒)
2025-09-09 12:00:25,725 - RSTPTest - INFO - ============================================================

2025-09-09 12:00:25,726 - RSTPTest - INFO - ============================================================
2025-09-09 12:00:25,726 - RSTPTest - INFO - 开始测试: test_forward_delay
2025-09-09 12:00:25,726 - RSTPTest - INFO - ============================================================
2025-09-09 12:00:25,727 - test_parameters - INFO - 测试Forward Delay参数
2025-09-09 12:00:26,991 - test_parameters - INFO - 设置Forward Delay: 4秒
2025-09-09 12:00:29,034 - test_parameters - INFO - Forward Delay 4秒设置成功
2025-09-09 12:00:29,034 - test_parameters - INFO - 设置Forward Delay: 10秒
2025-09-09 12:00:31,119 - test_parameters - INFO - Forward Delay 10秒设置成功
2025-09-09 12:00:31,120 - test_parameters - INFO - 设置Forward Delay: 15秒
2025-09-09 12:00:33,204 - test_parameters - INFO - Forward Delay 15秒设置成功
2025-09-09 12:00:33,204 - test_parameters - INFO - Forward Delay测试通过
2025-09-09 12:00:33,205 - RSTPTest - INFO - 测试完成: test_forward_delay (耗时: 7.48秒)
2025-09-09 12:00:33,205 - RSTPTest - INFO - ============================================================

2025-09-09 12:00:33,207 - RSTPTest - INFO - ============================================================
2025-09-09 12:00:33,207 - RSTPTest - INFO - 开始测试: test_max_age
2025-09-09 12:00:33,207 - RSTPTest - INFO - ============================================================
2025-09-09 12:00:33,207 - test_parameters - INFO - 测试Max Age参数
2025-09-09 12:00:34,469 - test_parameters - INFO - 设置Max Age: 6秒
2025-09-09 12:00:36,511 - test_parameters - INFO - Max Age 6秒设置成功
2025-09-09 12:00:36,512 - test_parameters - INFO - 设置Max Age: 10秒
2025-09-09 12:00:38,592 - test_parameters - INFO - Max Age 10秒设置成功
2025-09-09 12:00:38,592 - test_parameters - INFO - 设置Max Age: 20秒
2025-09-09 12:00:40,675 - test_parameters - INFO - Max Age 20秒设置成功
2025-09-09 12:00:40,676 - test_parameters - INFO - Max Age测试通过
2025-09-09 12:00:40,676 - RSTPTest - INFO - 测试完成: test_max_age (耗时: 7.47秒)
2025-09-09 12:00:40,677 - RSTPTest - INFO - ============================================================

2025-09-09 12:00:41,021 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 12:00:41,021 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 12:00:41,324 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 12:00:41,324 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 12:00:41,325 - RSTPTest - INFO - ============================================================
2025-09-09 12:00:41,325 - RSTPTest - INFO - 开始测试: test_port_cost
2025-09-09 12:00:41,325 - RSTPTest - INFO - ============================================================
2025-09-09 12:00:41,326 - test_parameters - INFO - 测试端口路径成本
2025-09-09 12:00:41,326 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 12:00:41,327 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 12:00:41,327 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 12:00:41,327 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 12:00:41,327 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 12:00:41,328 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 12:00:41,328 - NetworkTopology - INFO - DUT: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 12:00:41,328 - NetworkTopology - INFO - DUT: 检查mstpd支持...
2025-09-09 12:00:41,333 - NetworkTopology - INFO - DUT: mstpd检查结果: code=1
2025-09-09 12:00:41,333 - NetworkTopology - INFO - DUT: 检查iproute2支持...
2025-09-09 12:00:41,382 - NetworkTopology - INFO - DUT: ip命令检查: code=0
2025-09-09 12:00:41,383 - NetworkTopology - INFO - DUT: 使用iproute2配置RSTP
2025-09-09 12:00:41,383 - NetworkTopology - INFO - DUT: 最终选择RSTP方法: iproute2
2025-09-09 12:00:41,383 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 12:00:41,383 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 12:00:41,717 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 12:00:42,106 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 12:00:42,106 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 12:00:42,106 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 12:00:42,106 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 12:00:42,221 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 12:00:42,337 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 12:00:42,337 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 12:00:42,389 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 12:00:42,438 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 12:00:42,486 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 12:00:42,486 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 12:00:42,486 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 12:00:42,487 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 12:00:42,487 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 12:00:42,487 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 12:00:42,487 - NetworkTopology - INFO - TestNode1: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 12:00:42,487 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 12:00:42,504 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 12:00:42,504 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 12:00:52,641 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=1, output=
2025-09-09 12:00:52,642 - NetworkTopology - INFO - TestNode1: 尝试启动mstpd服务...
2025-09-09 12:01:02,933 - NetworkTopology - INFO - TestNode1: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 12:01:15,031 - NetworkTopology - INFO - TestNode1: mstpd启动后状态: code=1
2025-09-09 12:01:15,032 - NetworkTopology - INFO - TestNode1: mstpd启动失败，使用iproute2
2025-09-09 12:01:15,032 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: iproute2
2025-09-09 12:01:15,032 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 12:01:15,033 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 12:01:46,043 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 12:02:47,939 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 12:02:47,939 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 12:02:47,939 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 12:02:47,939 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 12:03:08,533 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 12:03:29,120 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 12:03:29,120 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 12:03:39,438 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 12:03:39,501 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 12:03:39,564 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 12:03:39,564 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 12:03:39,564 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 12:03:39,565 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 12:03:39,565 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 12:03:39,565 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 12:03:39,565 - NetworkTopology - INFO - TestNode2: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 12:03:39,566 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 12:03:39,582 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 12:03:39,582 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 12:03:49,712 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=1, output=
2025-09-09 12:03:49,713 - NetworkTopology - INFO - TestNode2: 尝试启动mstpd服务...
2025-09-09 12:04:00,007 - NetworkTopology - INFO - TestNode2: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 12:04:12,098 - NetworkTopology - INFO - TestNode2: mstpd启动后状态: code=1
2025-09-09 12:04:12,098 - NetworkTopology - INFO - TestNode2: mstpd启动失败，使用iproute2
2025-09-09 12:04:12,099 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: iproute2
2025-09-09 12:04:12,099 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 12:04:12,099 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 12:04:43,020 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 12:05:44,860 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 12:05:44,860 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 12:05:44,860 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 12:05:44,861 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 12:06:05,451 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 12:06:21,181 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 12:06:21,181 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 12:06:28,455 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 12:06:28,522 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 12:06:28,580 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 12:06:28,580 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 12:06:28,580 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 12:06:33,581 - test_parameters - INFO - 设置端口eth0成本: 10
2025-09-09 12:06:33,597 - test_parameters - INFO - 设置端口eth0成本: 100
2025-09-09 12:06:33,655 - test_parameters - INFO - 设置端口eth0成本: 1000
2025-09-09 12:06:33,711 - test_parameters - INFO - 设置端口eth0成本: 20000
2025-09-09 12:06:33,766 - test_parameters - INFO - 端口成本测试通过
2025-09-09 12:06:33,767 - RSTPTest - INFO - 测试完成: test_port_cost (耗时: 352.44秒)
2025-09-09 12:06:33,768 - RSTPTest - INFO - ============================================================

2025-09-09 12:06:33,769 - RSTPTest - INFO - ============================================================
2025-09-09 12:06:33,769 - RSTPTest - INFO - 开始测试: test_parameter_persistence
2025-09-09 12:06:33,769 - RSTPTest - INFO - ============================================================
2025-09-09 12:06:33,770 - test_parameters - INFO - 测试参数持久性
2025-09-09 12:06:38,291 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 12:06:38,468 - RSTPTest - INFO - 测试完成: test_parameter_persistence (耗时: 4.70秒)
2025-09-09 12:06:38,468 - RSTPTest - INFO - ============================================================

2025-09-09 12:06:38,469 - RSTPTest - INFO - ============================================================
2025-09-09 12:06:38,469 - RSTPTest - INFO - 开始测试: test_parameter_boundaries
2025-09-09 12:06:38,470 - RSTPTest - INFO - ============================================================
2025-09-09 12:06:38,470 - test_parameters - INFO - 测试参数边界值
2025-09-09 12:06:39,744 - test_parameters - INFO - 最小值0: 成功
2025-09-09 12:06:39,800 - test_parameters - INFO - 最大值65535: 成功
2025-09-09 12:06:39,856 - test_parameters - INFO - 正确拒绝了无效值-1
2025-09-09 12:06:39,911 - test_parameters - WARNING - 接受了无效值65536
2025-09-09 12:06:39,968 - test_parameters - INFO - 最小值1: 成功
2025-09-09 12:06:40,023 - test_parameters - INFO - 最大值10: 成功
2025-09-09 12:06:40,075 - test_parameters - INFO - 正确拒绝了无效值0
2025-09-09 12:06:40,127 - test_parameters - INFO - 正确拒绝了无效值11
2025-09-09 12:06:40,179 - test_parameters - INFO - 最小值4: 成功
2025-09-09 12:06:40,231 - test_parameters - INFO - 最大值30: 成功
2025-09-09 12:06:40,287 - test_parameters - WARNING - 接受了无效值3
2025-09-09 12:06:40,343 - test_parameters - INFO - 正确拒绝了无效值31
2025-09-09 12:06:40,396 - test_parameters - INFO - 最小值6: 成功
2025-09-09 12:06:40,452 - test_parameters - INFO - 最大值40: 成功
2025-09-09 12:06:40,507 - test_parameters - INFO - 正确拒绝了无效值5
2025-09-09 12:06:40,563 - test_parameters - INFO - 正确拒绝了无效值41
2025-09-09 12:06:40,564 - test_parameters - INFO - 参数边界测试完成
2025-09-09 12:06:40,564 - RSTPTest - INFO - 测试完成: test_parameter_boundaries (耗时: 2.09秒)
2025-09-09 12:06:40,565 - RSTPTest - INFO - ============================================================

2025-09-09 12:06:40,565 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 12:06:40,565 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 12:06:40,566 - SSH_DUT - INFO - SSH连接已关闭: DUT
