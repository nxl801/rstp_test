2025-09-09 14:42:40,468 - root - INFO - 日志系统初始化完成，日志文件: logs\rstp_test_20250909_144240.log
2025-09-09 14:42:40,701 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 14:42:40,702 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 14:42:40,838 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 14:42:40,838 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 14:42:40,971 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 14:42:40,971 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 14:42:40,972 - RSTPTest - INFO - ============================================================
2025-09-09 14:42:40,973 - RSTPTest - INFO - 开始测试: test_port_state_transitions
2025-09-09 14:42:40,973 - RSTPTest - INFO - ============================================================
2025-09-09 14:42:40,974 - test_additional_rstp - INFO - 开始端口状态转换测试
2025-09-09 14:42:40,974 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 14:42:40,974 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 14:42:40,975 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 14:42:40,975 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 14:42:40,975 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 14:42:40,975 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 14:42:40,976 - NetworkTopology - INFO - DUT: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 14:42:40,976 - NetworkTopology - INFO - DUT: 检查mstpd支持...
2025-09-09 14:42:40,982 - NetworkTopology - INFO - DUT: mstpd检查结果: code=1
2025-09-09 14:42:40,982 - NetworkTopology - INFO - DUT: 检查iproute2支持...
2025-09-09 14:42:41,028 - NetworkTopology - INFO - DUT: ip命令检查: code=0
2025-09-09 14:42:41,029 - NetworkTopology - INFO - DUT: 使用iproute2配置RSTP
2025-09-09 14:42:41,029 - NetworkTopology - INFO - DUT: 最终选择RSTP方法: iproute2
2025-09-09 14:42:41,029 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 14:42:41,030 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 14:42:41,343 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 14:42:41,735 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 14:42:41,735 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 14:42:41,735 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 14:42:41,736 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 14:42:41,851 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 14:42:41,970 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 14:42:41,971 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 14:42:42,023 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 14:42:42,072 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 14:42:42,120 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 14:42:42,120 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 14:42:42,120 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 14:42:42,121 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 14:42:42,121 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 14:42:42,121 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 14:42:42,121 - NetworkTopology - INFO - TestNode1: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 14:42:42,121 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 14:42:42,130 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 14:42:42,130 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 14:42:45,282 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=1, output=
2025-09-09 14:42:45,282 - NetworkTopology - INFO - TestNode1: 尝试启动mstpd服务...
2025-09-09 14:42:55,389 - NetworkTopology - INFO - TestNode1: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 14:42:57,635 - NetworkTopology - INFO - TestNode1: mstpd启动后状态: code=1
2025-09-09 14:42:57,635 - NetworkTopology - INFO - TestNode1: mstpd启动失败，使用iproute2
2025-09-09 14:42:57,635 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: iproute2
2025-09-09 14:42:57,636 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 14:42:57,636 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 14:43:10,252 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 14:43:11,392 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 14:43:11,392 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 14:43:11,392 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 14:43:11,392 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 14:43:11,753 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 14:43:12,083 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 14:43:12,083 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 14:43:12,255 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 14:43:12,302 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 14:43:12,350 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 14:43:12,350 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 14:43:12,351 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 14:43:12,351 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 14:43:12,351 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 14:43:12,351 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 14:43:12,351 - NetworkTopology - INFO - TestNode2: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 14:43:12,352 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 14:43:12,359 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 14:43:12,359 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 14:43:12,485 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=1, output=
2025-09-09 14:43:12,486 - NetworkTopology - INFO - TestNode2: 尝试启动mstpd服务...
2025-09-09 14:43:12,666 - NetworkTopology - INFO - TestNode2: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 14:43:14,746 - NetworkTopology - INFO - TestNode2: mstpd启动后状态: code=1
2025-09-09 14:43:14,747 - NetworkTopology - INFO - TestNode2: mstpd启动失败，使用iproute2
2025-09-09 14:43:14,747 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: iproute2
2025-09-09 14:43:14,747 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 14:43:14,747 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 14:43:15,263 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 14:43:16,350 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 14:43:16,351 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 14:43:16,351 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 14:43:16,351 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 14:43:16,709 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 14:43:17,057 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 14:43:17,058 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 14:43:17,233 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 14:43:17,281 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 14:43:17,329 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 14:43:17,329 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 14:43:17,329 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 14:43:22,484 - test_additional_rstp - INFO - 使用网桥: rstp0
2025-09-09 14:43:22,484 - test_additional_rstp - INFO - === 步骤1: 禁用端口触发状态转换 ===
2025-09-09 14:43:22,551 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 14:43:22,923 - RSTPTest - INFO - 测试完成: test_port_state_transitions (耗时: 41.95秒)
2025-09-09 14:43:22,923 - RSTPTest - INFO - ============================================================

2025-09-09 14:43:22,926 - RSTPTest - INFO - ============================================================
2025-09-09 14:43:22,926 - RSTPTest - INFO - 开始测试: test_bpdu_propagation_and_keepalive
2025-09-09 14:43:22,926 - RSTPTest - INFO - ============================================================
2025-09-09 14:43:22,927 - test_additional_rstp - INFO - 开始BPDU传播和保活机制测试
2025-09-09 14:43:22,927 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 14:43:22,927 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 14:43:22,928 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 14:43:22,928 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 14:43:22,928 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 14:43:22,928 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 14:43:22,928 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 14:43:22,929 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 14:43:23,214 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 14:43:23,606 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 14:43:23,607 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 14:43:23,607 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 14:43:23,607 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 14:43:23,727 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 14:43:23,847 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 14:43:23,847 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 14:43:23,904 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 14:43:23,952 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 14:43:23,999 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 14:43:23,999 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 14:43:24,000 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 14:43:24,000 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 14:43:24,000 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 14:43:24,000 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 14:43:24,001 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 14:43:24,001 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 14:43:24,513 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 14:43:25,633 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 14:43:25,634 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 14:43:25,634 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 14:43:25,634 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 14:43:25,982 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 14:43:26,308 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 14:43:26,309 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 14:43:26,477 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 14:43:26,526 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 14:43:26,574 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 14:43:26,575 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 14:43:26,575 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 14:43:26,575 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 14:43:26,575 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 14:43:26,576 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 14:43:26,576 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 14:43:26,576 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 14:43:27,072 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 14:43:28,166 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 14:43:28,167 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 14:43:28,167 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 14:43:28,167 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 14:43:28,483 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 14:43:28,850 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 14:43:28,850 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 14:43:29,030 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 14:43:29,078 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 14:43:29,127 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 14:43:29,127 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 14:43:29,127 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 14:43:37,407 - test_additional_rstp - INFO - === 步骤1: 验证分布式BPDU生成 ===
2025-09-09 14:43:37,412 - test_additional_rstp - INFO - 检测到网桥接口: ['18:', '26:']
2025-09-09 14:43:37,413 - test_additional_rstp - INFO - 在接口 18: 上捕获BPDU...
2025-09-09 14:43:37,413 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: 18:, 数量: 10)
2025-09-09 14:43:37,508 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-09 14:43:37,509 - test_additional_rstp - WARNING - 在 18: 上未捕获到BPDU
2025-09-09 14:43:37,509 - test_additional_rstp - INFO - 在接口 26: 上捕获BPDU...
2025-09-09 14:43:37,509 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: 26:, 数量: 10)
2025-09-09 14:43:37,589 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-09 14:43:37,589 - test_additional_rstp - WARNING - 在 26: 上未捕获到BPDU
2025-09-09 14:43:37,589 - test_additional_rstp - INFO - 总共捕获 0 个BPDU，来自 0 个不同源
2025-09-09 14:43:37,589 - test_additional_rstp - WARNING - 未检测到BPDU传播
2025-09-09 14:43:37,590 - test_additional_rstp - INFO - BPDU传播和保活机制测试完成
2025-09-09 14:43:37,590 - RSTPTest - INFO - 测试完成: test_bpdu_propagation_and_keepalive (耗时: 14.66秒)
2025-09-09 14:43:37,591 - RSTPTest - INFO - ============================================================

2025-09-09 14:43:37,592 - RSTPTest - INFO - ============================================================
2025-09-09 14:43:37,592 - RSTPTest - INFO - 开始测试: test_disabled_port_exclusion_enhanced
2025-09-09 14:43:37,592 - RSTPTest - INFO - ============================================================
2025-09-09 14:43:37,593 - test_additional_rstp - INFO - 开始增强的禁用端口排除测试
2025-09-09 14:43:37,593 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 14:43:37,593 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 14:43:37,593 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 14:43:37,593 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 14:43:37,594 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 14:43:37,594 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 14:43:37,594 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 14:43:37,594 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 14:43:37,882 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 14:43:38,279 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 14:43:38,279 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 14:43:38,279 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 14:43:38,279 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 14:43:38,397 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 14:43:38,514 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 14:43:38,515 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 14:43:38,570 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 14:43:38,619 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 14:43:38,667 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 14:43:38,667 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 14:43:38,668 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 14:43:38,668 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 14:43:38,668 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 14:43:38,668 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 14:43:38,669 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 14:43:38,669 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 14:43:39,171 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 14:43:40,289 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 14:43:40,289 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 14:43:40,290 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 14:43:40,290 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 14:43:40,629 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 14:43:40,975 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 14:43:40,975 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 14:43:41,159 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 14:43:41,206 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 14:43:41,254 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 14:43:41,255 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 14:43:41,255 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 14:43:41,255 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 14:43:41,255 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 14:43:41,256 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 14:43:41,256 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 14:43:41,256 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 14:43:41,753 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 14:43:42,814 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 14:43:42,814 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 14:43:42,814 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 14:43:42,815 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 14:43:43,170 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 14:43:43,526 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 14:43:43,526 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 14:43:43,686 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 14:43:43,734 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 14:43:43,781 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 14:43:43,782 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 14:43:43,782 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 14:43:48,986 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 14:43:49,010 - RSTPTest - INFO - 测试完成: test_disabled_port_exclusion_enhanced (耗时: 11.42秒)
2025-09-09 14:43:49,010 - RSTPTest - INFO - ============================================================

2025-09-09 14:43:49,010 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 14:43:49,011 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 14:43:49,011 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 14:43:49,153 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 14:43:49,153 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 14:43:49,281 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 14:43:49,281 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 14:43:49,410 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 14:43:49,410 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 14:43:49,410 - RSTPTest - INFO - ============================================================
2025-09-09 14:43:49,411 - RSTPTest - INFO - 开始测试: test_proposal_agreement_handshake
2025-09-09 14:43:49,411 - RSTPTest - INFO - ============================================================
2025-09-09 14:43:49,412 - test_advanced_rstp_mechanisms - INFO - 开始测试RSTP Proposal/Agreement握手机制
2025-09-09 14:43:49,412 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 14:43:49,412 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 14:43:49,412 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 14:43:49,413 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 14:43:49,413 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 14:43:49,413 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 14:43:49,413 - NetworkTopology - INFO - DUT: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 14:43:49,413 - NetworkTopology - INFO - DUT: 检查mstpd支持...
2025-09-09 14:43:49,419 - NetworkTopology - INFO - DUT: mstpd检查结果: code=1
2025-09-09 14:43:49,419 - NetworkTopology - INFO - DUT: 检查iproute2支持...
2025-09-09 14:43:49,466 - NetworkTopology - INFO - DUT: ip命令检查: code=0
2025-09-09 14:43:49,467 - NetworkTopology - INFO - DUT: 使用iproute2配置RSTP
2025-09-09 14:43:49,467 - NetworkTopology - INFO - DUT: 最终选择RSTP方法: iproute2
2025-09-09 14:43:49,468 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 14:43:49,468 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 14:43:49,783 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 14:43:50,182 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 14:43:50,182 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 14:43:50,183 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 14:43:50,183 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 14:43:50,302 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 14:43:50,423 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 14:43:50,423 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 14:43:50,480 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 14:43:50,527 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 14:43:50,575 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 14:43:50,575 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 14:43:50,576 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 14:43:50,576 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 14:43:50,576 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 14:43:50,577 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 14:43:50,577 - NetworkTopology - INFO - TestNode1: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 14:43:50,577 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 14:43:50,584 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 14:43:50,585 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 14:43:50,706 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=1, output=
2025-09-09 14:43:50,707 - NetworkTopology - INFO - TestNode1: 尝试启动mstpd服务...
2025-09-09 14:43:50,867 - NetworkTopology - INFO - TestNode1: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 14:43:52,952 - NetworkTopology - INFO - TestNode1: mstpd启动后状态: code=1
2025-09-09 14:43:52,953 - NetworkTopology - INFO - TestNode1: mstpd启动失败，使用iproute2
2025-09-09 14:43:52,953 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: iproute2
2025-09-09 14:43:52,953 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 14:43:52,953 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 14:43:53,496 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 14:43:54,589 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 14:43:54,589 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 14:43:54,589 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 14:43:54,589 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 14:43:54,946 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 14:43:55,325 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 14:43:55,326 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 14:43:55,497 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 14:43:55,545 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 14:43:55,595 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 14:43:55,596 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 14:43:55,596 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 14:43:55,596 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 14:43:55,596 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 14:43:55,597 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 14:43:55,597 - NetworkTopology - INFO - TestNode2: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 14:43:55,597 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 14:43:55,605 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 14:43:55,606 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 14:43:55,729 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=1, output=
2025-09-09 14:43:55,729 - NetworkTopology - INFO - TestNode2: 尝试启动mstpd服务...
2025-09-09 14:43:55,913 - NetworkTopology - INFO - TestNode2: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 14:43:57,989 - NetworkTopology - INFO - TestNode2: mstpd启动后状态: code=1
2025-09-09 14:43:57,989 - NetworkTopology - INFO - TestNode2: mstpd启动失败，使用iproute2
2025-09-09 14:43:57,989 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: iproute2
2025-09-09 14:43:57,990 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 14:43:57,990 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 14:43:58,528 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 14:43:59,596 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 14:43:59,596 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 14:43:59,596 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 14:43:59,596 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 14:43:59,948 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 14:44:00,311 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 14:44:00,312 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 14:44:00,495 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 14:44:00,542 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 14:44:00,590 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 14:44:00,590 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 14:44:00,591 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 14:44:05,591 - test_advanced_rstp_mechanisms - INFO - 开始在eth0上捕获BPDU
2025-09-09 14:44:05,592 - test_advanced_rstp_mechanisms - INFO - 触发拓扑变更...
2025-09-09 14:44:11,816 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: eth0, 数量: 20)
2025-09-09 14:44:11,852 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-09 14:44:11,853 - test_advanced_rstp_mechanisms - INFO - 捕获到0个BPDU数据包
2025-09-09 14:44:11,865 - RSTPTest - INFO - 测试完成: test_proposal_agreement_handshake (耗时: 22.45秒)
2025-09-09 14:44:11,865 - RSTPTest - INFO - ============================================================

2025-09-09 14:44:11,868 - RSTPTest - INFO - ============================================================
2025-09-09 14:44:11,868 - RSTPTest - INFO - 开始测试: test_tcn_topology_change_notification
2025-09-09 14:44:11,868 - RSTPTest - INFO - ============================================================
2025-09-09 14:44:11,869 - test_advanced_rstp_mechanisms - INFO - 开始测试TCN拓扑变更通知机制
2025-09-09 14:44:11,869 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 14:44:11,869 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 14:44:11,869 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 14:44:11,870 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 14:44:11,870 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 14:44:11,870 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 14:44:11,870 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 14:44:11,870 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 14:44:12,138 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 14:44:12,530 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 14:44:12,530 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 14:44:12,530 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 14:44:12,531 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 14:44:12,650 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 14:44:12,766 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 14:44:12,766 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 14:44:12,829 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 14:44:12,875 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 14:44:12,923 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 14:44:12,923 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 14:44:12,924 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 14:44:12,924 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 14:44:12,924 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 14:44:12,924 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 14:44:12,924 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 14:44:12,924 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 14:44:13,423 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 14:44:14,475 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 14:44:14,476 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 14:44:14,476 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 14:44:14,476 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 14:44:14,787 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 14:44:15,129 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 14:44:15,129 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 14:44:15,309 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 14:44:15,357 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 14:44:15,404 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 14:44:15,404 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 14:44:15,405 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 14:44:15,405 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 14:44:15,405 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 14:44:15,405 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 14:44:15,406 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 14:44:15,406 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 14:44:15,913 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 14:44:16,977 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 14:44:16,977 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 14:44:16,977 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 14:44:16,977 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 14:44:17,313 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 14:44:17,635 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 14:44:17,636 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 14:44:17,806 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 14:44:17,854 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 14:44:17,903 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 14:44:17,903 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 14:44:17,904 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 14:44:28,019 - test_advanced_rstp_mechanisms - INFO - 初始网桥端口数量: 3
2025-09-09 14:44:28,019 - test_advanced_rstp_mechanisms - INFO - 触发拓扑变更：临时禁用/启用端口
2025-09-09 14:44:28,073 - test_advanced_rstp_mechanisms - INFO - 初始TC计数: 0
2025-09-09 14:44:36,162 - test_advanced_rstp_mechanisms - INFO - 变更后TC计数: 0
2025-09-09 14:44:36,163 - test_advanced_rstp_mechanisms - INFO - 拓扑变更可能未被检测到，这可能是正常的（取决于实现）
2025-09-09 14:44:36,318 - test_advanced_rstp_mechanisms - INFO - 最终网桥端口数量: 3
2025-09-09 14:44:36,378 - test_advanced_rstp_mechanisms - INFO - 当前MAC地址表老化时间: 300秒
2025-09-09 14:44:36,378 - test_advanced_rstp_mechanisms - WARNING - MAC地址表老化时间(300秒)未缩短，可能是实现差异
2025-09-09 14:44:36,378 - test_advanced_rstp_mechanisms - INFO - TCN拓扑变更通知机制测试通过 - 使用安全的端口状态变更方式
2025-09-09 14:44:36,379 - RSTPTest - INFO - 测试完成: test_tcn_topology_change_notification (耗时: 24.51秒)
2025-09-09 14:44:36,379 - RSTPTest - INFO - ============================================================

2025-09-09 14:44:36,381 - RSTPTest - INFO - ============================================================
2025-09-09 14:44:36,381 - RSTPTest - INFO - 开始测试: test_edge_port_behavior
2025-09-09 14:44:36,381 - RSTPTest - INFO - ============================================================
2025-09-09 14:44:36,382 - test_advanced_rstp_mechanisms - INFO - 开始测试边缘端口行为
2025-09-09 14:44:36,382 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 14:44:36,382 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 14:44:36,382 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 14:44:36,383 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 14:44:36,383 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 14:44:36,383 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 14:44:36,383 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 14:44:36,383 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 14:44:36,702 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 14:44:37,093 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 14:44:37,093 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 14:44:37,094 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 14:44:37,094 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 14:44:37,212 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 14:44:37,328 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 14:44:37,329 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 14:44:37,381 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 14:44:37,431 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 14:44:37,477 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 14:44:37,478 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 14:44:37,478 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 14:44:37,478 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 14:44:37,479 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 14:44:37,479 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 14:44:37,479 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 14:44:37,480 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 14:44:37,958 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 14:44:39,029 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 14:44:39,029 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 14:44:39,030 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 14:44:39,030 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 14:44:39,383 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 14:44:39,713 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 14:44:39,714 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 14:44:39,885 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 14:44:39,934 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 14:44:39,983 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 14:44:39,984 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 14:44:39,984 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 14:44:39,984 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 14:44:39,985 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 14:44:39,985 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 14:44:39,985 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 14:44:39,985 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 14:44:40,937 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 14:44:42,047 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 14:44:42,047 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 14:44:42,047 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 14:44:42,048 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 14:44:42,414 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 14:44:42,770 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 14:44:42,770 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 14:44:42,975 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 14:44:43,024 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 14:44:43,073 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 14:44:43,073 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 14:44:43,073 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 14:44:48,617 - test_advanced_rstp_mechanisms - INFO - 可用端口: ['enp1s0']
2025-09-09 14:44:48,617 - test_advanced_rstp_mechanisms - INFO - 选择端口enp1s0作为边缘端口测试
2025-09-09 14:44:48,677 - test_advanced_rstp_mechanisms - INFO - 测试边缘端口立即转发特性
2025-09-09 14:44:51,369 - test_advanced_rstp_mechanisms - INFO - 边缘端口状态转换时间: 2.64秒
2025-09-09 14:44:51,369 - test_advanced_rstp_mechanisms - INFO - ✓ 边缘端口转换时间合理
2025-09-09 14:44:51,382 - test_advanced_rstp_mechanisms - INFO - ✓ 边缘端口状态变化未产生TCN
2025-09-09 14:44:51,383 - test_advanced_rstp_mechanisms - INFO - 测试边缘端口收到BPDU后的行为
2025-09-09 14:44:51,438 - test_advanced_rstp_mechanisms - INFO - 边缘端口状态: 1
1
normal
2025-09-09 14:44:51,438 - test_advanced_rstp_mechanisms - INFO - 边缘端口行为测试通过
2025-09-09 14:44:51,440 - RSTPTest - INFO - 测试完成: test_edge_port_behavior (耗时: 15.06秒)
2025-09-09 14:44:51,440 - RSTPTest - INFO - ============================================================

2025-09-09 14:44:51,441 - RSTPTest - INFO - ============================================================
2025-09-09 14:44:51,441 - RSTPTest - INFO - 开始测试: test_shared_vs_point_to_point_links
2025-09-09 14:44:51,442 - RSTPTest - INFO - ============================================================
2025-09-09 14:44:51,442 - test_advanced_rstp_mechanisms - INFO - 开始测试不同链路类型的行为差异
2025-09-09 14:44:51,442 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 14:44:51,443 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 14:44:51,443 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 14:44:51,443 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 14:44:51,443 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 14:44:51,443 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 14:44:51,443 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 14:44:51,443 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 14:44:51,753 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 14:44:52,146 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 14:44:52,147 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 14:44:52,148 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 14:44:52,149 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 14:44:52,266 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 14:44:52,385 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 14:44:52,385 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 14:44:52,442 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 14:44:52,491 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 14:44:52,538 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 14:44:52,539 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 14:44:52,539 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 14:44:52,539 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 14:44:52,539 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 14:44:52,540 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 14:44:52,540 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 14:44:52,540 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 14:44:56,234 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 14:44:57,311 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 14:44:57,311 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 14:44:57,312 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 14:44:57,312 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 14:44:57,666 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 14:44:57,985 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 14:44:57,986 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 14:44:58,173 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 14:44:58,222 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 14:44:58,270 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 14:44:58,271 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 14:44:58,271 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 14:44:58,271 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 14:44:58,271 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 14:44:58,271 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 14:44:58,272 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 14:44:58,272 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 14:44:58,722 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 14:44:59,792 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 14:44:59,792 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 14:44:59,793 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 14:44:59,793 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 14:45:00,155 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 14:45:00,524 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 14:45:00,525 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 14:45:00,689 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 14:45:00,738 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 14:45:00,785 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 14:45:00,786 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 14:45:00,786 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 14:45:05,800 - test_advanced_rstp_mechanisms - INFO - 检测到的链路类型: {}
2025-09-09 14:45:05,801 - test_advanced_rstp_mechanisms - INFO - 测试点对点链路收敛性能
2025-09-09 14:45:05,813 - RSTPTest - INFO - 测试完成: test_shared_vs_point_to_point_links (耗时: 14.37秒)
2025-09-09 14:45:05,813 - RSTPTest - INFO - ============================================================

2025-09-09 14:45:05,814 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 14:45:05,814 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 14:45:05,814 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 14:45:05,960 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 14:45:05,960 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 14:45:06,088 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 14:45:06,088 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 14:45:06,205 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 14:45:06,206 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 14:45:06,206 - RSTPTest - INFO - ============================================================
2025-09-09 14:45:06,206 - RSTPTest - INFO - 开始测试: test_backup_port_concept_verification
2025-09-09 14:45:06,207 - RSTPTest - INFO - ============================================================
2025-09-09 14:45:06,208 - test_backup_port_simulation - INFO - 开始备份端口概念验证测试
2025-09-09 14:45:06,208 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 14:45:06,208 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 14:45:06,208 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 14:45:06,208 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 14:45:06,209 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 14:45:06,209 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 14:45:06,209 - NetworkTopology - INFO - DUT: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 14:45:06,209 - NetworkTopology - INFO - DUT: 检查mstpd支持...
2025-09-09 14:45:06,214 - NetworkTopology - INFO - DUT: mstpd检查结果: code=1
2025-09-09 14:45:06,215 - NetworkTopology - INFO - DUT: 检查iproute2支持...
2025-09-09 14:45:06,262 - NetworkTopology - INFO - DUT: ip命令检查: code=0
2025-09-09 14:45:06,263 - NetworkTopology - INFO - DUT: 使用iproute2配置RSTP
2025-09-09 14:45:06,263 - NetworkTopology - INFO - DUT: 最终选择RSTP方法: iproute2
2025-09-09 14:45:06,263 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 14:45:06,263 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 14:45:06,572 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 14:45:06,966 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 14:45:06,966 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 14:45:06,966 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 14:45:06,967 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 14:45:07,084 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 14:45:07,200 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 14:45:07,201 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 14:45:07,257 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 14:45:07,306 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 14:45:07,354 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 14:45:07,355 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 14:45:07,355 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 14:45:07,355 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 14:45:07,355 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 14:45:07,356 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 14:45:07,356 - NetworkTopology - INFO - TestNode1: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 14:45:07,356 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 14:45:07,363 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 14:45:07,364 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 14:45:07,488 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=1, output=
2025-09-09 14:45:07,489 - NetworkTopology - INFO - TestNode1: 尝试启动mstpd服务...
2025-09-09 14:45:07,669 - NetworkTopology - INFO - TestNode1: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 14:45:09,764 - NetworkTopology - INFO - TestNode1: mstpd启动后状态: code=1
2025-09-09 14:45:09,765 - NetworkTopology - INFO - TestNode1: mstpd启动失败，使用iproute2
2025-09-09 14:45:09,765 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: iproute2
2025-09-09 14:45:09,765 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 14:45:09,765 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 14:45:10,308 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 14:45:11,456 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 14:45:11,456 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 14:45:11,456 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 14:45:11,456 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 14:45:11,818 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 14:45:12,169 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 14:45:12,170 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 14:45:12,334 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 14:45:12,382 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 14:45:12,430 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 14:45:12,430 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 14:45:12,430 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 14:45:12,431 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 14:45:12,431 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 14:45:12,431 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 14:45:12,431 - NetworkTopology - INFO - TestNode2: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 14:45:12,431 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 14:45:12,439 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 14:45:12,440 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 14:45:12,581 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=1, output=
2025-09-09 14:45:12,581 - NetworkTopology - INFO - TestNode2: 尝试启动mstpd服务...
2025-09-09 14:45:12,760 - NetworkTopology - INFO - TestNode2: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 14:45:14,846 - NetworkTopology - INFO - TestNode2: mstpd启动后状态: code=1
2025-09-09 14:45:14,847 - NetworkTopology - INFO - TestNode2: mstpd启动失败，使用iproute2
2025-09-09 14:45:14,847 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: iproute2
2025-09-09 14:45:14,847 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 14:45:14,847 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 14:45:15,383 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 14:45:16,452 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 14:45:16,452 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 14:45:16,453 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 14:45:16,453 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 14:45:16,774 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 14:45:17,131 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 14:45:17,131 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 14:45:17,313 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 14:45:17,360 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 14:45:17,410 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 14:45:17,410 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 14:45:17,411 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 14:45:27,476 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 14:45:27,499 - RSTPTest - INFO - 测试完成: test_backup_port_concept_verification (耗时: 21.29秒)
2025-09-09 14:45:27,499 - RSTPTest - INFO - ============================================================

2025-09-09 14:45:27,502 - RSTPTest - INFO - ============================================================
2025-09-09 14:45:27,502 - RSTPTest - INFO - 开始测试: test_shared_medium_simulation_attempt
2025-09-09 14:45:27,502 - RSTPTest - INFO - ============================================================
2025-09-09 14:45:27,502 - test_backup_port_simulation - INFO - 开始共享介质模拟尝试
2025-09-09 14:45:27,503 - test_backup_port_simulation - INFO - === 尝试创建共享介质模拟场景 ===
2025-09-09 14:45:27,503 - test_backup_port_simulation - INFO - 创建中心交换机模拟共享介质...
2025-09-09 14:45:27,503 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 14:45:27,503 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 14:45:27,503 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 14:45:27,503 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 14:45:27,503 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 14:45:27,504 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 14:45:27,504 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 14:45:27,504 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 14:45:27,796 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 14:45:28,192 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 14:45:28,192 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 14:45:28,193 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 14:45:28,193 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 14:45:28,312 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 14:45:28,428 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 14:45:28,428 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 14:45:28,480 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 14:45:28,529 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 14:45:28,577 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 14:45:28,577 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 14:45:28,577 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 14:45:28,577 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 14:45:28,578 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 14:45:28,578 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 14:45:28,578 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 14:45:28,578 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 14:45:29,065 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 14:45:30,132 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 14:45:30,132 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 14:45:30,132 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 14:45:30,132 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 14:45:30,471 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 14:45:30,796 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 14:45:30,797 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 14:45:30,973 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 14:45:31,022 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 14:45:31,069 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 14:45:31,069 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 14:45:31,070 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 14:45:31,070 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 14:45:31,070 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 14:45:31,070 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 14:45:31,070 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 14:45:31,070 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 14:45:31,567 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 14:45:32,666 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 14:45:32,667 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 14:45:32,667 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 14:45:32,667 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 14:45:33,007 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 14:45:33,335 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 14:45:33,335 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 14:45:33,504 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 14:45:33,550 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 14:45:33,598 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 14:45:33,598 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 14:45:33,599 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 14:45:43,664 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 14:45:43,664 - test_backup_port_simulation - WARNING - 共享介质模拟过程中出现异常: BridgeInfo.__init__() missing 3 required positional arguments: 'root_port', 'protocol_version', and 'ports'
2025-09-09 14:45:43,665 - test_backup_port_simulation - INFO - 这是预期的，因为当前测试框架不支持真正的共享介质拓扑
2025-09-09 14:45:43,666 - RSTPTest - INFO - 测试完成: test_shared_medium_simulation_attempt (耗时: 16.16秒)
2025-09-09 14:45:43,666 - RSTPTest - INFO - ============================================================

2025-09-09 14:45:43,667 - RSTPTest - INFO - ============================================================
2025-09-09 14:45:43,667 - RSTPTest - INFO - 开始测试: test_backup_port_documentation_verification
2025-09-09 14:45:43,668 - RSTPTest - INFO - ============================================================
2025-09-09 14:45:43,668 - test_backup_port_simulation - INFO - 开始备份端口文档验证
2025-09-09 14:45:43,668 - test_backup_port_simulation - INFO - ✓ PortRole.BACKUP 存在
2025-09-09 14:45:43,668 - test_backup_port_simulation - INFO - === 备份端口理论特性验证 ===
2025-09-09 14:45:43,669 - test_backup_port_simulation - INFO - purpose: 为共享介质网段提供冗余
2025-09-09 14:45:43,669 - test_backup_port_simulation - INFO - difference_from_alternate: 备份端口是同一交换机上指定端口的备份，而备用端口是不同交换机提供的路径
2025-09-09 14:45:43,669 - test_backup_port_simulation - INFO - state: Discarding
2025-09-09 14:45:43,669 - test_backup_port_simulation - INFO - scenario: 出现在连接到集线器或共享介质的场景中
2025-09-09 14:45:43,670 - test_backup_port_simulation - INFO - fast_transition: 当对应的指定端口失效时，可以快速转换为指定端口
2025-09-09 14:45:43,670 - test_backup_port_simulation - INFO - === 端口角色对比 ===
2025-09-09 14:45:43,670 - test_backup_port_simulation - INFO - root: 连接到根桥的最佳路径
2025-09-09 14:45:43,670 - test_backup_port_simulation - INFO - designated: 为网段提供转发服务
2025-09-09 14:45:43,670 - test_backup_port_simulation - INFO - alternate: 提供到根桥的备用路径（来自其他交换机）
2025-09-09 14:45:43,671 - test_backup_port_simulation - INFO - backup: 同一交换机上指定端口的备份（共享介质场景）
2025-09-09 14:45:43,671 - test_backup_port_simulation - INFO - === 测试覆盖率分析 ===
2025-09-09 14:45:43,671 - test_backup_port_simulation - INFO - 已覆盖: Root Port, Designated Port, Alternate Port, Disabled Port
2025-09-09 14:45:43,671 - test_backup_port_simulation - INFO - 部分覆盖: Backup Port (概念验证)
2025-09-09 14:45:43,671 - test_backup_port_simulation - INFO - 覆盖限制: 测试框架无法创建真正的共享介质拓扑
2025-09-09 14:45:43,671 - test_backup_port_simulation - INFO - 建议: 在实际部署环境中使用集线器或配置交换机共享模式进行完整测试
2025-09-09 14:45:43,672 - test_backup_port_simulation - INFO - 备份端口文档验证完成
2025-09-09 14:45:43,672 - RSTPTest - INFO - 测试完成: test_backup_port_documentation_verification (耗时: 0.00秒)
2025-09-09 14:45:43,672 - RSTPTest - INFO - ============================================================

2025-09-09 14:45:43,673 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 14:45:43,673 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 14:45:43,673 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 14:45:43,811 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 14:45:43,811 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 14:45:43,936 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 14:45:43,936 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 14:45:44,066 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 14:45:44,067 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 14:45:44,067 - RSTPTest - INFO - ============================================================
2025-09-09 14:45:44,067 - RSTPTest - INFO - 开始测试: test_direct_link_failure
2025-09-09 14:45:44,068 - RSTPTest - INFO - ============================================================
2025-09-09 14:45:44,069 - test_convergence - INFO - 开始直接链路故障测试
2025-09-09 14:45:44,069 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 14:45:44,069 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 14:45:44,069 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 14:45:44,070 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 14:45:44,070 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 14:45:44,070 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 14:45:44,070 - NetworkTopology - INFO - DUT: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 14:45:44,070 - NetworkTopology - INFO - DUT: 检查mstpd支持...
2025-09-09 14:45:44,076 - NetworkTopology - INFO - DUT: mstpd检查结果: code=1
2025-09-09 14:45:44,076 - NetworkTopology - INFO - DUT: 检查iproute2支持...
2025-09-09 14:45:44,125 - NetworkTopology - INFO - DUT: ip命令检查: code=0
2025-09-09 14:45:44,125 - NetworkTopology - INFO - DUT: 使用iproute2配置RSTP
2025-09-09 14:45:44,125 - NetworkTopology - INFO - DUT: 最终选择RSTP方法: iproute2
2025-09-09 14:45:44,125 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 14:45:44,126 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 14:45:44,440 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 14:45:44,835 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 14:45:44,836 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 14:45:44,836 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 14:45:44,836 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 14:45:44,952 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 14:45:45,072 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 14:45:45,072 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 14:45:45,129 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 14:45:45,177 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 14:45:45,225 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 14:45:45,225 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 14:45:45,225 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 14:45:45,225 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 14:45:45,226 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 14:45:45,226 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 14:45:45,226 - NetworkTopology - INFO - TestNode1: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 14:45:45,226 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 14:45:45,234 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 14:45:45,234 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 14:45:45,371 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=1, output=
2025-09-09 14:45:45,371 - NetworkTopology - INFO - TestNode1: 尝试启动mstpd服务...
2025-09-09 14:45:45,524 - NetworkTopology - INFO - TestNode1: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 14:45:47,610 - NetworkTopology - INFO - TestNode1: mstpd启动后状态: code=1
2025-09-09 14:45:47,611 - NetworkTopology - INFO - TestNode1: mstpd启动失败，使用iproute2
2025-09-09 14:45:47,611 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: iproute2
2025-09-09 14:45:47,611 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 14:45:47,611 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 14:45:48,204 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 14:45:49,287 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 14:45:49,287 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 14:45:49,287 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 14:45:49,288 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 14:45:49,645 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 14:45:49,967 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 14:45:49,967 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 14:45:50,145 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 14:45:50,193 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 14:45:50,241 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 14:45:50,242 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 14:45:50,242 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 14:45:50,242 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 14:45:50,242 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 14:45:50,243 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 14:45:50,243 - NetworkTopology - INFO - TestNode2: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 14:45:50,243 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 14:45:50,250 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 14:45:50,251 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 14:45:50,384 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=1, output=
2025-09-09 14:45:50,385 - NetworkTopology - INFO - TestNode2: 尝试启动mstpd服务...
2025-09-09 14:45:50,549 - NetworkTopology - INFO - TestNode2: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 14:45:52,650 - NetworkTopology - INFO - TestNode2: mstpd启动后状态: code=1
2025-09-09 14:45:52,651 - NetworkTopology - INFO - TestNode2: mstpd启动失败，使用iproute2
2025-09-09 14:45:52,651 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: iproute2
2025-09-09 14:45:52,651 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 14:45:52,651 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 14:45:53,182 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 14:45:54,292 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 14:45:54,293 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 14:45:54,293 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 14:45:54,293 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 14:45:54,653 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 14:45:54,976 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 14:45:54,976 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 14:45:55,155 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 14:45:55,202 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 14:45:55,251 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 14:45:55,251 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 14:45:55,252 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 14:45:55,532 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 14:45:55,596 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 14:45:55,631 - RSTPTest - INFO - 测试完成: test_direct_link_failure (耗时: 11.56秒)
2025-09-09 14:45:55,631 - RSTPTest - INFO - ============================================================

2025-09-09 14:45:55,792 - RSTPTest - INFO - ============================================================
2025-09-09 14:45:55,793 - RSTPTest - INFO - 开始测试: test_multiple_link_failures
2025-09-09 14:45:55,793 - RSTPTest - INFO - ============================================================
2025-09-09 14:45:55,794 - test_convergence - INFO - 开始多重链路故障测试
2025-09-09 14:45:55,794 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 14:45:55,794 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 14:45:55,794 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 14:45:55,794 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 14:45:55,795 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 14:45:55,795 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 14:45:55,795 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 14:45:55,795 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 14:45:56,092 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 14:45:56,489 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 14:45:56,490 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 14:45:56,490 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 14:45:56,490 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 14:45:56,608 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 14:45:56,729 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 14:45:56,730 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 14:45:56,784 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 14:45:56,833 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 14:45:56,881 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 14:45:56,881 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 14:45:56,881 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 14:45:56,881 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 14:45:56,881 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 14:45:56,882 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 14:45:56,882 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 14:45:56,882 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 14:45:57,391 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 14:45:58,468 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 14:45:58,468 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 14:45:58,469 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 14:45:58,469 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 14:45:58,816 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 14:45:59,180 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 14:45:59,180 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 14:45:59,342 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 14:45:59,391 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 14:45:59,439 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 14:45:59,439 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 14:45:59,439 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 14:45:59,439 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 14:45:59,440 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 14:45:59,440 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 14:45:59,440 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 14:45:59,440 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 14:45:59,987 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 14:46:01,085 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 14:46:01,085 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 14:46:01,085 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 14:46:01,086 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 14:46:01,407 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 14:46:02,131 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 14:46:02,131 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 14:46:02,308 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 14:46:02,355 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 14:46:02,403 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 14:46:02,404 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 14:46:02,404 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 14:46:02,404 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 14:46:02,467 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 14:46:02,492 - RSTPTest - INFO - 测试完成: test_multiple_link_failures (耗时: 6.70秒)
2025-09-09 14:46:02,492 - RSTPTest - INFO - ============================================================

2025-09-09 14:46:02,494 - RSTPTest - INFO - ============================================================
2025-09-09 14:46:02,494 - RSTPTest - INFO - 开始测试: test_convergence_with_traffic
2025-09-09 14:46:02,494 - RSTPTest - INFO - ============================================================
2025-09-09 14:46:02,495 - test_convergence - INFO - 开始带流量的收敛测试
2025-09-09 14:46:02,495 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 14:46:02,495 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 14:46:02,496 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 14:46:02,496 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 14:46:02,496 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 14:46:02,496 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 14:46:02,496 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 14:46:02,496 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 14:46:02,804 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 14:46:03,196 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 14:46:03,196 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 14:46:03,196 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 14:46:03,196 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 14:46:03,316 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 14:46:03,436 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 14:46:03,436 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 14:46:03,492 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 14:46:03,541 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 14:46:03,589 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 14:46:03,589 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 14:46:03,589 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 14:46:03,589 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 14:46:03,590 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 14:46:03,590 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 14:46:03,590 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 14:46:03,590 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 14:46:04,096 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 14:46:05,178 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 14:46:05,178 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 14:46:05,178 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 14:46:05,179 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 14:46:05,505 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 14:46:05,824 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 14:46:05,824 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 14:46:05,984 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 14:46:06,032 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 14:46:06,080 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 14:46:06,081 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 14:46:06,081 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 14:46:06,081 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 14:46:06,081 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 14:46:06,081 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 14:46:06,081 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 14:46:06,082 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 14:46:06,566 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 14:46:07,657 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 14:46:07,657 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 14:46:07,658 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 14:46:07,658 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 14:46:08,008 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 14:46:08,366 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 14:46:08,366 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 14:46:08,543 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 14:46:08,590 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 14:46:08,638 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 14:46:08,638 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 14:46:08,638 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 14:46:14,744 - TrafficGenerator - INFO - 启动iperf3服务器: 192.168.184.129:5201
2025-09-09 14:46:16,817 - TrafficGenerator - ERROR - iperf3服务器启动失败
2025-09-09 14:46:19,745 - TrafficGenerator - INFO - 启动iperf3客户端: -> 192.168.184.129:5201
2025-09-09 14:46:19,745 - TrafficGenerator - INFO - iperf3客户端已启动 (udp, 100M)
2025-09-09 14:46:24,746 - FaultInjector_DUT - INFO - 断开链路: eth0
2025-09-09 14:46:24,824 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth0 (code=1)，将在逻辑上标记为已断开
2025-09-09 14:46:34,825 - test_convergence - INFO - 丢包数: 0
2025-09-09 14:46:34,825 - test_convergence - INFO - 估计中断时间: 0.000秒
2025-09-09 14:46:34,826 - TrafficGenerator - INFO - 停止流量生成
2025-09-09 14:46:36,880 - test_convergence - INFO - 带流量的收敛测试通过
2025-09-09 14:46:36,880 - RSTPTest - INFO - 测试完成: test_convergence_with_traffic (耗时: 34.39秒)
2025-09-09 14:46:36,881 - RSTPTest - INFO - ============================================================

2025-09-09 14:46:36,881 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 14:46:36,882 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 14:46:36,882 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 14:46:37,026 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 14:46:37,027 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 14:46:37,153 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 14:46:37,154 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 14:46:37,284 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 14:46:37,285 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 14:46:37,285 - RSTPTest - INFO - ============================================================
2025-09-09 14:46:37,286 - RSTPTest - INFO - 开始测试: test_backup_port_simulation
2025-09-09 14:46:37,286 - RSTPTest - INFO - ============================================================
2025-09-09 14:46:37,287 - test_enhanced_rstp_coverage - INFO - 开始备份端口模拟测试
2025-09-09 14:46:37,287 - test_enhanced_rstp_coverage - INFO - 创建模拟共享网段拓扑
2025-09-09 14:46:37,729 - test_enhanced_rstp_coverage - INFO - ✓ 创建连接: rstp0:dut_port1 <-> shared_segment:shared_port1
2025-09-09 14:46:38,098 - test_enhanced_rstp_coverage - INFO - ✓ 创建连接: rstp0:dut_port2 <-> shared_segment:shared_port2
2025-09-09 14:46:38,729 - test_enhanced_rstp_coverage - INFO - ✓ 创建远程交换机: remote_switch
2025-09-09 14:46:38,730 - test_enhanced_rstp_coverage - INFO - 等待RSTP收敛...
2025-09-09 14:46:53,794 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 14:46:53,823 - RSTPTest - INFO - 测试完成: test_backup_port_simulation (耗时: 16.54秒)
2025-09-09 14:46:53,823 - RSTPTest - INFO - ============================================================

2025-09-09 14:46:53,825 - RSTPTest - INFO - ============================================================
2025-09-09 14:46:53,825 - RSTPTest - INFO - 开始测试: test_comprehensive_port_state_transitions
2025-09-09 14:46:53,826 - RSTPTest - INFO - ============================================================
2025-09-09 14:46:53,826 - test_enhanced_rstp_coverage - INFO - 开始全面端口状态转换测试
2025-09-09 14:46:53,827 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 14:46:53,827 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 14:46:53,827 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 14:46:53,827 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 14:46:53,828 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 14:46:53,828 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 14:46:53,828 - NetworkTopology - INFO - DUT: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 14:46:53,828 - NetworkTopology - INFO - DUT: 检查mstpd支持...
2025-09-09 14:46:53,840 - NetworkTopology - INFO - DUT: mstpd检查结果: code=1
2025-09-09 14:46:53,840 - NetworkTopology - INFO - DUT: 检查iproute2支持...
2025-09-09 14:46:53,888 - NetworkTopology - INFO - DUT: ip命令检查: code=0
2025-09-09 14:46:53,889 - NetworkTopology - INFO - DUT: 使用iproute2配置RSTP
2025-09-09 14:46:53,889 - NetworkTopology - INFO - DUT: 最终选择RSTP方法: iproute2
2025-09-09 14:46:53,889 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 14:46:53,889 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 14:46:54,192 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 14:46:54,589 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 14:46:54,589 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 14:46:54,589 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 14:46:54,589 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 14:46:54,713 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 14:46:54,835 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 14:46:54,836 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 14:46:54,892 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 14:46:54,941 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 14:46:54,988 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 14:46:54,988 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 14:46:54,988 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 14:46:54,988 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 14:46:54,988 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 14:46:54,988 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 14:46:54,989 - NetworkTopology - INFO - TestNode1: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 14:46:54,989 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 14:46:54,997 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 14:46:54,997 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 14:46:55,127 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=1, output=
2025-09-09 14:46:55,128 - NetworkTopology - INFO - TestNode1: 尝试启动mstpd服务...
2025-09-09 14:46:55,295 - NetworkTopology - INFO - TestNode1: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 14:46:57,379 - NetworkTopology - INFO - TestNode1: mstpd启动后状态: code=1
2025-09-09 14:46:57,380 - NetworkTopology - INFO - TestNode1: mstpd启动失败，使用iproute2
2025-09-09 14:46:57,380 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: iproute2
2025-09-09 14:46:57,380 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 14:46:57,380 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 14:46:57,919 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 14:46:59,061 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 14:46:59,061 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 14:46:59,062 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 14:46:59,062 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 14:46:59,406 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 14:46:59,754 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 14:46:59,755 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 14:46:59,926 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 14:46:59,973 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 14:47:00,021 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 14:47:00,021 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 14:47:00,022 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 14:47:00,022 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 14:47:00,022 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 14:47:00,023 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 14:47:00,023 - NetworkTopology - INFO - TestNode2: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 14:47:00,023 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 14:47:00,031 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 14:47:00,032 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 14:47:00,140 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=1, output=
2025-09-09 14:47:00,140 - NetworkTopology - INFO - TestNode2: 尝试启动mstpd服务...
2025-09-09 14:47:00,312 - NetworkTopology - INFO - TestNode2: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 14:47:02,406 - NetworkTopology - INFO - TestNode2: mstpd启动后状态: code=1
2025-09-09 14:47:02,407 - NetworkTopology - INFO - TestNode2: mstpd启动失败，使用iproute2
2025-09-09 14:47:02,407 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: iproute2
2025-09-09 14:47:02,407 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 14:47:02,407 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 14:47:02,944 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 14:47:04,051 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 14:47:04,052 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 14:47:04,052 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 14:47:04,052 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 14:47:04,803 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 14:47:05,132 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 14:47:05,133 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 14:47:05,298 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 14:47:05,346 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 14:47:05,394 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 14:47:05,395 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 14:47:05,395 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 14:47:05,534 - test_enhanced_rstp_coverage - INFO - 等待初始收敛...
2025-09-09 14:47:05,535 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 14:47:05,638 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 14:47:05,671 - RSTPTest - INFO - 测试完成: test_comprehensive_port_state_transitions (耗时: 11.85秒)
2025-09-09 14:47:05,672 - RSTPTest - INFO - ============================================================

2025-09-09 14:47:05,674 - RSTPTest - INFO - ============================================================
2025-09-09 14:47:05,674 - RSTPTest - INFO - 开始测试: test_detailed_bpdu_analysis
2025-09-09 14:47:05,674 - RSTPTest - INFO - ============================================================
2025-09-09 14:47:05,675 - test_enhanced_rstp_coverage - INFO - 开始详细BPDU分析测试
2025-09-09 14:47:05,675 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 14:47:05,676 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 14:47:05,676 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 14:47:05,676 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 14:47:05,676 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 14:47:05,677 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 14:47:05,677 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 14:47:05,677 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 14:47:05,951 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 14:47:06,348 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 14:47:06,348 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 14:47:06,348 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 14:47:06,349 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 14:47:06,467 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 14:47:06,587 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 14:47:06,588 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 14:47:06,643 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 14:47:06,692 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 14:47:06,740 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 14:47:06,740 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 14:47:06,740 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 14:47:06,741 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 14:47:06,741 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 14:47:06,741 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 14:47:06,741 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 14:47:06,741 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 14:47:07,226 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 14:47:08,322 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 14:47:08,323 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 14:47:08,323 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 14:47:08,323 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 14:47:08,663 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 14:47:08,999 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 14:47:08,999 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 14:47:09,167 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 14:47:09,215 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 14:47:09,263 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 14:47:09,263 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 14:47:09,264 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 14:47:09,264 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 14:47:09,264 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 14:47:09,264 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 14:47:09,264 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 14:47:09,265 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 14:47:09,761 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 14:47:10,853 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 14:47:10,853 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 14:47:10,853 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 14:47:10,853 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 14:47:11,208 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 14:47:11,568 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 14:47:11,569 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 14:47:11,744 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 14:47:11,791 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 14:47:11,840 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 14:47:11,840 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 14:47:11,840 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 14:47:12,109 - test_enhanced_rstp_coverage - INFO - 等待RSTP收敛...
2025-09-09 14:47:12,109 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 14:47:12,174 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 14:47:12,206 - RSTPTest - INFO - 测试完成: test_detailed_bpdu_analysis (耗时: 6.53秒)
2025-09-09 14:47:12,206 - RSTPTest - INFO - ============================================================

2025-09-09 14:47:12,209 - RSTPTest - INFO - ============================================================
2025-09-09 14:47:12,209 - RSTPTest - INFO - 开始测试: test_topology_change_comprehensive
2025-09-09 14:47:12,209 - RSTPTest - INFO - ============================================================
2025-09-09 14:47:12,210 - test_enhanced_rstp_coverage - INFO - 开始全面拓扑变更测试
2025-09-09 14:47:12,210 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 14:47:12,210 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 14:47:12,210 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 14:47:12,210 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 14:47:12,210 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 14:47:12,210 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 14:47:12,211 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 14:47:12,211 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 14:47:12,466 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 14:47:12,864 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 14:47:12,864 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 14:47:12,864 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 14:47:12,865 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 14:47:12,982 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 14:47:13,098 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 14:47:13,099 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 14:47:13,155 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 14:47:13,204 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 14:47:13,251 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 14:47:13,252 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 14:47:13,252 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 14:47:13,252 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 14:47:13,253 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 14:47:13,253 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 14:47:13,253 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 14:47:13,253 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 14:47:13,739 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 14:47:14,810 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 14:47:14,811 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 14:47:14,811 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 14:47:14,811 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 14:47:15,157 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 14:47:15,507 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 14:47:15,507 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 14:47:15,680 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 14:47:15,728 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 14:47:15,777 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 14:47:15,777 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 14:47:15,777 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 14:47:15,777 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 14:47:15,778 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 14:47:15,778 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 14:47:15,778 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 14:47:15,778 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 14:47:16,304 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 14:47:17,378 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 14:47:17,378 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 14:47:17,379 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 14:47:17,379 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 14:47:17,703 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 14:47:18,047 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 14:47:18,047 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 14:47:18,310 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 14:47:18,357 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 14:47:18,404 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 14:47:18,404 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 14:47:18,405 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 14:47:18,556 - test_enhanced_rstp_coverage - INFO - 等待初始收敛...
2025-09-09 14:47:18,557 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 14:47:18,662 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 14:47:18,694 - RSTPTest - INFO - 测试完成: test_topology_change_comprehensive (耗时: 6.48秒)
2025-09-09 14:47:18,694 - RSTPTest - INFO - ============================================================

2025-09-09 14:47:18,695 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 14:47:18,696 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 14:47:18,696 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 14:47:18,849 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 14:47:18,850 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 14:47:18,976 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 14:47:18,976 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 14:47:19,096 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 14:47:19,096 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 14:47:19,097 - RSTPTest - INFO - ============================================================
2025-09-09 14:47:19,097 - RSTPTest - INFO - 开始测试: test_rstp_reconvergence_no_switchover
2025-09-09 14:47:19,097 - RSTPTest - INFO - ============================================================
2025-09-09 14:47:19,098 - test_high_availability - INFO - 开始RSTP重构误判测试
2025-09-09 14:47:19,098 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 14:47:19,098 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 14:47:19,099 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 14:47:19,099 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 14:47:19,099 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 14:47:19,099 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 14:47:19,099 - NetworkTopology - INFO - DUT: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 14:47:19,099 - NetworkTopology - INFO - DUT: 检查mstpd支持...
2025-09-09 14:47:19,105 - NetworkTopology - INFO - DUT: mstpd检查结果: code=1
2025-09-09 14:47:19,106 - NetworkTopology - INFO - DUT: 检查iproute2支持...
2025-09-09 14:47:19,156 - NetworkTopology - INFO - DUT: ip命令检查: code=0
2025-09-09 14:47:19,156 - NetworkTopology - INFO - DUT: 使用iproute2配置RSTP
2025-09-09 14:47:19,156 - NetworkTopology - INFO - DUT: 最终选择RSTP方法: iproute2
2025-09-09 14:47:19,156 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 14:47:19,157 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 14:47:19,459 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 14:47:19,851 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 14:47:19,851 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 14:47:19,851 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 14:47:19,851 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 14:47:19,971 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 14:47:20,091 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 14:47:20,091 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 14:47:20,147 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 14:47:20,196 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 14:47:20,244 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 14:47:20,244 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 14:47:20,245 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 14:47:20,245 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 14:47:20,245 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 14:47:20,245 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 14:47:20,245 - NetworkTopology - INFO - TestNode1: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 14:47:20,246 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 14:47:20,253 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 14:47:20,253 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 14:47:20,370 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=1, output=
2025-09-09 14:47:20,370 - NetworkTopology - INFO - TestNode1: 尝试启动mstpd服务...
2025-09-09 14:47:20,546 - NetworkTopology - INFO - TestNode1: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 14:47:22,642 - NetworkTopology - INFO - TestNode1: mstpd启动后状态: code=1
2025-09-09 14:47:22,642 - NetworkTopology - INFO - TestNode1: mstpd启动失败，使用iproute2
2025-09-09 14:47:22,643 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: iproute2
2025-09-09 14:47:22,643 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 14:47:22,643 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 14:47:23,146 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 14:47:24,207 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 14:47:24,208 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 14:47:24,208 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 14:47:24,209 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 14:47:24,548 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 14:47:24,886 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 14:47:24,886 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 14:47:25,046 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 14:47:25,096 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 14:47:25,145 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 14:47:25,146 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 14:47:25,146 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 14:47:25,146 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 14:47:25,147 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 14:47:25,147 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 14:47:25,147 - NetworkTopology - INFO - TestNode2: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 14:47:25,147 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 14:47:25,154 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 14:47:25,155 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 14:47:25,321 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=1, output=
2025-09-09 14:47:25,321 - NetworkTopology - INFO - TestNode2: 尝试启动mstpd服务...
2025-09-09 14:47:25,509 - NetworkTopology - INFO - TestNode2: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 14:47:27,591 - NetworkTopology - INFO - TestNode2: mstpd启动后状态: code=1
2025-09-09 14:47:27,591 - NetworkTopology - INFO - TestNode2: mstpd启动失败，使用iproute2
2025-09-09 14:47:27,592 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: iproute2
2025-09-09 14:47:27,592 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 14:47:27,592 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 14:47:28,116 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 14:47:29,212 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 14:47:29,212 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 14:47:29,212 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 14:47:29,212 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 14:47:29,572 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 14:47:29,930 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 14:47:29,931 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 14:47:30,113 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 14:47:30,161 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 14:47:30,209 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 14:47:30,209 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 14:47:30,209 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 14:47:35,215 - test_high_availability - INFO - 初始HA状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-09 14:47:35,216 - test_high_availability - INFO - 在远端触发RSTP重构...
2025-09-09 14:47:35,216 - FaultInjector_TestNode2 - INFO - 断开链路: eth0
2025-09-09 14:47:35,389 - FaultInjector_TestNode2 - INFO - 链路已断开: eth0
2025-09-09 14:47:45,394 - test_high_availability - INFO - RSTP重构后HA状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-09 14:47:45,394 - FaultInjector_TestNode2 - INFO - 恢复链路: eth0
2025-09-09 14:47:45,520 - FaultInjector_TestNode2 - INFO - 链路已恢复: eth0
2025-09-09 14:47:45,520 - test_high_availability - INFO - RSTP重构误判测试完成
2025-09-09 14:47:45,521 - RSTPTest - INFO - 测试完成: test_rstp_reconvergence_no_switchover (耗时: 26.42秒)
2025-09-09 14:47:45,521 - RSTPTest - INFO - ============================================================

2025-09-09 14:47:45,523 - RSTPTest - INFO - ============================================================
2025-09-09 14:47:45,523 - RSTPTest - INFO - 开始测试: test_split_brain_scenario
2025-09-09 14:47:45,524 - RSTPTest - INFO - ============================================================
2025-09-09 14:47:45,524 - test_high_availability - INFO - 开始裂脑场景测试
2025-09-09 14:47:45,529 - test_high_availability - INFO - 初始状态: {'role': 'unknown', 'state': 'unknown', 'peer': 'unknown'}
2025-09-09 14:47:45,529 - test_high_availability - INFO - 断开同步链路: eth3
2025-09-09 14:47:45,530 - FaultInjector_DUT - INFO - 断开链路: eth3
2025-09-09 14:47:45,647 - FaultInjector_DUT - WARNING - 无法实际断开链路 eth3 (code=1)，将在逻辑上标记为已断开
2025-09-09 14:47:55,648 - test_high_availability - WARNING - 裂脑测试需要访问两个控制器
2025-09-09 14:47:55,649 - FaultInjector_DUT - INFO - 恢复链路: eth3
2025-09-09 14:47:55,726 - FaultInjector_DUT - WARNING - 无法实际恢复链路 eth3 (code=1)，将在逻辑上标记为已恢复
2025-09-09 14:47:55,726 - test_high_availability - INFO - 裂脑场景测试完成
2025-09-09 14:47:55,727 - RSTPTest - INFO - 测试完成: test_split_brain_scenario (耗时: 10.20秒)
2025-09-09 14:47:55,727 - RSTPTest - INFO - ============================================================

2025-09-09 14:47:55,731 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 14:47:55,731 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 14:47:55,732 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 14:47:55,869 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 14:47:55,869 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 14:47:55,869 - RSTPTest - INFO - ============================================================
2025-09-09 14:47:55,870 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[12288]
2025-09-09 14:47:55,870 - RSTPTest - INFO - ============================================================
2025-09-09 14:47:55,871 - test_parameters - INFO - 测试网桥优先级: 12288
2025-09-09 14:47:55,942 - test_parameters - INFO - 创建OVS网桥 rstp0
2025-09-09 14:47:57,180 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-09 14:47:59,199 - test_parameters - INFO - 从OVS配置读取到优先级: 12288
2025-09-09 14:47:59,199 - test_parameters - INFO - 优先级12288设置成功
2025-09-09 14:47:59,200 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[12288] (耗时: 3.33秒)
2025-09-09 14:47:59,200 - RSTPTest - INFO - ============================================================

2025-09-09 14:47:59,201 - RSTPTest - INFO - ============================================================
2025-09-09 14:47:59,202 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[16384]
2025-09-09 14:47:59,202 - RSTPTest - INFO - ============================================================
2025-09-09 14:47:59,202 - test_parameters - INFO - 测试网桥优先级: 16384
2025-09-09 14:48:00,467 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-09 14:48:02,486 - test_parameters - INFO - 从OVS配置读取到优先级: 16384
2025-09-09 14:48:02,486 - test_parameters - INFO - 优先级16384设置成功
2025-09-09 14:48:02,487 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[16384] (耗时: 3.29秒)
2025-09-09 14:48:02,487 - RSTPTest - INFO - ============================================================

2025-09-09 14:48:02,488 - RSTPTest - INFO - ============================================================
2025-09-09 14:48:02,489 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[32768]
2025-09-09 14:48:02,489 - RSTPTest - INFO - ============================================================
2025-09-09 14:48:02,490 - test_parameters - INFO - 测试网桥优先级: 32768
2025-09-09 14:48:03,751 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-09 14:48:05,768 - test_parameters - INFO - 从OVS配置读取到优先级: 32768
2025-09-09 14:48:05,769 - test_parameters - INFO - 优先级32768设置成功
2025-09-09 14:48:05,770 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[32768] (耗时: 3.28秒)
2025-09-09 14:48:05,770 - RSTPTest - INFO - ============================================================

2025-09-09 14:48:05,771 - RSTPTest - INFO - ============================================================
2025-09-09 14:48:05,771 - RSTPTest - INFO - 开始测试: test_bridge_priority_valid[61440]
2025-09-09 14:48:05,772 - RSTPTest - INFO - ============================================================
2025-09-09 14:48:05,772 - test_parameters - INFO - 测试网桥优先级: 61440
2025-09-09 14:48:07,036 - test_parameters - INFO - 命令执行结果: code=0, stdout='1
1
', stderr=''
2025-09-09 14:48:09,054 - test_parameters - INFO - 从OVS配置读取到优先级: 61440
2025-09-09 14:48:09,054 - test_parameters - INFO - 优先级61440设置成功
2025-09-09 14:48:09,055 - RSTPTest - INFO - 测试完成: test_bridge_priority_valid[61440] (耗时: 3.28秒)
2025-09-09 14:48:09,055 - RSTPTest - INFO - ============================================================

2025-09-09 14:48:09,056 - RSTPTest - INFO - ============================================================
2025-09-09 14:48:09,056 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[4097]
2025-09-09 14:48:09,056 - RSTPTest - INFO - ============================================================
2025-09-09 14:48:09,057 - test_parameters - INFO - 测试无效优先级: 4097
2025-09-09 14:48:10,406 - test_parameters - INFO - DUT处理无效优先级 4097 -> 4097
2025-09-09 14:48:10,407 - test_parameters - WARNING - DUT接受了非标准优先级值 4097，不符合802.1D标准（应为4096的倍数）
2025-09-09 14:48:10,407 - test_parameters - INFO - 无效优先级4097被正确处理
2025-09-09 14:48:10,407 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[4097] (耗时: 1.35秒)
2025-09-09 14:48:10,408 - RSTPTest - INFO - ============================================================

2025-09-09 14:48:10,409 - RSTPTest - INFO - ============================================================
2025-09-09 14:48:10,410 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[12289]
2025-09-09 14:48:10,410 - RSTPTest - INFO - ============================================================
2025-09-09 14:48:10,410 - test_parameters - INFO - 测试无效优先级: 12289
2025-09-09 14:48:11,775 - test_parameters - INFO - DUT处理无效优先级 12289 -> 12289
2025-09-09 14:48:11,775 - test_parameters - WARNING - DUT接受了非标准优先级值 12289，不符合802.1D标准（应为4096的倍数）
2025-09-09 14:48:11,776 - test_parameters - INFO - 无效优先级12289被正确处理
2025-09-09 14:48:11,776 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[12289] (耗时: 1.37秒)
2025-09-09 14:48:11,777 - RSTPTest - INFO - ============================================================

2025-09-09 14:48:11,778 - RSTPTest - INFO - ============================================================
2025-09-09 14:48:11,778 - RSTPTest - INFO - 开始测试: test_bridge_priority_invalid[70000]
2025-09-09 14:48:11,778 - RSTPTest - INFO - ============================================================
2025-09-09 14:48:11,779 - test_parameters - INFO - 测试无效优先级: 70000
2025-09-09 14:48:13,142 - test_parameters - INFO - DUT处理无效优先级 70000 -> 70000
2025-09-09 14:48:13,142 - test_parameters - WARNING - DUT接受了非标准优先级值 70000，不符合802.1D标准（应为4096的倍数）
2025-09-09 14:48:13,143 - test_parameters - INFO - 无效优先级70000被正确处理
2025-09-09 14:48:13,143 - RSTPTest - INFO - 测试完成: test_bridge_priority_invalid[70000] (耗时: 1.36秒)
2025-09-09 14:48:13,144 - RSTPTest - INFO - ============================================================

2025-09-09 14:48:13,145 - RSTPTest - INFO - ============================================================
2025-09-09 14:48:13,145 - RSTPTest - INFO - 开始测试: test_hello_time
2025-09-09 14:48:13,146 - RSTPTest - INFO - ============================================================
2025-09-09 14:48:13,146 - test_parameters - INFO - 测试Hello Time参数
2025-09-09 14:48:14,422 - test_parameters - INFO - 设置Hello Time: 1秒
2025-09-09 14:48:16,464 - test_parameters - INFO - Hello Time 1秒设置成功
2025-09-09 14:48:16,465 - test_parameters - INFO - 设置Hello Time: 2秒
2025-09-09 14:48:18,547 - test_parameters - INFO - Hello Time 2秒设置成功
2025-09-09 14:48:18,547 - test_parameters - INFO - 设置Hello Time: 5秒
2025-09-09 14:48:20,631 - test_parameters - INFO - Hello Time 5秒设置成功
2025-09-09 14:48:20,631 - test_parameters - INFO - Hello Time测试通过
2025-09-09 14:48:20,632 - RSTPTest - INFO - 测试完成: test_hello_time (耗时: 7.49秒)
2025-09-09 14:48:20,632 - RSTPTest - INFO - ============================================================

2025-09-09 14:48:20,634 - RSTPTest - INFO - ============================================================
2025-09-09 14:48:20,634 - RSTPTest - INFO - 开始测试: test_forward_delay
2025-09-09 14:48:20,634 - RSTPTest - INFO - ============================================================
2025-09-09 14:48:20,635 - test_parameters - INFO - 测试Forward Delay参数
2025-09-09 14:48:21,914 - test_parameters - INFO - 设置Forward Delay: 4秒
2025-09-09 14:48:23,957 - test_parameters - INFO - Forward Delay 4秒设置成功
2025-09-09 14:48:23,957 - test_parameters - INFO - 设置Forward Delay: 10秒
2025-09-09 14:48:26,040 - test_parameters - INFO - Forward Delay 10秒设置成功
2025-09-09 14:48:26,040 - test_parameters - INFO - 设置Forward Delay: 15秒
2025-09-09 14:48:28,123 - test_parameters - INFO - Forward Delay 15秒设置成功
2025-09-09 14:48:28,123 - test_parameters - INFO - Forward Delay测试通过
2025-09-09 14:48:28,124 - RSTPTest - INFO - 测试完成: test_forward_delay (耗时: 7.49秒)
2025-09-09 14:48:28,125 - RSTPTest - INFO - ============================================================

2025-09-09 14:48:28,126 - RSTPTest - INFO - ============================================================
2025-09-09 14:48:28,126 - RSTPTest - INFO - 开始测试: test_max_age
2025-09-09 14:48:28,126 - RSTPTest - INFO - ============================================================
2025-09-09 14:48:28,127 - test_parameters - INFO - 测试Max Age参数
2025-09-09 14:48:29,402 - test_parameters - INFO - 设置Max Age: 6秒
2025-09-09 14:48:31,445 - test_parameters - INFO - Max Age 6秒设置成功
2025-09-09 14:48:31,445 - test_parameters - INFO - 设置Max Age: 10秒
2025-09-09 14:48:33,528 - test_parameters - INFO - Max Age 10秒设置成功
2025-09-09 14:48:33,528 - test_parameters - INFO - 设置Max Age: 20秒
2025-09-09 14:48:35,607 - test_parameters - INFO - Max Age 20秒设置成功
2025-09-09 14:48:35,607 - test_parameters - INFO - Max Age测试通过
2025-09-09 14:48:35,608 - RSTPTest - INFO - 测试完成: test_max_age (耗时: 7.48秒)
2025-09-09 14:48:35,608 - RSTPTest - INFO - ============================================================

2025-09-09 14:48:35,735 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 14:48:35,736 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 14:48:35,861 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 14:48:35,861 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 14:48:35,861 - RSTPTest - INFO - ============================================================
2025-09-09 14:48:35,862 - RSTPTest - INFO - 开始测试: test_port_cost
2025-09-09 14:48:35,862 - RSTPTest - INFO - ============================================================
2025-09-09 14:48:35,862 - test_parameters - INFO - 测试端口路径成本
2025-09-09 14:48:35,863 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 14:48:35,863 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 14:48:35,863 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 14:48:35,863 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 14:48:35,863 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 14:48:35,864 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 14:48:35,864 - NetworkTopology - INFO - DUT: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 14:48:35,864 - NetworkTopology - INFO - DUT: 检查mstpd支持...
2025-09-09 14:48:35,870 - NetworkTopology - INFO - DUT: mstpd检查结果: code=1
2025-09-09 14:48:35,870 - NetworkTopology - INFO - DUT: 检查iproute2支持...
2025-09-09 14:48:35,923 - NetworkTopology - INFO - DUT: ip命令检查: code=0
2025-09-09 14:48:35,923 - NetworkTopology - INFO - DUT: 使用iproute2配置RSTP
2025-09-09 14:48:35,924 - NetworkTopology - INFO - DUT: 最终选择RSTP方法: iproute2
2025-09-09 14:48:35,924 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 14:48:35,924 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 14:48:36,253 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 14:48:36,661 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 14:48:36,662 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 14:48:36,662 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 14:48:36,662 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 14:48:36,785 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 14:48:36,909 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 14:48:36,909 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 14:48:36,966 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 14:48:37,014 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 14:48:37,066 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 14:48:37,067 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 14:48:37,067 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 14:48:37,067 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 14:48:37,067 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 14:48:37,068 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 14:48:37,068 - NetworkTopology - INFO - TestNode1: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 14:48:37,068 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 14:48:37,075 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 14:48:37,076 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 14:48:37,207 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=1, output=
2025-09-09 14:48:37,207 - NetworkTopology - INFO - TestNode1: 尝试启动mstpd服务...
2025-09-09 14:48:37,390 - NetworkTopology - INFO - TestNode1: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 14:48:39,480 - NetworkTopology - INFO - TestNode1: mstpd启动后状态: code=1
2025-09-09 14:48:39,480 - NetworkTopology - INFO - TestNode1: mstpd启动失败，使用iproute2
2025-09-09 14:48:39,480 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: iproute2
2025-09-09 14:48:39,480 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 14:48:39,481 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 14:48:40,002 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 14:48:41,133 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 14:48:41,134 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 14:48:41,134 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 14:48:41,134 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 14:48:41,483 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 14:48:41,804 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 14:48:41,804 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 14:48:41,966 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 14:48:42,014 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 14:48:42,062 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 14:48:42,062 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 14:48:42,062 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 14:48:42,063 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 14:48:42,063 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 14:48:42,063 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 14:48:42,063 - NetworkTopology - INFO - TestNode2: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 14:48:42,064 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 14:48:42,072 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 14:48:42,072 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 14:48:42,200 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=1, output=
2025-09-09 14:48:42,200 - NetworkTopology - INFO - TestNode2: 尝试启动mstpd服务...
2025-09-09 14:48:42,388 - NetworkTopology - INFO - TestNode2: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 14:48:44,482 - NetworkTopology - INFO - TestNode2: mstpd启动后状态: code=1
2025-09-09 14:48:44,483 - NetworkTopology - INFO - TestNode2: mstpd启动失败，使用iproute2
2025-09-09 14:48:44,483 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: iproute2
2025-09-09 14:48:44,483 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 14:48:44,483 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 14:48:45,028 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 14:49:45,753 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 14:49:45,753 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 14:49:45,753 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 14:49:45,754 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 14:50:05,976 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 14:50:26,201 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 14:50:26,202 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 14:50:36,310 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 14:50:36,357 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 14:50:36,406 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 14:50:36,406 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 14:50:36,407 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 14:50:41,407 - test_parameters - INFO - 设置端口eth0成本: 10
2025-09-09 14:50:41,424 - test_parameters - INFO - 设置端口eth0成本: 100
2025-09-09 14:50:41,482 - test_parameters - INFO - 设置端口eth0成本: 1000
2025-09-09 14:50:41,539 - test_parameters - INFO - 设置端口eth0成本: 20000
2025-09-09 14:50:41,594 - test_parameters - INFO - 端口成本测试通过
2025-09-09 14:50:41,595 - RSTPTest - INFO - 测试完成: test_port_cost (耗时: 125.73秒)
2025-09-09 14:50:41,596 - RSTPTest - INFO - ============================================================

2025-09-09 14:50:41,597 - RSTPTest - INFO - ============================================================
2025-09-09 14:50:41,597 - RSTPTest - INFO - 开始测试: test_parameter_persistence
2025-09-09 14:50:41,597 - RSTPTest - INFO - ============================================================
2025-09-09 14:50:41,598 - test_parameters - INFO - 测试参数持久性
2025-09-09 14:50:48,147 - test_parameters - INFO - 参数持久性测试通过
2025-09-09 14:50:48,148 - RSTPTest - INFO - 测试完成: test_parameter_persistence (耗时: 6.55秒)
2025-09-09 14:50:48,148 - RSTPTest - INFO - ============================================================

2025-09-09 14:50:48,150 - RSTPTest - INFO - ============================================================
2025-09-09 14:50:48,150 - RSTPTest - INFO - 开始测试: test_parameter_boundaries
2025-09-09 14:50:48,150 - RSTPTest - INFO - ============================================================
2025-09-09 14:50:48,150 - test_parameters - INFO - 测试参数边界值
2025-09-09 14:50:49,444 - test_parameters - INFO - 最小值0: 成功
2025-09-09 14:50:49,500 - test_parameters - INFO - 最大值65535: 成功
2025-09-09 14:50:49,561 - test_parameters - INFO - 正确拒绝了无效值-1
2025-09-09 14:50:49,619 - test_parameters - WARNING - 接受了无效值65536
2025-09-09 14:50:49,675 - test_parameters - INFO - 最小值1: 成功
2025-09-09 14:50:49,735 - test_parameters - INFO - 最大值10: 成功
2025-09-09 14:50:49,795 - test_parameters - INFO - 正确拒绝了无效值0
2025-09-09 14:50:49,846 - test_parameters - INFO - 正确拒绝了无效值11
2025-09-09 14:50:49,898 - test_parameters - INFO - 最小值4: 成功
2025-09-09 14:50:49,951 - test_parameters - INFO - 最大值30: 成功
2025-09-09 14:50:50,007 - test_parameters - WARNING - 接受了无效值3
2025-09-09 14:50:50,062 - test_parameters - INFO - 正确拒绝了无效值31
2025-09-09 14:50:50,115 - test_parameters - INFO - 最小值6: 成功
2025-09-09 14:50:50,171 - test_parameters - INFO - 最大值40: 成功
2025-09-09 14:50:50,227 - test_parameters - INFO - 正确拒绝了无效值5
2025-09-09 14:50:50,284 - test_parameters - INFO - 正确拒绝了无效值41
2025-09-09 14:50:50,284 - test_parameters - INFO - 参数边界测试完成
2025-09-09 14:50:50,285 - RSTPTest - INFO - 测试完成: test_parameter_boundaries (耗时: 2.13秒)
2025-09-09 14:50:50,285 - RSTPTest - INFO - ============================================================

2025-09-09 14:50:50,285 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 14:50:50,285 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 14:50:50,286 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 14:50:50,421 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 14:50:50,422 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 14:50:50,551 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 14:50:50,551 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 14:50:50,679 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 14:50:50,679 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 14:50:50,680 - RSTPTest - INFO - ============================================================
2025-09-09 14:50:50,680 - RSTPTest - INFO - 开始测试: test_port_role_assignment_simplified
2025-09-09 14:50:50,680 - RSTPTest - INFO - ============================================================
2025-09-09 14:50:50,683 - RSTPTest - INFO - 测试完成: test_port_role_assignment_simplified (耗时: 0.00秒)
2025-09-09 14:50:50,683 - RSTPTest - INFO - ============================================================

2025-09-09 14:50:50,684 - RSTPTest - INFO - ============================================================
2025-09-09 14:50:50,684 - RSTPTest - INFO - 开始测试: test_root_bridge_election
2025-09-09 14:50:50,685 - RSTPTest - INFO - ============================================================
2025-09-09 14:50:50,685 - test_protocol_conformance - INFO - 开始根网桥选举测试
2025-09-09 14:50:50,686 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 14:50:50,686 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 14:50:50,686 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 14:50:50,686 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 14:50:50,687 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 14:50:50,687 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 14:50:50,687 - NetworkTopology - INFO - DUT: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 14:50:50,687 - NetworkTopology - INFO - DUT: 检查mstpd支持...
2025-09-09 14:50:50,693 - NetworkTopology - INFO - DUT: mstpd检查结果: code=1
2025-09-09 14:50:50,693 - NetworkTopology - INFO - DUT: 检查iproute2支持...
2025-09-09 14:50:50,740 - NetworkTopology - INFO - DUT: ip命令检查: code=0
2025-09-09 14:50:50,741 - NetworkTopology - INFO - DUT: 使用iproute2配置RSTP
2025-09-09 14:50:50,741 - NetworkTopology - INFO - DUT: 最终选择RSTP方法: iproute2
2025-09-09 14:50:50,741 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 14:50:50,741 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 14:50:51,067 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 14:50:51,460 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 14:50:51,460 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 14:50:51,460 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 14:50:51,460 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 14:50:51,575 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 14:50:51,695 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 14:50:51,696 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 14:50:51,752 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 14:50:51,801 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 14:50:51,849 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 14:50:51,849 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 14:50:51,849 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 14:50:51,850 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 14:50:51,850 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 14:50:51,850 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 14:50:51,850 - NetworkTopology - INFO - TestNode1: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 14:50:51,851 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 14:50:51,858 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 14:50:51,858 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 14:50:51,986 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=1, output=
2025-09-09 14:50:51,986 - NetworkTopology - INFO - TestNode1: 尝试启动mstpd服务...
2025-09-09 14:50:52,161 - NetworkTopology - INFO - TestNode1: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 14:50:54,241 - NetworkTopology - INFO - TestNode1: mstpd启动后状态: code=1
2025-09-09 14:50:54,241 - NetworkTopology - INFO - TestNode1: mstpd启动失败，使用iproute2
2025-09-09 14:50:54,242 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: iproute2
2025-09-09 14:50:54,242 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 14:50:54,242 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 14:50:54,796 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 14:50:55,888 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 14:50:55,889 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 14:50:55,889 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 14:50:55,889 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 14:50:56,227 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 14:50:56,583 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 14:50:56,583 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 14:50:56,767 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 14:50:56,815 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 14:50:56,863 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 14:50:56,863 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 14:50:56,863 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 14:50:56,863 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 14:50:56,864 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 14:50:56,864 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 14:50:56,864 - NetworkTopology - INFO - TestNode2: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 14:50:56,864 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 14:50:56,872 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 14:50:56,872 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 14:51:03,394 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=1, output=
2025-09-09 14:51:03,394 - NetworkTopology - INFO - TestNode2: 尝试启动mstpd服务...
2025-09-09 14:51:10,725 - NetworkTopology - INFO - TestNode2: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 14:51:20,802 - NetworkTopology - INFO - TestNode2: mstpd启动后状态: code=1
2025-09-09 14:51:20,802 - NetworkTopology - INFO - TestNode2: mstpd启动失败，使用iproute2
2025-09-09 14:51:20,803 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: iproute2
2025-09-09 14:51:20,803 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 14:51:20,803 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 14:51:36,506 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 14:51:37,586 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 14:51:37,586 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 14:51:37,586 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 14:51:37,586 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 14:51:37,921 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 14:51:38,275 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 14:51:38,275 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 14:51:38,442 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 14:51:38,490 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 14:51:38,539 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 14:51:38,539 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 14:51:38,539 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 14:51:41,540 - test_protocol_conformance - INFO - === 检查DUT网桥配置 ===
2025-09-09 14:51:41,546 - test_protocol_conformance - INFO - 找到测试网桥: br0
2025-09-09 14:51:41,604 - test_protocol_conformance - INFO - 启用br0的RSTP
2025-09-09 14:51:41,650 - test_protocol_conformance - INFO - br0 STP状态: ('', 'cat: /sys/class/net/br0/bridge/stp_state: No such file or directory\n', 1)
2025-09-09 14:51:41,651 - test_protocol_conformance - INFO - === 初始网桥状态 ===
2025-09-09 14:51:41,758 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 14:51:41,810 - RSTPTest - INFO - 测试完成: test_root_bridge_election (耗时: 51.13秒)
2025-09-09 14:51:41,810 - RSTPTest - INFO - ============================================================

2025-09-09 14:51:41,813 - RSTPTest - INFO - ============================================================
2025-09-09 14:51:41,813 - RSTPTest - INFO - 开始测试: test_port_role_assignment
2025-09-09 14:51:41,813 - RSTPTest - INFO - ============================================================
2025-09-09 14:51:41,814 - test_protocol_conformance - INFO - 开始端口角色分配测试
2025-09-09 14:51:41,814 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 14:51:41,815 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 14:51:41,815 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 14:51:41,815 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 14:51:41,815 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 14:51:41,815 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 14:51:41,816 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 14:51:41,816 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 14:51:42,087 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 14:51:42,478 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 14:51:42,479 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 14:51:42,479 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 14:51:42,479 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 14:51:42,594 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 14:51:42,710 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 14:51:42,711 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 14:51:42,767 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 14:51:42,815 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 14:51:42,863 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 14:51:42,863 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 14:51:42,864 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 14:51:42,864 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 14:51:42,864 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 14:51:42,864 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 14:51:42,865 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 14:51:42,865 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 14:51:43,358 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 14:51:44,401 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 14:51:44,401 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 14:51:44,402 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 14:51:44,402 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 14:51:44,758 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 14:51:45,079 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 14:51:45,080 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 14:51:45,249 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 14:51:45,296 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 14:51:45,345 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 14:51:45,345 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 14:51:45,346 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 14:51:45,346 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 14:51:45,346 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 14:51:45,346 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 14:51:45,346 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 14:51:45,346 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 14:51:45,836 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 14:51:46,929 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 14:51:46,930 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 14:51:46,930 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 14:51:46,930 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 14:51:47,285 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 14:51:47,623 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 14:51:47,623 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 14:51:47,799 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 14:51:47,846 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 14:51:47,896 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 14:51:47,897 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 14:51:47,897 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 14:51:51,040 - test_protocol_conformance - INFO - 启用DUT的网桥接口...
2025-09-09 14:51:51,167 - test_protocol_conformance - INFO - 已启用接口 eth0
2025-09-09 14:51:51,336 - test_protocol_conformance - INFO - 已启用接口 eth1
2025-09-09 14:51:51,503 - test_protocol_conformance - INFO - 已启用接口 eth2
2025-09-09 14:51:54,511 - test_protocol_conformance - INFO - br0 网桥接口状态:
('18: veth45650b3@if17: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 master br-b2bd2c7fedc8 state forwarding priority 32 cost 2 \n26: veth6d7f1eb@if25: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 master br-b2bd2c7fedc8 state forwarding priority 32 cost 2 \n13898: shared_port1@dut_port1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 master shared_segment state forwarding priority 32 cost 2 \n13900: shared_port2@dut_port2: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 master shared_segment state forwarding priority 32 cost 2 \n13903: shared_remote@remote_port: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 master shared_segment state forwarding priority 32 cost 2 \n', '', 0)
2025-09-09 14:51:54,559 - test_protocol_conformance - INFO - br0 状态:
('5: br0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1508 qdisc mq state UP mode DEFAULT group default qlen 1000\n    link/ether 90:12:10:b5:7d:f7 brd ff:ff:ff:ff:ff:ff\n    altname enp0s30f4\n', '', 0)
2025-09-09 14:51:54,607 - test_protocol_conformance - INFO - br0 STP状态:
('', 'cat: /sys/class/net/br0/bridge/stp_state: No such file or directory\n', 1)
2025-09-09 14:51:54,607 - test_protocol_conformance - INFO - 获取初始网桥状态...
2025-09-09 14:51:54,714 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 14:51:54,763 - RSTPTest - INFO - 测试完成: test_port_role_assignment (耗时: 12.95秒)
2025-09-09 14:51:54,763 - RSTPTest - INFO - ============================================================

2025-09-09 14:51:54,766 - RSTPTest - INFO - ============================================================
2025-09-09 14:51:54,766 - RSTPTest - INFO - 开始测试: test_rstp_protocol_verification
2025-09-09 14:51:54,767 - RSTPTest - INFO - ============================================================
2025-09-09 14:51:54,767 - test_protocol_conformance - INFO - 开始RSTP协议验证
2025-09-09 14:51:54,767 - test_protocol_conformance - INFO - === 检查OVS配置 ===
2025-09-09 14:51:54,777 - test_protocol_conformance - INFO - 当前OVS配置:
8c812ea9-3b0c-46a1-bd3c-ef3904d38c1a
    Bridge SE_ETH4
        Port SE_ETH4
            Interface SE_ETH4
                type: internal
    Bridge SE_ETH6
        Port SE_ETH6
            Interface SE_ETH6
                type: internal
    Bridge remote_switch
        Port remote_switch
            Interface remote_switch
                type: internal
        Port remote_port
            Interface remote_port
    Bridge br0
        Port eth0
            Interface eth0
                error: 
2025-09-09 14:51:54,828 - test_protocol_conformance - INFO - 使用现有网桥 SE_ETH2，端口: ['br3', 'br4']
2025-09-09 14:51:54,828 - test_protocol_conformance - INFO - === 配置RSTP（确保是RSTP而不是STP）===
2025-09-09 14:51:55,944 - test_protocol_conformance - INFO - 启用RSTP...
2025-09-09 14:51:55,963 - test_protocol_conformance - INFO - ✓ RSTP已启用
2025-09-09 14:51:55,963 - test_protocol_conformance - INFO - 设置RSTP参数...
2025-09-09 14:51:56,015 - test_protocol_conformance - INFO - ✓ 设置: rstp-hello-time=2
2025-09-09 14:51:56,068 - test_protocol_conformance - INFO - ✓ 设置: rstp-forward-delay=4
2025-09-09 14:51:56,120 - test_protocol_conformance - INFO - ✓ 设置: rstp-max-age=6
2025-09-09 14:51:56,171 - test_protocol_conformance - INFO - ✓ 设置: rstp-priority=32768
2025-09-09 14:51:56,223 - test_protocol_conformance - INFO - ✓ 设置: rstp-force-protocol-version=2
2025-09-09 14:51:56,375 - test_protocol_conformance - INFO - ✓ 端口 br3 RSTP已启用
2025-09-09 14:51:56,527 - test_protocol_conformance - INFO - ✓ 端口 br4 RSTP已启用
2025-09-09 14:51:56,575 - test_protocol_conformance - INFO - 等待RSTP初始化...
2025-09-09 14:52:01,576 - test_protocol_conformance - INFO - === 验证RSTP配置 ===
2025-09-09 14:52:01,584 - test_protocol_conformance - INFO - RSTP状态:
---- SE_ETH2 ----
Root ID:
  stp-priority    32768
  stp-system-id   6e:b3:08:fa:01:34
  stp-hello-time  2s
  stp-max-age     20s
  stp-fwd-delay   15s
  root-port       br4
  root-path-cost  20000

Bridge ID:
  stp-priority    32768
  stp-system-id   90:12:10:b5:7d:f7
  stp-hello-time  2s
  stp-max-age     6s
  stp-fwd-delay   4s

  Interface  Role       State      Cost     Pri.Nbr 
  ---------- ---------- ---------- -------- -------
  br4        Root       Forwarding 20000    128.1
  br3        Disabled   Discarding 2000     128.2


2025-09-09 14:52:01,585 - test_protocol_conformance - INFO - ✓ 使用RSTP时间参数
2025-09-09 14:52:01,585 - test_protocol_conformance - INFO - === 创建测试拓扑 ===
2025-09-09 14:52:01,585 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 14:52:01,586 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 14:52:01,586 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 14:52:01,586 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 14:52:01,586 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 14:52:01,586 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 14:52:01,586 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 14:52:01,587 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 14:52:01,898 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 14:52:02,290 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 14:52:02,290 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 14:52:02,290 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 14:52:02,291 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 14:52:02,410 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 14:52:02,530 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 14:52:02,530 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 14:52:02,586 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 14:52:02,635 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 14:52:02,683 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 14:52:02,683 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 14:52:02,684 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 14:52:02,684 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 14:52:02,684 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 14:52:02,684 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 14:52:02,684 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 14:52:02,685 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 14:52:03,198 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 14:52:04,281 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 14:52:04,282 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 14:52:04,282 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 14:52:04,282 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 14:52:04,620 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 14:52:04,958 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 14:52:04,958 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 14:52:05,219 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 14:52:05,267 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 14:52:05,316 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 14:52:05,317 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 14:52:05,317 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 14:52:05,317 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 14:52:05,317 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 14:52:05,318 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 14:52:05,318 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 14:52:05,318 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 14:52:05,820 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 14:52:06,914 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 14:52:06,914 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 14:52:06,914 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 14:52:06,915 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 14:52:07,239 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 14:52:07,604 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 14:52:07,604 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 14:52:07,845 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 14:52:07,895 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 14:52:07,943 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 14:52:07,944 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 14:52:07,944 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 14:52:12,945 - test_protocol_conformance - INFO - === 捕获BPDU ===
2025-09-09 14:52:12,945 - test_protocol_conformance - INFO - 在 SE_ETH2 上捕获BPDU...
2025-09-09 14:52:12,945 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: SE_ETH2, 数量: 10)
2025-09-09 14:52:22,992 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-09 14:52:22,992 - test_protocol_conformance - INFO - 在 br3 上捕获BPDU...
2025-09-09 14:52:22,992 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br3, 数量: 10)
2025-09-09 14:52:33,084 - RSTPAnalyzer_DUT - INFO - 捕获到 0 个BPDU包
2025-09-09 14:52:33,084 - test_protocol_conformance - INFO - 在 br4 上捕获BPDU...
2025-09-09 14:52:33,084 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: br4, 数量: 10)
2025-09-09 14:52:43,171 - RSTPAnalyzer_DUT - INFO - 捕获到 5 个BPDU包
2025-09-09 14:52:43,172 - test_protocol_conformance - INFO - ✓ 捕获到 5 个BPDU
2025-09-09 14:52:43,172 - test_protocol_conformance - INFO - === 分析BPDU ===
2025-09-09 14:52:43,172 - test_protocol_conformance - INFO - 第一个BPDU信息: {'timestamp': '14:52:35.284709', 'raw': '14:52:35.284709 00:e0:0c:25:0c:01 > 01:80:c2:00:00:00, 802.3, length 39: LLC, dsap STP (0x42) Individual, ssap STP (0x42) Command, ctrl 0x03: STP 802.1w, Rapid STP, Flags [Learn, Forward, Agreement], bridge-id 8000.6e:b3:08:fa:01:34.8002, length 36', 'is_rstp': False}
2025-09-09 14:52:43,173 - test_protocol_conformance - INFO - BPDU统计: RSTP=0, STP=5
2025-09-09 14:52:43,173 - test_protocol_conformance - WARNING - 检测到更多STP BPDU
2025-09-09 14:52:43,222 - test_protocol_conformance - INFO - rstp_enable状态: true
2025-09-09 14:52:43,274 - test_protocol_conformance - INFO - stp_enable状态: false
2025-09-09 14:52:43,327 - test_protocol_conformance - WARNING - OVS配置为RSTP但发送STP BPDU，可能是实现限制
2025-09-09 14:52:43,327 - test_protocol_conformance - INFO - 基于配置判断为RSTP
2025-09-09 14:52:43,327 - test_protocol_conformance - INFO - ✓ RSTP协议验证通过（检测到 5 个RSTP BPDU）
2025-09-09 14:52:43,328 - RSTPTest - INFO - 测试完成: test_rstp_protocol_verification (耗时: 48.56秒)
2025-09-09 14:52:43,328 - RSTPTest - INFO - ============================================================

2025-09-09 14:52:43,330 - RSTPTest - INFO - ============================================================
2025-09-09 14:52:43,330 - RSTPTest - INFO - 开始测试: test_alternate_port_verification
2025-09-09 14:52:43,330 - RSTPTest - INFO - ============================================================
2025-09-09 14:52:43,331 - test_protocol_conformance - INFO - 开始Alternate Port验证测试
2025-09-09 14:52:43,331 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 14:52:43,332 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 14:52:43,332 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 14:52:43,332 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 14:52:43,332 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 14:52:43,332 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 14:52:43,333 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 14:52:43,333 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 14:52:43,641 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 14:52:44,030 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 14:52:44,031 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 14:52:44,031 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 14:52:44,031 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 14:52:44,150 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 14:52:44,269 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 14:52:44,269 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 14:52:44,326 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 14:52:44,374 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 14:52:44,422 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 14:52:44,422 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 14:52:44,422 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 14:52:44,423 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 14:52:44,423 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 14:52:44,423 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 14:52:44,423 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 14:52:44,423 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 14:52:44,929 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 14:52:46,030 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 14:52:46,031 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 14:52:46,031 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 14:52:46,031 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 14:52:46,378 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 14:52:46,723 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 14:52:46,723 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 14:52:46,896 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 14:52:46,944 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 14:52:46,992 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 14:52:46,993 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 14:52:46,993 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 14:52:46,993 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 14:52:46,994 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 14:52:46,994 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 14:52:46,994 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 14:52:46,994 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 14:52:47,471 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 14:52:48,564 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 14:52:48,564 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 14:52:48,565 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 14:52:48,565 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 14:52:48,923 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 14:52:49,285 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 14:52:49,286 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 14:52:49,463 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 14:52:49,511 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 14:52:49,559 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 14:52:49,560 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 14:52:49,560 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 14:52:49,560 - test_protocol_conformance - INFO - 设置网桥优先级
2025-09-09 14:52:49,838 - test_protocol_conformance - INFO - 等待RSTP收敛...
2025-09-09 14:52:49,838 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 14:52:49,900 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 14:52:49,951 - RSTPTest - INFO - 测试完成: test_alternate_port_verification (耗时: 6.62秒)
2025-09-09 14:52:49,951 - RSTPTest - INFO - ============================================================

2025-09-09 14:52:49,953 - RSTPTest - INFO - ============================================================
2025-09-09 14:52:49,953 - RSTPTest - INFO - 开始测试: test_port_state_transitions
2025-09-09 14:52:49,953 - RSTPTest - INFO - ============================================================
2025-09-09 14:52:49,954 - test_protocol_conformance - INFO - 开始端口状态转换测试
2025-09-09 14:52:49,990 - RSTPTest - INFO - 测试完成: test_port_state_transitions (耗时: 0.04秒)
2025-09-09 14:52:49,990 - RSTPTest - INFO - ============================================================

2025-09-09 14:52:49,992 - RSTPTest - INFO - ============================================================
2025-09-09 14:52:49,992 - RSTPTest - INFO - 开始测试: test_bpdu_propagation_and_keepalive
2025-09-09 14:52:49,992 - RSTPTest - INFO - ============================================================
2025-09-09 14:52:49,993 - test_protocol_conformance - INFO - 开始BPDU传播和保活机制测试
2025-09-09 14:52:49,993 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 14:52:49,993 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 14:52:49,993 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 14:52:49,994 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 14:52:49,994 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 14:52:49,994 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 14:52:49,994 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 14:52:49,995 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 14:52:50,253 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 14:52:50,645 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 14:52:50,646 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 14:52:50,646 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 14:52:50,646 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 14:52:50,761 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 14:52:50,885 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 14:52:50,886 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 14:52:50,942 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 14:52:50,991 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 14:52:51,038 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 14:52:51,038 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 14:52:51,038 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 14:52:51,039 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 14:52:51,039 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 14:52:51,039 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 14:52:51,039 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 14:52:51,040 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 14:52:51,546 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 14:52:52,616 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 14:52:52,616 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 14:52:52,616 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 14:52:52,617 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 14:52:52,946 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 14:52:53,278 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 14:52:53,278 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 14:52:53,443 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 14:52:53,492 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 14:52:53,540 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 14:52:53,540 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 14:52:53,541 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 14:52:53,541 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 14:52:53,541 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 14:52:53,542 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 14:52:53,542 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 14:52:53,542 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 14:52:54,047 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 14:52:55,170 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 14:52:55,170 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 14:52:55,171 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 14:52:55,171 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 14:52:55,537 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 14:52:55,914 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 14:52:55,914 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 14:52:56,087 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 14:52:56,135 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 14:52:56,183 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 14:52:56,183 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 14:52:56,183 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 14:52:56,491 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-09 14:52:56,491 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 14:52:56,556 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 14:52:56,612 - RSTPTest - INFO - 测试完成: test_bpdu_propagation_and_keepalive (耗时: 6.62秒)
2025-09-09 14:52:56,613 - RSTPTest - INFO - ============================================================

2025-09-09 14:52:56,615 - RSTPTest - INFO - ============================================================
2025-09-09 14:52:56,615 - RSTPTest - INFO - 开始测试: test_disabled_port_exclusion
2025-09-09 14:52:56,615 - RSTPTest - INFO - ============================================================
2025-09-09 14:52:56,616 - test_protocol_conformance - INFO - 开始禁用端口排除测试
2025-09-09 14:52:56,616 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 14:52:56,616 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 14:52:56,616 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 14:52:56,617 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 14:52:56,617 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 14:52:56,617 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 14:52:56,617 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 14:52:56,617 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 14:52:56,914 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 14:52:57,304 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 14:52:57,305 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 14:52:57,305 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 14:52:57,305 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 14:52:57,422 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 14:52:57,542 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 14:52:57,542 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 14:52:57,598 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 14:52:57,646 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 14:52:57,694 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 14:52:57,694 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 14:52:57,695 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 14:52:57,695 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 14:52:57,695 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 14:52:57,695 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 14:52:57,695 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 14:52:57,695 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 14:52:58,185 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 14:52:59,225 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 14:52:59,225 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 14:52:59,226 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 14:52:59,226 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 14:52:59,561 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 14:52:59,896 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 14:52:59,896 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 14:53:00,065 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 14:53:00,112 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 14:53:00,161 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 14:53:00,161 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 14:53:00,162 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 14:53:00,162 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 14:53:00,162 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 14:53:00,162 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 14:53:00,162 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 14:53:00,163 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 14:53:00,664 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 14:53:01,709 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 14:53:01,709 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 14:53:01,709 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 14:53:01,709 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 14:53:02,074 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 14:53:02,438 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 14:53:02,439 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 14:53:02,618 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 14:53:02,666 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 14:53:02,713 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 14:53:02,714 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 14:53:02,714 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 14:53:02,855 - test_protocol_conformance - INFO - 等待初始收敛...
2025-09-09 14:53:02,855 - ConvergenceMonitor - INFO - 等待网络收敛 (最长10秒)...
2025-09-09 14:53:02,961 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 14:53:03,011 - RSTPTest - INFO - 测试完成: test_disabled_port_exclusion (耗时: 6.40秒)
2025-09-09 14:53:03,011 - RSTPTest - INFO - ============================================================

2025-09-09 14:53:03,013 - RSTPTest - INFO - ============================================================
2025-09-09 14:53:03,013 - RSTPTest - INFO - 开始测试: test_topology_change_notification
2025-09-09 14:53:03,013 - RSTPTest - INFO - ============================================================
2025-09-09 14:53:03,014 - test_protocol_conformance - INFO - 开始拓扑变更通知测试
2025-09-09 14:53:03,014 - test_protocol_conformance - INFO - === 步骤1: 创建多网桥环形拓扑 ===
2025-09-09 14:53:03,358 - test_protocol_conformance - INFO - 创建网桥 rstp1 (优先级: 32768)
2025-09-09 14:53:03,594 - test_protocol_conformance - INFO - 创建网桥 rstp2 (优先级: 36864)
2025-09-09 14:53:03,830 - test_protocol_conformance - INFO - 创建网桥 rstp3 (优先级: 40960)
2025-09-09 14:53:04,267 - test_protocol_conformance - INFO - ✓ 连接 rstp1 <-> rstp2
2025-09-09 14:53:04,706 - test_protocol_conformance - INFO - ✓ 连接 rstp2 <-> rstp3
2025-09-09 14:53:05,159 - test_protocol_conformance - INFO - ✓ 连接 rstp3 <-> rstp1
2025-09-09 14:53:05,160 - test_protocol_conformance - INFO - 等待RSTP初始收敛...
2025-09-09 14:53:15,160 - test_protocol_conformance - INFO - === 步骤2: 验证初始RSTP状态 ===
2025-09-09 14:53:15,169 - test_protocol_conformance - INFO - 
rstp1 初始RSTP状态:
2025-09-09 14:53:15,170 - test_protocol_conformance - INFO -   ---- rstp1 ----
2025-09-09 14:53:15,170 - test_protocol_conformance - INFO -   Root ID:
2025-09-09 14:53:15,170 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-09 14:53:15,170 - test_protocol_conformance - INFO -     stp-system-id   76:9d:61:d1:06:45
2025-09-09 14:53:15,171 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-09 14:53:15,171 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-09 14:53:15,171 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-09 14:53:15,171 - test_protocol_conformance - INFO -     This bridge is the root
2025-09-09 14:53:15,172 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-09 14:53:15,172 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-09 14:53:15,172 - test_protocol_conformance - INFO -     stp-system-id   76:9d:61:d1:06:45
2025-09-09 14:53:15,173 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-09 14:53:15,173 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-09 14:53:15,173 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-09 14:53:15,173 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-09 14:53:15,173 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-09 14:53:15,174 - test_protocol_conformance - INFO -     veth12a    Designated Forwarding 2000     128.1
2025-09-09 14:53:15,174 - test_protocol_conformance - INFO -     veth31b    Designated Forwarding 2000     128.2
2025-09-09 14:53:15,174 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-09 14:53:15,174 - test_protocol_conformance - INFO -   → 有转发端口
2025-09-09 14:53:15,220 - test_protocol_conformance - INFO - 
rstp2 初始RSTP状态:
2025-09-09 14:53:15,221 - test_protocol_conformance - INFO -   ---- rstp2 ----
2025-09-09 14:53:15,221 - test_protocol_conformance - INFO -   Root ID:
2025-09-09 14:53:15,221 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-09 14:53:15,221 - test_protocol_conformance - INFO -     stp-system-id   76:9d:61:d1:06:45
2025-09-09 14:53:15,222 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-09 14:53:15,222 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-09 14:53:15,222 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-09 14:53:15,222 - test_protocol_conformance - INFO -     root-port       veth12b
2025-09-09 14:53:15,223 - test_protocol_conformance - INFO -     root-path-cost  2000
2025-09-09 14:53:15,223 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-09 14:53:15,223 - test_protocol_conformance - INFO -     stp-priority    36864
2025-09-09 14:53:15,223 - test_protocol_conformance - INFO -     stp-system-id   d2:b4:de:cd:9d:46
2025-09-09 14:53:15,223 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-09 14:53:15,224 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-09 14:53:15,224 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-09 14:53:15,224 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-09 14:53:15,224 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-09 14:53:15,224 - test_protocol_conformance - INFO -     veth12b    Root       Forwarding 2000     128.1
2025-09-09 14:53:15,224 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-09 14:53:15,224 - test_protocol_conformance - INFO -   → 有转发端口
2025-09-09 14:53:15,272 - test_protocol_conformance - INFO - 
rstp3 初始RSTP状态:
2025-09-09 14:53:15,273 - test_protocol_conformance - INFO -   ---- rstp3 ----
2025-09-09 14:53:15,273 - test_protocol_conformance - INFO -   Root ID:
2025-09-09 14:53:15,273 - test_protocol_conformance - INFO -     stp-priority    32768
2025-09-09 14:53:15,273 - test_protocol_conformance - INFO -     stp-system-id   76:9d:61:d1:06:45
2025-09-09 14:53:15,273 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-09 14:53:15,273 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-09 14:53:15,274 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-09 14:53:15,274 - test_protocol_conformance - INFO -     root-port       veth31a
2025-09-09 14:53:15,274 - test_protocol_conformance - INFO -     root-path-cost  2000
2025-09-09 14:53:15,274 - test_protocol_conformance - INFO -   Bridge ID:
2025-09-09 14:53:15,275 - test_protocol_conformance - INFO -     stp-priority    40960
2025-09-09 14:53:15,275 - test_protocol_conformance - INFO -     stp-system-id   8a:3e:50:36:75:48
2025-09-09 14:53:15,275 - test_protocol_conformance - INFO -     stp-hello-time  2s
2025-09-09 14:53:15,275 - test_protocol_conformance - INFO -     stp-max-age     20s
2025-09-09 14:53:15,275 - test_protocol_conformance - INFO -     stp-fwd-delay   15s
2025-09-09 14:53:15,275 - test_protocol_conformance - INFO -     Interface  Role       State      Cost     Pri.Nbr 
2025-09-09 14:53:15,275 - test_protocol_conformance - INFO -     ---------- ---------- ---------- -------- -------
2025-09-09 14:53:15,276 - test_protocol_conformance - INFO -     veth23b    Alternate  Discarding 2000     128.1
2025-09-09 14:53:15,276 - test_protocol_conformance - INFO -   → 包含根桥信息
2025-09-09 14:53:15,276 - test_protocol_conformance - INFO -   → 有转发端口
2025-09-09 14:53:15,276 - test_protocol_conformance - INFO -   → 有阻塞端口（防环路）
2025-09-09 14:53:15,276 - test_protocol_conformance - INFO - === 步骤3: 分析网络拓扑 ===
2025-09-09 14:53:15,276 - test_protocol_conformance - INFO - ✓ rstp1 是根桥
2025-09-09 14:53:15,277 - test_protocol_conformance - INFO - ✓ 找到阻塞端口: veth23b
2025-09-09 14:53:15,277 - test_protocol_conformance - INFO - === 步骤4: 触发拓扑变更 ===
2025-09-09 14:53:15,277 - test_protocol_conformance - INFO - 断开活动端口: veth31a
2025-09-09 14:53:20,351 - test_protocol_conformance - INFO - ✓ rstp1 状态已变化
2025-09-09 14:53:20,444 - test_protocol_conformance - INFO - ✓ rstp3 状态已变化
2025-09-09 14:53:25,491 - test_protocol_conformance - INFO - === 步骤5: 验证拓扑变更 ===
2025-09-09 14:53:25,497 - RSTPAnalyzer_DUT - INFO - 开始捕获BPDU包 (接口: veth12a, 数量: 5)
2025-09-09 14:53:30,582 - RSTPAnalyzer_DUT - INFO - 捕获到 2 个BPDU包
2025-09-09 14:53:30,583 - test_protocol_conformance - INFO - 在 veth12a 捕获到 2 个BPDU
2025-09-09 14:53:30,583 - test_protocol_conformance - INFO - === 步骤6: 最终验证 ===
2025-09-09 14:53:30,583 - test_protocol_conformance - INFO - ✓ 测试通过：检测到拓扑变更
2025-09-09 14:53:30,632 - test_protocol_conformance - INFO - 
========== rstp1 最终状态 ==========
2025-09-09 14:53:30,632 - test_protocol_conformance - INFO - ---- rstp1 ----
2025-09-09 14:53:30,632 - test_protocol_conformance - INFO - Root ID:
2025-09-09 14:53:30,633 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-09 14:53:30,633 - test_protocol_conformance - INFO -   stp-system-id   76:9d:61:d1:06:45
2025-09-09 14:53:30,633 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-09 14:53:30,633 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-09 14:53:30,634 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-09 14:53:30,634 - test_protocol_conformance - INFO -   This bridge is the root
2025-09-09 14:53:30,634 - test_protocol_conformance - INFO - Bridge ID:
2025-09-09 14:53:30,634 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-09 14:53:30,634 - test_protocol_conformance - INFO -   stp-system-id   76:9d:61:d1:06:45
2025-09-09 14:53:30,635 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-09 14:53:30,635 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-09 14:53:30,635 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-09 14:53:30,635 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-09 14:53:30,635 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-09 14:53:30,635 - test_protocol_conformance - INFO -   veth12a    Designated Forwarding 2000     128.1
2025-09-09 14:53:30,636 - test_protocol_conformance - INFO -   veth31b    Designated Forwarding 2000     128.2
2025-09-09 14:53:30,680 - test_protocol_conformance - INFO - 
========== rstp2 最终状态 ==========
2025-09-09 14:53:30,681 - test_protocol_conformance - INFO - ---- rstp2 ----
2025-09-09 14:53:30,681 - test_protocol_conformance - INFO - Root ID:
2025-09-09 14:53:30,681 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-09 14:53:30,681 - test_protocol_conformance - INFO -   stp-system-id   76:9d:61:d1:06:45
2025-09-09 14:53:30,682 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-09 14:53:30,682 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-09 14:53:30,682 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-09 14:53:30,682 - test_protocol_conformance - INFO -   root-port       veth12b
2025-09-09 14:53:30,682 - test_protocol_conformance - INFO -   root-path-cost  2000
2025-09-09 14:53:30,682 - test_protocol_conformance - INFO - Bridge ID:
2025-09-09 14:53:30,683 - test_protocol_conformance - INFO -   stp-priority    36864
2025-09-09 14:53:30,683 - test_protocol_conformance - INFO -   stp-system-id   d2:b4:de:cd:9d:46
2025-09-09 14:53:30,683 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-09 14:53:30,683 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-09 14:53:30,683 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-09 14:53:30,683 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-09 14:53:30,684 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-09 14:53:30,684 - test_protocol_conformance - INFO -   veth12b    Root       Forwarding 2000     128.1
2025-09-09 14:53:30,684 - test_protocol_conformance - INFO -   veth23a    Designated Forwarding 2000     128.2
2025-09-09 14:53:30,728 - test_protocol_conformance - INFO - 
========== rstp3 最终状态 ==========
2025-09-09 14:53:30,729 - test_protocol_conformance - INFO - ---- rstp3 ----
2025-09-09 14:53:30,729 - test_protocol_conformance - INFO - Root ID:
2025-09-09 14:53:30,729 - test_protocol_conformance - INFO -   stp-priority    32768
2025-09-09 14:53:30,729 - test_protocol_conformance - INFO -   stp-system-id   76:9d:61:d1:06:45
2025-09-09 14:53:30,730 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-09 14:53:30,730 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-09 14:53:30,730 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-09 14:53:30,730 - test_protocol_conformance - INFO -   root-port       veth31a
2025-09-09 14:53:30,730 - test_protocol_conformance - INFO -   root-path-cost  2000
2025-09-09 14:53:30,731 - test_protocol_conformance - INFO - Bridge ID:
2025-09-09 14:53:30,731 - test_protocol_conformance - INFO -   stp-priority    40960
2025-09-09 14:53:30,731 - test_protocol_conformance - INFO -   stp-system-id   8a:3e:50:36:75:48
2025-09-09 14:53:30,731 - test_protocol_conformance - INFO -   stp-hello-time  2s
2025-09-09 14:53:30,731 - test_protocol_conformance - INFO -   stp-max-age     20s
2025-09-09 14:53:30,731 - test_protocol_conformance - INFO -   stp-fwd-delay   15s
2025-09-09 14:53:30,732 - test_protocol_conformance - INFO -   Interface  Role       State      Cost     Pri.Nbr 
2025-09-09 14:53:30,732 - test_protocol_conformance - INFO -   ---------- ---------- ---------- -------- -------
2025-09-09 14:53:30,732 - test_protocol_conformance - INFO -   veth23b    Alternate  Discarding 2000     128.1
2025-09-09 14:53:30,732 - test_protocol_conformance - INFO -   veth31a    Root       Forwarding 2000     128.2
2025-09-09 14:53:30,732 - test_protocol_conformance - INFO - 
=== 诊断信息 ===
2025-09-09 14:53:30,785 - test_protocol_conformance - INFO - 系统日志中的STP/RSTP信息:
2025-09-09 14:53:30,785 - test_protocol_conformance - INFO - [437128.455232] rstp0: port 1(veth-test) entered listening state
[437143.623558] rstp0: port 1(veth-test) entered disabled state
[444762.648871] rstp1: entered promiscuous mode
[444762.874918] rstp2: entered promiscuous mode
[444763.110719] rstp3: entered promiscuous mode

2025-09-09 14:53:30,834 - test_protocol_conformance - INFO - OVS日志中的拓扑变更信息:
2025-09-09 14:53:30,835 - test_protocol_conformance - INFO - 2025-09-09T06:53:31.294Z|8511045|rstp_sm|DBG|SE_ETH2, port 2: port_transmit_sm ROLE == DISABLED.
2025-09-09T06:53:31.294Z|8511046|rstp_sm|DBG|rstp2: move_rstp()
2025-09-09T06:53:31.294Z|8511047|rstp_sm|DBG|rstp2, port 1: Port_role_transition_sm 7 -> 6
2025-09-09T06:53:31.294Z|8511048|rstp_sm|DBG|rstp2, port 1: port_transmit_sm 6 -> 3
2025-09-09T06:53:31.294Z|8511049|rstp_sm|DBG|rstp2: move_rstp()
2025-09-09T06:53:31.294Z|8511050|rstp_sm|DBG|rstp2, port 1: Port_role_transition_sm 6 -> 7
2025-09-09T06:53:31.294Z|8511051|rstp_sm|DBG|rstp2, port 1: port_transmit_sm 3 -> 5
2025-09-09T06:53:31.294Z|8511052|rstp_sm|DBG|rstp2: move_rstp()
2025-09-09T06:53:31.294Z|8511053|rstp_sm|DBG|rstp2, port 1: port_transmit_sm 5 -> 6
2025-09-09T06:53:31.294Z|8511054|rstp_sm|DBG|rstp2: move_rstp()
2025-09-09T06:53:31.294Z|8511055|rstp_sm|DBG|br0: move_rstp()
2025-09-09T06:53:31.294Z|8511056|rstp_sm|DBG|rstp1: move_rstp()
2025-09-09T06:53:31.535Z|8511060|bridge|WARN|br0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP
2025-09-09T06:53:31.547Z|8511064|bridge|WARN|br0: RSTP and STP are mutually exclusive but both are configured; enabling RSTP

2025-09-09 14:53:30,835 - test_protocol_conformance - INFO - === 清理测试环境 ===
2025-09-09 14:53:31,398 - test_protocol_conformance - INFO - 拓扑变更通知测试完成
2025-09-09 14:53:31,399 - RSTPTest - INFO - 测试完成: test_topology_change_notification (耗时: 28.39秒)
2025-09-09 14:53:31,399 - RSTPTest - INFO - ============================================================

2025-09-09 14:53:31,399 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 14:53:31,399 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 14:53:31,400 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 14:53:31,547 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 14:53:31,547 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 14:53:31,674 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 14:53:31,674 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 14:53:31,794 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 14:53:31,794 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 14:53:31,795 - RSTPTest - INFO - ============================================================
2025-09-09 14:53:31,795 - RSTPTest - INFO - 开始测试: test_root_bridge_hijack_attack
2025-09-09 14:53:31,795 - RSTPTest - INFO - ============================================================
2025-09-09 14:53:31,796 - test_security - INFO - 开始根网桥劫持攻击测试
2025-09-09 14:53:31,796 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 14:53:31,796 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 14:53:31,796 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 14:53:31,796 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 14:53:31,797 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 14:53:31,797 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 14:53:31,797 - NetworkTopology - INFO - DUT: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 14:53:31,797 - NetworkTopology - INFO - DUT: 检查mstpd支持...
2025-09-09 14:53:31,803 - NetworkTopology - INFO - DUT: mstpd检查结果: code=1
2025-09-09 14:53:31,803 - NetworkTopology - INFO - DUT: 检查iproute2支持...
2025-09-09 14:53:31,849 - NetworkTopology - INFO - DUT: ip命令检查: code=0
2025-09-09 14:53:31,850 - NetworkTopology - INFO - DUT: 使用iproute2配置RSTP
2025-09-09 14:53:31,850 - NetworkTopology - INFO - DUT: 最终选择RSTP方法: iproute2
2025-09-09 14:53:31,850 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 14:53:31,850 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 14:53:32,180 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 14:53:32,573 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 14:53:32,573 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 14:53:32,574 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 14:53:32,574 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 14:53:32,693 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 14:53:32,812 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 14:53:32,813 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 14:53:32,869 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 14:53:32,917 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 14:53:32,965 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 14:53:32,966 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 14:53:32,966 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 14:53:32,966 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 14:53:32,966 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 14:53:32,967 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 14:53:32,967 - NetworkTopology - INFO - TestNode1: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 14:53:32,967 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 14:53:32,974 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 14:53:32,975 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 14:53:33,103 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=1, output=
2025-09-09 14:53:33,103 - NetworkTopology - INFO - TestNode1: 尝试启动mstpd服务...
2025-09-09 14:53:33,276 - NetworkTopology - INFO - TestNode1: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 14:53:35,358 - NetworkTopology - INFO - TestNode1: mstpd启动后状态: code=1
2025-09-09 14:53:35,359 - NetworkTopology - INFO - TestNode1: mstpd启动失败，使用iproute2
2025-09-09 14:53:35,359 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: iproute2
2025-09-09 14:53:35,359 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 14:53:35,359 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 14:53:35,893 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 14:53:36,988 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 14:53:36,988 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 14:53:36,988 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 14:53:36,988 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 14:53:37,319 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 14:53:37,659 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 14:53:37,659 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 14:53:37,838 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 14:53:37,885 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 14:53:37,932 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 14:53:37,933 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 14:53:37,933 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 14:53:37,933 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 14:53:37,934 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 14:53:37,934 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 14:53:37,934 - NetworkTopology - INFO - TestNode2: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 14:53:37,934 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 14:53:37,942 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 14:53:37,942 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 14:53:38,077 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=1, output=
2025-09-09 14:53:38,077 - NetworkTopology - INFO - TestNode2: 尝试启动mstpd服务...
2025-09-09 14:53:38,244 - NetworkTopology - INFO - TestNode2: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 14:53:40,345 - NetworkTopology - INFO - TestNode2: mstpd启动后状态: code=1
2025-09-09 14:53:40,345 - NetworkTopology - INFO - TestNode2: mstpd启动失败，使用iproute2
2025-09-09 14:53:40,345 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: iproute2
2025-09-09 14:53:40,346 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 14:53:40,346 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 14:53:40,900 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 14:53:42,006 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 14:53:42,006 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 14:53:42,007 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 14:53:42,007 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 14:53:42,337 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 14:53:42,679 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 14:53:42,679 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 14:53:42,860 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 14:53:42,908 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 14:53:42,955 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 14:53:42,956 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 14:53:42,956 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 14:53:48,312 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 14:53:48,335 - RSTPTest - INFO - 测试完成: test_root_bridge_hijack_attack (耗时: 16.54秒)
2025-09-09 14:53:48,336 - RSTPTest - INFO - ============================================================

2025-09-09 14:53:48,338 - RSTPTest - INFO - ============================================================
2025-09-09 14:53:48,338 - RSTPTest - INFO - 开始测试: test_bpdu_flood_attack
2025-09-09 14:53:48,338 - RSTPTest - INFO - ============================================================
2025-09-09 14:53:48,338 - test_security - INFO - 开始BPDU洪泛攻击测试
2025-09-09 14:53:48,339 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 14:53:48,339 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 14:53:48,339 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 14:53:48,339 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 14:53:48,339 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 14:53:48,339 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 14:53:48,339 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 14:53:48,340 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 14:53:48,649 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 14:53:49,040 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 14:53:49,040 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 14:53:49,041 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 14:53:49,041 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 14:53:49,160 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 14:53:49,281 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 14:53:49,281 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 14:53:49,337 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 14:53:49,385 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 14:53:49,433 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 14:53:49,434 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 14:53:49,434 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 14:53:49,435 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 14:53:49,435 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 14:53:49,435 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 14:53:49,435 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 14:53:49,435 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 14:53:49,943 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 14:53:51,003 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 14:53:51,003 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 14:53:51,003 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 14:53:51,004 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 14:53:51,365 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 14:53:51,726 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 14:53:51,726 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 14:53:51,900 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 14:53:51,947 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 14:53:51,996 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 14:53:51,996 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 14:53:51,996 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 14:53:51,996 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 14:53:51,997 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 14:53:51,997 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 14:53:51,997 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 14:53:51,997 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 14:53:52,476 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 14:53:53,573 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 14:53:53,573 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 14:53:53,573 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 14:53:53,574 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 14:53:53,905 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 14:53:54,247 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 14:53:54,248 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 14:53:54,407 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 14:53:54,455 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 14:53:54,503 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 14:53:54,503 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 14:53:54,504 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 14:53:59,675 - test_security - INFO - 初始CPU使用率: 0.0%
2025-09-09 14:54:09,898 - test_security - INFO - 洪泛时CPU使用率: 50.0%
2025-09-09 14:54:10,053 - test_security - INFO - 网络在BPDU洪泛下保持稳定
2025-09-09 14:54:10,053 - test_security - INFO - BPDU洪泛攻击测试完成
2025-09-09 14:54:10,054 - RSTPTest - INFO - 测试完成: test_bpdu_flood_attack (耗时: 21.72秒)
2025-09-09 14:54:10,054 - RSTPTest - INFO - ============================================================

2025-09-09 14:54:10,055 - RSTPTest - INFO - ============================================================
2025-09-09 14:54:10,056 - RSTPTest - INFO - 开始测试: test_topology_change_attack
2025-09-09 14:54:10,056 - RSTPTest - INFO - ============================================================
2025-09-09 14:54:10,057 - test_security - INFO - 开始拓扑变更攻击测试
2025-09-09 14:54:10,057 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 14:54:10,057 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 14:54:10,057 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 14:54:10,058 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 14:54:10,058 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 14:54:10,058 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 14:54:10,058 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 14:54:10,059 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 14:54:10,372 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 14:54:10,764 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 14:54:10,764 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 14:54:10,764 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 14:54:10,765 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 14:54:10,879 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 14:54:10,996 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 14:54:10,996 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 14:54:11,052 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 14:54:11,101 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 14:54:11,149 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 14:54:11,149 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 14:54:11,149 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 14:54:11,149 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 14:54:11,149 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 14:54:11,149 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 14:54:11,150 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 14:54:11,150 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 14:54:11,633 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 14:54:12,685 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 14:54:12,686 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 14:54:12,686 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 14:54:12,686 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 14:54:13,019 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 14:54:13,358 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 14:54:13,358 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 14:54:13,519 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 14:54:13,566 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 14:54:13,614 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 14:54:13,615 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 14:54:13,615 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 14:54:13,615 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 14:54:13,615 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 14:54:13,615 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 14:54:13,616 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 14:54:13,616 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 14:54:14,101 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 14:54:15,221 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 14:54:15,221 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 14:54:15,221 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 14:54:15,221 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 14:54:15,587 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 14:54:15,947 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 14:54:15,947 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 14:54:16,123 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 14:54:16,171 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 14:54:16,219 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 14:54:16,219 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 14:54:16,219 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 14:54:21,283 - RSTPAnalyzer_DUT - WARNING - 无法获取详细网桥信息，返回默认值: br0
2025-09-09 14:54:21,343 - RSTPTest - INFO - 测试完成: test_topology_change_attack (耗时: 11.29秒)
2025-09-09 14:54:21,343 - RSTPTest - INFO - ============================================================

2025-09-09 14:54:21,346 - RSTPTest - INFO - ============================================================
2025-09-09 14:54:21,346 - RSTPTest - INFO - 开始测试: test_mac_spoofing
2025-09-09 14:54:21,347 - RSTPTest - INFO - ============================================================
2025-09-09 14:54:21,347 - test_security - INFO - 开始MAC地址欺骗测试
2025-09-09 14:54:21,347 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 14:54:21,347 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 14:54:21,348 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 14:54:21,348 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 14:54:21,348 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 14:54:21,348 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 14:54:21,348 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 14:54:21,348 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 14:54:21,616 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 14:54:22,060 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 14:54:22,060 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 14:54:22,061 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 14:54:22,061 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 14:54:22,181 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 14:54:22,299 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 14:54:22,299 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 14:54:22,353 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 14:54:22,401 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 14:54:22,449 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 14:54:22,450 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 14:54:22,450 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 14:54:22,450 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 14:54:22,450 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 14:54:22,451 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 14:54:22,451 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 14:54:22,451 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 14:54:22,957 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 14:54:24,053 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 14:54:24,053 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 14:54:24,053 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 14:54:24,053 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 14:54:24,406 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 14:54:24,757 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 14:54:24,758 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 14:54:24,936 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 14:54:24,984 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 14:54:25,031 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 14:54:25,031 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 14:54:25,032 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 14:54:25,032 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 14:54:25,032 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 14:54:25,032 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 14:54:25,033 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 14:54:25,033 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 14:54:25,545 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 14:54:26,644 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 14:54:26,645 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 14:54:26,645 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 14:54:26,645 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 14:54:27,004 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 14:54:27,373 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 14:54:27,374 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 14:54:27,567 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 14:54:27,615 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 14:54:27,663 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 14:54:27,664 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 14:54:27,664 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 14:54:32,671 - test_security - INFO - DUT MAC地址: 90:12:10:b5:7d:f7
2025-09-09 14:54:32,672 - test_security - INFO - 尝试MAC地址欺骗...
2025-09-09 14:54:38,292 - test_security - INFO - 网络对MAC欺骗具有抗性
2025-09-09 14:54:38,779 - test_security - INFO - MAC地址欺骗测试完成
2025-09-09 14:54:38,780 - RSTPTest - INFO - 测试完成: test_mac_spoofing (耗时: 17.43秒)
2025-09-09 14:54:38,780 - RSTPTest - INFO - ============================================================

2025-09-09 14:54:38,782 - RSTPTest - INFO - ============================================================
2025-09-09 14:54:38,782 - RSTPTest - INFO - 开始测试: test_port_security
2025-09-09 14:54:38,782 - RSTPTest - INFO - ============================================================
2025-09-09 14:54:38,783 - test_security - INFO - 开始端口安全测试
2025-09-09 14:54:38,788 - test_security - WARNING - 未检测到任何端口安全功能
2025-09-09 14:54:38,789 - RSTPTest - INFO - 测试完成: test_port_security (耗时: 0.01秒)
2025-09-09 14:54:38,789 - RSTPTest - INFO - ============================================================

2025-09-09 14:54:38,789 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 14:54:38,790 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 14:54:38,790 - SSH_DUT - INFO - SSH连接已关闭: DUT
2025-09-09 14:54:39,248 - __main__ - INFO - ============================================================
2025-09-09 14:54:39,248 - __main__ - INFO - 测试完成，返回码: 1
2025-09-09 14:54:39,248 - __main__ - INFO - ============================================================
