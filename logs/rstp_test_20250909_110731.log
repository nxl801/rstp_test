2025-09-09 11:07:31,319 - root - INFO - 日志系统初始化完成，日志文件: logs\rstp_test_20250909_110731.log
2025-09-09 11:07:31,514 - SSH_DUT - INFO - SSH连接成功: DUT (192.168.1.123)
2025-09-09 11:07:31,515 - RSTPTest - INFO - 成功连接到DUT: DUT
2025-09-09 11:07:31,857 - SSH_TestNode1 - INFO - SSH连接成功: TestNode1 (192.168.13.136)
2025-09-09 11:07:31,857 - RSTPTest - INFO - 成功连接到节点: TestNode1
2025-09-09 11:07:32,164 - SSH_TestNode2 - INFO - SSH连接成功: TestNode2 (192.168.13.137)
2025-09-09 11:07:32,164 - RSTPTest - INFO - 成功连接到节点: TestNode2
2025-09-09 11:07:32,165 - RSTPTest - INFO - ============================================================
2025-09-09 11:07:32,166 - RSTPTest - INFO - 开始测试: test_backup_port_concept_verification
2025-09-09 11:07:32,166 - RSTPTest - INFO - ============================================================
2025-09-09 11:07:32,166 - test_backup_port_simulation - INFO - 开始备份端口概念验证测试
2025-09-09 11:07:32,167 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 11:07:32,167 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 11:07:32,167 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 11:07:32,167 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 11:07:32,167 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 11:07:32,168 - NetworkTopology - INFO - DUT: 开始检测RSTP支持方法...
2025-09-09 11:07:32,168 - NetworkTopology - INFO - DUT: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 11:07:32,168 - NetworkTopology - INFO - DUT: 检查mstpd支持...
2025-09-09 11:07:32,174 - NetworkTopology - INFO - DUT: mstpd检查结果: code=1
2025-09-09 11:07:32,174 - NetworkTopology - INFO - DUT: 检查iproute2支持...
2025-09-09 11:07:32,221 - NetworkTopology - INFO - DUT: ip命令检查: code=0
2025-09-09 11:07:32,221 - NetworkTopology - INFO - DUT: 使用iproute2配置RSTP
2025-09-09 11:07:32,221 - NetworkTopology - INFO - DUT: 最终选择RSTP方法: iproute2
2025-09-09 11:07:32,222 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 11:07:32,222 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 11:07:32,523 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 11:07:32,915 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 11:07:32,916 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 11:07:32,916 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 11:07:32,916 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 11:07:33,035 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 11:07:33,147 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 11:07:33,147 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 11:07:33,200 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 11:07:33,248 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 11:07:33,300 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 11:07:33,300 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 11:07:33,301 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 11:07:33,301 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 11:07:33,301 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 11:07:33,301 - NetworkTopology - INFO - TestNode1: 开始检测RSTP支持方法...
2025-09-09 11:07:33,301 - NetworkTopology - INFO - TestNode1: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 11:07:33,302 - NetworkTopology - INFO - TestNode1: 检查mstpd支持...
2025-09-09 11:07:33,318 - NetworkTopology - INFO - TestNode1: mstpd检查结果: code=0
2025-09-09 11:07:33,318 - NetworkTopology - INFO - TestNode1: 检查mstpd服务状态...
2025-09-09 11:07:33,505 - NetworkTopology - INFO - TestNode1: mstpd服务状态: code=1, output=
2025-09-09 11:07:33,505 - NetworkTopology - INFO - TestNode1: 尝试启动mstpd服务...
2025-09-09 11:07:33,857 - NetworkTopology - INFO - TestNode1: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 11:07:36,022 - NetworkTopology - INFO - TestNode1: mstpd启动后状态: code=1
2025-09-09 11:07:36,022 - NetworkTopology - INFO - TestNode1: mstpd启动失败，使用iproute2
2025-09-09 11:07:36,022 - NetworkTopology - INFO - TestNode1: 最终选择RSTP方法: iproute2
2025-09-09 11:07:36,023 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 11:07:36,023 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 11:07:37,171 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 11:07:39,385 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 11:07:39,385 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 11:07:39,385 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 11:07:39,386 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 11:07:40,082 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 11:07:40,788 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 11:07:40,788 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 11:07:41,126 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 11:07:41,189 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 11:07:41,247 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 11:07:41,248 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 11:07:41,248 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 11:07:41,248 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 11:07:41,248 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 11:07:41,248 - NetworkTopology - INFO - TestNode2: 开始检测RSTP支持方法...
2025-09-09 11:07:41,249 - NetworkTopology - INFO - TestNode2: 跳过OVS检测，使用统一的RSTP方法
2025-09-09 11:07:41,249 - NetworkTopology - INFO - TestNode2: 检查mstpd支持...
2025-09-09 11:07:41,266 - NetworkTopology - INFO - TestNode2: mstpd检查结果: code=0
2025-09-09 11:07:41,267 - NetworkTopology - INFO - TestNode2: 检查mstpd服务状态...
2025-09-09 11:07:41,461 - NetworkTopology - INFO - TestNode2: mstpd服务状态: code=1, output=
2025-09-09 11:07:41,461 - NetworkTopology - INFO - TestNode2: 尝试启动mstpd服务...
2025-09-09 11:07:41,786 - NetworkTopology - INFO - TestNode2: mstpd启动命令结果: code=0, stderr=[sudo] admin 的密码：
2025-09-09 11:07:43,922 - NetworkTopology - INFO - TestNode2: mstpd启动后状态: code=1
2025-09-09 11:07:43,922 - NetworkTopology - INFO - TestNode2: mstpd启动失败，使用iproute2
2025-09-09 11:07:43,922 - NetworkTopology - INFO - TestNode2: 最终选择RSTP方法: iproute2
2025-09-09 11:07:43,922 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 11:07:43,923 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 11:07:44,969 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 11:07:47,127 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 11:07:47,127 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 11:07:47,128 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 11:07:47,128 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 11:07:47,804 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 11:07:48,490 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 11:07:48,490 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 11:07:48,830 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 11:07:48,902 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 11:07:48,961 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 11:07:48,961 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 11:07:48,961 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 11:07:59,030 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:07:59,184 - test_backup_port_simulation - INFO - === 当前端口状态 ===
2025-09-09 11:07:59,184 - test_backup_port_simulation - INFO - 端口 eth0: 角色=root, 状态=disabled
2025-09-09 11:07:59,185 - test_backup_port_simulation - INFO - 端口 eth2: 角色=unknown, 状态=disabled
2025-09-09 11:07:59,185 - test_backup_port_simulation - INFO - 端口 eth3: 角色=unknown, 状态=disabled
2025-09-09 11:07:59,186 - test_backup_port_simulation - INFO - ⚠ 在当前点对点拓扑中未检测到备份端口（符合预期）
2025-09-09 11:07:59,186 - test_backup_port_simulation - INFO - 备份端口通常出现在共享介质网段中，当前测试环境为点对点链路
2025-09-09 11:07:59,186 - test_backup_port_simulation - INFO - 端口角色分布: {}
2025-09-09 11:07:59,186 - test_backup_port_simulation - INFO - === RSTP端口角色覆盖分析 ===
2025-09-09 11:07:59,186 - test_backup_port_simulation - INFO - - root端口: 未检测到
2025-09-09 11:07:59,186 - test_backup_port_simulation - INFO - - designated端口: 未检测到
2025-09-09 11:07:59,187 - test_backup_port_simulation - INFO - - alternate端口: 未检测到
2025-09-09 11:07:59,187 - test_backup_port_simulation - INFO - - backup端口: 未检测到（在点对点拓扑中为正常现象）
2025-09-09 11:07:59,187 - test_backup_port_simulation - INFO - 备份端口概念验证测试完成
2025-09-09 11:07:59,188 - RSTPTest - INFO - 测试完成: test_backup_port_concept_verification (耗时: 27.02秒)
2025-09-09 11:07:59,188 - RSTPTest - INFO - ============================================================

2025-09-09 11:07:59,189 - RSTPTest - INFO - ============================================================
2025-09-09 11:07:59,189 - RSTPTest - INFO - 开始测试: test_shared_medium_simulation_attempt
2025-09-09 11:07:59,189 - RSTPTest - INFO - ============================================================
2025-09-09 11:07:59,190 - test_backup_port_simulation - INFO - 开始共享介质模拟尝试
2025-09-09 11:07:59,190 - test_backup_port_simulation - INFO - === 尝试创建共享介质模拟场景 ===
2025-09-09 11:07:59,190 - test_backup_port_simulation - INFO - 创建中心交换机模拟共享介质...
2025-09-09 11:07:59,190 - NetworkTopology - INFO - 创建RSTP环形拓扑...
2025-09-09 11:07:59,190 - NetworkTopology - INFO - 可用节点数量: 3
2025-09-09 11:07:59,191 - NetworkTopology - INFO - 开始配置节点 1/3: DUT
2025-09-09 11:07:59,191 - NetworkTopology - INFO - 为节点 DUT 配置RSTP网桥...
2025-09-09 11:07:59,191 - NetworkTopology - INFO - 开始为 DUT 检测RSTP支持方法...
2025-09-09 11:07:59,191 - NetworkTopology - INFO - DUT: 使用缓存的RSTP方法: iproute2
2025-09-09 11:07:59,191 - NetworkTopology - INFO - DUT 使用方法: iproute2
2025-09-09 11:07:59,191 - NetworkTopology - INFO - 清理 DUT 的旧网桥配置...
2025-09-09 11:07:59,523 - NetworkTopology - INFO - 为 DUT 配置RSTP (iproute2)...
2025-09-09 11:07:59,927 - NetworkTopology - INFO - DUT: RSTP已通过iproute2配置
2025-09-09 11:07:59,927 - NetworkTopology - INFO - DUT RSTP核心配置完成
2025-09-09 11:07:59,928 - NetworkTopology - INFO - 为 DUT 添加接口: ['eth0', 'eth2']
2025-09-09 11:07:59,928 - NetworkTopology - INFO - 添加接口 eth0 到 DUT 的网桥
2025-09-09 11:08:00,047 - NetworkTopology - INFO - 添加接口 eth2 到 DUT 的网桥
2025-09-09 11:08:00,166 - NetworkTopology - INFO - DUT 接口添加完成
2025-09-09 11:08:00,167 - NetworkTopology - INFO - 启动 DUT 的网桥 rstp0...
2025-09-09 11:08:00,219 - NetworkTopology - INFO - 验证 DUT 的RSTP配置...
2025-09-09 11:08:00,268 - NetworkTopology - INFO - DUT: STP/RSTP已启用
2025-09-09 11:08:00,316 - NetworkTopology - INFO - DUT 网桥配置验证完成
2025-09-09 11:08:00,316 - NetworkTopology - INFO - 节点 DUT RSTP配置完成
2025-09-09 11:08:00,316 - NetworkTopology - INFO - 开始配置节点 2/3: TestNode1
2025-09-09 11:08:00,316 - NetworkTopology - INFO - 为节点 TestNode1 配置RSTP网桥...
2025-09-09 11:08:00,317 - NetworkTopology - INFO - 开始为 TestNode1 检测RSTP支持方法...
2025-09-09 11:08:00,317 - NetworkTopology - INFO - TestNode1: 使用缓存的RSTP方法: iproute2
2025-09-09 11:08:00,317 - NetworkTopology - INFO - TestNode1 使用方法: iproute2
2025-09-09 11:08:00,317 - NetworkTopology - INFO - 清理 TestNode1 的旧网桥配置...
2025-09-09 11:08:01,365 - NetworkTopology - INFO - 为 TestNode1 配置RSTP (iproute2)...
2025-09-09 11:08:03,560 - NetworkTopology - INFO - TestNode1: RSTP已通过iproute2配置
2025-09-09 11:08:03,560 - NetworkTopology - INFO - TestNode1 RSTP核心配置完成
2025-09-09 11:08:03,561 - NetworkTopology - INFO - 为 TestNode1 添加接口: ['eth0', 'eth2']
2025-09-09 11:08:03,561 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode1 的网桥
2025-09-09 11:08:04,242 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode1 的网桥
2025-09-09 11:08:04,938 - NetworkTopology - INFO - TestNode1 接口添加完成
2025-09-09 11:08:04,938 - NetworkTopology - INFO - 启动 TestNode1 的网桥 br0...
2025-09-09 11:08:05,291 - NetworkTopology - INFO - 验证 TestNode1 的RSTP配置...
2025-09-09 11:08:05,358 - NetworkTopology - INFO - TestNode1: STP/RSTP已启用
2025-09-09 11:08:05,417 - NetworkTopology - INFO - TestNode1 网桥配置验证完成
2025-09-09 11:08:05,417 - NetworkTopology - INFO - 节点 TestNode1 RSTP配置完成
2025-09-09 11:08:05,418 - NetworkTopology - INFO - 开始配置节点 3/3: TestNode2
2025-09-09 11:08:05,418 - NetworkTopology - INFO - 为节点 TestNode2 配置RSTP网桥...
2025-09-09 11:08:05,418 - NetworkTopology - INFO - 开始为 TestNode2 检测RSTP支持方法...
2025-09-09 11:08:05,418 - NetworkTopology - INFO - TestNode2: 使用缓存的RSTP方法: iproute2
2025-09-09 11:08:05,419 - NetworkTopology - INFO - TestNode2 使用方法: iproute2
2025-09-09 11:08:05,419 - NetworkTopology - INFO - 清理 TestNode2 的旧网桥配置...
2025-09-09 11:08:06,480 - NetworkTopology - INFO - 为 TestNode2 配置RSTP (iproute2)...
2025-09-09 11:08:08,690 - NetworkTopology - INFO - TestNode2: RSTP已通过iproute2配置
2025-09-09 11:08:08,690 - NetworkTopology - INFO - TestNode2 RSTP核心配置完成
2025-09-09 11:08:08,691 - NetworkTopology - INFO - 为 TestNode2 添加接口: ['eth0', 'eth2']
2025-09-09 11:08:08,691 - NetworkTopology - INFO - 添加接口 eth0 到 TestNode2 的网桥
2025-09-09 11:08:09,408 - NetworkTopology - INFO - 添加接口 eth2 到 TestNode2 的网桥
2025-09-09 11:08:10,073 - NetworkTopology - INFO - TestNode2 接口添加完成
2025-09-09 11:08:10,074 - NetworkTopology - INFO - 启动 TestNode2 的网桥 br0...
2025-09-09 11:08:10,419 - NetworkTopology - INFO - 验证 TestNode2 的RSTP配置...
2025-09-09 11:08:10,489 - NetworkTopology - INFO - TestNode2: STP/RSTP已启用
2025-09-09 11:08:10,546 - NetworkTopology - INFO - TestNode2 网桥配置验证完成
2025-09-09 11:08:10,547 - NetworkTopology - INFO - 节点 TestNode2 RSTP配置完成
2025-09-09 11:08:10,547 - NetworkTopology - INFO - 环形拓扑创建完成
2025-09-09 11:08:20,610 - RSTPAnalyzer_DUT - ERROR - 无法获取网桥信息: br0
2025-09-09 11:08:20,763 - test_backup_port_simulation - INFO - === 分析当前端口配置 ===
2025-09-09 11:08:20,764 - test_backup_port_simulation - INFO - ⚠ 未检测到备份端口
2025-09-09 11:08:20,764 - test_backup_port_simulation - INFO - 这在当前测试环境中是正常的，因为缺乏真正的共享介质
2025-09-09 11:08:20,764 - test_backup_port_simulation - INFO - 共享介质模拟尝试完成
2025-09-09 11:08:20,765 - RSTPTest - INFO - 测试完成: test_shared_medium_simulation_attempt (耗时: 21.58秒)
2025-09-09 11:08:20,765 - RSTPTest - INFO - ============================================================

2025-09-09 11:08:20,766 - RSTPTest - INFO - ============================================================
2025-09-09 11:08:20,767 - RSTPTest - INFO - 开始测试: test_backup_port_documentation_verification
2025-09-09 11:08:20,767 - RSTPTest - INFO - ============================================================
2025-09-09 11:08:20,767 - test_backup_port_simulation - INFO - 开始备份端口文档验证
2025-09-09 11:08:20,767 - test_backup_port_simulation - INFO - ✓ PortRole.BACKUP 存在
2025-09-09 11:08:20,768 - test_backup_port_simulation - INFO - === 备份端口理论特性验证 ===
2025-09-09 11:08:20,768 - test_backup_port_simulation - INFO - purpose: 为共享介质网段提供冗余
2025-09-09 11:08:20,768 - test_backup_port_simulation - INFO - difference_from_alternate: 备份端口是同一交换机上指定端口的备份，而备用端口是不同交换机提供的路径
2025-09-09 11:08:20,768 - test_backup_port_simulation - INFO - state: Discarding
2025-09-09 11:08:20,768 - test_backup_port_simulation - INFO - scenario: 出现在连接到集线器或共享介质的场景中
2025-09-09 11:08:20,769 - test_backup_port_simulation - INFO - fast_transition: 当对应的指定端口失效时，可以快速转换为指定端口
2025-09-09 11:08:20,769 - test_backup_port_simulation - INFO - === 端口角色对比 ===
2025-09-09 11:08:20,769 - test_backup_port_simulation - INFO - root: 连接到根桥的最佳路径
2025-09-09 11:08:20,769 - test_backup_port_simulation - INFO - designated: 为网段提供转发服务
2025-09-09 11:08:20,769 - test_backup_port_simulation - INFO - alternate: 提供到根桥的备用路径（来自其他交换机）
2025-09-09 11:08:20,769 - test_backup_port_simulation - INFO - backup: 同一交换机上指定端口的备份（共享介质场景）
2025-09-09 11:08:20,770 - test_backup_port_simulation - INFO - === 测试覆盖率分析 ===
2025-09-09 11:08:20,770 - test_backup_port_simulation - INFO - 已覆盖: Root Port, Designated Port, Alternate Port, Disabled Port
2025-09-09 11:08:20,770 - test_backup_port_simulation - INFO - 部分覆盖: Backup Port (概念验证)
2025-09-09 11:08:20,770 - test_backup_port_simulation - INFO - 覆盖限制: 测试框架无法创建真正的共享介质拓扑
2025-09-09 11:08:20,770 - test_backup_port_simulation - INFO - 建议: 在实际部署环境中使用集线器或配置交换机共享模式进行完整测试
2025-09-09 11:08:20,771 - test_backup_port_simulation - INFO - 备份端口文档验证完成
2025-09-09 11:08:20,771 - RSTPTest - INFO - 测试完成: test_backup_port_documentation_verification (耗时: 0.00秒)
2025-09-09 11:08:20,771 - RSTPTest - INFO - ============================================================

2025-09-09 11:08:20,772 - SSH_TestNode1 - INFO - SSH连接已关闭: TestNode1
2025-09-09 11:08:20,772 - SSH_TestNode2 - INFO - SSH连接已关闭: TestNode2
2025-09-09 11:08:20,773 - SSH_DUT - INFO - SSH连接已关闭: DUT
